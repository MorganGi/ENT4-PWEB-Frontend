{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { createElement, Browser, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu, Signature, PdfFormFieldBase } from '../index';\nimport { NavigationPane } from './navigation-pane';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { AjaxHandler } from '../index';\nimport { Point, Rect, identityMatrix, transformPointByMatrix, contains, rotateMatrix } from '@syncfusion/ej2-drawings';\nimport { SelectTool, MoveTool, ResizeTool, ConnectTool, NodeDrawingTool, PolygonDrawingTool, LineTool, RotateTool, StampTool, InkDrawingTool } from '../drawing/tools';\nimport { Selector } from '../drawing/selector';\nimport { ActiveElements, findActiveElement } from '../drawing/action';\nimport { renderAdornerLayer } from '../drawing/dom-util';\nimport { AnnotationDataFormat } from './types';\nimport { cloneObject } from '../drawing/drawing-util';\nimport { BlazorContextMenu } from './blazor-context-menu';\nimport { createSpinner, showSpinner, hideSpinner } from './spinner';\nimport { BlazorUiAdaptor } from './blazor-ui-adaptor';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n *\n * @hidden\n */\n\nvar PdfViewerBase =\n/** @class */\nfunction () {\n  /**\n   * Initialize the constructor of PDFViewerBase\n   *\n   * @param { PdfViewer } viewer - Specified PdfViewer class.\n   */\n  function PdfViewerBase(viewer) {\n    var _this = this;\n    /**\n     * @private\n     */\n\n\n    this.pageSize = [];\n    /**\n     * @private\n     */\n\n    this.pageCount = 0;\n    /**\n     * @private\n     */\n\n    this.isReRenderRequired = true;\n    /**\n     * @private\n     */\n\n    this.currentPageNumber = 0;\n    /**\n     * @private\n     */\n\n    this.activeElements = new ActiveElements();\n    /**\n     * @private\n     */\n\n    this.mouseDownEvent = null;\n    /**\n     * @private\n     */\n\n    this.isDocumentLoaded = false;\n    /**\n     * @private\n     */\n\n    this.renderedPagesList = [];\n    /**\n     * @private\n     */\n\n    this.pageGap = 8;\n    /**\n     * @private\n     */\n\n    this.signatureAdded = false;\n    /**\n     * @private\n     */\n\n    this.isFreeTextSelected = false;\n    this.pageLeft = 5;\n    this.sessionLimit = 1000;\n    this.pageStopValue = 300;\n    /**\n     * @private\n     */\n\n    this.toolbarHeight = 56;\n    this.pageLimit = 0;\n    this.previousPage = 0;\n    this.isViewerMouseDown = false;\n    this.isViewerMouseWheel = false;\n    this.scrollPosition = 0;\n    this.sessionStorage = [];\n    /**\n     * @private\n     */\n\n    this.isLoadedFormFieldAdded = false;\n    this.pointerCount = 0;\n    this.pointersForTouch = [];\n    /**\n     * @private\n     */\n\n    this.isPasswordAvailable = false;\n    /**\n     * @private\n     */\n\n    this.passwordData = '';\n    /**\n     * @private\n     */\n\n    this.reRenderedCount = 0;\n    this.mouseX = 0;\n    this.mouseY = 0;\n    /**\n     * @private\n     */\n\n    this.mouseLeft = 0;\n    /**\n     * @private\n     */\n\n    this.mouseTop = 0;\n    this.touchClientX = 0;\n    this.touchClientY = 0;\n    this.previousTime = 0;\n    this.currentTime = 0;\n    this.isTouchScrolled = false;\n    this.isLongTouchPropagated = false; // eslint-disable-next-line\n\n    this.longTouchTimer = null;\n    this.isViewerContainerDoubleClick = false; // eslint-disable-next-line\n\n    this.dblClickTimer = null;\n    /**\n     * @private\n     */\n\n    this.pinchZoomStorage = [];\n    /**\n     * @private\n     */\n\n    this.isTextSelectionDisabled = false;\n    /**\n     * @private\n     */\n\n    this.isPanMode = false;\n    this.dragX = 0;\n    this.dragY = 0;\n    this.isScrollbarMouseDown = false;\n    this.scrollX = 0;\n    this.scrollY = 0;\n    this.ispageMoved = false;\n    this.isThumb = false;\n    this.isTapHidden = false; // eslint-disable-next-line\n\n    this.singleTapTimer = null;\n    this.tapCount = 0;\n    this.inputTapCount = 0;\n    /**\n     * @private\n     */\n\n    this.isInitialLoaded = false;\n    this.annotationPageList = [];\n    this.importPageList = [];\n    /**\n     * @private\n     */\n\n    this.isImportAction = false;\n    this.isImportedAnnotation = false;\n    /**\n     * @private\n     */\n\n    this.isAnnotationCollectionRemoved = false;\n    /**\n     * @private\n     */\n\n    this.tool = null; // eslint-disable-next-line\n\n    this.action = 'Select';\n    /**\n     * @private\n     */\n\n    this.eventArgs = null;\n    /**\n     * @private\n     */\n\n    this.inAction = false;\n    /**\n     * @private\n     */\n\n    this.isMouseDown = false;\n    /**\n     * @private\n     */\n\n    this.isStampMouseDown = false;\n    /**\n     * @private\n     */\n\n    this.stampAdded = false;\n    /**\n     * @private\n     */\n\n    this.customStampCount = 0;\n    /**\n     * @private\n     */\n\n    this.isDynamicStamp = false;\n    /**\n     * @private\n     */\n\n    this.isMixedSizeDocument = false;\n    /**\n     * @private\n     */\n\n    this.highestWidth = 0;\n    /**\n     * @private\n     */\n\n    this.highestHeight = 0;\n    /**\n     * @private\n     */\n\n    this.customStampCollection = [];\n    /**\n     * @private\n     */\n\n    this.isAlreadyAdded = false;\n    /**\n     * @private\n     */\n\n    this.isWebkitMobile = false;\n    /**\n     * @private\n     */\n\n    this.isFreeTextContextMenu = false;\n    /**\n     * @private\n     */\n\n    this.isSelection = false;\n    /**\n     * @private\n     */\n\n    this.isAddAnnotation = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.annotationComments = null;\n    /**\n     * @private\n     */\n\n    this.isToolbarSignClicked = false;\n    /**\n     * @private\n     */\n\n    this.signatureCount = 0;\n    /**\n     * @private\n     */\n\n    this.isSignatureAdded = false;\n    /**\n     * @private\n     */\n\n    this.isNewSignatureAdded = false;\n    /**\n     * @private\n     */\n\n    this.isInitialPageMode = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.documentAnnotationCollections = null;\n    /**\n     * @private\n     */\n\n    this.annotationRenderredList = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.annotationStorage = {};\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.formFieldStorage = {};\n    /**\n     * @private\n     */\n\n    this.isStorageExceed = false;\n    /**\n     * @private\n     */\n\n    this.isNewStamp = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.downloadCollections = {};\n    /**\n     * @private\n     */\n\n    this.isAnnotationAdded = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.annotationEvent = null;\n    /**\n     * @private\n    */\n\n    this.isAnnotationDrawn = false;\n    /**\n     * @private\n     */\n\n    this.isAnnotationSelect = false;\n    /**\n     * @private\n     */\n\n    this.isAnnotationMouseDown = false;\n    /**\n     * @private\n     */\n\n    this.isAnnotationMouseMove = false;\n    /**\n     * @private\n     */\n\n    this.validateForm = false;\n    /**\n     * @private\n     */\n\n    this.isMinimumZoom = false;\n    /**\n     * @private\n     */\n\n    this.documentLoaded = false;\n    this.tileRenderCount = 0;\n    this.tileRequestCount = 0;\n    /**\n     * @private\n     */\n\n    this.isTileImageRendered = false;\n    this.isDataExits = false;\n    this.requestLists = [];\n    this.tilerequestLists = [];\n    /**\n     * @private\n     */\n\n    this.isInkAdded = false;\n    /**\n     * @private\n     */\n\n    this.inkCount = 0;\n    /**\n     * @private\n     */\n\n    this.isAddedSignClicked = false;\n    /**\n     * @private\n     */\n\n    this.imageCount = 0;\n    /**\n     * @private\n     */\n\n    this.isMousedOver = false;\n    /**\n     * @private\n     */\n\n    this.isFormFieldSelect = false;\n    /**\n     * @private\n     */\n\n    this.isFormFieldMouseDown = false;\n    /**\n     * @private\n     */\n\n    this.isFormFieldMouseMove = false;\n    /**\n     * @private\n     */\n\n    this.isFormFieldMousedOver = false;\n    /**\n     * @private\n     */\n\n    this.isPassword = false;\n    this.isDrawnCompletely = false;\n    /**\n     * @private\n     */\n\n    this.isAddComment = false;\n    /**\n     * @private\n     */\n\n    this.drawSignatureWithTool = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.formFieldCollection = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.nonFillableFields = {};\n    /**\n     * @private\n     */\n\n    this.isInitialField = false;\n    /**\n     * @private\n     */\n\n    this.isTouchDesignerMode = false;\n    /**\n     * @private\n     */\n\n    this.isPrint = false;\n    /**\n     * @private\n     */\n\n    this.isJsonImported = false;\n    /**\n     * @private\n     */\n\n    this.isJsonExported = false;\n    /**\n     * @private\n     */\n\n    this.isPageRotated = false;\n    this.downloadFileName = '';\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.isFocusField = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.focusField = [];\n    /**\n     * @returns {void}\n     */\n\n    this.clearSessionStorage = function () {\n      var documentId = '';\n\n      if (Browser.isIE || Browser.info.name === 'edge') {\n        documentId = decodeURI(window.sessionStorage.getItem('hashId'));\n      } else {\n        documentId = window.sessionStorage.getItem('hashId');\n      }\n\n      var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n\n      if (documentId !== null) {\n        // eslint-disable-next-line max-len\n        var jsonObject = {\n          hashId: documentId,\n          documentLiveCount: documentLiveCount,\n          action: 'Unload',\n          elementId: _this.pdfViewer.element.id\n        };\n        var actionName = window.sessionStorage.getItem('unload');\n        var serviceUrl = window.sessionStorage.getItem('serviceURL');\n\n        if (serviceUrl && serviceUrl !== 'undefined') {\n          // eslint-disable-next-line\n          var browserSupportsKeepalive = ('keepalive' in new Request(''));\n\n          if (browserSupportsKeepalive) {\n            // eslint-disable-next-line\n            var headerValue = _this.setUnloadRequestHeaders();\n\n            var credentialsData = _this.pdfViewer.ajaxRequestSettings.withCredentials ? 'include' : 'omit';\n            fetch(serviceUrl + '/' + actionName, {\n              method: 'POST',\n              credentials: credentialsData,\n              headers: headerValue,\n              body: JSON.stringify(jsonObject)\n            });\n          }\n        } else if (isBlazor()) {\n          _this.clearCache(actionName, jsonObject, _this);\n        }\n      }\n\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_textMarkup');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_shape');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_shape_measure');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_stamp');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_sticky');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_freetext');\n      window.sessionStorage.removeItem(_this.documentId + '_formfields');\n      window.sessionStorage.removeItem(_this.documentId + '_formDesigner');\n      window.sessionStorage.removeItem(_this.documentId + '_annotations_sign');\n      window.sessionStorage.removeItem(_this.documentId + '_pagedata');\n      window.sessionStorage.removeItem('hashId');\n      window.sessionStorage.removeItem('documentLiveCount');\n      window.sessionStorage.removeItem('currentDocument');\n      window.sessionStorage.removeItem('serviceURL');\n      window.sessionStorage.removeItem('unload');\n    };\n    /**\n     * @private\n     * @param {MouseEvent} event - Mouse event.\n     * @returns {void}\n     */\n\n\n    this.onWindowResize = function (event) {\n      var proxy = null;\n      proxy = _this;\n\n      if (_this.pdfViewer.enableRtl) {\n        // eslint-disable-next-line max-len\n        proxy.viewerContainer.style.right = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px'; // eslint-disable-next-line max-len\n\n        proxy.viewerContainer.style.left = (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.commentPanelContainer.offsetWidth : 0) + 'px';\n      } else {\n        // eslint-disable-next-line max-len\n        proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px'; // eslint-disable-next-line max-len\n\n        proxy.viewerContainer.style.right = (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.commentPanelContainer.offsetWidth : 0) + 'px';\n      } // eslint-disable-next-line\n\n\n      var viewerElementWidth = proxy.pdfViewer.element.clientWidth > 0 ? proxy.pdfViewer.element.clientWidth : proxy.pdfViewer.element.style.width; // eslint-disable-next-line\n\n      var viewerWidth = viewerElementWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) - (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.getViewerContainerRight() : 0);\n      proxy.viewerContainer.style.width = viewerWidth + 'px';\n\n      if (proxy.pdfViewer.toolbarModule) {\n        // eslint-disable-next-line\n        var toolbarContainer = isBlazor() ? proxy.pdfViewer.element.querySelector('.e-pv-toolbar') : proxy.getElement('_toolbarContainer');\n        var toolbarHeight = 0;\n        var formDesignerToolbarHeight = 0;\n\n        if (toolbarContainer) {\n          toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n        }\n\n        if (proxy.isAnnotationToolbarHidden() || Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n          if (toolbarHeight === 0) {\n            if (_this.navigationPane.isNavigationToolbarVisible) {\n              // eslint-disable-next-line\n              var navigationToolbar = proxy.getElement('_navigationToolbar');\n              toolbarHeight = navigationToolbar.getBoundingClientRect().height;\n            }\n          }\n\n          if (!proxy.isFormDesignerToolbarHidded()) {\n            var formDesignerToolbar = proxy.getElement('_formdesigner_toolbar');\n            formDesignerToolbarHeight = formDesignerToolbar ? formDesignerToolbar.getBoundingClientRect().height : 0;\n          } // eslint-disable-next-line max-len\n\n\n          proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + formDesignerToolbarHeight);\n        } else {\n          // eslint-disable-next-line\n          var annotationToolbarContainer = isBlazor() ? proxy.pdfViewer.element.querySelector('.e-pv-annotation-toolbar') : proxy.getElement('_annotation_toolbar');\n          var annotationToolbarHeight = 0;\n\n          if (annotationToolbarContainer) {\n            annotationToolbarHeight = annotationToolbarContainer.getBoundingClientRect().height;\n          } // eslint-disable-next-line max-len\n\n\n          proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + annotationToolbarHeight);\n        }\n      } else {\n        proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n      }\n\n      if (proxy.pdfViewer.bookmarkViewModule && Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n        var bookmarkContainer = proxy.getElement('_bookmarks_container');\n\n        if (bookmarkContainer) {\n          bookmarkContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n        }\n      }\n\n      if (proxy.viewerContainer.style.height === '0px') {\n        if (proxy.pdfViewer.height.toString() === 'auto') {\n          proxy.pdfViewer.height = 500;\n          proxy.viewerContainer.style.height = proxy.pdfViewer.height + 'px';\n        } else {\n          proxy.viewerContainer.style.height = proxy.pdfViewer.element.style.height;\n        }\n      }\n\n      if (proxy.viewerContainer.style.width === '0px') {\n        if (proxy.pdfViewer.width.toString() === 'auto') {\n          proxy.pdfViewer.width = 500;\n          proxy.viewerContainer.style.width = proxy.pdfViewer.width + 'px';\n        } else {\n          proxy.viewerContainer.style.width = proxy.pdfViewer.element.style.width;\n        }\n      }\n\n      proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n\n      if (proxy.viewerContainer.clientWidth === 0) {\n        proxy.pageContainer.style.width = proxy.pdfViewer.element.style.width;\n      }\n\n      if (!isBlazor()) {\n        if (proxy.pdfViewer.toolbarModule) {\n          // eslint-disable-next-line max-len\n          proxy.pdfViewer.toolbarModule.onToolbarResize(proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth);\n        }\n      }\n\n      if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n        proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n      }\n\n      if (proxy.pdfViewer.textSearchModule && (!Browser.isDevice || _this.pdfViewer.enableDesktopMode)) {\n        proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n      }\n\n      if (viewerWidth !== 0) {\n        if (!proxy.navigationPane.isBookmarkListOpen) {\n          proxy.updateZoomValue();\n        }\n      }\n\n      if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n        proxy.mobileScrollerContainer.style.left = viewerWidth - parseFloat(proxy.mobileScrollerContainer.style.width) + 'px';\n        proxy.mobilePageNoContainer.style.left = viewerWidth / 2 - parseFloat(proxy.mobilePageNoContainer.style.width) / 2 + 'px';\n        proxy.mobilePageNoContainer.style.top = proxy.pdfViewer.element.clientHeight / 2 + 'px';\n        proxy.updateMobileScrollerPosition();\n      } else {\n        proxy.navigationPane.setResizeIconTop();\n        proxy.navigationPane.setCommentPanelResizeIconTop();\n\n        if (event && event.type === 'resize') {\n          proxy.signatureModule.updateCanvasSize();\n        }\n      }\n\n      if (proxy.navigationPane.sideBarToolbar) {\n        proxy.navigationPane.sideBarToolbar.style.height = proxy.viewerContainer.style.height;\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnMousedown = function (event) {\n      _this.isFreeTextContextMenu = false;\n      var isUpdate = false;\n      _this.isSelection = true;\n\n      if (event.button === 0 && !_this.getPopupNoteVisibleStatus() && !_this.isClickedOnScrollBar(event, false)) {\n        _this.isViewerMouseDown = true; // eslint-disable-next-line\n\n        var target = event.target;\n\n        if (event.detail === 1 && target.className !== 'e-pdfviewer-formFields' && target.className !== 'free-text-input') {\n          isUpdate = true;\n\n          _this.focusViewerContainer(true);\n        }\n\n        _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n        _this.mouseX = event.clientX;\n        _this.mouseY = event.clientY;\n        _this.mouseLeft = event.clientX;\n        _this.mouseTop = event.clientY; // eslint-disable-next-line\n\n        var isIE = !!document.documentMode;\n\n        if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event, true) && !_this.isTextSelectionDisabled) {\n          if (!isIE && target.className !== 'e-pdfviewer-formFields' && target.className !== 'e-pdfviewer-ListBox' && target.className !== 'e-pv-formfield-dropdown' && target.className !== 'e-pv-formfield-listbox') {\n            event.preventDefault();\n          }\n\n          if (target.className !== 'e-pv-droplet') {\n            _this.pdfViewer.textSelectionModule.clearTextSelection();\n          }\n        }\n      }\n\n      if (_this.isClickedOnScrollBar(event, false)) {\n        _this.isViewerMouseDown = true;\n      }\n\n      if (_this.isPanMode) {\n        _this.dragX = event.pageX;\n        _this.dragY = event.pageY; // eslint-disable-next-line max-len\n\n        if (_this.viewerContainer.contains(event.target) && event.target !== _this.viewerContainer && event.target !== _this.pageContainer && _this.isPanMode) {\n          _this.viewerContainer.style.cursor = 'grabbing';\n        }\n      }\n\n      if (_this.isShapeBasedAnnotationsEnabled()) {\n        _this.diagramMouseDown(event);\n      }\n\n      if (_this.pdfViewer.annotation && _this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer) {\n        if (!isUpdate) {\n          _this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement = false;\n\n          _this.updateCommentPanel();\n\n          isUpdate = true;\n        }\n      }\n\n      if (isBlazor()) {\n        _this.mouseDownHandler(event);\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnMouseup = function (event) {\n      if (!_this.getPopupNoteVisibleStatus()) {\n        if (_this.isViewerMouseDown) {\n          if (_this.scrollHoldTimer) {\n            clearTimeout(_this.scrollHoldTimer);\n            _this.scrollHoldTimer = null;\n          }\n\n          if (_this.scrollPosition * _this.getZoomFactor() !== _this.viewerContainer.scrollTop) {\n            _this.pageViewScrollChanged(_this.currentPageNumber);\n          }\n        }\n\n        var isSignatureFieldReadOnly = false;\n\n        if (event.target) {\n          if (event.target.className == 'e-pv-show-designer-name' && event.target.id.split('_', 1) != '') {\n            isSignatureFieldReadOnly = document.getElementById(event.target.id.split('_', 1)).disabled;\n          }\n\n          if (event.target.className == 'foreign-object' && event.target.children[0]) {\n            isSignatureFieldReadOnly = event.target.children[0].disabled;\n          }\n        }\n\n        if (isSignatureFieldReadOnly && _this.pdfViewer.annotation) {\n          _this.pdfViewer.annotation.clearSelection();\n        }\n\n        if (_this.isShapeBasedAnnotationsEnabled() && !isSignatureFieldReadOnly) {\n          _this.diagramMouseUp(event);\n\n          if (_this.pdfViewer.annotation) {\n            _this.pdfViewer.annotation.onAnnotationMouseUp();\n          }\n        }\n\n        if (_this.pdfViewer.selectedItems.formFields.length > 0) {\n          // eslint-disable-next-line max-len\n          if (!isNullOrUndefined(_this.pdfViewer.toolbar) && !isNullOrUndefined(_this.pdfViewer.toolbar.formDesignerToolbarModule) && !Browser.isDevice) {\n            _this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);\n          }\n        } else {\n          // eslint-disable-next-line max-len\n          if (!isNullOrUndefined(_this.pdfViewer.toolbar) && !isNullOrUndefined(_this.pdfViewer.toolbar.formDesignerToolbarModule) && !Browser.isDevice) {\n            _this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(false);\n          }\n        }\n\n        _this.isSelection = false; // eslint-disable-next-line max-len\n\n        var commentElement = document.getElementById(_this.pdfViewer.element.id + '_commantPanel');\n\n        if (commentElement && commentElement.style.display === 'block') {\n          if (_this.pdfViewer.selectedItems) {\n            if (_this.pdfViewer.selectedItems.annotations.length !== 0) {\n              // eslint-disable-next-line\n              var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.pdfViewer.currentPageNumber);\n\n              if (accordionExpand) {\n                accordionExpand.ej2_instances[0].expandItem(true);\n              } // eslint-disable-next-line\n\n\n              var commentsDiv = document.getElementById(_this.pdfViewer.selectedItems.annotations[0].annotName);\n\n              if (commentsDiv) {\n                if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                  commentsDiv.firstChild.click();\n                }\n              }\n            }\n          }\n        }\n\n        if (event.button === 0 && !_this.isClickedOnScrollBar(event, false)) {\n          // 0 is for left button.\n          var eventTarget = event.target;\n          var offsetX = event.clientX;\n          var offsetY = event.clientY;\n\n          var zoomFactor = _this.getZoomFactor();\n\n          var pageIndex = _this.currentPageNumber;\n\n          if (eventTarget) {\n            // eslint-disable-next-line\n            var pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1] || eventTarget.id.split('_pageDiv_')[1]; // eslint-disable-next-line\n\n            pageIndex = parseInt(pageString);\n          }\n\n          var pageDiv = _this.getElement('_pageDiv_' + pageIndex);\n\n          if (pageDiv) {\n            var pageCurrentRect = pageDiv.getBoundingClientRect();\n            offsetX = (event.clientX - pageCurrentRect.left) / zoomFactor;\n            offsetY = (event.clientY - pageCurrentRect.top) / zoomFactor;\n          } // eslint-disable-next-line max-len\n\n\n          if (eventTarget && eventTarget.classList && !eventTarget.classList.contains('e-pv-hyperlink') && !eventTarget.classList.contains('e-pv-page-container')) {\n            // eslint-disable-next-line\n            _this.pdfViewer.firePageClick(offsetX, offsetY, pageIndex + 1);\n\n            if (_this.pdfViewer.formFieldsModule && !_this.pdfViewer.formDesignerModule) {\n              _this.pdfViewer.formFieldsModule.removeFocus();\n            }\n          }\n\n          if (_this.isTextMarkupAnnotationModule() && !_this.isToolbarInkClicked) {\n            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);\n          }\n\n          if (_this.pdfViewer.formDesignerModule && !_this.pdfViewer.annotationModule) {\n            _this.pdfViewer.formDesignerModule.updateCanvas(pageIndex);\n          } // eslint-disable-next-line max-len\n\n\n          if (_this.viewerContainer.contains(event.target) && event.target !== _this.viewerContainer && event.target !== _this.pageContainer && _this.isPanMode) {\n            _this.viewerContainer.style.cursor = 'move';\n            _this.viewerContainer.style.cursor = '-webkit-grab';\n            _this.viewerContainer.style.cursor = '-moz-grab';\n            _this.viewerContainer.style.cursor = 'grab';\n          }\n        }\n\n        _this.isViewerMouseDown = false;\n      }\n    };\n    /**\n     * @param {WheelEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnMouseWheel = function (event) {\n      _this.isViewerMouseWheel = true;\n\n      if (_this.getRerenderCanvasCreated()) {\n        event.preventDefault();\n      }\n\n      if (event.ctrlKey) {\n        var zoomDifference = 25;\n\n        if (_this.pdfViewer.magnification.zoomFactor < 1) {\n          zoomDifference = 10;\n        }\n\n        if (_this.pdfViewer.magnification.zoomFactor >= 2) {\n          zoomDifference = 50;\n        } // eslint-disable-next-line\n\n\n        if (event.wheelDelta > 0) {\n          _this.pdfViewer.magnification.zoomTo(_this.pdfViewer.magnification.zoomFactor * 100 + zoomDifference);\n        } else {\n          _this.pdfViewer.magnification.zoomTo(_this.pdfViewer.magnification.zoomFactor * 100 - zoomDifference);\n        }\n      }\n\n      if (_this.pdfViewer.magnificationModule) {\n        _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n\n        if (event.ctrlKey) {\n          event.preventDefault();\n        }\n\n        _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n      }\n\n      if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n        if (_this.isViewerMouseDown) {\n          if (!event.target.classList.contains('e-pv-text')) {\n            _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n          }\n        }\n      }\n    };\n    /**\n     * @param {KeyboardEvent} event - The KeyboardEvent.\n     * @returns {void}\n     */\n\n\n    this.onWindowKeyDown = function (event) {\n      var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n      var isCommandKey = isMac ? event.metaKey : false;\n\n      if (_this.isFreeTextAnnotationModule() && _this.pdfViewer.annotationModule && (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === true || _this.pdfViewer.annotationModule.inputElementModule.isInFocus === true)) {\n        return;\n      }\n\n      if (!event.ctrlKey || !isCommandKey) {\n        switch (event.keyCode) {\n          case 27:\n            if (_this.pdfViewer.toolbar) {\n              _this.pdfViewer.toolbar.addInkAnnotation();\n\n              _this.pdfViewer.toolbar.deSelectCommentAnnotation();\n\n              _this.pdfViewer.toolbar.updateStampItems();\n\n              if (_this.pdfViewer.toolbar.annotationToolbarModule) {\n                if (isBlazor()) {\n                  _this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor();\n                } else {\n                  _this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems();\n                }\n              }\n\n              if (_this.pdfViewer.isFormDesignerToolbarVisible && document.getElementById('FormField_helper_html_element')) {\n                var formFieldElement = document.getElementById('FormField_helper_html_element');\n\n                if (formFieldElement) {\n                  formFieldElement.remove();\n                }\n              }\n\n              _this.pdfViewer.tool = '';\n\n              _this.focusViewerContainer();\n            }\n\n            break;\n\n          case 9:\n            if (event.target && event.target.id && _this.pdfViewer.formFields) {\n              for (var i = 0; i < _this.pdfViewer.formFields.length; i++) {\n                var formField = _this.pdfViewer.formFields[i];\n\n                if (event.target.id === formField.id) {\n                  // eslint-disable-next-line\n                  var field = {\n                    value: formField.value,\n                    fontFamily: formField.fontFamily,\n                    fontSize: formField.fontSize,\n                    fontStyle: formField.fontStyle,\n                    // eslint-disable-next-line\n                    color: formField.color,\n                    backgroundColor: formField.backgroundColor,\n                    alignment: formField.alignment,\n                    isReadonly: formField.isReadonly,\n                    visibility: formField.visibility,\n                    // eslint-disable-next-line\n                    maxLength: formField.maxLength,\n                    isRequired: formField.isRequired,\n                    isPrint: formField.isPrint,\n                    rotation: formField.rotateAngle,\n                    tooltip: formField.tooltip,\n                    // eslint-disable-next-line\n                    options: formField.options,\n                    isChecked: formField.isChecked,\n                    isSelected: formField.isSelected\n                  };\n\n                  _this.pdfViewer.fireFocusOutFormField(field, formField.pageIndex);\n                }\n              }\n            }\n\n            break;\n        }\n      }\n    };\n    /**\n     * @param {KeyboardEvent} event - The KeyboardEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnKeyDown = function (event) {\n      var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n      var isCommandKey = isMac ? event.metaKey : false;\n\n      if (_this.isFreeTextAnnotationModule() && _this.pdfViewer.annotationModule && (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === true || _this.pdfViewer.annotationModule.inputElementModule.isInFocus === true)) {\n        return;\n      }\n\n      if (event.ctrlKey || isCommandKey) {\n        // add keycodes if shift key is used.\n        if (event.shiftKey && !isMac || isMac && !event.shiftKey) {\n          switch (event.keyCode) {\n            case 38: // up arrow\n\n            case 33:\n              // page up\n              event.preventDefault();\n\n              if (_this.currentPageNumber !== 1) {\n                _this.updateScrollTop(0);\n              }\n\n              break;\n\n            case 40: // down arrow\n\n            case 34:\n              // page down\n              event.preventDefault();\n\n              if (_this.currentPageNumber !== _this.pageCount) {\n                _this.updateScrollTop(_this.pageCount - 1);\n              }\n\n              break;\n\n            default:\n              break;\n          }\n        }\n\n        switch (event.keyCode) {\n          case 79:\n            // o key\n            if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n              _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n            }\n\n            break;\n\n          case 67:\n            // c key\n            if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n              event.preventDefault();\n\n              _this.pdfViewer.textSelectionModule.copyText();\n            }\n\n            if (_this.pdfViewer.selectedItems.annotations.length || _this.pdfViewer.selectedItems.formFields.length) {\n              _this.pdfViewer.copy();\n\n              _this.contextMenuModule.previousAction = 'Copy';\n            }\n\n            break;\n\n          case 70:\n            // f key\n            if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n              event.preventDefault();\n\n              _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n            }\n\n            break;\n\n          case 80:\n            // p key\n            if (_this.pdfViewer.printModule && _this.pdfViewer.enablePrint) {\n              event.preventDefault();\n\n              _this.pdfViewer.print.print();\n            }\n\n            break;\n\n          case 90:\n            //z key\n            if (_this.pdfViewer.annotationModule) {\n              _this.pdfViewer.annotationModule.undo();\n            }\n\n            break;\n\n          case 88:\n            //x key\n            if (_this.pdfViewer.selectedItems.annotations.length || _this.pdfViewer.selectedItems.formFields.length) {\n              _this.pdfViewer.cut();\n\n              _this.contextMenuModule.previousAction = 'Cut';\n            }\n\n            break;\n\n          case 89:\n            //y key\n            if (_this.pdfViewer.annotationModule) {\n              _this.pdfViewer.annotationModule.redo();\n            }\n\n            break;\n\n          case 86:\n            //v key\n            // eslint-disable-next-line max-len\n            if (_this.pdfViewer.annotation && _this.pdfViewer.annotation.isShapeCopied || _this.pdfViewer.formFields && _this.pdfViewer.formDesigner.isShapeCopied) {\n              _this.pdfViewer.paste();\n\n              _this.contextMenuModule.previousAction = 'Paste';\n            }\n\n            break;\n\n          default:\n            break;\n        }\n      } else {\n        switch (event.keyCode) {\n          case 46:\n            _this.DeleteKeyPressed(event);\n\n            break;\n        }\n      }\n\n      if (_this.pdfViewer.magnificationModule) {\n        _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnMousemove = function (event) {\n      _this.mouseX = event.clientX;\n      _this.mouseY = event.clientY; // eslint-disable-next-line\n\n      var isIE = !!document.documentMode;\n      var target = event.target;\n\n      if (_this.action === 'Drag') {\n        event.preventDefault();\n      } // eslint-disable-next-line max-len\n\n\n      if (_this.isViewerMouseDown && !(_this.action === 'Perimeter' || _this.action === 'Polygon' || _this.action === 'Line' || _this.action === 'DrawTool' || _this.action === 'Distance')) {\n        // eslint-disable-next-line max-len\n        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled && !_this.getPopupNoteVisibleStatus()) {\n          // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n          // this region block the toc/hyperlink navigation on sometimes.\n          // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n          // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n          // }\n          if (!isIE) {\n            if (event.target.className != 'e-pdfviewer-formFields') event.preventDefault();\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY; // eslint-disable-next-line\n\n            var annotationModule = _this.pdfViewer.annotationModule; // eslint-disable-next-line max-len\n\n            if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isDropletClicked && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n              annotationModule.textMarkupAnnotationModule.textSelect(event.target, _this.mouseX, _this.mouseY);\n            } else {\n              _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n            }\n          } else {\n            var selection = window.getSelection();\n\n            if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n              _this.pdfViewer.textSelectionModule.isTextSelection = true;\n            }\n          }\n        } else if (_this.skipPreventDefault(target)) {\n          event.preventDefault();\n        }\n      }\n\n      if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);\n      }\n\n      if (_this.isPanMode) {\n        _this.panOnMouseMove(event);\n      }\n\n      if (_this.isShapeBasedAnnotationsEnabled()) {\n        var canvas = void 0; // eslint-disable-next-line max-len\n\n        if (event.target && (event.target.id.indexOf('_text') > -1 || event.target.parentElement.classList.contains('foreign-object') || event.target.id.indexOf('_annotationCanvas') > -1 || event.target.classList.contains('e-pv-hyperlink')) && _this.pdfViewer.annotation || event.target.classList.contains('e-pdfviewer-formFields')) {\n          var pageIndex = _this.pdfViewer.annotation.getEventPageNumber(event);\n\n          var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n\n          if (diagram) {\n            var canvas1 = diagram.getBoundingClientRect();\n            var left = canvas1.x ? canvas1.x : canvas1.left;\n            var top_1 = canvas1.y ? canvas1.y : canvas1.top; // eslint-disable-next-line max-len\n\n            if (_this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation && _this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType === 'Image') {\n              canvas = new Rect(left, top_1, canvas1.width - 10, canvas1.height - 10);\n            } else {\n              canvas = new Rect(left + 1, top_1 + 1, canvas1.width - 3, canvas1.height - 3);\n            }\n          }\n        } else if (!_this.pdfViewer.annotationModule && _this.pdfViewer.formDesignerModule) {\n          var pageIndex = _this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n\n          var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n\n          if (diagram) {\n            var canvas1 = diagram.getBoundingClientRect();\n            var left = canvas1.x ? canvas1.x : canvas1.left;\n            var top_2 = canvas1.y ? canvas1.y : canvas1.top;\n            canvas = new Rect(left + 10, top_2 + 10, canvas1.width - 10, canvas1.height - 10);\n          }\n        } // eslint-disable-next-line max-len\n\n\n        var stampModule = _this.pdfViewer.annotationModule ? _this.pdfViewer.annotationModule.stampAnnotationModule : null;\n\n        if (canvas && canvas.containsPoint({\n          x: _this.mouseX,\n          y: _this.mouseY\n        }) && !(stampModule && stampModule.isStampAnnotSelected)) {\n          _this.diagramMouseMove(event);\n\n          _this.annotationEvent = event;\n        } else {\n          _this.diagramMouseLeave(event);\n\n          if (_this.isAnnotationDrawn && _this.action !== 'Ink') {\n            _this.diagramMouseUp(event);\n\n            _this.isAnnotationAdded = true;\n          }\n        }\n\n        if (_this.pdfViewer.enableStampAnnotations) {\n          if (stampModule && stampModule.isStampAnnotSelected) {\n            _this.pdfViewer.tool = 'Stamp';\n            _this.tool = new StampTool(_this.pdfViewer, _this);\n            _this.isMouseDown = true;\n            stampModule.isStampAnnotSelected = false;\n            stampModule.isNewStampAnnot = true;\n          }\n        }\n\n        if (_this.isSignatureAdded && _this.pdfViewer.enableHandwrittenSignature) {\n          _this.pdfViewer.tool = 'Stamp';\n          _this.tool = new StampTool(_this.pdfViewer, _this);\n          _this.isMouseDown = true;\n          _this.isSignatureAdded = false;\n          _this.isNewSignatureAdded = true;\n        }\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n\n\n    this.panOnMouseMove = function (event) {\n      var isStampMode = false; // eslint-disable-next-line max-len\n\n      if (_this.action === 'Ink' || _this.action === \"Line\" || _this.action === 'Perimeter' || _this.action === 'Polygon' || _this.action === 'DrawTool' || _this.action === 'Drag' || _this.action.indexOf('Rotate') !== -1 || _this.action.indexOf('Resize') !== -1) {\n        isStampMode = true;\n      } // eslint-disable-next-line max-len\n\n\n      if (_this.viewerContainer.contains(event.target) && event.target !== _this.viewerContainer && event.target !== _this.pageContainer && !isStampMode) {\n        if (_this.isViewerMouseDown) {\n          var deltaX = _this.dragX - event.pageX;\n          var deltaY = _this.dragY - event.pageY;\n          _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n          _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n          _this.viewerContainer.style.cursor = 'move';\n          _this.viewerContainer.style.cursor = '-webkit-grabbing';\n          _this.viewerContainer.style.cursor = '-moz-grabbing';\n          _this.viewerContainer.style.cursor = 'grabbing';\n          _this.dragX = event.pageX;\n          _this.dragY = event.pageY;\n        } else {\n          if (!_this.navigationPane.isNavigationPaneResized) {\n            _this.viewerContainer.style.cursor = 'move';\n            _this.viewerContainer.style.cursor = '-webkit-grab';\n            _this.viewerContainer.style.cursor = '-moz-grab';\n            _this.viewerContainer.style.cursor = 'grab';\n          }\n        }\n      } else {\n        if (!_this.navigationPane.isNavigationPaneResized) {\n          _this.viewerContainer.style.cursor = 'auto';\n        }\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnMouseLeave = function (event) {\n      if (_this.isViewerMouseDown) {\n        if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n          _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n        }\n      }\n\n      if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.textSelectionModule.isTextSelection) {\n        event.preventDefault();\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnMouseEnter = function (event) {\n      if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n        _this.pdfViewer.textSelectionModule.clear();\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnMouseOver = function (event) {\n      // eslint-disable-next-line\n      var isIE = !!document.documentMode;\n\n      if (_this.isViewerMouseDown) {\n        if (!isIE) {\n          event.preventDefault();\n        }\n      }\n    };\n    /**\n     * @param {MouseEvent} event - The MouseEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnClick = function (event) {\n      if (event.type === 'dblclick') {\n        if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getCurrentTextMarkupAnnotation()) {\n          if (event.target.classList.contains('e-pv-text')) {\n            _this.isViewerContainerDoubleClick = true;\n\n            if (!_this.getTextMarkupAnnotationMode()) {\n              var pageNumber = parseFloat(event.target.id.split('_')[2]);\n\n              _this.pdfViewer.fireTextSelectionStart(pageNumber + 1);\n            }\n\n            _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n\n            if (_this.pdfViewer.contextMenuSettings.contextMenuAction === 'MouseUp') {\n              _this.pdfViewer.textSelectionModule.calculateContextMenuPosition(event.clientY, event.clientX);\n            }\n\n            if (!_this.getTextMarkupAnnotationMode()) {\n              _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n\n              _this.dblClickTimer = setTimeout(function () {\n                _this.applySelection();\n              }, 100);\n\n              _this.pdfViewer.textSelectionModule.fireTextSelectEnd();\n            } else if (_this.isTextMarkupAnnotationModule() && _this.getTextMarkupAnnotationMode()) {\n              // eslint-disable-next-line max-len\n              _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n            }\n          }\n        } else if (_this.getCurrentTextMarkupAnnotation()) {// this.pdfViewer.annotationModule.showAnnotationPopup(event);\n        }\n\n        if (_this.action && (_this.action === 'Perimeter' || _this.action === 'Polygon') && _this.tool) {\n          _this.eventArgs.position = _this.currentPosition;\n\n          _this.getMouseEventArgs(_this.currentPosition, _this.eventArgs, event, _this.eventArgs.source);\n\n          var ctrlKey = _this.isMetaKey(event);\n\n          var info = {\n            ctrlKey: event.ctrlKey,\n            shiftKey: event.shiftKey\n          };\n          _this.eventArgs.info = info;\n          _this.eventArgs.clickCount = event.detail;\n\n          _this.tool.mouseUp(_this.eventArgs, true);\n        }\n\n        if (_this.pdfViewer.selectedItems || _this.pdfViewer.annotation && _this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n          if (_this.pdfViewer.selectedItems.annotations.length !== 0) {\n            // eslint-disable-next-line\n            var currentAnnotation = _this.pdfViewer.selectedItems.annotations[0]; // eslint-disable-next-line max-len\n\n            if (_this.pdfViewer.annotationModule && !currentAnnotation.formFieldAnnotationType) {\n              // eslint-disable-next-line max-len\n              _this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName, currentAnnotation.pageIndex, currentAnnotation, null, true);\n\n              if (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === false) {\n                if (_this.isFreeTextAnnotation(_this.pdfViewer.selectedItems.annotations) === true) {\n                  var elmtPosition = {};\n                  elmtPosition.x = _this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                  elmtPosition.y = _this.pdfViewer.selectedItems.annotations[0].bounds.y; // eslint-disable-next-line max-len\n\n                  _this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition, _this.pdfViewer.selectedItems.annotations[0]);\n                } else if (_this.pdfViewer.selectedItems.annotations[0].enableShapeLabel === true) {\n                  var elmtPosition = {};\n                  elmtPosition.x = _this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                  elmtPosition.y = _this.pdfViewer.selectedItems.annotations[0].bounds.y; // eslint-disable-next-line max-len\n\n                  _this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition, _this.pdfViewer.selectedItems.annotations[0]);\n                } else {\n                  // eslint-disable-next-line\n                  var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.pdfViewer.currentPageNumber);\n\n                  if (accordionExpand) {\n                    accordionExpand.ej2_instances[0].expandItem(true);\n                  } // eslint-disable-next-line\n\n\n                  var commentsDiv = document.getElementById(_this.pdfViewer.selectedItems.annotations[0].annotName);\n\n                  if (commentsDiv) {\n                    if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                      commentsDiv.firstChild.click();\n                    }\n                  }\n                }\n              }\n            }\n          } else {\n            // eslint-disable-next-line max-len\n            var annotation = _this.pdfViewer.annotation;\n            var annotationModule = _this.pdfViewer.annotationModule;\n\n            if (annotation && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n              // eslint-disable-next-line\n              var annotation_1 = _this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation; // eslint-disable-next-line max-len\n\n              _this.pdfViewer.annotationModule.annotationSelect(annotation_1.annotName, _this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage, annotation_1, null, true); // eslint-disable-next-line\n\n\n              var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.currentPageNumber);\n\n              if (accordionExpand) {\n                accordionExpand.ej2_instances[0].expandItem(true);\n              } // eslint-disable-next-line\n\n\n              var comments = document.getElementById(annotation_1.annotName);\n\n              if (comments) {\n                comments.firstChild.click();\n              }\n            }\n          }\n        }\n\n        if (_this.pdfViewer.designerMode && _this.pdfViewer.selectedItems.formFields.length > 0) {\n          var eventArgs = {\n            name: \"formFieldDoubleClick\",\n            field: _this.pdfViewer.selectedItems.formFields[0],\n            cancel: false\n          };\n\n          _this.pdfViewer.fireFormFieldDoubleClickEvent(eventArgs);\n\n          if (!eventArgs.cancel) {\n            _this.pdfViewer.formDesigner.createPropertiesWindow();\n          }\n        }\n      } else {\n        if (event.detail === 3) {\n          if (_this.isViewerContainerDoubleClick) {\n            clearTimeout(_this.dblClickTimer);\n            _this.isViewerContainerDoubleClick = false;\n          }\n\n          if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n            _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n\n            _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n\n            _this.pdfViewer.textSelectionModule.fireTextSelectEnd();\n\n            _this.applySelection();\n          }\n        }\n      }\n    };\n    /**\n     * @param {DragEvent} event - The DragEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnDragStart = function (event) {\n      // eslint-disable-next-line\n      var isIE = !!document.documentMode;\n\n      if (!isIE) {\n        event.preventDefault();\n      }\n    }; // eslint-disable-next-line\n\n\n    this.viewerContainerOnContextMenuClick = function (event) {\n      _this.isViewerMouseDown = false;\n    }; // eslint-disable-next-line\n\n\n    this.onWindowMouseUp = function (event) {\n      _this.isFreeTextContextMenu = false;\n      _this.isNewStamp = false;\n      _this.signatureAdded = false; // eslint-disable-next-line\n\n      var annotationModule = _this.pdfViewer.annotationModule; // eslint-disable-next-line max-len\n\n      if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n        // eslint-disable-next-line\n        var modules = annotationModule.textMarkupAnnotationModule;\n        modules.isLeftDropletClicked = false;\n        modules.isDropletClicked = false;\n        modules.isRightDropletClicked = false;\n\n        if (!modules.currentTextMarkupAnnotation && window.getSelection().anchorNode === null) {\n          modules.showHideDropletDiv(true);\n        } else if (!modules.currentTextMarkupAnnotation && modules.currentTextMarkupAddMode === '') {\n          modules.isTextMarkupAnnotationMode = false;\n        }\n      }\n\n      if (!_this.getPopupNoteVisibleStatus()) {\n        if (event.button === 0) {\n          // eslint-disable-next-line max-len\n          if (_this.isNewFreeTextAnnotation()) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n              // eslint-disable-next-line max-len\n              if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (window.getSelection().anchorNode !== null) {\n                  _this.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);\n                }\n              } // eslint-disable-next-line\n\n\n              var target = event.target;\n\n              if (_this.viewerContainer.contains(event.target) && target.className !== 'e-pdfviewer-formFields' && target.className !== 'e-pv-formfield-input') {\n                if (!_this.isClickedOnScrollBar(event, true) && !_this.isScrollbarMouseDown) {\n                  _this.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);\n                } else {\n                  if (window.getSelection().anchorNode !== null) {\n                    _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                  }\n                }\n              }\n            } else if (_this.getTextMarkupAnnotationMode()) {\n              // eslint-disable-next-line\n              var viewerElement = _this.pdfViewer.element; // eslint-disable-next-line\n\n              var targetElement = event.target;\n\n              if (viewerElement && targetElement) {\n                if (viewerElement.id.split('_')[0] === targetElement.id.split('_')[0]) {\n                  // eslint-disable-next-line max-len\n                  _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                }\n              }\n            }\n          }\n        } else if (event.button === 2) {\n          if (_this.viewerContainer.contains(event.target) && _this.skipPreventDefault(event.target)) {\n            if (_this.checkIsNormalText()) {\n              window.getSelection().removeAllRanges();\n            }\n          }\n        }\n\n        if (_this.isViewerMouseDown) {\n          _this.isViewerMouseDown = false;\n\n          if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n            _this.pdfViewer.textSelectionModule.clear();\n\n            _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n          }\n\n          event.preventDefault();\n          event.stopPropagation();\n          return false;\n        } else {\n          return true;\n        }\n      }\n    };\n    /**\n     * @param {TouchEvent} event - The DragEvent.\n     * @returns {void}\n     */\n\n\n    this.onWindowTouchEnd = function (event) {\n      _this.signatureAdded = false; // eslint-disable-next-line max-len\n\n      if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n        if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n          _this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n      }\n    };\n    /**\n     * @param {TouchEvent} event - The TouchEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnTouchStart = function (event) {\n      var touchPoints = event.touches;\n\n      if (_this.pdfViewer.magnificationModule) {\n        _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n      }\n\n      var target = event.target; // eslint-disable-next-line max-len\n\n      if (touchPoints.length === 1 && !target.classList.contains('e-pv-hyperlink') && _this.skipPreventDefault(target)) {\n        _this.preventTouchEvent(event);\n      }\n\n      if (event.touches.length === 1 && _this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n        if (!_this.isToolbarInkClicked) {\n          _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n        }\n      }\n\n      _this.touchClientX = touchPoints[0].clientX;\n      _this.touchClientY = touchPoints[0].clientY;\n      _this.scrollY = touchPoints[0].clientY;\n      _this.previousTime = new Date().getTime(); // eslint-disable-next-line max-len\n\n      if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n        if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode && _this.pageCount > 0 && !_this.isThumb && !event.target.classList.contains('e-pv-hyperlink')) {\n          _this.handleTaps(touchPoints);\n        }\n\n        if (!isBlazor() || !Browser.isDevice || _this.pdfViewer.enableDesktopMode) {\n          _this.handleTextBoxTaps(touchPoints);\n        }\n\n        var designerMode = _this.isDesignerMode(target);\n\n        if (designerMode) {\n          _this.contextMenuModule.close(); // event.preventDefault();\n\n\n          if (!_this.isLongTouchPropagated) {\n            _this.longTouchTimer = setTimeout(function () {\n              if (!_this.isMoving) {\n                _this.isTouchDesignerMode = true;\n\n                _this.contextMenuModule.open(_this.touchClientY, _this.touchClientX, _this.viewerContainer);\n              }\n            }, 1000);\n          }\n\n          _this.isLongTouchPropagated = true;\n          _this.isMoving = false;\n        } else if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n          _this.pdfViewer.textSelectionModule.clearTextSelection();\n\n          _this.contextMenuModule.close(); // event.preventDefault();\n\n\n          if (!_this.isLongTouchPropagated) {\n            _this.longTouchTimer = setTimeout(function () {\n              _this.viewerContainerOnLongTouch(event);\n            }, 1000);\n          }\n\n          _this.isLongTouchPropagated = true;\n        }\n      } // eslint-disable-next-line\n\n\n      var toolbarModule = _this.pdfViewer.toolbarModule ? _this.pdfViewer.toolbarModule.annotationToolbarModule : 'null';\n\n      if (target.classList.contains('e-pv-text') && (!toolbarModule || !toolbarModule.textMarkupToolbarElement || toolbarModule.textMarkupToolbarElement.children.length === 0)) {\n        target.classList.add('e-pv-text-selection-none');\n      }\n\n      _this.diagramMouseDown(event); // eslint-disable-next-line max-len\n\n\n      if (_this.action === 'Perimeter' || _this.action === 'Polygon' || _this.action === 'DrawTool' || _this.action === 'Drag' || _this.action.indexOf('Rotate') !== -1 || _this.action.indexOf('Resize') !== -1) {\n        event.preventDefault();\n      }\n    };\n    /**\n     * @param {TouchEvent} event - The TouchEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnLongTouch = function (event) {\n      _this.touchClientX = event.touches[0].clientX;\n      _this.touchClientY = event.touches[0].clientY;\n      event.preventDefault();\n\n      if (_this.pdfViewer.textSelectionModule) {\n        var target = event.target;\n\n        if (target.classList.contains('e-pv-text-selection-none')) {\n          target.classList.remove('e-pv-text-selection-none');\n        }\n\n        _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n\n        if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n          clearTimeout(_this.singleTapTimer);\n          _this.tapCount = 0;\n        }\n      }\n    };\n    /**\n     * @param {PointerEvent} event - The PointerEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnPointerDown = function (event) {\n      if (event.pointerType === 'touch') {\n        _this.pointerCount++;\n\n        if (_this.pointerCount <= 2) {\n          event.preventDefault();\n\n          _this.pointersForTouch.push(event);\n\n          if (_this.pointerCount === 2) {\n            _this.pointerCount = 0;\n          }\n\n          if (_this.pdfViewer.magnificationModule) {\n            _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n          }\n        }\n      }\n    };\n    /**\n     * @param {TouchEvent} event - The TouchEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnTouchMove = function (event) {\n      if (_this.action === 'Drag') {\n        _this.isMoving = true;\n      }\n\n      if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n        clearTimeout(_this.singleTapTimer);\n        _this.tapCount = 0;\n      }\n\n      _this.preventTouchEvent(event);\n\n      if (_this.isToolbarInkClicked) {\n        event.preventDefault();\n      }\n\n      var touchPoints = event.touches;\n\n      if (_this.pdfViewer.magnificationModule) {\n        _this.isTouchScrolled = true;\n\n        if (touchPoints.length > 1 && _this.pageCount > 0) {\n          if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n            _this.isTouchScrolled = false;\n          }\n\n          if (_this.pdfViewer.enablePinchZoom) {\n            // eslint-disable-next-line max-len\n            _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n          }\n        } else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n          if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n            _this.isTouchScrolled = false;\n          }\n\n          _this.pdfViewer.magnificationModule.pinchMoveScroll();\n        }\n      }\n\n      _this.mouseX = touchPoints[0].clientX;\n      _this.mouseY = touchPoints[0].clientY;\n      var canvas; // eslint-disable-next-line max-len\n\n      if (event.target && (event.target.id.indexOf('_text') > -1 || event.target.id.indexOf('_annotationCanvas') > -1 || event.target.classList.contains('e-pv-hyperlink')) && _this.pdfViewer.annotation) {\n        var pageIndex = _this.pdfViewer.annotation.getEventPageNumber(event);\n\n        var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n\n        if (diagram) {\n          var canvas1 = diagram.getBoundingClientRect();\n          var left = canvas1.x ? canvas1.x : canvas1.left;\n          var top_3 = canvas1.y ? canvas1.y : canvas1.top;\n          canvas = new Rect(left + 10, top_3 + 10, canvas1.width - 10, canvas1.height - 10);\n        }\n      }\n\n      if (canvas && canvas.containsPoint({\n        x: _this.mouseX,\n        y: _this.mouseY\n      })) {\n        _this.diagramMouseMove(event);\n\n        _this.annotationEvent = event;\n      } else {\n        _this.diagramMouseLeave(event);\n\n        if (_this.isAnnotationDrawn) {\n          _this.diagramMouseUp(event);\n\n          _this.isAnnotationAdded = true;\n        }\n      }\n\n      touchPoints = null;\n    };\n    /**\n     * @param {PointerEvent} event - The TouchEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnPointerMove = function (event) {\n      if (event.pointerType === 'touch' && _this.pageCount > 0) {\n        event.preventDefault();\n\n        if (_this.pointersForTouch.length === 2) {\n          for (var i = 0; i < _this.pointersForTouch.length; i++) {\n            if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n              _this.pointersForTouch[i] = event;\n              break;\n            }\n          }\n\n          if (_this.pdfViewer.magnificationModule && _this.pdfViewer.enablePinchZoom) {\n            // eslint-disable-next-line max-len\n            _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n          }\n        }\n      }\n    };\n    /**\n     * @param {TouchEvent} event - The TouchEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnTouchEnd = function (event) {\n      if (_this.pdfViewer.magnificationModule) {\n        _this.pdfViewer.magnificationModule.pinchMoveEnd();\n      }\n\n      if (event.cancelable && !event.target.classList.contains('e-pv-touch-ellipse') && _this.pdfViewer.textSelectionModule && _this.pdfViewer.textSelectionModule.isTextSelection) {\n        event.preventDefault();\n      }\n\n      _this.isLongTouchPropagated = false;\n      clearInterval(_this.longTouchTimer);\n      _this.longTouchTimer = null;\n\n      if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode && _this.isTouchScrolled) {\n        _this.currentTime = new Date().getTime();\n        var duration = _this.currentTime - _this.previousTime; // eslint-disable-next-line\n\n        var difference = _this.scrollY - event.changedTouches[0].pageY; // eslint-disable-next-line\n\n        var speed = difference / duration;\n\n        if (Math.abs(speed) > 1.5) {\n          // eslint-disable-next-line\n          var scrollTop = difference + duration * speed;\n          _this.viewerContainer.scrollTop += scrollTop;\n\n          _this.updateMobileScrollerPosition();\n        }\n      }\n\n      _this.diagramMouseUp(event);\n\n      _this.renderStampAnnotation(event);\n\n      if (!Browser.isDevice) {\n        _this.focusViewerContainer();\n      }\n    };\n    /**\n     * @param {PointerEvent} event - The PointerEvent.\n     * @returns {void}\n     */\n\n\n    this.viewerContainerOnPointerEnd = function (event) {\n      if (event.pointerType === 'touch') {\n        event.preventDefault();\n\n        if (_this.pdfViewer.magnificationModule) {\n          _this.pdfViewer.magnificationModule.pinchMoveEnd();\n        }\n\n        _this.pointersForTouch = [];\n        _this.pointerCount = 0;\n      }\n    }; // eslint-disable-next-line\n\n\n    this.viewerContainerOnScroll = function (event) {\n      var proxy = null;\n      proxy = _this;\n      var allowServerDataBind = proxy.pdfViewer.allowServerDataBinding;\n      proxy.pdfViewer.enableServerDataBinding(false);\n      var scrollposX = 0;\n      var scrollposY = 0;\n\n      if (event.touches && Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n        // eslint-disable-next-line\n        var ratio = (_this.viewerContainer.scrollHeight - _this.viewerContainer.clientHeight) / (_this.viewerContainer.clientHeight - _this.toolbarHeight);\n\n        if (_this.isThumb) {\n          _this.ispageMoved = true;\n          event.preventDefault();\n          _this.mobilePageNoContainer.style.display = 'block';\n          scrollposX = event.touches[0].pageX - _this.scrollX;\n          scrollposY = event.touches[0].pageY - _this.viewerContainer.offsetTop;\n          _this.viewerContainer.scrollTop = scrollposY * ratio; // eslint-disable-next-line\n\n          var containerValue = event.touches[0].pageY; // eslint-disable-next-line\n\n          var toolbarHeight = _this.pdfViewer.toolbarModule ? 0 : 50;\n\n          if (_this.viewerContainer.scrollTop !== 0 && containerValue <= _this.viewerContainer.clientHeight - toolbarHeight) {\n            _this.mobileScrollerContainer.style.top = containerValue + 'px';\n          }\n        } else if (event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n          if (!(_this.isWebkitMobile && Browser.isDevice && !_this.pdfViewer.enableDesktopMode)) {\n            _this.mobilePageNoContainer.style.display = 'none';\n            scrollposY = _this.touchClientY - event.touches[0].pageY;\n            scrollposX = _this.touchClientX - event.touches[0].pageX;\n            _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + scrollposY;\n            _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + scrollposX;\n          } // eslint-disable-next-line\n\n\n          _this.updateMobileScrollerPosition();\n\n          _this.touchClientY = event.touches[0].pageY;\n          _this.touchClientX = event.touches[0].pageX;\n        }\n      }\n\n      if (_this.scrollHoldTimer) {\n        clearTimeout(_this.scrollHoldTimer);\n      }\n\n      var pageIndex = _this.currentPageNumber;\n      _this.scrollHoldTimer = null;\n\n      _this.contextMenuModule.close();\n\n      var verticalScrollValue = _this.viewerContainer.scrollTop; // eslint-disable-next-line max-len\n\n      for (var i = 0; i < _this.pageCount; i++) {\n        if (_this.pageSize[i] != null) {\n          var pageHeight = _this.getPageHeight(i);\n\n          if (pageHeight < 150) {\n            _this.pageStopValue = 75;\n          } else if (pageHeight >= 150 && pageHeight < 300) {\n            _this.pageStopValue = 125;\n          } else if (pageHeight >= 300 && pageHeight < 500) {\n            _this.pageStopValue = 200;\n          } else {\n            _this.pageStopValue = 300;\n          } // eslint-disable-next-line max-len\n\n\n          if (verticalScrollValue + _this.pageStopValue <= _this.getPageTop(i) + pageHeight) {\n            _this.currentPageNumber = i + 1;\n            _this.pdfViewer.currentPageNumber = i + 1;\n            break;\n          }\n        }\n      } // eslint-disable-next-line max-len\n\n\n      if (_this.pdfViewer.magnificationModule && _this.pdfViewer.magnificationModule.fitType === 'fitToPage' && _this.currentPageNumber > 0) {\n        if (_this.pageSize[_this.currentPageNumber - 1]) {\n          if (!_this.isPanMode && !Browser.isDevice && _this.pdfViewer.enableDesktopMode) {\n            _this.viewerContainer.scrollTop = _this.pageSize[_this.currentPageNumber - 1].top * _this.getZoomFactor();\n          }\n        }\n      }\n\n      _this.renderElementsVirtualScroll(_this.currentPageNumber); // eslint-disable-next-line max-len\n\n\n      if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n        _this.pageViewScrollChanged(_this.currentPageNumber);\n\n        _this.isViewerMouseWheel = false;\n      } else {\n        _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n      }\n\n      if (_this.pdfViewer.toolbarModule) {\n        if (!isBlazor()) {\n          _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n        }\n\n        _this.viewerContainer.setAttribute('aria-labelledby', _this.pdfViewer.element.id + '_pageDiv_' + (_this.currentPageNumber - 1));\n\n        if (!isBlazor()) {\n          if (!Browser.isDevice || _this.pdfViewer.enableDesktopMode) {\n            _this.pdfViewer.toolbarModule.updateNavigationButtons();\n          }\n        }\n      }\n\n      if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n        _this.mobileSpanContainer.innerHTML = _this.currentPageNumber.toString();\n        _this.mobilecurrentPageContainer.innerHTML = _this.currentPageNumber.toString();\n      }\n\n      if (pageIndex !== _this.currentPageNumber) {\n        if (proxy.pdfViewer.thumbnailViewModule && (!Browser.isDevice || _this.pdfViewer.enableDesktopMode)) {\n          proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n          proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n        }\n\n        _this.pdfViewer.firePageChange(pageIndex);\n      }\n\n      if (_this.pdfViewer.magnificationModule) {\n        if (!_this.isPanMode && !Browser.isDevice && _this.pdfViewer.enableDesktopMode) {\n          _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n        }\n      }\n\n      var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n\n      if (currentPage) {\n        currentPage.style.visibility = 'visible';\n      }\n\n      if (_this.isViewerMouseDown) {\n        if (_this.getRerenderCanvasCreated() && !_this.isPanMode) {\n          _this.pdfViewer.magnificationModule.clearIntervalTimer();\n        } // eslint-disable-next-line\n\n\n        var data = _this.getStoredData(_this.currentPageNumber);\n\n        if (data) {\n          _this.isDataExits = true;\n\n          _this.initiatePageViewScrollChanged();\n\n          _this.isDataExits = false;\n        } else {\n          // eslint-disable-next-line max-len\n          var timer = _this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll ? _this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll : 100;\n          _this.scrollHoldTimer = setTimeout(function () {\n            _this.initiatePageViewScrollChanged();\n          }, timer);\n        }\n      }\n\n      if (_this.pdfViewer.annotation && _this.navigationPane.commentPanelContainer) {\n        _this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(_this.currentPageNumber);\n      } // eslint-disable-next-line max-len\n\n\n      if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode && event.touches && event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n        setTimeout(function () {\n          _this.updateMobileScrollerPosition();\n        }, 500);\n      }\n\n      proxy.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n    };\n\n    this.pdfViewer = viewer;\n    this.navigationPane = new NavigationPane(this.pdfViewer, this);\n    this.textLayer = new TextLayer(this.pdfViewer, this);\n    this.signatureModule = new Signature(this.pdfViewer, this);\n    this.isWebkitMobile = /Chrome/.test(navigator.userAgent) || /Google Inc/.test(navigator.vendor) || navigator.userAgent.indexOf('Safari') !== -1;\n  }\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.initializeComponent = function () {\n    var element = document.getElementById(this.pdfViewer.element.id);\n\n    if (element) {\n      this.blazorUIAdaptor = isBlazor() ? new BlazorUiAdaptor(this.pdfViewer, this) : null;\n\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.pdfViewer.element.classList.add('e-pv-mobile-view');\n      }\n\n      var controlWidth = '100%';\n      var toolbarDiv = void 0;\n      this.viewerMainContainer = isBlazor() ? element.querySelector('.e-pv-viewer-main-container') : createElement('div', {\n        id: this.pdfViewer.element.id + '_viewerMainContainer',\n        className: 'e-pv-viewer-main-container'\n      });\n      this.viewerContainer = isBlazor() ? element.querySelector('.e-pv-viewer-container') : createElement('div', {\n        id: this.pdfViewer.element.id + '_viewerContainer',\n        className: 'e-pv-viewer-container',\n        attrs: {\n          'aria-label': 'pdfviewer scroll view'\n        }\n      });\n\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.createMobilePageNumberContainer();\n      } // eslint-disable-next-line\n\n\n      this.viewerContainer.tabIndex = 0;\n\n      if (this.pdfViewer.enableRtl) {\n        this.viewerContainer.style.direction = 'rtl';\n      }\n\n      element.style.touchAction = 'pan-x pan-y';\n      this.setMaximumHeight(element);\n      this.mainContainer = isBlazor() ? element.querySelector('.e-pv-main-container') : createElement('div', {\n        id: this.pdfViewer.element.id + '_mainContainer',\n        className: 'e-pv-main-container'\n      });\n      this.mainContainer.appendChild(this.viewerMainContainer);\n      element.appendChild(this.mainContainer);\n      this.applyViewerHeight(this.mainContainer);\n\n      if (this.pdfViewer.toolbarModule) {\n        this.navigationPane.initializeNavigationPane();\n        toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n      } else {\n        if (isBlazor()) {\n          this.navigationPane.initializeNavigationPane();\n          toolbarDiv = this.pdfViewer.element.querySelector('.e-pv-toolbar');\n\n          if (!this.pdfViewer.enableToolbar) {\n            this.toolbarHeight = 0;\n            toolbarDiv.style.display = 'none';\n          }\n\n          if (!this.pdfViewer.enableNavigationToolbar && (Browser.isDevice && this.pdfViewer.enableDesktopMode || !Browser.isDevice)) {\n            this.navigationPane.sideBarToolbar.style.display = 'none';\n            this.navigationPane.sideBarToolbarSplitter.style.display = 'none';\n\n            if (this.navigationPane.isBookmarkOpen || this.navigationPane.isThumbnailOpen) {\n              this.navigationPane.updateViewerContainerOnClose();\n            }\n          }\n        }\n      }\n\n      if (toolbarDiv) {\n        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n      } else {\n        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n      }\n\n      var viewerWidth = this.pdfViewer.element.clientWidth;\n\n      if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n        viewerWidth = viewerWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0) - (this.navigationPane.commentPanelContainer ? this.navigationPane.getViewerContainerRight() : 0);\n      }\n\n      this.viewerContainer.style.width = viewerWidth + 'px';\n      this.viewerMainContainer.appendChild(this.viewerContainer);\n\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.mobileScrollerContainer.style.left = viewerWidth - parseFloat(this.mobileScrollerContainer.style.width) + 'px';\n        this.mobilePageNoContainer.style.left = viewerWidth / 2 - parseFloat(this.mobilePageNoContainer.style.width) / 2 + 'px';\n        this.mobilePageNoContainer.style.top = this.pdfViewer.element.clientHeight / 2 + 'px';\n        this.mobilePageNoContainer.style.display = 'none';\n        this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);\n        this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);\n        this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);\n        this.viewerContainer.appendChild(this.mobilePageNoContainer);\n        this.viewerMainContainer.appendChild(this.mobileScrollerContainer);\n        this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);\n      }\n\n      this.pageContainer = createElement('div', {\n        id: this.pdfViewer.element.id + '_pageViewContainer',\n        className: 'e-pv-page-container',\n        attrs: {\n          'tabindex': '0',\n          'aria-label': 'pdfviewer Page View'\n        }\n      });\n\n      if (this.pdfViewer.enableRtl) {\n        this.pageContainer.style.direction = 'ltr';\n      }\n\n      this.viewerContainer.appendChild(this.pageContainer);\n      this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n\n      if (toolbarDiv && this.pdfViewer.thumbnailViewModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n        this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n      }\n\n      this.createPrintPopup();\n\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.createGoToPagePopup();\n      }\n\n      var waitingPopup = createElement('div', {\n        id: this.pdfViewer.element.id + '_loadingIndicator'\n      });\n      this.viewerContainer.appendChild(waitingPopup);\n      createSpinner({\n        target: waitingPopup,\n        cssClass: 'e-spin-center'\n      });\n      this.setLoaderProperties(waitingPopup);\n\n      if (isBlazor()) {\n        this.contextMenuModule = new BlazorContextMenu(this.pdfViewer, this); // eslint-disable-next-line\n\n        var spinnerElement = document.getElementsByClassName(this.pdfViewer.element.id + '_spinner');\n\n        if (spinnerElement && spinnerElement[0] && !spinnerElement[0].classList.contains('e-spin-hide')) {\n          spinnerElement[0].classList.remove('e-spin-show');\n          spinnerElement[0].classList.add('e-spin-hide');\n        }\n      } else {\n        this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n      }\n\n      this.contextMenuModule.createContextMenu();\n      this.createFileInputElement();\n      this.wireEvents();\n\n      if (this.pdfViewer.textSearchModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n        this.pdfViewer.textSearchModule.createTextSearchBox();\n      }\n\n      if (this.pdfViewer.documentPath) {\n        if (isBlazor()) {\n          this.pdfViewer._dotnetInstance.invokeMethodAsync('LoadDocumentFromClient', this.pdfViewer.documentPath);\n        } else {\n          this.pdfViewer.load(this.pdfViewer.documentPath, null);\n        }\n      }\n\n      if (this.pdfViewer.annotationModule) {\n        this.pdfViewer.annotationModule.initializeCollection();\n      }\n    }\n\n    if (Browser.isDevice && this.pdfViewer.enableDesktopMode && this.pdfViewer.toolbarModule) {\n      this.pdfViewer.interactionMode = 'Pan';\n    }\n  };\n\n  PdfViewerBase.prototype.createMobilePageNumberContainer = function () {\n    this.mobilePageNoContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_mobilepagenoContainer',\n      className: 'e-pv-mobilepagenoscroll-container'\n    });\n    this.mobilecurrentPageContainer = createElement('span', {\n      id: this.pdfViewer.element.id + '_mobilecurrentpageContainer',\n      className: 'e-pv-mobilecurrentpage-container'\n    });\n    this.mobilenumberContainer = createElement('span', {\n      id: this.pdfViewer.element.id + '_mobiledashedlineContainer',\n      className: 'e-pv-mobiledashedline-container'\n    });\n    this.mobiletotalPageContainer = createElement('span', {\n      id: this.pdfViewer.element.id + '_mobiletotalpageContainer',\n      className: 'e-pv-mobiletotalpage-container'\n    });\n    this.mobileScrollerContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_mobilescrollContainer',\n      className: 'e-pv-mobilescroll-container'\n    });\n    this.mobileSpanContainer = createElement('span', {\n      id: this.pdfViewer.element.id + '_mobilespanContainer',\n      className: 'e-pv-mobilespanscroll-container'\n    });\n    this.mobileSpanContainer.innerHTML = '1';\n    this.mobilecurrentPageContainer.innerHTML = '1';\n    this.mobilenumberContainer.innerHTML = '&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';\n    this.mobileScrollerContainer.style.cssFloat = 'right';\n    this.mobileScrollerContainer.style.width = '40px';\n    this.mobileScrollerContainer.style.height = '32px';\n    this.mobileScrollerContainer.style.zIndex = '100';\n    this.mobilePageNoContainer.style.width = '120px';\n    this.mobilePageNoContainer.style.height = '100px';\n    this.mobilePageNoContainer.style.zIndex = '100';\n    this.mobilePageNoContainer.style.position = 'fixed';\n    this.mobileScrollerContainer.addEventListener('touchstart', this.mobileScrollContainerDown.bind(this));\n    this.mobileScrollerContainer.addEventListener('touchend', this.mobileScrollContainerEnd.bind(this));\n    this.mobileScrollerContainer.style.display = 'none';\n  };\n  /**\n   * @private\n   * @param  {string} documentData - file name or base64 string.\n   * @param {string} password - password of the PDF document.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n    this.loadedData = documentData;\n    this.documentId = this.createGUID();\n\n    if (this.viewerContainer) {\n      this.viewerContainer.scrollTop = 0;\n    }\n\n    this.showLoadingIndicator(true);\n    this.hashId = ' ';\n    this.isFileName = false;\n    this.saveDocumentInfo();\n\n    if (this.pdfViewer.interactionMode === 'Pan') {\n      this.initiatePanning();\n    }\n\n    documentData = this.checkDocumentData(documentData);\n    this.setFileName();\n\n    if (this.pdfViewer.downloadFileName) {\n      this.downloadFileName = this.pdfViewer.downloadFileName;\n    } else {\n      this.downloadFileName = this.pdfViewer.fileName;\n    }\n\n    var jsonObject = this.constructJsonObject(documentData, password);\n    this.createAjaxRequest(jsonObject, documentData, password);\n  };\n  /**\n   * @private\n   */\n\n\n  PdfViewerBase.prototype.initiateLoadDocument = function (documentId, isFileName, fileName) {\n    if (documentId) {\n      this.documentId = documentId;\n    }\n\n    if (this.viewerContainer) {\n      this.viewerContainer.scrollTop = 0;\n    }\n\n    this.showLoadingIndicator(true);\n    this.hashId = ' ';\n    this.isFileName = isFileName;\n    this.saveDocumentInfo();\n\n    if (this.pdfViewer.interactionMode === 'Pan') {\n      this.initiatePanning();\n    }\n\n    this.setFileName();\n\n    if (this.pdfViewer.fileName === null) {\n      if (isFileName && fileName) {\n        this.pdfViewer.fileName = fileName;\n        this.jsonDocumentId = this.pdfViewer.fileName;\n      } else {\n        this.pdfViewer.fileName = 'undefined.pdf';\n        this.jsonDocumentId = null;\n      }\n    }\n\n    if (this.pdfViewer.downloadFileName) {\n      this.downloadFileName = this.pdfViewer.downloadFileName;\n    } else {\n      this.downloadFileName = this.pdfViewer.fileName;\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  PdfViewerBase.prototype.loadSuccess = function (documentDetails, password) {\n    // eslint-disable-next-line\n    var data = documentDetails;\n\n    if (data) {\n      if (typeof data !== 'object') {\n        try {\n          data = JSON.parse(data);\n        } catch (error) {\n          this.onControlError(500, data, this.pdfViewer.serverActionSettings.load);\n          data = null;\n        }\n      }\n\n      if (data) {\n        while (typeof data !== 'object') {\n          data = JSON.parse(data); // eslint-disable-next-line\n\n          if (typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n            // eslint-disable-next-line\n            data = parseInt(data);\n            break;\n          }\n        }\n\n        if (data.StatusText && data.StatusText === 'File Does not Exist') {\n          this.showLoadingIndicator(false);\n        } // eslint-disable-next-line\n\n\n        if (data.uniqueId === this.documentId || typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n          this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load, data);\n          this.requestSuccess(data, null, password);\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.mobileScrollContainerDown = function (event) {\n    this.ispageMoved = false;\n    this.isThumb = true;\n\n    if (this.isTextMarkupAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage != null && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        var pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);\n        this.pdfViewer.toolbar.showToolbar(true);\n      }\n    }\n\n    this.mobileScrollerContainer.addEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n  };\n  /**\n   * @private\n   * @param {MouseEvent} e - default mouse event.\n   * @returns {PointModel} - retuns the bounds.\n   */\n\n\n  PdfViewerBase.prototype.relativePosition = function (e) {\n    // eslint-disable-next-line\n    var currentRect = this.viewerContainer.getBoundingClientRect();\n    var left = e.clientX - currentRect.left;\n    var top = e.clientY - currentRect.top;\n    return {\n      x: left,\n      y: top\n    };\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.setMaximumHeight = function (element) {\n    // eslint-disable-next-line\n    var currentRect = element.getBoundingClientRect();\n\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode || currentRect && currentRect.height === 0) {\n      element.style.minHeight = '500px';\n    }\n\n    this.updateWidth();\n    this.updateHeight();\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.applyViewerHeight = function (element) {\n    // eslint-disable-next-line\n    var currentRect = element.getBoundingClientRect();\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && currentRect && currentRect.height === 0) {\n      element.style.minHeight = '500px';\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.updateWidth = function () {\n    if (this.pdfViewer.width.toString() !== 'auto') {\n      // eslint-disable-next-line\n      this.pdfViewer.element.style.width = this.pdfViewer.width;\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.updateHeight = function () {\n    if (this.pdfViewer.height.toString() !== 'auto') {\n      // eslint-disable-next-line\n      this.pdfViewer.element.style.height = this.pdfViewer.height;\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.updateViewerContainer = function () {\n    var sideBarContentContainer = this.getElement('_sideBarContentContainer');\n\n    if (sideBarContentContainer && sideBarContentContainer.style.display === 'none') {\n      this.navigationPane.updateViewerContainerOnClose();\n    } else if (sideBarContentContainer && sideBarContentContainer.style.display === 'block') {\n      this.navigationPane.updateViewerContainerOnExpand();\n    } else {\n      this.updateViewerContainerSize();\n    } // eslint-disable-next-line\n\n\n    var toolbarModule = this.pdfViewer.toolbarModule;\n\n    if (toolbarModule) {\n      if (isBlazor()) {\n        if (this.pdfViewer.enableToolbar || this.pdfViewer.enableAnnotationToolbar) {\n          this.pdfViewer._dotnetInstance.invokeMethodAsync('RefreshToolbarItems');\n        }\n      } else {\n        if (this.pdfViewer.enableToolbar) {\n          toolbarModule.toolbar.refreshOverflow();\n        }\n\n        if (this.pdfViewer.enableAnnotationToolbar && toolbarModule.annotationToolbarModule) {\n          toolbarModule.annotationToolbarModule.toolbar.refreshOverflow();\n        }\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.updateViewerContainerSize = function () {\n    this.viewerContainer.style.width = this.pdfViewer.element.clientWidth + 'px';\n    this.pageContainer.style.width = this.viewerContainer.offsetWidth + 'px';\n    this.updateZoomValue();\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.mobileScrollContainerEnd = function (event) {\n    if (!this.ispageMoved) {\n      this.goToPagePopup.show();\n    }\n\n    this.isThumb = false;\n    this.ispageMoved = false;\n    this.mobileScrollerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n    this.mobilePageNoContainer.style.display = 'none';\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n    var proxy = null;\n    proxy = this;\n\n    if (this.pdfViewer.serverActionSettings) {\n      this.loadRequestHandler = new AjaxHandler(this.pdfViewer);\n      this.loadRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load;\n      this.loadRequestHandler.responseType = 'json';\n      this.loadRequestHandler.mode = true; // eslint-disable-next-line\n\n      jsonObject['action'] = 'Load'; // eslint-disable-next-line\n\n      jsonObject['elementId'] = this.pdfViewer.element.id;\n      this.loadRequestHandler.send(jsonObject); // eslint-disable-next-line\n\n      this.loadRequestHandler.onSuccess = function (result) {\n        // eslint-disable-next-line\n        var data = result.data;\n\n        if (data) {\n          if (typeof data !== 'object') {\n            try {\n              data = JSON.parse(data);\n            } catch (error) {\n              proxy.onControlError(500, data, this.pdfViewer.serverActionSettings.load);\n              data = null;\n            }\n          }\n\n          if (data) {\n            while (typeof data !== 'object') {\n              data = JSON.parse(data); // eslint-disable-next-line\n\n              if (typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n                // eslint-disable-next-line\n                data = parseInt(data);\n                break;\n              }\n            } // eslint-disable-next-line\n\n\n            if (data.uniqueId === proxy.documentId || typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n              proxy.updateFormFieldName(data);\n              proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load, data);\n              proxy.requestSuccess(data, documentData, password);\n            }\n          }\n        } else {\n          proxy.showLoadingIndicator(false);\n          proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Import PDF Failed'));\n        }\n      }; // eslint-disable-next-line\n\n\n      this.loadRequestHandler.onFailure = function (result) {\n        var statusString = result.status.toString().split('')[0];\n\n        if (statusString === '4') {\n          proxy.openNotificationPopup('Client error');\n        } else {\n          proxy.openNotificationPopup();\n        }\n\n        proxy.showLoadingIndicator(false);\n        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.load);\n      }; // eslint-disable-next-line\n\n\n      this.loadRequestHandler.onError = function (result) {\n        proxy.openNotificationPopup();\n        proxy.showLoadingIndicator(false); // eslint-disable-next-line\n\n        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.load);\n      };\n    }\n  }; // EJ2-60380 - As of now, in form designer the element name is taken fromfield.ActualFieldName (with hypen) but for\n  // Form fields it is taken from field.FieldName (without hypen).\n  // For this reason when user taken the form feilds on button click, name of the form feilds are different with and without form designer module\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.updateFormFieldName = function (data) {\n    if (data && data.PdfRenderedFormFields && data.PdfRenderedFormFields.length > 0) {\n      var field = void 0;\n\n      for (var i = 0; i < data.PdfRenderedFormFields.length; i++) {\n        field = data.PdfRenderedFormFields[i];\n\n        if (field) {\n          if (field.ActualFieldName) {\n            field.FieldName = field.ActualFieldName;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {string} errorString - The message to be displayed.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.openNotificationPopup = function (errorString) {\n    var _this = this;\n\n    if (this.pdfViewer.showNotificationDialog) {\n      if (errorString === 'Client error') {\n        if (isBlazor()) {\n          var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Clienterror');\n\n          promise.then(function (value) {\n            _this.textLayer.createNotificationPopup(value);\n          });\n        } else {\n          this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Client error'));\n        }\n      } else {\n        if (isBlazor()) {\n          var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Servererror');\n\n          promise.then(function (value) {\n            _this.textLayer.createNotificationPopup(value);\n          });\n        } else {\n          this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        }\n      }\n\n      if (this.getElement('_notify')) {\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {string} errorString - The message to be shown.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.showNotificationPopup = function (errorString) {\n    if (!this.pdfViewer.showNotificationDialog && errorString !== '') {\n      this.textLayer.createNotificationPopup(errorString);\n\n      if (this.getElement('_notify')) {\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n    if (data && data.pageCount !== undefined) {\n      if (isBlazor() && this.isPassword) {\n        this.isPassword = false;\n        this.isPasswordAvailable = false;\n\n        this.pdfViewer._dotnetInstance.invokeMethodAsync('ClosePasswordDialog');\n      }\n\n      if (password && password != '') {\n        this.passwordData = password;\n      }\n\n      this.pdfViewer.allowServerDataBinding = false;\n      this.pageCount = data.pageCount;\n      this.pdfViewer.pageCount = data.pageCount;\n      this.hashId = data.hashId;\n      this.documentLiveCount = data.documentLiveCount;\n      this.isAnnotationCollectionRemoved = false;\n      this.saveDocumentHashData();\n      this.saveFormfieldsData(data);\n      this.pdfViewer.allowServerDataBinding = true;\n      this.pageRender(data); // eslint-disable-next-line\n\n      var pageData = {\n        pageCount: data.pageCount,\n        pageSizes: data.pageSizes\n      };\n      window.sessionStorage.setItem(this.documentId + '_pagedata', JSON.stringify(pageData));\n\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.mobileScrollerContainer.style.display = ''; // eslint-disable-next-line\n\n        var toolbarHeight = this.pdfViewer.toolbarModule ? this.toolbarHeight : 0;\n        this.mobileScrollerContainer.style.top = toolbarHeight + 'px';\n      }\n\n      this.restrictionList = data.RestrictionSummary;\n      this.RestrictionEnabled(this.restrictionList, false);\n    } else {\n      this.pageCount = 0;\n      this.currentPageNumber = 0;\n\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        this.mobileScrollerContainer.style.display = 'none';\n      }\n\n      if (data === 4) {\n        if (!isBlazor()) {\n          // 4 is error code for encrypted document.\n          this.renderPasswordPopup(documentData, password);\n        }\n      } else if (data === 3) {\n        if (!isBlazor()) {\n          // 3 is error code for corrupted document.\n          this.renderCorruptPopup();\n        }\n      }\n\n      if (this.pdfViewer.toolbarModule) {\n        this.pdfViewer.toolbarModule.updateToolbarItems();\n      }\n    } // eslint-disable-next-line\n\n\n    var annotationModule = this.pdfViewer.annotationModule; // eslint-disable-next-line max-len\n\n    if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n      annotationModule.textMarkupAnnotationModule.createAnnotationSelectElement();\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.RestrictionEnabled = function (restrictionSummary, isEnable) {\n    if (restrictionSummary) {\n      for (var i = 0; i < restrictionSummary.length; i++) {\n        this.EnableRestriction(restrictionSummary[i], isEnable);\n\n        if (!isBlazor()) {\n          if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.DisableToolbarItems(restrictionSummary[i], isEnable);\n          }\n        } else {\n          if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('RestrictToolbarItems', restrictionSummary, isEnable);\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.EnableRestriction = function (restrictionSummary, isEnable) {\n    switch (restrictionSummary) {\n      case 'Print':\n        this.pdfViewer.enablePrint = isEnable;\n        break;\n\n      case 'CopyContent':\n        this.pdfViewer.enableTextSelection = isEnable;\n        break;\n\n      case 'FillFields':\n        this.pdfViewer.enableFormFields = isEnable;\n        this.enableFormFieldButton(isEnable);\n        break;\n\n      case 'EditAnnotations':\n        this.pdfViewer.enableAnnotation = isEnable;\n        break;\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.pageRender = function (data) {\n    this.document = null;\n    this.passwordDialogReset();\n\n    if (this.passwordPopup) {\n      this.passwordPopup.hide();\n    }\n\n    var pageIndex = 0;\n    this.initPageDiv(data);\n    this.currentPageNumber = pageIndex + 1;\n    this.pdfViewer.currentPageNumber = pageIndex + 1;\n    this.previousZoomValue = this.pdfViewer.zoomValue;\n    var isZoomMode = false;\n\n    if (this.pdfViewer.magnificationModule) {\n      this.pdfViewer.magnificationModule.isAutoZoom = true;\n\n      if (this.pdfViewer.zoomValue && this.pdfViewer.zoomValue > 0) {\n        if (this.pdfViewer.zoomValue !== 100) {\n          isZoomMode = true;\n        }\n\n        this.isInitialPageMode = true;\n        this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue);\n      }\n\n      if (this.pdfViewer.zoomMode === 'FitToWidth') {\n        this.isInitialPageMode = true;\n        this.pdfViewer.magnificationModule.fitToWidth();\n      } else if (this.pdfViewer.zoomMode === 'FitToPage') {\n        this.isInitialPageMode = true;\n        this.pdfViewer.magnificationModule.fitToPage();\n      }\n\n      this.documentLoaded = true;\n      this.pdfViewer.magnificationModule.isInitialLoading = true;\n      this.onWindowResize();\n      this.documentLoaded = false;\n      this.pdfViewer.magnificationModule.isInitialLoading = false;\n    }\n\n    this.isDocumentLoaded = true; // eslint-disable-next-line\n\n    var viewPortWidth = 816; // eslint-disable-next-line radix\n\n    viewPortWidth = parseInt(viewPortWidth);\n    var pageWidth = this.pageSize[pageIndex].width;\n\n    if (this.renderedPagesList.indexOf(pageIndex) === -1 && !isZoomMode) {\n      this.createRequestForRender(pageIndex);\n      var pageNumber = pageIndex + 1;\n\n      if (pageNumber < this.pageCount) {\n        this.createRequestForRender(pageNumber);\n        pageNumber = pageNumber + 1;\n      }\n\n      if (this.pageSize[pageNumber]) {\n        var pageTop = this.getPageTop(pageNumber);\n        var viewerHeight = this.viewerContainer.clientHeight;\n\n        while (viewerHeight > pageTop) {\n          if (this.pageSize[pageNumber]) {\n            this.renderPageElement(pageNumber);\n            this.createRequestForRender(pageNumber);\n            pageTop = this.getPageTop(pageNumber);\n            pageNumber = pageNumber + 1;\n          } else {\n            break;\n          }\n        }\n      }\n    }\n\n    this.showLoadingIndicator(false);\n\n    if (!isBlazor()) {\n      if (this.pdfViewer.toolbarModule) {\n        this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n        this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n        this.pdfViewer.toolbarModule.updateToolbarItems();\n\n        if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationAddTools(true);\n        } // eslint-disable-next-line max-len\n\n\n        this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n      }\n    }\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.mobileSpanContainer.innerHTML = this.currentPageNumber.toString();\n      this.mobilecurrentPageContainer.innerHTML = this.currentPageNumber.toString();\n    }\n  };\n\n  PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n    var _this = this;\n\n    if (!isBlazor()) {\n      if (!this.isPasswordAvailable) {\n        if (this.isFileName) {\n          this.document = documentData;\n        } else {\n          this.document = 'data:application/pdf;base64,' + documentData;\n        }\n\n        this.isPasswordAvailable = true;\n        this.createPasswordPopup();\n        this.pdfViewer.fireDocumentLoadFailed(true, null);\n        this.passwordPopup.show();\n      } else {\n        this.pdfViewer.fireDocumentLoadFailed(true, password);\n        this.promptElement.classList.add('e-pv-password-error');\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n        this.promptElement.focus();\n\n        if (this.isFileName) {\n          this.document = documentData;\n        } else {\n          this.document = 'data:application/pdf;base64,' + documentData;\n        }\n\n        this.passwordPopup.show();\n      }\n    } else {\n      // eslint-disable-next-line\n      var promptElement_1 = document.getElementById(this.pdfViewer.element.id + '_prompt');\n\n      var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_EnterPassword');\n\n      promise.then(function (value) {\n        promptElement_1.textContent = value;\n      }); // eslint-disable-next-line\n\n      var passwordInput_1 = document.querySelector('#' + this.pdfViewer.element.id + '_password_input');\n      passwordInput_1.addEventListener('keyup', function () {\n        if (passwordInput_1.value === '') {\n          _this.passwordDialogReset();\n        }\n      });\n      passwordInput_1.addEventListener('focus', function () {\n        passwordInput_1.parentElement.classList.add('e-input-focus');\n      });\n      passwordInput_1.addEventListener('blur', function () {\n        passwordInput_1.parentElement.classList.remove('e-input-focus');\n      });\n\n      if (!this.isPasswordAvailable) {\n        if (this.isFileName) {\n          this.document = documentData;\n        } else {\n          this.document = 'data:application/pdf;base64,' + documentData;\n        }\n\n        this.isPasswordAvailable = true;\n        this.pdfViewer.fireDocumentLoadFailed(true, null);\n      } else {\n        this.pdfViewer.fireDocumentLoadFailed(true, password);\n        promptElement_1.classList.add('e-pv-password-error');\n\n        var promise_1 = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_InvalidPassword');\n\n        promise_1.then(function (value) {\n          promptElement_1.textContent = value;\n        });\n        promptElement_1.focus();\n\n        if (this.isFileName) {\n          this.document = documentData;\n        } else {\n          this.document = 'data:application/pdf;base64,' + documentData;\n        }\n      }\n\n      this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPasswordDialog');\n    }\n  };\n\n  PdfViewerBase.prototype.renderCorruptPopup = function () {\n    this.pdfViewer.fireDocumentLoadFailed(false, null);\n    this.documentId = null;\n\n    if (this.pdfViewer.showNotificationDialog) {\n      if (!isBlazor()) {\n        this.createCorruptedPopup();\n        this.corruptPopup.show();\n      } else {\n        this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenCorruptedDialog');\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n    var jsonObject;\n\n    if (password) {\n      this.isPasswordAvailable = true;\n      this.passwordData = password; // eslint-disable-next-line max-len\n\n      jsonObject = {\n        document: documentData,\n        password: password,\n        zoomFactor: \"1\",\n        isFileName: this.isFileName.toString(),\n        uniqueId: this.documentId\n      };\n    } else {\n      this.isPasswordAvailable = false;\n      this.passwordData = '';\n      jsonObject = {\n        document: documentData,\n        zoomFactor: \"1\",\n        isFileName: this.isFileName.toString(),\n        uniqueId: this.documentId\n      };\n    }\n\n    return jsonObject;\n  };\n\n  PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n    var base64String = documentData.split('base64,')[1];\n\n    if (base64String === undefined) {\n      this.isFileName = true;\n      this.jsonDocumentId = documentData;\n\n      if (this.pdfViewer.fileName === null) {\n        // eslint-disable-next-line max-len\n        var documentStringArray = documentData.indexOf('\\\\') !== -1 ? documentData.split('\\\\') : documentData.split('/');\n        this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n        this.jsonDocumentId = this.pdfViewer.fileName;\n        base64String = documentData;\n      }\n    } else {\n      this.jsonDocumentId = null;\n    }\n\n    return base64String;\n  };\n\n  PdfViewerBase.prototype.setFileName = function () {\n    if (this.pdfViewer.fileName === null) {\n      if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName) {\n        this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n        this.jsonDocumentId = this.pdfViewer.fileName;\n      } else {\n        this.pdfViewer.fileName = 'undefined.pdf';\n        this.jsonDocumentId = null;\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.saveDocumentInfo = function () {\n    window.sessionStorage.setItem('currentDocument', this.documentId);\n    window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n\n    if (this.pdfViewer.serverActionSettings) {\n      window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    }\n  };\n\n  PdfViewerBase.prototype.saveDocumentHashData = function () {\n    var hashId = '';\n\n    if (Browser.isIE || Browser.info.name === 'edge') {\n      hashId = encodeURI(this.hashId);\n    } else {\n      hashId = this.hashId;\n    }\n\n    window.sessionStorage.setItem('hashId', hashId);\n\n    if (this.documentLiveCount) {\n      window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.saveFormfieldsData = function (data) {\n    this.pdfViewer.isFormFieldDocument = false;\n    this.enableFormFieldButton(false);\n\n    if (data && data.PdfRenderedFormFields && data.PdfRenderedFormFields.length > 0) {\n      if (this.formfieldvalue) {\n        if (this.pdfViewer.formFieldsModule) {\n          this.setItemInSessionStorage(this.formfieldvalue, '_formfields');\n        }\n\n        this.formfieldvalue = null;\n      } else if (this.pdfViewer.formFieldsModule) {\n        for (var i = 0; i < data.PdfRenderedFormFields.length; i++) {\n          if (data.PdfRenderedFormFields[i].FieldName == '') {\n            data.PdfRenderedFormFields.splice(i, 1);\n          }\n        }\n\n        this.setItemInSessionStorage(data.PdfRenderedFormFields, '_formfields');\n      }\n\n      if (this.pdfViewer.enableFormFields && this.pdfViewer.formFieldsModule) {\n        this.pdfViewer.formFieldsModule.formFieldCollections();\n      }\n\n      if (this.pdfViewer.formFieldCollections.length > 0) {\n        this.pdfViewer.isFormFieldDocument = true;\n        this.enableFormFieldButton(true);\n      }\n    }\n  };\n  /**\n   * @param {boolean} isEnable - Enable or disable the toolbar itema.\n   * @returns {void}\n   * @private\n   */\n\n\n  PdfViewerBase.prototype.enableFormFieldButton = function (isEnable) {\n    if (isEnable) {\n      this.pdfViewer.isFormFieldDocument = true;\n    }\n\n    if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.submitItem) {\n      this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement, isEnable);\n    }\n  };\n\n  PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n    if (this.pageSize[pageNumber].top != null) {\n      // eslint-disable-next-line max-len\n      var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n      var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n\n      if (pageCurrentRect.top < 0) {\n        if (this.toolbarHeight + this.viewerContainer.clientHeight / 2 - pageCurrentRect.top < pageCurrentRect.height) {\n          waitingPopup.style.top = this.viewerContainer.clientHeight / 2 - pageCurrentRect.top - this.toolbarHeight + 'px';\n        } else {\n          if (this.toolbarHeight + pageCurrentRect.bottom / 2 - pageCurrentRect.top < pageCurrentRect.height) {\n            waitingPopup.style.top = pageCurrentRect.bottom / 2 - pageCurrentRect.top - this.toolbarHeight + 'px';\n          }\n        }\n      } else {\n        waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n      }\n\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n        waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + this.viewerContainer.scrollLeft + 'px';\n      } else if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n        waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n      } else {\n        waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {number} - returned the page value.\n   */\n\n\n  PdfViewerBase.prototype.getActivePage = function (isPageNumber) {\n    if (this.activeElements && !isNullOrUndefined(this.activeElements.activePageID)) {\n      if (isPageNumber) {\n        return this.activeElements.activePageID + 1;\n      } else {\n        return this.activeElements.activePageID;\n      }\n    } else {\n      if (isPageNumber) {\n        return this.currentPageNumber;\n      } else {\n        return this.currentPageNumber - 1;\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n    // eslint-disable-next-line max-len\n    var waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n\n    if (waitingPopup) {\n      createSpinner({\n        target: waitingPopup\n      });\n      this.setLoaderProperties(waitingPopup);\n    }\n  };\n\n  PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n    var waitingPopup = this.getElement('_loadingIndicator');\n\n    if (waitingPopup) {\n      if (isShow) {\n        waitingPopup.style.display = 'block';\n        showSpinner(waitingPopup);\n      } else {\n        waitingPopup.style.display = 'none';\n        hideSpinner(waitingPopup);\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n    var waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n\n    if (waitingPopup != null) {\n      if (isShow) {\n        showSpinner(waitingPopup);\n      } else {\n        hideSpinner(waitingPopup);\n      }\n\n      this.updateWaitingPopup(pageIndex);\n    }\n  };\n  /**\n   * @param {boolean} isShow - Show or hide print loading indicator.\n   * @returns {void}\n   * @private\n   */\n\n\n  PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n    var printWaitingPopup = this.getElement('_printLoadingIndicator');\n\n    if (printWaitingPopup != null) {\n      if (isShow) {\n        this.printMainContainer.style.display = 'block';\n        showSpinner(printWaitingPopup);\n      } else {\n        this.printMainContainer.style.display = 'none';\n        hideSpinner(printWaitingPopup);\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.setLoaderProperties = function (element) {\n    var spinnerElement = element.firstChild.firstChild.firstChild;\n\n    if (spinnerElement) {\n      spinnerElement.style.height = '48px';\n      spinnerElement.style.width = '48px';\n      spinnerElement.style.transformOrigin = '24px 24px 24px';\n    }\n  };\n  /**\n   * @param {number} pageNumber - Specify the pageNumber.\n   * @returns {void}\n   * @private\n   */\n\n\n  PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n    var _this = this; // eslint-disable-next-line\n\n\n    if (this.pageSize[pageNumber] != null) {\n      this.renderElementsVirtualScroll(pageNumber);\n      this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n\n      if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n        this.createRequestForRender(pageNumber);\n      }\n\n      setTimeout(function () {\n        var currentPageNumber = pageNumber + 1;\n\n        if (currentPageNumber !== _this.currentPageNumber) {\n          _this.pdfViewer.currentPageNumber = currentPageNumber;\n          _this.currentPageNumber = currentPageNumber;\n\n          if (_this.pdfViewer.toolbarModule) {\n            _this.pdfViewer.toolbarModule.updateCurrentPage(currentPageNumber);\n          }\n        }\n      }, 100);\n    }\n  };\n  /**\n   * @private\n   * @returns {number} - Returns the zoom factor value.\n   */\n\n\n  PdfViewerBase.prototype.getZoomFactor = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.zoomFactor;\n    } else {\n      // default value\n      return 1;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns whether the pinch zoom is performed or not.\n   */\n\n\n  PdfViewerBase.prototype.getPinchZoomed = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isPinchZoomed;\n    } else {\n      // default value\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} -Returns whether the zoom is performed or not.\n   */\n\n\n  PdfViewerBase.prototype.getMagnified = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isMagnified;\n    } else {\n      // default value\n      return false;\n    }\n  };\n\n  PdfViewerBase.prototype.getPinchScrolled = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isPinchScrolled;\n    } else {\n      // default value\n      return false;\n    }\n  };\n\n  PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n    } else {\n      // default value\n      return false;\n    }\n  };\n\n  PdfViewerBase.prototype.getPagesZoomed = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isPagesZoomed;\n    } else {\n      // default value\n      return false;\n    }\n  };\n\n  PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n    } else {\n      // default value\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {string} - retrun the docuumentid.\n   */\n\n\n  PdfViewerBase.prototype.getDocumentId = function () {\n    return this.documentId;\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.download = function () {\n    if (this.pageCount > 0) {\n      this.createRequestForDownload();\n    }\n  };\n  /**\n   * @private\n   * @returns {promise<Blob>} - Returns the blob object.\n   */\n\n\n  PdfViewerBase.prototype.saveAsBlob = function () {\n    var _this = this;\n\n    if (this.pageCount > 0) {\n      return new Promise(function (resolve, reject) {\n        _this.saveAsBlobRequest().then(function (value) {\n          resolve(value);\n        });\n      });\n    }\n\n    return null;\n  };\n\n  PdfViewerBase.prototype.saveAsBlobRequest = function () {\n    var _this = this;\n\n    var proxy = null;\n    proxy = this;\n    var promise = new Promise(function (resolve, reject) {\n      // eslint-disable-next-line\n      var jsonObject = proxy.constructJsonDownload();\n      _this.dowonloadRequestHandler = new AjaxHandler(_this.pdfViewer);\n      _this.dowonloadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.download;\n      _this.dowonloadRequestHandler.responseType = 'text';\n\n      _this.dowonloadRequestHandler.send(jsonObject); // eslint-disable-next-line\n\n\n      _this.dowonloadRequestHandler.onSuccess = function (result) {\n        // eslint-disable-next-line\n        var data = result.data;\n\n        if (data) {\n          if (typeof data === 'object') {\n            data = JSON.parse(data);\n          }\n\n          if (typeof data !== 'object' && data.indexOf('data:application/pdf') === -1) {\n            proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.download);\n            data = null;\n          }\n\n          if (data) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download, data);\n            var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n            resolve(blobUrl);\n          }\n        }\n      }; // eslint-disable-next-line\n\n\n      _this.dowonloadRequestHandler.onFailure = function (result) {\n        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n      }; // eslint-disable-next-line\n\n\n      _this.dowonloadRequestHandler.onError = function (result) {\n        proxy.openNotificationPopup();\n        proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n      };\n    });\n    return promise;\n  };\n  /**\n   * @param {boolean} isTriggerEvent - check to trigger the event.\n   * @returns {void}\n   * @private\n   */\n\n\n  PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n    var proxy = this;\n    var pdfViewer = proxy.pdfViewer;\n    var printModule = pdfViewer.printModule;\n    var textSearchModule = pdfViewer.textSearchModule;\n    var bookmarkViewModule = pdfViewer.bookmarkViewModule;\n    var thumbnailViewModule = pdfViewer.thumbnailView;\n    var annotationModule = pdfViewer.annotation;\n    var magnificationModule = pdfViewer.magnificationModule;\n    var textSelectionModule = pdfViewer.textSelectionModule;\n    var formFieldsModule = pdfViewer.formFieldsModule;\n    var signatureModule = proxy.signatureModule;\n    proxy.isPasswordAvailable = false;\n    proxy.isDocumentLoaded = false;\n    proxy.isInitialLoaded = false;\n    proxy.isImportAction = false;\n    proxy.annotationPageList = [];\n    proxy.annotationComments = null;\n    pdfViewer.annotationCollection = [];\n    pdfViewer.signatureCollection = [];\n    pdfViewer.formFieldCollection = [];\n    proxy.isAnnotationCollectionRemoved = false;\n    proxy.documentAnnotationCollections = null;\n    proxy.isDrawnCompletely = false;\n    proxy.annotationRenderredList = [];\n    proxy.isImportAction = false;\n    proxy.isImportedAnnotation = false;\n    proxy.importedAnnotation = [];\n    proxy.isStorageExceed = false;\n    proxy.annotationStorage = {};\n    proxy.formFieldStorage = {};\n    proxy.downloadCollections = {};\n    proxy.annotationEvent = null;\n    proxy.highestWidth = 0;\n    proxy.highestHeight = 0;\n    proxy.requestLists = [];\n    proxy.tilerequestLists = [];\n    proxy.isToolbarInkClicked = false;\n    pdfViewer.formFieldCollections = [];\n    proxy.passwordData = '';\n    proxy.isFocusField = false;\n    proxy.focusField = [];\n    proxy.updateDocumentEditedProperty(false);\n\n    if (pdfViewer.formDesignerModule) {\n      pdfViewer.formDesignerModule.formFieldIndex = 0;\n\n      if (proxy.activeElements) {\n        pdfViewer.clearSelection(proxy.activeElements.activePageID);\n      }\n\n      pdfViewer.zIndexTable = [];\n    }\n\n    proxy.initiateTextSelectMode();\n    proxy.RestrictionEnabled(proxy.restrictionList, true);\n    proxy.restrictionList = null;\n\n    if (!Browser.isDevice || pdfViewer.enableDesktopMode) {\n      if (proxy.navigationPane.sideBarToolbar) {\n        proxy.navigationPane.clear();\n      }\n    }\n\n    if (!isBlazor() && Browser.isDevice || !pdfViewer.enableDesktopMode) {\n      proxy.navigationPane.clear();\n    }\n\n    if (thumbnailViewModule) {\n      thumbnailViewModule.clear();\n    }\n\n    if (bookmarkViewModule) {\n      bookmarkViewModule.clear();\n    }\n\n    if (magnificationModule) {\n      magnificationModule.isMagnified = false;\n      magnificationModule.clearIntervalTimer();\n    }\n\n    if (textSelectionModule) {\n      textSelectionModule.clearTextSelection();\n    }\n\n    if (textSearchModule) {\n      textSearchModule.resetTextSearch();\n    }\n\n    if (annotationModule) {\n      annotationModule.clear();\n      annotationModule.initializeCollection();\n    }\n\n    if (formFieldsModule) {\n      formFieldsModule.readOnlyCollection = [];\n      formFieldsModule.signatureFieldCollection = [];\n      formFieldsModule.currentTarget = null;\n    }\n\n    if (signatureModule) {\n      signatureModule.signaturecollection = [];\n      signatureModule.outputcollection = [];\n    }\n\n    if (proxy.pageSize) {\n      proxy.pageSize = [];\n    }\n\n    if (proxy.renderedPagesList) {\n      proxy.renderedPagesList = [];\n    }\n\n    if (proxy.pageContainer) {\n      while (proxy.pageContainer.hasChildNodes()) {\n        proxy.pageContainer.removeChild(proxy.pageContainer.lastChild);\n      }\n    }\n\n    if (proxy.pageCount > 0) {\n      proxy.unloadDocument(proxy); // eslint-disable-next-line\n\n      proxy.textLayer.characterBound = new Array();\n      proxy.loadRequestHandler && proxy.loadRequestHandler.clear();\n      proxy.virtualLoadRequestHandler && proxy.virtualLoadRequestHandler.clear();\n      proxy.pageRequestHandler && proxy.pageRequestHandler.clear();\n      proxy.dowonloadRequestHandler && proxy.dowonloadRequestHandler.clear();\n      proxy.importAnnotationRequestHandler && proxy.importAnnotationRequestHandler.clear();\n      proxy.exportAnnotationRequestHandler && proxy.exportAnnotationRequestHandler.clear();\n      proxy.importFormFieldsRequestHandler && proxy.importFormFieldsRequestHandler.clear();\n      proxy.exportFormFieldsRequestHandler && proxy.exportFormFieldsRequestHandler.clear();\n\n      if (printModule && printModule.printRequestHandler) {\n        printModule.printRequestHandler.clear();\n      }\n    }\n\n    proxy.windowSessionStorageClear();\n\n    if (proxy.pinchZoomStorage) {\n      proxy.pinchZoomStorage = [];\n    }\n\n    if ((proxy.previousZoomValue || proxy.previousZoomValue === 0) && proxy.previousZoomValue !== pdfViewer.zoomValue) {\n      pdfViewer.zoomValue = proxy.previousZoomValue;\n    }\n\n    if (isTriggerEvent && proxy.pageCount > 0) {\n      pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n    }\n\n    this.pdfViewer.fileName = null;\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.destroy = function () {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.pdfViewer.element.classList.remove('e-pv-mobile-view');\n    }\n\n    this.unWireEvents();\n    this.clear(false);\n    this.pageContainer.parentNode ? this.pageContainer.parentNode.removeChild(this.pageContainer) : null;\n    this.viewerContainer.parentNode ? this.viewerContainer.parentNode.removeChild(this.viewerContainer) : null;\n\n    if (this.contextMenuModule) {\n      var contextMenuElement = this.contextMenuModule.contextMenuElement;\n      contextMenuElement && contextMenuElement.ej2_instances && contextMenuElement.ej2_instances.length > 0 ? this.contextMenuModule.destroy() : null;\n    }\n\n    if (this.pdfViewer.toolbarModule) {\n      this.navigationPane.destroy();\n    }\n\n    var measureElement = document.getElementById('measureElement');\n\n    if (measureElement) {\n      measureElement = undefined;\n    }\n  };\n  /**\n   * @param {PdfViewerBase} proxy - PdfviewerBase class.\n   * @returns {void}\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.unloadDocument = function (proxy) {\n    var documentId = '';\n\n    if (Browser.isIE || Browser.info.name === 'edge') {\n      documentId = decodeURI(window.sessionStorage.getItem('hashId'));\n    } else {\n      documentId = proxy.hashId ? proxy.hashId : window.sessionStorage.getItem('hashId');\n    }\n\n    var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n\n    if (documentId !== null) {\n      // eslint-disable-next-line max-len\n      var jsonObject = {\n        hashId: documentId,\n        documentLiveCount: documentLiveCount,\n        action: 'Unload',\n        elementId: proxy.pdfViewer.element.id\n      };\n      var actionName = window.sessionStorage.getItem('unload');\n\n      if (window.sessionStorage.getItem('serviceURL') && window.sessionStorage.getItem('serviceURL') !== 'undefined') {\n        try {\n          // eslint-disable-next-line\n          var browserSupportsKeepalive = ('keepalive' in new Request(''));\n\n          if (browserSupportsKeepalive) {\n            // eslint-disable-next-line\n            var headerValue = this.setUnloadRequestHeaders();\n            var credentialsData = this.pdfViewer.ajaxRequestSettings.withCredentials ? 'include' : 'omit';\n            fetch(window.sessionStorage.getItem('serviceURL') + '/' + actionName, {\n              method: 'POST',\n              credentials: credentialsData,\n              headers: headerValue,\n              body: JSON.stringify(jsonObject)\n            });\n          }\n        } catch (error) {\n          this.unloadRequestHandler = new AjaxHandler(this.pdfViewer);\n          this.unloadRequestHandler.send(jsonObject);\n        }\n      } else if (isBlazor()) {\n        this.clearCache(actionName, jsonObject, proxy);\n      }\n    }\n\n    if (this.pdfViewer.magnificationModule) {\n      this.pdfViewer.magnificationModule.zoomFactor = 1;\n    }\n\n    this.formFieldCollection = [];\n    window.sessionStorage.removeItem('hashId');\n    window.sessionStorage.removeItem('documentLiveCount');\n\n    if (this.documentId) {\n      window.sessionStorage.removeItem(this.documentId + '_formfields');\n      window.sessionStorage.removeItem(this.documentId + '_formDesigner');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n      window.sessionStorage.removeItem(this.documentId + '_formfields');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_sign');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n    }\n  };\n\n  PdfViewerBase.prototype.clearCache = function (actionName, jsonObject, proxy) {\n    this.unloadRequestHandler = new AjaxHandler(this.pdfViewer);\n    this.unloadRequestHandler.url = window.sessionStorage.getItem('serviceURL') + '/' + actionName;\n    this.unloadRequestHandler.mode = false;\n    this.unloadRequestHandler.responseType = null;\n    this.unloadRequestHandler.send(jsonObject); // eslint-disable-next-line\n\n    this.unloadRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n\n      if (data) {\n        if (typeof data !== 'object') {\n          if (data.indexOf('Document') === -1) {\n            proxy.onControlError(500, data, actionName);\n            data = null;\n          }\n        }\n\n        if (data) {\n          proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.unload, data);\n        }\n      }\n    }; // eslint-disable-next-line\n\n\n    this.unloadRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, actionName);\n    }; // eslint-disable-next-line\n\n\n    this.unloadRequestHandler.onError = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, actionName);\n    };\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.setUnloadRequestHeaders = function () {\n    // eslint-disable-next-line\n    var myHeaders = new Headers();\n    myHeaders.append('Content-Type', 'application/json;charset=UTF-8');\n\n    for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n      // eslint-disable-next-line max-len\n      myHeaders.append(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);\n    }\n\n    return myHeaders;\n  };\n\n  PdfViewerBase.prototype.windowSessionStorageClear = function () {\n    window.sessionStorage.removeItem('currentDocument');\n    window.sessionStorage.removeItem('serviceURL');\n    window.sessionStorage.removeItem('unload');\n\n    for (var i = 0; i < this.sessionStorage.length; i++) {\n      window.sessionStorage.removeItem(this.sessionStorage[i]);\n    }\n  };\n\n  PdfViewerBase.prototype.updateCommentPanel = function () {\n    // eslint-disable-next-line\n    var moreOptionsButton = document.querySelectorAll('#' + this.pdfViewer.element.id + '_more-options');\n\n    for (var i = 0; i < moreOptionsButton.length; i++) {\n      moreOptionsButton[i].style.visibility = 'hidden';\n    } // eslint-disable-next-line\n\n\n    var commentTextBox = document.querySelectorAll('.e-pv-new-comments-div');\n\n    for (var j = 0; j < commentTextBox.length; j++) {\n      commentTextBox[j].style.display = 'none';\n    } // eslint-disable-next-line\n\n\n    var commentContainer = document.querySelectorAll('.e-pv-comments-border');\n\n    for (var j = 0; j < commentContainer.length; j++) {\n      commentContainer[j].classList.remove('e-pv-comments-border');\n    } // eslint-disable-next-line\n\n\n    var editableElement = document.querySelectorAll('.e-editable-inline');\n\n    for (var j = 0; j < editableElement.length; j++) {\n      editableElement[j].style.display = 'none';\n    } // eslint-disable-next-line\n\n\n    var commentSelect = document.querySelectorAll('.e-pv-comments-select');\n\n    for (var z = 0; z < commentSelect.length; z++) {\n      commentSelect[z].classList.remove('e-pv-comments-select');\n    } // eslint-disable-next-line\n\n\n    var commentsDiv = document.querySelectorAll('.e-pv-comments-div');\n\n    for (var j = 0; j < commentsDiv.length; j++) {\n      commentsDiv[j].style.minHeight = 60 + 'px';\n    }\n  };\n  /**\n   * @param {boolean} isMouseDown - check whether the mouse down is triggered.\n   * @returns {void}\n   * @private\n   */\n\n\n  PdfViewerBase.prototype.focusViewerContainer = function (isMouseDown) {\n    var scrollX = window.scrollX;\n    var scrollY = window.scrollY; // eslint-disable-next-line\n\n    var parentNode = this.getScrollParent(this.viewerContainer);\n    var scrollNodeX = 0;\n    var scrollNodeY = 0;\n\n    if (parentNode !== null) {\n      scrollNodeX = parentNode.scrollLeft;\n      scrollNodeY = parentNode.scrollTop;\n    }\n\n    this.viewerContainer.focus();\n\n    if (this.currentPageNumber > 0) {\n      this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n    }\n\n    if (this.pdfViewer.annotation && this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer) {\n      this.updateCommentPanel();\n    } // eslint-disable-next-line max-len\n\n\n    if ((navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1) && parentNode !== null) {\n      parentNode.scrollLeft = scrollNodeX;\n      parentNode.scrollTop = scrollNodeY;\n    } else if (parentNode !== null) {\n      parentNode.scrollTo(scrollNodeX, scrollNodeY);\n    }\n\n    window.scrollTo(scrollX, scrollY);\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.getScrollParent = function (node) {\n    if (node === null || node.nodeName === 'HTML') {\n      return null;\n    }\n\n    var style = getComputedStyle(node);\n\n    if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n      return node;\n    } else {\n      return this.getScrollParent(node.parentNode);\n    }\n  };\n\n  PdfViewerBase.prototype.createCorruptedPopup = function () {\n    var _this = this; // eslint-disable-next-line max-len\n\n\n    var popupElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_corrupted_popup',\n      className: 'e-pv-corrupted-popup'\n    });\n    this.pageContainer.appendChild(popupElement);\n    this.corruptPopup = new Dialog({\n      showCloseIcon: true,\n      closeOnEscape: true,\n      isModal: true,\n      // eslint-disable-next-line max-len\n      header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>',\n      visible: false,\n      // eslint-disable-next-line max-len\n      buttons: [{\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('OK'),\n          isPrimary: true\n        },\n        click: this.closeCorruptPopup.bind(this)\n      }],\n      target: this.pdfViewer.element,\n      beforeClose: function () {\n        _this.corruptPopup.destroy();\n\n        _this.getElement('_corrupted_popup').remove();\n\n        _this.corruptPopup = null;\n\n        var waitingPopup = _this.getElement('_loadingIndicator');\n\n        if (waitingPopup != null) {\n          hideSpinner(waitingPopup);\n        }\n      }\n    });\n\n    if (this.pdfViewer.enableRtl) {\n      // eslint-disable-next-line max-len\n      this.corruptPopup.content = '<div id=\"templatertl\" class=\"e-pv-notification-icon-rtl\"> <div class=\"e-pv-corrupted-popup-content-rtl\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n      this.corruptPopup.enableRtl = true;\n    } else {\n      // eslint-disable-next-line max-len\n      this.corruptPopup.content = '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n    }\n\n    this.corruptPopup.appendTo(popupElement);\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.hideLoadingIndicator = function () {\n    var waitingPopup = this.getElement('_loadingIndicator');\n\n    if (waitingPopup !== null) {\n      hideSpinner(waitingPopup);\n    }\n  };\n\n  PdfViewerBase.prototype.closeCorruptPopup = function () {\n    this.corruptPopup.hide();\n    var waitingPopup = this.getElement('_loadingIndicator');\n\n    if (waitingPopup !== null) {\n      hideSpinner(waitingPopup);\n    }\n  };\n\n  PdfViewerBase.prototype.createPrintPopup = function () {\n    var element = document.getElementById(this.pdfViewer.element.id);\n    this.printMainContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_printcontainer',\n      className: 'e-pv-print-popup-container'\n    });\n    element.appendChild(this.printMainContainer);\n    this.printMainContainer.style.display = 'none';\n    var printWaitingPopup = createElement('div', {\n      id: this.pdfViewer.element.id + '_printLoadingIndicator',\n      className: 'e-pv-print-loading-container'\n    });\n    this.printMainContainer.appendChild(printWaitingPopup);\n    createSpinner({\n      target: printWaitingPopup,\n      cssClass: 'e-spin-center'\n    });\n    this.setLoaderProperties(printWaitingPopup);\n  };\n\n  PdfViewerBase.prototype.createGoToPagePopup = function () {\n    var _this = this; // eslint-disable-next-line max-len\n\n\n    var popupElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_goTopage_popup',\n      className: 'e-pv-gotopage-popup'\n    });\n    this.goToPageElement = createElement('span', {\n      id: this.pdfViewer.element.id + '_prompt'\n    });\n    this.goToPageElement.textContent = this.pdfViewer.localeObj.getConstant('Enter pagenumber');\n    popupElement.appendChild(this.goToPageElement);\n    var inputContainer = createElement('span', {\n      className: 'e-pv-text-input'\n    }); // eslint-disable-next-line max-len\n\n    this.goToPageInput = createElement('input', {\n      id: this.pdfViewer.element.id + '_page_input',\n      className: 'e-input'\n    });\n    this.goToPageInput.type = 'text';\n    this.goToPageInput.style.maxWidth = '80%';\n    this.pageNoContainer = createElement('span', {\n      className: '.e-pv-number-ofpages'\n    });\n    inputContainer.appendChild(this.goToPageInput);\n    inputContainer.appendChild(this.pageNoContainer);\n    popupElement.appendChild(inputContainer);\n    this.pageContainer.appendChild(popupElement);\n    this.goToPagePopup = new Dialog({\n      showCloseIcon: true,\n      closeOnEscape: false,\n      isModal: true,\n      header: this.pdfViewer.localeObj.getConstant('GoToPage'),\n      visible: false,\n      buttons: [{\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('Cancel')\n        },\n        click: this.GoToPageCancelClick.bind(this)\n      }, // eslint-disable-next-line max-len\n      {\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('Apply'),\n          disabled: true,\n          cssClass: 'e-pv-gotopage-apply-btn',\n          isPrimary: true\n        },\n        click: this.GoToPageApplyClick.bind(this)\n      }],\n      close: this.closeGoToPagePopUp.bind(this)\n    });\n\n    if (this.pdfViewer.enableRtl) {\n      this.goToPagePopup.enableRtl = true;\n    }\n\n    this.goToPagePopup.appendTo(popupElement);\n\n    if (!isBlazor()) {\n      var goToPageTextBox = new NumericTextBox({\n        format: '##',\n        showSpinButton: false\n      });\n      goToPageTextBox.appendTo(this.goToPageInput);\n    }\n\n    this.goToPageInput.addEventListener('keyup', function () {\n      // eslint-disable-next-line\n      var inputValue = _this.goToPageInput.value;\n\n      if (inputValue !== '' && parseFloat(inputValue) > 0 && _this.pdfViewer.pageCount + 1 > parseFloat(inputValue)) {\n        _this.EnableApplyButton();\n      } else {\n        _this.DisableApplyButton();\n      }\n    });\n  };\n\n  PdfViewerBase.prototype.closeGoToPagePopUp = function () {\n    this.goToPageInput.value = '';\n    this.DisableApplyButton();\n  };\n\n  PdfViewerBase.prototype.EnableApplyButton = function () {\n    // eslint-disable-next-line\n    var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n    popupElements.removeAttribute('disabled');\n  };\n\n  PdfViewerBase.prototype.DisableApplyButton = function () {\n    // eslint-disable-next-line\n    var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n    popupElements.setAttribute('disabled', true);\n  };\n\n  PdfViewerBase.prototype.GoToPageCancelClick = function () {\n    this.goToPagePopup.hide();\n  };\n\n  PdfViewerBase.prototype.GoToPageApplyClick = function () {\n    this.goToPagePopup.hide(); // eslint-disable-next-line\n\n    var pageNumber = this.goToPageInput.value;\n    this.pdfViewer.navigation.goToPage(pageNumber);\n    this.updateMobileScrollerPosition();\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.updateMobileScrollerPosition = function () {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.mobileScrollerContainer) {\n      // eslint-disable-next-line\n      var ratio = (this.viewerContainer.scrollHeight - this.viewerContainer.clientHeight) / (this.viewerContainer.clientHeight - 56); // eslint-disable-next-line\n\n      var differenceRatio = this.viewerContainer.scrollTop / ratio; // eslint-disable-next-line\n\n      var toolbarHeight = this.pdfViewer.toolbarModule ? this.toolbarHeight : 0;\n      this.mobileScrollerContainer.style.top = toolbarHeight + differenceRatio + 'px';\n    }\n  };\n\n  PdfViewerBase.prototype.createPasswordPopup = function () {\n    var _this = this; // eslint-disable-next-line max-len\n\n\n    var popupElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_password_popup',\n      className: 'e-pv-password-popup',\n      attrs: {\n        'tabindex': '-1'\n      }\n    });\n    this.promptElement = createElement('span', {\n      id: this.pdfViewer.element.id + '_prompt',\n      attrs: {\n        'tabindex': '-1'\n      }\n    });\n    this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n    popupElement.appendChild(this.promptElement);\n    var inputContainer = createElement('span', {\n      className: 'e-input-group e-pv-password-input'\n    }); // eslint-disable-next-line max-len\n\n    this.passwordInput = createElement('input', {\n      id: this.pdfViewer.element.id + '_password_input',\n      className: 'e-input'\n    });\n    this.passwordInput.type = 'password';\n    this.passwordInput.name = 'Required';\n    inputContainer.appendChild(this.passwordInput);\n    popupElement.appendChild(inputContainer);\n    this.pageContainer.appendChild(popupElement);\n    this.passwordPopup = new Dialog({\n      showCloseIcon: true,\n      closeOnEscape: false,\n      isModal: true,\n      header: this.pdfViewer.localeObj.getConstant('Password Protected'),\n      visible: false,\n      close: this.passwordCancel.bind(this),\n      target: this.pdfViewer.element,\n      beforeClose: function () {\n        _this.passwordPopup.destroy();\n\n        _this.getElement('_password_popup').remove();\n\n        _this.passwordPopup = null;\n\n        var waitingPopup = _this.getElement('_loadingIndicator');\n\n        if (waitingPopup != null) {\n          hideSpinner(waitingPopup);\n        }\n      }\n    });\n\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.passwordPopup.buttons = [{\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('OK'),\n          isPrimary: true\n        },\n        click: this.applyPassword.bind(this)\n      }, {\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('Cancel')\n        },\n        click: this.passwordCancelClick.bind(this)\n      }];\n    } else {\n      this.passwordPopup.buttons = [{\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('Cancel')\n        },\n        click: this.passwordCancelClick.bind(this)\n      }, {\n        buttonModel: {\n          content: this.pdfViewer.localeObj.getConstant('OK'),\n          isPrimary: true\n        },\n        click: this.applyPassword.bind(this)\n      }];\n    }\n\n    if (this.pdfViewer.enableRtl) {\n      this.passwordPopup.enableRtl = true;\n    }\n\n    this.passwordPopup.appendTo(popupElement);\n    this.passwordInput.addEventListener('keyup', function () {\n      if (_this.passwordInput.value === '') {\n        _this.passwordDialogReset();\n      }\n    });\n    this.passwordInput.addEventListener('focus', function () {\n      _this.passwordInput.parentElement.classList.add('e-input-focus');\n    });\n    this.passwordInput.addEventListener('blur', function () {\n      _this.passwordInput.parentElement.classList.remove('e-input-focus');\n    });\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.passwordCancel = function (args) {\n    if (args.isInteraction) {\n      this.clear(false);\n      this.passwordDialogReset();\n      this.passwordInput.value = '';\n    }\n\n    var waitingPopup = this.getElement('_loadingIndicator');\n\n    if (waitingPopup !== null) {\n      hideSpinner(waitingPopup);\n    }\n  };\n\n  PdfViewerBase.prototype.passwordCancelClick = function () {\n    this.clear(false);\n    this.passwordDialogReset();\n    this.passwordPopup.hide();\n    var waitingPopup = this.getElement('_loadingIndicator');\n\n    if (waitingPopup !== null) {\n      hideSpinner(waitingPopup);\n    }\n  };\n\n  PdfViewerBase.prototype.passwordDialogReset = function () {\n    if (!isBlazor()) {\n      if (this.promptElement) {\n        this.promptElement.classList.remove('e-pv-password-error');\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        this.passwordInput.value = '';\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.applyPassword = function () {\n    if (!isBlazor()) {\n      var password = this.passwordInput.value;\n\n      if (password !== '') {\n        this.pdfViewer.load(this.document, password);\n      }\n    }\n\n    this.focusViewerContainer();\n  };\n\n  PdfViewerBase.prototype.createFileInputElement = function () {\n    if (Browser.isDevice || !this.pdfViewer.enableDesktopMode) {\n      // eslint-disable-next-line max-len\n      if (this.pdfViewer.enableAnnotationToolbar && this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n        this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement();\n      }\n\n      if (this.signatureModule) {\n        this.signatureModule.createSignatureFileElement();\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.wireEvents = function () {\n    var _this = this;\n\n    this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnScroll, true);\n    }\n\n    this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n    this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n    this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n    this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n    this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n    this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n    this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n    this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n    this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n    this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n    this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n    window.addEventListener('keydown', this.onWindowKeyDown);\n    window.addEventListener('mouseup', this.onWindowMouseUp);\n    window.addEventListener('touchend', this.onWindowTouchEnd);\n\n    this.unload = function () {\n      return _this.unloadDocument(_this);\n    };\n\n    window.addEventListener('unload', this.unload);\n    window.addEventListener('beforeunload', this.clearSessionStorage);\n    window.addEventListener('resize', this.onWindowResize); // eslint-disable-next-line max-len\n\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n      this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n      this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n      this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n      this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n    } else {\n      this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n      this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n      this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n      this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n      this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n    }\n  };\n\n  PdfViewerBase.prototype.unWireEvents = function () {\n    this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll, true);\n    }\n\n    this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n    this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n    this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n    this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n    this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n    this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n    this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n    this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n    this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n    this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n    this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n    window.addEventListener('keydown', this.onWindowKeyDown);\n    window.removeEventListener('mouseup', this.onWindowMouseUp);\n    window.removeEventListener('unload', this.unload);\n    window.removeEventListener('resize', this.onWindowResize); // eslint-disable-next-line max-len\n\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n      this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n      this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n      this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n      this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n    } else {\n      this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n      this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n      this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n      this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n      this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.updateZoomValue = function () {\n    if (this.pdfViewer.magnificationModule) {\n      if (this.pdfViewer.magnificationModule.isAutoZoom) {\n        this.pdfViewer.magnificationModule.fitToAuto();\n      } else if (this.pdfViewer.zoomMode !== 'FitToWidth' && this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n        this.pdfViewer.magnificationModule.fitToWidth();\n      } else if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n        this.pdfViewer.magnificationModule.fitToPage();\n      }\n    }\n\n    for (var i = 0; i < this.pageCount; i++) {\n      this.applyLeftPosition(i);\n    }\n  };\n  /**\n   * @private\n   * @param {any} annotation - The annotation type of any.\n   * @returns {void}\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.updateFreeTextProperties = function (annotation) {\n    if (this.pdfViewer.enableShapeLabel) {\n      if (this.pdfViewer.shapeLabelSettings.fillColor) {\n        annotation.labelFillColor = this.pdfViewer.shapeLabelSettings.fillColor;\n      }\n\n      if (this.pdfViewer.shapeLabelSettings.fontColor) {\n        annotation.fontColor = this.pdfViewer.shapeLabelSettings.fontColor;\n      }\n\n      if (this.pdfViewer.shapeLabelSettings.fontSize) {\n        annotation.fontSize = this.pdfViewer.shapeLabelSettings.fontSize;\n      }\n\n      if (this.pdfViewer.shapeLabelSettings.fontFamily) {\n        annotation.fontFamily = this.pdfViewer.shapeLabelSettings.fontFamily;\n      }\n\n      if (this.pdfViewer.shapeLabelSettings.opacity) {\n        annotation.labelOpacity = this.pdfViewer.shapeLabelSettings.opacity;\n      }\n\n      if (this.pdfViewer.shapeLabelSettings.labelContent) {\n        annotation.labelContent = this.pdfViewer.shapeLabelSettings.labelContent;\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {MouseEvent} event - The mouse event.\n   * @returns {void}\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.mouseDownHandler = function (event) {\n    var isEnableDelete = false;\n    var isCancel;\n    var hidenItems = [];\n    var disabledItems = [];\n\n    if (event && event.target) {\n      this.mouseDownEvent = event;\n      this.contextMenuModule.currentTarget = event.target;\n    }\n\n    if (this.pdfViewer.annotationModule) {\n      isEnableDelete = this.pdfViewer.annotationModule.isEnableDelete();\n    }\n\n    if (!isEnableDelete) {\n      disabledItems.push('DeleteContext');\n    }\n\n    if (this.pdfViewer.contextMenuOption === 'None') {\n      isCancel = true;\n    } else if (this.pdfViewer.textSelectionModule || this.isShapeBasedAnnotationsEnabled()) {\n      if (event) {\n        var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(event); // eslint-disable-next-line max-len\n\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n          this.isFreeTextContextMenu = true; // eslint-disable-next-line max-len\n\n          if (this.pdfViewer.annotation.freeTextAnnotationModule && !this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected) {\n            disabledItems.push('Cut');\n            disabledItems.push('Copy');\n          } // eslint-disable-next-line max-len\n\n\n          if (this.pdfViewer.annotation.freeTextAnnotationModule && this.pdfViewer.annotation.freeTextAnnotationModule.selectedText === '') {\n            disabledItems.push('Paste');\n          }\n\n          hidenItems.push('HighlightContext');\n          hidenItems.push('UnderlineContext');\n          hidenItems.push('StrikethroughContext');\n          hidenItems.push('ScaleRatio');\n          hidenItems.push('Properties');\n          hidenItems.push('Comment');\n          hidenItems.push('DeleteContext');\n        } else if (isClickWithinSelectionBounds && this.pdfViewer.textSelectionModule) {\n          // eslint-disable-next-line max-len\n          if (!event.target.classList.contains('e-pv-maintaincontent') && event.target.classList.contains('e-pv-text') || event.target.classList.contains('e-pv-text-layer')) {\n            if (this.checkIsNormalText()) {\n              isCancel = true;\n            } // eslint-disable-next-line max-len\n\n          } else if ((Browser.isIE || Browser.info.name === 'edge') && event.target.classList.contains('e-pv-page-container')) {\n            isCancel = true;\n          }\n\n          hidenItems.push('Cut');\n          hidenItems.push('Paste');\n          hidenItems.push('DeleteContext');\n          hidenItems.push('ScaleRatio');\n          hidenItems.push('Comment');\n          hidenItems.push('Properties'); // eslint-disable-next-line max-len\n        } else if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n          this.shapeMenuItems(hidenItems, disabledItems, false, true); // eslint-disable-next-line max-len\n        } else if (this.pdfViewer.selectedItems.annotations.length !== 0 && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType !== 'Path') {\n          this.shapeMenuItems(hidenItems, disabledItems, true);\n        } else {\n          // eslint-disable-next-line max-len\n          if (this.pdfViewer.annotation && this.pdfViewer.annotation.isShapeCopied && (event.target.classList.contains('e-pv-text-layer') || event.target.classList.contains('e-pv-text')) && !this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            hidenItems.push('Properties');\n            this.shapeMenuItems(hidenItems, disabledItems, false); // eslint-disable-next-line max-len\n          } else if (this.isCalibrateAnnotationModule() && this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode) {\n            hidenItems.push('HighlightContext');\n            hidenItems.push('UnderlineContext');\n            hidenItems.push('StrikethroughContext');\n            hidenItems.push('Properties');\n            disabledItems.push('Cut');\n            disabledItems.push('Copy');\n            disabledItems.push('Paste');\n            disabledItems.push('DeleteContext');\n            disabledItems.push('Comment'); // eslint-disable-next-line max-len\n          } else if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            hidenItems.push('HighlightContext');\n            hidenItems.push('UnderlineContext');\n            hidenItems.push('StrikethroughContext');\n            hidenItems.push('Properties');\n            hidenItems.push('Cut');\n            hidenItems.push('Copy');\n            hidenItems.push('Paste');\n            hidenItems.push('ScaleRatio');\n          } else {\n            isCancel = true;\n          }\n        }\n      } else if (this.pdfViewer.textSelectionModule && this.pdfViewer.contextMenuOption === 'MouseUp') {\n        hidenItems.push('Cut');\n        hidenItems.push('Paste');\n        hidenItems.push('DeleteContext');\n        hidenItems.push('ScaleRatio');\n        hidenItems.push('Comment');\n        hidenItems.push('Properties');\n      } else if (this.pdfViewer.selectedItems.annotations.length === 0) {\n        hidenItems.push('Cut');\n        hidenItems.push('Paste');\n        hidenItems.push('DeleteContext');\n        hidenItems.push('ScaleRatio');\n        hidenItems.push('Properties');\n      }\n\n      if (!this.pdfViewer.enableCommentPanel) {\n        disabledItems.push('Comment');\n      }\n    } else {\n      isCancel = true;\n    }\n\n    var eventArgs = {\n      hidenItems: hidenItems,\n      disabledItems: disabledItems,\n      isCancel: isCancel\n    };\n\n    this.pdfViewer._dotnetInstance.invokeMethodAsync('MouseDownHandler', eventArgs);\n  };\n  /**\n   * @private\n   * @param {string} selectedMenu - The selected menu.\n   * @returns {void}\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.OnItemSelected = function (selectedMenu) {\n    // eslint-disable-next-line\n    var target = this.contextMenuModule.currentTarget;\n\n    switch (selectedMenu) {\n      case this.pdfViewer.localeObj.getConstant('Copy'):\n        this.CopyItemSelected();\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Highlight context'):\n        this.TextMarkUpSelected('Highlight');\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Underline context'):\n        this.TextMarkUpSelected('Underline');\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Strikethrough context'):\n        this.TextMarkUpSelected('Strikethrough');\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Properties'):\n        this.PropertiesItemSelected();\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Cut'):\n        this.CutItemSelected(target);\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Paste'):\n        this.pasteItemSelected(target);\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Delete Context'):\n        this.DeleteItemSelected();\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Scale Ratio'):\n        this.ScaleRatioSelected();\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Comment'):\n        this.CommentItemSelected();\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  PdfViewerBase.prototype.CommentItemSelected = function () {\n    if (this.pdfViewer.annotation) {\n      this.pdfViewer.annotation.showCommentsPanel();\n\n      if (this.pdfViewer.selectedItems.annotations.length !== 0 || this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        // eslint-disable-next-line\n        var currentAnnotation = void 0;\n\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n          currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        } else {\n          currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        } // eslint-disable-next-line\n\n\n        var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n\n        if (accordionExpand) {\n          accordionExpand.ej2_instances[0].expandItem(true);\n        } // eslint-disable-next-line\n\n\n        var commentsDiv = document.getElementById(currentAnnotation.annotName);\n\n        if (commentsDiv) {\n          if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n            commentsDiv.firstChild.click();\n          }\n        }\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.ScaleRatioSelected = function () {\n    if (this.isCalibrateAnnotationModule()) {\n      this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow();\n    }\n  };\n\n  PdfViewerBase.prototype.DeleteItemSelected = function () {\n    if (this.pdfViewer.formDesignerModule && this.pdfViewer.selectedItems.formFields.length !== 0) {\n      this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);\n    } else if (this.pdfViewer.annotation) {\n      this.pdfViewer.annotation.deleteAnnotation();\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.pasteItemSelected = function (target) {\n    // eslint-disable-next-line max-len\n    if (this.isFreeTextContextMenu || this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus && target && target.className === 'free-text-input' && target.tagName === 'TEXTAREA') {\n      this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(target);\n      this.contextMenuModule.close();\n    } else {\n      this.pdfViewer.paste();\n      this.contextMenuModule.previousAction = 'Paste';\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.CutItemSelected = function (target) {\n    // eslint-disable-next-line max-len\n    if (this.isFreeTextContextMenu || this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus && target && target.className === 'free-text-input' && target.tagName === 'TEXTAREA') {\n      this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(target);\n      this.contextMenuModule.close();\n    } else if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      var pageIndex = this.pdfViewer.selectedItems.annotations[0].pageIndex;\n      this.pdfViewer.cut();\n      this.contextMenuModule.previousAction = 'Cut';\n    } else if (this.pdfViewer.selectedItems.formFields.length === 1) {\n      this.pdfViewer.cut();\n      this.contextMenuModule.previousAction = 'Cut';\n    }\n  };\n\n  PdfViewerBase.prototype.CopyItemSelected = function () {\n    var isSkip = false; // eslint-disable-next-line max-len\n\n    if (this.isFreeTextContextMenu || this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n      this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText();\n      this.contextMenuModule.close();\n      isSkip = true;\n    } else if (this.pdfViewer.textSelectionModule) {\n      this.pdfViewer.textSelectionModule.copyText();\n      this.contextMenuModule.close();\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length && !isSkip) {\n      this.pdfViewer.copy();\n      this.contextMenuModule.previousAction = 'Copy';\n    } else if (this.pdfViewer.selectedItems.formFields.length > 0) {\n      this.pdfViewer.copy();\n      this.contextMenuModule.previousAction = 'Copy';\n    }\n  };\n\n  PdfViewerBase.prototype.PropertiesItemSelected = function () {\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance')) {\n      this.pdfViewer.annotation.createPropertiesWindow(); // eslint-disable-next-line max-len\n    } else if (this.pdfViewer.selectedItems.formFields.length !== 0 && this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType) {\n      this.pdfViewer.formDesigner.createPropertiesWindow();\n    }\n  };\n\n  PdfViewerBase.prototype.TextMarkUpSelected = function (type) {\n    if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n      this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained = false;\n      this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(type);\n      this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n      this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n      this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained = true;\n    }\n  };\n\n  PdfViewerBase.prototype.shapeMenuItems = function (hidenItems, disabledItems, enableProperties, isSignature) {\n    if (this.pdfViewer.annotation && !this.pdfViewer.annotation.isShapeCopied) {\n      disabledItems.push('Paste');\n    }\n\n    hidenItems.push('HighlightContext');\n    hidenItems.push('UnderlineContext');\n    hidenItems.push('StrikethroughContext');\n    hidenItems.push('ScaleRatio');\n\n    if (enableProperties) {\n      // eslint-disable-next-line max-len\n      if (!(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance')) {\n        hidenItems.push('Properties');\n      }\n    } else if (isSignature) {\n      hidenItems.push('Properties');\n      hidenItems.push('Comment');\n    } else {\n      hidenItems.push('Cut');\n      hidenItems.push('Copy');\n      hidenItems.push('DeleteContext');\n      hidenItems.push('Comment');\n    }\n  };\n\n  PdfViewerBase.prototype.checkIsRtlText = function (text) {\n    // eslint-disable-next-line max-len\n    var ltrChars = 'A-Za-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02B8\\\\u0300-\\\\u0590\\\\u0800-\\\\u1FFF' + '\\\\u2C00-\\\\uFB1C\\\\uFDFE-\\\\uFE6F\\\\uFEFD-\\\\uFFFF';\n    var rtlChars = '\\\\u0591-\\\\u07FF\\\\uFB1D-\\\\uFDFD\\\\uFE70-\\\\uFEFC'; // eslint-disable-next-line\n\n    var rtlDirCheck = new RegExp('^[^' + ltrChars + ']*[' + rtlChars + ']');\n    return rtlDirCheck.test(text);\n  };\n  /**\n   * @private\n   * @param {any} event - Specifies the event.\n   * @returns {boolean} - retruned the beolean value.\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.isClickWithinSelectionBounds = function (event) {\n    var isWithin = false;\n\n    if (this.pdfViewer.textSelectionModule) {\n      var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.currentPageNumber - 1);\n\n      if (bounds) {\n        var currentBound = bounds;\n\n        if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) > event.clientX && this.getVerticalValue(currentBound.top) < event.clientY && this.getVerticalValue(currentBound.bottom) > event.clientY) {\n          isWithin = true;\n        }\n      }\n\n      if ((Browser.isIE || Browser.info.name === 'edge') && bounds) {\n        isWithin = true;\n      }\n    }\n\n    return isWithin;\n  };\n\n  PdfViewerBase.prototype.getHorizontalClientValue = function (value) {\n    var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n    var pageBounds = pageDiv.getBoundingClientRect();\n    return value - pageBounds.left;\n  };\n\n  PdfViewerBase.prototype.getVerticalClientValue = function (value) {\n    var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n    var pageBounds = pageDiv.getBoundingClientRect();\n    return value - pageBounds.top;\n  };\n\n  PdfViewerBase.prototype.getHorizontalValue = function (value) {\n    var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n    var pageBounds = pageDiv.getBoundingClientRect();\n    return value * this.getZoomFactor() + pageBounds.left;\n  };\n\n  PdfViewerBase.prototype.getVerticalValue = function (value) {\n    var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n    var pageBounds = pageDiv.getBoundingClientRect();\n    return value * this.getZoomFactor() + pageBounds.top;\n  };\n  /**\n   * @private\n   * @returns {boolean} - retruned the beolean value.\n   */\n\n\n  PdfViewerBase.prototype.checkIsNormalText = function () {\n    var isText = true;\n    var currentText = ''; // eslint-disable-next-line\n\n    var textSelectionModule = this.pdfViewer.textSelectionModule;\n\n    if (textSelectionModule && textSelectionModule.selectionRangeArray && textSelectionModule.selectionRangeArray.length === 1) {\n      currentText = textSelectionModule.selectionRangeArray[0].textContent;\n    } else if (window.getSelection() && window.getSelection().anchorNode) {\n      currentText = window.getSelection().toString();\n    }\n\n    if (currentText !== '' && this.checkIsRtlText(currentText)) {\n      isText = false;\n    }\n\n    return isText;\n  };\n\n  PdfViewerBase.prototype.DeleteKeyPressed = function (event) {\n    if (this.pdfViewer.formDesignerModule && this.pdfViewer.designerMode && this.pdfViewer.selectedItems.formFields.length !== 0) {\n      this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);\n    } else if (this.pdfViewer.annotation && !this.pdfViewer.designerMode) {\n      if (this.isTextMarkupAnnotationModule() && !this.getPopupNoteVisibleStatus()) {\n        this.pdfViewer.annotationModule.deleteAnnotation();\n      }\n\n      if (this.pdfViewer.selectedItems.annotations.length > 0) {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        var isReadOnly = true;\n        var type = annotation.shapeAnnotationType;\n\n        if (type === 'Path' || annotation.formFieldAnnotationType === 'SignatureField' || annotation.formFieldAnnotationType === 'InitialField' || type === 'HandWrittenSignature' || type === 'SignatureText' || type === 'SignatureImage') {\n          var inputFields = document.getElementById(annotation.id);\n\n          if (inputFields && inputFields.disabled) {\n            isReadOnly = true;\n          }\n        }\n\n        if (!isReadOnly) {\n          if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n            if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n              this.pdfViewer.remove(annotation);\n              this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));\n            }\n          } else {\n            this.pdfViewer.remove(annotation);\n            this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.initiatePanning = function () {\n    this.isPanMode = true;\n    this.textLayer.modifyTextCursor(false);\n    this.disableTextSelectionMode();\n\n    if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n      this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems();\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.initiateTextSelectMode = function () {\n    this.isPanMode = false;\n\n    if (this.viewerContainer) {\n      this.viewerContainer.style.cursor = 'auto';\n\n      if (this.pdfViewer.textSelectionModule) {\n        this.textLayer.modifyTextCursor(true);\n        this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n      }\n\n      if ((!Browser.isDevice || this.pdfViewer.enableDesktopMode) && !isBlazor()) {\n        this.enableAnnotationAddTools(true);\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n  */\n\n\n  PdfViewerBase.prototype.initiateTextSelection = function () {\n    if (this.pdfViewer.toolbar && !this.pdfViewer.toolbar.isSelectionToolDisabled) {\n      this.initiateTextSelectMode();\n      this.pdfViewer.toolbar.updateInteractionTools(true);\n    }\n  };\n\n  PdfViewerBase.prototype.enableAnnotationAddTools = function (isEnable) {\n    if (this.pdfViewer.toolbarModule) {\n      if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n        this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.applySelection = function () {\n    if (window.getSelection().anchorNode !== null) {\n      this.pdfViewer.textSelectionModule.applySpanForSelection();\n    }\n\n    this.isViewerContainerDoubleClick = false;\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.isDesignerMode = function (target) {\n    var isDesignerMode = false;\n\n    if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n      isDesignerMode = true; // eslint-disable-next-line max-len\n    } else if (this.pdfViewer.selectedItems.annotations.length !== 0 && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType !== 'Path') {\n      isDesignerMode = true; // eslint-disable-next-line max-len\n    } else if (this.pdfViewer.selectedItems.formFields.length !== 0 && this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType && this.pdfViewer.designerMode) {\n      isDesignerMode = true;\n    } else {\n      // eslint-disable-next-line max-len\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.isShapeCopied && (target.classList.contains('e-pv-text-layer') || // eslint-disable-next-line max-len\n      target.classList.contains('e-pv-text')) && !this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        isDesignerMode = true; // eslint-disable-next-line max-len\n      } else if (this.pdfViewer.formDesigner && this.pdfViewer.formDesigner.isShapeCopied && (target.classList.contains('e-pv-text-layer') || target.classList.contains('e-pv-text'))) {\n        isDesignerMode = true;\n      }\n    }\n\n    this.designerModetarget = target;\n    return isDesignerMode;\n  };\n\n  PdfViewerBase.prototype.handleTaps = function (touchPoints) {\n    var _this = this;\n\n    if (!this.singleTapTimer) {\n      this.singleTapTimer = setTimeout(function () {\n        _this.onSingleTap(touchPoints); // eslint-disable-next-line\n\n      }, 300);\n      this.tapCount++;\n    } else {\n      if (this.pdfViewer.enablePinchZoom) {\n        this.tapCount++;\n        clearTimeout(this.singleTapTimer);\n        this.singleTapTimer = null;\n        this.onDoubleTap(touchPoints);\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.handleTextBoxTaps = function (touchPoints) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.inputTapCount = 0;\n    }, 300);\n    this.inputTapCount++; // eslint-disable-next-line\n\n    var timer = setTimeout(function () {\n      _this.onTextBoxDoubleTap(touchPoints);\n    }, 200);\n\n    if (this.inputTapCount > 2) {\n      this.inputTapCount = 0;\n    }\n  };\n\n  PdfViewerBase.prototype.onTextBoxDoubleTap = function (touches) {\n    var target = touches[0].target;\n\n    if (this.inputTapCount === 2) {\n      if (this.pdfViewer.selectedItems.annotations.length !== 0) {\n        if (this.pdfViewer.annotationModule) {\n          var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n          this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName, currentAnnotation.pageIndex, currentAnnotation, null, true);\n        }\n\n        if (this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations) === true) {\n          var elmtPosition = {};\n          elmtPosition.x = this.pdfViewer.selectedItems.annotations[0].bounds.x;\n          elmtPosition.y = this.pdfViewer.selectedItems.annotations[0].bounds.y; // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition, this.pdfViewer.selectedItems.annotations[0]);\n        } else if (this.pdfViewer.selectedItems.annotations[0].enableShapeLabel === true) {\n          var elmtPosition = {};\n          elmtPosition.x = this.pdfViewer.selectedItems.annotations[0].bounds.x;\n          elmtPosition.y = this.pdfViewer.selectedItems.annotations[0].bounds.y;\n          this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition, this.pdfViewer.selectedItems.annotations[0]);\n        }\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.onSingleTap = function (touches) {\n    var target = touches[0].target;\n    var isFormfields = false;\n    this.singleTapTimer = null;\n\n    if (target && (target.classList.contains('e-pdfviewer-formFields') || target.classList.contains('e-pdfviewer-ListBox') || target.classList.contains('e-pdfviewer-signatureformfields'))) {\n      isFormfields = true;\n    }\n\n    if (!this.isLongTouchPropagated && !this.navigationPane.isNavigationToolbarVisible && !isFormfields) {\n      if (this.pdfViewer.toolbarModule) {\n        if (this.touchClientX >= touches[0].clientX - 10 && this.touchClientX <= touches[0].clientX + 10 && this.touchClientY >= touches[0].clientY - 10 && this.touchClientY <= touches[0].clientY + 10) {\n          if (!this.isTapHidden) {\n            if (isBlazor()) {\n              // eslint-disable-next-line max-len\n              this.viewerContainer.scrollTop -= this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar').clientHeight * this.getZoomFactor();\n            }\n\n            if (this.pdfViewer.toolbar.moreDropDown) {\n              var dropDown = this.getElement('_more_option-popup');\n\n              if (dropDown.firstElementChild) {\n                dropDown.classList.remove('e-popup-open');\n                dropDown.classList.add('e-popup-close');\n                dropDown.removeChild(dropDown.firstElementChild);\n              }\n            }\n          } else {\n            if (isBlazor()) {\n              // eslint-disable-next-line max-len\n              this.viewerContainer.scrollTop += this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar').clientHeight * this.getZoomFactor();\n            }\n          }\n\n          if (this.isTapHidden && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.mobileScrollerContainer.style.display = '';\n            this.updateMobileScrollerPosition(); // eslint-disable-next-line max-len\n          } else if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.getSelectTextMarkupCurrentPage() == null) {\n            this.mobileScrollerContainer.style.display = 'none';\n          }\n\n          if (this.getSelectTextMarkupCurrentPage() == null) {\n            if (!isBlazor()) {\n              if (this.pdfViewer.enableToolbar) {\n                this.pdfViewer.toolbarModule.showToolbar(true);\n              }\n            } else {\n              //this.pdfViewer._dotnetInstance.invokeMethodAsync('TapOnMobileDevice', this.isTapHidden);\n              this.blazorUIAdaptor.tapOnMobileDevice(this.isTapHidden);\n            }\n\n            this.isTapHidden = !this.isTapHidden;\n          }\n        }\n\n        this.tapCount = 0;\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.onDoubleTap = function (touches) {\n    var target = touches[0].target;\n    var isFormfields = false;\n\n    if (target && (target.classList.contains('e-pdfviewer-formFields') || target.classList.contains('e-pdfviewer-ListBox') || target.classList.contains('e-pdfviewer-signatureformfields'))) {\n      isFormfields = true;\n    }\n\n    if (this.tapCount === 2 && !isFormfields) {\n      this.tapCount = 0;\n      /**\n       * Sometimes the values gets differ by some decimal points. So converted the decimal points values to Integer values.\n       */\n      // eslint-disable-next-line\n\n      if (this.touchClientX >= parseInt((touches[0].clientX - 10).toString()) && this.touchClientX <= touches[0].clientX + 10 && this.touchClientY >= touches[0].clientY - 10 && this.touchClientY <= touches[0].clientY + 30) {\n        if (this.pdfViewer.magnification && this.pdfViewer.selectedItems.annotations.length !== 1) {\n          this.pdfViewer.magnification.onDoubleTapMagnification();\n        }\n\n        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, this.toolbarHeight);\n        this.isTapHidden = false;\n        clearTimeout(this.singleTapTimer);\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.preventTouchEvent = function (event) {\n    if (this.pdfViewer.textSelectionModule) {\n      // eslint-disable-next-line max-len\n      if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled && this.getSelectTextMarkupCurrentPage() == null) {\n        if (!(this.isWebkitMobile && Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.renderStampAnnotation = function (event) {\n    if (this.pdfViewer.annotation) {\n      var zoomFactor = this.getZoomFactor();\n      var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n      var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n\n      if (this.pdfViewer.enableStampAnnotations) {\n        var stampModule = this.pdfViewer.annotationModule.stampAnnotationModule;\n\n        if (stampModule && stampModule.isStampAnnotSelected) {\n          if (pageDiv) {\n            var pageCurrentRect = pageDiv.getBoundingClientRect(); // eslint-disable-next-line max-len\n\n            if (event.type === 'touchend' && this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType === 'Image') {\n              var currentStampObj = this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;\n              currentStampObj.pageIndex = pageIndex;\n              currentStampObj.bounds.x = (event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor;\n              currentStampObj.bounds.y = (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor;\n              stampModule.updateDeleteItems(pageIndex, currentStampObj, currentStampObj.opacity);\n              this.pdfViewer.add(currentStampObj);\n              var canvas = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n              this.pdfViewer.renderDrawing(canvas, pageIndex);\n            } else {\n              // eslint-disable-next-line max-len\n              stampModule.renderStamp((event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor, (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor, null, null, pageIndex, null, null, null, null);\n            }\n\n            stampModule.isStampAnnotSelected = false;\n          }\n        }\n\n        this.pdfViewer.annotation.onAnnotationMouseDown();\n      }\n\n      if (this.pdfViewer.enableHandwrittenSignature && this.isSignatureAdded && pageDiv) {\n        var pageCurrentRect = pageDiv.getBoundingClientRect();\n        this.currentSignatureAnnot.pageIndex = pageIndex; // eslint-disable-next-line max-len\n\n        this.signatureModule.renderSignature((event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor, (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor);\n        this.isSignatureAdded = false;\n      }\n\n      if (event.touches.length === 1 && this.isTextMarkupAnnotationModule() && !this.getPopupNoteVisibleStatus()) {\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n    if (!isBlazor()) {\n      if (this.pdfViewer.toolbarModule) {\n        this.pdfViewer.toolbarModule.updateTotalPage();\n      }\n    }\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.mobiletotalPageContainer) {\n      this.mobiletotalPageContainer.innerHTML = this.pageCount.toString();\n      this.pageNoContainer.innerHTML = '(1-' + this.pageCount.toString() + ')';\n    }\n\n    if (this.pageCount > 0) {\n      var topValue = 0;\n      var pageLimit = 0;\n      this.isMixedSizeDocument = false;\n\n      if (this.pageCount > 100) {\n        // to render 100 pages intially.\n        pageLimit = 100;\n        this.pageLimit = pageLimit;\n      } else {\n        pageLimit = this.pageCount;\n      }\n\n      var isPortrait = false;\n      var isLandscape = false;\n      var differentPageSize = false;\n\n      for (var i = 0; i < pageLimit; i++) {\n        if (typeof pageValues.pageSizes[i] !== 'object') {\n          var pageSize = pageValues.pageSizes[i].split(',');\n\n          if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n            var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n            topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n          } else {\n            topValue = this.pageGap;\n          }\n\n          var size = {\n            width: parseFloat(pageSize[0]),\n            height: parseFloat(pageSize[1]),\n            top: topValue\n          };\n          this.pageSize.push(size);\n        } else {\n          if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n            // eslint-disable-next-line\n            var previousPageHeight = pageValues.pageSizes[i - 1];\n            topValue = this.pageGap + parseFloat(previousPageHeight.Height) + topValue;\n          } else {\n            topValue = this.pageGap;\n          }\n\n          var size = {\n            width: pageValues.pageSizes[i].Width,\n            height: pageValues.pageSizes[i].Height,\n            top: topValue\n          };\n          this.pageSize.push(size);\n        }\n\n        if (this.pageSize[i].height > this.pageSize[i].width) {\n          isPortrait = true;\n        }\n\n        if (this.pageSize[i].width > this.pageSize[i].height) {\n          isLandscape = true;\n        }\n\n        if (i > 0 && this.pageSize[i].width !== this.pageSize[i - 1].width) {\n          differentPageSize = true;\n        }\n\n        var pageWidth = this.pageSize[i].width;\n\n        if (pageWidth > this.highestWidth) {\n          this.highestWidth = pageWidth;\n        }\n\n        var pageHeight = this.pageSize[i].height;\n\n        if (pageHeight > this.highestHeight) {\n          this.highestHeight = pageHeight;\n        }\n      }\n\n      if (isPortrait && isLandscape || differentPageSize) {\n        this.isMixedSizeDocument = true;\n      }\n\n      var limit = this.pageCount < 10 ? this.pageCount : 10;\n\n      for (var i = 0; i < limit; i++) {\n        this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n      } // eslint-disable-next-line max-len\n\n\n      this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n      this.pageContainer.style.position = 'relative';\n\n      if (this.pageLimit === 100) {\n        var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n\n        if (pageDiv === null && this.pageLimit < this.pageCount) {\n          Promise.all([this.renderPagesVirtually()]);\n        }\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n    var lowerLimit = 1;\n    var higherLimit = 3;\n\n    if (this.pageStopValue <= 200) {\n      lowerLimit = 4;\n      higherLimit = 4;\n    } else {\n      lowerLimit = 2;\n      higherLimit = 3;\n    }\n\n    var pageValue = pageNumber + lowerLimit;\n\n    if (pageValue > this.pageCount) {\n      pageValue = this.pageCount;\n    }\n\n    for (var i = pageNumber - 1; i <= pageValue; i++) {\n      if (i !== -1) {\n        this.renderPageElement(i);\n      }\n    }\n\n    var lowerPageValue = pageNumber - 3;\n\n    if (lowerPageValue < 0) {\n      lowerPageValue = 0;\n    }\n\n    for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n      if (i !== -1) {\n        this.renderPageElement(i);\n      }\n    }\n\n    for (var j = 0; j < this.pageCount; j++) {\n      if (!(lowerPageValue <= j && j <= pageValue)) {\n        var pageDiv = this.getElement('_pageDiv_' + j);\n        var pageCanvas = this.getElement('_pageCanvas_' + j);\n        var textLayer = this.getElement('_textLayer_' + j);\n\n        if (pageCanvas) {\n          pageCanvas.parentNode.removeChild(pageCanvas);\n\n          if (textLayer) {\n            if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n              this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n            }\n\n            textLayer.parentNode.removeChild(textLayer);\n          }\n\n          var indexInArray = this.renderedPagesList.indexOf(j);\n\n          if (indexInArray !== -1) {\n            this.renderedPagesList.splice(indexInArray, 1);\n          }\n        }\n\n        if (pageDiv) {\n          pageDiv.parentNode.removeChild(pageDiv);\n          var indexInArray = this.renderedPagesList.indexOf(j);\n\n          if (indexInArray !== -1) {\n            this.renderedPagesList.splice(indexInArray, 1);\n          }\n        }\n      }\n    }\n\n    if (isBlazor()) this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateCurrentPageNumber', this.currentPageNumber);\n  };\n\n  PdfViewerBase.prototype.renderPageElement = function (i) {\n    var pageDiv = this.getElement('_pageDiv_' + i);\n    var canvas = this.getElement('_pageCanvas_' + i);\n\n    if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n      // eslint-disable-next-line\n      this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n    }\n  };\n\n  PdfViewerBase.prototype.renderPagesVirtually = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var proxy;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        proxy = this;\n        setTimeout(function () {\n          _this.initiateRenderPagesVirtually(proxy);\n        }, 500);\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n    var jsonObject = {\n      hashId: proxy.hashId,\n      isCompletePageSizeNotReceived: true,\n      action: 'VirtualLoad',\n      elementId: proxy.pdfViewer.element.id,\n      uniqueId: proxy.documentId,\n      password: proxy.passwordData\n    };\n\n    if (proxy.jsonDocumentId) {\n      // eslint-disable-next-line\n      jsonObject.documentId = proxy.jsonDocumentId;\n    }\n\n    this.virtualLoadRequestHandler = new AjaxHandler(this.pdfViewer);\n    this.virtualLoadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load;\n    this.virtualLoadRequestHandler.responseType = 'json';\n    this.virtualLoadRequestHandler.mode = true;\n    this.virtualLoadRequestHandler.send(jsonObject); // eslint-disable-next-line\n\n    this.virtualLoadRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n\n      if (data) {\n        if (typeof data !== 'object') {\n          try {\n            data = JSON.parse(data);\n          } catch (error) {\n            proxy.onControlError(500, data, 'VirtualLoad');\n          }\n        }\n      }\n\n      if (data) {\n        while (typeof data !== 'object') {\n          data = JSON.parse(data);\n        }\n\n        if (proxy.documentId === data.uniqueId) {\n          proxy.pdfViewer.fireAjaxRequestSuccess('VirtualLoad', data); // eslint-disable-next-line\n\n          var pageValues = data;\n\n          if (proxy.pageSize[proxy.pageLimit - 1]) {\n            var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n\n            for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n              if (typeof pageValues.pageSizes[i] !== 'object') {\n                var pageSize = pageValues.pageSizes[i].split(',');\n\n                if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                  var previousPageHeight = proxy.pageSize[i - 1].height;\n                  topValue = proxy.pageGap + parseFloat(previousPageHeight) + topValue;\n                }\n\n                var size = {\n                  width: parseFloat(pageSize[0]),\n                  height: parseFloat(pageSize[1]),\n                  top: topValue\n                };\n                proxy.pageSize.push(size);\n              } else {\n                if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                  var previousPageHeight = proxy.pageSize[i - 1].height;\n                  topValue = proxy.pageGap + parseFloat(previousPageHeight) + topValue;\n                }\n\n                var size = {\n                  width: parseFloat(pageValues.pageSizes[i].Width),\n                  height: parseFloat(pageValues.pageSizes[i].Height),\n                  top: topValue\n                };\n                proxy.pageSize.push(size);\n              }\n            } // eslint-disable-next-line max-len\n\n\n            proxy.pageContainer.style.height = proxy.getPageTop(proxy.pageSize.length - 1) + proxy.getPageHeight(proxy.pageSize.length - 1) + 'px'; // eslint-disable-next-line\n\n            var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n\n            if (proxy.pageCount > 100) {\n              proxy.pdfViewer.fireDocumentLoad(pageData);\n              var linkAnnotationModule = proxy.pdfViewer.linkAnnotationModule;\n\n              if (linkAnnotationModule && linkAnnotationModule.linkAnnotation && linkAnnotationModule.linkAnnotation.length > 0 && linkAnnotationModule.linkPage.length > 0) {\n                linkAnnotationModule.renderDocumentLink(linkAnnotationModule.linkAnnotation, linkAnnotationModule.linkPage, linkAnnotationModule.annotationY, proxy.currentPageNumber - 1);\n              }\n            }\n          }\n        }\n      }\n    }; // eslint-disable-next-line\n\n\n    this.virtualLoadRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n    }; // eslint-disable-next-line\n\n\n    this.virtualLoadRequestHandler.onError = function (result) {\n      proxy.openNotificationPopup();\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n    };\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.tileRenderPage = function (data, pageIndex) {\n    var _this = this;\n\n    var proxy = null;\n    proxy = this;\n\n    if (data && this.pageSize[pageIndex]) {\n      var pageWidth = this.getPageWidth(pageIndex);\n      var pageHeight = this.getPageHeight(pageIndex); // eslint-disable-next-line max-len\n\n      var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n      var pageDiv_1 = this.getElement('_pageDiv_' + pageIndex);\n      var tileX = data.tileX ? data.tileX : 0;\n      var tileY = data.tileY ? data.tileY : 0;\n\n      if (pageDiv_1) {\n        pageDiv_1.style.width = pageWidth + 'px';\n        pageDiv_1.style.height = pageHeight + 'px';\n        pageDiv_1.style.background = '#fff';\n        pageDiv_1.style.top = this.getPageTop(pageIndex) + 'px';\n\n        if (this.pdfViewer.enableRtl) {\n          pageDiv_1.style.right = this.updateLeftPosition(pageIndex) + 'px';\n        } else {\n          pageDiv_1.style.left = this.updateLeftPosition(pageIndex) + 'px';\n        }\n      }\n\n      if (canvas_1) {\n        canvas_1.style.background = '#fff';\n      }\n\n      var imageData = data['image'];\n      var zoomFactor = this.retrieveCurrentZoomFactor();\n\n      if (this.isReRenderRequired) {\n        if (data.zoomFactor) {\n          zoomFactor = data.zoomFactor;\n        }\n\n        var currentString = this.documentId + '_' + pageIndex + '_' + zoomFactor + '_' + data.tileX + '_' + data.tileY; // eslint-disable-next-line max-len\n\n        this.tilerequestLists.push(currentString); // eslint-disable-next-line\n\n        var matrix = data['transformationMatrix']; // eslint-disable-next-line\n\n        var width = data['width'];\n\n        if (imageData) {\n          var tileX_1 = data.tileX ? data.tileX : 0;\n          var tileY_1 = data.tileY ? data.tileY : 0;\n          var scaleFactor = !isNullOrUndefined(data.scaleFactor) ? data.scaleFactor : 1.5;\n          var image = document.getElementById(this.pdfViewer.element.id + '_tileimg_' + pageIndex + '_' + this.getZoomFactor() + '_' + tileX_1 + '_' + tileY_1);\n\n          if (!image) {\n            image = new Image();\n            image.id = this.pdfViewer.element.id + '_tileimg_' + pageIndex + '_' + this.getZoomFactor() + '_' + tileX_1 + '_' + tileY_1;\n\n            if (pageDiv_1) {\n              pageDiv_1.append(image);\n            }\n          }\n\n          image.src = imageData;\n\n          image.onload = function () {\n            proxy.showPageLoadingIndicator(pageIndex, false);\n            proxy.tileRenderCount = proxy.tileRenderCount + 1;\n\n            if (tileX_1 === 0 && tileY_1 === 0) {\n              if (pageIndex === 0 && _this.isDocumentLoaded) {\n                proxy.renderPDFInformations();\n                proxy.isInitialLoaded = true; // eslint-disable-next-line\n\n                var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n\n                if (proxy.pageCount <= 100) {\n                  proxy.pdfViewer.fireDocumentLoad(pageData);\n                }\n\n                proxy.isDocumentLoaded = false;\n\n                if (proxy.pdfViewer.textSearch && proxy.pdfViewer.isExtractText) {\n                  proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();\n                }\n              }\n            }\n\n            if (proxy.tileRenderCount === proxy.tileRequestCount) {\n              if (proxy.isTextMarkupAnnotationModule()) {\n                proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);\n              }\n\n              if (canvas_1) {\n                canvas_1.style.display = 'none';\n                canvas_1.src = '#';\n              }\n\n              var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n\n              for (var i = 0; i < oldPageDiv.length; i++) {\n                pageDiv_1.removeChild(oldPageDiv[i]);\n              }\n\n              proxy.isTileImageRendered = false;\n              proxy.tileRenderCount = 0;\n\n              if (proxy.pdfViewer.magnificationModule) {\n                proxy.pdfViewer.magnificationModule.rerenderCountIncrement();\n              }\n\n              proxy.isDrawnCompletely = true;\n            }\n          };\n\n          var currentImageWidth = width * this.getZoomFactor() / zoomFactor / scaleFactor;\n          var matrixElements = matrix.Elements ? matrix.Elements : matrix.Values;\n          var currentImageTop = matrixElements[5] * this.getZoomFactor() / zoomFactor / scaleFactor;\n          var currentImageLeft = matrixElements[4] * this.getZoomFactor() / zoomFactor / scaleFactor;\n          image.width = currentImageWidth;\n          image.style.width = currentImageWidth + 'px';\n          image.style.top = currentImageTop + 'px';\n          image.style.left = currentImageLeft + 'px';\n          image.style.position = 'absolute';\n        }\n\n        if (tileX === 0 && tileY === 0) {\n          this.onPageRender(data, pageIndex, pageDiv_1);\n        }\n      } else {\n        var oldCanvases = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_tileimg_' + pageIndex + '_\"]');\n\n        for (var l = 0; l < oldCanvases.length; l++) {\n          var tileImgId = oldCanvases[l].id.split('_');\n          var zoomFactor_1 = proxy.retrieveCurrentZoomFactor(); // eslint-disable-next-line\n\n          var tileData = JSON.parse(proxy.getWindowSessionStorageTile(pageIndex, parseFloat(tileImgId[tileImgId.length - 2]), parseFloat(tileImgId[tileImgId.length - 1]), zoomFactor_1));\n\n          if (tileData && tileData.zoomFactor) {\n            zoomFactor_1 = tileData.zoomFactor;\n          }\n\n          if (parseFloat(tileImgId[tileImgId.length - 4]) === pageIndex) {\n            var node = oldCanvases[l]; // Make sure it's really an Element\n\n            if (node.nodeType == Node.ELEMENT_NODE) {\n              node.onload = function () {\n                proxy.showPageLoadingIndicator(pageIndex, false);\n                proxy.tileRenderCount = proxy.tileRenderCount + 1;\n\n                if (tileX_2 === 0 && tileY_2 === 0) {\n                  if (pageIndex === 0 && _this.isDocumentLoaded) {\n                    _this.renderPDFInformations();\n\n                    _this.isInitialLoaded = true; // eslint-disable-next-line\n\n                    var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n\n                    if (proxy.pageCount <= 100) {\n                      proxy.pdfViewer.fireDocumentLoad(pageData);\n                    }\n\n                    proxy.isDocumentLoaded = false;\n\n                    if (proxy.pdfViewer.textSearch && proxy.pdfViewer.isExtractText) {\n                      proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();\n                    }\n                  }\n                }\n\n                if (proxy.tileRenderCount === proxy.tileRequestCount) {\n                  canvas_1.style.display = 'none';\n                  canvas_1.src = '#';\n\n                  if (proxy.isTextMarkupAnnotationModule()) {\n                    proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);\n                  }\n\n                  var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n\n                  for (var i = 0; i < oldPageDiv.length; i++) {\n                    pageDiv_1.removeChild(oldPageDiv[i]);\n                  }\n\n                  proxy.isTileImageRendered = false;\n                  proxy.tileRenderCount = 0;\n\n                  if (proxy.pdfViewer.magnificationModule) {\n                    proxy.pdfViewer.magnificationModule.rerenderCountIncrement();\n                  }\n\n                  proxy.isDrawnCompletely = true;\n                }\n              };\n\n              if (tileData) node.src = tileData.image;\n            }\n          }\n        }\n\n        var tileX_2 = data.tileX ? data.tileX : 0;\n        var tileY_2 = data.tileY ? data.tileY : 0;\n\n        if (tileX_2 === 0 && tileY_2 === 0) {\n          this.onPageRender(data, pageIndex, pageDiv_1);\n        }\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.renderTileCanvas = function (pageWidth, pageHeight, pageIndex, pageDiv, zoomFactor, scaleFactor) {\n    var pageCanvas = this.getElement('_pageTileCanvas_' + pageIndex);\n\n    if (!pageCanvas) {\n      pageCanvas = createElement('canvas', {\n        id: this.pdfViewer.element.id + '_pageTileCanvas_' + pageIndex,\n        className: 'e-pv-pageTile-canvas'\n      });\n      pageCanvas.style.width = pageWidth + 'px';\n      pageCanvas.style.height = pageHeight + 'px';\n      pageCanvas.style.display = 'none';\n      pageCanvas.style.backgroundColor = '#fff';\n\n      if (this.isMixedSizeDocument && this.highestWidth > 0) {\n        pageCanvas.style.marginLeft = 'auto';\n        pageCanvas.style.marginRight = 'auto';\n      }\n\n      pageDiv.appendChild(pageCanvas);\n    }\n\n    return pageCanvas;\n  };\n\n  PdfViewerBase.prototype.calculateImageWidth = function (pageWidth, zoomFactor, scaleFactor, imageWidth) {\n    var width = pageWidth / this.getZoomFactor() * zoomFactor * scaleFactor; // eslint-disable-next-line\n\n    if (parseInt(imageWidth.toString()) === parseInt(width.toString())) {\n      imageWidth = width;\n    }\n\n    imageWidth = imageWidth * this.getZoomFactor() / zoomFactor;\n    return imageWidth;\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n    var _this = this;\n\n    var proxy = this;\n\n    if (data && this.pageSize[pageIndex]) {\n      var pageWidth = this.getPageWidth(pageIndex);\n      var pageHeight = this.getPageHeight(pageIndex); // eslint-disable-next-line max-len\n\n      var canvas_2 = this.getElement('_pageCanvas_' + pageIndex);\n      var pageDiv_2 = this.getElement('_pageDiv_' + pageIndex);\n\n      if (pageDiv_2) {\n        pageDiv_2.style.width = pageWidth + 'px';\n        pageDiv_2.style.height = pageHeight + 'px';\n        pageDiv_2.style.top = this.getPageTop(pageIndex) + 'px';\n\n        if (this.pdfViewer.enableRtl) {\n          pageDiv_2.style.right = this.updateLeftPosition(pageIndex) + 'px';\n        } else {\n          pageDiv_2.style.left = this.updateLeftPosition(pageIndex) + 'px';\n        }\n      }\n\n      if (canvas_2) {\n        canvas_2.style.background = '#fff';\n        canvas_2.style.display = 'block';\n        canvas_2.style.width = pageWidth + 'px';\n        canvas_2.style.height = pageHeight + 'px';\n\n        if (pageWidth < parseFloat(pageDiv_2.style.width)) {\n          pageDiv_2.style.boxShadow = 'none';\n        } // eslint-disable-next-line\n\n\n        var imageData = data['image'];\n\n        if (imageData) {\n          canvas_2.onload = function () {\n            var oldCanvases = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_tileimg_' + pageIndex + '_\"]');\n            var pageCanvas = proxy.getElement('_pageDiv_' + pageIndex);\n\n            for (var i = 0; i < oldCanvases.length; i++) {\n              var tileImgId = oldCanvases[i].id.split('_');\n              if (parseFloat(tileImgId[tileImgId.length - 3]) != proxy.getZoomFactor()) pageCanvas.removeChild(oldCanvases[i]);\n            }\n\n            var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n\n            for (var i = 0; i < oldPageDiv.length; i++) {\n              pageDiv_2.removeChild(oldPageDiv[i]);\n            }\n\n            if (_this.pdfViewer.magnificationModule) {\n              _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n            }\n\n            _this.showPageLoadingIndicator(pageIndex, false);\n\n            if (pageIndex === 0 && _this.isDocumentLoaded) {\n              _this.renderPDFInformations();\n\n              _this.isInitialLoaded = true; // eslint-disable-next-line\n\n              var pageData = window.sessionStorage.getItem(_this.documentId + '_pagedata');\n\n              if (_this.pageCount <= 100) {\n                _this.pdfViewer.fireDocumentLoad(pageData);\n              }\n\n              _this.isDocumentLoaded = false;\n\n              if (_this.pdfViewer.textSearch && _this.pdfViewer.isExtractText) {\n                _this.pdfViewer.textSearchModule.getPDFDocumentTexts();\n              }\n            }\n\n            if (_this.pdfViewer.magnificationModule) {\n              _this.pdfViewer.magnificationModule.pushImageObjects(canvas_2);\n            }\n          };\n\n          canvas_2.src = imageData;\n        }\n\n        this.onPageRender(data, pageIndex, pageDiv_2);\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.onPageRender = function (data, pageIndex, pageDiv) {\n    // eslint-disable-next-line\n    var aElement = pageDiv && pageDiv.getElementsByTagName('a');\n    var isAnnotationRendered = false;\n\n    if (aElement && aElement.length !== 0) {\n      for (var index = aElement.length - 1; index >= 0; index--) {\n        aElement[index].parentNode.removeChild(aElement[index]);\n      }\n    }\n\n    if (this.pdfViewer.textSearchModule || this.pdfViewer.textSelectionModule || this.pdfViewer.annotationModule) {\n      this.renderTextContent(data, pageIndex);\n    }\n\n    if (this.pdfViewer.formFieldsModule && !this.pdfViewer.magnificationModule.isFormFieldPageZoomed) {\n      this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);\n    }\n\n    if (this.pdfViewer.formDesignerModule && !this.isDocumentLoaded) {\n      this.pdfViewer.formDesignerModule.rerenderFormFields(pageIndex);\n    }\n\n    if (this.pdfViewer.formFieldsModule && !this.isDocumentLoaded && !this.pdfViewer.formDesignerModule) {\n      this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);\n    }\n\n    if (this.pdfViewer.formDesignerModule && this.isDocumentLoaded && this.pdfViewer.magnificationModule.isFormFieldPageZoomed) {\n      this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);\n      this.pdfViewer.magnificationModule.isFormFieldPageZoomed = false;\n    }\n\n    if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n      this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n    }\n\n    if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n      this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n    }\n\n    if (this.documentAnnotationCollections) {\n      var isAnnotationAdded = false;\n\n      for (var i = 0; i < this.annotationRenderredList.length; i++) {\n        if (this.annotationRenderredList[i] === pageIndex) {\n          isAnnotationAdded = true;\n        }\n      } // eslint-disable-next-line\n\n\n      var pageAnnotations = this.documentAnnotationCollections[pageIndex];\n\n      if (pageAnnotations && !isAnnotationAdded) {\n        data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n        data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n        data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n        data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n        data.stampAnnotations = pageAnnotations.stampAnnotations;\n        data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n        data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n        this.annotationRenderredList.push(pageIndex);\n      }\n    }\n\n    if (this.isImportAction) {\n      // eslint-disable-next-line\n      var pageAnnotations = this.checkDocumentCollectionData(pageIndex);\n\n      if (pageAnnotations) {\n        data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n        data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n        data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n        data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n        data.stampAnnotations = pageAnnotations.stampAnnotations;\n        data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n        data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n        isAnnotationRendered = true;\n      }\n    }\n\n    if (this.pdfViewer.annotationModule && (this.isTextMarkupAnnotationModule() || this.isShapeBasedAnnotationsEnabled())) {\n      if (this.isStampAnnotationModule()) {\n        // eslint-disable-next-line\n        var stampData = data['stampAnnotations'];\n\n        if (isAnnotationRendered) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData, pageIndex, null, true);\n        } else {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData, pageIndex);\n        }\n      }\n\n      if (isAnnotationRendered) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.renderAnnotations(pageIndex, data.shapeAnnotation, data.measureShapeAnnotation, data.textMarkupAnnotation, null, true);\n      } else {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.renderAnnotations(pageIndex, data.shapeAnnotation, data.measureShapeAnnotation, data.textMarkupAnnotation);\n      }\n\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(data.stickyNotesAnnotation, pageIndex);\n    }\n\n    if (this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule) {\n      this.pdfViewer.formDesignerModule.updateCanvas(pageIndex);\n    }\n\n    if (this.pdfViewer.textSearchModule) {\n      if (this.pdfViewer.textSearchModule.isTextSearch) {\n        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n      }\n    }\n\n    if (this.isShapeBasedAnnotationsEnabled()) {\n      var canvas1 = this.getElement('_annotationCanvas_' + pageIndex);\n      var commonStyle = 'position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000';\n\n      if (canvas1) {\n        var bounds = canvas1.getBoundingClientRect();\n        renderAdornerLayer(bounds, commonStyle, canvas1, pageIndex, this.pdfViewer);\n        this.pdfViewer.renderSelector(pageIndex, this.pdfViewer.annotationSelectorSettings);\n      }\n    }\n\n    if (this.pdfViewer.annotationModule) {\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(pageIndex);\n    }\n\n    if (this.isFreeTextAnnotationModule() && data.freeTextAnnotation) {\n      if (isAnnotationRendered) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation, pageIndex);\n      } else {\n        this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation, pageIndex);\n      }\n    }\n\n    if (this.isInkAnnotationModule() && data && data.signatureInkAnnotation) {\n      // eslint-disable-next-line max-len\n      this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(data.signatureInkAnnotation, pageIndex, isAnnotationRendered);\n    } // eslint-disable-next-line max-len\n\n\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.isAnnotationSelected && this.pdfViewer.annotationModule.annotationPageIndex === pageIndex) {\n      this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();\n    }\n\n    this.isLoadedFormFieldAdded = false;\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - page index for rendering the annotation.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.renderAnnotations = function (pageIndex, isAddedProgrammatically) {\n    // eslint-disable-next-line\n    var data = {};\n\n    if (this.documentAnnotationCollections) {\n      var isAnnotationAdded = false;\n\n      for (var i = 0; i < this.annotationRenderredList.length; i++) {\n        if (this.annotationRenderredList[i] === pageIndex) {\n          isAnnotationAdded = true;\n        }\n      } // eslint-disable-next-line\n\n\n      var pageAnnotations = this.documentAnnotationCollections[pageIndex];\n\n      if (pageAnnotations && !isAnnotationAdded) {\n        data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n        data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n        data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n        data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n        data.stampAnnotations = pageAnnotations.stampAnnotations;\n        data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n        data.signatureAnnotation = pageAnnotations.signatureAnnotation;\n        data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n        this.annotationRenderredList.push(pageIndex);\n      }\n    }\n\n    if (this.isAnnotationCollectionRemoved) {\n      data.shapeAnnotation = [];\n      data.measureShapeAnnotation = [];\n      data.textMarkupAnnotation = [];\n      data.freeTextAnnotation = [];\n      data.stampAnnotations = [];\n      data.stickyNotesAnnotation = [];\n      data.signatureInkAnnotation = [];\n    }\n\n    if (this.isTextMarkupAnnotationModule() || this.isShapeBasedAnnotationsEnabled()) {\n      if (this.isStampAnnotationModule()) {\n        // eslint-disable-next-line\n        var stampData = data['stampAnnotations']; // eslint-disable-next-line max-len\n\n        this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData, pageIndex);\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewer.annotationModule.renderAnnotations(pageIndex, data.shapeAnnotation, data.measureShapeAnnotation, data.textMarkupAnnotation);\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(data.stickyNotesAnnotation, pageIndex);\n    }\n\n    if (this.pdfViewer.textSearchModule) {\n      if (this.pdfViewer.textSearchModule.isTextSearch) {\n        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n      }\n    }\n\n    if (this.isImportAction) {\n      var isAnnotationAdded = false;\n\n      for (var i = 0; i < this.annotationPageList.length; i++) {\n        if (this.annotationPageList[i] === pageIndex) {\n          isAnnotationAdded = true;\n        }\n      }\n\n      if (!isAnnotationAdded) {\n        if (this.importedAnnotation) {\n          this.drawPageAnnotations(this.importedAnnotation, pageIndex, true);\n          this.annotationPageList[this.annotationPageList.length] = pageIndex;\n        }\n      }\n    }\n\n    if (this.isShapeBasedAnnotationsEnabled()) {\n      var canvas1 = this.getElement('_annotationCanvas_' + pageIndex);\n      var commonStyle = 'position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000';\n\n      if (canvas1) {\n        var bounds = canvas1.getBoundingClientRect();\n        renderAdornerLayer(bounds, commonStyle, canvas1, pageIndex, this.pdfViewer);\n        this.pdfViewer.renderSelector(pageIndex);\n      }\n    }\n\n    if (this.pdfViewer.annotationModule) {\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(pageIndex);\n    }\n\n    if (this.isFreeTextAnnotationModule() && data.freeTextAnnotation) {\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation, pageIndex, undefined);\n    }\n\n    if (data && data.signatureAnnotation) {\n      this.signatureModule.renderExistingSignature(data.signatureAnnotation, pageIndex, false);\n    }\n\n    if (this.isInkAnnotationModule() && data && data.signatureInkAnnotation) {\n      this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(data.signatureInkAnnotation, pageIndex, false);\n    }\n\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.isAnnotationSelected) {\n      this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n    // eslint-disable-next-line\n    var texts = data['textContent']; // eslint-disable-next-line\n\n    var bounds = data['textBounds']; // eslint-disable-next-line\n\n    var rotation = data['rotation'];\n    var textLayer = this.getElement('_textLayer_' + pageIndex);\n\n    if (!textLayer) {\n      // eslint-disable-next-line max-len\n      textLayer = this.textLayer.addTextLayer(pageIndex, this.getPageWidth(pageIndex), this.getPageHeight(pageIndex), this.getElement('_pageDiv_' + pageIndex));\n    }\n\n    if (textLayer && texts && bounds) {\n      textLayer.style.display = 'block';\n\n      if (textLayer.childNodes.length === 0) {\n        this.textLayer.renderTextContents(pageIndex, texts, bounds, rotation);\n      } else {\n        this.textLayer.resizeTextContents(pageIndex, texts, bounds, rotation, true);\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n    // eslint-disable-next-line max-len\n    var pageDiv = createElement('div', {\n      id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber,\n      className: 'e-pv-page-div',\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    pageDiv.style.width = pageWidth + 'px';\n    pageDiv.style.height = pageHeight + 'px';\n\n    if (this.pdfViewer.enableRtl) {\n      pageDiv.style.right = this.updateLeftPosition(pageNumber) + 'px';\n    } else {\n      pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n    }\n\n    pageDiv.style.top = topValue + 'px';\n    this.pageContainer.appendChild(pageDiv);\n    this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n    this.createWaitingPopup(pageNumber);\n    this.orderPageDivElements(pageDiv, pageNumber);\n    this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && !this.isThumb) {\n      this.updateMobileScrollerPosition();\n    }\n  };\n\n  PdfViewerBase.prototype.renderPDFInformations = function () {\n    if (this.pdfViewer.thumbnailViewModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n      this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n    }\n\n    if (this.pdfViewer.bookmarkViewModule) {\n      this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n    }\n\n    if (this.pdfViewer.annotationModule) {\n      if (this.pdfViewer.toolbarModule) {\n        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.initializeAcccordionContainer();\n      }\n\n      if (this.pdfViewer.isCommandPanelOpen) {\n        this.pdfViewer.annotation.showCommentsPanel();\n      }\n\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments();\n    }\n  };\n\n  PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n    var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n\n    if (nextElement) {\n      this.pageContainer.insertBefore(pageDiv, nextElement);\n    } else {\n      this.pageContainer.appendChild(pageDiv);\n    }\n  };\n  /**\n   * @param pageDiv\n   * @param pageWidth\n   * @param pageHeight\n   * @param pageNumber\n   * @param displayMode\n   * @param pageDiv\n   * @param pageWidth\n   * @param pageHeight\n   * @param pageNumber\n   * @param displayMode\n   * @param pageDiv\n   * @param pageWidth\n   * @param pageHeight\n   * @param pageNumber\n   * @param displayMode\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n    if (pageDiv) {\n      // eslint-disable-next-line\n      var pageCanvas = this.getElement('_pageCanvas_' + pageNumber);\n\n      if (pageCanvas) {\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageCanvas.style.display = 'block';\n\n        if (this.isMixedSizeDocument && this.highestWidth > 0) {\n          pageCanvas.style.marginLeft = 'auto';\n          pageCanvas.style.marginRight = 'auto';\n        }\n      } else {\n        // eslint-disable-next-line max-len\n        pageCanvas = createElement('img', {\n          id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber,\n          className: 'e-pv-page-canvas'\n        });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageCanvas.style.display = displayMode;\n\n        if (this.isMixedSizeDocument && this.highestWidth > 0) {\n          pageCanvas.style.marginLeft = 'auto';\n          pageCanvas.style.marginRight = 'auto';\n        }\n\n        pageDiv.appendChild(pageCanvas);\n      }\n\n      if (this.pdfViewer.annotationModule && this.pdfViewer.annotation) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n      }\n\n      if (this.pdfViewer.textSearchModule || this.pdfViewer.textSelectionModule || this.pdfViewer.annotationModule) {\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n      }\n\n      if (this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule) {\n        this.pdfViewer.formDesignerModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n      }\n\n      return pageCanvas;\n    }\n  };\n  /**\n   * @private\n   * @param {any} pageCanvas - The canvas for rendering the page.\n   * @param {any} pageNumber - The page number for adding styles.\n   * @returns {void}\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.applyElementStyles = function (pageCanvas, pageNumber) {\n    if (this.isMixedSizeDocument && pageCanvas) {\n      var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n      var oldCanvas = document.getElementById(this.pdfViewer.element.id + '_oldCanvas_' + pageNumber);\n\n      if (pageCanvas && canvasElement && canvasElement.offsetLeft > 0) {\n        pageCanvas.style.marginLeft = canvasElement.offsetLeft + 'px';\n        pageCanvas.style.marginRight = canvasElement.offsetLeft + 'px';\n      } else if (oldCanvas && oldCanvas.offsetLeft > 0) {\n        pageCanvas.style.marginLeft = oldCanvas.offsetLeft + 'px';\n        pageCanvas.style.marginRight = oldCanvas.offsetLeft + 'px';\n      } else {\n        pageCanvas.style.marginLeft = 'auto';\n        pageCanvas.style.marginRight = 'auto';\n      }\n    }\n  };\n  /**\n   * @private\n   * @param  {number} pageIndex - page index for updating positon.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n    var leftPosition;\n    var width = this.viewerContainer.getBoundingClientRect().width;\n\n    if (width === 0) {\n      width = parseFloat(this.pdfViewer.width.toString());\n    } // eslint-disable-next-line max-len\n\n\n    if (this.isMixedSizeDocument && this.highestWidth > 0) {\n      if (this.viewerContainer.clientWidth > 0) {\n        leftPosition = (this.viewerContainer.clientWidth - this.highestWidth * this.getZoomFactor()) / 2;\n      } else {\n        leftPosition = (width - this.highestWidth * this.getZoomFactor()) / 2;\n      }\n\n      var pageDiff = (this.highestWidth * this.getZoomFactor() - this.getPageWidth(pageIndex)) / 2;\n\n      if (leftPosition > 0) {\n        leftPosition += pageDiff;\n      } else {\n        leftPosition = pageDiff;\n      }\n    } else {\n      if (this.viewerContainer.clientWidth > 0) {\n        leftPosition = (this.viewerContainer.clientWidth - this.getPageWidth(pageIndex)) / 2;\n      } else {\n        leftPosition = (width - this.getPageWidth(pageIndex)) / 2;\n      }\n    }\n\n    var isLandscape = false;\n\n    if (this.pageSize[pageIndex].width > this.pageSize[pageIndex].height) {\n      isLandscape = true;\n    } // eslint-disable-next-line max-len\n\n\n    if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1 || this.pdfViewer.magnificationModule.fitType === 'fitToWidth' : false)) {\n      var leftValue = leftPosition;\n\n      if (leftPosition > 0 && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        // eslint-disable-next-line\n        leftPosition = leftValue;\n      } else {\n        leftPosition = this.pageLeft;\n      }\n\n      if (leftPosition > 0 && this.isMixedSizeDocument) {\n        if (leftValue > 0) {\n          leftPosition = leftValue;\n        }\n      }\n    }\n\n    return leftPosition;\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - The page index for positon.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n    var leftPosition;\n\n    if (this.pageSize[pageIndex]) {\n      if (this.isMixedSizeDocument && this.highestWidth > 0) {\n        if (this.viewerContainer.clientWidth > 0) {\n          // eslint-disable-next-line max-len\n          leftPosition = (this.viewerContainer.clientWidth - this.highestWidth * this.getZoomFactor()) / 2;\n        } else {\n          // eslint-disable-next-line max-len\n          leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.highestWidth * this.getZoomFactor()) / 2;\n        }\n\n        var pageDiff = (this.highestWidth * this.getZoomFactor() - this.getPageWidth(pageIndex)) / 2;\n\n        if (leftPosition > 0) {\n          leftPosition += pageDiff;\n        } else {\n          leftPosition = pageDiff;\n        }\n      } else {\n        if (this.viewerContainer.clientWidth > 0) {\n          // eslint-disable-next-line max-len\n          leftPosition = (this.viewerContainer.clientWidth - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n        } else {\n          // eslint-disable-next-line max-len\n          leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n        }\n      }\n\n      var isLandscape = false;\n\n      if (this.pageSize[pageIndex].width > this.pageSize[pageIndex].height) {\n        isLandscape = true;\n      } // eslint-disable-next-line max-len\n\n\n      if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1 || this.pdfViewer.magnificationModule.fitType === 'fitToWidth' : false)) {\n        var leftValue = leftPosition;\n        leftPosition = this.pageLeft; // eslint-disable-next-line max-len\n\n        if (leftValue > 0 && this.isMixedSizeDocument) {\n          leftPosition = leftValue;\n        }\n      } // eslint-disable-next-line max-len\n\n\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n\n      if (pageDiv) {\n        if (!this.pdfViewer.enableRtl) {\n          pageDiv.style.left = leftPosition + 'px';\n        } else {\n          pageDiv.style.right = leftPosition + 'px';\n        }\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n    return (viewerHeight - toolbarHeight) / viewerHeight * 100 + '%';\n  };\n  /**\n   * @private\n   * @param {Point} clientPoint - The user should provide a x, y coordinates.\n   * @returns {number}\n   */\n\n\n  PdfViewerBase.prototype.getPageNumberFromClientPoint = function (clientPoint) {\n    var pointX = clientPoint.x + this.viewerContainer.scrollLeft;\n    var pointY = clientPoint.y + this.viewerContainer.scrollTop;\n\n    for (var i = 0; i < this.pageCount; i++) {\n      if (pointY < this.pageSize[i].top + this.pageSize[i].height) {\n        var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n        var pageLeft = (viewerContainerBounds.width - this.pageSize[i].width) / 2 + viewerContainerBounds.x;\n        var verticalScrollPosition = 0;\n\n        if (pointY > this.pageSize[i].top) {\n          verticalScrollPosition = pointY - this.pageSize[i].top;\n        } else {\n          verticalScrollPosition = this.pageSize[i].top - pointY;\n        }\n\n        if (verticalScrollPosition > 0) {\n          if (this.pageSize[i] != null) {\n            var pageHeight = this.getPageHeight(i);\n\n            if (pointX < pageLeft || pointX > pageLeft + this.pageSize[i].width) {\n              return -1;\n            }\n\n            if (verticalScrollPosition <= this.getPageTop(i) + this.pageSize[i].height) {\n              return i + 1;\n            }\n          }\n        }\n      }\n    }\n\n    return -1;\n  };\n  /**\n   * @private\n   * @param {Point} clientPoint - The user should provide a x, y coordinates.\n   * @param {number} pageNumber - We need to pass pageNumber.\n   * @returns {Point}\n   */\n\n\n  PdfViewerBase.prototype.convertClientPointToPagePoint = function (clientPoint, pageNumber) {\n    if (pageNumber !== -1) {\n      var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n      var pageLeft = (viewerContainerBounds.width - this.pageSize[pageNumber - 1].width) / 2 + viewerContainerBounds.x;\n      var pagePoint = {\n        x: clientPoint.x + this.viewerContainer.scrollLeft - pageLeft,\n        y: clientPoint.y + this.viewerContainer.scrollTop - this.pageSize[pageNumber - 1].top\n      };\n      return pagePoint;\n    }\n\n    return null;\n  };\n  /**\n   * @private\n   * @param {Point} pagePoint - The user needs to provide a page x, y position.\n   * @param {number} pageNumber - We need to pass pageNumber.\n   * @returns {Point}\n   */\n\n\n  PdfViewerBase.prototype.convertPagePointToClientPoint = function (pagePoint, pageNumber) {\n    if (pageNumber !== -1) {\n      var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n      var pageLeft = (viewerContainerBounds.width - this.pageSize[pageNumber - 1].width) / 2 + viewerContainerBounds.x;\n      var clientPoint = {\n        x: pagePoint.x + pageLeft,\n        y: pagePoint.y + this.pageSize[pageNumber - 1].top\n      };\n      return clientPoint;\n    }\n\n    return null;\n  };\n  /**\n   * @private\n   * @param {Point} pagePoint - The user needs to provide a page x, y position.\n   * @param {number} pageNumber - We need to pass pageNumber.\n   * @returns {Point}\n   */\n\n\n  PdfViewerBase.prototype.convertPagePointToScrollingPoint = function (pagePoint, pageNumber) {\n    if (pageNumber !== -1) {\n      var scrollingPoint = {\n        x: pagePoint.x + this.viewerContainer.scrollLeft,\n        y: pagePoint.y + this.viewerContainer.scrollTop\n      };\n      return scrollingPoint;\n    }\n\n    return null;\n  };\n\n  PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n    if (this.scrollHoldTimer) {\n      clearTimeout(this.scrollHoldTimer);\n    }\n\n    this.scrollHoldTimer = null;\n\n    if (this.scrollPosition * this.getZoomFactor() !== this.viewerContainer.scrollTop) {\n      this.scrollPosition = this.viewerContainer.scrollTop;\n      this.pageViewScrollChanged(this.currentPageNumber);\n    }\n  };\n\n  PdfViewerBase.prototype.renderCountIncrement = function () {\n    if (this.pdfViewer.magnificationModule) {\n      this.pdfViewer.magnificationModule.renderCountIncrement();\n    }\n  };\n  /**\n   * @private\n   * @param {number} currentPageNumber - The current pagenumber.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n    if (this.isPanMode) {\n      if (this.renderedPagesList.indexOf(currentPageNumber - 1) === -1) {\n        this.reRenderedCount = 0;\n      }\n    } else {\n      this.reRenderedCount = 0;\n    }\n\n    var currentPageIndex = currentPageNumber - 1;\n\n    if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n      var isSkip = false;\n\n      if (this.isDataExits && !this.getStoredData(currentPageIndex)) {\n        isSkip = true;\n      }\n\n      if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified() && !isSkip) {\n        this.renderCountIncrement();\n        this.createRequestForRender(currentPageIndex);\n      }\n    }\n\n    if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n      var previous = currentPageIndex - 1;\n      var isSkip = false;\n      var canvas = this.getElement('_pageCanvas_' + previous);\n\n      if (this.isDataExits && !this.getStoredData(previous)) {\n        isSkip = true;\n      }\n\n      if (canvas !== null && !isSkip) {\n        if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n          this.renderCountIncrement();\n          this.createRequestForRender(previous);\n        }\n      }\n\n      if (this.isMinimumZoom) {\n        this.renderPreviousPagesInScroll(previous);\n      }\n\n      var next = currentPageIndex + 1;\n      var pageHeight = 0;\n\n      if (next < this.pageCount) {\n        pageHeight = this.getPageHeight(next);\n\n        if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified() && pageHeight) {\n          this.createRequestForRender(next);\n          this.renderCountIncrement();\n\n          while (this.viewerContainer.clientHeight > pageHeight) {\n            next = next + 1;\n\n            if (next < this.pageCount) {\n              this.renderPageElement(next);\n              this.createRequestForRender(next);\n              pageHeight += this.getPageHeight(next);\n              this.renderCountIncrement();\n            } else {\n              break;\n            }\n          }\n        }\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.renderPreviousPagesInScroll = function (pageIndex) {\n    var next = pageIndex - 1;\n    var pageNumber = next - 1;\n\n    if (next > 0) {\n      if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n        this.createRequestForRender(next);\n        this.renderCountIncrement();\n      }\n\n      if (pageNumber > 0) {\n        if (this.renderedPagesList.indexOf(pageNumber) === -1 && !this.getMagnified()) {\n          this.createRequestForRender(pageNumber);\n          this.renderCountIncrement();\n        }\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n    // eslint-disable-next-line\n    var Url = URL || webkitURL;\n    blobUrl = Url.createObjectURL(blobUrl);\n    var anchorElement = createElement('a');\n\n    if (anchorElement.click) {\n      anchorElement.href = blobUrl;\n      anchorElement.target = '_parent';\n\n      if ('download' in anchorElement) {\n        anchorElement.download = this.downloadFileName;\n      }\n\n      (document.body || document.documentElement).appendChild(anchorElement);\n      anchorElement.click();\n      anchorElement.parentNode.removeChild(anchorElement);\n    } else {\n      if (window.top === window && blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n        var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n        blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n      }\n\n      window.open(blobUrl, '_parent');\n    }\n  };\n\n  PdfViewerBase.prototype.downloadExportAnnotationJson = function (blobUrl, isForm) {\n    // eslint-disable-next-line\n    var Url = URL || webkitURL;\n    blobUrl = Url.createObjectURL(blobUrl);\n    var anchorElement = createElement('a');\n\n    if (anchorElement.click) {\n      anchorElement.href = blobUrl;\n      anchorElement.target = '_parent';\n\n      if ('download' in anchorElement) {\n        if (this.pdfViewer.exportAnnotationFileName !== null) {\n          anchorElement.download = this.pdfViewer.exportAnnotationFileName.split('.')[0] + '.json';\n        } else {\n          anchorElement.download = this.pdfViewer.fileName.split('.')[0] + '.json';\n        }\n      }\n\n      (document.body || document.documentElement).appendChild(anchorElement);\n      anchorElement.click();\n      anchorElement.parentNode.removeChild(anchorElement);\n\n      if (isForm) {\n        this.pdfViewer.fireFormExportSuccess(blobUrl, anchorElement.download);\n      } else {\n        this.pdfViewer.fireExportSuccess(blobUrl, anchorElement.download);\n      }\n    } else {\n      if (window.top === window && blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n        var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n        blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n      }\n\n      window.open(blobUrl, '_parent');\n\n      if (isForm) {\n        this.pdfViewer.fireFormExportSuccess(blobUrl, this.pdfViewer.fileName.split('.')[0] + '.json');\n      } else {\n        this.pdfViewer.fireExportSuccess(blobUrl, this.pdfViewer.fileName.split('.')[0] + '.json');\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.downloadExportedXFdfAnnotation = function (blobUrl) {\n    // eslint-disable-next-line\n    var Url = URL || webkitURL;\n    blobUrl = Url.createObjectURL(blobUrl);\n    var anchorElement = createElement('a');\n\n    if (anchorElement.click) {\n      anchorElement.href = blobUrl;\n      anchorElement.target = '_parent';\n\n      if ('download' in anchorElement) {\n        if (this.pdfViewer.exportAnnotationFileName !== null) {\n          anchorElement.download = this.pdfViewer.exportAnnotationFileName.split('.')[0] + '.xfdf';\n        } else {\n          anchorElement.download = this.pdfViewer.fileName.split('.')[0] + '.xfdf';\n        }\n      }\n\n      (document.body || document.documentElement).appendChild(anchorElement);\n      anchorElement.click();\n      anchorElement.parentNode.removeChild(anchorElement);\n      this.pdfViewer.fireExportSuccess(blobUrl, anchorElement.download);\n    }\n  };\n  /**\n   * @private\n   * @param {string} path - The path for exporting the fields.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.exportFormFields = function (path) {\n    this.createRequestForExportFormfields(false, path);\n  };\n  /**\n   * @param source\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.importFormFields = function (source) {\n    this.createRequestForImportingFormfields(source);\n  };\n  /**\n   * @param isObject\n   * @param path\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.createRequestForExportFormfields = function (isObject, path) {\n    var _this = this;\n\n    var proxy = null;\n    proxy = this;\n    var promise = new Promise(function (resolve, reject) {\n      // eslint-disable-next-line\n      var jsonObject = proxy.createFormfieldsJsonData();\n      proxy.pdfViewer.fireFormExportStarted(jsonObject.pdfAnnotation);\n      jsonObject.action = 'ExportFormFields'; // eslint-disable-next-line\n\n      jsonObject['hashId'] = proxy.hashId; // eslint-disable-next-line\n\n      jsonObject['fileName'] = proxy.pdfViewer.fileName;\n\n      if (path && path !== '' && !isObject) {\n        // eslint-disable-next-line\n        jsonObject['filePath'] = path;\n      } // eslint-disable-next-line\n\n\n      jsonObject['elementId'] = _this.pdfViewer.element.id; // eslint-disable-next-line max-len\n\n      if (proxy.jsonDocumentId) {\n        // eslint-disable-next-line\n        jsonObject.document = proxy.jsonDocumentId;\n      }\n\n      var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.exportFormFields;\n      proxy.exportFormFieldsRequestHandler = new AjaxHandler(_this.pdfViewer);\n      proxy.exportFormFieldsRequestHandler.url = url;\n      proxy.exportFormFieldsRequestHandler.mode = true;\n      proxy.exportFormFieldsRequestHandler.responseType = 'text';\n      proxy.exportFormFieldsRequestHandler.send(jsonObject); // eslint-disable-next-line\n\n      proxy.exportFormFieldsRequestHandler.onSuccess = function (result) {\n        // eslint-disable-next-line\n        var data = result.data;\n\n        if (data) {\n          if (data) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportFormFields, data);\n\n            if (isObject) {\n              // eslint-disable-next-line\n              var annotationJson = decodeURIComponent(escape(atob(data.split(',')[1])));\n              resolve(annotationJson);\n              proxy.pdfViewer.fireFormExportSuccess(annotationJson, proxy.pdfViewer.fileName);\n            } else if (data.split('base64,')[1]) {\n              var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/json');\n\n              if (Browser.isIE || Browser.info.name === 'edge') {\n                window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.json');\n              } else {\n                proxy.downloadExportAnnotationJson(blobUrl, true);\n              }\n            }\n          }\n        }\n      }; // eslint-disable-next-line\n\n\n      proxy.exportFormFieldsRequestHandler.onFailure = function (result) {\n        proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation, result.statusText);\n      }; // eslint-disable-next-line\n\n\n      proxy.exportFormFieldsRequestHandler.onError = function (result) {\n        proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation, result.statusText);\n      };\n    });\n\n    if (isObject) {\n      return promise;\n    } else {\n      return true;\n    }\n  };\n  /**\n   * @param source\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.createRequestForImportingFormfields = function (source) {\n    var proxy = null;\n    proxy = this; // eslint-disable-next-line\n\n    var jsonObject = {};\n\n    if (typeof source === 'object') {\n      jsonObject.data = JSON.stringify(source);\n    } else {\n      jsonObject.data = source;\n\n      if (source.split('.')[1] === 'json') {\n        // eslint-disable-next-line\n        jsonObject['fileName'] = proxy.pdfViewer.fileName;\n      }\n    }\n\n    proxy.pdfViewer.fireFormImportStarted(source); // eslint-disable-next-line\n\n    jsonObject.action = 'ImportFormFields'; // eslint-disable-next-line\n\n    jsonObject['hashId'] = proxy.hashId; // eslint-disable-next-line\n\n    jsonObject['elementId'] = this.pdfViewer.element.id; // eslint-disable-next-line max-len\n\n    if (proxy.jsonDocumentId) {\n      // eslint-disable-next-line\n      jsonObject.document = proxy.jsonDocumentId;\n    }\n\n    var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.importFormFields;\n    proxy.importFormFieldsRequestHandler = new AjaxHandler(this.pdfViewer);\n    proxy.importFormFieldsRequestHandler.url = url;\n    proxy.importFormFieldsRequestHandler.mode = true;\n    proxy.importFormFieldsRequestHandler.responseType = 'text';\n    proxy.importFormFieldsRequestHandler.send(jsonObject); // eslint-disable-next-line\n\n    proxy.importFormFieldsRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n\n      if (data && data !== 'null') {\n        if (typeof data !== 'object') {\n          try {\n            data = JSON.parse(data);\n\n            if (typeof data !== 'object') {\n              proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importFormFields);\n              proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n              data = null;\n            }\n          } catch (error) {\n            proxy.pdfViewer.fireFormImportFailed(source, proxy.pdfViewer.localeObj.getConstant('File not found'));\n\n            if (isBlazor()) {\n              var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n\n              promise.then(function (value) {\n                proxy.openImportExportNotificationPopup(value);\n              });\n            } else {\n              proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n            }\n\n            proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importFormFields);\n            data = null;\n          }\n        }\n\n        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importFormFields, data);\n        proxy.pdfViewer.fireFormImportSuccess(source);\n        window.sessionStorage.removeItem(this.documentId + '_formfields');\n        this.pdfViewer.formFieldsModule.removeExistingFormFields();\n        window.sessionStorage.removeItem(this.documentId + '_formDesigner');\n        proxy.saveFormfieldsData(data);\n\n        for (var i = 0; i < proxy.renderedPagesList.length; i++) {\n          this.pdfViewer.formFieldsModule.renderFormFields(proxy.renderedPagesList[i]);\n        }\n      } else {\n        proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n\n        if (isBlazor()) {\n          var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n\n          promise.then(function (value) {\n            proxy.openImportExportNotificationPopup(value);\n          });\n        } else {\n          proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n        }\n      }\n    }; // eslint-disable-next-line\n\n\n    proxy.importFormFieldsRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n    }; // eslint-disable-next-line\n\n\n    proxy.importFormFieldsRequestHandler.onError = function (result) {\n      proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n    };\n  };\n  /**\n   * @public\n   * @returns {any} - Returns the Json data.\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.createFormfieldsJsonData = function () {\n    // eslint-disable-next-line\n    var jsonObject = {};\n\n    if (this.pdfViewer.formDesignerModule) {\n      var fieldsData = this.pdfViewer.formDesignerModule.downloadFormDesigner(); // eslint-disable-next-line\n\n      jsonObject['formDesigner'] = fieldsData;\n    } else if (this.pdfViewer.formFieldsModule) {\n      var fieldsData = this.pdfViewer.formFieldsModule.downloadFormFieldsData(); // eslint-disable-next-line\n\n      jsonObject['fieldsData'] = fieldsData;\n    }\n\n    return jsonObject;\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.constructJsonDownload = function () {\n    // eslint-disable-next-line\n    var jsonObject = {\n      hashId: this.hashId\n    };\n\n    if (this.jsonDocumentId) {\n      jsonObject.documentId = this.jsonDocumentId;\n    }\n\n    jsonObject.uniqueId = this.documentId;\n    this.importPageList = [];\n\n    if (this.pdfViewer.annotationModule) {\n      this.saveImportedAnnotations();\n    }\n\n    if (this.isTextMarkupAnnotationModule()) {\n      this.isJsonExported = false; // eslint-disable-next-line max-len\n\n      var textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations(); // eslint-disable-next-line\n\n      jsonObject['textMarkupAnnotations'] = textMarkupAnnotationCollection;\n    }\n\n    if (this.isShapeAnnotationModule()) {\n      this.isJsonExported = false; // eslint-disable-next-line max-len\n\n      var shapeAnnotations = this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations(); // eslint-disable-next-line\n\n      jsonObject['shapeAnnotations'] = shapeAnnotations;\n    }\n\n    if (this.isCalibrateAnnotationModule()) {\n      this.isJsonExported = false; // eslint-disable-next-line max-len\n\n      var calibrateAnnotations = this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations(); // eslint-disable-next-line\n\n      jsonObject['measureShapeAnnotations'] = calibrateAnnotations;\n    }\n\n    if (this.isStampAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      var stampAnnotationCollection = this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations(); // eslint-disable-next-line\n\n      jsonObject['stampAnnotations'] = stampAnnotationCollection;\n    }\n\n    if (this.isCommentAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      var stickyAnnotationCollection = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations(); // eslint-disable-next-line\n\n      jsonObject['stickyNotesAnnotation'] = stickyAnnotationCollection;\n    }\n\n    if (this.isImportAction) {\n      var importList = JSON.stringify(this.importPageList); // eslint-disable-next-line\n\n      jsonObject['importPageList'] = importList;\n    }\n\n    if (this.pdfViewer.formDesignerModule) {\n      var fieldsData = this.pdfViewer.formDesignerModule.downloadFormDesigner(); // eslint-disable-next-line\n\n      jsonObject['formDesigner'] = fieldsData;\n    } else if (this.pdfViewer.formFieldsModule) {\n      var fieldsData = this.pdfViewer.formFieldsModule.downloadFormFieldsData(); // eslint-disable-next-line\n\n      jsonObject['fieldsData'] = fieldsData;\n    }\n\n    var signatureData = this.signatureModule.saveSignature(); // eslint-disable-next-line\n\n    jsonObject['signatureData'] = signatureData;\n\n    if (this.pdfViewer.isSignatureEditable) {\n      // eslint-disable-next-line\n      jsonObject['isSignatureEdited'] = this.pdfViewer.isSignatureEditable;\n    }\n\n    if (this.isFreeTextAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      var freeTextAnnotationCollection = this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations(); // eslint-disable-next-line\n\n      jsonObject['freeTextAnnotation'] = freeTextAnnotationCollection;\n    }\n\n    if (this.isInkAnnotationModule()) {\n      var inkSignatureData = this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature(); // eslint-disable-next-line\n\n      jsonObject['inkSignatureData'] = inkSignatureData;\n    } // eslint-disable-next-line\n\n\n    jsonObject['action'] = 'Download'; // eslint-disable-next-line\n\n    jsonObject['elementId'] = this.pdfViewer.element.id;\n    return jsonObject;\n  };\n  /**\n   * @private\n   * @param {string} annotationID - The annotationID.\n   * @returns {any} - Returns collection of type.\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.checkFormFieldCollection = function (annotationID) {\n    var isFormFieldAnnotation = false; // eslint-disable-next-line\n\n    var formDesignerData = null;\n    formDesignerData = this.getItemFromSessionStorage('_formDesigner');\n\n    if (formDesignerData) {\n      // eslint-disable-next-line\n      var formFieldsData = JSON.parse(formDesignerData);\n\n      for (var i = 0; i < formFieldsData.length; i++) {\n        if (formFieldsData[i].FormField.formFieldAnnotationType === 'RadioButton') {\n          for (var j = 0; j < formFieldsData[i].FormField.radiobuttonItem.length; j++) {\n            if (annotationID === formFieldsData[i].FormField.radiobuttonItem[j].id.split('_')[0]) {\n              isFormFieldAnnotation = true;\n              break;\n            }\n          }\n        } else if (formFieldsData[i].Key.split('_')[0] === annotationID) {\n          isFormFieldAnnotation = true;\n          break;\n        }\n      }\n    }\n\n    return isFormFieldAnnotation;\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns whether freetext module is enabled.\n   */\n\n\n  PdfViewerBase.prototype.isFreeTextAnnotationModule = function () {\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.freeTextAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.createRequestForDownload = function () {\n    var proxy = null;\n    proxy = this;\n    proxy.pdfViewer.fireDownloadStart(proxy.downloadFileName); // eslint-disable-next-line\n\n    var jsonObject = this.constructJsonDownload();\n    this.dowonloadRequestHandler = new AjaxHandler(this.pdfViewer);\n    this.dowonloadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.download;\n    this.dowonloadRequestHandler.responseType = 'text';\n\n    if (this.validateForm && this.pdfViewer.enableFormFieldsValidation) {\n      this.pdfViewer.fireValidatedFailed(proxy.pdfViewer.serverActionSettings.download);\n      this.validateForm = false;\n    } else {\n      this.dowonloadRequestHandler.send(jsonObject);\n    } // eslint-disable-next-line\n\n\n    this.dowonloadRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n\n      if (data) {\n        if (typeof data !== 'object' && data.indexOf('data:application/pdf') === -1) {\n          proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.download);\n          data = null;\n        }\n\n        if (typeof data === 'object') {\n          data = JSON.parse(data);\n        }\n\n        if (data) {\n          if (proxy.pdfViewer.downloadFileName && proxy.pdfViewer.downloadFileName !== proxy.downloadFileName) {\n            proxy.downloadFileName = proxy.pdfViewer.downloadFileName;\n          }\n\n          proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download, data);\n          var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n\n          if (Browser.isIE || Browser.info.name === 'edge') {\n            window.navigator.msSaveOrOpenBlob(blobUrl, proxy.downloadFileName);\n          } else {\n            proxy.downloadDocument(blobUrl);\n          }\n\n          proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName, data);\n        }\n\n        proxy.updateDocumentAnnotationCollections();\n      } else {\n        proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName, 'PDF Document saved in server side successfully');\n      }\n    }; // eslint-disable-next-line\n\n\n    this.dowonloadRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n    }; // eslint-disable-next-line\n\n\n    this.dowonloadRequestHandler.onError = function (result) {\n      proxy.openNotificationPopup();\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n    };\n  };\n  /**\n   * @param pageWidth\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.getTileCount = function (pageWidth) {\n    if (pageWidth && typeof pageWidth === 'number') {\n      var defaultWidth = 816;\n      var tileCount = 1;\n\n      if (this.getZoomFactor() > 2 && pageWidth <= 1200) {\n        tileCount = 2;\n      } else {\n        tileCount = pageWidth / defaultWidth;\n      } // eslint-disable-next-line radix\n\n\n      var tileValue = parseInt(tileCount.toFixed());\n\n      if (tileValue <= 0) {\n        return 1;\n      } else {\n        if (this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n          return tileValue;\n        } else {\n          return 1;\n        }\n      }\n    } else {\n      return 1;\n    }\n  };\n\n  PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n    var proxy = null;\n    proxy = this;\n    var canvas = proxy.getElement('_pageCanvas_' + pageIndex);\n    var oldCanvas = proxy.getElement('_oldCanvas_' + pageIndex);\n\n    if (this.pageSize && this.pageSize[pageIndex]) {\n      var pageWidth_1 = this.pageSize[pageIndex].width;\n      var pageHeight = this.pageSize[pageIndex].height;\n      var tilecanvas = this.getElement('_pageCanvas_' + pageIndex); // eslint-disable-next-line\n\n      var viewPortWidth_1 = 1200; // On diving the value greater than 1200 we will get the tile count as 2.\n      // eslint-disable-next-line\n\n      var viewPortHeight = proxy.pdfViewer.element.clientHeight > 0 ? proxy.pdfViewer.element.clientHeight : proxy.pdfViewer.element.style.height; // eslint-disable-next-line radix\n\n      viewPortWidth_1 = parseInt(viewPortWidth_1); // eslint-disable-next-line radix\n\n      viewPortHeight = parseInt(viewPortHeight) ? parseInt(viewPortHeight) : 500; //we have applied minimum-height as 500.\n\n      var noTileX = void 0;\n      var noTileY = void 0;\n      var tileCount = this.getTileCount(pageWidth_1);\n\n      if (canvas) {\n        if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n          if (proxy.isInitialLoaded) {\n            proxy.showPageLoadingIndicator(pageIndex, false);\n          }\n        } // eslint-disable-next-line\n\n\n        var data = proxy.getStoredData(pageIndex);\n        noTileX = noTileY = tileCount;\n        var tileSettings = proxy.pdfViewer.tileRenderingSettings;\n\n        if (tileSettings.enableTileRendering && tileSettings.x > 0 && tileSettings.y > 0) {\n          if (viewPortWidth_1 < pageWidth_1 || this.getZoomFactor() > 2) {\n            noTileX = tileSettings.x;\n            noTileY = tileSettings.y;\n          }\n        }\n\n        proxy.tileRequestCount = noTileX * noTileY;\n        var zoomFactor = this.retrieveCurrentZoomFactor();\n        var isPageRequestSent = void 0;\n\n        if (tileCount === 1) {\n          data = proxy.getStoredData(pageIndex);\n          isPageRequestSent = proxy.pageRequestSent(pageIndex, 0, 0);\n        } else {\n          // eslint-disable-next-line\n          var tileData = JSON.parse(proxy.getWindowSessionStorageTile(pageIndex, 0, 0, zoomFactor));\n\n          if (tileData) {\n            data = tileData;\n          }\n        }\n\n        if (data && data.uniqueId === proxy.documentId) {\n          canvas.style.backgroundColor = '#fff';\n\n          if (proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed || !this.pageSize[pageIndex]) {\n            return;\n          }\n\n          var zoomFactor_2 = this.retrieveCurrentZoomFactor();\n\n          if (zoomFactor_2 > 2 && pageWidth_1 <= 1200) {\n            viewPortWidth_1 = 700;\n          } else {\n            viewPortWidth_1 = 1200;\n          }\n\n          if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n            viewPortWidth_1 = 1200;\n          }\n\n          if (viewPortWidth_1 >= pageWidth_1 || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n            proxy.renderPage(data, pageIndex);\n          } else {\n            proxy.isTileImageRendered = true;\n            proxy.tileRenderCount = 0;\n            proxy.tileRenderPage(data, pageIndex);\n\n            for (var k = 0; k < noTileX; k++) {\n              for (var l = 0; l < noTileY; l++) {\n                if (k === 0 && l === 0) {\n                  continue;\n                }\n\n                data = JSON.parse(this.getWindowSessionStorageTile(pageIndex, k, l, zoomFactor_2));\n\n                if (data) {\n                  proxy.tileRenderPage(data, pageIndex);\n                }\n              }\n            }\n          }\n\n          data = null;\n        } else if (data === null || !isPageRequestSent) {\n          if (this.getPagesPinchZoomed()) {\n            proxy.showPageLoadingIndicator(pageIndex, false);\n          } else {\n            proxy.showPageLoadingIndicator(pageIndex, true);\n          }\n\n          if (proxy.getPagesZoomed()) {\n            if (proxy.isInitialLoaded) {\n              proxy.showPageLoadingIndicator(pageIndex, false);\n            }\n          }\n\n          if (proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed) {\n            return;\n          }\n\n          if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n            noTileX = 1;\n            noTileY = 1;\n          }\n\n          proxy.tileRenderCount = 0;\n          proxy.isTileImageRendered = true;\n\n          for (var x = 0; x < noTileX; x++) {\n            for (var y = 0; y < noTileY; y++) {\n              var jsonObject = null;\n              var zoomFactor_3 = this.retrieveCurrentZoomFactor();\n\n              if (zoomFactor_3 > 2 && pageWidth_1 <= 1200) {\n                viewPortWidth_1 = 700;\n              } else {\n                viewPortWidth_1 = 1200;\n              }\n\n              if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                viewPortWidth_1 = 1200;\n              } // eslint-disable-next-line max-len\n\n\n              jsonObject = {\n                xCoordinate: x.toString(),\n                yCoordinate: y.toString(),\n                viewPortWidth: viewPortWidth_1.toString(),\n                viewPortHeight: viewPortHeight.toString(),\n                pageNumber: pageIndex.toString(),\n                hashId: proxy.hashId,\n                tilecount: tileCount.toString(),\n                tileXCount: noTileX.toString(),\n                tileYCount: noTileY.toString(),\n                // eslint-disable-next-line max-len\n                zoomFactor: zoomFactor_3.toString(),\n                action: 'RenderPdfPages',\n                uniqueId: this.documentId,\n                elementId: proxy.pdfViewer.element.id\n              };\n\n              if (this.jsonDocumentId) {\n                // eslint-disable-next-line\n                jsonObject.documentId = this.jsonDocumentId;\n              }\n\n              proxy.pageRequestHandler = new AjaxHandler(this.pdfViewer); // eslint-disable-next-line max-len\n\n              proxy.pageRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderPages;\n              proxy.pageRequestHandler.responseType = 'json';\n              proxy.pageRequestHandler.send(jsonObject);\n              proxy.requestLists.push(proxy.documentId + '_' + pageIndex + '_' + x + '_' + y + '_' + zoomFactor_3); // eslint-disable-next-line\n\n              proxy.pageRequestHandler.onSuccess = function (result) {\n                // eslint-disable-next-line max-len\n                if (proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed || !proxy.pageSize[pageIndex]) {\n                  return;\n                } // eslint-disable-next-line\n\n\n                var data = result.data;\n\n                if (data) {\n                  if (typeof data !== 'object') {\n                    try {\n                      data = JSON.parse(data);\n                    } catch (error) {\n                      proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderPages);\n                      data = null;\n                    }\n                  }\n                }\n\n                if (data) {\n                  while (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                  }\n\n                  if (data.image && data.uniqueId === proxy.documentId) {\n                    var currentPageWidth = data.pageWidth && data.pageWidth > 0 ? data.pageWidth : pageWidth_1;\n                    proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, data);\n                    var pageNumber = data.pageNumber !== undefined ? data.pageNumber : pageIndex;\n\n                    if (viewPortWidth_1 >= currentPageWidth || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                      proxy.storeWinData(data, pageNumber);\n                    } else {\n                      proxy.storeWinData(data, pageNumber, data.tileX, data.tileY);\n                    }\n\n                    if (viewPortWidth_1 >= currentPageWidth || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                      proxy.renderPage(data, pageNumber);\n                    } else {\n                      proxy.tileRenderPage(data, pageNumber);\n                    }\n                  }\n                }\n              }; // eslint-disable-next-line\n\n\n              this.pageRequestHandler.onFailure = function (result) {\n                // eslint-disable-next-line max-len\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderPages);\n              }; // eslint-disable-next-line\n\n\n              this.pageRequestHandler.onError = function (result) {\n                proxy.openNotificationPopup(); // eslint-disable-next-line max-len\n\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderPages);\n              };\n            }\n          }\n        }\n\n        proxy.renderedPagesList.push(pageIndex);\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.pageRequestSent = function (pageIndex, tileX, tileY) {\n    var zoomFactor = this.retrieveCurrentZoomFactor();\n    var currentString = this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor;\n\n    if (this.requestLists && this.requestLists.indexOf(currentString) > -1) {\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   * @private\n   * @param {string} status - The status message.\n   * @param {string} errorMessage - The error message.\n   * @param {string} action - The action.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.onControlError = function (status, errorMessage, action) {\n    this.openNotificationPopup();\n    this.pdfViewer.fireAjaxRequestFailed(status, errorMessage, action);\n  };\n  /**\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.getStoredData = function (pageIndex, isTextSearch) {\n    var zoomFactor = this.retrieveCurrentZoomFactor();\n\n    if (this.pdfViewer.restrictZoomRequest && !this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n      zoomFactor = 1;\n    } // eslint-disable-next-line\n\n\n    var storedData = this.getWindowSessionStorage(pageIndex, zoomFactor) ? this.getWindowSessionStorage(pageIndex, zoomFactor) : this.getPinchZoomPage(pageIndex);\n\n    if (!storedData && isTextSearch) {\n      // eslint-disable-next-line\n      var storedTileData = this.getWindowSessionStorageTile(pageIndex, 0, 0, zoomFactor);\n\n      if (storedTileData) {\n        storedData = storedTileData;\n      }\n    } // eslint-disable-next-line\n\n\n    var data = null;\n\n    if (storedData) {\n      // eslint-disable-next-line\n      data = storedData;\n\n      if (!this.isPinchZoomStorage) {\n        data = JSON.parse(storedData);\n      }\n\n      this.isPinchZoomStorage = false;\n    }\n\n    return data;\n  };\n  /**\n   * @private\n   * @param  {any} data - The data.\n   * @param {number} pageIndex - The pageIndex.\n   * @param {number} tileX - The tileX.\n   * @param {number} tileY - The tileY.\n   * @returns {void}\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.storeWinData = function (data, pageIndex, tileX, tileY) {\n    // eslint-disable-next-line\n    var blobObj = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png'); // eslint-disable-next-line\n\n    var Url = URL || webkitURL;\n    var blobUrl = Url.createObjectURL(blobObj); // eslint-disable-next-line\n\n    var storeObject;\n\n    if (isNaN(tileX) && isNaN(tileY) || tileX === 0 && tileY === 0) {\n      storeObject = {\n        // eslint-disable-next-line\n        image: blobUrl,\n        transformationMatrix: data['transformationMatrix'],\n        hyperlinks: data['hyperlinks'],\n        hyperlinkBounds: data['hyperlinkBounds'],\n        linkAnnotation: data['linkAnnotation'],\n        linkPage: data['linkPage'],\n        annotationLocation: data['annotationLocation'],\n        // eslint-disable-next-line\n        textContent: data['textContent'],\n        width: data['width'],\n        textBounds: data['textBounds'],\n        pageText: data['pageText'],\n        rotation: data['rotation'],\n        scaleFactor: data['scaleFactor'],\n        uniqueId: data['uniqueId'],\n        zoomFactor: data['zoomFactor'],\n        tileX: tileX,\n        tileY: tileY\n      };\n\n      if (this.pageSize[pageIndex]) {\n        // eslint-disable-next-line\n        this.pageSize[pageIndex].rotation = parseFloat(data['rotation']);\n      } // eslint-disable-next-line\n\n\n      this.textLayer.characterBound[pageIndex] = data['characterBounds'];\n    } else {\n      storeObject = {\n        // eslint-disable-next-line\n        image: blobUrl,\n        transformationMatrix: data['transformationMatrix'],\n        tileX: tileX,\n        tileY: tileY,\n        width: data['width'],\n        zoomFactor: data['zoomFactor']\n      };\n    } // eslint-disable-next-line\n\n\n    var viewPortWidth = 816;\n    var pageWidth = 0;\n\n    if (this.pageSize[pageIndex]) {\n      pageWidth = this.pageSize[pageIndex].width;\n    }\n\n    this.manageSessionStorage(pageIndex, storeObject, tileX, tileY);\n  };\n  /**\n   * @private\n   * @param {XMLHttpRequest} request - The Xml request.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.setCustomAjaxHeaders = function (request) {\n    for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n      // eslint-disable-next-line max-len\n      request.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);\n    }\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - Page index.\n   * @returns {object}\n   */\n\n\n  PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n    // eslint-disable-next-line\n    for (var key in this.pinchZoomStorage) {\n      // eslint-disable-next-line\n      if (this.pinchZoomStorage.hasOwnProperty(key)) {\n        if (this.pinchZoomStorage[key].index === pageIndex) {\n          this.isPinchZoomStorage = true;\n          return this.pinchZoomStorage[key].pinchZoomStorage;\n        }\n      }\n    }\n\n    return null;\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - current page index.\n   * @param {number} zoomFactor - cuurent zoom factor\n   * @returns {string}\n   */\n\n\n  PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex, zoomFactor) {\n    return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + zoomFactor);\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - current page index.\n   * @param {number} tileX - cuurent tile x\n   * @param {number} tileY - cuurent tile y\n   * @param {number} zoomFactor - cuurent zoom factor\n   * @returns {string}\n   */\n\n\n  PdfViewerBase.prototype.getWindowSessionStorageTile = function (pageIndex, tileX, tileY, zoomFactor) {\n    return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor);\n  };\n  /**\n   * @private\n   * @returns {number}\n   */\n\n\n  PdfViewerBase.prototype.retrieveCurrentZoomFactor = function () {\n    var zoomFactor = this.getZoomFactor();\n\n    if (this.pdfViewer.enableZoomOptimization) {\n      if (zoomFactor <= 1) {\n        zoomFactor = 1;\n      } else if (zoomFactor > 1 && zoomFactor <= 2) {\n        zoomFactor = 2;\n      } else if (zoomFactor > 2 && zoomFactor <= 3) {\n        zoomFactor = 3;\n      } else if (zoomFactor > 3 && zoomFactor <= 4) {\n        zoomFactor = 4;\n      }\n\n      return zoomFactor;\n    } else {\n      if (zoomFactor <= 0) {\n        zoomFactor = 1;\n      }\n\n      return zoomFactor;\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject, tileX, tileY) {\n    // eslint-disable-next-line\n    var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n    var maxSessionSize = 5000;\n\n    if (sessionSize >= maxSessionSize) {\n      if (!this.isStorageExceed) {\n        // eslint-disable-next-line\n        var annotationList = [];\n\n        for (var i = 0; i < window.sessionStorage.length; i++) {\n          if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n            if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n              // eslint-disable-next-line max-len\n              this.annotationStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n              annotationList.push(window.sessionStorage.key(i));\n            }\n          }\n        }\n\n        if (annotationList) {\n          for (var i = 0; i < annotationList.length; i++) {\n            window.sessionStorage.removeItem(annotationList[i]);\n          }\n        }\n      }\n\n      this.isStorageExceed = true;\n      sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n\n      if (sessionSize >= 5000) {\n        var storageLength = window.sessionStorage.length;\n\n        if (storageLength > 200) {\n          storageLength = 200;\n        }\n\n        for (var i = 0; i < storageLength; i++) {\n          if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n            if (window.sessionStorage.key(i).split('_')[3] !== 'annotations') {\n              window.sessionStorage.removeItem(window.sessionStorage.key(i));\n            }\n          }\n        }\n      }\n    }\n\n    var zoomFactor = this.retrieveCurrentZoomFactor();\n\n    if (isNaN(tileX) && isNaN(tileY)) {\n      // eslint-disable-next-line max-len\n      window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + zoomFactor, JSON.stringify(storeObject));\n      this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + zoomFactor);\n    } else {\n      this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor); // eslint-disable-next-line max-len\n\n      window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor, JSON.stringify(storeObject));\n    }\n  };\n\n  PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n    var sliceSize = 512;\n    var byteCharacters = atob(base64String); // eslint-disable-next-line\n\n    var byteArrays = [];\n\n    for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n      var slice = byteCharacters.slice(offset, offset + sliceSize); // eslint-disable-next-line\n\n      var byteNumbers = new Array(slice.length);\n\n      for (var i = 0; i < slice.length; i++) {\n        byteNumbers[i] = slice.charCodeAt(i);\n      } // eslint-disable-next-line\n\n\n      var byteArray = new Uint8Array(byteNumbers);\n      byteArrays.push(byteArray);\n    } // eslint-disable-next-line\n\n\n    var blob = new Blob(byteArrays, {\n      type: contentType\n    });\n    return blob;\n  };\n\n  PdfViewerBase.prototype.getRandomNumber = function () {\n    // eslint-disable-next-line\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      // eslint-disable-next-line\n      var random = Math.random() * 16 | 0,\n          v = c == 'x' ? random : random & 0x3 | 0x8;\n      return random.toString(16);\n    });\n  };\n\n  PdfViewerBase.prototype.createGUID = function () {\n    // eslint-disable-next-line max-len\n    return 'Sync_PdfViewer_' + this.getRandomNumber();\n  };\n  /**\n   * @private\n   * @param {MouseEvent} event - The mouse event.\n   * @param {boolean} isNeedToSet - Is need to test.\n   * @returns {boolean} - Returns true or false.\n   */\n\n\n  PdfViewerBase.prototype.isClickedOnScrollBar = function (event, isNeedToSet) {\n    var isScrollBar = false;\n\n    if (isNeedToSet) {\n      this.setScrollDownValue(event.type, false);\n    } // eslint-disable-next-line max-len\n\n\n    if (this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft < event.clientX && event.clientX < this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft) {\n      isScrollBar = true;\n\n      if (isNeedToSet) {\n        this.setScrollDownValue(event.type, true);\n      }\n    } // eslint-disable-next-line max-len\n\n\n    if (this.viewerContainer.clientHeight + this.viewerContainer.offsetTop < event.clientY && event.clientY < this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop) {\n      isScrollBar = true;\n\n      if (isNeedToSet) {\n        this.setScrollDownValue(event.type, true);\n      }\n    }\n\n    return isScrollBar;\n  };\n\n  PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n    if (eventType === 'mousedown') {\n      this.isScrollbarMouseDown = boolValue;\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.disableTextSelectionMode = function () {\n    this.isTextSelectionDisabled = true;\n    this.viewerContainer.classList.remove('e-enable-text-selection');\n\n    if (this.pdfViewer.textSelectionModule) {\n      this.pdfViewer.textSelectionModule.clearTextSelection();\n    }\n\n    this.viewerContainer.classList.add('e-disable-text-selection');\n    this.viewerContainer.addEventListener('selectstart', function () {\n      return false;\n    });\n  };\n  /**\n   * @private\n   * @param {string} idString - The Id string.\n   * @returns {HTMLElement} - The html element.\n   */\n\n\n  PdfViewerBase.prototype.getElement = function (idString) {\n    return document.getElementById(this.pdfViewer.element.id + idString);\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - The pageIndex\n   * @returns {number} - Returns number\n   */\n\n\n  PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n    if (this.pageSize[pageIndex]) {\n      return this.pageSize[pageIndex].width * this.getZoomFactor();\n    } else {\n      return 0;\n    }\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - The pageIndex\n   * @returns {number} - Returns number\n   */\n\n\n  PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n    if (this.pageSize[pageIndex]) {\n      return this.pageSize[pageIndex].height * this.getZoomFactor();\n    } else {\n      return 0;\n    }\n  };\n  /**\n   * @private\n   * @param {number} pageIndex - The pageIndex.\n   * @returns {number} - Returns number\n   */\n\n\n  PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n    if (this.pageSize[pageIndex]) {\n      return this.pageSize[pageIndex].top * this.getZoomFactor();\n    } else {\n      return 0;\n    }\n  };\n\n  PdfViewerBase.prototype.isAnnotationToolbarHidden = function () {\n    if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n      return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;\n    } else {\n      return true;\n    }\n  };\n\n  PdfViewerBase.prototype.isFormDesignerToolbarHidded = function () {\n    var formDesignerToolbar = this.pdfViewer.toolbarModule.formDesignerToolbarModule;\n\n    if (formDesignerToolbar) {\n      return formDesignerToolbar.isToolbarHidden;\n    } else {\n      return true;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns true or false.\n   */\n\n\n  PdfViewerBase.prototype.getTextMarkupAnnotationMode = function () {\n    if (this.isTextMarkupAnnotationModule()) {\n      return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;\n    } else {\n      return false;\n    }\n  };\n\n  PdfViewerBase.prototype.isNewFreeTextAnnotation = function () {\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule) {\n      if (!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return true;\n    }\n  };\n\n  PdfViewerBase.prototype.getCurrentTextMarkupAnnotation = function () {\n    if (this.isTextMarkupAnnotationModule()) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {number} - Returns page number.\n   */\n\n\n  PdfViewerBase.prototype.getSelectTextMarkupCurrentPage = function () {\n    if (this.isTextMarkupAnnotationModule()) {\n      return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n    } else {\n      return null;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n\n\n  PdfViewerBase.prototype.getAnnotationToolStatus = function () {\n    if (this.pdfViewer.toolbarModule) {\n      return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n\n\n  PdfViewerBase.prototype.getPopupNoteVisibleStatus = function () {\n    if (this.pdfViewer.annotationModule) {\n      return this.pdfViewer.annotationModule.isPopupNoteVisible;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {TextMarkupAnnotation} - TextMarkupAnnotation.\n   */\n\n\n  PdfViewerBase.prototype.isTextMarkupAnnotationModule = function () {\n    if (this.pdfViewer.annotationModule) {\n      return this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n    } else {\n      return null;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns true or false.\n   */\n\n\n  PdfViewerBase.prototype.isShapeAnnotationModule = function () {\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.shapeAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n\n\n  PdfViewerBase.prototype.isFormDesignerModule = function () {\n    if (this.pdfViewer.formDesignerModule) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n\n\n  PdfViewerBase.prototype.isCalibrateAnnotationModule = function () {\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.measureAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n\n\n  PdfViewerBase.prototype.isStampAnnotationModule = function () {\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.stampAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n\n\n  PdfViewerBase.prototype.isInkAnnotationModule = function () {\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.inkAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n\n\n  PdfViewerBase.prototype.isCommentAnnotationModule = function () {\n    if (this.pdfViewer.annotation) {\n      if (this.pdfViewer.annotation && this.pdfViewer.annotation.stickyNotesAnnotationModule) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Retunrs true or false.\n   */\n\n\n  PdfViewerBase.prototype.isShapeBasedAnnotationsEnabled = function () {\n    // eslint-disable-next-line max-len\n    if (this.isShapeAnnotationModule() || this.isCalibrateAnnotationModule() || this.isStampAnnotationModule() || this.isCommentAnnotationModule() || this.isFormDesignerModule()) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @private\n   * @param {MouseEvent | PointerEvent | TouchEvent} e - Returns event.\n   * @returns {PointModel} - Returns points.\n   */\n\n\n  PdfViewerBase.prototype.getMousePosition = function (e) {\n    var touchArg;\n    var offsetX;\n    var offsetY;\n    var currentTarget = e.target.parentElement;\n\n    if (e.type.indexOf('touch') !== -1) {\n      touchArg = e;\n\n      if (this.pdfViewer.annotation) {\n        var pageDiv = this.getElement('_pageDiv_' + this.pdfViewer.annotation.getEventPageNumber(e));\n\n        if (pageDiv) {\n          var pageCurrentRect = pageDiv.getBoundingClientRect();\n          offsetX = touchArg.changedTouches[0].clientX - pageCurrentRect.left;\n          offsetY = touchArg.changedTouches[0].clientY - pageCurrentRect.top;\n        }\n      }\n    } else {\n      if (e.target.classList.contains('e-pv-hyperlink')) {\n        offsetX = e.offsetX + e.target.offsetLeft;\n        offsetY = e.offsetY + e.target.offsetTop;\n      } else if (e.target.classList.contains('e-pv-text') && currentTarget) {\n        var targetParentRect = currentTarget.getBoundingClientRect();\n        offsetX = e.clientX - targetParentRect.left;\n        offsetY = e.clientY - targetParentRect.top; // eslint-disable-next-line\n      } else if (e.target && e && e.path && currentTarget && (currentTarget.classList.contains('foreign-object') || currentTarget.parentElement.classList.contains('foreign-object'))) {\n        // eslint-disable-next-line\n        var targetParentRect = void 0;\n\n        if (e.path[4].className === 'e-pv-page-div') {\n          targetParentRect = e.path[4].getBoundingClientRect();\n        } else {\n          for (var i = 0; i < e.path.length; i++) {\n            if (e.path[i].className === 'e-pv-page-div') {\n              targetParentRect = e.path[i].getBoundingClientRect();\n              break;\n            }\n          }\n        }\n\n        offsetX = e.clientX - targetParentRect.left;\n        offsetY = e.clientY - targetParentRect.top; // eslint-disable-next-line\n      } else if (e.target && currentTarget && currentTarget.classList.contains('foreign-object')) {\n        // eslint-disable-next-line\n        var targetParentRect = e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n        offsetX = e.clientX - targetParentRect.left;\n        offsetY = e.clientY - targetParentRect.top; // eslint-disable-next-line\n      } else {\n        offsetX = e.offsetX;\n        offsetY = e.offsetY;\n      }\n    }\n\n    return {\n      x: offsetX,\n      y: offsetY\n    };\n  };\n\n  PdfViewerBase.prototype.getMouseEventArgs = function (position, args, evt, source) {\n    args.position = position;\n    var obj;\n    var objects;\n\n    if (!source) {\n      if (this.action === 'Drag' || this.action === 'ConnectorSourceEnd' || this.action === 'SegmentEnd' || this.action === 'OrthoThumb' || this.action === 'BezierSourceThumb' || this.action === 'BezierTargetThumb' || this.action === 'ConnectorTargetEnd' || this.action.indexOf('Rotate') !== -1 || this.action.indexOf('Resize') !== -1) {\n        obj = this.pdfViewer.selectedItems;\n\n        if (this.action === 'Drag' && obj && this.pdfViewer.selectedItems.annotations.length > 0) {\n          obj = findActiveElement(evt, this, this.pdfViewer);\n        } else if (this.action === 'Drag' && obj && this.pdfViewer.selectedItems.formFields.length > 0) {\n          obj = findActiveElement(evt, this, this.pdfViewer);\n        }\n      } else {\n        obj = findActiveElement(evt, this, this.pdfViewer);\n      }\n    } else {\n      //   objects = this.diagram.findObjectsUnderMouse(this.currentPosition, source);\n      obj = findActiveElement(evt, this, this.pdfViewer);\n    }\n\n    var wrapper;\n\n    if (obj) {\n      wrapper = obj.wrapper;\n    }\n\n    if (!source) {\n      args.source = obj;\n      args.sourceWrapper = wrapper;\n    } else {\n      args.target = obj;\n      args.targetWrapper = wrapper;\n    }\n\n    args.actualObject = this.eventArgs.actualObject; //args.startTouches = this.touchStartList;\n    //args.moveTouches = this.touchMoveList;\n\n    return args;\n  };\n  /**\n   * @private\n   * @param {PdfAnnotationBaseModel} obj - The object.\n   * @param {PointModel} position - The position.\n   * @returns {Actions | string} - Returns the string.\n   */\n\n\n  PdfViewerBase.prototype.findToolToActivate = function (obj, position) {\n    position = {\n      x: position.x / this.getZoomFactor(),\n      y: position.y / this.getZoomFactor()\n    };\n    var element = this.pdfViewer.selectedItems.wrapper;\n\n    if (element && obj) {\n      var selectorBnds = element.bounds; //let handle: SelectorModel = diagram.selectedItems;\n\n      var paddedBounds = new Rect(selectorBnds.x, selectorBnds.y, selectorBnds.width, selectorBnds.height);\n\n      if (obj.shapeAnnotationType === 'Line' || obj.shapeAnnotationType === 'LineWidthArrowHead' || obj.shapeAnnotationType === 'Distance' || obj.shapeAnnotationType === 'Polygon') {\n        var conn = this.pdfViewer.selectedItems.annotations[0];\n\n        if (conn) {\n          for (var i = 0; i < conn.vertexPoints.length; i++) {\n            if (contains(position, conn.vertexPoints[i], 10) && conn.leaderHeight !== 0) {\n              return 'ConnectorSegmentPoint_' + i;\n            }\n          }\n        }\n      }\n\n      if (obj.shapeAnnotationType === 'Distance') {\n        var leaderCount = 0;\n        var newPoint1 = void 0;\n\n        if (obj && obj.wrapper) {\n          for (var i = 0; i < obj.wrapper.children.length; i++) {\n            var elementAngle = Point.findAngle(obj.sourcePoint, obj.targetPoint); // eslint-disable-next-line\n\n            var segment = obj.wrapper.children[i];\n\n            if (segment.id.indexOf('leader') > -1) {\n              var centerPoint = obj.wrapper.children[0].bounds.center;\n\n              if (leaderCount === 0) {\n                newPoint1 = {\n                  x: obj.sourcePoint.x,\n                  y: obj.sourcePoint.y - obj.leaderHeight\n                };\n                centerPoint = obj.sourcePoint;\n              } else {\n                newPoint1 = {\n                  x: obj.targetPoint.x,\n                  y: obj.targetPoint.y - obj.leaderHeight\n                };\n                centerPoint = obj.targetPoint;\n              }\n\n              var matrix_1 = identityMatrix();\n              rotateMatrix(matrix_1, elementAngle, centerPoint.x, centerPoint.y);\n              var rotatedPoint = transformPointByMatrix(matrix_1, {\n                x: newPoint1.x,\n                y: newPoint1.y\n              });\n\n              if (contains(position, rotatedPoint, 10)) {\n                return 'Leader' + leaderCount;\n              }\n\n              leaderCount++;\n            }\n          }\n        }\n      }\n\n      var ten = 10 / this.getZoomFactor();\n      var matrix = identityMatrix();\n      rotateMatrix(matrix, obj.rotateAngle + element.parentTransform, element.offsetX, element.offsetY); //check for resizing tool\n\n      var x = element.offsetX - element.pivot.x * element.actualSize.width;\n      var y = element.offsetY - element.pivot.y * element.actualSize.height;\n      var rotateThumb = {\n        x: x + (element.pivot.x === 0.5 ? element.pivot.x * 2 : element.pivot.x) * element.actualSize.width / 2,\n        y: y - 30 / this.getZoomFactor()\n      };\n      rotateThumb = transformPointByMatrix(matrix, rotateThumb);\n\n      if (obj.shapeAnnotationType === 'Stamp' && contains(position, rotateThumb, ten)) {\n        return 'Rotate';\n      }\n\n      paddedBounds = this.inflate(ten, paddedBounds);\n\n      if (paddedBounds.containsPoint(position, 0)) {\n        var action = this.checkResizeHandles(this.pdfViewer, element, position, matrix, x, y);\n\n        if (action) {\n          return action;\n        }\n      }\n\n      if (this.pdfViewer.selectedItems.annotations.indexOf(obj) > -1) {\n        return 'Drag';\n      } else if (this.pdfViewer.selectedItems.formFields.indexOf(obj) > -1 && this.pdfViewer.designerMode) {\n        return 'Drag';\n      }\n\n      return 'Select';\n    }\n\n    return this.pdfViewer.tool || 'Select';\n  };\n\n  PdfViewerBase.prototype.inflate = function (padding, bound) {\n    bound.x -= padding;\n    bound.y -= padding;\n    bound.width += padding * 2;\n    bound.height += padding * 2;\n    return bound;\n  };\n\n  PdfViewerBase.prototype.checkResizeHandles = function (diagram, element, position, matrix, x, y) {\n    var action;\n\n    if (!action) {\n      action = this.checkForResizeHandles(diagram, element, position, matrix, x, y);\n    }\n\n    if (action) {\n      return action;\n    }\n\n    return null;\n  };\n\n  PdfViewerBase.prototype.checkForResizeHandles = function (diagram, element, position, matrix, x, y) {\n    var forty = 40 / 1;\n    var ten = 10 / 1;\n\n    if (element.actualSize.width < 40 || element.actualSize.height < 40) {\n      ten = 5 * this.getZoomFactor() / 1;\n    }\n\n    var selectedItems = diagram.selectedItems;\n    var isStamp = false;\n    var isSticky = false;\n    var isNodeShape = false;\n    var isInk = false;\n    var resizerLocation = this.pdfViewer.annotationSelectorSettings.resizerLocation;\n\n    if (resizerLocation < 1 || resizerLocation > 3) {\n      resizerLocation = 3;\n    } // eslint-disable-next-line max-len\n\n\n    if (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n      isStamp = true;\n    } // eslint-disable-next-line max-len\n\n\n    if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes') {\n      isSticky = true;\n    } // eslint-disable-next-line max-len\n\n\n    if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n      isInk = true;\n    } // eslint-disable-next-line max-len\n\n\n    if (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ellipse' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Radius' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Rectangle')) {\n      isNodeShape = true;\n    }\n\n    if (!isSticky) {\n      // eslint-disable-next-line max-len\n      if (isInk || isStamp || this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage') || element.actualSize.width >= forty && element.actualSize.height >= forty && isNodeShape && (resizerLocation === 1 || resizerLocation === 3)) {\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x + element.actualSize.width,\n          y: y + element.actualSize.height\n        }), ten)) {\n          return 'ResizeSouthEast';\n        }\n\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x,\n          y: y + element.actualSize.height\n        }), ten)) {\n          return 'ResizeSouthWest';\n        }\n\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x + element.actualSize.width,\n          y: y\n        }), ten)) {\n          return 'ResizeNorthEast';\n        }\n\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x,\n          y: y\n        }), ten)) {\n          return 'ResizeNorthWest';\n        }\n      } // eslint-disable-next-line max-len\n\n\n      if (isInk || !isNodeShape || isNodeShape && (resizerLocation === 2 || resizerLocation === 3 || !(element.actualSize.width >= forty && element.actualSize.height >= forty) && resizerLocation === 1)) {\n        if (contains( // eslint-disable-next-line max-len\n        position, transformPointByMatrix(matrix, {\n          x: x + element.actualSize.width,\n          y: y + element.actualSize.height / 2\n        }), ten) && !isStamp) {\n          return 'ResizeEast';\n        } // eslint-disable-next-line max-len\n\n\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x,\n          y: y + element.actualSize.height / 2\n        }), ten) && !isStamp) {\n          return 'ResizeWest';\n        }\n\n        if (contains( // eslint-disable-next-line max-len\n        position, transformPointByMatrix(matrix, {\n          x: x + element.actualSize.width / 2,\n          y: y + element.actualSize.height\n        }), ten) && !isStamp) {\n          return 'ResizeSouth';\n        } // eslint-disable-next-line max-len\n\n\n        if (contains(position, transformPointByMatrix(matrix, {\n          x: x + element.actualSize.width / 2,\n          y: y\n        }), ten) && !isStamp) {\n          return 'ResizeNorth';\n        }\n      }\n    }\n\n    return null;\n  };\n  /**\n   * @private\n   * @param {string} fieldID - The fieldID\n   * @returns {boolean} - Returns true or false.\n   */\n\n\n  PdfViewerBase.prototype.checkSignatureFormField = function (fieldID) {\n    var isFormFieldSign = false;\n\n    if (this.pdfViewer.formDesignerModule) {\n      fieldID = fieldID.split('_')[0];\n    } // eslint-disable-next-line\n\n\n    var formField = this.pdfViewer.nameTable[fieldID];\n\n    if (formField) {\n      if (formField.formFieldAnnotationType === 'SignatureField' || formField.formFieldAnnotationType === 'InitialField' || formField.annotName === 'SignatureField') {\n        isFormFieldSign = true;\n      }\n    }\n\n    return isFormFieldSign;\n  };\n  /**\n   * @private\n   * @param {MouseEvent | TouchEvent} evt - The event.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.diagramMouseMove = function (evt) {\n    var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n    this.pdfViewer.enableServerDataBinding(false);\n    this.currentPosition = this.getMousePosition(evt);\n    this.pdfViewer.firePageMouseover(this.currentPosition.x, this.currentPosition.y);\n\n    if (this.pdfViewer.annotation) {\n      this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt);\n    } else if (this.pdfViewer.formDesignerModule) {\n      this.activeElements.activePageID = this.pdfViewer.formDesignerModule.getEventPageNumber(evt);\n    }\n\n    var obj = findActiveElement(evt, this, this.pdfViewer);\n\n    if (this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool) {\n      obj = this.pdfViewer.drawingObject;\n    }\n\n    var target;\n    var isFormFieldSign = this.pdfViewer.selectedItems.annotations.length > 0 ? this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id) : false;\n\n    if (Point.equals(this.currentPosition, this.prevPosition) === false || this.inAction) {\n      if (this.isMouseDown === false) {\n        this.eventArgs = {};\n        var sourceDrawingElement = null;\n\n        if (obj) {\n          this.tool = this.getTool(this.action);\n\n          if (obj.wrapper) {\n            sourceDrawingElement = obj.wrapper.children[0];\n\n            if (sourceDrawingElement) {\n              target = obj;\n            }\n          }\n        }\n\n        var eventTarget = evt.target;\n        this.action = this.findToolToActivate(obj, this.currentPosition); // eslint-disable-next-line\n\n        if (obj && obj.annotationSettings && obj.annotationSettings.isLock) {\n          if (this.action === 'Select') {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Select', obj)) {\n              this.action = '';\n            }\n          }\n\n          if (this.action === 'Drag') {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Move', obj)) {\n              this.action = 'Select';\n            }\n          } // eslint-disable-next-line max-len\n\n\n          if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' || // eslint-disable-next-line max-len\n          this.action === 'ResizeNorth' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize', obj)) {\n              this.action = 'Select';\n            }\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (!this.pdfViewer.designerMode && (!isNullOrUndefined(target) && !isNullOrUndefined(target.formFieldAnnotationType) || isFormFieldSign)) {\n          if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' || // eslint-disable-next-line max-len\n          this.action === 'ResizeNorth' || this.action === 'Drag' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n            this.action = '';\n          }\n        }\n\n        this.tool = this.getTool(this.action);\n        this.setCursor(eventTarget, evt);\n\n        if (this.pdfViewer.linkAnnotationModule) {\n          this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(eventTarget, evt, this);\n        }\n      } else {\n        if (!this.tool && this.action && this.action === 'Rotate') {\n          this.tool = this.getTool(this.action);\n\n          if (evt.target) {\n            this.setCursor(evt.target, evt);\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (!this.pdfViewer.designerMode && (!isNullOrUndefined(target) && !isNullOrUndefined(target.formFieldAnnotationType) || isFormFieldSign)) {\n          if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' || // eslint-disable-next-line max-len\n          this.action === 'ResizeNorth' || this.action === 'Drag' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n            this.action = '';\n            this.tool = null;\n          }\n        }\n\n        if (this.eventArgs && this.eventArgs.source) {\n          var eventTarget = evt.target;\n          this.updateDefaultCursor(this.eventArgs.source, eventTarget, evt);\n        } else {\n          this.setCursor(evt.target, evt);\n        }\n\n        this.diagramMouseActionHelper(evt);\n\n        if (this.tool) {\n          var currentObject = obj;\n\n          if (currentObject && currentObject.shapeAnnotationType === 'FreeText') {\n            if (this.pdfViewer.freeTextSettings.allowEditTextOnly && this.action !== \"Ink\" && this.eventArgs.source && this.eventArgs.source.shapeAnnotationType === \"FreeText\") {\n              var eventTarget = event.target;\n              eventTarget.style.cursor = 'default';\n              this.tool = null;\n            }\n          }\n\n          if (this.tool != null) {\n            var info = {\n              ctrlKey: evt.ctrlKey,\n              shiftKey: evt.shiftKey\n            };\n            this.eventArgs.info = info;\n            this.tool.mouseMove(this.eventArgs);\n          }\n        }\n      }\n\n      if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.formFieldAnnotationType && this.action !== 'Drag') {\n        if (!(this.tool instanceof ResizeTool)) {\n          this.tool = this.getTool(this.action);\n\n          if (this.tool instanceof NodeDrawingTool) {\n            var obj_1 = this.pdfViewer.drawingObject; // eslint-disable-next-line\n\n            var bounds = this.pdfViewer.formDesignerModule.updateFormFieldInitialSize(obj_1, obj_1.formFieldAnnotationType);\n            var pageWidth = this.pageContainer.firstElementChild.clientWidth - bounds.width;\n            var pageHeight = this.pageContainer.firstElementChild.clientHeight - bounds.height;\n\n            if (this.pdfViewer.formDesignerModule && obj_1.formFieldAnnotationType && this.currentPosition.x < pageWidth && this.currentPosition.y < pageHeight) {\n              // eslint-disable-next-line\n              var formFieldElement = document.getElementById('FormField_helper_html_element');\n\n              if (!formFieldElement) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.formDesignerModule.drawHelper(obj_1.formFieldAnnotationType, obj_1, evt);\n              } else if (formFieldElement) {\n                var previousActivePage = formFieldElement.parentElement.id.split(\"_text_\")[1] || formFieldElement.parentElement.id.split(\"_textLayer_\")[1] || formFieldElement.parentElement.id.split(\"_annotationCanvas_\")[1] || formFieldElement.parentElement.id.split(\"_pageDiv_\")[1];\n\n                if (parseInt(previousActivePage) !== this.activeElements.activePageID) {\n                  formFieldElement.remove(\"FormField_helper_html_element\");\n                } else {\n                  // eslint-disable-next-line\n                  var point = this.getMousePosition(event);\n\n                  if (obj_1.formFieldAnnotationType === 'Checkbox') {\n                    formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility = 'visible';\n                  } else if (obj_1.formFieldAnnotationType === 'SignatureField' || obj_1.formFieldAnnotationType === 'InitialField') {\n                    formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                    formFieldElement.firstElementChild.lastElementChild.style.visibility = 'visible';\n                  } else {\n                    formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                  }\n\n                  formFieldElement.setAttribute('style', 'height:' + bounds.height + 'px; width:' + bounds.width + 'px;left:' + point.x + 'px; top:' + point.y + 'px;' + 'position:absolute;opacity: 0.5;');\n                }\n              }\n            } else if (this.currentPosition.x > pageWidth || this.currentPosition.y > pageHeight) {\n              // eslint-disable-next-line\n              var formFieldElement = document.getElementById('FormField_helper_html_element');\n\n              if (!formFieldElement) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.formDesignerModule.drawHelper(obj_1.formFieldAnnotationType, obj_1, evt);\n              } else if (formFieldElement) {\n                // eslint-disable-next-line\n                var point = this.getMousePosition(event);\n                formFieldElement.setAttribute('style', 'height:' + bounds.height + 'px; width:' + bounds.width + 'px;left:' + point.x + 'px; top:' + point.y + 'px;' + 'position:absolute;opacity: 0.5;');\n\n                if (obj_1.formFieldAnnotationType === 'Checkbox') {\n                  formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility = 'hidden';\n                } else if (obj_1.formFieldAnnotationType === 'SignatureField' || obj_1.formFieldAnnotationType === 'InitialField') {\n                  formFieldElement.firstElementChild.firstElementChild.style.visibility = 'hidden';\n                  formFieldElement.firstElementChild.lastElementChild.style.visibility = 'hidden';\n                } else {\n                  formFieldElement.firstElementChild.firstElementChild.style.visibility = 'hidden';\n                }\n              }\n            }\n          }\n        }\n      }\n\n      this.prevPosition = this.currentPosition;\n    }\n\n    this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.updateDefaultCursor = function (source, target, event) {\n    // eslint-disable-next-line max-len\n    if (source && source.pageIndex !== undefined && source.pageIndex !== this.activeElements.activePageID && target) {\n      // eslint-disable-next-line\n      this.isPanMode ? target.style.cursor = 'grab' : target.style.cursor = 'default';\n    } else {\n      this.setCursor(target, event);\n    }\n  };\n  /**\n   * @private\n   * @param {MouseEvent | TouchEvent} evt - The event.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.diagramMouseLeave = function (evt) {\n    this.currentPosition = this.getMousePosition(evt);\n\n    if (this.pdfViewer.annotation) {\n      this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt);\n    }\n\n    var shapeElement = findActiveElement(evt, this, this.pdfViewer);\n    var mouseMoveforce = false;\n    var target;\n\n    if (Point.equals(this.currentPosition, this.prevPosition) === false || this.inAction) {\n      if (this.isMouseDown === false || mouseMoveforce) {\n        this.eventArgs = {};\n        var sourceElement = null;\n\n        if (shapeElement) {\n          sourceElement = shapeElement.wrapper.children[0];\n\n          if (sourceElement) {\n            target = shapeElement;\n          }\n\n          mouseMoveforce = false;\n        }\n      } else {\n        this.diagramMouseActionHelper(evt); // eslint-disable-next-line max-len\n\n        if (this.tool && this.action !== 'Drag' && this.pdfViewer.tool !== 'Stamp' && this.tool.currentElement && this.tool.currentElement.shapeAnnotationType !== 'Stamp') {\n          this.tool.mouseLeave(this.eventArgs);\n          this.tool = null;\n\n          if (this.pdfViewer.annotation) {\n            this.pdfViewer.annotationModule.renderAnnotations(this.previousPage, null, null, null);\n          }\n        }\n      }\n\n      this.prevPosition = this.currentPosition;\n    }\n  };\n\n  PdfViewerBase.prototype.diagramMouseActionHelper = function (evt) {\n    this.eventArgs.position = this.currentPosition;\n\n    if (this.action === 'Drag' && this.eventArgs.source instanceof Selector) {\n      this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt);\n    }\n\n    this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt, this.eventArgs.source);\n    this.inAction = true;\n    this.initialEventArgs = null;\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.setCursor = function (eventTarget, event) {\n    // eslint-disable-next-line max-len\n    var freeTextAnnotModule = this.pdfViewer.annotationModule ? this.pdfViewer.annotationModule.freeTextAnnotationModule : null;\n    var cursorType;\n\n    if (this.tool instanceof ResizeTool) {\n      if (this.tool.corner === 'ResizeNorthWest') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'nw-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeNorthEast') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'ne-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeSouthWest') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'sw-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeSouthEast') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'se-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeNorth') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'n-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeWest') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'w-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeEast') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'e-resize' : cursorType;\n      } else if (this.tool.corner === 'ResizeSouth') {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 's-resize' : cursorType;\n      }\n    } else if (this.isCommentIconAdded && this.isAddComment) {\n      eventTarget.style.cursor = 'crosshair';\n    } else if (this.pdfViewer.enableHandwrittenSignature && this.isNewSignatureAdded && this.tool instanceof StampTool) {\n      eventTarget.style.cursor = 'crosshair';\n    } else if (this.tool instanceof MoveTool) {\n      eventTarget.style.cursor = 'move'; // eslint-disable-next-line max-len\n    } else if (this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool || this.tool instanceof PolygonDrawingTool || freeTextAnnotModule && freeTextAnnotModule.isNewAddedAnnot || this.tool instanceof InkDrawingTool) {\n      eventTarget.style.cursor = 'crosshair';\n    } else if (this.tool instanceof ConnectTool) {\n      if (this.tool.endPoint && this.tool.endPoint.indexOf('Leader0')) {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'nw-resize' : cursorType;\n      } else if (this.tool.endPoint && this.tool.endPoint.indexOf('Leader1')) {\n        cursorType = this.setResizerCursorType();\n        eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'ne-resize' : cursorType;\n      } else if (this.tool.endPoint && this.tool.endPoint.indexOf('ConnectorSegmentPoint')) {\n        eventTarget.style.cursor = 'sw-resize';\n      }\n    } else {\n      if (eventTarget.classList.contains('e-pv-text')) {\n        eventTarget.style.cursor = 'text';\n      } else if (eventTarget.classList.contains('e-pv-hyperlink')) {\n        eventTarget.style.cursor = 'pointer';\n      } else if (this.isPanMode) {\n        if (this.isViewerMouseDown && event.type === 'mousemove') {\n          eventTarget.style.cursor = 'grabbing';\n        } else {\n          var obj = findActiveElement(event, this, this.pdfViewer);\n\n          if (obj && event.type === 'mousemove') {\n            eventTarget.style.cursor = 'pointer'; // eslint-disable-next-line max-len\n\n            var currentObject = obj; // eslint-disable-next-line\n\n            var currentPosition = this.getMousePosition(event); // eslint-disable-next-line\n\n            var relativePosition = this.relativePosition(event); // eslint-disable-next-line\n\n            var viewerPositions = {\n              left: relativePosition.x,\n              top: relativePosition.y\n            }; // eslint-disable-next-line\n\n            var mousePositions = {\n              left: currentPosition.x,\n              top: currentPosition.y\n            }; // eslint-disable-next-line\n\n            var annotationSettings = {\n              opacity: currentObject.opacity,\n              fillColor: currentObject.fillColor,\n              strokeColor: currentObject.strokeColor,\n              thicknes: currentObject.thickness,\n              author: currentObject.author,\n              subject: currentObject.subject,\n              modifiedDate: currentObject.modifiedDate\n            }; // eslint-disable-next-line max-len\n\n            this.isMousedOver = true;\n            var isFormField = this.checkSignatureFormField(currentObject.id);\n\n            if (currentObject.formFieldAnnotationType) {\n              this.isFormFieldMousedOver = true;\n              var field_1 = {\n                // eslint-disable-next-line\n                value: currentObject.value,\n                fontFamily: currentObject.fontFamily,\n                fontSize: currentObject.fontSize,\n                fontStyle: currentObject.fontStyle,\n                // eslint-disable-next-line max-len\n                color: currentObject.color,\n                backgroundColor: currentObject.backgroundColor,\n                borderColor: currentObject.borderColor,\n                // eslint-disable-next-line\n                thickness: currentObject.thickness,\n                alignment: currentObject.alignment,\n                isReadonly: currentObject.isReadonly,\n                visibility: currentObject.visibility,\n                // eslint-disable-next-line\n                maxLength: currentObject.maxLength,\n                isRequired: currentObject.isRequired,\n                isPrint: currentObject.isPrint,\n                rotation: currentObject.rotateAngle,\n                tooltip: currentObject.tooltip,\n                options: currentObject.options,\n                // eslint-disable-next-line\n                isChecked: currentObject.isChecked,\n                isSelected: currentObject.isSelected\n              };\n              this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field_1, currentObject.pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n            } else {\n              if (!isFormField) // eslint-disable-next-line max-len\n                this.pdfViewer.fireAnnotationMouseover(currentObject.annotName, currentObject.pageIndex, currentObject.shapeAnnotationType, currentObject.bounds, annotationSettings, mousePositions, viewerPositions);\n            }\n          } else {\n            eventTarget.style.cursor = 'grab';\n\n            if (this.isMousedOver) {\n              var pageIndex = void 0;\n\n              if (this.pdfViewer.formDesignerModule) {\n                pageIndex = this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n              } else {\n                pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n              }\n\n              if (this.isFormFieldMousedOver) {\n                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', null, pageIndex);\n              } else {\n                this.pdfViewer.fireAnnotationMouseLeave(pageIndex);\n              }\n\n              this.isMousedOver = false;\n              this.isFormFieldMousedOver = false;\n            }\n          }\n        }\n      } else {\n        var obj = findActiveElement(event, this, this.pdfViewer);\n\n        if (obj && this.pdfViewer.selectedItems.annotations.length === 0 && event.type === 'mousemove') {\n          var currentObject = obj; // eslint-disable-next-line\n\n          var annotationObject = this.pdfViewer.nameTable[currentObject.id]; // eslint-disable-next-line max-len\n\n          if (annotationObject.shapeAnnotationType !== 'HandWrittenSignature' && annotationObject.shapeAnnotationType !== 'Ink' && annotationObject.annotationSettings && annotationObject.annotationSettings.isLock !== undefined) {\n            annotationObject.annotationSettings.isLock = JSON.parse(annotationObject.annotationSettings.isLock);\n          }\n\n          if (annotationObject.annotationSettings && annotationObject.annotationSettings.isLock) {\n            eventTarget.style.cursor = 'default';\n          } else {\n            eventTarget.style.cursor = 'pointer';\n          } // eslint-disable-next-line\n\n\n          var currentPosition = this.getMousePosition(event); // eslint-disable-next-line\n\n          var relativePosition = this.relativePosition(event); // eslint-disable-next-line\n\n          var viewerPositions = {\n            left: relativePosition.x,\n            top: relativePosition.y\n          }; // eslint-disable-next-line\n\n          var mousePositions = {\n            left: currentPosition.x,\n            top: currentPosition.y\n          }; // eslint-disable-next-line\n\n          var annotationSettings = {\n            opacity: currentObject.opacity,\n            fillColor: currentObject.fillColor,\n            strokeColor: currentObject.strokeColor,\n            thicknes: currentObject.thickness,\n            author: currentObject.author,\n            subject: currentObject.subject,\n            modifiedDate: currentObject.modifiedDate\n          }; // eslint-disable-next-line max-len\n\n          this.isMousedOver = true;\n          var isFormField = this.checkSignatureFormField(currentObject.id);\n\n          if (currentObject.formFieldAnnotationType) {\n            this.isFormFieldMousedOver = true;\n            var field_2 = {\n              // eslint-disable-next-line\n              value: currentObject.value,\n              fontFamily: currentObject.fontFamily,\n              fontSize: currentObject.fontSize,\n              fontStyle: currentObject.fontStyle,\n              // eslint-disable-next-line max-len\n              color: currentObject.color,\n              backgroundColor: currentObject.backgroundColor,\n              borderColor: currentObject.borderColor,\n              // eslint-disable-next-line\n              thickness: currentObject.thickness,\n              alignment: currentObject.alignment,\n              isReadonly: currentObject.isReadonly,\n              visibility: currentObject.visibility,\n              // eslint-disable-next-line\n              maxLength: currentObject.maxLength,\n              isRequired: currentObject.isRequired,\n              isPrint: currentObject.isPrint,\n              rotation: currentObject.rotateAngle,\n              tooltip: currentObject.tooltip,\n              options: currentObject.options,\n              // eslint-disable-next-line\n              isChecked: currentObject.isChecked,\n              isSelected: currentObject.isSelected\n            };\n            this.fromTarget = currentObject;\n            this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field_2, currentObject.pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n          } else {\n            if (!isFormField) // eslint-disable-next-line max-len\n              this.pdfViewer.fireAnnotationMouseover(currentObject.annotName, currentObject.pageIndex, currentObject.shapeAnnotationType, currentObject.bounds, annotationSettings, mousePositions, viewerPositions);\n          }\n        } else if (!this.pdfViewer.formDesignerModule && event.target.classList.contains('e-pdfviewer-formFields')) {\n          var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n          var currentPosition = this.getMousePosition(event);\n          var relativePosition = this.relativePosition(event);\n          var viewerPositions = {\n            left: relativePosition.x,\n            top: relativePosition.y\n          };\n          var mousePositions = {\n            left: currentPosition.x,\n            top: currentPosition.y\n          };\n          var dataJson = this.getItemFromSessionStorage('_formfields');\n          var data = JSON.parse(dataJson);\n\n          for (var i = 0; i < data.length; i++) {\n            if (data[i].FieldName === event.target.name) {\n              var field = {\n                name: data[i].FieldName\n              };\n            }\n          }\n\n          this.isMousedOver = true;\n          this.isFormFieldMousedOver = true;\n          this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field, pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n        } else {\n          if (this.isMousedOver) {\n            var pageIndex = void 0;\n\n            if (this.pdfViewer.formDesignerModule) {\n              pageIndex = this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n            } else {\n              pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n            }\n\n            if (this.isFormFieldMousedOver) {\n              if (this.fromTarget) {\n                var field_3 = {\n                  // eslint-disable-next-line\n                  name: this.fromTarget.name,\n                  id: this.fromTarget.id,\n                  value: this.fromTarget.value,\n                  fontFamily: this.fromTarget.fontFamily,\n                  fontSize: this.fromTarget.fontSize,\n                  fontStyle: this.fromTarget.fontStyle,\n                  // eslint-disable-next-line max-len\n                  color: this.fromTarget.color,\n                  backgroundColor: this.fromTarget.backgroundColor,\n                  borderColor: this.fromTarget.borderColor,\n                  // eslint-disable-next-line\n                  thickness: this.fromTarget.thickness,\n                  alignment: this.fromTarget.alignment,\n                  isReadonly: this.fromTarget.isReadonly,\n                  visibility: this.fromTarget.visibility,\n                  // eslint-disable-next-line\n                  maxLength: this.fromTarget.maxLength,\n                  isRequired: this.fromTarget.isRequired,\n                  isPrint: this.fromTarget.isPrint,\n                  rotation: this.fromTarget.rotateAngle,\n                  tooltip: this.fromTarget.tooltip,\n                  options: this.fromTarget.options,\n                  // eslint-disable-next-line\n                  isChecked: this.fromTarget.isChecked,\n                  isSelected: this.fromTarget.isSelected\n                };\n                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', field_3, pageIndex);\n              } else {\n                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', null, pageIndex);\n              }\n            } else {\n              this.pdfViewer.fireAnnotationMouseLeave(pageIndex);\n            }\n\n            this.isMousedOver = false;\n            this.isFormFieldMousedOver = false;\n            eventTarget.style.cursor = 'default';\n          }\n\n          if (obj && this.pdfViewer.selectedItems.annotations.length === 1 && event.type === 'mousemove') {\n            eventTarget.style.cursor = 'pointer';\n          } else {\n            eventTarget.style.cursor = 'default';\n          }\n        }\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.setResizerCursorType = function () {\n    var cursorType; // eslint-disable-next-line max-len\n\n    if (this.pdfViewer.selectedItems.annotations[0] && isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)) {\n      if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n        // eslint-disable-next-line max-len\n        cursorType = !isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings) ? this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType : null;\n      } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp') {\n        // eslint-disable-next-line max-len\n        cursorType = !isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings) ? this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType : null;\n      } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage') {\n        // eslint-disable-next-line max-len\n        cursorType = !isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings) ? this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType : null;\n      } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n        // eslint-disable-next-line max-len\n        cursorType = !isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings) ? this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType : null;\n      } else if (!this.pdfViewer.selectedItems.annotations[0].measureType) {\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings) ? this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings) ? this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Rectangle') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings) ? this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ellipse') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings) ? this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Polygon') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings) ? this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType : null;\n        }\n      } else if (this.pdfViewer.selectedItems.annotations[0].measureType) {\n        if (this.pdfViewer.selectedItems.annotations[0].subject === 'Distance calculation') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings) ? this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Perimeter calculation') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings) ? this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Area calculation') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings) ? this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Radius calculation') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings) ? this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType : null;\n        } else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Volume calculation') {\n          // eslint-disable-next-line max-len\n          cursorType = !isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings) ? this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType : null;\n        }\n      }\n    } else {\n      if (this.pdfViewer.selectedItems.annotations[0]) {\n        cursorType = this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType;\n      }\n    }\n\n    if (!cursorType) {\n      cursorType = this.pdfViewer.annotationSelectorSettings.resizerCursorType;\n    }\n\n    return cursorType;\n  };\n  /**\n   * @private\n   * @param {Actions | string} action - The actions.\n   * @returns {ToolBase} - Returns tools.\n   */\n\n\n  PdfViewerBase.prototype.getTool = function (action) {\n    switch (action) {\n      case 'Select':\n        return new SelectTool(this.pdfViewer, this);\n\n      case 'Drag':\n        return new MoveTool(this.pdfViewer, this);\n\n      case 'ResizeSouthEast':\n      case 'ResizeSouthWest':\n      case 'ResizeNorthEast':\n      case 'ResizeNorthWest':\n      case 'ResizeSouth':\n      case 'ResizeNorth':\n      case 'ResizeWest':\n      case 'ResizeEast':\n        return new ResizeTool(this.pdfViewer, this, action);\n\n      case 'ConnectorSourceEnd':\n      case 'ConnectorTargetEnd':\n      case 'Leader':\n      case 'ConnectorSegmentPoint':\n        return new ConnectTool(this.pdfViewer, this, action);\n\n      case 'DrawTool':\n        return new NodeDrawingTool(this.pdfViewer, this, this.pdfViewer.drawingObject);\n\n      case 'Polygon':\n        return new PolygonDrawingTool(this.pdfViewer, this, 'Polygon');\n\n      case 'Distance':\n        return new LineTool(this.pdfViewer, this, 'Leader1', undefined);\n\n      case 'Line':\n        return new LineTool(this.pdfViewer, this, 'ConnectorSegmentPoint_1', this.pdfViewer.drawingObject);\n\n      case 'Perimeter':\n        return new PolygonDrawingTool(this.pdfViewer, this, 'Perimeter');\n\n      case 'Rotate':\n        return new RotateTool(this.pdfViewer, this);\n\n      case 'Stamp':\n        return new StampTool(this.pdfViewer, this);\n\n      case 'Ink':\n        return new InkDrawingTool(this.pdfViewer, this, this.pdfViewer.drawingObject);\n    }\n\n    if (action.indexOf('ConnectorSegmentPoint') > -1 || action.indexOf('Leader') > -1) {\n      return new ConnectTool(this.pdfViewer, this, action);\n    }\n\n    return null;\n  };\n  /**\n   * @private\n   * @param {MouseEvent | TouchEvent} evt - The events.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.diagramMouseUp = function (evt) {\n    var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n    this.pdfViewer.enableServerDataBinding(false);\n    var touches;\n\n    if (this.tool) {\n      if (!this.inAction && evt.which !== 3) {\n        if (this.action === 'Drag') {\n          this.action = 'Select';\n          var obj = findActiveElement(evt, this, this.pdfViewer);\n          var isMultipleSelect = true;\n        }\n      }\n\n      var isGroupAction = void 0;\n\n      if (!(this.tool instanceof PolygonDrawingTool) && !(this.tool instanceof LineTool) && !(this.tool instanceof NodeDrawingTool)) {\n        this.inAction = false;\n        this.isMouseDown = false;\n      }\n\n      this.currentPosition = this.getMousePosition(evt);\n\n      if (this.tool) {\n        this.eventArgs.position = this.currentPosition;\n        this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt, this.eventArgs.source);\n        var ctrlKey = this.isMetaKey(evt);\n        var info = {\n          ctrlKey: evt.ctrlKey,\n          shiftKey: evt.shiftKey\n        };\n        this.eventArgs.info = info;\n        this.eventArgs.clickCount = evt.detail;\n        this.tool.mouseUp(this.eventArgs);\n        this.isAnnotationMouseDown = false;\n        this.isFormFieldMouseDown = false; // eslint-disable-next-line max-len\n\n        if ((this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool || this.tool instanceof PolygonDrawingTool) && !this.tool.dragging) {\n          this.inAction = false;\n          this.isMouseDown = false;\n        }\n\n        var obj = findActiveElement(evt, this, this.pdfViewer); // eslint-disable-next-line max-len\n\n        if (this.isShapeAnnotationModule() && this.isCalibrateAnnotationModule()) {\n          this.pdfViewer.annotation.onShapesMouseup(obj, evt);\n        }\n\n        this.isAnnotationDrawn = false;\n      }\n    }\n\n    var target = evt.target; // eslint-disable-next-line max-len\n\n    if (!touches && evt.cancelable && this.skipPreventDefault(target) && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n      evt.preventDefault();\n    }\n\n    this.eventArgs = {};\n    this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n  };\n  /**\n   * @private\n   * @param {HTMLElement} target - The target.\n   * @returns {boolean} - Returns true or false.\n   */\n\n\n  PdfViewerBase.prototype.skipPreventDefault = function (target) {\n    var isSkipped = false;\n    var isSkip = false; // eslint-disable-next-line max-len\n\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n      isSkip = true;\n    } // eslint-disable-next-line max-len\n\n\n    if (target.parentElement && target.parentElement.className !== 'foreign-object' && !target.classList.contains('e-pv-radio-btn') && !target.classList.contains('e-pv-radiobtn-span') && !target.classList.contains('e-pv-checkbox-div') && !target.classList.contains('e-pdfviewer-formFields') && !target.classList.contains('e-pdfviewer-ListBox') && !target.classList.contains('e-pdfviewer-signatureformfields') && !(target.className === 'free-text-input' && target.tagName === 'TEXTAREA') && !isSkip && !(target.className === 'e-pv-hyperlink')) {\n      isSkipped = true;\n    }\n\n    return isSkipped;\n  };\n\n  PdfViewerBase.prototype.isMetaKey = function (evt) {\n    return navigator.platform.match('Mac') ? evt.metaKey : evt.ctrlKey;\n  };\n  /**\n   * @private\n   * @param {MouseEvent | TouchEvent} evt - The events.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.diagramMouseDown = function (evt) {\n    if (evt.which === 3) {\n      this.diagramMouseUp(evt);\n    }\n\n    var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n    this.pdfViewer.enableServerDataBinding(false);\n    var touches = null;\n    touches = evt.touches;\n    this.isMouseDown = true;\n    this.isAnnotationAdded = false;\n    this.currentPosition = this.prevPosition = this.getMousePosition(evt);\n    this.eventArgs = {};\n    var isStamp = false;\n\n    if (this.pdfViewer.tool === 'Stamp') {\n      this.pdfViewer.tool = '';\n      isStamp = true;\n    }\n\n    var target;\n\n    if (Browser.isDevice && this.pdfViewer.annotation) {\n      this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt);\n    }\n\n    var obj = findActiveElement(evt, this, this.pdfViewer);\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && obj && !(obj instanceof PdfFormFieldBase)) {\n      evt.preventDefault();\n    }\n\n    if (this.pdfViewer.annotation && this.pdfViewer.enableStampAnnotations) {\n      var stampModule = this.pdfViewer.annotationModule.stampAnnotationModule;\n\n      if (stampModule && stampModule.isNewStampAnnot) {\n        var stampObj = obj;\n\n        if (!stampObj && this.pdfViewer.selectedItems.annotations[0]) {\n          stampObj = this.pdfViewer.selectedItems.annotations[0];\n        }\n\n        if (stampObj) {\n          this.isViewerMouseDown = false;\n          stampObj.opacity = this.pdfViewer.stampSettings.opacity;\n          this.isNewStamp = true;\n          var opacity = void 0;\n\n          if (stampObj.shapeAnnotationType === 'Image') {\n            opacity = this.pdfViewer.customStampSettings.opacity;\n          } else {\n            opacity = this.pdfViewer.stampSettings.opacity;\n          } // eslint-disable-next-line max-len\n\n\n          this.pdfViewer.nodePropertyChange(stampObj, {\n            opacity: opacity\n          });\n          this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = false;\n\n          if (stampObj.shapeAnnotationType === 'Image' && !this.isAlreadyAdded) {\n            this.stampAdded = true;\n            var stampName = stampObj.id;\n\n            if (stampModule.currentStampAnnotation && stampModule.currentStampAnnotation.signatureName) {\n              stampName = stampModule.currentStampAnnotation.signatureName;\n            }\n\n            var isSkip = false;\n\n            for (var i = 0; i < this.customStampCollection.length; i++) {\n              if (this.customStampCollection[i].customStampName === stampName) {\n                isSkip = true;\n                break;\n              }\n            }\n\n            if (isSkip) {\n              stampName = stampObj.id;\n            }\n\n            stampName = stampModule.customStampName ? stampModule.customStampName : stampModule.currentStampAnnotation.signatureName;\n            this.customStampCollection.push({\n              customStampName: stampName,\n              customStampImageSource: stampObj.data\n            });\n\n            if (isBlazor()) {\n              this.pdfViewer._dotnetInstance.invokeMethodAsync(\"UpdateCustomStampCollection\", stampName, stampObj.data);\n            }\n          }\n\n          if (this.pdfViewer.customStampSettings.enableCustomStamp && this.pdfViewer.customStampSettings.isAddToMenu) {\n            this.stampAdded = true;\n          }\n\n          this.isAlreadyAdded = false;\n          stampModule.updateDeleteItems(stampObj.pageIndex, stampObj, stampObj.opacity);\n          stampModule.resetAnnotation();\n          stampModule.isNewStampAnnot = false;\n        }\n      }\n    }\n\n    if (this.isNewSignatureAdded) {\n      this.signatureCount++;\n      this.currentSignatureAnnot = null;\n      var signObject = obj;\n\n      if (isNullOrUndefined(signObject) && this.pdfViewer.selectedItems.annotations[0]) {\n        signObject = this.pdfViewer.selectedItems.annotations[0];\n      }\n\n      if (signObject) {\n        this.signatureAdded = true;\n        this.signatureModule.storeSignatureData(signObject.pageIndex, signObject); // eslint-disable-next-line\n\n        var bounds = {\n          left: signObject.bounds.x,\n          top: signObject.bounds.y,\n          width: signObject.bounds.width,\n          height: signObject.bounds.height\n        }; // eslint-disable-next-line max-len\n\n        this.pdfViewer.fireSignatureAdd(signObject.pageIndex, signObject.signatureName, signObject.shapeAnnotationType, bounds, signObject.opacity, signObject.strokeColor, signObject.thickness, this.signatureModule.saveImageString);\n      }\n\n      this.isNewSignatureAdded = false;\n    }\n\n    if (this.pdfViewer.annotationModule) {\n      var freeTextAnnotModule = this.pdfViewer.annotationModule.freeTextAnnotationModule;\n      var canvasPaddingLeft = 5,\n          canvasPaddingWidth = 10; // eslint-disable-next-line\n\n      if (freeTextAnnotModule.isNewFreeTextAnnot === true) {\n        var canvas = void 0; // eslint-disable-next-line max-len\n\n        if (evt.target && (evt.target.id.indexOf('_text') > -1 || evt.target.id.indexOf('_annotationCanvas') > -1 || evt.target.classList.contains('e-pv-hyperlink')) && this.pdfViewer.annotation) {\n          var pageIndex = this.pdfViewer.annotation.getEventPageNumber(evt);\n          var diagram = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n\n          if (diagram) {\n            var canvas1 = diagram.getBoundingClientRect();\n            var left = canvas1.x ? canvas1.x : canvas1.left;\n            var top_4 = canvas1.y ? canvas1.y : canvas1.top;\n            canvas = new Rect(left + canvasPaddingLeft, top_4 + canvasPaddingLeft, canvas1.width - canvasPaddingWidth, canvas1.height - canvasPaddingWidth);\n          }\n        }\n\n        if (touches) {\n          this.mouseX = touches[0].clientX;\n          this.mouseY = touches[0].clientY;\n        }\n\n        if (canvas && canvas.containsPoint({\n          x: this.mouseX,\n          y: this.mouseY\n        }) && freeTextAnnotModule.isNewAddedAnnot) {\n          var pageIndex = this.pdfViewer.annotation.getEventPageNumber(evt);\n\n          if (!this.pdfViewer.freeTextSettings.enableAutoFit) {\n            var zoomFactor = this.getZoomFactor();\n            var width = this.currentPosition.x + freeTextAnnotModule.defautWidth * zoomFactor;\n            var pageWidth = this.getPageWidth(pageIndex);\n\n            if (width >= pageWidth) {\n              this.currentPosition.x = pageWidth - freeTextAnnotModule.defautWidth * zoomFactor;\n              this.currentPosition.x <= 0 ? this.currentPosition.x = canvasPaddingLeft : this.currentPosition.x;\n              freeTextAnnotModule.defautWidth = freeTextAnnotModule.defautWidth * zoomFactor >= pageWidth ? pageWidth - canvasPaddingWidth : freeTextAnnotModule.defautWidth;\n            }\n          }\n\n          freeTextAnnotModule.addInuptElemet(this.currentPosition, null, pageIndex);\n\n          if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n            // eslint-disable-next-line\n            var annotModule = this.pdfViewer.toolbar.annotationToolbarModule;\n\n            if (!isBlazor()) {\n              annotModule.primaryToolbar.deSelectItem(annotModule.freeTextEditItem);\n            }\n          }\n\n          evt.preventDefault();\n          freeTextAnnotModule.isNewAddedAnnot = false;\n        }\n      }\n    }\n\n    var sourceElement = null;\n\n    if (obj) {\n      sourceElement = obj.wrapper.children[0];\n\n      if (sourceElement) {\n        target = obj;\n      }\n    }\n\n    if (!this.tool || this.tool && !this.tool.drawingObject) {\n      if (!isStamp) {\n        this.action = this.findToolToActivate(obj, this.currentPosition); // eslint-disable-next-line\n\n        if (obj && obj.annotationSettings && obj.annotationSettings.isLock) {\n          if (this.action === 'Select') {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Select', obj)) {\n              this.action = '';\n            }\n          }\n\n          if (this.action === 'Drag') {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Move', obj)) {\n              this.action = 'Select';\n            }\n          }\n\n          if (this.action === 'Rotate') {\n            this.action = 'Select';\n          } // eslint-disable-next-line max-len\n\n\n          if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' || this.action === 'ResizeSouth' || // eslint-disable-next-line max-len\n          this.action === 'ResizeNorth' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n            if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize', obj)) {\n              this.action = 'Select';\n            }\n          }\n        }\n\n        this.tool = this.getTool(this.action);\n\n        if (!this.tool) {\n          this.action = this.pdfViewer.tool || 'Select';\n          this.tool = this.getTool(this.action);\n        }\n      } else {\n        this.action = 'Select';\n        this.tool = this.getTool(this.action);\n      }\n    }\n\n    this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt);\n    this.eventArgs.position = this.currentPosition;\n\n    if (this.tool) {\n      this.isAnnotationMouseDown = false;\n      this.isFormFieldMouseDown = false;\n      this.isAnnotationMouseMove = false;\n      this.isFormFieldMouseMove = false;\n      this.tool.mouseDown(this.eventArgs);\n      this.isAnnotationDrawn = true;\n      this.signatureAdded = true;\n    }\n\n    if (this.pdfViewer.annotation) {\n      this.pdfViewer.annotation.onAnnotationMouseDown();\n    }\n\n    if (this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.formFields.length === 1) {\n      if (!isNullOrUndefined(this.pdfViewer.toolbar) && !isNullOrUndefined(this.pdfViewer.toolbar.formDesignerToolbarModule)) {\n        this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);\n      }\n    }\n\n    var signatureFieldAnnotation = this.pdfViewer.selectedItems.annotations.length === 1 ? this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0] + '_content'] : null;\n\n    if (!signatureFieldAnnotation) {\n      signatureFieldAnnotation = this.pdfViewer.selectedItems.annotations.length === 1 ? this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id] : null;\n    } // eslint-disable-next-line max-len\n\n\n    if (this.eventArgs && this.eventArgs.source && (this.eventArgs.source.formFieldAnnotationType || signatureFieldAnnotation) && !this.pdfViewer.designerMode) {\n      var currentObject = void 0;\n\n      if (signatureFieldAnnotation) {\n        currentObject = this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0]];\n      } else {\n        currentObject = this.eventArgs.source;\n      }\n\n      if (!currentObject) {\n        currentObject = this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function (el) {\n          return el.id === signatureFieldAnnotation.id;\n        })];\n      }\n\n      if (currentObject) {\n        // eslint-disable-next-line\n        var field = {\n          // eslint-disable-next-line max-len\n          name: currentObject.name,\n          id: currentObject.id,\n          fontFamily: currentObject.fontFamily,\n          fontSize: currentObject.fontSize,\n          fontStyle: currentObject.fontStyle,\n          // eslint-disable-next-line\n          color: currentObject.color,\n          value: currentObject.value,\n          type: currentObject.formFieldAnnotationType ? currentObject.formFieldAnnotationType : currentObject.type,\n          backgroundColor: currentObject.backgroundColor,\n          alignment: currentObject.alignment\n        };\n        var target_1 = document.getElementById(currentObject.id);\n        target_1 = target_1 ? target_1 : document.getElementById(currentObject.id + '_content_html_element') ? document.getElementById(currentObject.id + '_content_html_element').children[0].children[0] : null;\n\n        if (target_1) {\n          this.currentTarget = target_1;\n          this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', field, false, evt.button === 0);\n        }\n      }\n    }\n\n    this.initialEventArgs = {\n      source: this.eventArgs.source,\n      sourceWrapper: this.eventArgs.sourceWrapper\n    };\n    this.initialEventArgs.position = this.currentPosition;\n    this.initialEventArgs.info = this.eventArgs.info;\n    this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.exportAnnotationsAsObject = function () {\n    var _this = this;\n\n    if (this.pdfViewer.annotationModule) {\n      var isAnnotations = this.updateExportItem();\n\n      if (isAnnotations) {\n        return new Promise(function (resolve, reject) {\n          _this.createRequestForExportAnnotations(true, AnnotationDataFormat.Json).then(function (value) {\n            resolve(value);\n          });\n        });\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {string} type - The type.\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.getItemFromSessionStorage = function (type) {\n    if (this.isStorageExceed) {\n      return this.formFieldStorage[this.documentId + type];\n    } else {\n      return window.sessionStorage.getItem(this.documentId + type);\n    }\n  };\n  /**\n   * @param textDiv\n   * @param left\n   * @param top\n   * @param fontHeight\n   * @param width\n   * @param height\n   * @param isPrint\n   * @param textDiv\n   * @param left\n   * @param top\n   * @param fontHeight\n   * @param width\n   * @param height\n   * @param isPrint\n   * @param textDiv\n   * @param left\n   * @param top\n   * @param fontHeight\n   * @param width\n   * @param height\n   * @param isPrint\n   * @param textDiv\n   * @param left\n   * @param top\n   * @param fontHeight\n   * @param width\n   * @param height\n   * @param isPrint\n   * @param textDiv\n   * @param left\n   * @param top\n   * @param fontHeight\n   * @param width\n   * @param height\n   * @param isPrint\n   * @private\n   */\n  // eslint-disable-next-line max-len\n\n\n  PdfViewerBase.prototype.setStyleToTextDiv = function (textDiv, left, top, fontHeight, width, height, isPrint) {\n    var zoomvalue = this.getZoomFactor();\n\n    if (isPrint) {\n      zoomvalue = 1;\n      textDiv.style.position = 'absolute';\n    }\n\n    textDiv.style.left = left * zoomvalue + 'px';\n    textDiv.style.top = top * zoomvalue + 'px';\n    textDiv.style.height = height * zoomvalue + 'px';\n    textDiv.style.width = width * zoomvalue + 'px';\n    textDiv.style.margin = '0px';\n\n    if (fontHeight > 0) {\n      textDiv.style.fontSize = fontHeight * zoomvalue + 'px';\n    }\n  };\n  /**\n   * @param number\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.ConvertPointToPixel = function (number) {\n    return number * (96 / 72);\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.setItemInSessionStorage = function (formFieldsData, type) {\n    // eslint-disable-next-line\n    var formFieldsSize = Math.round(JSON.stringify(formFieldsData).length / 1024);\n\n    if (formFieldsSize > 4500) {\n      this.isStorageExceed = true;\n\n      if (this.pdfViewer.formFieldsModule) {\n        this.pdfViewer.formFieldsModule.clearFormFieldStorage();\n      }\n    }\n\n    if (this.isStorageExceed) {\n      this.formFieldStorage[this.documentId + type] = JSON.stringify(formFieldsData);\n    } else {\n      window.sessionStorage.setItem(this.documentId + type, JSON.stringify(formFieldsData));\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.exportFormFieldsAsObject = function () {\n    var _this = this;\n\n    if (this.pdfViewer.formFieldsModule) {\n      return new Promise(function (resolve, reject) {\n        _this.createRequestForExportFormfields(true).then(function (value) {\n          resolve(value);\n        });\n      });\n    }\n  };\n  /**\n   * @param importData\n   * @param annotationDataFormat\n   * @param isXfdf\n   * @param importData\n   * @param annotationDataFormat\n   * @param isXfdf\n   * @param importData\n   * @param annotationDataFormat\n   * @param isXfdf\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.importAnnotations = function (importData, annotationDataFormat, isXfdf) {\n    if (this.pdfViewer.annotationModule) {\n      this.createRequestForImportAnnotations(importData, annotationDataFormat, isXfdf);\n    }\n  };\n  /**\n   * @private\n   * @param {AnnotationDataFormat} annotationDataFormat - The annotationDataFormat.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.exportAnnotations = function (annotationDataFormat) {\n    if (this.pdfViewer.annotationModule) {\n      var isAnnotations = this.updateExportItem();\n\n      if (isAnnotations) {\n        this.createRequestForExportAnnotations(false, annotationDataFormat);\n      }\n    }\n  };\n  /**\n   * @param isObject\n   * @param annotationDataFormat\n   * @param isBase64String\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.createRequestForExportAnnotations = function (isObject, annotationDataFormat, isBase64String) {\n    var _this = this;\n\n    var proxy = null;\n    proxy = this;\n    var promise = new Promise(function (resolve, reject) {\n      // eslint-disable-next-line\n      var jsonObject;\n\n      if (annotationDataFormat === 'Json') {\n        // eslint-disable-next-line max-len\n        jsonObject = {\n          hashId: proxy.hashId,\n          action: 'ExportAnnotations',\n          pdfAnnotation: proxy.createAnnotationJsonData(),\n          elementId: proxy.pdfViewer.element.id,\n          annotationDataFormat: annotationDataFormat,\n          uniqueId: proxy.documentId\n        };\n        proxy.pdfViewer.fireExportStart(jsonObject.pdfAnnotation);\n      } else {\n        jsonObject = _this.constructJsonDownload();\n        jsonObject.annotationDataFormat = annotationDataFormat; // eslint-disable-next-line\n\n        jsonObject['action'] = 'ExportAnnotations';\n        proxy.pdfViewer.fireExportStart(jsonObject);\n      }\n\n      if (proxy.jsonDocumentId) {\n        // eslint-disable-next-line\n        jsonObject.document = proxy.jsonDocumentId;\n      }\n\n      var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.exportAnnotations;\n      proxy.exportAnnotationRequestHandler = new AjaxHandler(_this.pdfViewer);\n      proxy.exportAnnotationRequestHandler.url = url;\n      proxy.exportAnnotationRequestHandler.mode = true;\n      proxy.exportAnnotationRequestHandler.responseType = 'text';\n      proxy.exportAnnotationRequestHandler.send(jsonObject); // eslint-disable-next-line\n\n      proxy.exportAnnotationRequestHandler.onSuccess = function (result) {\n        // eslint-disable-next-line\n        var data = result.data;\n\n        if (data) {\n          if (typeof data === 'object') {\n            data = JSON.parse(data);\n          }\n\n          if (data) {\n            var isCancel = proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportAnnotations, data);\n\n            if (isObject || isBase64String && !isBlazor()) {\n              if (data.split('base64,')[1]) {\n                var exportObject = data; // eslint-disable-next-line \n\n                var annotationJson = atob(data.split(',')[1]);\n\n                if (isObject) {\n                  if (jsonObject.annotationDataFormat === 'Json') {\n                    exportObject = JSON.parse(annotationJson);\n                  } else {\n                    exportObject = annotationJson;\n                  }\n                }\n\n                if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                  proxy.pdfViewer.fireExportSuccess(exportObject, proxy.pdfViewer.exportAnnotationFileName);\n                } else {\n                  proxy.pdfViewer.fireExportSuccess(exportObject, proxy.pdfViewer.fileName);\n                }\n\n                proxy.updateDocumentAnnotationCollections();\n\n                if (isBase64String) {\n                  resolve(data);\n                } else {\n                  resolve(annotationJson);\n                }\n              } else {\n                // eslint-disable-next-line max-len\n                proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n              }\n            } else {\n              if (annotationDataFormat === 'Json') {\n                if (data.split('base64,')[1]) {\n                  if (!isCancel) {\n                    var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/json');\n\n                    if (Browser.isIE || Browser.info.name === 'edge') {\n                      if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                        // eslint-disable-next-line max-len\n                        window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.exportAnnotationFileName.split('.')[0] + '.json');\n                      } else {\n                        window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.json');\n                      }\n                    } else {\n                      proxy.downloadExportAnnotationJson(blobUrl);\n                    }\n\n                    proxy.updateDocumentAnnotationCollections();\n                  } else {\n                    return data;\n                  }\n                } else {\n                  if (isBlazor()) {\n                    var promise_2 = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_ExportFailed');\n\n                    promise_2.then(function (value) {\n                      proxy.openImportExportNotificationPopup(value);\n                    });\n                  } else {\n                    proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                  } // eslint-disable-next-line max-len\n\n\n                  proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                }\n              } else {\n                if (data.split('base64,')[1]) {\n                  if (!isCancel) {\n                    var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/vnd.adobe.xfdf');\n\n                    if (Browser.isIE || Browser.info.name === 'edge') {\n                      window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.xfdf');\n                    } else {\n                      proxy.downloadExportedXFdfAnnotation(blobUrl);\n                    }\n                  } else {\n                    return data;\n                  }\n                } else {\n                  if (isBlazor()) {\n                    var promise_3 = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_ExportFailed');\n\n                    promise_3.then(function (value) {\n                      proxy.openImportExportNotificationPopup(value);\n                    });\n                  } else {\n                    proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                  } // eslint-disable-next-line max-len\n\n\n                  proxy.pdfViewer.fireExportFailed(jsonObject, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                }\n              }\n            }\n          }\n\n          if (typeof data !== 'string') {\n            try {\n              if (typeof data === 'string') {\n                proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.exportAnnotations);\n                data = null;\n              }\n            } catch (error) {\n              // eslint-disable-next-line max-len\n              proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n              proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.exportAnnotations);\n              data = null;\n            }\n          }\n        } else {\n          var fileName = void 0;\n\n          if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n            fileName = proxy.pdfViewer.exportAnnotationFileName;\n          } else {\n            fileName = proxy.pdfViewer.fileName;\n          }\n\n          proxy.pdfViewer.fireExportSuccess('Exported data saved in server side successfully', fileName);\n        }\n      }; // eslint-disable-next-line\n\n\n      proxy.exportAnnotationRequestHandler.onFailure = function (result) {\n        proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, result.statusText);\n      }; // eslint-disable-next-line\n\n\n      proxy.exportAnnotationRequestHandler.onError = function (result) {\n        proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, result.statusText);\n      };\n    });\n\n    if (isObject || isBase64String) {\n      return promise;\n    } else {\n      return true;\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.createRequestForImportAnnotations = function (importData, annotationDataFormat, isXfdf) {\n    var jsonObject;\n    var proxy = null;\n    proxy = this;\n\n    if (typeof importData === 'string' && annotationDataFormat === 'Json' && importData.indexOf(\".json\") === -1) {\n      importData = importData.split(',')[1] ? importData.split(',')[1] : importData.split(',')[0];\n      importData = JSON.parse(decodeURIComponent(escape(atob(importData))));\n    }\n\n    if (typeof importData === 'object') {\n      if (!isXfdf) {\n        this.isJsonImported = true;\n      } else {\n        this.isJsonImported = false;\n      }\n\n      proxy.reRenderAnnotations(importData.pdfAnnotation);\n      proxy.isImportedAnnotation = true;\n      proxy.updateDocumentEditedProperty(true);\n\n      if (!this.isAddAnnotation) {\n        proxy.pdfViewer.fireImportSuccess(importData.pdfAnnotation);\n      }\n    } else {\n      proxy.pdfViewer.fireImportStart(importData);\n\n      if (annotationDataFormat === 'Json') {\n        // eslint-disable-next-line max-len\n        jsonObject = {\n          fileName: importData,\n          action: 'ImportAnnotations',\n          elementId: proxy.pdfViewer.element.id,\n          hashId: proxy.hashId,\n          uniqueId: proxy.documentId\n        };\n      } else {\n        if (!isXfdf) {\n          importData = btoa(importData);\n        }\n\n        importData = importData.split(',')[1] ? importData.split(',')[1] : importData.split(',')[0]; // eslint-disable-next-line max-len\n\n        jsonObject = {\n          importedData: importData,\n          action: 'ImportAnnotations',\n          elementId: proxy.pdfViewer.element.id,\n          hashId: proxy.hashId,\n          uniqueId: proxy.documentId\n        };\n      }\n\n      if (proxy.jsonDocumentId) {\n        // eslint-disable-next-line\n        jsonObject.document = proxy.jsonDocumentId;\n      }\n\n      var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.importAnnotations;\n      proxy.importAnnotationRequestHandler = new AjaxHandler(proxy.pdfViewer);\n      proxy.importAnnotationRequestHandler.url = url;\n      proxy.importAnnotationRequestHandler.mode = true;\n      proxy.importAnnotationRequestHandler.responseType = 'text';\n      proxy.importAnnotationRequestHandler.send(jsonObject); // eslint-disable-next-line\n\n      proxy.importAnnotationRequestHandler.onSuccess = function (result) {\n        // eslint-disable-next-line\n        var data = result.data;\n\n        if (data) {\n          if (typeof data !== 'object') {\n            try {\n              data = JSON.parse(data);\n\n              if (typeof data !== 'object') {\n                proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importAnnotations);\n                data = null;\n              }\n            } catch (error) {\n              proxy.pdfViewer.fireImportFailed(importData, proxy.pdfViewer.localeObj.getConstant('File not found'));\n\n              if (isBlazor()) {\n                var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n\n                promise.then(function (value) {\n                  proxy.openImportExportNotificationPopup(value);\n                });\n              } else {\n                proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n              }\n\n              proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importAnnotations);\n              data = null;\n            }\n          }\n\n          if (data) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importAnnotations, data);\n\n            if (data.pdfAnnotation) {\n              proxy.reRenderAnnotations(data.pdfAnnotation);\n              proxy.isImportedAnnotation = true;\n              proxy.updateDocumentEditedProperty(true);\n              proxy.pdfViewer.fireImportSuccess(data.pdfAnnotation);\n            }\n          }\n        }\n      }; // eslint-disable-next-line\n\n\n      proxy.importAnnotationRequestHandler.onFailure = function (result) {\n        proxy.pdfViewer.fireImportFailed(importData, result.statusText);\n      }; // eslint-disable-next-line\n\n\n      proxy.importAnnotationRequestHandler.onError = function (result) {\n        proxy.pdfViewer.fireImportFailed(importData, result.statusText);\n      };\n    }\n  };\n  /**\n   * @private\n   * @param {string} errorDetails - The error details.\n   * @returns {void}\n   */\n\n\n  PdfViewerBase.prototype.openImportExportNotificationPopup = function (errorDetails) {\n    if (this.pdfViewer.showNotificationDialog) {\n      this.textLayer.createNotificationPopup(errorDetails);\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.reRenderAnnotations = function (annotation) {\n    if (annotation) {\n      this.isImportAction = true;\n      var count = void 0;\n\n      if (this.isImportedAnnotation) {\n        this.importedAnnotation = this.combineImportedData(this.importedAnnotation, annotation);\n      } else {\n        if (this.pageCount > 0) {\n          this.importedAnnotation = annotation;\n        }\n      }\n\n      if (!this.isImportedAnnotation) {\n        count = 0;\n      }\n\n      for (var i = 0; i < this.pageCount; i++) {\n        if (annotation[i]) {\n          // eslint-disable-next-line\n          var importPageCollections = []; // eslint-disable-next-line\n\n          var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup'); // eslint-disable-next-line\n\n          var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape'); // eslint-disable-next-line\n\n          var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure'); // eslint-disable-next-line\n\n          var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp'); // eslint-disable-next-line\n\n          var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky'); // eslint-disable-next-line\n\n          var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext'); // eslint-disable-next-line\n\n          var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign'); // eslint-disable-next-line\n\n          var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n\n          if (this.isStorageExceed) {\n            textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n            shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n            measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n            stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n            stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n            freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n            inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n          }\n\n          var annotationCanvas = this.getElement('_annotationCanvas_' + i);\n\n          if (annotationCanvas) {\n            this.drawPageAnnotations(annotation[i], i);\n\n            if (this.isImportedAnnotation) {\n              var isAdded = false;\n\n              for (var j = 0; j < this.annotationPageList.length; j++) {\n                if (this.annotationPageList[j] === i) {\n                  isAdded = true;\n                }\n              }\n\n              if (isAdded) {\n                this.annotationPageList[count] = i;\n                count = count + 1;\n              }\n            } else {\n              this.annotationPageList[count] = i;\n              count = count + 1;\n            }\n          }\n\n          if (annotation[i].textMarkupAnnotation && annotation[i].textMarkupAnnotation.length !== 0) {\n            if (textMarkupObject) {\n              var annotObject = JSON.parse(textMarkupObject); // eslint-disable-next-line max-len\n\n              annotation[i].textMarkupAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].textMarkupAnnotation, i);\n            }\n\n            annotation[i].textMarkupAnnotation = this.checkAnnotationCommentsCollections(annotation[i].textMarkupAnnotation, i);\n            importPageCollections.textMarkupAnnotation = annotation[i].textMarkupAnnotation;\n\n            if (annotation[i].textMarkupAnnotation.length !== 0) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].textMarkupAnnotation, i);\n\n              for (var j = 0; j < annotation[i].textMarkupAnnotation.length; j++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(annotation[i].textMarkupAnnotation[j], i));\n              }\n            }\n          }\n\n          if (annotation[i].shapeAnnotation && annotation[i].shapeAnnotation.length !== 0) {\n            if (shapeObject) {\n              var annotObject = JSON.parse(shapeObject);\n              annotation[i].shapeAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].shapeAnnotation, i);\n            }\n\n            annotation[i].shapeAnnotation = this.checkAnnotationCommentsCollections(annotation[i].shapeAnnotation, i);\n            importPageCollections.shapeAnnotation = annotation[i].shapeAnnotation;\n\n            if (annotation[i].shapeAnnotation.length !== 0) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].shapeAnnotation, i);\n\n              for (var j = 0; j < annotation[i].shapeAnnotation.length; j++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(annotation[i].shapeAnnotation[j], i));\n              }\n            }\n          }\n\n          if (annotation[i].measureShapeAnnotation && annotation[i].measureShapeAnnotation.length !== 0) {\n            if (measureShapeObject) {\n              var annotObject = JSON.parse(measureShapeObject); // eslint-disable-next-line max-len\n\n              annotation[i].measureShapeAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].measureShapeAnnotation, i);\n            } // eslint-disable-next-line max-len\n\n\n            annotation[i].measureShapeAnnotation = this.checkAnnotationCommentsCollections(annotation[i].measureShapeAnnotation, i);\n            importPageCollections.measureShapeAnnotation = annotation[i].measureShapeAnnotation;\n\n            if (annotation[i].measureShapeAnnotation.length !== 0) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].measureShapeAnnotation, i);\n\n              for (var j = 0; j < annotation[i].measureShapeAnnotation.length; j++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(annotation[i].measureShapeAnnotation[j], i));\n              }\n            }\n          }\n\n          if (annotation[i].stampAnnotations && annotation[i].stampAnnotations.length !== 0) {\n            if (stampObject) {\n              var annotObject = JSON.parse(stampObject); // eslint-disable-next-line max-len\n\n              annotation[i].stampAnnotations = this.checkAnnotationCollections(annotObject, annotation[i].stampAnnotations, i);\n            }\n\n            annotation[i].stampAnnotations = this.checkAnnotationCommentsCollections(annotation[i].stampAnnotations, i);\n            importPageCollections.stampAnnotations = annotation[i].stampAnnotations;\n\n            if (annotation[i].stampAnnotations.length !== 0) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].stampAnnotations, i);\n\n              for (var j = 0; j < annotation[i].stampAnnotations.length; j++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(annotation[i].stampAnnotations[j], i));\n              }\n            }\n          }\n\n          if (annotation[i].stickyNotesAnnotation && annotation[i].stickyNotesAnnotation.length !== 0) {\n            if (stickyObject) {\n              var annotObject = JSON.parse(stickyObject); // eslint-disable-next-line max-len\n\n              annotation[i].stickyNotesAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].stickyNotesAnnotation, i);\n            } // eslint-disable-next-line max-len\n\n\n            annotation[i].stickyNotesAnnotation = this.checkAnnotationCommentsCollections(annotation[i].stickyNotesAnnotation, i);\n            importPageCollections.stickyNotesAnnotation = annotation[i].stickyNotesAnnotation;\n\n            if (annotation[i].stickyNotesAnnotation.length !== 0) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].stickyNotesAnnotation, i);\n\n              for (var j = 0; j < annotation[i].stickyNotesAnnotation.length; j++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(annotation[i].stickyNotesAnnotation[j], i));\n              }\n            }\n          }\n\n          if (annotation[i].freeTextAnnotation && annotation[i].freeTextAnnotation.length !== 0) {\n            if (freeTextObject) {\n              var annotObject = JSON.parse(freeTextObject); // eslint-disable-next-line max-len\n\n              annotation[i].freeTextAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].freeTextAnnotation, i);\n            }\n\n            annotation[i].freeTextAnnotation = this.checkAnnotationCommentsCollections(annotation[i].freeTextAnnotation, i);\n            importPageCollections.freeTextAnnotation = annotation[i].freeTextAnnotation;\n\n            if (annotation[i].freeTextAnnotation.length !== 0) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].freeTextAnnotation, i);\n\n              for (var j = 0; j < annotation[i].freeTextAnnotation.length; j++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotation[i].freeTextAnnotation[j], i));\n              }\n            }\n          }\n\n          if (annotation[i].signatureAnnotation && annotation[i].signatureAnnotation.length !== 0) {\n            if (signatureObject) {\n              var annotObject = JSON.parse(signatureObject); // eslint-disable-next-line max-len\n\n              annotation[i].signatureAnnotation = this.checkSignatureCollections(annotObject, annotation[i].signatureAnnotation, i);\n            }\n\n            importPageCollections.signatureAnnotation = annotation[i].signatureAnnotation;\n\n            if (annotation[i].signatureAnnotation.length !== 0) {\n              for (var j = 0; j < annotation[i].signatureAnnotation.length; j++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(annotation[i].signatureAnnotation[j], i), true);\n              }\n            }\n          }\n\n          if (annotation[i].signatureInkAnnotation && annotation[i].signatureInkAnnotation.length !== 0) {\n            if (inkObject) {\n              var annotObject = JSON.parse(inkObject); // eslint-disable-next-line max-len\n\n              annotation[i].signatureInkAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].signatureInkAnnotation, i);\n            } // eslint-disable-next-line max-len\n\n\n            annotation[i].signatureInkAnnotation = this.checkAnnotationCommentsCollections(annotation[i].signatureInkAnnotation, i);\n            importPageCollections.signatureInkAnnotation = annotation[i].signatureInkAnnotation;\n\n            if (annotation[i].signatureInkAnnotation.length !== 0) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].signatureInkAnnotation, i);\n\n              for (var j = 0; j < annotation[i].signatureInkAnnotation.length; j++) {// eslint-disable-next-line max-len\n                // this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotation[i].freeTextAnnotation[j], i));\n              }\n            }\n          }\n\n          this.updateImportedAnnotationsInDocumentCollections(importPageCollections, i);\n        }\n      }\n\n      if (this.pageCount > 0) {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule.stickyNotesAnnotationModule && !this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered) {\n          // eslint-disable-next-line\n          var annotationCollection = this.createAnnotationsCollection();\n\n          if (annotationCollection) {\n            // eslint-disable-next-line max-len\n            this.documentAnnotationCollections = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation, annotationCollection);\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param importedAnnotations\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.updateImportedAnnotationsInDocumentCollections = function (importedAnnotations, pageNumber) {\n    if (this.documentAnnotationCollections) {\n      // eslint-disable-next-line\n      var documentAnnotationCollection = this.documentAnnotationCollections; // eslint-disable-next-line\n\n      var pageCollections = documentAnnotationCollection[pageNumber];\n\n      if (pageCollections) {\n        if (importedAnnotations.textMarkupAnnotation && importedAnnotations.textMarkupAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.textMarkupAnnotation.length; i++) {\n            pageCollections.textMarkupAnnotation.push(importedAnnotations.textMarkupAnnotation[i]);\n          }\n        }\n\n        if (importedAnnotations.shapeAnnotation && importedAnnotations.shapeAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.shapeAnnotation.length; i++) {\n            pageCollections.shapeAnnotation.push(importedAnnotations.shapeAnnotation[i]);\n          }\n        }\n\n        if (importedAnnotations.measureShapeAnnotation && importedAnnotations.measureShapeAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.measureShapeAnnotation.length; i++) {\n            pageCollections.measureShapeAnnotation.push(importedAnnotations.measureShapeAnnotation[i]);\n          }\n        }\n\n        if (importedAnnotations.stampAnnotations && importedAnnotations.stampAnnotations.length !== 0) {\n          for (var i = 0; i < importedAnnotations.stampAnnotations.length; i++) {\n            pageCollections.stampAnnotations.push(importedAnnotations.stampAnnotations[i]);\n          }\n        }\n\n        if (importedAnnotations.stickyNotesAnnotation && importedAnnotations.stickyNotesAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.stickyNotesAnnotation.length; i++) {\n            pageCollections.stickyNotesAnnotation.push(importedAnnotations.stickyNotesAnnotation[i]);\n          }\n        }\n\n        if (importedAnnotations.freeTextAnnotation && importedAnnotations.freeTextAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.freeTextAnnotation.length; i++) {\n            pageCollections.freeTextAnnotation.push(importedAnnotations.freeTextAnnotation[i]);\n          }\n        }\n\n        if (importedAnnotations.signatureAnnotation && importedAnnotations.signatureAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.signatureAnnotation.length; i++) {\n            pageCollections.signatureAnnotation.push(importedAnnotations.signatureAnnotation[i]);\n          }\n        }\n\n        if (importedAnnotations.signatureInkAnnotation && importedAnnotations.signatureInkAnnotation.length !== 0) {\n          for (var i = 0; i < importedAnnotations.signatureInkAnnotation.length; i++) {\n            pageCollections.signatureInkAnnotation.push(importedAnnotations.signatureInkAnnotation[i]);\n          }\n        }\n\n        this.documentAnnotationCollections[pageNumber] = pageCollections;\n      }\n    }\n  };\n  /**\n   * @param pageIndex\n   * @param pageCollections\n   * @param pageIndex\n   * @param pageCollections\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.checkDocumentCollectionData = function (pageIndex, pageCollections) {\n    // eslint-disable-next-line\n    var importPageCollections;\n\n    if (pageCollections) {\n      importPageCollections = pageCollections;\n    } else if (this.documentAnnotationCollections) {\n      // eslint-disable-next-line\n      var documetCollections = this.documentAnnotationCollections[pageIndex];\n\n      if (documetCollections) {\n        importPageCollections = cloneObject(documetCollections);\n      }\n    }\n\n    if (importPageCollections) {\n      // eslint-disable-next-line\n      var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup'); // eslint-disable-next-line\n\n      var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape'); // eslint-disable-next-line\n\n      var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure'); // eslint-disable-next-line\n\n      var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp'); // eslint-disable-next-line\n\n      var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky'); // eslint-disable-next-line\n\n      var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext'); // eslint-disable-next-line\n\n      var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink'); // eslint-disable-next-line\n\n      var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n\n      if (this.isStorageExceed) {\n        textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n        shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n        measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n        stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n        stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n        freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n        inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n        signatureObject = this.annotationStorage[this.documentId + '_annotations_sign'];\n      }\n\n      if (importPageCollections.textMarkupAnnotation && importPageCollections.textMarkupAnnotation.length !== 0) {\n        if (textMarkupObject) {\n          var annotationObject = JSON.parse(textMarkupObject);\n\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.textMarkupAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.textMarkupAnnotation, pageIndex);\n          }\n        }\n      }\n\n      if (importPageCollections.shapeAnnotation && importPageCollections.shapeAnnotation.length !== 0) {\n        if (shapeObject) {\n          var annotationObject = JSON.parse(shapeObject);\n\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.shapeAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.shapeAnnotation, pageIndex);\n          }\n        }\n      }\n\n      if (importPageCollections.measureShapeAnnotation && importPageCollections.measureShapeAnnotation.length !== 0) {\n        if (measureShapeObject) {\n          var annotationObject = JSON.parse(measureShapeObject);\n\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.measureShapeAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.measureShapeAnnotation, pageIndex);\n          }\n        }\n      }\n\n      if (importPageCollections.stampAnnotations && importPageCollections.stampAnnotations.length !== 0) {\n        if (stampObject) {\n          var annotationObject = JSON.parse(stampObject);\n\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.stampAnnotations = this.findImportedAnnotations(annotationObject, importPageCollections.stampAnnotations, pageIndex);\n          }\n        }\n      }\n\n      if (importPageCollections.stickyNotesAnnotation && importPageCollections.stickyNotesAnnotation.length !== 0) {\n        if (stickyObject) {\n          var annotationObject = JSON.parse(stickyObject);\n\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.stickyNotesAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.stickyNotesAnnotation, pageIndex);\n          }\n        }\n      }\n\n      if (importPageCollections.freeTextAnnotation && importPageCollections.freeTextAnnotation.length !== 0) {\n        if (freeTextObject) {\n          var annotationObject = JSON.parse(freeTextObject);\n\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.freeTextAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.freeTextAnnotation, pageIndex);\n          }\n        }\n      }\n\n      if (importPageCollections.signatureInkAnnotation && importPageCollections.signatureInkAnnotation.length !== 0) {\n        if (inkObject) {\n          var annotationObject = JSON.parse(inkObject);\n\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.signatureInkAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.signatureInkAnnotation, pageIndex);\n          }\n        }\n      }\n\n      if (importPageCollections.signatureAnnotation && importPageCollections.signatureAnnotation.length !== 0) {\n        if (signatureObject) {\n          var annotationObject = JSON.parse(inkObject);\n\n          if (annotationObject) {\n            // eslint-disable-next-line max-len\n            importPageCollections.signatureAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.signatureAnnotation, pageIndex);\n          }\n        }\n      }\n\n      return importPageCollections;\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.findImportedAnnotations = function (annotationCollection, importAnnotations, pageNumber) {\n    // eslint-disable-next-line\n    var pageCollections = null;\n\n    for (var a = 0; a < annotationCollection.length; a++) {\n      if (annotationCollection[a].pageIndex === pageNumber) {\n        pageCollections = annotationCollection[a].annotations;\n      }\n    }\n\n    if (pageCollections) {\n      for (var i = 0; i < pageCollections.length; i++) {\n        for (var j = 0; j < importAnnotations.length; j++) {\n          if (pageCollections[i].annotName === importAnnotations[j].AnnotName) {\n            importAnnotations.splice(j, 1);\n            j = j - 1;\n          }\n        }\n      }\n    }\n\n    pageCollections = null;\n    return importAnnotations;\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.drawPageAnnotations = function (annotation, pageIndex, isNewlyAdded) {\n    if (isNewlyAdded) {\n      annotation = annotation[pageIndex];\n    }\n\n    if (annotation) {\n      if (annotation.textMarkupAnnotation && annotation.textMarkupAnnotation.length !== 0) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n\n        if (this.isStorageExceed) {\n          storeObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n        }\n\n        if (storeObject) {\n          var annotObject = JSON.parse(storeObject);\n\n          if (annotObject) {\n            // eslint-disable-next-line max-len\n            annotation.textMarkupAnnotation = this.checkAnnotationCollections(annotObject, annotation.textMarkupAnnotation, pageIndex);\n          }\n        }\n\n        annotation.textMarkupAnnotation = this.checkAnnotationCommentsCollections(annotation.textMarkupAnnotation, pageIndex);\n\n        if (annotation.textMarkupAnnotation.length !== 0) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.renderAnnotations(pageIndex, null, null, annotation.textMarkupAnnotation, null, true);\n        }\n      }\n\n      if (annotation.shapeAnnotation && annotation.shapeAnnotation.length !== 0) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n\n        if (this.isStorageExceed) {\n          storeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n        }\n\n        if (storeObject) {\n          var annotObject = JSON.parse(storeObject);\n          annotation.shapeAnnotation = this.checkAnnotationCollections(annotObject, annotation.shapeAnnotation, pageIndex);\n        }\n\n        annotation.shapeAnnotation = this.checkAnnotationCommentsCollections(annotation.shapeAnnotation, pageIndex);\n\n        if (annotation.shapeAnnotation.length !== 0) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.renderAnnotations(pageIndex, annotation.shapeAnnotation, null, null, null, true);\n        }\n      }\n\n      if (annotation.measureShapeAnnotation && annotation.measureShapeAnnotation.length !== 0) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n\n        if (this.isStorageExceed) {\n          storeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n        }\n\n        if (storeObject) {\n          var annotObject = JSON.parse(storeObject); // eslint-disable-next-line max-len\n\n          annotation.measureShapeAnnotation = this.checkAnnotationCollections(annotObject, annotation.measureShapeAnnotation, pageIndex);\n        }\n\n        annotation.measureShapeAnnotation = this.checkAnnotationCommentsCollections(annotation.measureShapeAnnotation, pageIndex);\n\n        if (annotation.measureShapeAnnotation.length !== 0) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.renderAnnotations(pageIndex, null, annotation.measureShapeAnnotation, null, null, true);\n        }\n      }\n\n      if (annotation.stampAnnotations && annotation.stampAnnotations.length !== 0) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n\n        if (this.isStorageExceed) {\n          storeObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n        }\n\n        if (storeObject) {\n          var annotObject = JSON.parse(storeObject);\n          annotation.stampAnnotations = this.checkAnnotationCollections(annotObject, annotation.stampAnnotations, pageIndex);\n        }\n\n        annotation.stampAnnotations = this.checkAnnotationCommentsCollections(annotation.stampAnnotations, pageIndex);\n\n        if (annotation.stampAnnotations.length !== 0) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(annotation.stampAnnotations, pageIndex, null, true);\n        }\n      }\n\n      if (annotation.stickyNotesAnnotation && annotation.stickyNotesAnnotation.length !== 0) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n\n        if (this.isStorageExceed) {\n          storeObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n        }\n\n        if (storeObject) {\n          var annotObject = JSON.parse(storeObject); // eslint-disable-next-line max-len\n\n          annotation.stickyNotesAnnotation = this.checkAnnotationCollections(annotObject, annotation.stickyNotesAnnotation, pageIndex);\n        }\n\n        annotation.stickyNotesAnnotation = this.checkAnnotationCommentsCollections(annotation.stickyNotesAnnotation, pageIndex);\n\n        if (annotation.stickyNotesAnnotation.length !== 0) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(annotation.stickyNotesAnnotation, pageIndex);\n        }\n      }\n\n      if (annotation.freeTextAnnotation && annotation.freeTextAnnotation.length !== 0) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n\n        if (this.isStorageExceed) {\n          storeObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n        }\n\n        if (storeObject) {\n          var annotObject = JSON.parse(storeObject);\n          annotation.freeTextAnnotation = this.checkAnnotationCollections(annotObject, annotation.freeTextAnnotation, pageIndex);\n        }\n\n        annotation.freeTextAnnotation = this.checkAnnotationCommentsCollections(annotation.freeTextAnnotation, pageIndex);\n\n        if (annotation.freeTextAnnotation.length !== 0) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(annotation.freeTextAnnotation, pageIndex, true);\n        }\n      }\n\n      if (annotation.signatureAnnotation && annotation.signatureAnnotation.length !== 0) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n        var annotObject = JSON.parse(storeObject);\n\n        if (annotObject) {\n          annotation.signatureAnnotation = this.checkSignatureCollections(annotObject, annotation.signatureAnnotation, pageIndex);\n        }\n\n        this.signatureModule.renderExistingSignature(annotation.signatureAnnotation, pageIndex, true);\n      }\n\n      if (annotation.signatureInkAnnotation && annotation.signatureInkAnnotation.length !== 0) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n\n        if (this.isStorageExceed) {\n          storeObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n        }\n\n        if (storeObject) {\n          var annotObject = JSON.parse(storeObject); // eslint-disable-next-line max-len\n\n          annotation.signatureInkAnnotation = this.checkAnnotationCollections(annotObject, annotation.signatureInkAnnotation, pageIndex);\n        }\n\n        annotation.signatureInkAnnotation = this.checkAnnotationCommentsCollections(annotation.signatureInkAnnotation, pageIndex);\n\n        if (annotation.signatureInkAnnotation.length !== 0) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(annotation.signatureInkAnnotation, pageIndex, true);\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.checkSignatureCollections = function (annotationCollection, annotation, pageNumber) {\n    // eslint-disable-next-line\n    var pageCollections = null;\n\n    for (var a = 0; a < annotationCollection.length; a++) {\n      if (annotationCollection[a].pageIndex === pageNumber) {\n        pageCollections = annotationCollection[a].annotations;\n      }\n    }\n\n    if (pageCollections) {\n      for (var i = 0; i < pageCollections.length; i++) {\n        for (var j = 0; j < annotation.length; j++) {\n          if (pageCollections[i].signatureName === annotation[j].SignatureName) {\n            annotation.splice(j, 1);\n            j = j - 1;\n          }\n        }\n      }\n    }\n\n    pageCollections = null;\n    return annotation;\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.checkAnnotationCollections = function (annotationCollection, annotation, pageNumber) {\n    // eslint-disable-next-line\n    var pageCollections = null;\n\n    for (var a = 0; a < annotationCollection.length; a++) {\n      if (annotationCollection[a].pageIndex === pageNumber) {\n        pageCollections = annotationCollection[a].annotations;\n      }\n    }\n\n    if (pageCollections) {\n      for (var i = 0; i < pageCollections.length; i++) {\n        for (var j = 0; j < annotation.length; j++) {\n          if (pageCollections[i].annotName === annotation[j].AnnotName) {\n            annotation.splice(j, 1);\n            j = j - 1;\n          }\n        }\n      }\n    }\n\n    pageCollections = null;\n    return annotation;\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.checkAnnotationCommentsCollections = function (annotation, pageNumber) {\n    if (this.annotationComments) {\n      // eslint-disable-next-line\n      var annotationCollections = this.annotationComments[pageNumber];\n      annotationCollections = this.selectAnnotationCollections(annotationCollections);\n\n      if (annotationCollections) {\n        for (var i = 0; i < annotationCollections.length; i++) {\n          for (var j = 0; j < annotation.length; j++) {\n            if (annotationCollections[i].AnnotName === annotation[j].AnnotName) {\n              annotation.splice(j, 1);\n              j = j - 1;\n            }\n          }\n        }\n      }\n\n      annotationCollections = null;\n    }\n\n    return annotation;\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.selectAnnotationCollections = function (pageAnnotations) {\n    // eslint-disable-next-line\n    var pageCollections = [];\n\n    if (pageAnnotations) {\n      if (pageAnnotations.textMarkupAnnotation && pageAnnotations.textMarkupAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.textMarkupAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.textMarkupAnnotation[i]);\n        }\n      }\n\n      if (pageAnnotations.shapeAnnotation && pageAnnotations.shapeAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.shapeAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.shapeAnnotation[i]);\n        }\n      }\n\n      if (pageAnnotations.measureShapeAnnotation && pageAnnotations.measureShapeAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.measureShapeAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.measureShapeAnnotation[i]);\n        }\n      }\n\n      if (pageAnnotations.stampAnnotations && pageAnnotations.stampAnnotations.length !== 0) {\n        for (var i = 0; i < pageAnnotations.stampAnnotations.length; i++) {\n          pageCollections.push(pageAnnotations.stampAnnotations[i]);\n        }\n      }\n\n      if (pageAnnotations.stickyNotesAnnotation && pageAnnotations.stickyNotesAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.stickyNotesAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.stickyNotesAnnotation[i]);\n        }\n      }\n\n      if (pageAnnotations.freeTextAnnotation && pageAnnotations.freeTextAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.freeTextAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.freeTextAnnotation[i]);\n        }\n      }\n\n      if (pageAnnotations.signatureInkAnnotation && pageAnnotations.signatureInkAnnotation.length !== 0) {\n        for (var i = 0; i < pageAnnotations.signatureInkAnnotation.length; i++) {\n          pageCollections.push(pageAnnotations.signatureInkAnnotation[i]);\n        }\n      }\n    }\n\n    return pageCollections;\n  };\n\n  PdfViewerBase.prototype.saveImportedAnnotations = function () {\n    // eslint-disable-next-line\n    var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup'); // eslint-disable-next-line\n\n    var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape'); // eslint-disable-next-line\n\n    var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure'); // eslint-disable-next-line\n\n    var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp'); // eslint-disable-next-line\n\n    var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky'); // eslint-disable-next-line\n\n    var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext'); // eslint-disable-next-line\n\n    var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink'); // eslint-disable-next-line\n\n    var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n\n    if (this.isStorageExceed) {\n      textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n      shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n      measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n      stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n      stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n      freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n      inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n      signatureObject = this.annotationStorage[this.documentId + '_annotations_sign'];\n    } // eslint-disable-next-line max-len\n\n\n    this.downloadCollections = {\n      textMarkupObject: textMarkupObject,\n      shapeObject: shapeObject,\n      measureShapeObject: measureShapeObject,\n      stampObject: stampObject,\n      stickyObject: stickyObject,\n      freeTextObject: freeTextObject,\n      inkObject: inkObject,\n      signatureObject: signatureObject\n    };\n\n    if (this.documentAnnotationCollections) {\n      for (var i = 0; i < this.pageCount; i++) {\n        if (this.documentAnnotationCollections[i]) {\n          // eslint-disable-next-line\n          var pageCollections = cloneObject(this.documentAnnotationCollections[i]);\n          pageCollections = this.checkDocumentCollectionData(i, pageCollections);\n          this.savePageAnnotations(pageCollections, i);\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.savePageAnnotations = function (annotation, pageIndex) {\n    if (annotation.textMarkupAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.textMarkupAnnotation.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(annotation.textMarkupAnnotation[s], pageIndex);\n      }\n    }\n\n    if (annotation.shapeAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.shapeAnnotation.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(annotation.shapeAnnotation[s], pageIndex);\n      }\n    }\n\n    if (annotation.measureShapeAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.measureShapeAnnotation.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(annotation.measureShapeAnnotation[s], pageIndex);\n      }\n    }\n\n    if (annotation.stampAnnotations.length !== 0) {\n      for (var s = 0; s < annotation.stampAnnotations.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(annotation.stampAnnotations[s], pageIndex);\n      }\n    }\n\n    if (annotation.stickyNotesAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.stickyNotesAnnotation.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(annotation.stickyNotesAnnotation[s], pageIndex);\n      }\n    }\n\n    if (annotation.freeTextAnnotation.length !== 0) {\n      for (var s = 0; s < annotation.freeTextAnnotation.length; s++) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(annotation.freeTextAnnotation[s], pageIndex);\n      }\n    }\n  };\n\n  PdfViewerBase.prototype.updateDocumentAnnotationCollections = function () {\n    window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n    window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n\n    if (this.downloadCollections) {\n      if (this.isStorageExceed) {\n        this.annotationStorage[this.documentId + '_annotations_textMarkup'] = this.downloadCollections.textMarkupObject;\n        this.annotationStorage[this.documentId + '_annotations_shape'] = this.downloadCollections.shapeObject;\n        this.annotationStorage[this.documentId + '_annotations_shape_measure'] = this.downloadCollections.measureShapeObject;\n        this.annotationStorage[this.documentId + '_annotations_stamp'] = this.downloadCollections.stampObject;\n        this.annotationStorage[this.documentId + '_annotations_sticky'] = this.downloadCollections.stickyObject;\n        this.annotationStorage[this.documentId + '_annotations_freetext'] = this.downloadCollections.freeTextObject;\n        this.annotationStorage[this.documentId + '_annotations_ink'] = this.downloadCollections.inkObject;\n      } else {\n        if (this.downloadCollections.textMarkupObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_textMarkup', this.downloadCollections.textMarkupObject);\n        }\n\n        if (this.downloadCollections.shapeObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_shape', this.downloadCollections.shapeObject);\n        }\n\n        if (this.downloadCollections.measureShapeObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_shape_measure', this.downloadCollections.measureShapeObject);\n        }\n\n        if (this.downloadCollections.stampObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_stamp', this.downloadCollections.stampObject);\n        }\n\n        if (this.downloadCollections.stickyObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_sticky', this.downloadCollections.stickyObject);\n        }\n\n        if (this.downloadCollections.freeTextObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_freetext', this.downloadCollections.freeTextObject);\n        }\n\n        if (this.downloadCollections.inkObject) {\n          window.sessionStorage.setItem(this.documentId + '_annotations_ink', this.downloadCollections.inkObject);\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.createAnnotationJsonData = function () {\n    // eslint-disable-next-line\n    var annotationCollection = {};\n    var textMarkupAnnotationCollection;\n    var shapeAnnotations;\n    var calibrateAnnotations;\n    var stampAnnotationCollection;\n    var stickyAnnotationCollection;\n    var freeTextAnnotationCollection;\n    var signaturCollection;\n    var signaturInkCollection;\n    this.saveImportedAnnotations();\n\n    if (this.isTextMarkupAnnotationModule()) {\n      this.isJsonExported = true; // eslint-disable-next-line max-len\n\n      textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n    }\n\n    if (this.isShapeAnnotationModule()) {\n      this.isJsonExported = true; // eslint-disable-next-line max-len\n\n      shapeAnnotations = this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();\n    }\n\n    if (this.isCalibrateAnnotationModule()) {\n      this.isJsonExported = true; // eslint-disable-next-line max-len\n\n      calibrateAnnotations = this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();\n    }\n\n    if (this.isStampAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      stampAnnotationCollection = this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();\n    }\n\n    if (this.isCommentAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      stickyAnnotationCollection = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();\n    }\n\n    if (this.isFreeTextAnnotationModule()) {\n      // eslint-disable-next-line max-len\n      freeTextAnnotationCollection = this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();\n    }\n\n    if (this.isInkAnnotationModule()) {\n      // eslint-disable-next-line\n      signaturInkCollection = this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();\n    }\n\n    if (this.pdfViewer.isSignatureEditable) {\n      // eslint-disable-next-line\n      signaturCollection = this.signatureModule.saveSignature();\n    } else {\n      // eslint-disable-next-line\n      var annotations = new Array();\n\n      for (var j = 0; j < this.pageCount; j++) {\n        annotations[j] = [];\n      }\n\n      signaturCollection = JSON.stringify(annotations);\n    }\n\n    for (var s = 0; s < this.pageCount; s++) {\n      // eslint-disable-next-line max-len\n      var annotation = {\n        textMarkupAnnotation: JSON.parse(textMarkupAnnotationCollection)[s],\n        shapeAnnotation: JSON.parse(shapeAnnotations)[s],\n        measureShapeAnnotation: JSON.parse(calibrateAnnotations)[s],\n        stampAnnotations: JSON.parse(stampAnnotationCollection)[s],\n        // eslint-disable-next-line max-len\n        stickyNotesAnnotation: JSON.parse(stickyAnnotationCollection)[s],\n        freeTextAnnotation: JSON.parse(freeTextAnnotationCollection)[s],\n        signatureAnnotation: JSON.parse(signaturCollection)[s],\n        signatureInkAnnotation: JSON.parse(signaturInkCollection)[s]\n      };\n      annotationCollection[s] = annotation;\n    }\n\n    return JSON.stringify(annotationCollection);\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.combineImportedData = function (excistingImportAnnotation, newlyImportAnnotation) {\n    for (var i = 0; i < this.pageCount; i++) {\n      if (newlyImportAnnotation[i]) {\n        if (excistingImportAnnotation[i]) {\n          if (newlyImportAnnotation[i].textMarkupAnnotation && newlyImportAnnotation[i].textMarkupAnnotation.length !== 0) {\n            if (excistingImportAnnotation[i].textMarkupAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[i].textMarkupAnnotation = this.checkImportedData(excistingImportAnnotation[i].textMarkupAnnotation, newlyImportAnnotation[i].textMarkupAnnotation, i);\n\n              if (newlyImportAnnotation[i].textMarkupAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[i].textMarkupAnnotation = excistingImportAnnotation[i].textMarkupAnnotation.concat(newlyImportAnnotation[i].textMarkupAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[i].textMarkupAnnotation = newlyImportAnnotation[i].textMarkupAnnotation;\n            }\n          }\n\n          if (newlyImportAnnotation[i].shapeAnnotation && newlyImportAnnotation[i].shapeAnnotation.length !== 0) {\n            if (excistingImportAnnotation[i].shapeAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[i].shapeAnnotation = this.checkImportedData(excistingImportAnnotation[i].shapeAnnotation, newlyImportAnnotation[i].shapeAnnotation, i);\n\n              if (newlyImportAnnotation[i].shapeAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[i].shapeAnnotation = excistingImportAnnotation[i].shapeAnnotation.concat(newlyImportAnnotation[i].shapeAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[i].shapeAnnotation = newlyImportAnnotation[i].shapeAnnotation;\n            }\n          }\n\n          if (newlyImportAnnotation[i].measureShapeAnnotation && newlyImportAnnotation[i].measureShapeAnnotation.length !== 0) {\n            if (excistingImportAnnotation[i].measureShapeAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[i].measureShapeAnnotation = this.checkImportedData(excistingImportAnnotation[i].measureShapeAnnotation, newlyImportAnnotation[i].measureShapeAnnotation, i);\n\n              if (newlyImportAnnotation[i].measureShapeAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[i].measureShapeAnnotation = excistingImportAnnotation[i].measureShapeAnnotation.concat(newlyImportAnnotation[i].measureShapeAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[i].measureShapeAnnotation = newlyImportAnnotation[i].measureShapeAnnotation;\n            }\n          }\n\n          if (newlyImportAnnotation[i].stampAnnotations && newlyImportAnnotation[i].stampAnnotations.length !== 0) {\n            if (excistingImportAnnotation[i].stampAnnotations) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[i].stampAnnotations = this.checkImportedData(excistingImportAnnotation[i].stampAnnotations, newlyImportAnnotation[i].stampAnnotations, i);\n\n              if (newlyImportAnnotation[i].stampAnnotations.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[i].stampAnnotations = excistingImportAnnotation[i].stampAnnotations.concat(newlyImportAnnotation[i].stampAnnotations);\n              }\n            } else {\n              excistingImportAnnotation[i].stampAnnotations = newlyImportAnnotation[i].stampAnnotations;\n            }\n          }\n\n          if (newlyImportAnnotation[i].stickyNotesAnnotation && newlyImportAnnotation[i].stickyNotesAnnotation.length !== 0) {\n            if (excistingImportAnnotation[i].stickyNotesAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[i].stickyNotesAnnotation = this.checkImportedData(excistingImportAnnotation[i].stickyNotesAnnotation, newlyImportAnnotation[i].stickyNotesAnnotation, i);\n\n              if (newlyImportAnnotation[i].stickyNotesAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[i].stickyNotesAnnotation = excistingImportAnnotation[i].stickyNotesAnnotation.concat(newlyImportAnnotation[i].stickyNotesAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[i].stickyNotesAnnotation = newlyImportAnnotation[i].stickyNotesAnnotation;\n            }\n          }\n\n          if (newlyImportAnnotation[i].freeTextAnnotation && newlyImportAnnotation[i].freeTextAnnotation.length !== 0) {\n            if (excistingImportAnnotation[i].freeTextAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[i].freeTextAnnotation = this.checkImportedData(excistingImportAnnotation[i].freeTextAnnotation, newlyImportAnnotation[i].freeTextAnnotation, i);\n\n              if (newlyImportAnnotation[i].freeTextAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[i].freeTextAnnotation = excistingImportAnnotation[i].freeTextAnnotation.concat(newlyImportAnnotation[i].freeTextAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[i].freeTextAnnotation = newlyImportAnnotation[i].freeTextAnnotation;\n            }\n          }\n\n          if (newlyImportAnnotation[i].signatureInkAnnotation && newlyImportAnnotation[i].signatureInkAnnotation.length !== 0) {\n            if (excistingImportAnnotation[i].signatureInkAnnotation) {\n              // eslint-disable-next-line max-len\n              newlyImportAnnotation[i].signatureInkAnnotation = this.checkImportedData(excistingImportAnnotation[i].signatureInkAnnotation, newlyImportAnnotation[i].signatureInkAnnotation, i);\n\n              if (newlyImportAnnotation[i].signatureInkAnnotation.length !== 0) {\n                // eslint-disable-next-line max-len\n                excistingImportAnnotation[i].signatureInkAnnotation = excistingImportAnnotation[i].signatureInkAnnotation.concat(newlyImportAnnotation[i].signatureInkAnnotation);\n              }\n            } else {\n              excistingImportAnnotation[i].signatureInkAnnotation = newlyImportAnnotation[i].signatureInkAnnotation;\n            }\n          }\n        } else {\n          // eslint-disable-next-line max-len\n          var annotation = {\n            // eslint-disable-next-line max-len\n            textMarkupAnnotation: newlyImportAnnotation[i].textMarkupAnnotation,\n            shapeAnnotation: newlyImportAnnotation[i].shapeAnnotation,\n            // eslint-disable-next-line max-len\n            measureShapeAnnotation: newlyImportAnnotation[i].measureShapeAnnotation,\n            stampAnnotations: newlyImportAnnotation[i].stampAnnotations,\n            // eslint-disable-next-line max-len\n            stickyNotesAnnotation: newlyImportAnnotation[i].stickyNotesAnnotation,\n            freeTextAnnotation: newlyImportAnnotation[i].freeTextAnnotation,\n            signatureInkAnnotation: newlyImportAnnotation[i].signatureInkAnnotation\n          };\n          excistingImportAnnotation[i] = annotation;\n        }\n      }\n    }\n\n    return excistingImportAnnotation;\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns true or false.\n   */\n\n\n  PdfViewerBase.prototype.updateExportItem = function () {\n    // eslint-disable-next-line\n    var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape'); // eslint-disable-next-line\n\n    var measureObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure'); // eslint-disable-next-line\n\n    var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp'); // eslint-disable-next-line\n\n    var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky'); // eslint-disable-next-line\n\n    var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup'); // eslint-disable-next-line\n\n    var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n    var isSignatureEditable = false; // eslint-disable-next-line\n\n    var inkAnnotationObjct = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n\n    if (this.pdfViewer.isSignatureEditable) {\n      // eslint-disable-next-line\n      var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n\n      if (signatureObject) {\n        isSignatureEditable = true;\n      }\n    } // eslint-disable-next-line max-len\n\n\n    if (shapeObject || measureObject || stampObject || stickyObject || textMarkupObject || freeTextObject || this.isImportAction || this.isStorageExceed || isSignatureEditable || inkAnnotationObjct) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  PdfViewerBase.prototype.isFreeTextAnnotation = function (annotations) {\n    var resut = false;\n\n    if (annotations && annotations.length > 0) {\n      resut = annotations.some(function (s) {\n        return s.shapeAnnotationType === 'FreeText' && s.subject === 'Text Box';\n      });\n    }\n\n    return resut;\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.checkImportedData = function (existingCollection, newCollection, pageIndex) {\n    for (var i = 0; i < existingCollection.length; i++) {\n      for (var j = 0; j < newCollection.length; j++) {\n        if (existingCollection[i].AnnotName === newCollection[j].AnnotName) {\n          newCollection.splice(j, 1);\n          j = j - 1;\n        }\n      }\n    }\n\n    if (this.annotationComments) {\n      // eslint-disable-next-line\n      var annotationCollections = this.annotationComments[pageIndex];\n      annotationCollections = this.selectAnnotationCollections(annotationCollections);\n\n      if (annotationCollections) {\n        for (var i = 0; i < annotationCollections.length; i++) {\n          for (var j = 0; j < newCollection.length; j++) {\n            if (annotationCollections[i].AnnotName === newCollection[j].AnnotName) {\n              newCollection.splice(j, 1);\n              j = j - 1;\n            }\n          }\n        }\n      }\n    }\n\n    return newCollection;\n  };\n  /**\n   * @param points\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.checkAnnotationWidth = function (points) {\n    var width = 0;\n    var height = 0;\n    var minWidth;\n    var maxWidth;\n    var minHeight;\n    var maxHeight;\n\n    for (var i = 0; i < points.length; i++) {\n      if (!minWidth) {\n        minWidth = points[i].x;\n        maxWidth = points[i].x;\n        minHeight = points[i].y;\n        maxHeight = points[i].y;\n      } else {\n        if (minWidth > points[i].x) {\n          minWidth = points[i].x;\n        } else if (maxWidth < points[i].x) {\n          maxWidth = points[i].x;\n        }\n\n        if (minHeight > points[i].y) {\n          minHeight = points[i].y;\n        } else if (maxHeight < points[i].y) {\n          maxHeight = points[i].y;\n        }\n      }\n    }\n\n    width = maxWidth - minWidth;\n    height = maxHeight - minHeight;\n    return {\n      width: width,\n      height: height\n    };\n  };\n\n  PdfViewerBase.prototype.deleteAnnotations = function () {\n    if (this.pdfViewer.annotationModule) {\n      this.pdfViewer.annotations = [];\n      this.pdfViewer.zIndexTable = [];\n      this.pdfViewer.annotationCollection = [];\n      this.pdfViewer.signatureCollection = []; // eslint-disable-next-line\n\n      var annotationCollection = this.createAnnotationsCollection();\n      this.annotationComments = annotationCollection;\n      this.documentAnnotationCollections = annotationCollection;\n      this.annotationRenderredList = [];\n      window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_sign');\n      window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n\n      for (var i = 0; i < this.pageCount; i++) {\n        this.pdfViewer.annotationModule.renderAnnotations(i, null, null, null);\n        this.pdfViewer.renderDrawing(undefined, i);\n        this.pdfViewer.clearSelection(i);\n        var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + (i + 1));\n\n        if (accordionContent) {\n          accordionContent.remove();\n        } // eslint-disable-next-line max-len\n\n\n        var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n\n        if (accordionContentContainer) {\n          if (accordionContentContainer.childElementCount === 0) {\n            accordionContentContainer.style.display = 'none';\n\n            if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n              // eslint-disable-next-line max-len\n              this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false);\n              document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'block';\n            }\n          }\n        }\n      }\n\n      this.isImportedAnnotation = false;\n      this.isImportAction = false;\n      this.importedAnnotation = [];\n      this.annotationPageList = [];\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers = [];\n      this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber = [];\n      this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex = [];\n      this.isAnnotationCollectionRemoved = true;\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param isObject\n   * @param pageNumber\n   * @param isObject\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.createAnnotationsCollection = function (pageNumber, isObject) {\n    // eslint-disable-next-line\n    var annotationCollectionList = [];\n\n    if (!isObject) {\n      for (var i = 0; i < this.pageCount; i++) {\n        var annotation = {\n          // eslint-disable-next-line max-len\n          textMarkupAnnotation: [],\n          shapeAnnotation: [],\n          measureShapeAnnotation: [],\n          stampAnnotations: [],\n          stickyNotesAnnotation: [],\n          freeTextAnnotation: [],\n          signatureAnnotation: [],\n          signatureInkAnnotation: []\n        };\n        annotationCollectionList.push(annotation);\n      }\n    } else {\n      annotationCollectionList = {};\n      var annotation = {\n        // eslint-disable-next-line max-len\n        textMarkupAnnotation: [],\n        shapeAnnotation: [],\n        measureShapeAnnotation: [],\n        stampAnnotations: [],\n        stickyNotesAnnotation: [],\n        freeTextAnnotation: [],\n        signatureAnnotation: [],\n        signatureInkAnnotation: []\n      };\n      annotationCollectionList[pageNumber] = annotation;\n    }\n\n    return annotationCollectionList;\n  };\n  /**\n   * @param importAnnotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.addAnnotation = function (importAnnotation) {\n    // eslint-disable-next-line\n    var pdfAnnotation = {}; // eslint-disable-next-line\n\n    var documentCollections;\n\n    if (importAnnotation) {\n      var isAnnotationObject = false;\n      var annotationCount = 1;\n\n      if (importAnnotation.shapeAnnotationType || importAnnotation.author) {\n        isAnnotationObject = true;\n        documentCollections = this.createAnnotationsCollection(importAnnotation.pageNumber, true);\n      } else {\n        if (importAnnotation.length) {\n          annotationCount = importAnnotation.length;\n          documentCollections = this.createAnnotationsCollection();\n        } else {\n          isAnnotationObject = true;\n          documentCollections = this.createAnnotationsCollection(importAnnotation.pageNumber, true);\n        }\n      }\n\n      for (var a = 0; a < annotationCount; a++) {\n        // eslint-disable-next-line\n        var annotation = void 0;\n\n        if (isAnnotationObject) {\n          annotation = importAnnotation;\n        } else {\n          annotation = importAnnotation[a];\n        } // eslint-disable-next-line\n\n\n        var newAnnotation = {};\n        newAnnotation.ShapeAnnotationType = annotation.shapeAnnotationType;\n        newAnnotation.AnnotationAddMode = annotation.annotationAddMode;\n        newAnnotation.Author = annotation.author;\n        newAnnotation.AnnotationSelectorSettings = annotation.annotationSelectorSettings;\n        newAnnotation.AnnotationSettings = annotation.annotationSettings;\n        newAnnotation.PageNumber = annotation.pageNumber;\n        newAnnotation.ModifiedDate = annotation.modifiedDate;\n        newAnnotation.Subject = annotation.subject;\n        newAnnotation.Note = annotation.note;\n        newAnnotation.AnnotName = annotation.annotationId;\n        newAnnotation.IsCommentLock = annotation.isCommentLock;\n        newAnnotation.Comments = annotation.comments;\n\n        if (annotation.comments && annotation.comments.length > 0) {\n          // eslint-disable-next-line\n          var comments = [];\n\n          for (var i = 0; i < annotation.comments.length; i++) {\n            comments.push(this.updateComments(annotation, annotation.comments[i]));\n          }\n\n          newAnnotation.Comments = comments;\n        }\n\n        if (annotation.review) {\n          newAnnotation.State = annotation.review.state;\n          newAnnotation.StateModel = annotation.review.stateModel;\n        }\n\n        newAnnotation.CustomData = annotation.customData;\n        newAnnotation.Opacity = annotation.opacity;\n\n        if (annotation.shapeAnnotationType === 'textMarkup') {\n          newAnnotation.AnnotType = 'textMarkup';\n          newAnnotation.Color = annotation.color;\n          newAnnotation.IsMultiSelect = annotation.isMultiSelect;\n          newAnnotation.TextMarkupAnnotationType = annotation.textMarkupAnnotationType;\n          newAnnotation.TextMarkupContent = annotation.textMarkupContent;\n          newAnnotation.TextMarkupStartIndex = annotation.textMarkupStartIndex;\n          newAnnotation.TextMarkupEndIndex = annotation.textMarkupEndIndex;\n\n          if (annotation.rect) {\n            newAnnotation.Rect = this.convertBounds(annotation.rect, true);\n          }\n\n          if (annotation.bounds && annotation.bounds.length >= 1) {\n            // eslint-disable-next-line\n            var bounds = new Array();\n\n            for (var i = 0; i < annotation.bounds.length; i++) {\n              bounds.push(this.convertBounds(annotation.bounds[i]));\n            }\n\n            newAnnotation.Bounds = bounds;\n          }\n\n          documentCollections[annotation.pageNumber].textMarkupAnnotation.push(newAnnotation);\n        } else if (annotation.shapeAnnotationType === 'sticky') {\n          newAnnotation.AnnotType = 'sticky';\n          newAnnotation.Icon = 'Comment';\n          newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n          newAnnotation.StrokeColor = annotation.strokeColor;\n          newAnnotation.Color = annotation.color;\n          documentCollections[annotation.pageNumber].stickyNotesAnnotation.push(newAnnotation);\n        } else if (annotation.shapeAnnotationType === 'FreeText') {\n          newAnnotation.AnnotType = 'freeText';\n          newAnnotation.Name = annotation.annotationId;\n          newAnnotation.MarkupText = annotation.dynamicText;\n          newAnnotation.Text = annotation.dynamicText;\n          newAnnotation.Note = annotation.dynamicText;\n          newAnnotation.TextAlign = annotation.textAlign;\n          newAnnotation.Thickness = annotation.thicknes;\n          newAnnotation.StrokeColor = annotation.strokeColor;\n          newAnnotation.FillColor = annotation.fillColor;\n          newAnnotation.FontColor = annotation.fontColor;\n          newAnnotation.FontSize = annotation.fontSize;\n          newAnnotation.FontFamily = annotation.fontFamily;\n          newAnnotation.Rotate = annotation.rotateAngle;\n          newAnnotation.Bounds = this.convertBounds(annotation.bounds); // eslint-disable-next-line max-len\n\n          newAnnotation.Font = {\n            'Name': annotation.fontFamily,\n            'Size': annotation.fontSize,\n            'Bold': annotation.font.isBold,\n            'Italic': annotation.font.isItalic,\n            'Strikeout': annotation.font.isStrikeout,\n            'Underline': annotation.font.isUnderline\n          };\n          documentCollections[annotation.pageNumber].freeTextAnnotation.push(newAnnotation);\n        } else if (annotation.shapeAnnotationType === 'stamp') {\n          newAnnotation.AnnotType = 'stamp';\n          newAnnotation.Icon = annotation.icon;\n          newAnnotation.isDynamic = false;\n          newAnnotation.Rect = this.convertBounds(annotation.bounds, false, true);\n          newAnnotation.RotateAngle = annotation.rotateAngle;\n          newAnnotation.FillColor = annotation.fillColor;\n          newAnnotation.StrokeColor = annotation.strokeColor;\n          newAnnotation.StampAnnotationType = annotation.stampAnnotationType;\n          newAnnotation.CreationDate = annotation.creationDate;\n\n          if (annotation.stampAnnotationType === 'image') {\n            // eslint-disable-next-line\n            var apperarance = []; // eslint-disable-next-line\n\n            var imageData = {\n              'imagedata': annotation.stampAnnotationPath\n            };\n            apperarance.push(imageData);\n            newAnnotation.Apperarance = apperarance;\n          }\n\n          if (annotation.isDynamicStamp) {\n            newAnnotation.IsDynamic = true;\n            newAnnotation.StrokeColor = annotation.stampFillcolor; // eslint-disable-next-line\n\n            var apperarance = []; // eslint-disable-next-line\n\n            var imageData = {\n              'type': 'string',\n              'text': annotation.dynamicText,\n              'currentFontname': '95b303ab-d397-438a-83af-e2ff8a9900f1',\n              'baseFontName': 'Helvetica-BoldOblique',\n              'fontSize': 10,\n              'isImport': true\n            };\n            apperarance.push(imageData);\n            newAnnotation.Apperarance = apperarance;\n          }\n\n          documentCollections[annotation.pageNumber].stampAnnotations.push(newAnnotation);\n        } else if (annotation.shapeAnnotationType === 'Ink' || annotation.shapeAnnotationType === 'Signature') {\n          newAnnotation.StrokeColor = annotation.strokeColor;\n          newAnnotation.FillColor = annotation.fillColor;\n          newAnnotation.Thickness = annotation.thickness;\n          newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n          newAnnotation.PathData = annotation.data;\n          newAnnotation.pageIndex = annotation.pageNumber;\n\n          if (annotation.shapeAnnotationType === 'Ink') {\n            newAnnotation.AnnotType = 'Ink';\n            newAnnotation.IsPathData = true;\n            documentCollections[annotation.pageNumber].signatureInkAnnotation.push(newAnnotation);\n          }\n\n          if (annotation.shapeAnnotationType === 'Signature') {\n            newAnnotation.AnnotType = 'Signature';\n            newAnnotation.SignatureName = annotation.annotationId;\n            newAnnotation.IsSignature = true;\n            documentCollections[annotation.pageNumber].signatureAnnotation.push(newAnnotation);\n          }\n        } else {\n          // eslint-disable-next-line max-len\n          if (annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'LineWidthArrowHead' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Polygon' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Oval' || annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Ellipse') {\n            newAnnotation.AnnotType = 'shape';\n            newAnnotation.StrokeColor = annotation.strokeColor;\n            newAnnotation.FillColor = annotation.fillColor;\n            newAnnotation.Thickness = annotation.thickness;\n            newAnnotation.BorderStyle = annotation.borderStyle;\n            newAnnotation.BorderDashArray = annotation.borderDashArray;\n            newAnnotation.RotateAngle = annotation.rotateAngle;\n            newAnnotation.IsCloudShape = annotation.isCloudShape;\n            newAnnotation.CloudIntensity = annotation.cloudIntensity;\n            newAnnotation.RectangleDifference = annotation.rectangleDifference;\n            newAnnotation.LineHeadStart = annotation.lineHeadStart;\n            newAnnotation.LineHeadEnd = annotation.lineHeadEnd;\n            newAnnotation.IsLocked = annotation.isLocked;\n            newAnnotation.EnableShapeLabel = annotation.enableShapeLabel;\n            newAnnotation.LabelContent = annotation.labelContent;\n            newAnnotation.LabelFillColor = annotation.labelFillColor;\n            newAnnotation.LabelBorderColor = annotation.labelBorderColor;\n            newAnnotation.FontColor = annotation.fontColor;\n            newAnnotation.FontSize = annotation.fontSize;\n            newAnnotation.LabelBounds = this.convertBounds(annotation.labelBounds);\n            newAnnotation.LabelSettings = annotation.labelSettings;\n            newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n            newAnnotation.LeaderLength = annotation.leaderLength;\n            newAnnotation.LeaderLineExtenstion = annotation.leaderLineExtension;\n\n            if (annotation.vertexPoints && annotation.vertexPoints.length >= 1) {\n              // eslint-disable-next-line\n              var points = new Array();\n\n              for (var i = 0; i < annotation.vertexPoints.length; i++) {\n                points.push(this.convertVertexPoints(annotation.vertexPoints[i]));\n              }\n\n              newAnnotation.VertexPoints = points;\n            }\n\n            newAnnotation.EnableShapeLabel = annotation.enableShapeLabel; // eslint-disable-next-line max-len\n\n            if (annotation.subject === 'Distance calculation' || annotation.subject === 'Perimeter calculation' || annotation.subject === 'Area calculation' || annotation.subject === 'Radius calculation' || annotation.subject === 'Volume calculation') {\n              newAnnotation.AnnotType = 'shape_measure'; // eslint-disable-next-line\n\n              var calibrate = annotation.calibrate;\n\n              if (calibrate) {\n                // eslint-disable-next-line\n                newAnnotation.Calibrate = {\n                  'Ratio': calibrate.ratio,\n                  'X': [{\n                    'Unit': calibrate.x[0].unit,\n                    'ConversionFactor': calibrate.x[0].conversionFactor,\n                    'FractionalType': calibrate.x[0].fractionalType,\n                    'Denominator': calibrate.x[0].denominator,\n                    'FormatDenominator': calibrate.x[0].formatDenominator\n                  }],\n                  // eslint-disable-next-line\n                  'Distance': [{\n                    'Unit': calibrate.distance[0].unit,\n                    'ConversionFactor': calibrate.distance[0].conversionFactor,\n                    'FractionalType': calibrate.distance[0].fractionalType,\n                    'Denominator': calibrate.distance[0].denominator,\n                    'FormatDenominator': calibrate.distance[0].formatDenominator\n                  }],\n                  // eslint-disable-next-line\n                  'Area': [{\n                    'Unit': calibrate.area[0].unit,\n                    'ConversionFactor': calibrate.area[0].conversionFactor,\n                    'FractionalType': calibrate.area[0].fractionalType,\n                    'Denominator': calibrate.area[0].denominator,\n                    'FormatDenominator': calibrate.area[0].formatDenominator\n                  }],\n                  // eslint-disable-next-line\n                  'Angle': null,\n                  'Volume': null,\n                  'TargetUnitConversion': calibrate.targetUnitConversion,\n                  'Depth': calibrate.depth\n                };\n              }\n\n              newAnnotation.Indent = annotation.indent;\n              newAnnotation.Caption = annotation.caption;\n              newAnnotation.CaptionPosition = annotation.captionPosition;\n              newAnnotation.LeaderLineExtension = annotation.leaderLineExtension;\n              newAnnotation.LeaderLength = annotation.leaderLength;\n              newAnnotation.LeaderLineOffset = annotation.leaderLineOffset;\n              documentCollections[annotation.pageNumber].measureShapeAnnotation.push(newAnnotation);\n            } else {\n              documentCollections[annotation.pageNumber].shapeAnnotation.push(newAnnotation);\n            }\n          }\n        }\n      }\n\n      pdfAnnotation.pdfAnnotation = documentCollections;\n      this.pdfViewer.importAnnotation(pdfAnnotation);\n    }\n  };\n  /**\n   * @param bounds\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.convertBounds = function (bounds, isRect, isStamp) {\n    if (bounds) {\n      if (isRect) {\n        var left = bounds.left ? bounds.left : bounds.Left ? bounds.Left : 0;\n        var right = bounds.right ? bounds.right : bounds.Right ? bounds.Right : 0;\n        var bottom = bounds.bottom ? bounds.bottom : bounds.Bottom ? bounds.Bottom : 0;\n        var top_5 = bounds.top ? bounds.top : bounds.Top ? bounds.Top : 0;\n        return {\n          left: left,\n          right: right,\n          bottom: bottom,\n          top: top_5\n        };\n      } else {\n        var x = bounds.x ? bounds.x : bounds.left ? bounds.left : bounds.Left ? bounds.Left : 0;\n        var y = bounds.y ? bounds.y : bounds.top ? bounds.top : bounds.Top ? bounds.Top : 0;\n        var width = bounds.width ? bounds.width : bounds.Width ? bounds.Width : 0;\n        var height = bounds.height ? bounds.height : bounds.Height ? bounds.Height : 0;\n\n        if (isStamp) {\n          return {\n            X: this.ConvertPixelToPoint(x),\n            Y: this.ConvertPixelToPoint(y),\n            Left: this.ConvertPixelToPoint(x),\n            Top: this.ConvertPixelToPoint(y),\n            Height: this.ConvertPixelToPoint(height),\n            Width: this.ConvertPixelToPoint(width)\n          };\n        } else {\n          return {\n            X: x,\n            Y: y,\n            Left: x,\n            Top: y,\n            Height: height,\n            Width: width\n          };\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.ConvertPixelToPoint = function (number) {\n    return number * (72 / 96);\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.convertVertexPoints = function (points) {\n    if (points) {\n      var x = points.x ? points.x : points.X ? points.X : 0;\n      var y = points.y ? points.y : points.Y ? points.Y : 0;\n      return {\n        X: x,\n        Y: y,\n        Left: x,\n        Top: y\n      };\n    }\n  }; // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.updateComments = function (annotation, comments) {\n    if (annotation && comments) {\n      // eslint-disable-next-line\n      var newAnnotation = {};\n      newAnnotation.ShapeAnnotationType = annotation.shapeAnnotationType;\n      newAnnotation.Author = comments.author;\n      newAnnotation.AnnotationSelectorSettings = annotation.annotationSelectorSettings;\n      newAnnotation.AnnotationSettings = annotation.annotationSettings;\n      newAnnotation.PageNumber = annotation.pageNumber;\n      newAnnotation.ModifiedDate = comments.modifiedDate;\n      newAnnotation.Subject = annotation.subject;\n      newAnnotation.Note = comments.note;\n      newAnnotation.AnnotName = comments.annotName;\n      newAnnotation.Comments = comments.comments;\n      newAnnotation.State = comments.review.state;\n      newAnnotation.StateModel = comments.review.stateModel;\n      newAnnotation.CustomData = annotation.customData;\n      newAnnotation.IsLock = comments.isLock;\n      return newAnnotation;\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.removeFocus = function () {\n    if (isBlazor()) {\n      // eslint-disable-next-line\n      var currentPageContainer = this.pdfViewer.element.querySelector('#' + this.pdfViewer.element.id + '_totalPage'); // eslint-disable-next-line max-len\n\n      if (currentPageContainer && currentPageContainer.firstElementChild && currentPageContainer.firstElementChild.firstElementChild) {\n        currentPageContainer.firstElementChild.firstElementChild.blur();\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  PdfViewerBase.prototype.updateDocumentEditedProperty = function (isEdited) {\n    this.pdfViewer.allowServerDataBinding = true;\n    this.pdfViewer.isDocumentEdited = isEdited;\n    this.pdfViewer.allowServerDataBinding = false;\n  };\n  /**\n  * @private\n  */\n\n\n  PdfViewerBase.prototype.getWindowDevicePixelRatio = function () {\n    var devicePixelRatio = window.devicePixelRatio;\n\n    if (!Browser.isDevice) {\n      return devicePixelRatio;\n    } else {\n      return devicePixelRatio = 2;\n    }\n  };\n  /**\n  * @private\n  */\n\n\n  PdfViewerBase.prototype.getZoomRatio = function (zoom) {\n    var zoomFactor = this.getZoomFactor();\n    var zoomValue = zoom ? zoom : 1;\n    var ratio;\n    var devicePixelRatio = this.getWindowDevicePixelRatio();\n\n    if (!Browser.isDevice || Browser.isDevice && zoomFactor <= 0.7) {\n      ratio = zoomValue * devicePixelRatio;\n    } else {\n      ratio = zoomValue;\n    }\n\n    return ratio;\n  };\n  /**\n  * @private\n  */\n\n\n  PdfViewerBase.prototype.importJsonForRotatedDocuments = function (Rotate, pageNumber, bounds, originalRotation) {\n    // eslint-disable-next-line\n    var rotateAngle = Math.abs(Rotate);\n    var pageDetails = this.pageSize[pageNumber]; //originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;\n\n    if (originalRotation !== pageDetails.rotation) {\n      rotateAngle = this.getRotationAngle(originalRotation, pageNumber);\n      this.isPageRotated = true;\n    } else {\n      rotateAngle = 0;\n      this.isPageRotated = false;\n    }\n\n    if (rotateAngle === 1) {\n      return {\n        X: pageDetails.width - bounds.Y - bounds.Height,\n        Y: bounds.X,\n        Height: bounds.Width,\n        Width: bounds.Height\n      };\n    } else if (rotateAngle === 2) {\n      return {\n        X: pageDetails.width - bounds.X - bounds.Width,\n        Y: pageDetails.height - bounds.Y - bounds.Height,\n        Height: bounds.Height,\n        Width: bounds.Width\n      };\n    } else if (rotateAngle === 3) {\n      return {\n        X: bounds.Y,\n        Y: pageDetails.height - bounds.X - bounds.Width,\n        Height: bounds.Width,\n        Width: bounds.Height\n      };\n    } else {\n      return bounds;\n    }\n  };\n\n  PdfViewerBase.prototype.getRotationAngle = function (originalRotation, pageNumber) {\n    var pageDetails = this.pageSize[pageNumber];\n    originalRotation = Math.abs(originalRotation);\n    var rotateAngle;\n\n    if (originalRotation === 0) {\n      return rotateAngle = pageDetails.rotation;\n    } else if (originalRotation === 1 || originalRotation === 90) {\n      if (pageDetails.rotation == 0) {\n        return rotateAngle = 3;\n      } else if (pageDetails.rotation === 2) {\n        return rotateAngle = 1;\n      } else if (pageDetails.rotation === 3) {\n        return rotateAngle = 2;\n      }\n    } else if (originalRotation === 2 || originalRotation === 180) {\n      if (pageDetails.rotation == 0) {\n        return rotateAngle = 2;\n      } else if (pageDetails.rotation === 1) {\n        return rotateAngle = 3;\n      } else if (pageDetails.rotation === 3) {\n        return rotateAngle = 1;\n      }\n    } else if (originalRotation === 3 || originalRotation === 270) {\n      if (pageDetails.rotation == 0) {\n        return rotateAngle = 1;\n      } else if (pageDetails.rotation === 2) {\n        return rotateAngle = 3;\n      } else if (pageDetails.rotation === 1) {\n        return rotateAngle = 2;\n      }\n    }\n  };\n  /**\n  * @private\n  */\n\n\n  PdfViewerBase.prototype.calculateVertexPoints = function (Rotate, pageNumber, vertexPoints, originalRotation) {\n    // eslint-disable-next-line\n    var rotateAngle = Math.abs(Rotate);\n    var vPoints = [];\n    var pageDetails = this.pageSize[pageNumber];\n    var x;\n    var y;\n    var point; //originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;\n\n    if (originalRotation !== pageDetails.rotation) {\n      rotateAngle = this.getRotationAngle(originalRotation, pageNumber);\n    } else {\n      rotateAngle = 0;\n    }\n\n    for (var j = 0; j < vertexPoints.length; j++) {\n      if (rotateAngle === 1) {\n        x = vertexPoints[j].Y ? pageDetails.width - vertexPoints[j].Y : pageDetails.width - vertexPoints[j].y;\n        y = vertexPoints[j].X ? vertexPoints[j].X : vertexPoints[j].x;\n        point = {\n          x: x,\n          y: y\n        };\n        vPoints.push(point);\n      } else if (rotateAngle === 2) {\n        x = vertexPoints[j].X ? pageDetails.width - vertexPoints[j].X : pageDetails.width - vertexPoints[j].x;\n        y = vertexPoints[j].Y ? pageDetails.height - vertexPoints[j].Y : pageDetails.height - vertexPoints[j].y;\n        var point_1 = {\n          x: x,\n          y: y\n        };\n        vPoints.push(point_1);\n      } else if (rotateAngle == 3) {\n        x = vertexPoints[j].Y ? vertexPoints[j].Y : vertexPoints[j].y;\n        y = vertexPoints[j].X ? pageDetails.height - vertexPoints[j].X : pageDetails.height - vertexPoints[j].x;\n        point = {\n          x: x,\n          y: y\n        };\n        vPoints.push(point);\n      } else {\n        x = vertexPoints[j].X ? vertexPoints[j].X : vertexPoints[j].x;\n        y = vertexPoints[j].Y ? vertexPoints[j].Y : vertexPoints[j].y;\n        var point_2 = {\n          x: x,\n          y: y\n        };\n        vPoints.push(point_2);\n      }\n    }\n\n    return vPoints;\n  };\n\n  return PdfViewerBase;\n}();\n\nexport { PdfViewerBase };","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","createElement","Browser","isNullOrUndefined","isBlazor","Dialog","TextLayer","ContextMenu","Signature","PdfFormFieldBase","NavigationPane","NumericTextBox","AjaxHandler","Point","Rect","identityMatrix","transformPointByMatrix","contains","rotateMatrix","SelectTool","MoveTool","ResizeTool","ConnectTool","NodeDrawingTool","PolygonDrawingTool","LineTool","RotateTool","StampTool","InkDrawingTool","Selector","ActiveElements","findActiveElement","renderAdornerLayer","AnnotationDataFormat","cloneObject","BlazorContextMenu","createSpinner","showSpinner","hideSpinner","BlazorUiAdaptor","PdfViewerBase","viewer","_this","pageSize","pageCount","isReRenderRequired","currentPageNumber","activeElements","mouseDownEvent","isDocumentLoaded","renderedPagesList","pageGap","signatureAdded","isFreeTextSelected","pageLeft","sessionLimit","pageStopValue","toolbarHeight","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","sessionStorage","isLoadedFormFieldAdded","pointerCount","pointersForTouch","isPasswordAvailable","passwordData","reRenderedCount","mouseX","mouseY","mouseLeft","mouseTop","touchClientX","touchClientY","previousTime","currentTime","isTouchScrolled","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","isPanMode","dragX","dragY","isScrollbarMouseDown","scrollX","scrollY","ispageMoved","isThumb","isTapHidden","singleTapTimer","tapCount","inputTapCount","isInitialLoaded","annotationPageList","importPageList","isImportAction","isImportedAnnotation","isAnnotationCollectionRemoved","tool","action","eventArgs","inAction","isMouseDown","isStampMouseDown","stampAdded","customStampCount","isDynamicStamp","isMixedSizeDocument","highestWidth","highestHeight","customStampCollection","isAlreadyAdded","isWebkitMobile","isFreeTextContextMenu","isSelection","isAddAnnotation","annotationComments","isToolbarSignClicked","signatureCount","isSignatureAdded","isNewSignatureAdded","isInitialPageMode","documentAnnotationCollections","annotationRenderredList","annotationStorage","formFieldStorage","isStorageExceed","isNewStamp","downloadCollections","isAnnotationAdded","annotationEvent","isAnnotationDrawn","isAnnotationSelect","isAnnotationMouseDown","isAnnotationMouseMove","validateForm","isMinimumZoom","documentLoaded","tileRenderCount","tileRequestCount","isTileImageRendered","isDataExits","requestLists","tilerequestLists","isInkAdded","inkCount","isAddedSignClicked","imageCount","isMousedOver","isFormFieldSelect","isFormFieldMouseDown","isFormFieldMouseMove","isFormFieldMousedOver","isPassword","isDrawnCompletely","isAddComment","drawSignatureWithTool","formFieldCollection","nonFillableFields","isInitialField","isTouchDesignerMode","isPrint","isJsonImported","isJsonExported","isPageRotated","downloadFileName","isFocusField","focusField","clearSessionStorage","documentId","isIE","info","name","decodeURI","window","getItem","documentLiveCount","jsonObject","hashId","elementId","pdfViewer","element","id","actionName","serviceUrl","browserSupportsKeepalive","Request","headerValue","setUnloadRequestHeaders","credentialsData","ajaxRequestSettings","withCredentials","fetch","method","credentials","headers","JSON","stringify","clearCache","removeItem","onWindowResize","event","proxy","enableRtl","viewerContainer","style","right","navigationPane","sideBarToolbar","getViewerContainerLeft","left","commentPanelContainer","offsetWidth","viewerElementWidth","clientWidth","width","viewerWidth","getViewerContainerRight","toolbarModule","toolbarContainer","querySelector","getElement","formDesignerToolbarHeight","getBoundingClientRect","height","isAnnotationToolbarHidden","isDevice","enableDesktopMode","isNavigationToolbarVisible","navigationToolbar","isFormDesignerToolbarHidded","formDesignerToolbar","updatePageHeight","annotationToolbarContainer","annotationToolbarHeight","bookmarkViewModule","bookmarkContainer","toString","pageContainer","onToolbarResize","getViewerMainContainerWidth","enableToolbar","thumbnailViewModule","gotoThumbnailImage","textSearchModule","textSearchBoxOnResize","isBookmarkListOpen","updateZoomValue","mobileScrollerContainer","parseFloat","mobilePageNoContainer","top","clientHeight","updateMobileScrollerPosition","setResizeIconTop","setCommentPanelResizeIconTop","type","signatureModule","updateCanvasSize","viewerContainerOnMousedown","isUpdate","button","getPopupNoteVisibleStatus","isClickedOnScrollBar","target","detail","className","focusViewerContainer","scrollTop","getZoomFactor","clientX","clientY","document","documentMode","textSelectionModule","preventDefault","clearTextSelection","pageX","pageY","cursor","isShapeBasedAnnotationsEnabled","diagramMouseDown","annotation","stickyNotesAnnotationModule","accordionContainer","annotationModule","isEditableElement","updateCommentPanel","mouseDownHandler","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","isSignatureFieldReadOnly","split","getElementById","disabled","children","clearSelection","diagramMouseUp","onAnnotationMouseUp","selectedItems","formFields","toolbar","formDesignerToolbarModule","showHideDeleteIcon","commentElement","display","annotations","accordionExpand","ej2_instances","expandItem","commentsDiv","annotName","classList","firstChild","click","eventTarget","offsetX","offsetY","zoomFactor","pageIndex","pageString","parseInt","pageDiv","pageCurrentRect","firePageClick","formFieldsModule","formDesignerModule","removeFocus","isTextMarkupAnnotationModule","isToolbarInkClicked","textMarkupAnnotationModule","onTextMarkupAnnotationMouseUp","updateCanvas","viewerContainerOnMouseWheel","getRerenderCanvasCreated","ctrlKey","zoomDifference","magnification","wheelDelta","zoomTo","magnificationModule","pageRerenderOnMouseWheel","fitPageScrollMouseWheel","textSelectionOnMouseWheel","onWindowKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","isFreeTextAnnotationModule","freeTextAnnotationModule","isInuptBoxInFocus","inputElementModule","isInFocus","keyCode","addInkAnnotation","deSelectCommentAnnotation","updateStampItems","annotationToolbarModule","deselectAllItemsInBlazor","deselectAllItems","isFormDesignerToolbarVisible","formFieldElement","remove","i","formField","field","fontFamily","fontSize","fontStyle","color","backgroundColor","alignment","isReadonly","visibility","maxLength","isRequired","rotation","rotateAngle","tooltip","options","isChecked","isSelected","fireFocusOutFormField","viewerContainerOnKeyDown","shiftKey","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","copy","contextMenuModule","previousAction","enableTextSearch","textSearchButtonHandler","printModule","enablePrint","print","undo","cut","redo","isShapeCopied","formDesigner","paste","DeleteKeyPressed","magnifyBehaviorKeyDown","viewerContainerOnMousemove","isDropletClicked","isEnableTextMarkupResizer","currentTextMarkupAddMode","textSelect","textSelectionOnMouseMove","selection","getSelection","isCollapsed","anchorNode","isTextSelection","skipPreventDefault","onTextMarkupAnnotationMouseMove","panOnMouseMove","canvas","indexOf","parentElement","getEventPageNumber","diagram","canvas1","x","top_1","stampAnnotationModule","currentStampAnnotation","shapeAnnotationType","top_2","stampModule","containsPoint","isStampAnnotSelected","diagramMouseMove","diagramMouseLeave","enableStampAnnotations","isNewStampAnnot","enableHandwrittenSignature","isStampMode","deltaX","deltaY","scrollLeft","isNavigationPaneResized","viewerContainerOnMouseLeave","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","clear","viewerContainerOnMouseOver","viewerContainerOnClick","getCurrentTextMarkupAnnotation","getTextMarkupAnnotationMode","pageNumber","fireTextSelectionStart","selectAWord","contextMenuSettings","contextMenuAction","calculateContextMenuPosition","maintainSelectionOnZoom","setTimeout","applySelection","fireTextSelectEnd","drawTextMarkupAnnotations","position","currentPosition","getMouseEventArgs","source","isMetaKey","clickCount","mouseUp","currentTextMarkupAnnotation","currentAnnotation","formFieldAnnotationType","annotationSelect","isFreeTextAnnotation","elmtPosition","bounds","addInuptElemet","enableShapeLabel","editLabel","annotation_1","selectTextMarkupCurrentPage","comments","designerMode","cancel","fireFormFieldDoubleClickEvent","createPropertiesWindow","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","modules","isLeftDropletClicked","isRightDropletClicked","showHideDropletDiv","isTextMarkupAnnotationMode","isNewFreeTextAnnotation","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","viewerElement","targetElement","checkIsNormalText","removeAllRanges","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","touches","setTouchPoints","preventTouchEvent","onTextMarkupAnnotationTouchEnd","Date","getTime","handleTaps","handleTextBoxTaps","isDesignerMode","close","isMoving","open","viewerContainerOnLongTouch","textMarkupToolbarElement","add","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","enablePinchZoom","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","top_3","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","cancelable","clearInterval","duration","difference","changedTouches","speed","Math","abs","renderStampAnnotation","viewerContainerOnPointerEnd","viewerContainerOnScroll","allowServerDataBind","allowServerDataBinding","enableServerDataBinding","scrollposX","scrollposY","ratio","scrollHeight","offsetTop","containerValue","verticalScrollValue","pageHeight","getPageHeight","getPageTop","fitType","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","setAttribute","updateNavigationButtons","mobileSpanContainer","innerHTML","mobilecurrentPageContainer","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","clearIntervalTimer","data","getStoredData","initiatePageViewScrollChanged","timer","scrollSettings","delayPageRequestTimeOnScroll","updateCommentPanelScrollTop","textLayer","test","userAgent","vendor","prototype","initializeComponent","blazorUIAdaptor","controlWidth","toolbarDiv","viewerMainContainer","attrs","createMobilePageNumberContainer","tabIndex","direction","touchAction","setMaximumHeight","mainContainer","appendChild","applyViewerHeight","initializeNavigationPane","intializeToolbar","enableNavigationToolbar","sideBarToolbarSplitter","isBookmarkOpen","isThumbnailOpen","updateViewerContainerOnClose","mobilenumberContainer","mobiletotalPageContainer","createThumbnailContainer","createPrintPopup","createGoToPagePopup","waitingPopup","cssClass","setLoaderProperties","spinnerElement","getElementsByClassName","createContextMenu","createFileInputElement","wireEvents","createTextSearchBox","documentPath","_dotnetInstance","invokeMethodAsync","load","initializeCollection","interactionMode","cssFloat","zIndex","addEventListener","mobileScrollContainerDown","bind","mobileScrollContainerEnd","initiatePageRender","documentData","password","loadedData","createGUID","showLoadingIndicator","isFileName","saveDocumentInfo","initiatePanning","checkDocumentData","setFileName","fileName","constructJsonObject","createAjaxRequest","initiateLoadDocument","jsonDocumentId","loadSuccess","documentDetails","parse","error","onControlError","serverActionSettings","isNaN","StatusText","uniqueId","fireAjaxRequestSuccess","requestSuccess","clearAnnotationSelection","showToolbar","relativePosition","currentRect","minHeight","updateWidth","updateHeight","updateViewerContainer","sideBarContentContainer","updateViewerContainerOnExpand","updateViewerContainerSize","enableAnnotationToolbar","refreshOverflow","goToPagePopup","show","removeEventListener","loadRequestHandler","url","responseType","mode","send","onSuccess","updateFormFieldName","openImportExportNotificationPopup","localeObj","getConstant","onFailure","statusString","status","openNotificationPopup","fireAjaxRequestFailed","statusText","onError","PdfRenderedFormFields","ActualFieldName","FieldName","errorString","showNotificationDialog","promise","createNotificationPopup","showNotificationPopup","undefined","saveDocumentHashData","saveFormfieldsData","pageRender","pageData","pageSizes","setItem","restrictionList","RestrictionSummary","RestrictionEnabled","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createAnnotationSelectElement","restrictionSummary","isEnable","EnableRestriction","DisableToolbarItems","enableFormFields","enableFormFieldButton","enableAnnotation","passwordDialogReset","passwordPopup","hide","initPageDiv","previousZoomValue","zoomValue","isZoomMode","isAutoZoom","zoomMode","fitToWidth","fitToPage","isInitialLoading","viewPortWidth","pageWidth","createRequestForRender","pageTop","viewerHeight","renderPageElement","uploadedDocumentName","enableAnnotationAddTools","createPasswordPopup","fireDocumentLoadFailed","promptElement","textContent","focus","promptElement_1","passwordInput_1","promise_1","createCorruptedPopup","corruptPopup","base64String","documentStringArray","unload","encodeURI","isFormFieldDocument","formfieldvalue","setItemInSessionStorage","splice","formFieldCollections","submitItem","enableItems","updateWaitingPopup","bottom","getActivePage","isPageNumber","activePageID","createWaitingPopup","isShow","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","saveAsBlob","saveAsBlobRequest","constructJsonDownload","dowonloadRequestHandler","blobUrl","createBlobUrl","isTriggerEvent","thumbnailView","annotationCollection","signatureCollection","importedAnnotation","updateDocumentEditedProperty","formFieldIndex","zIndexTable","initiateTextSelectMode","resetTextSearch","readOnlyCollection","signatureFieldCollection","currentTarget","signaturecollection","outputcollection","hasChildNodes","removeChild","lastChild","unloadDocument","characterBound","Array","virtualLoadRequestHandler","pageRequestHandler","importAnnotationRequestHandler","exportAnnotationRequestHandler","importFormFieldsRequestHandler","exportFormFieldsRequestHandler","printRequestHandler","windowSessionStorageClear","fireDocumentUnload","destroy","unWireEvents","parentNode","measureElement","unloadRequestHandler","myHeaders","Headers","append","ajaxHeaders","headerName","moreOptionsButton","querySelectorAll","commentTextBox","j","commentContainer","editableElement","commentSelect","z","getScrollParent","scrollNodeX","scrollNodeY","appVersion","scrollTo","node","nodeName","getComputedStyle","overflowY","popupElement","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","content","isPrimary","closeCorruptPopup","beforeClose","appendTo","hideLoadingIndicator","goToPageElement","inputContainer","goToPageInput","maxWidth","pageNoContainer","GoToPageCancelClick","GoToPageApplyClick","closeGoToPagePopUp","goToPageTextBox","format","showSpinButton","inputValue","EnableApplyButton","DisableApplyButton","popupElements","removeAttribute","navigation","goToPage","differenceRatio","passwordInput","passwordCancel","applyPassword","passwordCancelClick","args","isInteraction","createCustomStampElement","createSignatureFileElement","fitToAuto","applyLeftPosition","updateFreeTextProperties","shapeLabelSettings","fillColor","labelFillColor","fontColor","opacity","labelOpacity","labelContent","isEnableDelete","isCancel","hidenItems","disabledItems","contextMenuOption","isClickWithinSelectionBounds","isTextSelected","selectedText","shapeMenuItems","isCalibrateAnnotationModule","measureAnnotationModule","currentAnnotationMode","enableCommentPanel","OnItemSelected","selectedMenu","CopyItemSelected","TextMarkUpSelected","PropertiesItemSelected","CutItemSelected","pasteItemSelected","DeleteItemSelected","ScaleRatioSelected","CommentItemSelected","showCommentsPanel","createScaleRatioWindow","deleteFormField","deleteAnnotation","tagName","pasteSelectedText","cutSelectedText","isSkip","copySelectedText","isSelectionMaintained","enableProperties","isSignature","checkIsRtlText","text","ltrChars","rtlChars","rtlDirCheck","RegExp","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","getVerticalValue","getHorizontalClientValue","pageBounds","getVerticalClientValue","isText","currentText","selectionRangeArray","isReadOnly","inputFields","annotationSettings","isLock","checkAllowedInteractions","renderSelector","modifyTextCursor","disableTextSelectionMode","enableTextSelectionMode","initiateTextSelection","isSelectionToolDisabled","updateInteractionTools","designerModetarget","onSingleTap","onDoubleTap","onTextBoxDoubleTap","isFormfields","moreDropDown","dropDown","firstElementChild","getSelectTextMarkupCurrentPage","tapOnMobileDevice","onDoubleTapMagnification","currentStampObj","updateDeleteItems","renderDrawing","renderStamp","onAnnotationMouseDown","currentSignatureAnnot","renderSignature","pageValues","updateTotalPage","topValue","isPortrait","isLandscape","differentPageSize","previousPageHeight","size","Height","Width","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","lowerLimit","higherLimit","pageValue","lowerPageValue","pageCanvas","childNodes","maintainSelectionOnScroll","indexInArray","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","fireDocumentLoad","linkAnnotationModule","linkAnnotation","linkPage","renderDocumentLink","annotationY","tileRenderPage","canvas_1","pageDiv_1","tileX","tileY","background","updateLeftPosition","imageData","retrieveCurrentZoomFactor","currentString","matrix","tileX_1","tileY_1","scaleFactor","image","Image","src","onload","renderPDFInformations","textSearch","isExtractText","getPDFDocumentTexts","rerenderAnnotations","oldPageDiv","rerenderCountIncrement","currentImageWidth","matrixElements","Elements","Values","currentImageTop","currentImageLeft","onPageRender","oldCanvases","l","tileImgId","zoomFactor_1","tileData","getWindowSessionStorageTile","nodeType","Node","ELEMENT_NODE","tileX_2","tileY_2","renderTileCanvas","marginLeft","marginRight","calculateImageWidth","imageWidth","renderPage","canvas_2","pageDiv_2","boxShadow","pushImageObjects","aElement","getElementsByTagName","isAnnotationRendered","index","renderTextContent","isFormFieldPageZoomed","renderFormFields","rerenderFormFields","enableHyperlink","renderHyperlinkContent","applySelectionRangeOnScroll","pageAnnotations","shapeAnnotation","measureShapeAnnotation","textMarkupAnnotation","freeTextAnnotation","stampAnnotations","stickyNotesAnnotation","signatureInkAnnotation","checkDocumentCollectionData","isStampAnnotationModule","stampData","renderStampAnnotations","renderAnnotations","renderStickyNotesAnnotations","isTextSearch","highlightOtherOccurrences","commonStyle","annotationSelectorSettings","selectCommentsAnnotation","renderFreeTextAnnotations","isInkAnnotationModule","inkAnnotationModule","renderExistingInkSignature","isAnnotationSelected","annotationPageIndex","selectAnnotationFromCodeBehind","isAddedProgrammatically","signatureAnnotation","drawPageAnnotations","renderExistingSignature","texts","addTextLayer","renderTextContents","resizeTextContents","orderPageDivElements","renderPageCanvas","createRequestForThumbnails","createRequestForBookmarks","initializeAcccordionContainer","isCommandPanelOpen","createRequestForComments","nextElement","insertBefore","displayMode","createAnnotationLayer","applyElementStyles","canvasElement","oldCanvas","offsetLeft","leftPosition","pageDiff","leftValue","getPageNumberFromClientPoint","clientPoint","pointX","pointY","viewerContainerBounds","verticalScrollPosition","convertClientPointToPagePoint","pagePoint","convertPagePointToClientPoint","convertPagePointToScrollingPoint","scrollingPoint","renderCountIncrement","currentPageIndex","previous","renderPreviousPagesInScroll","downloadDocument","Url","URL","webkitURL","createObjectURL","anchorElement","href","documentElement","location","padCharacter","replace","downloadExportAnnotationJson","isForm","exportAnnotationFileName","fireFormExportSuccess","fireExportSuccess","downloadExportedXFdfAnnotation","exportFormFields","path","createRequestForExportFormfields","importFormFields","createRequestForImportingFormfields","isObject","createFormfieldsJsonData","fireFormExportStarted","pdfAnnotation","annotationJson","decodeURIComponent","escape","atob","msSaveOrOpenBlob","fireFormExportFailed","fireFormImportStarted","fireFormImportFailed","fireFormImportSuccess","removeExistingFormFields","fieldsData","downloadFormDesigner","downloadFormFieldsData","saveImportedAnnotations","textMarkupAnnotationCollection","saveTextMarkupAnnotations","isShapeAnnotationModule","shapeAnnotations","shapeAnnotationModule","saveShapeAnnotations","calibrateAnnotations","saveMeasureShapeAnnotations","stampAnnotationCollection","saveStampAnnotations","isCommentAnnotationModule","stickyAnnotationCollection","saveStickyAnnotations","importList","signatureData","saveSignature","isSignatureEditable","freeTextAnnotationCollection","saveFreeTextAnnotations","inkSignatureData","saveInkSignature","checkFormFieldCollection","annotationID","isFormFieldAnnotation","formDesignerData","getItemFromSessionStorage","formFieldsData","FormField","radiobuttonItem","Key","fireDownloadStart","enableFormFieldsValidation","fireValidatedFailed","fireDownloadEnd","updateDocumentAnnotationCollections","getTileCount","defaultWidth","tileCount","tileValue","toFixed","tileRenderingSettings","enableTileRendering","pageWidth_1","tilecanvas","viewPortWidth_1","viewPortHeight","noTileX","noTileY","tileSettings","isPageRequestSent","pageRequestSent","zoomFactor_2","k","zoomFactor_3","xCoordinate","yCoordinate","tilecount","tileXCount","tileYCount","renderPages","currentPageWidth","storeWinData","errorMessage","restrictZoomRequest","storedData","getWindowSessionStorage","getPinchZoomPage","storedTileData","isPinchZoomStorage","blobObj","storeObject","transformationMatrix","hyperlinks","hyperlinkBounds","annotationLocation","textBounds","pageText","manageSessionStorage","setCustomAjaxHeaders","request","setRequestHeader","key","hasOwnProperty","enableZoomOptimization","sessionSize","round","maxSessionSize","annotationList","storageLength","contentType","sliceSize","byteCharacters","byteArrays","offset","slice","byteNumbers","charCodeAt","byteArray","Uint8Array","blob","Blob","getRandomNumber","c","random","isNeedToSet","isScrollBar","setScrollDownValue","offsetHeight","eventType","boolValue","idString","isToolbarHidden","isNewFreeTextAnnot","getAnnotationToolStatus","isAnnotationButtonsEnabled","isPopupNoteVisible","isFormDesignerModule","getMousePosition","touchArg","targetParentRect","offsetParent","evt","obj","objects","wrapper","sourceWrapper","targetWrapper","actualObject","findToolToActivate","selectorBnds","paddedBounds","conn","vertexPoints","leaderHeight","leaderCount","newPoint1","elementAngle","findAngle","sourcePoint","targetPoint","segment","centerPoint","center","matrix_1","rotatedPoint","ten","parentTransform","pivot","actualSize","rotateThumb","inflate","checkResizeHandles","padding","bound","checkForResizeHandles","forty","isStamp","isSticky","isNodeShape","isInk","resizerLocation","checkSignatureFormField","fieldID","isFormFieldSign","nameTable","firePageMouseover","drawingObject","equals","prevPosition","sourceDrawingElement","getTool","includes","setCursor","disableHyperlinkNavigationUnderObjects","updateDefaultCursor","diagramMouseActionHelper","currentObject","freeTextSettings","allowEditTextOnly","mouseMove","obj_1","updateFormFieldInitialSize","drawHelper","previousActivePage","point","lastElementChild","shapeElement","mouseMoveforce","sourceElement","currentElement","mouseLeave","initialEventArgs","freeTextAnnotModule","cursorType","corner","setResizerCursorType","isCommentIconAdded","isNewAddedAnnot","endPoint","viewerPositions","mousePositions","strokeColor","thicknes","thickness","author","subject","modifiedDate","isFormField","field_1","borderColor","fireFormFieldMouseoverEvent","fireAnnotationMouseover","fireFormFieldMouseLeaveEvent","fireAnnotationMouseLeave","annotationObject","field_2","fromTarget","dataJson","field_3","resizerCursorType","stampSettings","handWrittenSignatureSettings","inkAnnotationSettings","measureType","lineSettings","arrowSettings","rectangleSettings","circleSettings","polygonSettings","distanceSettings","perimeterSettings","areaSettings","radiusSettings","volumeSettings","which","isMultipleSelect","isGroupAction","dragging","onShapesMouseup","isSkipped","stampObj","customStampSettings","nodePropertyChange","isStampAddMode","stampName","signatureName","customStampName","customStampImageSource","enableCustomStamp","isAddToMenu","resetAnnotation","signObject","storeSignatureData","fireSignatureAdd","saveImageString","canvasPaddingLeft","canvasPaddingWidth","top_4","enableAutoFit","defautWidth","annotModule","primaryToolbar","deSelectItem","freeTextEditItem","mouseDown","signatureFieldAnnotation","findIndex","el","target_1","fireFormFieldClickEvent","exportAnnotationsAsObject","isAnnotations","updateExportItem","createRequestForExportAnnotations","Json","setStyleToTextDiv","textDiv","fontHeight","zoomvalue","margin","ConvertPointToPixel","number","formFieldsSize","clearFormFieldStorage","exportFormFieldsAsObject","importAnnotations","importData","annotationDataFormat","isXfdf","createRequestForImportAnnotations","exportAnnotations","isBase64String","createAnnotationJsonData","fireExportStart","exportObject","fireExportFailed","promise_2","promise_3","reRenderAnnotations","fireImportSuccess","fireImportStart","btoa","importedData","fireImportFailed","errorDetails","count","combineImportedData","importPageCollections","textMarkupObject","shapeObject","measureShapeObject","stampObject","stickyObject","freeTextObject","signatureObject","inkObject","annotationCanvas","isAdded","annotObject","checkAnnotationCollections","checkAnnotationCommentsCollections","renderAnnotationComments","updateCollections","updateTextMarkupAnnotationCollections","updateShapeAnnotationCollections","updateMeasureAnnotationCollections","updateStampAnnotationCollections","updateStickyNotesAnnotationCollections","updateFreeTextAnnotationCollections","checkSignatureCollections","updateSignatureCollections","updateImportedAnnotationsInDocumentCollections","createAnnotationsCollection","updateAnnotationsInDocumentCollections","importedAnnotations","documentAnnotationCollection","pageCollections","documetCollections","findImportedAnnotations","a","AnnotName","isNewlyAdded","SignatureName","annotationCollections","selectAnnotationCollections","savePageAnnotations","s","saveImportedTextMarkupAnnotations","saveImportedShapeAnnotations","saveImportedMeasureAnnotations","saveImportedStampAnnotations","saveImportedStickyNotesAnnotations","saveImportedFreeTextAnnotations","signaturCollection","signaturInkCollection","excistingImportAnnotation","newlyImportAnnotation","checkImportedData","concat","measureObject","inkAnnotationObjct","resut","some","existingCollection","newCollection","checkAnnotationWidth","points","minWidth","maxHeight","deleteAnnotations","accordionContent","accordionContentContainer","childElementCount","annotationMenuObj","freeTextPageNumbers","stampPageNumber","inkAnnotationindex","annotationCollectionList","addAnnotation","importAnnotation","documentCollections","isAnnotationObject","annotationCount","newAnnotation","ShapeAnnotationType","AnnotationAddMode","annotationAddMode","Author","AnnotationSelectorSettings","AnnotationSettings","PageNumber","ModifiedDate","Subject","Note","note","annotationId","IsCommentLock","isCommentLock","Comments","updateComments","review","State","state","StateModel","stateModel","CustomData","customData","Opacity","AnnotType","Color","IsMultiSelect","isMultiSelect","TextMarkupAnnotationType","textMarkupAnnotationType","TextMarkupContent","textMarkupContent","TextMarkupStartIndex","textMarkupStartIndex","TextMarkupEndIndex","textMarkupEndIndex","rect","convertBounds","Bounds","Icon","StrokeColor","Name","MarkupText","dynamicText","Text","TextAlign","textAlign","Thickness","FillColor","FontColor","FontSize","FontFamily","Rotate","Font","font","isBold","isItalic","isStrikeout","isUnderline","icon","isDynamic","RotateAngle","StampAnnotationType","stampAnnotationType","CreationDate","creationDate","apperarance","stampAnnotationPath","Apperarance","IsDynamic","stampFillcolor","PathData","IsPathData","IsSignature","BorderStyle","borderStyle","BorderDashArray","borderDashArray","IsCloudShape","isCloudShape","CloudIntensity","cloudIntensity","RectangleDifference","rectangleDifference","LineHeadStart","lineHeadStart","LineHeadEnd","lineHeadEnd","IsLocked","isLocked","EnableShapeLabel","LabelContent","LabelFillColor","LabelBorderColor","labelBorderColor","LabelBounds","labelBounds","LabelSettings","labelSettings","LeaderLength","leaderLength","LeaderLineExtenstion","leaderLineExtension","convertVertexPoints","VertexPoints","calibrate","Calibrate","unit","conversionFactor","fractionalType","denominator","formatDenominator","distance","area","targetUnitConversion","depth","Indent","indent","Caption","caption","CaptionPosition","captionPosition","LeaderLineExtension","LeaderLineOffset","leaderLineOffset","isRect","Left","Right","Bottom","top_5","Top","X","ConvertPixelToPoint","Y","IsLock","currentPageContainer","blur","isEdited","isDocumentEdited","getWindowDevicePixelRatio","devicePixelRatio","getZoomRatio","zoom","importJsonForRotatedDocuments","originalRotation","pageDetails","getRotationAngle","calculateVertexPoints","vPoints","point_1","point_2"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/base/pdfviewer-base.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement, Browser, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu, Signature, PdfFormFieldBase } from '../index';\nimport { NavigationPane } from './navigation-pane';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { AjaxHandler } from '../index';\nimport { Point, Rect, identityMatrix, transformPointByMatrix, contains, rotateMatrix } from '@syncfusion/ej2-drawings';\nimport { SelectTool, MoveTool, ResizeTool, ConnectTool, NodeDrawingTool, PolygonDrawingTool, LineTool, RotateTool, StampTool, InkDrawingTool } from '../drawing/tools';\nimport { Selector } from '../drawing/selector';\nimport { ActiveElements, findActiveElement } from '../drawing/action';\nimport { renderAdornerLayer } from '../drawing/dom-util';\nimport { AnnotationDataFormat } from './types';\nimport { cloneObject } from '../drawing/drawing-util';\nimport { BlazorContextMenu } from './blazor-context-menu';\nimport { createSpinner, showSpinner, hideSpinner } from './spinner';\nimport { BlazorUiAdaptor } from './blazor-ui-adaptor';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n *\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    /**\n     * Initialize the constructor of PDFViewerBase\n     *\n     * @param { PdfViewer } viewer - Specified PdfViewer class.\n     */\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.isReRenderRequired = true;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        /**\n         * @private\n         */\n        this.activeElements = new ActiveElements();\n        /**\n         * @private\n         */\n        this.mouseDownEvent = null;\n        /**\n         * @private\n         */\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        /**\n         * @private\n         */\n        this.signatureAdded = false;\n        /**\n         * @private\n         */\n        this.isFreeTextSelected = false;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        /**\n         * @private\n         */\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.sessionStorage = [];\n        /**\n         * @private\n         */\n        this.isLoadedFormFieldAdded = false;\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        /**\n         * @private\n         */\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.passwordData = '';\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        /**\n         * @private\n         */\n        this.mouseLeft = 0;\n        /**\n         * @private\n         */\n        this.mouseTop = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.previousTime = 0;\n        this.currentTime = 0;\n        this.isTouchScrolled = false;\n        this.isLongTouchPropagated = false;\n        // eslint-disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // eslint-disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        /**\n         * @private\n         */\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        this.scrollX = 0;\n        this.scrollY = 0;\n        this.ispageMoved = false;\n        this.isThumb = false;\n        this.isTapHidden = false;\n        // eslint-disable-next-line\n        this.singleTapTimer = null;\n        this.tapCount = 0;\n        this.inputTapCount = 0;\n        /**\n         * @private\n         */\n        this.isInitialLoaded = false;\n        this.annotationPageList = [];\n        this.importPageList = [];\n        /**\n         * @private\n         */\n        this.isImportAction = false;\n        this.isImportedAnnotation = false;\n        /**\n         * @private\n         */\n        this.isAnnotationCollectionRemoved = false;\n        /**\n         * @private\n         */\n        this.tool = null;\n        // eslint-disable-next-line\n        this.action = 'Select';\n        /**\n         * @private\n         */\n        this.eventArgs = null;\n        /**\n         * @private\n         */\n        this.inAction = false;\n        /**\n         * @private\n         */\n        this.isMouseDown = false;\n        /**\n         * @private\n         */\n        this.isStampMouseDown = false;\n        /**\n         * @private\n         */\n        this.stampAdded = false;\n        /**\n         * @private\n         */\n        this.customStampCount = 0;\n        /**\n         * @private\n         */\n        this.isDynamicStamp = false;\n        /**\n         * @private\n         */\n        this.isMixedSizeDocument = false;\n        /**\n         * @private\n         */\n        this.highestWidth = 0;\n        /**\n         * @private\n         */\n        this.highestHeight = 0;\n        /**\n         * @private\n         */\n        this.customStampCollection = [];\n        /**\n         * @private\n         */\n        this.isAlreadyAdded = false;\n        /**\n         * @private\n         */\n        this.isWebkitMobile = false;\n        /**\n         * @private\n         */\n        this.isFreeTextContextMenu = false;\n        /**\n         * @private\n         */\n        this.isSelection = false;\n        /**\n         * @private\n         */\n        this.isAddAnnotation = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.annotationComments = null;\n        /**\n         * @private\n         */\n        this.isToolbarSignClicked = false;\n        /**\n         * @private\n         */\n        this.signatureCount = 0;\n        /**\n         * @private\n         */\n        this.isSignatureAdded = false;\n        /**\n         * @private\n         */\n        this.isNewSignatureAdded = false;\n        /**\n         * @private\n         */\n        this.isInitialPageMode = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.documentAnnotationCollections = null;\n        /**\n         * @private\n         */\n        this.annotationRenderredList = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.annotationStorage = {};\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.formFieldStorage = {};\n        /**\n         * @private\n         */\n        this.isStorageExceed = false;\n        /**\n         * @private\n         */\n        this.isNewStamp = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.downloadCollections = {};\n        /**\n         * @private\n         */\n        this.isAnnotationAdded = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.annotationEvent = null;\n        /**\n         * @private\n        */\n        this.isAnnotationDrawn = false;\n        /**\n         * @private\n         */\n        this.isAnnotationSelect = false;\n        /**\n         * @private\n         */\n        this.isAnnotationMouseDown = false;\n        /**\n         * @private\n         */\n        this.isAnnotationMouseMove = false;\n        /**\n         * @private\n         */\n        this.validateForm = false;\n        /**\n         * @private\n         */\n        this.isMinimumZoom = false;\n        /**\n         * @private\n         */\n        this.documentLoaded = false;\n        this.tileRenderCount = 0;\n        this.tileRequestCount = 0;\n        /**\n         * @private\n         */\n        this.isTileImageRendered = false;\n        this.isDataExits = false;\n        this.requestLists = [];\n        this.tilerequestLists = [];\n        /**\n         * @private\n         */\n        this.isInkAdded = false;\n        /**\n         * @private\n         */\n        this.inkCount = 0;\n        /**\n         * @private\n         */\n        this.isAddedSignClicked = false;\n        /**\n         * @private\n         */\n        this.imageCount = 0;\n        /**\n         * @private\n         */\n        this.isMousedOver = false;\n        /**\n         * @private\n         */\n        this.isFormFieldSelect = false;\n        /**\n         * @private\n         */\n        this.isFormFieldMouseDown = false;\n        /**\n         * @private\n         */\n        this.isFormFieldMouseMove = false;\n        /**\n         * @private\n         */\n        this.isFormFieldMousedOver = false;\n        /**\n         * @private\n         */\n        this.isPassword = false;\n        this.isDrawnCompletely = false;\n        /**\n         * @private\n         */\n        this.isAddComment = false;\n        /**\n         * @private\n         */\n        this.drawSignatureWithTool = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.formFieldCollection = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.nonFillableFields = {};\n        /**\n         * @private\n         */\n        this.isInitialField = false;\n        /**\n         * @private\n         */\n        this.isTouchDesignerMode = false;\n        /**\n         * @private\n         */\n        this.isPrint = false;\n        /**\n         * @private\n         */\n        this.isJsonImported = false;\n        /**\n         * @private\n         */\n        this.isJsonExported = false;\n        /**\n         * @private\n         */\n        this.isPageRotated = false;\n        this.downloadFileName = '';\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.isFocusField = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.focusField = [];\n        /**\n         * @returns {void}\n         */\n        this.clearSessionStorage = function () {\n            var documentId = '';\n            if (Browser.isIE || Browser.info.name === 'edge') {\n                documentId = decodeURI(window.sessionStorage.getItem('hashId'));\n            }\n            else {\n                documentId = window.sessionStorage.getItem('hashId');\n            }\n            var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n            if (documentId !== null) {\n                // eslint-disable-next-line max-len\n                var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount, action: 'Unload', elementId: _this.pdfViewer.element.id };\n                var actionName = window.sessionStorage.getItem('unload');\n                var serviceUrl = window.sessionStorage.getItem('serviceURL');\n                if (serviceUrl && serviceUrl !== 'undefined') {\n                    // eslint-disable-next-line\n                    var browserSupportsKeepalive = 'keepalive' in new Request('');\n                    if (browserSupportsKeepalive) {\n                        // eslint-disable-next-line\n                        var headerValue = _this.setUnloadRequestHeaders();\n                        var credentialsData = _this.pdfViewer.ajaxRequestSettings.withCredentials ? 'include' : 'omit';\n                        fetch(serviceUrl + '/' + actionName, {\n                            method: 'POST',\n                            credentials: credentialsData,\n                            headers: headerValue,\n                            body: JSON.stringify(jsonObject)\n                        });\n                    }\n                }\n                else if (isBlazor()) {\n                    _this.clearCache(actionName, jsonObject, _this);\n                }\n            }\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_textMarkup');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_shape');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_shape_measure');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_stamp');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_sticky');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_freetext');\n            window.sessionStorage.removeItem(_this.documentId + '_formfields');\n            window.sessionStorage.removeItem(_this.documentId + '_formDesigner');\n            window.sessionStorage.removeItem(_this.documentId + '_annotations_sign');\n            window.sessionStorage.removeItem(_this.documentId + '_pagedata');\n            window.sessionStorage.removeItem('hashId');\n            window.sessionStorage.removeItem('documentLiveCount');\n            window.sessionStorage.removeItem('currentDocument');\n            window.sessionStorage.removeItem('serviceURL');\n            window.sessionStorage.removeItem('unload');\n        };\n        /**\n         * @private\n         * @param {MouseEvent} event - Mouse event.\n         * @returns {void}\n         */\n        this.onWindowResize = function (event) {\n            var proxy = null;\n            proxy = _this;\n            if (_this.pdfViewer.enableRtl) {\n                // eslint-disable-next-line max-len\n                proxy.viewerContainer.style.right = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n                // eslint-disable-next-line max-len\n                proxy.viewerContainer.style.left = (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.commentPanelContainer.offsetWidth : 0) + 'px';\n            }\n            else {\n                // eslint-disable-next-line max-len\n                proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n                // eslint-disable-next-line max-len\n                proxy.viewerContainer.style.right = (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.commentPanelContainer.offsetWidth : 0) + 'px';\n            }\n            // eslint-disable-next-line\n            var viewerElementWidth = (proxy.pdfViewer.element.clientWidth > 0 ? proxy.pdfViewer.element.clientWidth : proxy.pdfViewer.element.style.width);\n            // eslint-disable-next-line\n            var viewerWidth = (viewerElementWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) - (proxy.navigationPane.commentPanelContainer ? proxy.navigationPane.getViewerContainerRight() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // eslint-disable-next-line\n                var toolbarContainer = isBlazor() ? proxy.pdfViewer.element.querySelector('.e-pv-toolbar') : proxy.getElement('_toolbarContainer');\n                var toolbarHeight = 0;\n                var formDesignerToolbarHeight = 0;\n                if (toolbarContainer) {\n                    toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n                }\n                if (proxy.isAnnotationToolbarHidden() || (Browser.isDevice && !_this.pdfViewer.enableDesktopMode)) {\n                    if (toolbarHeight === 0) {\n                        if (_this.navigationPane.isNavigationToolbarVisible) {\n                            // eslint-disable-next-line\n                            var navigationToolbar = proxy.getElement('_navigationToolbar');\n                            toolbarHeight = navigationToolbar.getBoundingClientRect().height;\n                        }\n                    }\n                    if (!proxy.isFormDesignerToolbarHidded()) {\n                        var formDesignerToolbar = proxy.getElement('_formdesigner_toolbar');\n                        formDesignerToolbarHeight = formDesignerToolbar ? formDesignerToolbar.getBoundingClientRect().height : 0;\n                    }\n                    // eslint-disable-next-line max-len\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + formDesignerToolbarHeight);\n                }\n                else {\n                    // eslint-disable-next-line\n                    var annotationToolbarContainer = isBlazor() ? proxy.pdfViewer.element.querySelector('.e-pv-annotation-toolbar') : proxy.getElement('_annotation_toolbar');\n                    var annotationToolbarHeight = 0;\n                    if (annotationToolbarContainer) {\n                        annotationToolbarHeight = annotationToolbarContainer.getBoundingClientRect().height;\n                    }\n                    // eslint-disable-next-line max-len\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + annotationToolbarHeight);\n                }\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            if (proxy.pdfViewer.bookmarkViewModule && (Browser.isDevice && !_this.pdfViewer.enableDesktopMode)) {\n                var bookmarkContainer = proxy.getElement('_bookmarks_container');\n                if (bookmarkContainer) {\n                    bookmarkContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n                }\n            }\n            if (proxy.viewerContainer.style.height === '0px') {\n                if (proxy.pdfViewer.height.toString() === 'auto') {\n                    proxy.pdfViewer.height = 500;\n                    proxy.viewerContainer.style.height = proxy.pdfViewer.height + 'px';\n                }\n                else {\n                    proxy.viewerContainer.style.height = proxy.pdfViewer.element.style.height;\n                }\n            }\n            if (proxy.viewerContainer.style.width === '0px') {\n                if (proxy.pdfViewer.width.toString() === 'auto') {\n                    proxy.pdfViewer.width = 500;\n                    proxy.viewerContainer.style.width = proxy.pdfViewer.width + 'px';\n                }\n                else {\n                    proxy.viewerContainer.style.width = proxy.pdfViewer.element.style.width;\n                }\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.viewerContainer.clientWidth === 0) {\n                proxy.pageContainer.style.width = proxy.pdfViewer.element.style.width;\n            }\n            if (!isBlazor()) {\n                if (proxy.pdfViewer.toolbarModule) {\n                    // eslint-disable-next-line max-len\n                    proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n                }\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule && (!Browser.isDevice || _this.pdfViewer.enableDesktopMode)) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            if (viewerWidth !== 0) {\n                if (!proxy.navigationPane.isBookmarkListOpen) {\n                    proxy.updateZoomValue();\n                }\n            }\n            if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                proxy.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(proxy.mobileScrollerContainer.style.width)) + 'px';\n                proxy.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(proxy.mobilePageNoContainer.style.width) / 2) + 'px';\n                proxy.mobilePageNoContainer.style.top = (proxy.pdfViewer.element.clientHeight / 2) + 'px';\n                proxy.updateMobileScrollerPosition();\n            }\n            else {\n                proxy.navigationPane.setResizeIconTop();\n                proxy.navigationPane.setCommentPanelResizeIconTop();\n                if (event && event.type === 'resize') {\n                    proxy.signatureModule.updateCanvasSize();\n                }\n            }\n            if (proxy.navigationPane.sideBarToolbar) {\n                proxy.navigationPane.sideBarToolbar.style.height = proxy.viewerContainer.style.height;\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMousedown = function (event) {\n            _this.isFreeTextContextMenu = false;\n            var isUpdate = false;\n            _this.isSelection = true;\n            if (event.button === 0 && !_this.getPopupNoteVisibleStatus() && !_this.isClickedOnScrollBar(event, false)) {\n                _this.isViewerMouseDown = true;\n                // eslint-disable-next-line\n                var target = event.target;\n                if (event.detail === 1 && target.className !== 'e-pdfviewer-formFields' && target.className !== 'free-text-input') {\n                    isUpdate = true;\n                    _this.focusViewerContainer(true);\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                _this.mouseLeft = event.clientX;\n                _this.mouseTop = event.clientY;\n                // eslint-disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event, true) && !_this.isTextSelectionDisabled) {\n                    if (!isIE && target.className !== 'e-pdfviewer-formFields' && target.className !== 'e-pdfviewer-ListBox' && target.className !== 'e-pv-formfield-dropdown'\n                        && target.className !== 'e-pv-formfield-listbox') {\n                        event.preventDefault();\n                    }\n                    if (target.className !== 'e-pv-droplet') {\n                        _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    }\n                }\n            }\n            if (_this.isClickedOnScrollBar(event, false)) {\n                _this.isViewerMouseDown = true;\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // eslint-disable-next-line max-len\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n            if (_this.isShapeBasedAnnotationsEnabled()) {\n                _this.diagramMouseDown(event);\n            }\n            if (_this.pdfViewer.annotation && _this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer) {\n                if (!isUpdate) {\n                    _this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement = false;\n                    _this.updateCommentPanel();\n                    isUpdate = true;\n                }\n            }\n            if (isBlazor()) {\n                _this.mouseDownHandler(event);\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMouseup = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (_this.isViewerMouseDown) {\n                    if (_this.scrollHoldTimer) {\n                        clearTimeout(_this.scrollHoldTimer);\n                        _this.scrollHoldTimer = null;\n                    }\n                    if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                        _this.pageViewScrollChanged(_this.currentPageNumber);\n                    }\n                }\n                var isSignatureFieldReadOnly = false;\n                if (event.target) {\n                    if (event.target.className == 'e-pv-show-designer-name' && event.target.id.split('_', 1) != '') {\n                        isSignatureFieldReadOnly = document.getElementById(event.target.id.split('_', 1)).disabled;\n                    }\n                    if (event.target.className == 'foreign-object' && event.target.children[0]) {\n                        isSignatureFieldReadOnly = event.target.children[0].disabled;\n                    }\n                }\n                if (isSignatureFieldReadOnly && _this.pdfViewer.annotation) {\n                    _this.pdfViewer.annotation.clearSelection();\n                }\n                if (_this.isShapeBasedAnnotationsEnabled() && !isSignatureFieldReadOnly) {\n                    _this.diagramMouseUp(event);\n                    if (_this.pdfViewer.annotation) {\n                        _this.pdfViewer.annotation.onAnnotationMouseUp();\n                    }\n                }\n                if (_this.pdfViewer.selectedItems.formFields.length > 0) {\n                    // eslint-disable-next-line max-len\n                    if (!isNullOrUndefined(_this.pdfViewer.toolbar) && !isNullOrUndefined(_this.pdfViewer.toolbar.formDesignerToolbarModule) && !Browser.isDevice) {\n                        _this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);\n                    }\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    if (!isNullOrUndefined(_this.pdfViewer.toolbar) && !isNullOrUndefined(_this.pdfViewer.toolbar.formDesignerToolbarModule) && !Browser.isDevice) {\n                        _this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(false);\n                    }\n                }\n                _this.isSelection = false;\n                // eslint-disable-next-line max-len\n                var commentElement = document.getElementById(_this.pdfViewer.element.id + '_commantPanel');\n                if (commentElement && commentElement.style.display === 'block') {\n                    if (_this.pdfViewer.selectedItems) {\n                        if (_this.pdfViewer.selectedItems.annotations.length !== 0) {\n                            // eslint-disable-next-line\n                            var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.pdfViewer.currentPageNumber);\n                            if (accordionExpand) {\n                                accordionExpand.ej2_instances[0].expandItem(true);\n                            }\n                            // eslint-disable-next-line\n                            var commentsDiv = document.getElementById(_this.pdfViewer.selectedItems.annotations[0].annotName);\n                            if (commentsDiv) {\n                                if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                                    commentsDiv.firstChild.click();\n                                }\n                            }\n                        }\n                    }\n                }\n                if (event.button === 0 && !_this.isClickedOnScrollBar(event, false)) {\n                    // 0 is for left button.\n                    var eventTarget = event.target;\n                    var offsetX = event.clientX;\n                    var offsetY = event.clientY;\n                    var zoomFactor = _this.getZoomFactor();\n                    var pageIndex = _this.currentPageNumber;\n                    if (eventTarget) {\n                        // eslint-disable-next-line\n                        var pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1] || eventTarget.id.split('_pageDiv_')[1];\n                        // eslint-disable-next-line\n                        pageIndex = parseInt(pageString);\n                    }\n                    var pageDiv = _this.getElement('_pageDiv_' + pageIndex);\n                    if (pageDiv) {\n                        var pageCurrentRect = pageDiv.getBoundingClientRect();\n                        offsetX = (event.clientX - pageCurrentRect.left) / zoomFactor;\n                        offsetY = (event.clientY - pageCurrentRect.top) / zoomFactor;\n                    }\n                    // eslint-disable-next-line max-len\n                    if (eventTarget && eventTarget.classList && !eventTarget.classList.contains('e-pv-hyperlink') && !eventTarget.classList.contains('e-pv-page-container')) {\n                        // eslint-disable-next-line\n                        _this.pdfViewer.firePageClick(offsetX, offsetY, pageIndex + 1);\n                        if (_this.pdfViewer.formFieldsModule && !_this.pdfViewer.formDesignerModule) {\n                            _this.pdfViewer.formFieldsModule.removeFocus();\n                        }\n                    }\n                    if (_this.isTextMarkupAnnotationModule() && !_this.isToolbarInkClicked) {\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);\n                    }\n                    if (_this.pdfViewer.formDesignerModule && !_this.pdfViewer.annotationModule) {\n                        _this.pdfViewer.formDesignerModule.updateCanvas(pageIndex);\n                    }\n                    // eslint-disable-next-line max-len\n                    if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n                _this.isViewerMouseDown = false;\n            }\n        };\n        /**\n         * @param {WheelEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (event.ctrlKey) {\n                var zoomDifference = 25;\n                if (_this.pdfViewer.magnification.zoomFactor < 1) {\n                    zoomDifference = 10;\n                }\n                if (_this.pdfViewer.magnification.zoomFactor >= 2) {\n                    zoomDifference = 50;\n                }\n                // eslint-disable-next-line\n                if (event.wheelDelta > 0) {\n                    _this.pdfViewer.magnification.zoomTo((_this.pdfViewer.magnification.zoomFactor * 100) + zoomDifference);\n                }\n                else {\n                    _this.pdfViewer.magnification.zoomTo((_this.pdfViewer.magnification.zoomFactor * 100) - zoomDifference);\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        /**\n         * @param {KeyboardEvent} event - The KeyboardEvent.\n         * @returns {void}\n         */\n        this.onWindowKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if ((_this.isFreeTextAnnotationModule() && _this.pdfViewer.annotationModule\n                && (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === true\n                    || _this.pdfViewer.annotationModule.inputElementModule.isInFocus === true))) {\n                return;\n            }\n            if (!event.ctrlKey || !isCommandKey) {\n                switch (event.keyCode) {\n                    case 27:\n                        if (_this.pdfViewer.toolbar) {\n                            _this.pdfViewer.toolbar.addInkAnnotation();\n                            _this.pdfViewer.toolbar.deSelectCommentAnnotation();\n                            _this.pdfViewer.toolbar.updateStampItems();\n                            if (_this.pdfViewer.toolbar.annotationToolbarModule) {\n                                if (isBlazor()) {\n                                    _this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor();\n                                }\n                                else {\n                                    _this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems();\n                                }\n                            }\n                            if (_this.pdfViewer.isFormDesignerToolbarVisible && document.getElementById('FormField_helper_html_element')) {\n                                var formFieldElement = document.getElementById('FormField_helper_html_element');\n                                if (formFieldElement) {\n                                    formFieldElement.remove();\n                                }\n                            }\n                            _this.pdfViewer.tool = '';\n                            _this.focusViewerContainer();\n                        }\n                        break;\n                    case 9:\n                        if (event.target && event.target.id && _this.pdfViewer.formFields) {\n                            for (var i = 0; i < _this.pdfViewer.formFields.length; i++) {\n                                var formField = _this.pdfViewer.formFields[i];\n                                if (event.target.id === formField.id) {\n                                    // eslint-disable-next-line\n                                    var field = {\n                                        value: formField.value, fontFamily: formField.fontFamily, fontSize: formField.fontSize, fontStyle: formField.fontStyle,\n                                        // eslint-disable-next-line\n                                        color: formField.color, backgroundColor: formField.backgroundColor, alignment: formField.alignment, isReadonly: formField.isReadonly, visibility: formField.visibility,\n                                        // eslint-disable-next-line\n                                        maxLength: formField.maxLength, isRequired: formField.isRequired, isPrint: formField.isPrint, rotation: formField.rotateAngle, tooltip: formField.tooltip,\n                                        // eslint-disable-next-line\n                                        options: formField.options, isChecked: formField.isChecked, isSelected: formField.isSelected\n                                    };\n                                    _this.pdfViewer.fireFocusOutFormField(field, formField.pageIndex);\n                                }\n                            }\n                        }\n                        break;\n                }\n            }\n        };\n        /**\n         * @param {KeyboardEvent} event - The KeyboardEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if ((_this.isFreeTextAnnotationModule() && _this.pdfViewer.annotationModule\n                && (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === true\n                    || _this.pdfViewer.annotationModule.inputElementModule.isInFocus === true))) {\n                return;\n            }\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        if (_this.pdfViewer.selectedItems.annotations.length || _this.pdfViewer.selectedItems.formFields.length) {\n                            _this.pdfViewer.copy();\n                            _this.contextMenuModule.previousAction = 'Copy';\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    case 80: // p key\n                        if (_this.pdfViewer.printModule && _this.pdfViewer.enablePrint) {\n                            event.preventDefault();\n                            _this.pdfViewer.print.print();\n                        }\n                        break;\n                    case 90: //z key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.undo();\n                        }\n                        break;\n                    case 88: //x key\n                        if (_this.pdfViewer.selectedItems.annotations.length || _this.pdfViewer.selectedItems.formFields.length) {\n                            _this.pdfViewer.cut();\n                            _this.contextMenuModule.previousAction = 'Cut';\n                        }\n                        break;\n                    case 89: //y key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.redo();\n                        }\n                        break;\n                    case 86: //v key\n                        // eslint-disable-next-line max-len\n                        if ((_this.pdfViewer.annotation && _this.pdfViewer.annotation.isShapeCopied) || (_this.pdfViewer.formFields && _this.pdfViewer.formDesigner.isShapeCopied)) {\n                            _this.pdfViewer.paste();\n                            _this.contextMenuModule.previousAction = 'Paste';\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            else {\n                switch (event.keyCode) {\n                    case 46:\n                        _this.DeleteKeyPressed(event);\n                        break;\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // eslint-disable-next-line\n            var isIE = !!document.documentMode;\n            var target = event.target;\n            if (_this.action === 'Drag') {\n                event.preventDefault();\n            }\n            // eslint-disable-next-line max-len\n            if (_this.isViewerMouseDown && !(_this.action === 'Perimeter' || _this.action === 'Polygon' || _this.action === 'Line' || _this.action === 'DrawTool' || _this.action === 'Distance')) {\n                // eslint-disable-next-line max-len\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled && !_this.getPopupNoteVisibleStatus()) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        if (event.target.className != 'e-pdfviewer-formFields')\n                            event.preventDefault();\n                        _this.mouseX = event.clientX;\n                        _this.mouseY = event.clientY;\n                        // eslint-disable-next-line\n                        var annotationModule = _this.pdfViewer.annotationModule;\n                        // eslint-disable-next-line max-len\n                        if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isDropletClicked && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n                            annotationModule.textMarkupAnnotationModule.textSelect(event.target, _this.mouseX, _this.mouseY);\n                        }\n                        else {\n                            _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                        }\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else if (_this.skipPreventDefault(target)) {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n            if (_this.isShapeBasedAnnotationsEnabled()) {\n                var canvas = void 0;\n                // eslint-disable-next-line max-len\n                if (event.target && (event.target.id.indexOf('_text') > -1 || (event.target.parentElement.classList.contains('foreign-object')) || event.target.id.indexOf('_annotationCanvas') > -1 || event.target.classList.contains('e-pv-hyperlink')) && _this.pdfViewer.annotation || event.target.classList.contains('e-pdfviewer-formFields')) {\n                    var pageIndex = _this.pdfViewer.annotation.getEventPageNumber(event);\n                    var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                    if (diagram) {\n                        var canvas1 = diagram.getBoundingClientRect();\n                        var left = canvas1.x ? canvas1.x : canvas1.left;\n                        var top_1 = canvas1.y ? canvas1.y : canvas1.top;\n                        // eslint-disable-next-line max-len\n                        if (_this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation && _this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType === 'Image') {\n                            canvas = new Rect(left, top_1, canvas1.width - 10, canvas1.height - 10);\n                        }\n                        else {\n                            canvas = new Rect(left + 1, top_1 + 1, canvas1.width - 3, canvas1.height - 3);\n                        }\n                    }\n                }\n                else if (!_this.pdfViewer.annotationModule && _this.pdfViewer.formDesignerModule) {\n                    var pageIndex = _this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n                    var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                    if (diagram) {\n                        var canvas1 = diagram.getBoundingClientRect();\n                        var left = canvas1.x ? canvas1.x : canvas1.left;\n                        var top_2 = canvas1.y ? canvas1.y : canvas1.top;\n                        canvas = new Rect(left + 10, top_2 + 10, canvas1.width - 10, canvas1.height - 10);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                var stampModule = _this.pdfViewer.annotationModule ? _this.pdfViewer.annotationModule.stampAnnotationModule : null;\n                if (canvas && canvas.containsPoint({ x: _this.mouseX, y: _this.mouseY }) && !(stampModule && stampModule.isStampAnnotSelected)) {\n                    _this.diagramMouseMove(event);\n                    _this.annotationEvent = event;\n                }\n                else {\n                    _this.diagramMouseLeave(event);\n                    if (_this.isAnnotationDrawn && _this.action !== 'Ink') {\n                        _this.diagramMouseUp(event);\n                        _this.isAnnotationAdded = true;\n                    }\n                }\n                if (_this.pdfViewer.enableStampAnnotations) {\n                    if (stampModule && stampModule.isStampAnnotSelected) {\n                        _this.pdfViewer.tool = 'Stamp';\n                        _this.tool = new StampTool(_this.pdfViewer, _this);\n                        _this.isMouseDown = true;\n                        stampModule.isStampAnnotSelected = false;\n                        stampModule.isNewStampAnnot = true;\n                    }\n                }\n                if (_this.isSignatureAdded && _this.pdfViewer.enableHandwrittenSignature) {\n                    _this.pdfViewer.tool = 'Stamp';\n                    _this.tool = new StampTool(_this.pdfViewer, _this);\n                    _this.isMouseDown = true;\n                    _this.isSignatureAdded = false;\n                    _this.isNewSignatureAdded = true;\n                }\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.panOnMouseMove = function (event) {\n            var isStampMode = false;\n            // eslint-disable-next-line max-len\n            if (_this.action === 'Ink' || _this.action === \"Line\" || _this.action === 'Perimeter' || _this.action === 'Polygon' || _this.action === 'DrawTool' || _this.action === 'Drag' || _this.action.indexOf('Rotate') !== -1 || _this.action.indexOf('Resize') !== -1) {\n                isStampMode = true;\n            }\n            // eslint-disable-next-line max-len\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && !isStampMode) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n            if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.textSelectionModule.isTextSelection) {\n                event.preventDefault();\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnMouseOver = function (event) {\n            // eslint-disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        /**\n         * @param {MouseEvent} event - The MouseEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getCurrentTextMarkupAnnotation()) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        if (!_this.getTextMarkupAnnotationMode()) {\n                            var pageNumber = parseFloat(event.target.id.split('_')[2]);\n                            _this.pdfViewer.fireTextSelectionStart(pageNumber + 1);\n                        }\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        if (_this.pdfViewer.contextMenuSettings.contextMenuAction === 'MouseUp') {\n                            _this.pdfViewer.textSelectionModule.calculateContextMenuPosition(event.clientY, event.clientX);\n                        }\n                        if (!_this.getTextMarkupAnnotationMode()) {\n                            _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                            _this.dblClickTimer = setTimeout(function () {\n                                _this.applySelection();\n                            }, 100);\n                            _this.pdfViewer.textSelectionModule.fireTextSelectEnd();\n                        }\n                        else if (_this.isTextMarkupAnnotationModule() && _this.getTextMarkupAnnotationMode()) {\n                            // eslint-disable-next-line max-len\n                            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                        }\n                    }\n                }\n                else if (_this.getCurrentTextMarkupAnnotation()) {\n                    // this.pdfViewer.annotationModule.showAnnotationPopup(event);\n                }\n                if (_this.action && (_this.action === 'Perimeter' || _this.action === 'Polygon') && _this.tool) {\n                    _this.eventArgs.position = _this.currentPosition;\n                    _this.getMouseEventArgs(_this.currentPosition, _this.eventArgs, event, _this.eventArgs.source);\n                    var ctrlKey = _this.isMetaKey(event);\n                    var info = { ctrlKey: event.ctrlKey, shiftKey: event.shiftKey };\n                    _this.eventArgs.info = info;\n                    _this.eventArgs.clickCount = event.detail;\n                    _this.tool.mouseUp(_this.eventArgs, true);\n                }\n                if (_this.pdfViewer.selectedItems ||\n                    (_this.pdfViewer.annotation && _this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)) {\n                    if (_this.pdfViewer.selectedItems.annotations.length !== 0) {\n                        // eslint-disable-next-line\n                        var currentAnnotation = _this.pdfViewer.selectedItems.annotations[0];\n                        // eslint-disable-next-line max-len\n                        if (_this.pdfViewer.annotationModule && !currentAnnotation.formFieldAnnotationType) {\n                            // eslint-disable-next-line max-len\n                            _this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName, currentAnnotation.pageIndex, currentAnnotation, null, true);\n                            if (_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus === false) {\n                                if (_this.isFreeTextAnnotation(_this.pdfViewer.selectedItems.annotations) === true) {\n                                    var elmtPosition = {};\n                                    elmtPosition.x = _this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                                    elmtPosition.y = _this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                                    // eslint-disable-next-line max-len\n                                    _this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition, _this.pdfViewer.selectedItems.annotations[0]);\n                                }\n                                else if (_this.pdfViewer.selectedItems.annotations[0].enableShapeLabel === true) {\n                                    var elmtPosition = {};\n                                    elmtPosition.x = _this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                                    elmtPosition.y = _this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                                    // eslint-disable-next-line max-len\n                                    _this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition, _this.pdfViewer.selectedItems.annotations[0]);\n                                }\n                                else {\n                                    // eslint-disable-next-line\n                                    var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.pdfViewer.currentPageNumber);\n                                    if (accordionExpand) {\n                                        accordionExpand.ej2_instances[0].expandItem(true);\n                                    }\n                                    // eslint-disable-next-line\n                                    var commentsDiv = document.getElementById(_this.pdfViewer.selectedItems.annotations[0].annotName);\n                                    if (commentsDiv) {\n                                        if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                                            commentsDiv.firstChild.click();\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        var annotation = _this.pdfViewer.annotation;\n                        var annotationModule = _this.pdfViewer.annotationModule;\n                        if (annotation && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                            // eslint-disable-next-line\n                            var annotation_1 = _this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n                            // eslint-disable-next-line max-len\n                            _this.pdfViewer.annotationModule.annotationSelect(annotation_1.annotName, _this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage, annotation_1, null, true);\n                            // eslint-disable-next-line\n                            var accordionExpand = document.getElementById(_this.pdfViewer.element.id + '_accordionContainer' + _this.currentPageNumber);\n                            if (accordionExpand) {\n                                accordionExpand.ej2_instances[0].expandItem(true);\n                            }\n                            // eslint-disable-next-line\n                            var comments = document.getElementById(annotation_1.annotName);\n                            if (comments) {\n                                comments.firstChild.click();\n                            }\n                        }\n                    }\n                }\n                if (_this.pdfViewer.designerMode && _this.pdfViewer.selectedItems.formFields.length > 0) {\n                    var eventArgs = { name: \"formFieldDoubleClick\", field: _this.pdfViewer.selectedItems.formFields[0], cancel: false };\n                    _this.pdfViewer.fireFormFieldDoubleClickEvent(eventArgs);\n                    if (!eventArgs.cancel) {\n                        _this.pdfViewer.formDesigner.createPropertiesWindow();\n                    }\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.pdfViewer.textSelectionModule.fireTextSelectEnd();\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        /**\n         * @param {DragEvent} event - The DragEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnDragStart = function (event) {\n            // eslint-disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // eslint-disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        // eslint-disable-next-line\n        this.onWindowMouseUp = function (event) {\n            _this.isFreeTextContextMenu = false;\n            _this.isNewStamp = false;\n            _this.signatureAdded = false;\n            // eslint-disable-next-line\n            var annotationModule = _this.pdfViewer.annotationModule;\n            // eslint-disable-next-line max-len\n            if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n                // eslint-disable-next-line\n                var modules = annotationModule.textMarkupAnnotationModule;\n                modules.isLeftDropletClicked = false;\n                modules.isDropletClicked = false;\n                modules.isRightDropletClicked = false;\n                if (!modules.currentTextMarkupAnnotation && window.getSelection().anchorNode === null) {\n                    modules.showHideDropletDiv(true);\n                }\n                else if (!modules.currentTextMarkupAnnotation && modules.currentTextMarkupAddMode === '') {\n                    modules.isTextMarkupAnnotationMode = false;\n                }\n            }\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (event.button === 0) {\n                    // eslint-disable-next-line max-len\n                    if (_this.isNewFreeTextAnnotation()) {\n                        if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                            // eslint-disable-next-line max-len\n                            if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                                if (window.getSelection().anchorNode !== null) {\n                                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);\n                                }\n                            }\n                            // eslint-disable-next-line\n                            var target = event.target;\n                            if (_this.viewerContainer.contains(event.target) && target.className !== 'e-pdfviewer-formFields' && target.className !== 'e-pv-formfield-input') {\n                                if (!_this.isClickedOnScrollBar(event, true) && !_this.isScrollbarMouseDown) {\n                                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);\n                                }\n                                else {\n                                    if (window.getSelection().anchorNode !== null) {\n                                        _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                                    }\n                                }\n                            }\n                        }\n                        else if (_this.getTextMarkupAnnotationMode()) {\n                            // eslint-disable-next-line\n                            var viewerElement = _this.pdfViewer.element;\n                            // eslint-disable-next-line\n                            var targetElement = event.target;\n                            if (viewerElement && targetElement) {\n                                if (viewerElement.id.split('_')[0] === targetElement.id.split('_')[0]) {\n                                    // eslint-disable-next-line max-len\n                                    _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                                }\n                            }\n                        }\n                    }\n                }\n                else if (event.button === 2) {\n                    if (_this.viewerContainer.contains(event.target) && _this.skipPreventDefault(event.target)) {\n                        if (_this.checkIsNormalText()) {\n                            window.getSelection().removeAllRanges();\n                        }\n                    }\n                }\n                if (_this.isViewerMouseDown) {\n                    _this.isViewerMouseDown = false;\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.clear();\n                        _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                    }\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return false;\n                }\n                else {\n                    return true;\n                }\n            }\n        };\n        /**\n         * @param {TouchEvent} event - The DragEvent.\n         * @returns {void}\n         */\n        this.onWindowTouchEnd = function (event) {\n            _this.signatureAdded = false;\n            // eslint-disable-next-line max-len\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        /**\n         * @param {TouchEvent} event - The TouchEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            var target = event.target;\n            // eslint-disable-next-line max-len\n            if (touchPoints.length === 1 && !(target.classList.contains('e-pv-hyperlink')) && _this.skipPreventDefault(target)) {\n                _this.preventTouchEvent(event);\n            }\n            if (event.touches.length === 1 && _this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                if (!_this.isToolbarInkClicked) {\n                    _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n                }\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            _this.scrollY = touchPoints[0].clientY;\n            _this.previousTime = new Date().getTime();\n            // eslint-disable-next-line max-len\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if ((Browser.isDevice && !_this.pdfViewer.enableDesktopMode) && _this.pageCount > 0 && !_this.isThumb && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                    _this.handleTaps(touchPoints);\n                }\n                if (!isBlazor() || !Browser.isDevice || _this.pdfViewer.enableDesktopMode) {\n                    _this.handleTextBoxTaps(touchPoints);\n                }\n                var designerMode = _this.isDesignerMode(target);\n                if (designerMode) {\n                    _this.contextMenuModule.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () {\n                            if (!_this.isMoving) {\n                                _this.isTouchDesignerMode = true;\n                                _this.contextMenuModule.open(_this.touchClientY, _this.touchClientX, _this.viewerContainer);\n                            }\n                        }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                    _this.isMoving = false;\n                }\n                else if ((_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled)) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () {\n                            _this.viewerContainerOnLongTouch(event);\n                        }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n            // eslint-disable-next-line\n            var toolbarModule = _this.pdfViewer.toolbarModule ? _this.pdfViewer.toolbarModule.annotationToolbarModule : 'null';\n            if (target.classList.contains('e-pv-text') && (!toolbarModule || !toolbarModule.textMarkupToolbarElement || toolbarModule.textMarkupToolbarElement.children.length === 0)) {\n                target.classList.add('e-pv-text-selection-none');\n            }\n            _this.diagramMouseDown(event);\n            // eslint-disable-next-line max-len\n            if (_this.action === 'Perimeter' || _this.action === 'Polygon' || _this.action === 'DrawTool' || _this.action === 'Drag' || _this.action.indexOf('Rotate') !== -1 || _this.action.indexOf('Resize') !== -1) {\n                event.preventDefault();\n            }\n        };\n        /**\n         * @param {TouchEvent} event - The TouchEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                var target = event.target;\n                if (target.classList.contains('e-pv-text-selection-none')) {\n                    target.classList.remove('e-pv-text-selection-none');\n                }\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n                if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                    clearTimeout(_this.singleTapTimer);\n                    _this.tapCount = 0;\n                }\n            }\n        };\n        /**\n         * @param {PointerEvent} event - The PointerEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        /**\n         * @param {TouchEvent} event - The TouchEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnTouchMove = function (event) {\n            if (_this.action === 'Drag') {\n                _this.isMoving = true;\n            }\n            if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                clearTimeout(_this.singleTapTimer);\n                _this.tapCount = 0;\n            }\n            _this.preventTouchEvent(event);\n            if (_this.isToolbarInkClicked) {\n                event.preventDefault();\n            }\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.isTouchScrolled = true;\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                        _this.isTouchScrolled = false;\n                    }\n                    if (_this.pdfViewer.enablePinchZoom) {\n                        // eslint-disable-next-line max-len\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                    }\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                        _this.isTouchScrolled = false;\n                    }\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            _this.mouseX = touchPoints[0].clientX;\n            _this.mouseY = touchPoints[0].clientY;\n            var canvas;\n            // eslint-disable-next-line max-len\n            if (event.target && (event.target.id.indexOf('_text') > -1 || event.target.id.indexOf('_annotationCanvas') > -1 || event.target.classList.contains('e-pv-hyperlink')) && _this.pdfViewer.annotation) {\n                var pageIndex = _this.pdfViewer.annotation.getEventPageNumber(event);\n                var diagram = document.getElementById(_this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                if (diagram) {\n                    var canvas1 = diagram.getBoundingClientRect();\n                    var left = canvas1.x ? canvas1.x : canvas1.left;\n                    var top_3 = canvas1.y ? canvas1.y : canvas1.top;\n                    canvas = new Rect(left + 10, top_3 + 10, canvas1.width - 10, canvas1.height - 10);\n                }\n            }\n            if (canvas && canvas.containsPoint({ x: _this.mouseX, y: _this.mouseY })) {\n                _this.diagramMouseMove(event);\n                _this.annotationEvent = event;\n            }\n            else {\n                _this.diagramMouseLeave(event);\n                if (_this.isAnnotationDrawn) {\n                    _this.diagramMouseUp(event);\n                    _this.isAnnotationAdded = true;\n                }\n            }\n            touchPoints = null;\n        };\n        /**\n         * @param {PointerEvent} event - The TouchEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule && _this.pdfViewer.enablePinchZoom) {\n                        // eslint-disable-next-line max-len\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        /**\n         * @param {TouchEvent} event - The TouchEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            if (event.cancelable && !event.target.classList.contains('e-pv-touch-ellipse') && _this.pdfViewer.textSelectionModule && _this.pdfViewer.textSelectionModule.isTextSelection) {\n                event.preventDefault();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n            if ((Browser.isDevice && !_this.pdfViewer.enableDesktopMode) && _this.isTouchScrolled) {\n                _this.currentTime = new Date().getTime();\n                var duration = _this.currentTime - _this.previousTime;\n                // eslint-disable-next-line\n                var difference = _this.scrollY - event.changedTouches[0].pageY;\n                // eslint-disable-next-line\n                var speed = (difference) / (duration);\n                if (Math.abs(speed) > 1.5) {\n                    // eslint-disable-next-line\n                    var scrollTop = (difference) + ((duration) * speed);\n                    _this.viewerContainer.scrollTop += scrollTop;\n                    _this.updateMobileScrollerPosition();\n                }\n            }\n            _this.diagramMouseUp(event);\n            _this.renderStampAnnotation(event);\n            if (!Browser.isDevice) {\n                _this.focusViewerContainer();\n            }\n        };\n        /**\n         * @param {PointerEvent} event - The PointerEvent.\n         * @returns {void}\n         */\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        // eslint-disable-next-line\n        this.viewerContainerOnScroll = function (event) {\n            var proxy = null;\n            proxy = _this;\n            var allowServerDataBind = proxy.pdfViewer.allowServerDataBinding;\n            proxy.pdfViewer.enableServerDataBinding(false);\n            var scrollposX = 0;\n            var scrollposY = 0;\n            if (event.touches && (Browser.isDevice && !_this.pdfViewer.enableDesktopMode)) {\n                // eslint-disable-next-line\n                var ratio = (_this.viewerContainer.scrollHeight - _this.viewerContainer.clientHeight) / (_this.viewerContainer.clientHeight - _this.toolbarHeight);\n                if (_this.isThumb) {\n                    _this.ispageMoved = true;\n                    event.preventDefault();\n                    _this.mobilePageNoContainer.style.display = 'block';\n                    scrollposX = event.touches[0].pageX - _this.scrollX;\n                    scrollposY = event.touches[0].pageY - _this.viewerContainer.offsetTop;\n                    _this.viewerContainer.scrollTop = scrollposY * ratio;\n                    // eslint-disable-next-line\n                    var containerValue = event.touches[0].pageY;\n                    // eslint-disable-next-line\n                    var toolbarHeight = _this.pdfViewer.toolbarModule ? 0 : 50;\n                    if (_this.viewerContainer.scrollTop !== 0 && ((containerValue) <= (_this.viewerContainer.clientHeight - toolbarHeight))) {\n                        _this.mobileScrollerContainer.style.top = containerValue + 'px';\n                    }\n                }\n                else if (event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n                    if (!(_this.isWebkitMobile && (Browser.isDevice && !_this.pdfViewer.enableDesktopMode))) {\n                        _this.mobilePageNoContainer.style.display = 'none';\n                        scrollposY = _this.touchClientY - event.touches[0].pageY;\n                        scrollposX = _this.touchClientX - event.touches[0].pageX;\n                        _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + (scrollposY);\n                        _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + (scrollposX);\n                    }\n                    // eslint-disable-next-line\n                    _this.updateMobileScrollerPosition();\n                    _this.touchClientY = event.touches[0].pageY;\n                    _this.touchClientX = event.touches[0].pageX;\n                }\n            }\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // eslint-disable-next-line max-len\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    if (pageHeight < 150) {\n                        _this.pageStopValue = 75;\n                    }\n                    else if (pageHeight >= 150 && pageHeight < 300) {\n                        _this.pageStopValue = 125;\n                    }\n                    else if (pageHeight >= 300 && pageHeight < 500) {\n                        _this.pageStopValue = 200;\n                    }\n                    else {\n                        _this.pageStopValue = 300;\n                    }\n                    // eslint-disable-next-line max-len\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        _this.pdfViewer.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            // eslint-disable-next-line max-len\n            if (_this.pdfViewer.magnificationModule && _this.pdfViewer.magnificationModule.fitType === 'fitToPage' && _this.currentPageNumber > 0) {\n                if (_this.pageSize[_this.currentPageNumber - 1]) {\n                    if (!_this.isPanMode && (!Browser.isDevice && _this.pdfViewer.enableDesktopMode)) {\n                        _this.viewerContainer.scrollTop = _this.pageSize[_this.currentPageNumber - 1].top * _this.getZoomFactor();\n                    }\n                }\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // eslint-disable-next-line max-len\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                if (!isBlazor()) {\n                    _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                }\n                _this.viewerContainer.setAttribute('aria-labelledby', _this.pdfViewer.element.id + '_pageDiv_' + (_this.currentPageNumber - 1));\n                if (!isBlazor()) {\n                    if (!Browser.isDevice || _this.pdfViewer.enableDesktopMode) {\n                        _this.pdfViewer.toolbarModule.updateNavigationButtons();\n                    }\n                }\n            }\n            if (Browser.isDevice && !_this.pdfViewer.enableDesktopMode) {\n                _this.mobileSpanContainer.innerHTML = _this.currentPageNumber.toString();\n                _this.mobilecurrentPageContainer.innerHTML = _this.currentPageNumber.toString();\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule && (!Browser.isDevice || _this.pdfViewer.enableDesktopMode)) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                if (!_this.isPanMode && (!Browser.isDevice && _this.pdfViewer.enableDesktopMode)) {\n                    _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n                }\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated() && !_this.isPanMode) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                // eslint-disable-next-line\n                var data = _this.getStoredData(_this.currentPageNumber);\n                if (data) {\n                    _this.isDataExits = true;\n                    _this.initiatePageViewScrollChanged();\n                    _this.isDataExits = false;\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    var timer = _this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll ? _this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll : 100;\n                    _this.scrollHoldTimer = setTimeout(function () {\n                        _this.initiatePageViewScrollChanged();\n                    }, timer);\n                }\n            }\n            if (_this.pdfViewer.annotation && _this.navigationPane.commentPanelContainer) {\n                _this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(_this.currentPageNumber);\n            }\n            // eslint-disable-next-line max-len\n            if ((Browser.isDevice && !_this.pdfViewer.enableDesktopMode) && event.touches && event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n                setTimeout(function () {\n                    _this.updateMobileScrollerPosition();\n                }, 500);\n            }\n            proxy.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n        this.signatureModule = new Signature(this.pdfViewer, this);\n        this.isWebkitMobile = /Chrome/.test(navigator.userAgent) || /Google Inc/.test(navigator.vendor) || (navigator.userAgent.indexOf('Safari') !== -1);\n    }\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            this.blazorUIAdaptor = isBlazor() ? new BlazorUiAdaptor(this.pdfViewer, this) : null;\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.pdfViewer.element.classList.add('e-pv-mobile-view');\n            }\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            this.viewerMainContainer = isBlazor() ? element.querySelector('.e-pv-viewer-main-container') : createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            this.viewerContainer = isBlazor() ? element.querySelector('.e-pv-viewer-container') : createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container', attrs: { 'aria-label': 'pdfviewer scroll view' } });\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.createMobilePageNumberContainer();\n            }\n            // eslint-disable-next-line\n            this.viewerContainer.tabIndex = 0;\n            if (this.pdfViewer.enableRtl) {\n                this.viewerContainer.style.direction = 'rtl';\n            }\n            element.style.touchAction = 'pan-x pan-y';\n            this.setMaximumHeight(element);\n            this.mainContainer = isBlazor() ? element.querySelector('.e-pv-main-container') : createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            this.applyViewerHeight(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            else {\n                if (isBlazor()) {\n                    this.navigationPane.initializeNavigationPane();\n                    toolbarDiv = this.pdfViewer.element.querySelector('.e-pv-toolbar');\n                    if (!this.pdfViewer.enableToolbar) {\n                        this.toolbarHeight = 0;\n                        toolbarDiv.style.display = 'none';\n                    }\n                    if (!this.pdfViewer.enableNavigationToolbar && ((Browser.isDevice && this.pdfViewer.enableDesktopMode) || (!Browser.isDevice))) {\n                        this.navigationPane.sideBarToolbar.style.display = 'none';\n                        this.navigationPane.sideBarToolbarSplitter.style.display = 'none';\n                        if (this.navigationPane.isBookmarkOpen || this.navigationPane.isThumbnailOpen) {\n                            this.navigationPane.updateViewerContainerOnClose();\n                        }\n                    }\n                }\n            }\n            if (toolbarDiv) {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            var viewerWidth = this.pdfViewer.element.clientWidth;\n            if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n                viewerWidth = viewerWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0) -\n                    (this.navigationPane.commentPanelContainer ? this.navigationPane.getViewerContainerRight() : 0);\n            }\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(this.mobileScrollerContainer.style.width)) + 'px';\n                this.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(this.mobilePageNoContainer.style.width) / 2) + 'px';\n                this.mobilePageNoContainer.style.top = (this.pdfViewer.element.clientHeight / 2) + 'px';\n                this.mobilePageNoContainer.style.display = 'none';\n                this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);\n                this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);\n                this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);\n                this.viewerContainer.appendChild(this.mobilePageNoContainer);\n                this.viewerMainContainer.appendChild(this.mobileScrollerContainer);\n                this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);\n            }\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container', attrs: { 'tabindex': '0', 'aria-label': 'pdfviewer Page View' } });\n            if (this.pdfViewer.enableRtl) {\n                this.pageContainer.style.direction = 'ltr';\n            }\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            this.createPrintPopup();\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.createGoToPagePopup();\n            }\n            var waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(waitingPopup);\n            createSpinner({ target: waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(waitingPopup);\n            if (isBlazor()) {\n                this.contextMenuModule = new BlazorContextMenu(this.pdfViewer, this);\n                // eslint-disable-next-line\n                var spinnerElement = document.getElementsByClassName(this.pdfViewer.element.id + '_spinner');\n                if (spinnerElement && spinnerElement[0] && (!spinnerElement[0].classList.contains('e-spin-hide'))) {\n                    spinnerElement[0].classList.remove('e-spin-show');\n                    spinnerElement[0].classList.add('e-spin-hide');\n                }\n            }\n            else {\n                this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            }\n            this.contextMenuModule.createContextMenu();\n            this.createFileInputElement();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                if (isBlazor()) {\n                    this.pdfViewer._dotnetInstance.invokeMethodAsync('LoadDocumentFromClient', this.pdfViewer.documentPath);\n                }\n                else {\n                    this.pdfViewer.load(this.pdfViewer.documentPath, null);\n                }\n            }\n            if (this.pdfViewer.annotationModule) {\n                this.pdfViewer.annotationModule.initializeCollection();\n            }\n        }\n        if (Browser.isDevice && this.pdfViewer.enableDesktopMode && this.pdfViewer.toolbarModule) {\n            this.pdfViewer.interactionMode = 'Pan';\n        }\n    };\n    PdfViewerBase.prototype.createMobilePageNumberContainer = function () {\n        this.mobilePageNoContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilepagenoContainer', className: 'e-pv-mobilepagenoscroll-container' });\n        this.mobilecurrentPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilecurrentpageContainer', className: 'e-pv-mobilecurrentpage-container' });\n        this.mobilenumberContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiledashedlineContainer', className: 'e-pv-mobiledashedline-container' });\n        this.mobiletotalPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiletotalpageContainer', className: 'e-pv-mobiletotalpage-container' });\n        this.mobileScrollerContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilescrollContainer', className: 'e-pv-mobilescroll-container' });\n        this.mobileSpanContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilespanContainer', className: 'e-pv-mobilespanscroll-container' });\n        this.mobileSpanContainer.innerHTML = '1';\n        this.mobilecurrentPageContainer.innerHTML = '1';\n        this.mobilenumberContainer.innerHTML = '&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';\n        this.mobileScrollerContainer.style.cssFloat = 'right';\n        this.mobileScrollerContainer.style.width = '40px';\n        this.mobileScrollerContainer.style.height = '32px';\n        this.mobileScrollerContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.width = '120px';\n        this.mobilePageNoContainer.style.height = '100px';\n        this.mobilePageNoContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.position = 'fixed';\n        this.mobileScrollerContainer.addEventListener('touchstart', this.mobileScrollContainerDown.bind(this));\n        this.mobileScrollerContainer.addEventListener('touchend', this.mobileScrollContainerEnd.bind(this));\n        this.mobileScrollerContainer.style.display = 'none';\n    };\n    /**\n     * @private\n     * @param  {string} documentData - file name or base64 string.\n     * @param {string} password - password of the PDF document.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.loadedData = documentData;\n        this.documentId = this.createGUID();\n        if (this.viewerContainer) {\n            this.viewerContainer.scrollTop = 0;\n        }\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        if (this.pdfViewer.interactionMode === 'Pan') {\n            this.initiatePanning();\n        }\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        if (this.pdfViewer.downloadFileName) {\n            this.downloadFileName = this.pdfViewer.downloadFileName;\n        }\n        else {\n            this.downloadFileName = this.pdfViewer.fileName;\n        }\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateLoadDocument = function (documentId, isFileName, fileName) {\n        if (documentId) {\n            this.documentId = documentId;\n        }\n        if (this.viewerContainer) {\n            this.viewerContainer.scrollTop = 0;\n        }\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = isFileName;\n        this.saveDocumentInfo();\n        if (this.pdfViewer.interactionMode === 'Pan') {\n            this.initiatePanning();\n        }\n        this.setFileName();\n        if (this.pdfViewer.fileName === null) {\n            if (isFileName && fileName) {\n                this.pdfViewer.fileName = fileName;\n                this.jsonDocumentId = this.pdfViewer.fileName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n                this.jsonDocumentId = null;\n            }\n        }\n        if (this.pdfViewer.downloadFileName) {\n            this.downloadFileName = this.pdfViewer.downloadFileName;\n        }\n        else {\n            this.downloadFileName = this.pdfViewer.fileName;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.loadSuccess = function (documentDetails, password) {\n        // eslint-disable-next-line\n        var data = documentDetails;\n        if (data) {\n            if (typeof data !== 'object') {\n                try {\n                    data = JSON.parse(data);\n                }\n                catch (error) {\n                    this.onControlError(500, data, this.pdfViewer.serverActionSettings.load);\n                    data = null;\n                }\n            }\n            if (data) {\n                while (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                    // eslint-disable-next-line\n                    if (typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n                        // eslint-disable-next-line\n                        data = parseInt(data);\n                        break;\n                    }\n                }\n                if (data.StatusText && (data.StatusText === 'File Does not Exist')) {\n                    this.showLoadingIndicator(false);\n                }\n                // eslint-disable-next-line\n                if (data.uniqueId === this.documentId || (typeof parseInt(data) === 'number' && !isNaN(parseInt(data)))) {\n                    this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load, data);\n                    this.requestSuccess(data, null, password);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerDown = function (event) {\n        this.ispageMoved = false;\n        this.isThumb = true;\n        if (this.isTextMarkupAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage != null && (Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n                var pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);\n                this.pdfViewer.toolbar.showToolbar(true);\n            }\n        }\n        this.mobileScrollerContainer.addEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n    };\n    /**\n     * @private\n     * @param {MouseEvent} e - default mouse event.\n     * @returns {PointModel} - retuns the bounds.\n     */\n    PdfViewerBase.prototype.relativePosition = function (e) {\n        // eslint-disable-next-line\n        var currentRect = this.viewerContainer.getBoundingClientRect();\n        var left = e.clientX - currentRect.left;\n        var top = e.clientY - currentRect.top;\n        return { x: left, y: top };\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.setMaximumHeight = function (element) {\n        // eslint-disable-next-line\n        var currentRect = element.getBoundingClientRect();\n        if ((!Browser.isDevice || this.pdfViewer.enableDesktopMode) || (currentRect && currentRect.height === 0)) {\n            element.style.minHeight = '500px';\n        }\n        this.updateWidth();\n        this.updateHeight();\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.applyViewerHeight = function (element) {\n        // eslint-disable-next-line\n        var currentRect = element.getBoundingClientRect();\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && currentRect && currentRect.height === 0) {\n            element.style.minHeight = '500px';\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateWidth = function () {\n        if (this.pdfViewer.width.toString() !== 'auto') {\n            // eslint-disable-next-line\n            this.pdfViewer.element.style.width = this.pdfViewer.width;\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateHeight = function () {\n        if (this.pdfViewer.height.toString() !== 'auto') {\n            // eslint-disable-next-line\n            this.pdfViewer.element.style.height = this.pdfViewer.height;\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateViewerContainer = function () {\n        var sideBarContentContainer = this.getElement('_sideBarContentContainer');\n        if (sideBarContentContainer && sideBarContentContainer.style.display === 'none') {\n            this.navigationPane.updateViewerContainerOnClose();\n        }\n        else if (sideBarContentContainer && sideBarContentContainer.style.display === 'block') {\n            this.navigationPane.updateViewerContainerOnExpand();\n        }\n        else {\n            this.updateViewerContainerSize();\n        }\n        // eslint-disable-next-line\n        var toolbarModule = this.pdfViewer.toolbarModule;\n        if (toolbarModule) {\n            if (isBlazor()) {\n                if (this.pdfViewer.enableToolbar || this.pdfViewer.enableAnnotationToolbar) {\n                    this.pdfViewer._dotnetInstance.invokeMethodAsync('RefreshToolbarItems');\n                }\n            }\n            else {\n                if (this.pdfViewer.enableToolbar) {\n                    toolbarModule.toolbar.refreshOverflow();\n                }\n                if (this.pdfViewer.enableAnnotationToolbar && toolbarModule.annotationToolbarModule) {\n                    toolbarModule.annotationToolbarModule.toolbar.refreshOverflow();\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.updateViewerContainerSize = function () {\n        this.viewerContainer.style.width = this.pdfViewer.element.clientWidth + 'px';\n        this.pageContainer.style.width = this.viewerContainer.offsetWidth + 'px';\n        this.updateZoomValue();\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerEnd = function (event) {\n        if (!this.ispageMoved) {\n            this.goToPagePopup.show();\n        }\n        this.isThumb = false;\n        this.ispageMoved = false;\n        this.mobileScrollerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n        this.mobilePageNoContainer.style.display = 'none';\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var proxy = null;\n        proxy = this;\n        if (this.pdfViewer.serverActionSettings) {\n            this.loadRequestHandler = new AjaxHandler(this.pdfViewer);\n            this.loadRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load;\n            this.loadRequestHandler.responseType = 'json';\n            this.loadRequestHandler.mode = true;\n            // eslint-disable-next-line\n            jsonObject['action'] = 'Load';\n            // eslint-disable-next-line\n            jsonObject['elementId'] = this.pdfViewer.element.id;\n            this.loadRequestHandler.send(jsonObject);\n            // eslint-disable-next-line\n            this.loadRequestHandler.onSuccess = function (result) {\n                // eslint-disable-next-line\n                var data = result.data;\n                if (data) {\n                    if (typeof data !== 'object') {\n                        try {\n                            data = JSON.parse(data);\n                        }\n                        catch (error) {\n                            proxy.onControlError(500, data, this.pdfViewer.serverActionSettings.load);\n                            data = null;\n                        }\n                    }\n                    if (data) {\n                        while (typeof data !== 'object') {\n                            data = JSON.parse(data);\n                            // eslint-disable-next-line\n                            if (typeof parseInt(data) === 'number' && !isNaN(parseInt(data))) {\n                                // eslint-disable-next-line\n                                data = parseInt(data);\n                                break;\n                            }\n                        }\n                        // eslint-disable-next-line\n                        if (data.uniqueId === proxy.documentId || (typeof parseInt(data) === 'number' && !isNaN(parseInt(data)))) {\n                            proxy.updateFormFieldName(data);\n                            proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load, data);\n                            proxy.requestSuccess(data, documentData, password);\n                        }\n                    }\n                }\n                else {\n                    proxy.showLoadingIndicator(false);\n                    proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Import PDF Failed'));\n                }\n            };\n            // eslint-disable-next-line\n            this.loadRequestHandler.onFailure = function (result) {\n                var statusString = result.status.toString().split('')[0];\n                if (statusString === '4') {\n                    proxy.openNotificationPopup('Client error');\n                }\n                else {\n                    proxy.openNotificationPopup();\n                }\n                proxy.showLoadingIndicator(false);\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.load);\n            };\n            // eslint-disable-next-line\n            this.loadRequestHandler.onError = function (result) {\n                proxy.openNotificationPopup();\n                proxy.showLoadingIndicator(false);\n                // eslint-disable-next-line\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.load);\n            };\n        }\n    };\n    // EJ2-60380 - As of now, in form designer the element name is taken fromfield.ActualFieldName (with hypen) but for\n    // Form fields it is taken from field.FieldName (without hypen).\n    // For this reason when user taken the form feilds on button click, name of the form feilds are different with and without form designer module\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateFormFieldName = function (data) {\n        if (data && data.PdfRenderedFormFields && data.PdfRenderedFormFields.length > 0) {\n            var field = void 0;\n            for (var i = 0; i < data.PdfRenderedFormFields.length; i++) {\n                field = data.PdfRenderedFormFields[i];\n                if (field) {\n                    if (field.ActualFieldName) {\n                        field.FieldName = field.ActualFieldName;\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {string} errorString - The message to be displayed.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function (errorString) {\n        var _this = this;\n        if (this.pdfViewer.showNotificationDialog) {\n            if (errorString === 'Client error') {\n                if (isBlazor()) {\n                    var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Clienterror');\n                    promise.then(function (value) {\n                        _this.textLayer.createNotificationPopup(value);\n                    });\n                }\n                else {\n                    this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Client error'));\n                }\n            }\n            else {\n                if (isBlazor()) {\n                    var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_Servererror');\n                    promise.then(function (value) {\n                        _this.textLayer.createNotificationPopup(value);\n                    });\n                }\n                else {\n                    this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n                }\n            }\n            if (this.getElement('_notify')) {\n                this.getElement('_notify').classList.add('e-pv-notification-large-content');\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {string} errorString - The message to be shown.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.showNotificationPopup = function (errorString) {\n        if (!this.pdfViewer.showNotificationDialog && errorString !== '') {\n            this.textLayer.createNotificationPopup(errorString);\n            if (this.getElement('_notify')) {\n                this.getElement('_notify').classList.add('e-pv-notification-large-content');\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            if (isBlazor() && this.isPassword) {\n                this.isPassword = false;\n                this.isPasswordAvailable = false;\n                this.pdfViewer._dotnetInstance.invokeMethodAsync('ClosePasswordDialog');\n            }\n            if (password && password != '') {\n                this.passwordData = password;\n            }\n            this.pdfViewer.allowServerDataBinding = false;\n            this.pageCount = data.pageCount;\n            this.pdfViewer.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.isAnnotationCollectionRemoved = false;\n            this.saveDocumentHashData();\n            this.saveFormfieldsData(data);\n            this.pdfViewer.allowServerDataBinding = true;\n            this.pageRender(data);\n            // eslint-disable-next-line\n            var pageData = { pageCount: data.pageCount, pageSizes: data.pageSizes };\n            window.sessionStorage.setItem(this.documentId + '_pagedata', JSON.stringify(pageData));\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.mobileScrollerContainer.style.display = '';\n                // eslint-disable-next-line\n                var toolbarHeight = this.pdfViewer.toolbarModule ? this.toolbarHeight : 0;\n                this.mobileScrollerContainer.style.top = (toolbarHeight) + 'px';\n            }\n            this.restrictionList = data.RestrictionSummary;\n            this.RestrictionEnabled(this.restrictionList, false);\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            if (data === 4) {\n                if (!isBlazor()) {\n                    // 4 is error code for encrypted document.\n                    this.renderPasswordPopup(documentData, password);\n                }\n            }\n            else if (data === 3) {\n                if (!isBlazor()) {\n                    // 3 is error code for corrupted document.\n                    this.renderCorruptPopup();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        // eslint-disable-next-line\n        var annotationModule = this.pdfViewer.annotationModule;\n        // eslint-disable-next-line max-len\n        if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)) {\n            annotationModule.textMarkupAnnotationModule.createAnnotationSelectElement();\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.RestrictionEnabled = function (restrictionSummary, isEnable) {\n        if (restrictionSummary) {\n            for (var i = 0; i < restrictionSummary.length; i++) {\n                this.EnableRestriction(restrictionSummary[i], isEnable);\n                if (!isBlazor()) {\n                    if (this.pdfViewer.toolbarModule) {\n                        this.pdfViewer.toolbarModule.DisableToolbarItems(restrictionSummary[i], isEnable);\n                    }\n                }\n                else {\n                    if (this.pdfViewer.toolbarModule) {\n                        this.pdfViewer._dotnetInstance.invokeMethodAsync('RestrictToolbarItems', restrictionSummary, isEnable);\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.EnableRestriction = function (restrictionSummary, isEnable) {\n        switch (restrictionSummary) {\n            case 'Print':\n                this.pdfViewer.enablePrint = isEnable;\n                break;\n            case 'CopyContent':\n                this.pdfViewer.enableTextSelection = isEnable;\n                break;\n            case 'FillFields':\n                this.pdfViewer.enableFormFields = isEnable;\n                this.enableFormFieldButton(isEnable);\n                break;\n            case 'EditAnnotations':\n                this.pdfViewer.enableAnnotation = isEnable;\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        this.currentPageNumber = pageIndex + 1;\n        this.pdfViewer.currentPageNumber = pageIndex + 1;\n        this.previousZoomValue = this.pdfViewer.zoomValue;\n        var isZoomMode = false;\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            if (this.pdfViewer.zoomValue && this.pdfViewer.zoomValue > 0) {\n                if (this.pdfViewer.zoomValue !== 100) {\n                    isZoomMode = true;\n                }\n                this.isInitialPageMode = true;\n                this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue);\n            }\n            if (this.pdfViewer.zoomMode === 'FitToWidth') {\n                this.isInitialPageMode = true;\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n            else if (this.pdfViewer.zoomMode === 'FitToPage') {\n                this.isInitialPageMode = true;\n                this.pdfViewer.magnificationModule.fitToPage();\n            }\n            this.documentLoaded = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.documentLoaded = false;\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        // eslint-disable-next-line\n        var viewPortWidth = 816;\n        // eslint-disable-next-line radix\n        viewPortWidth = parseInt(viewPortWidth);\n        var pageWidth = this.pageSize[pageIndex].width;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1 && !isZoomMode) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (pageNumber < this.pageCount) {\n                this.createRequestForRender(pageNumber);\n                pageNumber = pageNumber + 1;\n            }\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        if (!isBlazor()) {\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n                this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n                if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationAddTools(true);\n                }\n                // eslint-disable-next-line max-len\n                this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n            }\n        }\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.mobileSpanContainer.innerHTML = this.currentPageNumber.toString();\n            this.mobilecurrentPageContainer.innerHTML = this.currentPageNumber.toString();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        var _this = this;\n        if (!isBlazor()) {\n            if (!this.isPasswordAvailable) {\n                if (this.isFileName) {\n                    this.document = documentData;\n                }\n                else {\n                    this.document = 'data:application/pdf;base64,' + documentData;\n                }\n                this.isPasswordAvailable = true;\n                this.createPasswordPopup();\n                this.pdfViewer.fireDocumentLoadFailed(true, null);\n                this.passwordPopup.show();\n            }\n            else {\n                this.pdfViewer.fireDocumentLoadFailed(true, password);\n                this.promptElement.classList.add('e-pv-password-error');\n                this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n                this.promptElement.focus();\n                if (this.isFileName) {\n                    this.document = documentData;\n                }\n                else {\n                    this.document = 'data:application/pdf;base64,' + documentData;\n                }\n                this.passwordPopup.show();\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var promptElement_1 = document.getElementById(this.pdfViewer.element.id + '_prompt');\n            var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_EnterPassword');\n            promise.then(function (value) {\n                promptElement_1.textContent = value;\n            });\n            // eslint-disable-next-line\n            var passwordInput_1 = document.querySelector('#' + this.pdfViewer.element.id + '_password_input');\n            passwordInput_1.addEventListener('keyup', function () {\n                if (passwordInput_1.value === '') {\n                    _this.passwordDialogReset();\n                }\n            });\n            passwordInput_1.addEventListener('focus', function () {\n                passwordInput_1.parentElement.classList.add('e-input-focus');\n            });\n            passwordInput_1.addEventListener('blur', function () {\n                passwordInput_1.parentElement.classList.remove('e-input-focus');\n            });\n            if (!this.isPasswordAvailable) {\n                if (this.isFileName) {\n                    this.document = documentData;\n                }\n                else {\n                    this.document = 'data:application/pdf;base64,' + documentData;\n                }\n                this.isPasswordAvailable = true;\n                this.pdfViewer.fireDocumentLoadFailed(true, null);\n            }\n            else {\n                this.pdfViewer.fireDocumentLoadFailed(true, password);\n                promptElement_1.classList.add('e-pv-password-error');\n                var promise_1 = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_InvalidPassword');\n                promise_1.then(function (value) {\n                    promptElement_1.textContent = value;\n                });\n                promptElement_1.focus();\n                if (this.isFileName) {\n                    this.document = documentData;\n                }\n                else {\n                    this.document = 'data:application/pdf;base64,' + documentData;\n                }\n            }\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPasswordDialog');\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.documentId = null;\n        if (this.pdfViewer.showNotificationDialog) {\n            if (!isBlazor()) {\n                this.createCorruptedPopup();\n                this.corruptPopup.show();\n            }\n            else {\n                this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenCorruptedDialog');\n            }\n        }\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            this.passwordData = password;\n            // eslint-disable-next-line max-len\n            jsonObject = { document: documentData, password: password, zoomFactor: \"1\", isFileName: this.isFileName.toString(), uniqueId: this.documentId };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            this.passwordData = '';\n            jsonObject = { document: documentData, zoomFactor: \"1\", isFileName: this.isFileName.toString(), uniqueId: this.documentId };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            this.jsonDocumentId = documentData;\n            if (this.pdfViewer.fileName === null) {\n                // eslint-disable-next-line max-len\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                this.jsonDocumentId = this.pdfViewer.fileName;\n                base64String = documentData;\n            }\n        }\n        else {\n            this.jsonDocumentId = null;\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n                this.jsonDocumentId = this.pdfViewer.fileName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n                this.jsonDocumentId = null;\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        if (this.pdfViewer.serverActionSettings) {\n            window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        var hashId = '';\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            hashId = encodeURI(this.hashId);\n        }\n        else {\n            hashId = this.hashId;\n        }\n        window.sessionStorage.setItem('hashId', hashId);\n        if (this.documentLiveCount) {\n            window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.saveFormfieldsData = function (data) {\n        this.pdfViewer.isFormFieldDocument = false;\n        this.enableFormFieldButton(false);\n        if (data && data.PdfRenderedFormFields && data.PdfRenderedFormFields.length > 0) {\n            if (this.formfieldvalue) {\n                if (this.pdfViewer.formFieldsModule) {\n                    this.setItemInSessionStorage(this.formfieldvalue, '_formfields');\n                }\n                this.formfieldvalue = null;\n            }\n            else if (this.pdfViewer.formFieldsModule) {\n                for (var i = 0; i < data.PdfRenderedFormFields.length; i++) {\n                    if (data.PdfRenderedFormFields[i].FieldName == '') {\n                        data.PdfRenderedFormFields.splice(i, 1);\n                    }\n                }\n                this.setItemInSessionStorage(data.PdfRenderedFormFields, '_formfields');\n            }\n            if (this.pdfViewer.enableFormFields && this.pdfViewer.formFieldsModule) {\n                this.pdfViewer.formFieldsModule.formFieldCollections();\n            }\n            if (this.pdfViewer.formFieldCollections.length > 0) {\n                this.pdfViewer.isFormFieldDocument = true;\n                this.enableFormFieldButton(true);\n            }\n        }\n    };\n    /**\n     * @param {boolean} isEnable - Enable or disable the toolbar itema.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.enableFormFieldButton = function (isEnable) {\n        if (isEnable) {\n            this.pdfViewer.isFormFieldDocument = true;\n        }\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.submitItem) {\n            this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement, isEnable);\n        }\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // eslint-disable-next-line max-len\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = (this.viewerContainer.clientWidth / 2) + (this.viewerContainer.scrollLeft) + 'px';\n            }\n            else if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {number} - returned the page value.\n     */\n    PdfViewerBase.prototype.getActivePage = function (isPageNumber) {\n        if (this.activeElements && !isNullOrUndefined(this.activeElements.activePageID)) {\n            if (isPageNumber) {\n                return this.activeElements.activePageID + 1;\n            }\n            else {\n                return this.activeElements.activePageID;\n            }\n        }\n        else {\n            if (isPageNumber) {\n                return this.currentPageNumber;\n            }\n            else {\n                return this.currentPageNumber - 1;\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // eslint-disable-next-line max-len\n        var waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (waitingPopup) {\n            createSpinner({ target: waitingPopup });\n            this.setLoaderProperties(waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        var waitingPopup = this.getElement('_loadingIndicator');\n        if (waitingPopup) {\n            if (isShow) {\n                waitingPopup.style.display = 'block';\n                showSpinner(waitingPopup);\n            }\n            else {\n                waitingPopup.style.display = 'none';\n                hideSpinner(waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        var waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (waitingPopup != null) {\n            if (isShow) {\n                showSpinner(waitingPopup);\n            }\n            else {\n                hideSpinner(waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @param {boolean} isShow - Show or hide print loading indicator.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        var printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        if (spinnerElement) {\n            spinnerElement.style.height = '48px';\n            spinnerElement.style.width = '48px';\n            spinnerElement.style.transformOrigin = '24px 24px 24px';\n        }\n    };\n    /**\n     * @param {number} pageNumber - Specify the pageNumber.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        var _this = this;\n        // eslint-disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.renderElementsVirtualScroll(pageNumber);\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n            setTimeout(function () {\n                var currentPageNumber = pageNumber + 1;\n                if (currentPageNumber !== _this.currentPageNumber) {\n                    _this.pdfViewer.currentPageNumber = currentPageNumber;\n                    _this.currentPageNumber = currentPageNumber;\n                    if (_this.pdfViewer.toolbarModule) {\n                        _this.pdfViewer.toolbarModule.updateCurrentPage(currentPageNumber);\n                    }\n                }\n            }, 100);\n        }\n    };\n    /**\n     * @private\n     * @returns {number} - Returns the zoom factor value.\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns whether the pinch zoom is performed or not.\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} -Returns whether the zoom is performed or not.\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {string} - retrun the docuumentid.\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     * @returns {promise<Blob>} - Returns the blob object.\n     */\n    PdfViewerBase.prototype.saveAsBlob = function () {\n        var _this = this;\n        if (this.pageCount > 0) {\n            return new Promise(function (resolve, reject) {\n                _this.saveAsBlobRequest().then(function (value) {\n                    resolve(value);\n                });\n            });\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.saveAsBlobRequest = function () {\n        var _this = this;\n        var proxy = null;\n        proxy = this;\n        var promise = new Promise(function (resolve, reject) {\n            // eslint-disable-next-line\n            var jsonObject = proxy.constructJsonDownload();\n            _this.dowonloadRequestHandler = new AjaxHandler(_this.pdfViewer);\n            _this.dowonloadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.download;\n            _this.dowonloadRequestHandler.responseType = 'text';\n            _this.dowonloadRequestHandler.send(jsonObject);\n            // eslint-disable-next-line\n            _this.dowonloadRequestHandler.onSuccess = function (result) {\n                // eslint-disable-next-line\n                var data = result.data;\n                if (data) {\n                    if (typeof data === 'object') {\n                        data = JSON.parse(data);\n                    }\n                    if (typeof data !== 'object' && data.indexOf('data:application/pdf') === -1) {\n                        proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.download);\n                        data = null;\n                    }\n                    if (data) {\n                        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download, data);\n                        var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                        resolve(blobUrl);\n                    }\n                }\n            };\n            // eslint-disable-next-line\n            _this.dowonloadRequestHandler.onFailure = function (result) {\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n            };\n            // eslint-disable-next-line\n            _this.dowonloadRequestHandler.onError = function (result) {\n                proxy.openNotificationPopup();\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n            };\n        });\n        return promise;\n    };\n    /**\n     * @param {boolean} isTriggerEvent - check to trigger the event.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        var proxy = this;\n        var pdfViewer = proxy.pdfViewer;\n        var printModule = pdfViewer.printModule;\n        var textSearchModule = pdfViewer.textSearchModule;\n        var bookmarkViewModule = pdfViewer.bookmarkViewModule;\n        var thumbnailViewModule = pdfViewer.thumbnailView;\n        var annotationModule = pdfViewer.annotation;\n        var magnificationModule = pdfViewer.magnificationModule;\n        var textSelectionModule = pdfViewer.textSelectionModule;\n        var formFieldsModule = pdfViewer.formFieldsModule;\n        var signatureModule = proxy.signatureModule;\n        proxy.isPasswordAvailable = false;\n        proxy.isDocumentLoaded = false;\n        proxy.isInitialLoaded = false;\n        proxy.isImportAction = false;\n        proxy.annotationPageList = [];\n        proxy.annotationComments = null;\n        pdfViewer.annotationCollection = [];\n        pdfViewer.signatureCollection = [];\n        pdfViewer.formFieldCollection = [];\n        proxy.isAnnotationCollectionRemoved = false;\n        proxy.documentAnnotationCollections = null;\n        proxy.isDrawnCompletely = false;\n        proxy.annotationRenderredList = [];\n        proxy.isImportAction = false;\n        proxy.isImportedAnnotation = false;\n        proxy.importedAnnotation = [];\n        proxy.isStorageExceed = false;\n        proxy.annotationStorage = {};\n        proxy.formFieldStorage = {};\n        proxy.downloadCollections = {};\n        proxy.annotationEvent = null;\n        proxy.highestWidth = 0;\n        proxy.highestHeight = 0;\n        proxy.requestLists = [];\n        proxy.tilerequestLists = [];\n        proxy.isToolbarInkClicked = false;\n        pdfViewer.formFieldCollections = [];\n        proxy.passwordData = '';\n        proxy.isFocusField = false;\n        proxy.focusField = [];\n        proxy.updateDocumentEditedProperty(false);\n        if (pdfViewer.formDesignerModule) {\n            pdfViewer.formDesignerModule.formFieldIndex = 0;\n            if (proxy.activeElements) {\n                pdfViewer.clearSelection(proxy.activeElements.activePageID);\n            }\n            pdfViewer.zIndexTable = [];\n        }\n        proxy.initiateTextSelectMode();\n        proxy.RestrictionEnabled(proxy.restrictionList, true);\n        proxy.restrictionList = null;\n        if (!Browser.isDevice || pdfViewer.enableDesktopMode) {\n            if (proxy.navigationPane.sideBarToolbar) {\n                proxy.navigationPane.clear();\n            }\n        }\n        if (!isBlazor() && Browser.isDevice || !pdfViewer.enableDesktopMode) {\n            proxy.navigationPane.clear();\n        }\n        if (thumbnailViewModule) {\n            thumbnailViewModule.clear();\n        }\n        if (bookmarkViewModule) {\n            bookmarkViewModule.clear();\n        }\n        if (magnificationModule) {\n            magnificationModule.isMagnified = false;\n            magnificationModule.clearIntervalTimer();\n        }\n        if (textSelectionModule) {\n            textSelectionModule.clearTextSelection();\n        }\n        if (textSearchModule) {\n            textSearchModule.resetTextSearch();\n        }\n        if (annotationModule) {\n            annotationModule.clear();\n            annotationModule.initializeCollection();\n        }\n        if (formFieldsModule) {\n            formFieldsModule.readOnlyCollection = [];\n            formFieldsModule.signatureFieldCollection = [];\n            formFieldsModule.currentTarget = null;\n        }\n        if (signatureModule) {\n            signatureModule.signaturecollection = [];\n            signatureModule.outputcollection = [];\n        }\n        if (proxy.pageSize) {\n            proxy.pageSize = [];\n        }\n        if (proxy.renderedPagesList) {\n            proxy.renderedPagesList = [];\n        }\n        if (proxy.pageContainer) {\n            while (proxy.pageContainer.hasChildNodes()) {\n                proxy.pageContainer.removeChild(proxy.pageContainer.lastChild);\n            }\n        }\n        if (proxy.pageCount > 0) {\n            proxy.unloadDocument(proxy);\n            // eslint-disable-next-line\n            proxy.textLayer.characterBound = new Array();\n            proxy.loadRequestHandler && proxy.loadRequestHandler.clear();\n            proxy.virtualLoadRequestHandler && proxy.virtualLoadRequestHandler.clear();\n            proxy.pageRequestHandler && proxy.pageRequestHandler.clear();\n            proxy.dowonloadRequestHandler && proxy.dowonloadRequestHandler.clear();\n            proxy.importAnnotationRequestHandler && proxy.importAnnotationRequestHandler.clear();\n            proxy.exportAnnotationRequestHandler && proxy.exportAnnotationRequestHandler.clear();\n            proxy.importFormFieldsRequestHandler && proxy.importFormFieldsRequestHandler.clear();\n            proxy.exportFormFieldsRequestHandler && proxy.exportFormFieldsRequestHandler.clear();\n            if (printModule && printModule.printRequestHandler) {\n                printModule.printRequestHandler.clear();\n            }\n        }\n        proxy.windowSessionStorageClear();\n        if (proxy.pinchZoomStorage) {\n            proxy.pinchZoomStorage = [];\n        }\n        if ((proxy.previousZoomValue || proxy.previousZoomValue === 0) && proxy.previousZoomValue !== pdfViewer.zoomValue) {\n            pdfViewer.zoomValue = proxy.previousZoomValue;\n        }\n        if (isTriggerEvent && proxy.pageCount > 0) {\n            pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.pdfViewer.element.classList.remove('e-pv-mobile-view');\n        }\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode ? this.pageContainer.parentNode.removeChild(this.pageContainer) : null;\n        this.viewerContainer.parentNode ? this.viewerContainer.parentNode.removeChild(this.viewerContainer) : null;\n        if (this.contextMenuModule) {\n            var contextMenuElement = this.contextMenuModule.contextMenuElement;\n            contextMenuElement && contextMenuElement.ej2_instances && contextMenuElement.ej2_instances.length > 0 ? this.contextMenuModule.destroy() : null;\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.navigationPane.destroy();\n        }\n        var measureElement = document.getElementById('measureElement');\n        if (measureElement) {\n            measureElement = undefined;\n        }\n    };\n    /**\n     * @param {PdfViewerBase} proxy - PdfviewerBase class.\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (proxy) {\n        var documentId = '';\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            documentId = decodeURI(window.sessionStorage.getItem('hashId'));\n        }\n        else {\n            documentId = proxy.hashId ? proxy.hashId : window.sessionStorage.getItem('hashId');\n        }\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            // eslint-disable-next-line max-len\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount, action: 'Unload', elementId: proxy.pdfViewer.element.id };\n            var actionName = window.sessionStorage.getItem('unload');\n            if (window.sessionStorage.getItem('serviceURL') && window.sessionStorage.getItem('serviceURL') !== 'undefined') {\n                try {\n                    // eslint-disable-next-line\n                    var browserSupportsKeepalive = 'keepalive' in new Request('');\n                    if (browserSupportsKeepalive) {\n                        // eslint-disable-next-line\n                        var headerValue = this.setUnloadRequestHeaders();\n                        var credentialsData = this.pdfViewer.ajaxRequestSettings.withCredentials ? 'include' : 'omit';\n                        fetch(window.sessionStorage.getItem('serviceURL') + '/' + actionName, {\n                            method: 'POST',\n                            credentials: credentialsData,\n                            headers: headerValue,\n                            body: JSON.stringify(jsonObject)\n                        });\n                    }\n                }\n                catch (error) {\n                    this.unloadRequestHandler = new AjaxHandler(this.pdfViewer);\n                    this.unloadRequestHandler.send(jsonObject);\n                }\n            }\n            else if (isBlazor()) {\n                this.clearCache(actionName, jsonObject, proxy);\n            }\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.zoomFactor = 1;\n        }\n        this.formFieldCollection = [];\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n        if (this.documentId) {\n            window.sessionStorage.removeItem(this.documentId + '_formfields');\n            window.sessionStorage.removeItem(this.documentId + '_formDesigner');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n            window.sessionStorage.removeItem(this.documentId + '_formfields');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_sign');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n        }\n    };\n    PdfViewerBase.prototype.clearCache = function (actionName, jsonObject, proxy) {\n        this.unloadRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.unloadRequestHandler.url = window.sessionStorage.getItem('serviceURL') + '/' + actionName;\n        this.unloadRequestHandler.mode = false;\n        this.unloadRequestHandler.responseType = null;\n        this.unloadRequestHandler.send(jsonObject);\n        // eslint-disable-next-line\n        this.unloadRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            if (data) {\n                if (typeof data !== 'object') {\n                    if (data.indexOf('Document') === -1) {\n                        proxy.onControlError(500, data, actionName);\n                        data = null;\n                    }\n                }\n                if (data) {\n                    proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.unload, data);\n                }\n            }\n        };\n        // eslint-disable-next-line\n        this.unloadRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, actionName);\n        };\n        // eslint-disable-next-line\n        this.unloadRequestHandler.onError = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, actionName);\n        };\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.setUnloadRequestHeaders = function () {\n        // eslint-disable-next-line\n        var myHeaders = new Headers();\n        myHeaders.append('Content-Type', 'application/json;charset=UTF-8');\n        for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n            // eslint-disable-next-line max-len\n            myHeaders.append(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);\n        }\n        return myHeaders;\n    };\n    PdfViewerBase.prototype.windowSessionStorageClear = function () {\n        window.sessionStorage.removeItem('currentDocument');\n        window.sessionStorage.removeItem('serviceURL');\n        window.sessionStorage.removeItem('unload');\n        for (var i = 0; i < this.sessionStorage.length; i++) {\n            window.sessionStorage.removeItem(this.sessionStorage[i]);\n        }\n    };\n    PdfViewerBase.prototype.updateCommentPanel = function () {\n        // eslint-disable-next-line\n        var moreOptionsButton = document.querySelectorAll('#' + this.pdfViewer.element.id + '_more-options');\n        for (var i = 0; i < moreOptionsButton.length; i++) {\n            moreOptionsButton[i].style.visibility = 'hidden';\n        }\n        // eslint-disable-next-line\n        var commentTextBox = document.querySelectorAll('.e-pv-new-comments-div');\n        for (var j = 0; j < commentTextBox.length; j++) {\n            commentTextBox[j].style.display = 'none';\n        }\n        // eslint-disable-next-line\n        var commentContainer = document.querySelectorAll('.e-pv-comments-border');\n        for (var j = 0; j < commentContainer.length; j++) {\n            commentContainer[j].classList.remove('e-pv-comments-border');\n        }\n        // eslint-disable-next-line\n        var editableElement = document.querySelectorAll('.e-editable-inline');\n        for (var j = 0; j < editableElement.length; j++) {\n            editableElement[j].style.display = 'none';\n        }\n        // eslint-disable-next-line\n        var commentSelect = document.querySelectorAll('.e-pv-comments-select');\n        for (var z = 0; z < commentSelect.length; z++) {\n            commentSelect[z].classList.remove('e-pv-comments-select');\n        }\n        // eslint-disable-next-line\n        var commentsDiv = document.querySelectorAll('.e-pv-comments-div');\n        for (var j = 0; j < commentsDiv.length; j++) {\n            commentsDiv[j].style.minHeight = 60 + 'px';\n        }\n    };\n    /**\n     * @param {boolean} isMouseDown - check whether the mouse down is triggered.\n     * @returns {void}\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function (isMouseDown) {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // eslint-disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        if (this.currentPageNumber > 0) {\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer) {\n            this.updateCommentPanel();\n        }\n        // eslint-disable-next-line max-len\n        if ((navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1) && parentNode !== null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // eslint-disable-next-line max-len\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // eslint-disable-next-line max-len\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', visible: false,\n            // eslint-disable-next-line max-len\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                var waitingPopup = _this.getElement('_loadingIndicator');\n                if (waitingPopup != null) {\n                    hideSpinner(waitingPopup);\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            // eslint-disable-next-line max-len\n            this.corruptPopup.content = '<div id=\"templatertl\" class=\"e-pv-notification-icon-rtl\"> <div class=\"e-pv-corrupted-popup-content-rtl\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n            this.corruptPopup.enableRtl = true;\n        }\n        else {\n            // eslint-disable-next-line max-len\n            this.corruptPopup.content = '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n        }\n        this.corruptPopup.appendTo(popupElement);\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.hideLoadingIndicator = function () {\n        var waitingPopup = this.getElement('_loadingIndicator');\n        if (waitingPopup !== null) {\n            hideSpinner(waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        var waitingPopup = this.getElement('_loadingIndicator');\n        if (waitingPopup !== null) {\n            hideSpinner(waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', {\n            id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container'\n        });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        var printWaitingPopup = createElement('div', {\n            id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container'\n        });\n        this.printMainContainer.appendChild(printWaitingPopup);\n        createSpinner({ target: printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createGoToPagePopup = function () {\n        var _this = this;\n        // eslint-disable-next-line max-len\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_goTopage_popup', className: 'e-pv-gotopage-popup' });\n        this.goToPageElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.goToPageElement.textContent = this.pdfViewer.localeObj.getConstant('Enter pagenumber');\n        popupElement.appendChild(this.goToPageElement);\n        var inputContainer = createElement('span', { className: 'e-pv-text-input' });\n        // eslint-disable-next-line max-len\n        this.goToPageInput = createElement('input', { id: this.pdfViewer.element.id + '_page_input', className: 'e-input' });\n        this.goToPageInput.type = 'text';\n        this.goToPageInput.style.maxWidth = '80%';\n        this.pageNoContainer = createElement('span', { className: '.e-pv-number-ofpages' });\n        inputContainer.appendChild(this.goToPageInput);\n        inputContainer.appendChild(this.pageNoContainer);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.goToPagePopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('GoToPage'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') },\n                    click: this.GoToPageCancelClick.bind(this)\n                },\n                // eslint-disable-next-line max-len\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Apply'), disabled: true, cssClass: 'e-pv-gotopage-apply-btn', isPrimary: true },\n                    click: this.GoToPageApplyClick.bind(this)\n                }\n            ], close: this.closeGoToPagePopUp.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.goToPagePopup.enableRtl = true;\n        }\n        this.goToPagePopup.appendTo(popupElement);\n        if (!isBlazor()) {\n            var goToPageTextBox = new NumericTextBox({ format: '##', showSpinButton: false });\n            goToPageTextBox.appendTo(this.goToPageInput);\n        }\n        this.goToPageInput.addEventListener('keyup', function () {\n            // eslint-disable-next-line\n            var inputValue = _this.goToPageInput.value;\n            if (inputValue !== '' && parseFloat(inputValue) > 0 && (_this.pdfViewer.pageCount + 1) > parseFloat(inputValue)) {\n                _this.EnableApplyButton();\n            }\n            else {\n                _this.DisableApplyButton();\n            }\n        });\n    };\n    PdfViewerBase.prototype.closeGoToPagePopUp = function () {\n        this.goToPageInput.value = '';\n        this.DisableApplyButton();\n    };\n    PdfViewerBase.prototype.EnableApplyButton = function () {\n        // eslint-disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.removeAttribute('disabled');\n    };\n    PdfViewerBase.prototype.DisableApplyButton = function () {\n        // eslint-disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.setAttribute('disabled', true);\n    };\n    PdfViewerBase.prototype.GoToPageCancelClick = function () {\n        this.goToPagePopup.hide();\n    };\n    PdfViewerBase.prototype.GoToPageApplyClick = function () {\n        this.goToPagePopup.hide();\n        // eslint-disable-next-line\n        var pageNumber = this.goToPageInput.value;\n        this.pdfViewer.navigation.goToPage(pageNumber);\n        this.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateMobileScrollerPosition = function () {\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && this.mobileScrollerContainer) {\n            // eslint-disable-next-line\n            var ratio = (this.viewerContainer.scrollHeight - this.viewerContainer.clientHeight) / (this.viewerContainer.clientHeight - 56);\n            // eslint-disable-next-line\n            var differenceRatio = (this.viewerContainer.scrollTop) / ratio;\n            // eslint-disable-next-line\n            var toolbarHeight = this.pdfViewer.toolbarModule ? this.toolbarHeight : 0;\n            this.mobileScrollerContainer.style.top = (toolbarHeight + differenceRatio) + 'px';\n        }\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // eslint-disable-next-line max-len\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup', attrs: { 'tabindex': '-1' } });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt', attrs: { 'tabindex': '-1' } });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // eslint-disable-next-line max-len\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false,\n            close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                var waitingPopup = _this.getElement('_loadingIndicator');\n                if (waitingPopup != null) {\n                    hideSpinner(waitingPopup);\n                }\n            }\n        });\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.passwordPopup.buttons = [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ];\n        }\n        else {\n            this.passwordPopup.buttons = [\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) },\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                }\n            ];\n        }\n        if (this.pdfViewer.enableRtl) {\n            this.passwordPopup.enableRtl = true;\n        }\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        var waitingPopup = this.getElement('_loadingIndicator');\n        if (waitingPopup !== null) {\n            hideSpinner(waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        var waitingPopup = this.getElement('_loadingIndicator');\n        if (waitingPopup !== null) {\n            hideSpinner(waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (!isBlazor()) {\n            if (this.promptElement) {\n                this.promptElement.classList.remove('e-pv-password-error');\n                this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n                this.passwordInput.value = '';\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.applyPassword = function () {\n        if (!isBlazor()) {\n            var password = this.passwordInput.value;\n            if (password !== '') {\n                this.pdfViewer.load(this.document, password);\n            }\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.createFileInputElement = function () {\n        if (Browser.isDevice || !this.pdfViewer.enableDesktopMode) {\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.enableAnnotationToolbar && this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement();\n            }\n            if (this.signatureModule) {\n                this.signatureModule.createSignatureFileElement();\n            }\n        }\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        var _this = this;\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('keydown', this.onWindowKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        this.unload = function () { return _this.unloadDocument(_this); };\n        window.addEventListener('unload', this.unload);\n        window.addEventListener('beforeunload', this.clearSessionStorage);\n        window.addEventListener('resize', this.onWindowResize);\n        // eslint-disable-next-line max-len\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('keydown', this.onWindowKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unload);\n        window.removeEventListener('resize', this.onWindowResize);\n        // eslint-disable-next-line max-len\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.zoomMode !== 'FitToWidth' && this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                this.pdfViewer.magnificationModule.fitToPage();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     * @param {any} annotation - The annotation type of any.\n     * @returns {void}\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateFreeTextProperties = function (annotation) {\n        if (this.pdfViewer.enableShapeLabel) {\n            if (this.pdfViewer.shapeLabelSettings.fillColor) {\n                annotation.labelFillColor = this.pdfViewer.shapeLabelSettings.fillColor;\n            }\n            if (this.pdfViewer.shapeLabelSettings.fontColor) {\n                annotation.fontColor = this.pdfViewer.shapeLabelSettings.fontColor;\n            }\n            if (this.pdfViewer.shapeLabelSettings.fontSize) {\n                annotation.fontSize = this.pdfViewer.shapeLabelSettings.fontSize;\n            }\n            if (this.pdfViewer.shapeLabelSettings.fontFamily) {\n                annotation.fontFamily = this.pdfViewer.shapeLabelSettings.fontFamily;\n            }\n            if (this.pdfViewer.shapeLabelSettings.opacity) {\n                annotation.labelOpacity = this.pdfViewer.shapeLabelSettings.opacity;\n            }\n            if (this.pdfViewer.shapeLabelSettings.labelContent) {\n                annotation.labelContent = this.pdfViewer.shapeLabelSettings.labelContent;\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {MouseEvent} event - The mouse event.\n     * @returns {void}\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.mouseDownHandler = function (event) {\n        var isEnableDelete = false;\n        var isCancel;\n        var hidenItems = [];\n        var disabledItems = [];\n        if (event && event.target) {\n            this.mouseDownEvent = event;\n            this.contextMenuModule.currentTarget = event.target;\n        }\n        if (this.pdfViewer.annotationModule) {\n            isEnableDelete = this.pdfViewer.annotationModule.isEnableDelete();\n        }\n        if (!isEnableDelete) {\n            disabledItems.push('DeleteContext');\n        }\n        if (this.pdfViewer.contextMenuOption === 'None') {\n            isCancel = true;\n        }\n        else if (this.pdfViewer.textSelectionModule || this.isShapeBasedAnnotationsEnabled()) {\n            if (event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(event);\n                // eslint-disable-next-line max-len\n                if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n                    this.isFreeTextContextMenu = true;\n                    // eslint-disable-next-line max-len\n                    if (this.pdfViewer.annotation.freeTextAnnotationModule && !this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected) {\n                        disabledItems.push('Cut');\n                        disabledItems.push('Copy');\n                    }\n                    // eslint-disable-next-line max-len\n                    if (this.pdfViewer.annotation.freeTextAnnotationModule && this.pdfViewer.annotation.freeTextAnnotationModule.selectedText === '') {\n                        disabledItems.push('Paste');\n                    }\n                    hidenItems.push('HighlightContext');\n                    hidenItems.push('UnderlineContext');\n                    hidenItems.push('StrikethroughContext');\n                    hidenItems.push('ScaleRatio');\n                    hidenItems.push('Properties');\n                    hidenItems.push('Comment');\n                    hidenItems.push('DeleteContext');\n                }\n                else if (isClickWithinSelectionBounds && this.pdfViewer.textSelectionModule) {\n                    // eslint-disable-next-line max-len\n                    if ((!event.target.classList.contains('e-pv-maintaincontent') && event.target.classList.contains('e-pv-text') || event.target.classList.contains('e-pv-text-layer'))) {\n                        if (this.checkIsNormalText()) {\n                            isCancel = true;\n                        }\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((Browser.isIE || Browser.info.name === 'edge') && event.target.classList.contains('e-pv-page-container')) {\n                        isCancel = true;\n                    }\n                    hidenItems.push('Cut');\n                    hidenItems.push('Paste');\n                    hidenItems.push('DeleteContext');\n                    hidenItems.push('ScaleRatio');\n                    hidenItems.push('Comment');\n                    hidenItems.push('Properties');\n                    // eslint-disable-next-line max-len\n                }\n                else if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n                    this.shapeMenuItems(hidenItems, disabledItems, false, true);\n                    // eslint-disable-next-line max-len\n                }\n                else if (this.pdfViewer.selectedItems.annotations.length !== 0 && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType !== 'Path') {\n                    this.shapeMenuItems(hidenItems, disabledItems, true);\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    if (this.pdfViewer.annotation && this.pdfViewer.annotation.isShapeCopied && (event.target.classList.contains('e-pv-text-layer') ||\n                        event.target.classList.contains('e-pv-text')) && !this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                        hidenItems.push('Properties');\n                        this.shapeMenuItems(hidenItems, disabledItems, false);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if (this.isCalibrateAnnotationModule() && this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode) {\n                        hidenItems.push('HighlightContext');\n                        hidenItems.push('UnderlineContext');\n                        hidenItems.push('StrikethroughContext');\n                        hidenItems.push('Properties');\n                        disabledItems.push('Cut');\n                        disabledItems.push('Copy');\n                        disabledItems.push('Paste');\n                        disabledItems.push('DeleteContext');\n                        disabledItems.push('Comment');\n                        // eslint-disable-next-line max-len\n                    }\n                    else if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                        hidenItems.push('HighlightContext');\n                        hidenItems.push('UnderlineContext');\n                        hidenItems.push('StrikethroughContext');\n                        hidenItems.push('Properties');\n                        hidenItems.push('Cut');\n                        hidenItems.push('Copy');\n                        hidenItems.push('Paste');\n                        hidenItems.push('ScaleRatio');\n                    }\n                    else {\n                        isCancel = true;\n                    }\n                }\n            }\n            else if (this.pdfViewer.textSelectionModule && (this.pdfViewer.contextMenuOption === 'MouseUp')) {\n                hidenItems.push('Cut');\n                hidenItems.push('Paste');\n                hidenItems.push('DeleteContext');\n                hidenItems.push('ScaleRatio');\n                hidenItems.push('Comment');\n                hidenItems.push('Properties');\n            }\n            else if (this.pdfViewer.selectedItems.annotations.length === 0) {\n                hidenItems.push('Cut');\n                hidenItems.push('Paste');\n                hidenItems.push('DeleteContext');\n                hidenItems.push('ScaleRatio');\n                hidenItems.push('Properties');\n            }\n            if (!this.pdfViewer.enableCommentPanel) {\n                disabledItems.push('Comment');\n            }\n        }\n        else {\n            isCancel = true;\n        }\n        var eventArgs = { hidenItems: hidenItems, disabledItems: disabledItems, isCancel: isCancel };\n        this.pdfViewer._dotnetInstance.invokeMethodAsync('MouseDownHandler', eventArgs);\n    };\n    /**\n     * @private\n     * @param {string} selectedMenu - The selected menu.\n     * @returns {void}\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.OnItemSelected = function (selectedMenu) {\n        // eslint-disable-next-line\n        var target = this.contextMenuModule.currentTarget;\n        switch (selectedMenu) {\n            case this.pdfViewer.localeObj.getConstant('Copy'):\n                this.CopyItemSelected();\n                break;\n            case this.pdfViewer.localeObj.getConstant('Highlight context'):\n                this.TextMarkUpSelected('Highlight');\n                break;\n            case this.pdfViewer.localeObj.getConstant('Underline context'):\n                this.TextMarkUpSelected('Underline');\n                break;\n            case this.pdfViewer.localeObj.getConstant('Strikethrough context'):\n                this.TextMarkUpSelected('Strikethrough');\n                break;\n            case this.pdfViewer.localeObj.getConstant('Properties'):\n                this.PropertiesItemSelected();\n                break;\n            case this.pdfViewer.localeObj.getConstant('Cut'):\n                this.CutItemSelected(target);\n                break;\n            case this.pdfViewer.localeObj.getConstant('Paste'):\n                this.pasteItemSelected(target);\n                break;\n            case this.pdfViewer.localeObj.getConstant('Delete Context'):\n                this.DeleteItemSelected();\n                break;\n            case this.pdfViewer.localeObj.getConstant('Scale Ratio'):\n                this.ScaleRatioSelected();\n                break;\n            case this.pdfViewer.localeObj.getConstant('Comment'):\n                this.CommentItemSelected();\n                break;\n            default:\n                break;\n        }\n    };\n    PdfViewerBase.prototype.CommentItemSelected = function () {\n        if (this.pdfViewer.annotation) {\n            this.pdfViewer.annotation.showCommentsPanel();\n            if (this.pdfViewer.selectedItems.annotations.length !== 0 ||\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                // eslint-disable-next-line\n                var currentAnnotation = void 0;\n                if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                    currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n                }\n                else {\n                    currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                }\n                // eslint-disable-next-line\n                var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n                if (accordionExpand) {\n                    accordionExpand.ej2_instances[0].expandItem(true);\n                }\n                // eslint-disable-next-line\n                var commentsDiv = document.getElementById(currentAnnotation.annotName);\n                if (commentsDiv) {\n                    if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                        commentsDiv.firstChild.click();\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.ScaleRatioSelected = function () {\n        if (this.isCalibrateAnnotationModule()) {\n            this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow();\n        }\n    };\n    PdfViewerBase.prototype.DeleteItemSelected = function () {\n        if (this.pdfViewer.formDesignerModule && this.pdfViewer.selectedItems.formFields.length !== 0) {\n            this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);\n        }\n        else if (this.pdfViewer.annotation) {\n            this.pdfViewer.annotation.deleteAnnotation();\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.pasteItemSelected = function (target) {\n        // eslint-disable-next-line max-len\n        if (this.isFreeTextContextMenu || (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) && (target && target.className === 'free-text-input' && target.tagName === 'TEXTAREA')) {\n            this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(target);\n            this.contextMenuModule.close();\n        }\n        else {\n            this.pdfViewer.paste();\n            this.contextMenuModule.previousAction = 'Paste';\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.CutItemSelected = function (target) {\n        // eslint-disable-next-line max-len\n        if (this.isFreeTextContextMenu || (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) && (target && target.className === 'free-text-input' && target.tagName === 'TEXTAREA')) {\n            this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(target);\n            this.contextMenuModule.close();\n        }\n        else if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            var pageIndex = this.pdfViewer.selectedItems.annotations[0].pageIndex;\n            this.pdfViewer.cut();\n            this.contextMenuModule.previousAction = 'Cut';\n        }\n        else if (this.pdfViewer.selectedItems.formFields.length === 1) {\n            this.pdfViewer.cut();\n            this.contextMenuModule.previousAction = 'Cut';\n        }\n    };\n    PdfViewerBase.prototype.CopyItemSelected = function () {\n        var isSkip = false;\n        // eslint-disable-next-line max-len\n        if (this.isFreeTextContextMenu || (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus)) {\n            this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText();\n            this.contextMenuModule.close();\n            isSkip = true;\n        }\n        else if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.copyText();\n            this.contextMenuModule.close();\n        }\n        if (this.pdfViewer.selectedItems.annotations.length && !isSkip) {\n            this.pdfViewer.copy();\n            this.contextMenuModule.previousAction = 'Copy';\n        }\n        else if (this.pdfViewer.selectedItems.formFields.length > 0) {\n            this.pdfViewer.copy();\n            this.contextMenuModule.previousAction = 'Copy';\n        }\n    };\n    PdfViewerBase.prototype.PropertiesItemSelected = function () {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead' ||\n            this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance')) {\n            this.pdfViewer.annotation.createPropertiesWindow();\n            // eslint-disable-next-line max-len\n        }\n        else if (this.pdfViewer.selectedItems.formFields.length !== 0 && this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType) {\n            this.pdfViewer.formDesigner.createPropertiesWindow();\n        }\n    };\n    PdfViewerBase.prototype.TextMarkUpSelected = function (type) {\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n            this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained = false;\n            this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(type);\n            this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n            this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n            this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained = true;\n        }\n    };\n    PdfViewerBase.prototype.shapeMenuItems = function (hidenItems, disabledItems, enableProperties, isSignature) {\n        if (this.pdfViewer.annotation && !this.pdfViewer.annotation.isShapeCopied) {\n            disabledItems.push('Paste');\n        }\n        hidenItems.push('HighlightContext');\n        hidenItems.push('UnderlineContext');\n        hidenItems.push('StrikethroughContext');\n        hidenItems.push('ScaleRatio');\n        if (enableProperties) {\n            // eslint-disable-next-line max-len\n            if (!(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead' ||\n                this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance')) {\n                hidenItems.push('Properties');\n            }\n        }\n        else if (isSignature) {\n            hidenItems.push('Properties');\n            hidenItems.push('Comment');\n        }\n        else {\n            hidenItems.push('Cut');\n            hidenItems.push('Copy');\n            hidenItems.push('DeleteContext');\n            hidenItems.push('Comment');\n        }\n    };\n    PdfViewerBase.prototype.checkIsRtlText = function (text) {\n        // eslint-disable-next-line max-len\n        var ltrChars = 'A-Za-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02B8\\\\u0300-\\\\u0590\\\\u0800-\\\\u1FFF' + '\\\\u2C00-\\\\uFB1C\\\\uFDFE-\\\\uFE6F\\\\uFEFD-\\\\uFFFF';\n        var rtlChars = '\\\\u0591-\\\\u07FF\\\\uFB1D-\\\\uFDFD\\\\uFE70-\\\\uFEFC';\n        // eslint-disable-next-line\n        var rtlDirCheck = new RegExp('^[^' + ltrChars + ']*[' + rtlChars + ']');\n        return rtlDirCheck.test(text);\n    };\n    /**\n     * @private\n     * @param {any} event - Specifies the event.\n     * @returns {boolean} - retruned the beolean value.\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        if (this.pdfViewer.textSelectionModule) {\n            var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.currentPageNumber - 1);\n            if (bounds) {\n                var currentBound = bounds;\n                if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                    event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                    this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                    isWithin = true;\n                }\n            }\n            if ((Browser.isIE || Browser.info.name === 'edge') && bounds) {\n                isWithin = true;\n            }\n        }\n        return isWithin;\n    };\n    PdfViewerBase.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    PdfViewerBase.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    PdfViewerBase.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.getZoomFactor()) + pageBounds.left;\n    };\n    PdfViewerBase.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.getElement('_pageDiv_' + (this.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.getZoomFactor()) + pageBounds.top;\n    };\n    /**\n     * @private\n     * @returns {boolean} - retruned the beolean value.\n     */\n    PdfViewerBase.prototype.checkIsNormalText = function () {\n        var isText = true;\n        var currentText = '';\n        // eslint-disable-next-line\n        var textSelectionModule = this.pdfViewer.textSelectionModule;\n        if (textSelectionModule && textSelectionModule.selectionRangeArray && textSelectionModule.selectionRangeArray.length === 1) {\n            currentText = textSelectionModule.selectionRangeArray[0].textContent;\n        }\n        else if (window.getSelection() && window.getSelection().anchorNode) {\n            currentText = window.getSelection().toString();\n        }\n        if (currentText !== '' && this.checkIsRtlText(currentText)) {\n            isText = false;\n        }\n        return isText;\n    };\n    PdfViewerBase.prototype.DeleteKeyPressed = function (event) {\n        if (this.pdfViewer.formDesignerModule && this.pdfViewer.designerMode && this.pdfViewer.selectedItems.formFields.length !== 0) {\n            this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);\n        }\n        else if (this.pdfViewer.annotation && !this.pdfViewer.designerMode) {\n            if (this.isTextMarkupAnnotationModule() && !this.getPopupNoteVisibleStatus()) {\n                this.pdfViewer.annotationModule.deleteAnnotation();\n            }\n            if (this.pdfViewer.selectedItems.annotations.length > 0) {\n                // eslint-disable-next-line\n                var annotation = this.pdfViewer.selectedItems.annotations[0];\n                var isReadOnly = true;\n                var type = annotation.shapeAnnotationType;\n                if (type === 'Path' || annotation.formFieldAnnotationType === 'SignatureField' || annotation.formFieldAnnotationType === 'InitialField' || type === 'HandWrittenSignature' || type === 'SignatureText' || type === 'SignatureImage') {\n                    var inputFields = document.getElementById(annotation.id);\n                    if (inputFields && inputFields.disabled) {\n                        isReadOnly = true;\n                    }\n                }\n                if (!isReadOnly) {\n                    if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n                        if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n                            this.pdfViewer.remove(annotation);\n                            this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));\n                        }\n                    }\n                    else {\n                        this.pdfViewer.remove(annotation);\n                        this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n        if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n            this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems();\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        if (this.viewerContainer) {\n            this.viewerContainer.style.cursor = 'auto';\n            if (this.pdfViewer.textSelectionModule) {\n                this.textLayer.modifyTextCursor(true);\n                this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n            }\n            if ((!Browser.isDevice || this.pdfViewer.enableDesktopMode) && !isBlazor()) {\n                this.enableAnnotationAddTools(true);\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n    */\n    PdfViewerBase.prototype.initiateTextSelection = function () {\n        if (this.pdfViewer.toolbar && !this.pdfViewer.toolbar.isSelectionToolDisabled) {\n            this.initiateTextSelectMode();\n            this.pdfViewer.toolbar.updateInteractionTools(true);\n        }\n    };\n    PdfViewerBase.prototype.enableAnnotationAddTools = function (isEnable) {\n        if (this.pdfViewer.toolbarModule) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);\n            }\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.isDesignerMode = function (target) {\n        var isDesignerMode = false;\n        if (this.pdfViewer.selectedItems.annotations.length !== 0 && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n            isDesignerMode = true;\n            // eslint-disable-next-line max-len\n        }\n        else if (this.pdfViewer.selectedItems.annotations.length !== 0 && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType !== 'Path') {\n            isDesignerMode = true;\n            // eslint-disable-next-line max-len\n        }\n        else if (this.pdfViewer.selectedItems.formFields.length !== 0 && this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType && this.pdfViewer.designerMode) {\n            isDesignerMode = true;\n        }\n        else {\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.isShapeCopied && (target.classList.contains('e-pv-text-layer') ||\n                // eslint-disable-next-line max-len\n                target.classList.contains('e-pv-text')) && !this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                isDesignerMode = true;\n                // eslint-disable-next-line max-len\n            }\n            else if (this.pdfViewer.formDesigner && this.pdfViewer.formDesigner.isShapeCopied && (target.classList.contains('e-pv-text-layer') ||\n                target.classList.contains('e-pv-text'))) {\n                isDesignerMode = true;\n            }\n        }\n        this.designerModetarget = target;\n        return isDesignerMode;\n    };\n    PdfViewerBase.prototype.handleTaps = function (touchPoints) {\n        var _this = this;\n        if (!this.singleTapTimer) {\n            this.singleTapTimer = setTimeout(function () {\n                _this.onSingleTap(touchPoints);\n                // eslint-disable-next-line\n            }, 300);\n            this.tapCount++;\n        }\n        else {\n            if (this.pdfViewer.enablePinchZoom) {\n                this.tapCount++;\n                clearTimeout(this.singleTapTimer);\n                this.singleTapTimer = null;\n                this.onDoubleTap(touchPoints);\n            }\n        }\n    };\n    PdfViewerBase.prototype.handleTextBoxTaps = function (touchPoints) {\n        var _this = this;\n        setTimeout(function () {\n            _this.inputTapCount = 0;\n        }, 300);\n        this.inputTapCount++;\n        // eslint-disable-next-line\n        var timer = setTimeout(function () {\n            _this.onTextBoxDoubleTap(touchPoints);\n        }, 200);\n        if (this.inputTapCount > 2) {\n            this.inputTapCount = 0;\n        }\n    };\n    PdfViewerBase.prototype.onTextBoxDoubleTap = function (touches) {\n        var target = touches[0].target;\n        if (this.inputTapCount === 2) {\n            if (this.pdfViewer.selectedItems.annotations.length !== 0) {\n                if (this.pdfViewer.annotationModule) {\n                    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                    this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName, currentAnnotation.pageIndex, currentAnnotation, null, true);\n                }\n                if (this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations) === true) {\n                    var elmtPosition = {};\n                    elmtPosition.x = this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                    elmtPosition.y = this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition, this.pdfViewer.selectedItems.annotations[0]);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].enableShapeLabel === true) {\n                    var elmtPosition = {};\n                    elmtPosition.x = this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                    elmtPosition.y = this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                    this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition, this.pdfViewer.selectedItems.annotations[0]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.onSingleTap = function (touches) {\n        var target = touches[0].target;\n        var isFormfields = false;\n        this.singleTapTimer = null;\n        if (target && (target.classList.contains('e-pdfviewer-formFields')\n            || target.classList.contains('e-pdfviewer-ListBox') || target.classList.contains('e-pdfviewer-signatureformfields'))) {\n            isFormfields = true;\n        }\n        if (!this.isLongTouchPropagated && !this.navigationPane.isNavigationToolbarVisible && !isFormfields) {\n            if (this.pdfViewer.toolbarModule) {\n                if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                    (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                    if (!this.isTapHidden) {\n                        if (isBlazor()) {\n                            // eslint-disable-next-line max-len\n                            this.viewerContainer.scrollTop -= this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar').clientHeight * this.getZoomFactor();\n                        }\n                        if (this.pdfViewer.toolbar.moreDropDown) {\n                            var dropDown = this.getElement('_more_option-popup');\n                            if (dropDown.firstElementChild) {\n                                dropDown.classList.remove('e-popup-open');\n                                dropDown.classList.add('e-popup-close');\n                                dropDown.removeChild(dropDown.firstElementChild);\n                            }\n                        }\n                    }\n                    else {\n                        if (isBlazor()) {\n                            // eslint-disable-next-line max-len\n                            this.viewerContainer.scrollTop += this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar').clientHeight * this.getZoomFactor();\n                        }\n                    }\n                    if (this.isTapHidden && (Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n                        this.mobileScrollerContainer.style.display = '';\n                        this.updateMobileScrollerPosition();\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && this.getSelectTextMarkupCurrentPage() == null) {\n                        this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    if (this.getSelectTextMarkupCurrentPage() == null) {\n                        if (!isBlazor()) {\n                            if (this.pdfViewer.enableToolbar) {\n                                this.pdfViewer.toolbarModule.showToolbar(true);\n                            }\n                        }\n                        else {\n                            //this.pdfViewer._dotnetInstance.invokeMethodAsync('TapOnMobileDevice', this.isTapHidden);\n                            this.blazorUIAdaptor.tapOnMobileDevice(this.isTapHidden);\n                        }\n                        this.isTapHidden = !this.isTapHidden;\n                    }\n                }\n                this.tapCount = 0;\n            }\n        }\n    };\n    PdfViewerBase.prototype.onDoubleTap = function (touches) {\n        var target = touches[0].target;\n        var isFormfields = false;\n        if (target && (target.classList.contains('e-pdfviewer-formFields')\n            || target.classList.contains('e-pdfviewer-ListBox') || target.classList.contains('e-pdfviewer-signatureformfields'))) {\n            isFormfields = true;\n        }\n        if (this.tapCount === 2 && !isFormfields) {\n            this.tapCount = 0;\n            /**\n             * Sometimes the values gets differ by some decimal points. So converted the decimal points values to Integer values.\n             */\n            // eslint-disable-next-line\n            if ((this.touchClientX >= parseInt((touches[0].clientX - 10).toString())) && (this.touchClientX <= touches[0].clientX + 10) &&\n                (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 30)) {\n                if (this.pdfViewer.magnification && this.pdfViewer.selectedItems.annotations.length !== 1) {\n                    this.pdfViewer.magnification.onDoubleTapMagnification();\n                }\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, this.toolbarHeight);\n                this.isTapHidden = false;\n                clearTimeout(this.singleTapTimer);\n            }\n        }\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            // eslint-disable-next-line max-len\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled && this.getSelectTextMarkupCurrentPage() == null) {\n                if (!(this.isWebkitMobile && (Browser.isDevice && !this.pdfViewer.enableDesktopMode))) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderStampAnnotation = function (event) {\n        if (this.pdfViewer.annotation) {\n            var zoomFactor = this.getZoomFactor();\n            var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (this.pdfViewer.enableStampAnnotations) {\n                var stampModule = this.pdfViewer.annotationModule.stampAnnotationModule;\n                if (stampModule && stampModule.isStampAnnotSelected) {\n                    if (pageDiv) {\n                        var pageCurrentRect = pageDiv.getBoundingClientRect();\n                        // eslint-disable-next-line max-len\n                        if (event.type === 'touchend' && this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType === 'Image') {\n                            var currentStampObj = this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;\n                            currentStampObj.pageIndex = pageIndex;\n                            currentStampObj.bounds.x = (event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor;\n                            currentStampObj.bounds.y = (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor;\n                            stampModule.updateDeleteItems(pageIndex, currentStampObj, currentStampObj.opacity);\n                            this.pdfViewer.add(currentStampObj);\n                            var canvas = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                            this.pdfViewer.renderDrawing(canvas, pageIndex);\n                        }\n                        else {\n                            // eslint-disable-next-line max-len\n                            stampModule.renderStamp((event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor, (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor, null, null, pageIndex, null, null, null, null);\n                        }\n                        stampModule.isStampAnnotSelected = false;\n                    }\n                }\n                this.pdfViewer.annotation.onAnnotationMouseDown();\n            }\n            if (this.pdfViewer.enableHandwrittenSignature && this.isSignatureAdded && pageDiv) {\n                var pageCurrentRect = pageDiv.getBoundingClientRect();\n                this.currentSignatureAnnot.pageIndex = pageIndex;\n                // eslint-disable-next-line max-len\n                this.signatureModule.renderSignature((event.changedTouches[0].clientX - pageCurrentRect.left) / zoomFactor, (event.changedTouches[0].clientY - pageCurrentRect.top) / zoomFactor);\n                this.isSignatureAdded = false;\n            }\n            if (event.touches.length === 1 && this.isTextMarkupAnnotationModule() && !this.getPopupNoteVisibleStatus()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (!isBlazor()) {\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateTotalPage();\n            }\n        }\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && this.mobiletotalPageContainer) {\n            this.mobiletotalPageContainer.innerHTML = this.pageCount.toString();\n            this.pageNoContainer.innerHTML = '(1-' + this.pageCount.toString() + ')';\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            this.isMixedSizeDocument = false;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            var isPortrait = false;\n            var isLandscape = false;\n            var differentPageSize = false;\n            for (var i = 0; i < pageLimit; i++) {\n                if (typeof pageValues.pageSizes[i] !== 'object') {\n                    var pageSize = pageValues.pageSizes[i].split(',');\n                    if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                        var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                        topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                    }\n                    else {\n                        topValue = this.pageGap;\n                    }\n                    var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                    this.pageSize.push(size);\n                }\n                else {\n                    if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                        // eslint-disable-next-line\n                        var previousPageHeight = pageValues.pageSizes[i - 1];\n                        topValue = this.pageGap + parseFloat(previousPageHeight.Height) + topValue;\n                    }\n                    else {\n                        topValue = this.pageGap;\n                    }\n                    var size = { width: pageValues.pageSizes[i].Width, height: pageValues.pageSizes[i].Height, top: topValue };\n                    this.pageSize.push(size);\n                }\n                if (this.pageSize[i].height > this.pageSize[i].width) {\n                    isPortrait = true;\n                }\n                if (this.pageSize[i].width > this.pageSize[i].height) {\n                    isLandscape = true;\n                }\n                if (i > 0 && this.pageSize[i].width !== this.pageSize[i - 1].width) {\n                    differentPageSize = true;\n                }\n                var pageWidth = this.pageSize[i].width;\n                if (pageWidth > this.highestWidth) {\n                    this.highestWidth = pageWidth;\n                }\n                var pageHeight = this.pageSize[i].height;\n                if (pageHeight > this.highestHeight) {\n                    this.highestHeight = pageHeight;\n                }\n            }\n            if ((isPortrait && isLandscape) || differentPageSize) {\n                this.isMixedSizeDocument = true;\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // eslint-disable-next-line max-len\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var lowerLimit = 1;\n        var higherLimit = 3;\n        if (this.pageStopValue <= 200) {\n            lowerLimit = 4;\n            higherLimit = 4;\n        }\n        else {\n            lowerLimit = 2;\n            higherLimit = 3;\n        }\n        var pageValue = pageNumber + lowerLimit;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n        if (isBlazor())\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateCurrentPageNumber', this.currentPageNumber);\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // eslint-disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () {\n                    _this.initiateRenderPagesVirtually(proxy);\n                }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true, action: 'VirtualLoad', elementId: proxy.pdfViewer.element.id, uniqueId: proxy.documentId, password: proxy.passwordData };\n        if (proxy.jsonDocumentId) {\n            // eslint-disable-next-line\n            jsonObject.documentId = proxy.jsonDocumentId;\n        }\n        this.virtualLoadRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.virtualLoadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load;\n        this.virtualLoadRequestHandler.responseType = 'json';\n        this.virtualLoadRequestHandler.mode = true;\n        this.virtualLoadRequestHandler.send(jsonObject);\n        // eslint-disable-next-line\n        this.virtualLoadRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            if (data) {\n                if (typeof data !== 'object') {\n                    try {\n                        data = JSON.parse(data);\n                    }\n                    catch (error) {\n                        proxy.onControlError(500, data, 'VirtualLoad');\n                    }\n                }\n            }\n            if (data) {\n                while (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (proxy.documentId === data.uniqueId) {\n                    proxy.pdfViewer.fireAjaxRequestSuccess('VirtualLoad', data);\n                    // eslint-disable-next-line\n                    var pageValues = data;\n                    if (proxy.pageSize[proxy.pageLimit - 1]) {\n                        var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                        for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                            if (typeof (pageValues.pageSizes[i]) !== 'object') {\n                                var pageSize = pageValues.pageSizes[i].split(',');\n                                if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                                    var previousPageHeight = proxy.pageSize[i - 1].height;\n                                    topValue = proxy.pageGap + parseFloat(previousPageHeight) + topValue;\n                                }\n                                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                                proxy.pageSize.push(size);\n                            }\n                            else {\n                                if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                                    var previousPageHeight = proxy.pageSize[i - 1].height;\n                                    topValue = proxy.pageGap + parseFloat(previousPageHeight) + topValue;\n                                }\n                                var size = { width: parseFloat(pageValues.pageSizes[i].Width), height: parseFloat(pageValues.pageSizes[i].Height), top: topValue };\n                                proxy.pageSize.push(size);\n                            }\n                        }\n                        // eslint-disable-next-line max-len\n                        proxy.pageContainer.style.height = proxy.getPageTop(proxy.pageSize.length - 1) + proxy.getPageHeight(proxy.pageSize.length - 1) + 'px';\n                        // eslint-disable-next-line\n                        var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n                        if (proxy.pageCount > 100) {\n                            proxy.pdfViewer.fireDocumentLoad(pageData);\n                            var linkAnnotationModule = proxy.pdfViewer.linkAnnotationModule;\n                            if (linkAnnotationModule && linkAnnotationModule.linkAnnotation && linkAnnotationModule.linkAnnotation.length > 0 && linkAnnotationModule.linkPage.length > 0) {\n                                linkAnnotationModule.renderDocumentLink(linkAnnotationModule.linkAnnotation, linkAnnotationModule.linkPage, linkAnnotationModule.annotationY, proxy.currentPageNumber - 1);\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        // eslint-disable-next-line\n        this.virtualLoadRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n        // eslint-disable-next-line\n        this.virtualLoadRequestHandler.onError = function (result) {\n            proxy.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.tileRenderPage = function (data, pageIndex) {\n        var _this = this;\n        var proxy = null;\n        proxy = this;\n        if (data && this.pageSize[pageIndex]) {\n            var pageWidth = this.getPageWidth(pageIndex);\n            var pageHeight = this.getPageHeight(pageIndex);\n            // eslint-disable-next-line max-len\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv_1 = this.getElement('_pageDiv_' + pageIndex);\n            var tileX = data.tileX ? data.tileX : 0;\n            var tileY = data.tileY ? data.tileY : 0;\n            if (pageDiv_1) {\n                pageDiv_1.style.width = pageWidth + 'px';\n                pageDiv_1.style.height = pageHeight + 'px';\n                pageDiv_1.style.background = '#fff';\n                pageDiv_1.style.top = this.getPageTop(pageIndex) + 'px';\n                if (this.pdfViewer.enableRtl) {\n                    pageDiv_1.style.right = this.updateLeftPosition(pageIndex) + 'px';\n                }\n                else {\n                    pageDiv_1.style.left = this.updateLeftPosition(pageIndex) + 'px';\n                }\n            }\n            if (canvas_1) {\n                canvas_1.style.background = '#fff';\n            }\n            var imageData = data['image'];\n            var zoomFactor = this.retrieveCurrentZoomFactor();\n            if (this.isReRenderRequired) {\n                if (data.zoomFactor) {\n                    zoomFactor = data.zoomFactor;\n                }\n                var currentString = this.documentId + '_' + pageIndex + '_' + zoomFactor + '_' + data.tileX + '_' + data.tileY;\n                // eslint-disable-next-line max-len\n                this.tilerequestLists.push(currentString);\n                // eslint-disable-next-line\n                var matrix = data['transformationMatrix'];\n                // eslint-disable-next-line\n                var width = data['width'];\n                if (imageData) {\n                    var tileX_1 = data.tileX ? data.tileX : 0;\n                    var tileY_1 = data.tileY ? data.tileY : 0;\n                    var scaleFactor = (!isNullOrUndefined(data.scaleFactor)) ? data.scaleFactor : 1.5;\n                    var image = document.getElementById(this.pdfViewer.element.id + '_tileimg_' + pageIndex + '_' + this.getZoomFactor() + '_' + tileX_1 + '_' + tileY_1);\n                    if (!image) {\n                        image = new Image();\n                        image.id = this.pdfViewer.element.id + '_tileimg_' + pageIndex + '_' + this.getZoomFactor() + '_' + tileX_1 + '_' + tileY_1;\n                        if (pageDiv_1) {\n                            pageDiv_1.append(image);\n                        }\n                    }\n                    image.src = imageData;\n                    image.onload = function () {\n                        proxy.showPageLoadingIndicator(pageIndex, false);\n                        proxy.tileRenderCount = proxy.tileRenderCount + 1;\n                        if ((tileX_1 === 0) && (tileY_1 === 0)) {\n                            if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                proxy.renderPDFInformations();\n                                proxy.isInitialLoaded = true;\n                                // eslint-disable-next-line\n                                var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n                                if (proxy.pageCount <= 100) {\n                                    proxy.pdfViewer.fireDocumentLoad(pageData);\n                                }\n                                proxy.isDocumentLoaded = false;\n                                if (proxy.pdfViewer.textSearch && proxy.pdfViewer.isExtractText) {\n                                    proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();\n                                }\n                            }\n                        }\n                        if (proxy.tileRenderCount === proxy.tileRequestCount) {\n                            if (proxy.isTextMarkupAnnotationModule()) {\n                                proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);\n                            }\n                            if (canvas_1) {\n                                canvas_1.style.display = 'none';\n                                canvas_1.src = '#';\n                            }\n                            var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n                            for (var i = 0; i < oldPageDiv.length; i++) {\n                                pageDiv_1.removeChild(oldPageDiv[i]);\n                            }\n                            proxy.isTileImageRendered = false;\n                            proxy.tileRenderCount = 0;\n                            if (proxy.pdfViewer.magnificationModule) {\n                                proxy.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                            proxy.isDrawnCompletely = true;\n                        }\n                    };\n                    var currentImageWidth = (((width * this.getZoomFactor()) / zoomFactor) / scaleFactor);\n                    var matrixElements = matrix.Elements ? matrix.Elements : matrix.Values;\n                    var currentImageTop = (((matrixElements[5] * this.getZoomFactor()) / zoomFactor) / scaleFactor);\n                    var currentImageLeft = (((matrixElements[4] * this.getZoomFactor()) / zoomFactor) / scaleFactor);\n                    image.width = currentImageWidth;\n                    image.style.width = currentImageWidth + 'px';\n                    image.style.top = currentImageTop + 'px';\n                    image.style.left = currentImageLeft + 'px';\n                    image.style.position = 'absolute';\n                }\n                if ((tileX === 0) && (tileY === 0)) {\n                    this.onPageRender(data, pageIndex, pageDiv_1);\n                }\n            }\n            else {\n                var oldCanvases = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_tileimg_' + pageIndex + '_\"]');\n                for (var l = 0; l < oldCanvases.length; l++) {\n                    var tileImgId = oldCanvases[l].id.split('_');\n                    var zoomFactor_1 = proxy.retrieveCurrentZoomFactor();\n                    // eslint-disable-next-line\n                    var tileData = JSON.parse(proxy.getWindowSessionStorageTile(pageIndex, parseFloat(tileImgId[tileImgId.length - 2]), parseFloat(tileImgId[tileImgId.length - 1]), zoomFactor_1));\n                    if (tileData && tileData.zoomFactor) {\n                        zoomFactor_1 = tileData.zoomFactor;\n                    }\n                    if (parseFloat(tileImgId[tileImgId.length - 4]) === pageIndex) {\n                        var node = oldCanvases[l];\n                        // Make sure it's really an Element\n                        if (node.nodeType == Node.ELEMENT_NODE) {\n                            node.onload = function () {\n                                proxy.showPageLoadingIndicator(pageIndex, false);\n                                proxy.tileRenderCount = proxy.tileRenderCount + 1;\n                                if ((tileX_2 === 0) && (tileY_2 === 0)) {\n                                    if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                        _this.renderPDFInformations();\n                                        _this.isInitialLoaded = true;\n                                        // eslint-disable-next-line\n                                        var pageData = window.sessionStorage.getItem(proxy.documentId + '_pagedata');\n                                        if (proxy.pageCount <= 100) {\n                                            proxy.pdfViewer.fireDocumentLoad(pageData);\n                                        }\n                                        proxy.isDocumentLoaded = false;\n                                        if (proxy.pdfViewer.textSearch && proxy.pdfViewer.isExtractText) {\n                                            proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();\n                                        }\n                                    }\n                                }\n                                if (proxy.tileRenderCount === proxy.tileRequestCount) {\n                                    canvas_1.style.display = 'none';\n                                    canvas_1.src = '#';\n                                    if (proxy.isTextMarkupAnnotationModule()) {\n                                        proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);\n                                    }\n                                    var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n                                    for (var i = 0; i < oldPageDiv.length; i++) {\n                                        pageDiv_1.removeChild(oldPageDiv[i]);\n                                    }\n                                    proxy.isTileImageRendered = false;\n                                    proxy.tileRenderCount = 0;\n                                    if (proxy.pdfViewer.magnificationModule) {\n                                        proxy.pdfViewer.magnificationModule.rerenderCountIncrement();\n                                    }\n                                    proxy.isDrawnCompletely = true;\n                                }\n                            };\n                            if (tileData)\n                                node.src = tileData.image;\n                        }\n                    }\n                }\n                var tileX_2 = data.tileX ? data.tileX : 0;\n                var tileY_2 = data.tileY ? data.tileY : 0;\n                if ((tileX_2 === 0) && (tileY_2 === 0)) {\n                    this.onPageRender(data, pageIndex, pageDiv_1);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderTileCanvas = function (pageWidth, pageHeight, pageIndex, pageDiv, zoomFactor, scaleFactor) {\n        var pageCanvas = this.getElement('_pageTileCanvas_' + pageIndex);\n        if (!pageCanvas) {\n            pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageTileCanvas_' + pageIndex, className: 'e-pv-pageTile-canvas' });\n            pageCanvas.style.width = pageWidth + 'px';\n            pageCanvas.style.height = pageHeight + 'px';\n            pageCanvas.style.display = 'none';\n            pageCanvas.style.backgroundColor = '#fff';\n            if (this.isMixedSizeDocument && this.highestWidth > 0) {\n                pageCanvas.style.marginLeft = 'auto';\n                pageCanvas.style.marginRight = 'auto';\n            }\n            pageDiv.appendChild(pageCanvas);\n        }\n        return pageCanvas;\n    };\n    PdfViewerBase.prototype.calculateImageWidth = function (pageWidth, zoomFactor, scaleFactor, imageWidth) {\n        var width = (pageWidth / this.getZoomFactor()) * zoomFactor * scaleFactor;\n        // eslint-disable-next-line\n        if ((parseInt(imageWidth.toString())) === (parseInt(width.toString()))) {\n            imageWidth = width;\n        }\n        imageWidth = ((imageWidth * this.getZoomFactor()) / zoomFactor);\n        return imageWidth;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        var proxy = this;\n        if (data && this.pageSize[pageIndex]) {\n            var pageWidth = this.getPageWidth(pageIndex);\n            var pageHeight = this.getPageHeight(pageIndex);\n            // eslint-disable-next-line max-len\n            var canvas_2 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv_2 = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv_2) {\n                pageDiv_2.style.width = pageWidth + 'px';\n                pageDiv_2.style.height = pageHeight + 'px';\n                pageDiv_2.style.top = this.getPageTop(pageIndex) + 'px';\n                if (this.pdfViewer.enableRtl) {\n                    pageDiv_2.style.right = this.updateLeftPosition(pageIndex) + 'px';\n                }\n                else {\n                    pageDiv_2.style.left = this.updateLeftPosition(pageIndex) + 'px';\n                }\n            }\n            if (canvas_2) {\n                canvas_2.style.background = '#fff';\n                canvas_2.style.display = 'block';\n                canvas_2.style.width = pageWidth + 'px';\n                canvas_2.style.height = pageHeight + 'px';\n                if (pageWidth < parseFloat(pageDiv_2.style.width)) {\n                    pageDiv_2.style.boxShadow = 'none';\n                }\n                // eslint-disable-next-line\n                var imageData = data['image'];\n                if (imageData) {\n                    canvas_2.onload = function () {\n                        var oldCanvases = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_tileimg_' + pageIndex + '_\"]');\n                        var pageCanvas = proxy.getElement('_pageDiv_' + pageIndex);\n                        for (var i = 0; i < oldCanvases.length; i++) {\n                            var tileImgId = oldCanvases[i].id.split('_');\n                            if (parseFloat(tileImgId[tileImgId.length - 3]) != proxy.getZoomFactor())\n                                pageCanvas.removeChild(oldCanvases[i]);\n                        }\n                        var oldPageDiv = document.querySelectorAll('img[id*=\"' + proxy.pdfViewer.element.id + '_oldCanvas\"]');\n                        for (var i = 0; i < oldPageDiv.length; i++) {\n                            pageDiv_2.removeChild(oldPageDiv[i]);\n                        }\n                        if (_this.pdfViewer.magnificationModule) {\n                            _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                        }\n                        _this.showPageLoadingIndicator(pageIndex, false);\n                        if (pageIndex === 0 && _this.isDocumentLoaded) {\n                            _this.renderPDFInformations();\n                            _this.isInitialLoaded = true;\n                            // eslint-disable-next-line\n                            var pageData = window.sessionStorage.getItem(_this.documentId + '_pagedata');\n                            if (_this.pageCount <= 100) {\n                                _this.pdfViewer.fireDocumentLoad(pageData);\n                            }\n                            _this.isDocumentLoaded = false;\n                            if (_this.pdfViewer.textSearch && _this.pdfViewer.isExtractText) {\n                                _this.pdfViewer.textSearchModule.getPDFDocumentTexts();\n                            }\n                        }\n                        if (_this.pdfViewer.magnificationModule) {\n                            _this.pdfViewer.magnificationModule.pushImageObjects(canvas_2);\n                        }\n                    };\n                    canvas_2.src = imageData;\n                }\n                this.onPageRender(data, pageIndex, pageDiv_2);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.onPageRender = function (data, pageIndex, pageDiv) {\n        // eslint-disable-next-line\n        var aElement = pageDiv && pageDiv.getElementsByTagName('a');\n        var isAnnotationRendered = false;\n        if (aElement && aElement.length !== 0) {\n            for (var index = aElement.length - 1; index >= 0; index--) {\n                aElement[index].parentNode.removeChild(aElement[index]);\n            }\n        }\n        if (this.pdfViewer.textSearchModule || this.pdfViewer.textSelectionModule || this.pdfViewer.annotationModule) {\n            this.renderTextContent(data, pageIndex);\n        }\n        if (this.pdfViewer.formFieldsModule && !this.pdfViewer.magnificationModule.isFormFieldPageZoomed) {\n            this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);\n        }\n        if (this.pdfViewer.formDesignerModule && !this.isDocumentLoaded) {\n            this.pdfViewer.formDesignerModule.rerenderFormFields(pageIndex);\n        }\n        if (this.pdfViewer.formFieldsModule && !this.isDocumentLoaded && !this.pdfViewer.formDesignerModule) {\n            this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);\n        }\n        if (this.pdfViewer.formDesignerModule && this.isDocumentLoaded && this.pdfViewer.magnificationModule.isFormFieldPageZoomed) {\n            this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);\n            this.pdfViewer.magnificationModule.isFormFieldPageZoomed = false;\n        }\n        if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n            this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n        }\n        if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n        }\n        if (this.documentAnnotationCollections) {\n            var isAnnotationAdded = false;\n            for (var i = 0; i < this.annotationRenderredList.length; i++) {\n                if (this.annotationRenderredList[i] === pageIndex) {\n                    isAnnotationAdded = true;\n                }\n            }\n            // eslint-disable-next-line\n            var pageAnnotations = this.documentAnnotationCollections[pageIndex];\n            if (pageAnnotations && !isAnnotationAdded) {\n                data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n                data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n                data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n                data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n                data.stampAnnotations = pageAnnotations.stampAnnotations;\n                data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n                data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n                this.annotationRenderredList.push(pageIndex);\n            }\n        }\n        if (this.isImportAction) {\n            // eslint-disable-next-line\n            var pageAnnotations = this.checkDocumentCollectionData(pageIndex);\n            if (pageAnnotations) {\n                data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n                data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n                data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n                data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n                data.stampAnnotations = pageAnnotations.stampAnnotations;\n                data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n                data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n                isAnnotationRendered = true;\n            }\n        }\n        if (this.pdfViewer.annotationModule && (this.isTextMarkupAnnotationModule() || this.isShapeBasedAnnotationsEnabled())) {\n            if (this.isStampAnnotationModule()) {\n                // eslint-disable-next-line\n                var stampData = data['stampAnnotations'];\n                if (isAnnotationRendered) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData, pageIndex, null, true);\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData, pageIndex);\n                }\n            }\n            if (isAnnotationRendered) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.renderAnnotations(pageIndex, data.shapeAnnotation, data.measureShapeAnnotation, data.textMarkupAnnotation, null, true);\n            }\n            else {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.renderAnnotations(pageIndex, data.shapeAnnotation, data.measureShapeAnnotation, data.textMarkupAnnotation);\n            }\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(data.stickyNotesAnnotation, pageIndex);\n        }\n        if (this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule) {\n            this.pdfViewer.formDesignerModule.updateCanvas(pageIndex);\n        }\n        if (this.pdfViewer.textSearchModule) {\n            if (this.pdfViewer.textSearchModule.isTextSearch) {\n                this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n            }\n        }\n        if (this.isShapeBasedAnnotationsEnabled()) {\n            var canvas1 = this.getElement('_annotationCanvas_' + pageIndex);\n            var commonStyle = 'position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000';\n            if (canvas1) {\n                var bounds = canvas1.getBoundingClientRect();\n                renderAdornerLayer(bounds, commonStyle, canvas1, pageIndex, this.pdfViewer);\n                this.pdfViewer.renderSelector(pageIndex, this.pdfViewer.annotationSelectorSettings);\n            }\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(pageIndex);\n        }\n        if (this.isFreeTextAnnotationModule() && data.freeTextAnnotation) {\n            if (isAnnotationRendered) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation, pageIndex);\n            }\n            else {\n                this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation, pageIndex);\n            }\n        }\n        if (this.isInkAnnotationModule() && data && data.signatureInkAnnotation) {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(data.signatureInkAnnotation, pageIndex, isAnnotationRendered);\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.isAnnotationSelected && this.pdfViewer.annotationModule.annotationPageIndex === pageIndex) {\n            this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();\n        }\n        this.isLoadedFormFieldAdded = false;\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - page index for rendering the annotation.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.renderAnnotations = function (pageIndex, isAddedProgrammatically) {\n        // eslint-disable-next-line\n        var data = {};\n        if (this.documentAnnotationCollections) {\n            var isAnnotationAdded = false;\n            for (var i = 0; i < this.annotationRenderredList.length; i++) {\n                if (this.annotationRenderredList[i] === pageIndex) {\n                    isAnnotationAdded = true;\n                }\n            }\n            // eslint-disable-next-line\n            var pageAnnotations = this.documentAnnotationCollections[pageIndex];\n            if (pageAnnotations && !isAnnotationAdded) {\n                data.shapeAnnotation = pageAnnotations.shapeAnnotation;\n                data.measureShapeAnnotation = pageAnnotations.measureShapeAnnotation;\n                data.textMarkupAnnotation = pageAnnotations.textMarkupAnnotation;\n                data.freeTextAnnotation = pageAnnotations.freeTextAnnotation;\n                data.stampAnnotations = pageAnnotations.stampAnnotations;\n                data.stickyNotesAnnotation = pageAnnotations.stickyNotesAnnotation;\n                data.signatureAnnotation = pageAnnotations.signatureAnnotation;\n                data.signatureInkAnnotation = pageAnnotations.signatureInkAnnotation;\n                this.annotationRenderredList.push(pageIndex);\n            }\n        }\n        if (this.isAnnotationCollectionRemoved) {\n            data.shapeAnnotation = [];\n            data.measureShapeAnnotation = [];\n            data.textMarkupAnnotation = [];\n            data.freeTextAnnotation = [];\n            data.stampAnnotations = [];\n            data.stickyNotesAnnotation = [];\n            data.signatureInkAnnotation = [];\n        }\n        if (this.isTextMarkupAnnotationModule() || this.isShapeBasedAnnotationsEnabled()) {\n            if (this.isStampAnnotationModule()) {\n                // eslint-disable-next-line\n                var stampData = data['stampAnnotations'];\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData, pageIndex);\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotationModule.renderAnnotations(pageIndex, data.shapeAnnotation, data.measureShapeAnnotation, data.textMarkupAnnotation);\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(data.stickyNotesAnnotation, pageIndex);\n        }\n        if (this.pdfViewer.textSearchModule) {\n            if (this.pdfViewer.textSearchModule.isTextSearch) {\n                this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n            }\n        }\n        if (this.isImportAction) {\n            var isAnnotationAdded = false;\n            for (var i = 0; i < this.annotationPageList.length; i++) {\n                if (this.annotationPageList[i] === pageIndex) {\n                    isAnnotationAdded = true;\n                }\n            }\n            if (!isAnnotationAdded) {\n                if (this.importedAnnotation) {\n                    this.drawPageAnnotations(this.importedAnnotation, pageIndex, true);\n                    this.annotationPageList[this.annotationPageList.length] = pageIndex;\n                }\n            }\n        }\n        if (this.isShapeBasedAnnotationsEnabled()) {\n            var canvas1 = this.getElement('_annotationCanvas_' + pageIndex);\n            var commonStyle = 'position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000';\n            if (canvas1) {\n                var bounds = canvas1.getBoundingClientRect();\n                renderAdornerLayer(bounds, commonStyle, canvas1, pageIndex, this.pdfViewer);\n                this.pdfViewer.renderSelector(pageIndex);\n            }\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(pageIndex);\n        }\n        if (this.isFreeTextAnnotationModule() && data.freeTextAnnotation) {\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation, pageIndex, undefined);\n        }\n        if (data && data.signatureAnnotation) {\n            this.signatureModule.renderExistingSignature(data.signatureAnnotation, pageIndex, false);\n        }\n        if (this.isInkAnnotationModule() && data && data.signatureInkAnnotation) {\n            this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(data.signatureInkAnnotation, pageIndex, false);\n        }\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.isAnnotationSelected) {\n            this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var texts = data['textContent'];\n        // eslint-disable-next-line\n        var bounds = data['textBounds'];\n        // eslint-disable-next-line\n        var rotation = data['rotation'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (!textLayer) {\n            // eslint-disable-next-line max-len\n            textLayer = this.textLayer.addTextLayer(pageIndex, this.getPageWidth(pageIndex), this.getPageHeight(pageIndex), this.getElement('_pageDiv_' + pageIndex));\n        }\n        if (textLayer && texts && bounds) {\n            textLayer.style.display = 'block';\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds, rotation);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds, rotation, true);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // eslint-disable-next-line max-len\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div', attrs: { 'tabindex': '0' } });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        if (this.pdfViewer.enableRtl) {\n            pageDiv.style.right = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        else {\n            pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && !this.isThumb) {\n            this.updateMobileScrollerPosition();\n        }\n    };\n    PdfViewerBase.prototype.renderPDFInformations = function () {\n        if (this.pdfViewer.thumbnailViewModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n        if (this.pdfViewer.annotationModule) {\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.initializeAcccordionContainer();\n            }\n            if (this.pdfViewer.isCommandPanelOpen) {\n                this.pdfViewer.annotation.showCommentsPanel();\n            }\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments();\n        }\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @param pageDiv\n     * @param pageWidth\n     * @param pageHeight\n     * @param pageNumber\n     * @param displayMode\n     * @param pageDiv\n     * @param pageWidth\n     * @param pageHeight\n     * @param pageNumber\n     * @param displayMode\n     * @param pageDiv\n     * @param pageWidth\n     * @param pageHeight\n     * @param pageNumber\n     * @param displayMode\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        if (pageDiv) {\n            // eslint-disable-next-line\n            var pageCanvas = this.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                pageCanvas.width = pageWidth;\n                pageCanvas.height = pageHeight;\n                pageCanvas.style.display = 'block';\n                if (this.isMixedSizeDocument && this.highestWidth > 0) {\n                    pageCanvas.style.marginLeft = 'auto';\n                    pageCanvas.style.marginRight = 'auto';\n                }\n            }\n            else {\n                // eslint-disable-next-line max-len\n                pageCanvas = createElement('img', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n                pageCanvas.width = pageWidth;\n                pageCanvas.height = pageHeight;\n                pageCanvas.style.display = displayMode;\n                if (this.isMixedSizeDocument && this.highestWidth > 0) {\n                    pageCanvas.style.marginLeft = 'auto';\n                    pageCanvas.style.marginRight = 'auto';\n                }\n                pageDiv.appendChild(pageCanvas);\n            }\n            if (this.pdfViewer.annotationModule && this.pdfViewer.annotation) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n            }\n            if (this.pdfViewer.textSearchModule || this.pdfViewer.textSelectionModule || this.pdfViewer.annotationModule) {\n                this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n            }\n            if (this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule) {\n                this.pdfViewer.formDesignerModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n            }\n            return pageCanvas;\n        }\n    };\n    /**\n     * @private\n     * @param {any} pageCanvas - The canvas for rendering the page.\n     * @param {any} pageNumber - The page number for adding styles.\n     * @returns {void}\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.applyElementStyles = function (pageCanvas, pageNumber) {\n        if (this.isMixedSizeDocument && pageCanvas) {\n            var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n            var oldCanvas = document.getElementById(this.pdfViewer.element.id + '_oldCanvas_' + pageNumber);\n            if (pageCanvas && canvasElement && canvasElement.offsetLeft > 0) {\n                pageCanvas.style.marginLeft = canvasElement.offsetLeft + 'px';\n                pageCanvas.style.marginRight = canvasElement.offsetLeft + 'px';\n            }\n            else if (oldCanvas && oldCanvas.offsetLeft > 0) {\n                pageCanvas.style.marginLeft = oldCanvas.offsetLeft + 'px';\n                pageCanvas.style.marginRight = oldCanvas.offsetLeft + 'px';\n            }\n            else {\n                pageCanvas.style.marginLeft = 'auto';\n                pageCanvas.style.marginRight = 'auto';\n            }\n        }\n    };\n    /**\n     * @private\n     * @param  {number} pageIndex - page index for updating positon.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        var width = this.viewerContainer.getBoundingClientRect().width;\n        if (width === 0) {\n            width = parseFloat(this.pdfViewer.width.toString());\n        }\n        // eslint-disable-next-line max-len\n        if (this.isMixedSizeDocument && this.highestWidth > 0) {\n            if (this.viewerContainer.clientWidth > 0) {\n                leftPosition = (this.viewerContainer.clientWidth - (this.highestWidth * this.getZoomFactor())) / 2;\n            }\n            else {\n                leftPosition = (width - (this.highestWidth * this.getZoomFactor())) / 2;\n            }\n            var pageDiff = (this.highestWidth * this.getZoomFactor() - this.getPageWidth(pageIndex)) / 2;\n            if (leftPosition > 0) {\n                leftPosition += pageDiff;\n            }\n            else {\n                leftPosition = pageDiff;\n            }\n        }\n        else {\n            if (this.viewerContainer.clientWidth > 0) {\n                leftPosition = (this.viewerContainer.clientWidth - this.getPageWidth(pageIndex)) / 2;\n            }\n            else {\n                leftPosition = (width - this.getPageWidth(pageIndex)) / 2;\n            }\n        }\n        var isLandscape = false;\n        if (this.pageSize[pageIndex].width > this.pageSize[pageIndex].height) {\n            isLandscape = true;\n        }\n        // eslint-disable-next-line max-len\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            var leftValue = leftPosition;\n            if (leftPosition > 0 && (Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n                // eslint-disable-next-line\n                leftPosition = leftValue;\n            }\n            else {\n                leftPosition = this.pageLeft;\n            }\n            if ((leftPosition > 0) && this.isMixedSizeDocument) {\n                if (leftValue > 0) {\n                    leftPosition = leftValue;\n                }\n            }\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - The page index for positon.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            if (this.isMixedSizeDocument && this.highestWidth > 0) {\n                if (this.viewerContainer.clientWidth > 0) {\n                    // eslint-disable-next-line max-len\n                    leftPosition = (this.viewerContainer.clientWidth - (this.highestWidth * this.getZoomFactor())) / 2;\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    leftPosition = (this.viewerContainer.getBoundingClientRect().width - (this.highestWidth * this.getZoomFactor())) / 2;\n                }\n                var pageDiff = (this.highestWidth * this.getZoomFactor() - this.getPageWidth(pageIndex)) / 2;\n                if (leftPosition > 0) {\n                    leftPosition += pageDiff;\n                }\n                else {\n                    leftPosition = pageDiff;\n                }\n            }\n            else {\n                if (this.viewerContainer.clientWidth > 0) {\n                    // eslint-disable-next-line max-len\n                    leftPosition = (this.viewerContainer.clientWidth - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n                }\n            }\n            var isLandscape = false;\n            if (this.pageSize[pageIndex].width > this.pageSize[pageIndex].height) {\n                isLandscape = true;\n            }\n            // eslint-disable-next-line max-len\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                var leftValue = leftPosition;\n                leftPosition = this.pageLeft;\n                // eslint-disable-next-line max-len\n                if ((leftValue > 0) && this.isMixedSizeDocument) {\n                    leftPosition = leftValue;\n                }\n            }\n            // eslint-disable-next-line max-len\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                if (!this.pdfViewer.enableRtl) {\n                    pageDiv.style.left = leftPosition + 'px';\n                }\n                else {\n                    pageDiv.style.right = leftPosition + 'px';\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    /**\n     * @private\n     * @param {Point} clientPoint - The user should provide a x, y coordinates.\n     * @returns {number}\n     */\n    PdfViewerBase.prototype.getPageNumberFromClientPoint = function (clientPoint) {\n        var pointX = clientPoint.x + this.viewerContainer.scrollLeft;\n        var pointY = clientPoint.y + this.viewerContainer.scrollTop;\n        for (var i = 0; i < this.pageCount; i++) {\n            if (pointY < (this.pageSize[i].top + this.pageSize[i].height)) {\n                var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n                var pageLeft = ((viewerContainerBounds.width - this.pageSize[i].width) / 2) + viewerContainerBounds.x;\n                var verticalScrollPosition = 0;\n                if (pointY > this.pageSize[i].top) {\n                    verticalScrollPosition = (pointY - this.pageSize[i].top);\n                }\n                else {\n                    verticalScrollPosition = (this.pageSize[i].top - pointY);\n                }\n                if (verticalScrollPosition > 0) {\n                    if (this.pageSize[i] != null) {\n                        var pageHeight = this.getPageHeight(i);\n                        if ((pointX < pageLeft) || (pointX > (pageLeft + (this.pageSize[i].width)))) {\n                            return -1;\n                        }\n                        if (verticalScrollPosition <= (this.getPageTop(i) + this.pageSize[i].height)) {\n                            return i + 1;\n                        }\n                    }\n                }\n            }\n        }\n        return -1;\n    };\n    /**\n     * @private\n     * @param {Point} clientPoint - The user should provide a x, y coordinates.\n     * @param {number} pageNumber - We need to pass pageNumber.\n     * @returns {Point}\n     */\n    PdfViewerBase.prototype.convertClientPointToPagePoint = function (clientPoint, pageNumber) {\n        if (pageNumber !== -1) {\n            var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n            var pageLeft = ((viewerContainerBounds.width - this.pageSize[pageNumber - 1].width) / 2) + viewerContainerBounds.x;\n            var pagePoint = { x: (clientPoint.x + this.viewerContainer.scrollLeft) - pageLeft, y: (clientPoint.y + this.viewerContainer.scrollTop) - this.pageSize[pageNumber - 1].top };\n            return pagePoint;\n        }\n        return null;\n    };\n    /**\n     * @private\n     * @param {Point} pagePoint - The user needs to provide a page x, y position.\n     * @param {number} pageNumber - We need to pass pageNumber.\n     * @returns {Point}\n     */\n    PdfViewerBase.prototype.convertPagePointToClientPoint = function (pagePoint, pageNumber) {\n        if (pageNumber !== -1) {\n            var viewerContainerBounds = this.getElement('_pageViewContainer').getBoundingClientRect();\n            var pageLeft = ((viewerContainerBounds.width - this.pageSize[pageNumber - 1].width) / 2) + viewerContainerBounds.x;\n            var clientPoint = { x: pagePoint.x + pageLeft, y: pagePoint.y + this.pageSize[pageNumber - 1].top };\n            return clientPoint;\n        }\n        return null;\n    };\n    /**\n     * @private\n     * @param {Point} pagePoint - The user needs to provide a page x, y position.\n     * @param {number} pageNumber - We need to pass pageNumber.\n     * @returns {Point}\n     */\n    PdfViewerBase.prototype.convertPagePointToScrollingPoint = function (pagePoint, pageNumber) {\n        if (pageNumber !== -1) {\n            var scrollingPoint = { x: pagePoint.x + this.viewerContainer.scrollLeft, y: pagePoint.y + this.viewerContainer.scrollTop };\n            return scrollingPoint;\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if (this.scrollHoldTimer) {\n            clearTimeout(this.scrollHoldTimer);\n        }\n        this.scrollHoldTimer = null;\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     * @param {number} currentPageNumber - The current pagenumber.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        if (this.isPanMode) {\n            if (this.renderedPagesList.indexOf(currentPageNumber - 1) === -1) {\n                this.reRenderedCount = 0;\n            }\n        }\n        else {\n            this.reRenderedCount = 0;\n        }\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            var isSkip = false;\n            if (this.isDataExits && !this.getStoredData(currentPageIndex)) {\n                isSkip = true;\n            }\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified() && !isSkip) {\n                this.renderCountIncrement();\n                this.createRequestForRender(currentPageIndex);\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var isSkip = false;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (this.isDataExits && !this.getStoredData(previous)) {\n                isSkip = true;\n            }\n            if (canvas !== null && !isSkip) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.renderCountIncrement();\n                    this.createRequestForRender(previous);\n                }\n            }\n            if (this.isMinimumZoom) {\n                this.renderPreviousPagesInScroll(previous);\n            }\n            var next = currentPageIndex + 1;\n            var pageHeight = 0;\n            if (next < this.pageCount) {\n                pageHeight = this.getPageHeight(next);\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified() && pageHeight) {\n                    this.createRequestForRender(next);\n                    this.renderCountIncrement();\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPreviousPagesInScroll = function (pageIndex) {\n        var next = pageIndex - 1;\n        var pageNumber = next - 1;\n        if (next > 0) {\n            if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(next);\n                this.renderCountIncrement();\n            }\n            if (pageNumber > 0) {\n                if (this.renderedPagesList.indexOf(pageNumber) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(pageNumber);\n                    this.renderCountIncrement();\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        // eslint-disable-next-line\n        var Url = URL || webkitURL;\n        blobUrl = Url.createObjectURL(blobUrl);\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.downloadFileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.downloadExportAnnotationJson = function (blobUrl, isForm) {\n        // eslint-disable-next-line\n        var Url = URL || webkitURL;\n        blobUrl = Url.createObjectURL(blobUrl);\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                if (this.pdfViewer.exportAnnotationFileName !== null) {\n                    anchorElement.download = this.pdfViewer.exportAnnotationFileName.split('.')[0] + '.json';\n                }\n                else {\n                    anchorElement.download = this.pdfViewer.fileName.split('.')[0] + '.json';\n                }\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n            if (isForm) {\n                this.pdfViewer.fireFormExportSuccess(blobUrl, anchorElement.download);\n            }\n            else {\n                this.pdfViewer.fireExportSuccess(blobUrl, anchorElement.download);\n            }\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n            if (isForm) {\n                this.pdfViewer.fireFormExportSuccess(blobUrl, this.pdfViewer.fileName.split('.')[0] + '.json');\n            }\n            else {\n                this.pdfViewer.fireExportSuccess(blobUrl, this.pdfViewer.fileName.split('.')[0] + '.json');\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadExportedXFdfAnnotation = function (blobUrl) {\n        // eslint-disable-next-line\n        var Url = URL || webkitURL;\n        blobUrl = Url.createObjectURL(blobUrl);\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                if (this.pdfViewer.exportAnnotationFileName !== null) {\n                    anchorElement.download = this.pdfViewer.exportAnnotationFileName.split('.')[0] + '.xfdf';\n                }\n                else {\n                    anchorElement.download = this.pdfViewer.fileName.split('.')[0] + '.xfdf';\n                }\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n            this.pdfViewer.fireExportSuccess(blobUrl, anchorElement.download);\n        }\n    };\n    /**\n     * @private\n     * @param {string} path - The path for exporting the fields.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.exportFormFields = function (path) {\n        this.createRequestForExportFormfields(false, path);\n    };\n    /**\n     * @param source\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.importFormFields = function (source) {\n        this.createRequestForImportingFormfields(source);\n    };\n    /**\n     * @param isObject\n     * @param path\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createRequestForExportFormfields = function (isObject, path) {\n        var _this = this;\n        var proxy = null;\n        proxy = this;\n        var promise = new Promise(function (resolve, reject) {\n            // eslint-disable-next-line\n            var jsonObject = proxy.createFormfieldsJsonData();\n            proxy.pdfViewer.fireFormExportStarted(jsonObject.pdfAnnotation);\n            jsonObject.action = 'ExportFormFields';\n            // eslint-disable-next-line\n            jsonObject['hashId'] = proxy.hashId;\n            // eslint-disable-next-line\n            jsonObject['fileName'] = proxy.pdfViewer.fileName;\n            if (path && path !== '' && !isObject) {\n                // eslint-disable-next-line\n                jsonObject['filePath'] = path;\n            }\n            // eslint-disable-next-line\n            jsonObject['elementId'] = _this.pdfViewer.element.id;\n            // eslint-disable-next-line max-len\n            if (proxy.jsonDocumentId) {\n                // eslint-disable-next-line\n                jsonObject.document = proxy.jsonDocumentId;\n            }\n            var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.exportFormFields;\n            proxy.exportFormFieldsRequestHandler = new AjaxHandler(_this.pdfViewer);\n            proxy.exportFormFieldsRequestHandler.url = url;\n            proxy.exportFormFieldsRequestHandler.mode = true;\n            proxy.exportFormFieldsRequestHandler.responseType = 'text';\n            proxy.exportFormFieldsRequestHandler.send(jsonObject);\n            // eslint-disable-next-line\n            proxy.exportFormFieldsRequestHandler.onSuccess = function (result) {\n                // eslint-disable-next-line\n                var data = result.data;\n                if (data) {\n                    if (data) {\n                        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportFormFields, data);\n                        if (isObject) {\n                            // eslint-disable-next-line\n                            var annotationJson = decodeURIComponent(escape(atob(data.split(',')[1])));\n                            resolve(annotationJson);\n                            proxy.pdfViewer.fireFormExportSuccess(annotationJson, proxy.pdfViewer.fileName);\n                        }\n                        else if (data.split('base64,')[1]) {\n                            var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/json');\n                            if (Browser.isIE || Browser.info.name === 'edge') {\n                                window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.json');\n                            }\n                            else {\n                                proxy.downloadExportAnnotationJson(blobUrl, true);\n                            }\n                        }\n                    }\n                }\n            };\n            // eslint-disable-next-line\n            proxy.exportFormFieldsRequestHandler.onFailure = function (result) {\n                proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation, result.statusText);\n            };\n            // eslint-disable-next-line\n            proxy.exportFormFieldsRequestHandler.onError = function (result) {\n                proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation, result.statusText);\n            };\n        });\n        if (isObject) {\n            return promise;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @param source\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createRequestForImportingFormfields = function (source) {\n        var proxy = null;\n        proxy = this;\n        // eslint-disable-next-line\n        var jsonObject = {};\n        if (typeof source === 'object') {\n            jsonObject.data = JSON.stringify(source);\n        }\n        else {\n            jsonObject.data = source;\n            if (source.split('.')[1] === 'json') {\n                // eslint-disable-next-line\n                jsonObject['fileName'] = proxy.pdfViewer.fileName;\n            }\n        }\n        proxy.pdfViewer.fireFormImportStarted(source);\n        // eslint-disable-next-line\n        jsonObject.action = 'ImportFormFields';\n        // eslint-disable-next-line\n        jsonObject['hashId'] = proxy.hashId;\n        // eslint-disable-next-line\n        jsonObject['elementId'] = this.pdfViewer.element.id;\n        // eslint-disable-next-line max-len\n        if (proxy.jsonDocumentId) {\n            // eslint-disable-next-line\n            jsonObject.document = proxy.jsonDocumentId;\n        }\n        var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.importFormFields;\n        proxy.importFormFieldsRequestHandler = new AjaxHandler(this.pdfViewer);\n        proxy.importFormFieldsRequestHandler.url = url;\n        proxy.importFormFieldsRequestHandler.mode = true;\n        proxy.importFormFieldsRequestHandler.responseType = 'text';\n        proxy.importFormFieldsRequestHandler.send(jsonObject);\n        // eslint-disable-next-line\n        proxy.importFormFieldsRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            if (data && data !== 'null') {\n                if (typeof data !== 'object') {\n                    try {\n                        data = JSON.parse(data);\n                        if (typeof data !== 'object') {\n                            proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importFormFields);\n                            proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n                            data = null;\n                        }\n                    }\n                    catch (error) {\n                        proxy.pdfViewer.fireFormImportFailed(source, proxy.pdfViewer.localeObj.getConstant('File not found'));\n                        if (isBlazor()) {\n                            var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n                            promise.then(function (value) {\n                                proxy.openImportExportNotificationPopup(value);\n                            });\n                        }\n                        else {\n                            proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n                        }\n                        proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importFormFields);\n                        data = null;\n                    }\n                }\n                proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importFormFields, data);\n                proxy.pdfViewer.fireFormImportSuccess(source);\n                window.sessionStorage.removeItem(this.documentId + '_formfields');\n                this.pdfViewer.formFieldsModule.removeExistingFormFields();\n                window.sessionStorage.removeItem(this.documentId + '_formDesigner');\n                proxy.saveFormfieldsData(data);\n                for (var i = 0; i < proxy.renderedPagesList.length; i++) {\n                    this.pdfViewer.formFieldsModule.renderFormFields(proxy.renderedPagesList[i]);\n                }\n            }\n            else {\n                proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n                if (isBlazor()) {\n                    var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n                    promise.then(function (value) {\n                        proxy.openImportExportNotificationPopup(value);\n                    });\n                }\n                else {\n                    proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n                }\n            }\n        };\n        // eslint-disable-next-line\n        proxy.importFormFieldsRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n        };\n        // eslint-disable-next-line\n        proxy.importFormFieldsRequestHandler.onError = function (result) {\n            proxy.pdfViewer.fireFormImportFailed(source, result.statusText);\n        };\n    };\n    /**\n     * @public\n     * @returns {any} - Returns the Json data.\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createFormfieldsJsonData = function () {\n        // eslint-disable-next-line\n        var jsonObject = {};\n        if (this.pdfViewer.formDesignerModule) {\n            var fieldsData = this.pdfViewer.formDesignerModule.downloadFormDesigner();\n            // eslint-disable-next-line\n            jsonObject['formDesigner'] = fieldsData;\n        }\n        else if (this.pdfViewer.formFieldsModule) {\n            var fieldsData = this.pdfViewer.formFieldsModule.downloadFormFieldsData();\n            // eslint-disable-next-line\n            jsonObject['fieldsData'] = fieldsData;\n        }\n        return jsonObject;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.constructJsonDownload = function () {\n        // eslint-disable-next-line\n        var jsonObject = { hashId: this.hashId };\n        if (this.jsonDocumentId) {\n            jsonObject.documentId = this.jsonDocumentId;\n        }\n        jsonObject.uniqueId = this.documentId;\n        this.importPageList = [];\n        if (this.pdfViewer.annotationModule) {\n            this.saveImportedAnnotations();\n        }\n        if (this.isTextMarkupAnnotationModule()) {\n            this.isJsonExported = false;\n            // eslint-disable-next-line max-len\n            var textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n            // eslint-disable-next-line\n            jsonObject['textMarkupAnnotations'] = textMarkupAnnotationCollection;\n        }\n        if (this.isShapeAnnotationModule()) {\n            this.isJsonExported = false;\n            // eslint-disable-next-line max-len\n            var shapeAnnotations = this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();\n            // eslint-disable-next-line\n            jsonObject['shapeAnnotations'] = shapeAnnotations;\n        }\n        if (this.isCalibrateAnnotationModule()) {\n            this.isJsonExported = false;\n            // eslint-disable-next-line max-len\n            var calibrateAnnotations = this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();\n            // eslint-disable-next-line\n            jsonObject['measureShapeAnnotations'] = calibrateAnnotations;\n        }\n        if (this.isStampAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            var stampAnnotationCollection = this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();\n            // eslint-disable-next-line\n            jsonObject['stampAnnotations'] = stampAnnotationCollection;\n        }\n        if (this.isCommentAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            var stickyAnnotationCollection = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();\n            // eslint-disable-next-line\n            jsonObject['stickyNotesAnnotation'] = stickyAnnotationCollection;\n        }\n        if (this.isImportAction) {\n            var importList = JSON.stringify(this.importPageList);\n            // eslint-disable-next-line\n            jsonObject['importPageList'] = importList;\n        }\n        if (this.pdfViewer.formDesignerModule) {\n            var fieldsData = this.pdfViewer.formDesignerModule.downloadFormDesigner();\n            // eslint-disable-next-line\n            jsonObject['formDesigner'] = fieldsData;\n        }\n        else if (this.pdfViewer.formFieldsModule) {\n            var fieldsData = this.pdfViewer.formFieldsModule.downloadFormFieldsData();\n            // eslint-disable-next-line\n            jsonObject['fieldsData'] = fieldsData;\n        }\n        var signatureData = this.signatureModule.saveSignature();\n        // eslint-disable-next-line\n        jsonObject['signatureData'] = signatureData;\n        if (this.pdfViewer.isSignatureEditable) {\n            // eslint-disable-next-line\n            jsonObject['isSignatureEdited'] = this.pdfViewer.isSignatureEditable;\n        }\n        if (this.isFreeTextAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            var freeTextAnnotationCollection = this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();\n            // eslint-disable-next-line\n            jsonObject['freeTextAnnotation'] = freeTextAnnotationCollection;\n        }\n        if (this.isInkAnnotationModule()) {\n            var inkSignatureData = this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();\n            // eslint-disable-next-line\n            jsonObject['inkSignatureData'] = inkSignatureData;\n        }\n        // eslint-disable-next-line\n        jsonObject['action'] = 'Download';\n        // eslint-disable-next-line\n        jsonObject['elementId'] = this.pdfViewer.element.id;\n        return jsonObject;\n    };\n    /**\n     * @private\n     * @param {string} annotationID - The annotationID.\n     * @returns {any} - Returns collection of type.\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkFormFieldCollection = function (annotationID) {\n        var isFormFieldAnnotation = false;\n        // eslint-disable-next-line\n        var formDesignerData = null;\n        formDesignerData = this.getItemFromSessionStorage('_formDesigner');\n        if (formDesignerData) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(formDesignerData);\n            for (var i = 0; i < formFieldsData.length; i++) {\n                if (formFieldsData[i].FormField.formFieldAnnotationType === 'RadioButton') {\n                    for (var j = 0; j < formFieldsData[i].FormField.radiobuttonItem.length; j++) {\n                        if (annotationID === formFieldsData[i].FormField.radiobuttonItem[j].id.split('_')[0]) {\n                            isFormFieldAnnotation = true;\n                            break;\n                        }\n                    }\n                }\n                else if (formFieldsData[i].Key.split('_')[0] === annotationID) {\n                    isFormFieldAnnotation = true;\n                    break;\n                }\n            }\n        }\n        return isFormFieldAnnotation;\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns whether freetext module is enabled.\n     */\n    PdfViewerBase.prototype.isFreeTextAnnotationModule = function () {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.freeTextAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var proxy = null;\n        proxy = this;\n        proxy.pdfViewer.fireDownloadStart(proxy.downloadFileName);\n        // eslint-disable-next-line\n        var jsonObject = this.constructJsonDownload();\n        this.dowonloadRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.dowonloadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.download;\n        this.dowonloadRequestHandler.responseType = 'text';\n        if (this.validateForm && this.pdfViewer.enableFormFieldsValidation) {\n            this.pdfViewer.fireValidatedFailed(proxy.pdfViewer.serverActionSettings.download);\n            this.validateForm = false;\n        }\n        else {\n            this.dowonloadRequestHandler.send(jsonObject);\n        }\n        // eslint-disable-next-line\n        this.dowonloadRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            if (data) {\n                if (typeof data !== 'object' && data.indexOf('data:application/pdf') === -1) {\n                    proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.download);\n                    data = null;\n                }\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    if (proxy.pdfViewer.downloadFileName && (proxy.pdfViewer.downloadFileName !== proxy.downloadFileName)) {\n                        proxy.downloadFileName = proxy.pdfViewer.downloadFileName;\n                    }\n                    proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download, data);\n                    var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    if (Browser.isIE || Browser.info.name === 'edge') {\n                        window.navigator.msSaveOrOpenBlob(blobUrl, proxy.downloadFileName);\n                    }\n                    else {\n                        proxy.downloadDocument(blobUrl);\n                    }\n                    proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName, data);\n                }\n                proxy.updateDocumentAnnotationCollections();\n            }\n            else {\n                proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName, 'PDF Document saved in server side successfully');\n            }\n        };\n        // eslint-disable-next-line\n        this.dowonloadRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n        };\n        // eslint-disable-next-line\n        this.dowonloadRequestHandler.onError = function (result) {\n            proxy.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.download);\n        };\n    };\n    /**\n     * @param pageWidth\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.getTileCount = function (pageWidth) {\n        if (pageWidth && typeof pageWidth === 'number') {\n            var defaultWidth = 816;\n            var tileCount = 1;\n            if (this.getZoomFactor() > 2 && pageWidth <= 1200) {\n                tileCount = 2;\n            }\n            else {\n                tileCount = pageWidth / defaultWidth;\n            }\n            // eslint-disable-next-line radix\n            var tileValue = parseInt(tileCount.toFixed());\n            if (tileValue <= 0) {\n                return 1;\n            }\n            else {\n                if (this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                    return tileValue;\n                }\n                else {\n                    return 1;\n                }\n            }\n        }\n        else {\n            return 1;\n        }\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var proxy = null;\n        proxy = this;\n        var canvas = proxy.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = proxy.getElement('_oldCanvas_' + pageIndex);\n        if (this.pageSize && this.pageSize[pageIndex]) {\n            var pageWidth_1 = this.pageSize[pageIndex].width;\n            var pageHeight = this.pageSize[pageIndex].height;\n            var tilecanvas = this.getElement('_pageCanvas_' + pageIndex);\n            // eslint-disable-next-line\n            var viewPortWidth_1 = 1200; // On diving the value greater than 1200 we will get the tile count as 2.\n            // eslint-disable-next-line\n            var viewPortHeight = proxy.pdfViewer.element.clientHeight > 0 ? proxy.pdfViewer.element.clientHeight : proxy.pdfViewer.element.style.height;\n            // eslint-disable-next-line radix\n            viewPortWidth_1 = parseInt(viewPortWidth_1);\n            // eslint-disable-next-line radix\n            viewPortHeight = parseInt(viewPortHeight) ? parseInt(viewPortHeight) : 500; //we have applied minimum-height as 500.\n            var noTileX = void 0;\n            var noTileY = void 0;\n            var tileCount = this.getTileCount(pageWidth_1);\n            if (canvas) {\n                if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                    if (proxy.isInitialLoaded) {\n                        proxy.showPageLoadingIndicator(pageIndex, false);\n                    }\n                }\n                // eslint-disable-next-line\n                var data = proxy.getStoredData(pageIndex);\n                noTileX = noTileY = tileCount;\n                var tileSettings = proxy.pdfViewer.tileRenderingSettings;\n                if (tileSettings.enableTileRendering && tileSettings.x > 0 && tileSettings.y > 0) {\n                    if ((viewPortWidth_1 < pageWidth_1 || this.getZoomFactor() > 2)) {\n                        noTileX = tileSettings.x;\n                        noTileY = tileSettings.y;\n                    }\n                }\n                proxy.tileRequestCount = noTileX * noTileY;\n                var zoomFactor = this.retrieveCurrentZoomFactor();\n                var isPageRequestSent = void 0;\n                if (tileCount === 1) {\n                    data = proxy.getStoredData(pageIndex);\n                    isPageRequestSent = proxy.pageRequestSent(pageIndex, 0, 0);\n                }\n                else {\n                    // eslint-disable-next-line\n                    var tileData = JSON.parse(proxy.getWindowSessionStorageTile(pageIndex, 0, 0, zoomFactor));\n                    if (tileData) {\n                        data = tileData;\n                    }\n                }\n                if (data && data.uniqueId === proxy.documentId) {\n                    canvas.style.backgroundColor = '#fff';\n                    if ((proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed) || !this.pageSize[pageIndex]) {\n                        return;\n                    }\n                    var zoomFactor_2 = this.retrieveCurrentZoomFactor();\n                    if (zoomFactor_2 > 2 && pageWidth_1 <= 1200) {\n                        viewPortWidth_1 = 700;\n                    }\n                    else {\n                        viewPortWidth_1 = 1200;\n                    }\n                    if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                        viewPortWidth_1 = 1200;\n                    }\n                    if ((viewPortWidth_1 >= pageWidth_1) || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                        proxy.renderPage(data, pageIndex);\n                    }\n                    else {\n                        proxy.isTileImageRendered = true;\n                        proxy.tileRenderCount = 0;\n                        proxy.tileRenderPage(data, pageIndex);\n                        for (var k = 0; k < noTileX; k++) {\n                            for (var l = 0; l < noTileY; l++) {\n                                if (k === 0 && l === 0) {\n                                    continue;\n                                }\n                                data = JSON.parse(this.getWindowSessionStorageTile(pageIndex, k, l, zoomFactor_2));\n                                if (data) {\n                                    proxy.tileRenderPage(data, pageIndex);\n                                }\n                            }\n                        }\n                    }\n                    data = null;\n                }\n                else if (data === null || !isPageRequestSent) {\n                    if (this.getPagesPinchZoomed()) {\n                        proxy.showPageLoadingIndicator(pageIndex, false);\n                    }\n                    else {\n                        proxy.showPageLoadingIndicator(pageIndex, true);\n                    }\n                    if (proxy.getPagesZoomed()) {\n                        if (proxy.isInitialLoaded) {\n                            proxy.showPageLoadingIndicator(pageIndex, false);\n                        }\n                    }\n                    if (proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed) {\n                        return;\n                    }\n                    if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                        noTileX = 1;\n                        noTileY = 1;\n                    }\n                    proxy.tileRenderCount = 0;\n                    proxy.isTileImageRendered = true;\n                    for (var x = 0; x < noTileX; x++) {\n                        for (var y = 0; y < noTileY; y++) {\n                            var jsonObject = null;\n                            var zoomFactor_3 = this.retrieveCurrentZoomFactor();\n                            if (zoomFactor_3 > 2 && pageWidth_1 <= 1200) {\n                                viewPortWidth_1 = 700;\n                            }\n                            else {\n                                viewPortWidth_1 = 1200;\n                            }\n                            if (!proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                                viewPortWidth_1 = 1200;\n                            }\n                            // eslint-disable-next-line max-len\n                            jsonObject = {\n                                xCoordinate: (x).toString(), yCoordinate: (y).toString(), viewPortWidth: (viewPortWidth_1).toString(), viewPortHeight: (viewPortHeight).toString(),\n                                pageNumber: (pageIndex).toString(), hashId: proxy.hashId, tilecount: (tileCount).toString(), tileXCount: (noTileX).toString(), tileYCount: (noTileY).toString(),\n                                // eslint-disable-next-line max-len\n                                zoomFactor: (zoomFactor_3).toString(), action: 'RenderPdfPages', uniqueId: this.documentId, elementId: proxy.pdfViewer.element.id\n                            };\n                            if (this.jsonDocumentId) {\n                                // eslint-disable-next-line\n                                jsonObject.documentId = this.jsonDocumentId;\n                            }\n                            proxy.pageRequestHandler = new AjaxHandler(this.pdfViewer);\n                            // eslint-disable-next-line max-len\n                            proxy.pageRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderPages;\n                            proxy.pageRequestHandler.responseType = 'json';\n                            proxy.pageRequestHandler.send(jsonObject);\n                            proxy.requestLists.push(proxy.documentId + '_' + pageIndex + '_' + x + '_' + y + '_' + zoomFactor_3);\n                            // eslint-disable-next-line\n                            proxy.pageRequestHandler.onSuccess = function (result) {\n                                // eslint-disable-next-line max-len\n                                if ((proxy.pdfViewer.magnification && proxy.pdfViewer.magnification.isPinchZoomed) || !proxy.pageSize[pageIndex]) {\n                                    return;\n                                }\n                                // eslint-disable-next-line\n                                var data = result.data;\n                                if (data) {\n                                    if (typeof data !== 'object') {\n                                        try {\n                                            data = JSON.parse(data);\n                                        }\n                                        catch (error) {\n                                            proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderPages);\n                                            data = null;\n                                        }\n                                    }\n                                }\n                                if (data) {\n                                    while (typeof data !== 'object') {\n                                        data = JSON.parse(data);\n                                    }\n                                    if (data.image && data.uniqueId === proxy.documentId) {\n                                        var currentPageWidth = (data.pageWidth && data.pageWidth > 0) ? data.pageWidth : pageWidth_1;\n                                        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages, data);\n                                        var pageNumber = (data.pageNumber !== undefined) ? data.pageNumber : pageIndex;\n                                        if ((viewPortWidth_1 >= currentPageWidth) || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                                            proxy.storeWinData(data, pageNumber);\n                                        }\n                                        else {\n                                            proxy.storeWinData(data, pageNumber, data.tileX, data.tileY);\n                                        }\n                                        if ((viewPortWidth_1 >= currentPageWidth) || !proxy.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                                            proxy.renderPage(data, pageNumber);\n                                        }\n                                        else {\n                                            proxy.tileRenderPage(data, pageNumber);\n                                        }\n                                    }\n                                }\n                            };\n                            // eslint-disable-next-line\n                            this.pageRequestHandler.onFailure = function (result) {\n                                // eslint-disable-next-line max-len\n                                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderPages);\n                            };\n                            // eslint-disable-next-line\n                            this.pageRequestHandler.onError = function (result) {\n                                proxy.openNotificationPopup();\n                                // eslint-disable-next-line max-len\n                                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderPages);\n                            };\n                        }\n                    }\n                }\n                proxy.renderedPagesList.push(pageIndex);\n            }\n        }\n    };\n    PdfViewerBase.prototype.pageRequestSent = function (pageIndex, tileX, tileY) {\n        var zoomFactor = this.retrieveCurrentZoomFactor();\n        var currentString = this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor;\n        if (this.requestLists && this.requestLists.indexOf(currentString) > -1) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * @private\n     * @param {string} status - The status message.\n     * @param {string} errorMessage - The error message.\n     * @param {string} action - The action.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.onControlError = function (status, errorMessage, action) {\n        this.openNotificationPopup();\n        this.pdfViewer.fireAjaxRequestFailed(status, errorMessage, action);\n    };\n    /**\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex, isTextSearch) {\n        var zoomFactor = this.retrieveCurrentZoomFactor();\n        if (this.pdfViewer.restrictZoomRequest && !this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n            zoomFactor = 1;\n        }\n        // eslint-disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex, zoomFactor) ? this.getWindowSessionStorage(pageIndex, zoomFactor) : this.getPinchZoomPage(pageIndex);\n        if (!storedData && isTextSearch) {\n            // eslint-disable-next-line\n            var storedTileData = this.getWindowSessionStorageTile(pageIndex, 0, 0, zoomFactor);\n            if (storedTileData) {\n                storedData = storedTileData;\n            }\n        }\n        // eslint-disable-next-line\n        var data = null;\n        if (storedData) {\n            // eslint-disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     * @param  {any} data - The data.\n     * @param {number} pageIndex - The pageIndex.\n     * @param {number} tileX - The tileX.\n     * @param {number} tileY - The tileY.\n     * @returns {void}\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex, tileX, tileY) {\n        // eslint-disable-next-line\n        var blobObj = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        // eslint-disable-next-line\n        var Url = URL || webkitURL;\n        var blobUrl = Url.createObjectURL(blobObj);\n        // eslint-disable-next-line\n        var storeObject;\n        if ((isNaN(tileX) && isNaN(tileY)) || (tileX === 0 && tileY === 0)) {\n            storeObject = {\n                // eslint-disable-next-line\n                image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n                // eslint-disable-next-line\n                textContent: data['textContent'], width: data['width'], textBounds: data['textBounds'], pageText: data['pageText'], rotation: data['rotation'], scaleFactor: data['scaleFactor'], uniqueId: data['uniqueId'], zoomFactor: data['zoomFactor'], tileX: tileX, tileY: tileY\n            };\n            if (this.pageSize[pageIndex]) {\n                // eslint-disable-next-line\n                this.pageSize[pageIndex].rotation = parseFloat(data['rotation']);\n            }\n            // eslint-disable-next-line\n            this.textLayer.characterBound[pageIndex] = data['characterBounds'];\n        }\n        else {\n            storeObject = {\n                // eslint-disable-next-line\n                image: blobUrl, transformationMatrix: data['transformationMatrix'], tileX: tileX, tileY: tileY, width: data['width'], zoomFactor: data['zoomFactor']\n            };\n        }\n        // eslint-disable-next-line\n        var viewPortWidth = 816;\n        var pageWidth = 0;\n        if (this.pageSize[pageIndex]) {\n            pageWidth = this.pageSize[pageIndex].width;\n        }\n        this.manageSessionStorage(pageIndex, storeObject, tileX, tileY);\n    };\n    /**\n     * @private\n     * @param {XMLHttpRequest} request - The Xml request.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.setCustomAjaxHeaders = function (request) {\n        for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n            // eslint-disable-next-line max-len\n            request.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);\n        }\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - Page index.\n     * @returns {object}\n     */\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // eslint-disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            // eslint-disable-next-line\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - current page index.\n     * @param {number} zoomFactor - cuurent zoom factor\n     * @returns {string}\n     */\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex, zoomFactor) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + zoomFactor);\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - current page index.\n     * @param {number} tileX - cuurent tile x\n     * @param {number} tileY - cuurent tile y\n     * @param {number} zoomFactor - cuurent zoom factor\n     * @returns {string}\n     */\n    PdfViewerBase.prototype.getWindowSessionStorageTile = function (pageIndex, tileX, tileY, zoomFactor) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor);\n    };\n    /**\n     * @private\n     * @returns {number}\n     */\n    PdfViewerBase.prototype.retrieveCurrentZoomFactor = function () {\n        var zoomFactor = this.getZoomFactor();\n        if (this.pdfViewer.enableZoomOptimization) {\n            if ((zoomFactor) <= 1) {\n                zoomFactor = 1;\n            }\n            else if ((zoomFactor) > 1 && zoomFactor <= 2) {\n                zoomFactor = 2;\n            }\n            else if ((zoomFactor) > 2 && zoomFactor <= 3) {\n                zoomFactor = 3;\n            }\n            else if ((zoomFactor) > 3 && zoomFactor <= 4) {\n                zoomFactor = 4;\n            }\n            return zoomFactor;\n        }\n        else {\n            if (zoomFactor <= 0) {\n                zoomFactor = 1;\n            }\n            return zoomFactor;\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject, tileX, tileY) {\n        // eslint-disable-next-line\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        var maxSessionSize = 5000;\n        if (sessionSize >= maxSessionSize) {\n            if (!this.isStorageExceed) {\n                // eslint-disable-next-line\n                var annotationList = [];\n                for (var i = 0; i < window.sessionStorage.length; i++) {\n                    if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n                        if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n                            // eslint-disable-next-line max-len\n                            this.annotationStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n                            annotationList.push(window.sessionStorage.key(i));\n                        }\n                    }\n                }\n                if (annotationList) {\n                    for (var i = 0; i < annotationList.length; i++) {\n                        window.sessionStorage.removeItem(annotationList[i]);\n                    }\n                }\n            }\n            this.isStorageExceed = true;\n            sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n            if (sessionSize >= 5000) {\n                var storageLength = window.sessionStorage.length;\n                if (storageLength > 200) {\n                    storageLength = 200;\n                }\n                for (var i = 0; i < storageLength; i++) {\n                    if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n                        if (window.sessionStorage.key(i).split('_')[3] !== 'annotations') {\n                            window.sessionStorage.removeItem(window.sessionStorage.key(i));\n                        }\n                    }\n                }\n            }\n        }\n        var zoomFactor = this.retrieveCurrentZoomFactor();\n        if (isNaN(tileX) && isNaN(tileY)) {\n            // eslint-disable-next-line max-len\n            window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + zoomFactor, JSON.stringify(storeObject));\n            this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + zoomFactor);\n        }\n        else {\n            this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor);\n            // eslint-disable-next-line max-len\n            window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + tileX + '_' + tileY + '_' + zoomFactor, JSON.stringify(storeObject));\n        }\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // eslint-disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // eslint-disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // eslint-disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        // eslint-disable-next-line\n        var blob = new Blob(byteArrays, { type: contentType });\n        return blob;\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // eslint-disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // eslint-disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // eslint-disable-next-line max-len\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    /**\n     * @private\n     * @param {MouseEvent} event - The mouse event.\n     * @param {boolean} isNeedToSet - Is need to test.\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event, isNeedToSet) {\n        var isScrollBar = false;\n        if (isNeedToSet) {\n            this.setScrollDownValue(event.type, false);\n        }\n        // eslint-disable-next-line max-len\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            if (isNeedToSet) {\n                this.setScrollDownValue(event.type, true);\n            }\n        }\n        // eslint-disable-next-line max-len\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            if (isNeedToSet) {\n                this.setScrollDownValue(event.type, true);\n            }\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () {\n            return false;\n        });\n    };\n    /**\n     * @private\n     * @param {string} idString - The Id string.\n     * @returns {HTMLElement} - The html element.\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - The pageIndex\n     * @returns {number} - Returns number\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        if (this.pageSize[pageIndex]) {\n            return this.pageSize[pageIndex].width * this.getZoomFactor();\n        }\n        else {\n            return 0;\n        }\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - The pageIndex\n     * @returns {number} - Returns number\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        if (this.pageSize[pageIndex]) {\n            return this.pageSize[pageIndex].height * this.getZoomFactor();\n        }\n        else {\n            return 0;\n        }\n    };\n    /**\n     * @private\n     * @param {number} pageIndex - The pageIndex.\n     * @returns {number} - Returns number\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        if (this.pageSize[pageIndex]) {\n            return this.pageSize[pageIndex].top * this.getZoomFactor();\n        }\n        else {\n            return 0;\n        }\n    };\n    PdfViewerBase.prototype.isAnnotationToolbarHidden = function () {\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;\n        }\n        else {\n            return true;\n        }\n    };\n    PdfViewerBase.prototype.isFormDesignerToolbarHidded = function () {\n        var formDesignerToolbar = this.pdfViewer.toolbarModule.formDesignerToolbarModule;\n        if (formDesignerToolbar) {\n            return formDesignerToolbar.isToolbarHidden;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.getTextMarkupAnnotationMode = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;\n        }\n        else {\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.isNewFreeTextAnnotation = function () {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule) {\n            if (!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return true;\n        }\n    };\n    PdfViewerBase.prototype.getCurrentTextMarkupAnnotation = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {number} - Returns page number.\n     */\n    PdfViewerBase.prototype.getSelectTextMarkupCurrentPage = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.getAnnotationToolStatus = function () {\n        if (this.pdfViewer.toolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.getPopupNoteVisibleStatus = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.isPopupNoteVisible;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {TextMarkupAnnotation} - TextMarkupAnnotation.\n     */\n    PdfViewerBase.prototype.isTextMarkupAnnotationModule = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.isShapeAnnotationModule = function () {\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.shapeAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isFormDesignerModule = function () {\n        if (this.pdfViewer.formDesignerModule) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isCalibrateAnnotationModule = function () {\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.measureAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isStampAnnotationModule = function () {\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.stampAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isInkAnnotationModule = function () {\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.inkAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isCommentAnnotationModule = function () {\n        if (this.pdfViewer.annotation) {\n            if (this.pdfViewer.annotation && this.pdfViewer.annotation.stickyNotesAnnotationModule) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Retunrs true or false.\n     */\n    PdfViewerBase.prototype.isShapeBasedAnnotationsEnabled = function () {\n        // eslint-disable-next-line max-len\n        if (this.isShapeAnnotationModule() || this.isCalibrateAnnotationModule() || this.isStampAnnotationModule() || this.isCommentAnnotationModule() || this.isFormDesignerModule()) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     * @param {MouseEvent | PointerEvent | TouchEvent} e - Returns event.\n     * @returns {PointModel} - Returns points.\n     */\n    PdfViewerBase.prototype.getMousePosition = function (e) {\n        var touchArg;\n        var offsetX;\n        var offsetY;\n        var currentTarget = e.target.parentElement;\n        if (e.type.indexOf('touch') !== -1) {\n            touchArg = e;\n            if (this.pdfViewer.annotation) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pdfViewer.annotation.getEventPageNumber(e));\n                if (pageDiv) {\n                    var pageCurrentRect = pageDiv.getBoundingClientRect();\n                    offsetX = touchArg.changedTouches[0].clientX - pageCurrentRect.left;\n                    offsetY = touchArg.changedTouches[0].clientY - pageCurrentRect.top;\n                }\n            }\n        }\n        else {\n            if (e.target.classList.contains('e-pv-hyperlink')) {\n                offsetX = e.offsetX + e.target.offsetLeft;\n                offsetY = e.offsetY + e.target.offsetTop;\n            }\n            else if (e.target.classList.contains('e-pv-text') && currentTarget) {\n                var targetParentRect = currentTarget.getBoundingClientRect();\n                offsetX = e.clientX - targetParentRect.left;\n                offsetY = e.clientY - targetParentRect.top;\n                // eslint-disable-next-line\n            }\n            else if (e.target && (e && e.path) && currentTarget && (currentTarget.classList.contains('foreign-object') || currentTarget.parentElement.classList.contains('foreign-object'))) {\n                // eslint-disable-next-line\n                var targetParentRect = void 0;\n                if (e.path[4].className === 'e-pv-page-div') {\n                    targetParentRect = e.path[4].getBoundingClientRect();\n                }\n                else {\n                    for (var i = 0; i < e.path.length; i++) {\n                        if (e.path[i].className === 'e-pv-page-div') {\n                            targetParentRect = e.path[i].getBoundingClientRect();\n                            break;\n                        }\n                    }\n                }\n                offsetX = e.clientX - targetParentRect.left;\n                offsetY = e.clientY - targetParentRect.top;\n                // eslint-disable-next-line\n            }\n            else if (e.target && currentTarget && currentTarget.classList.contains('foreign-object')) {\n                // eslint-disable-next-line\n                var targetParentRect = e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n                offsetX = e.clientX - targetParentRect.left;\n                offsetY = e.clientY - targetParentRect.top;\n                // eslint-disable-next-line\n            }\n            else {\n                offsetX = e.offsetX;\n                offsetY = e.offsetY;\n            }\n        }\n        return { x: offsetX, y: offsetY };\n    };\n    PdfViewerBase.prototype.getMouseEventArgs = function (position, args, evt, source) {\n        args.position = position;\n        var obj;\n        var objects;\n        if (!source) {\n            if (this.action === 'Drag' || this.action === 'ConnectorSourceEnd' || this.action === 'SegmentEnd' ||\n                this.action === 'OrthoThumb' || this.action === 'BezierSourceThumb' || this.action === 'BezierTargetThumb' ||\n                this.action === 'ConnectorTargetEnd' || this.action.indexOf('Rotate') !== -1 || this.action.indexOf('Resize') !== -1) {\n                obj = this.pdfViewer.selectedItems;\n                if (this.action === 'Drag' && obj && this.pdfViewer.selectedItems.annotations.length > 0) {\n                    obj = findActiveElement(evt, this, this.pdfViewer);\n                }\n                else if (this.action === 'Drag' && obj && this.pdfViewer.selectedItems.formFields.length > 0) {\n                    obj = findActiveElement(evt, this, this.pdfViewer);\n                }\n            }\n            else {\n                obj = findActiveElement(evt, this, this.pdfViewer);\n            }\n        }\n        else {\n            //   objects = this.diagram.findObjectsUnderMouse(this.currentPosition, source);\n            obj = findActiveElement(evt, this, this.pdfViewer);\n        }\n        var wrapper;\n        if (obj) {\n            wrapper = obj.wrapper;\n        }\n        if (!source) {\n            args.source = obj;\n            args.sourceWrapper = wrapper;\n        }\n        else {\n            args.target = obj;\n            args.targetWrapper = wrapper;\n        }\n        args.actualObject = this.eventArgs.actualObject;\n        //args.startTouches = this.touchStartList;\n        //args.moveTouches = this.touchMoveList;\n        return args;\n    };\n    /**\n     * @private\n     * @param {PdfAnnotationBaseModel} obj - The object.\n     * @param {PointModel} position - The position.\n     * @returns {Actions | string} - Returns the string.\n     */\n    PdfViewerBase.prototype.findToolToActivate = function (obj, position) {\n        position = { x: position.x / this.getZoomFactor(), y: position.y / this.getZoomFactor() };\n        var element = this.pdfViewer.selectedItems.wrapper;\n        if (element && obj) {\n            var selectorBnds = element.bounds; //let handle: SelectorModel = diagram.selectedItems;\n            var paddedBounds = new Rect(selectorBnds.x, selectorBnds.y, selectorBnds.width, selectorBnds.height);\n            if (obj.shapeAnnotationType === 'Line' || obj.shapeAnnotationType === 'LineWidthArrowHead' ||\n                obj.shapeAnnotationType === 'Distance' || obj.shapeAnnotationType === 'Polygon') {\n                var conn = this.pdfViewer.selectedItems.annotations[0];\n                if (conn) {\n                    for (var i = 0; i < conn.vertexPoints.length; i++) {\n                        if (contains(position, conn.vertexPoints[i], 10) && conn.leaderHeight !== 0) {\n                            return 'ConnectorSegmentPoint_' + i;\n                        }\n                    }\n                }\n            }\n            if (obj.shapeAnnotationType === 'Distance') {\n                var leaderCount = 0;\n                var newPoint1 = void 0;\n                if (obj && obj.wrapper) {\n                    for (var i = 0; i < obj.wrapper.children.length; i++) {\n                        var elementAngle = Point.findAngle(obj.sourcePoint, obj.targetPoint);\n                        // eslint-disable-next-line\n                        var segment = obj.wrapper.children[i];\n                        if (segment.id.indexOf('leader') > -1) {\n                            var centerPoint = obj.wrapper.children[0].bounds.center;\n                            if (leaderCount === 0) {\n                                newPoint1 = { x: obj.sourcePoint.x, y: obj.sourcePoint.y - obj.leaderHeight };\n                                centerPoint = obj.sourcePoint;\n                            }\n                            else {\n                                newPoint1 = { x: obj.targetPoint.x, y: obj.targetPoint.y - obj.leaderHeight };\n                                centerPoint = obj.targetPoint;\n                            }\n                            var matrix_1 = identityMatrix();\n                            rotateMatrix(matrix_1, elementAngle, centerPoint.x, centerPoint.y);\n                            var rotatedPoint = transformPointByMatrix(matrix_1, { x: newPoint1.x, y: newPoint1.y });\n                            if (contains(position, rotatedPoint, 10)) {\n                                return 'Leader' + leaderCount;\n                            }\n                            leaderCount++;\n                        }\n                    }\n                }\n            }\n            var ten = 10 / this.getZoomFactor();\n            var matrix = identityMatrix();\n            rotateMatrix(matrix, obj.rotateAngle + element.parentTransform, element.offsetX, element.offsetY);\n            //check for resizing tool\n            var x = element.offsetX - element.pivot.x * element.actualSize.width;\n            var y = element.offsetY - element.pivot.y * element.actualSize.height;\n            var rotateThumb = {\n                x: x + ((element.pivot.x === 0.5 ? element.pivot.x * 2 : element.pivot.x) * element.actualSize.width / 2),\n                y: y - 30 / this.getZoomFactor()\n            };\n            rotateThumb = transformPointByMatrix(matrix, rotateThumb);\n            if (obj.shapeAnnotationType === 'Stamp' && contains(position, rotateThumb, ten)) {\n                return 'Rotate';\n            }\n            paddedBounds = this.inflate(ten, paddedBounds);\n            if (paddedBounds.containsPoint(position, 0)) {\n                var action = this.checkResizeHandles(this.pdfViewer, element, position, matrix, x, y);\n                if (action) {\n                    return action;\n                }\n            }\n            if (this.pdfViewer.selectedItems.annotations.indexOf(obj) > -1) {\n                return 'Drag';\n            }\n            else if (this.pdfViewer.selectedItems.formFields.indexOf(obj) > -1 && this.pdfViewer.designerMode) {\n                return 'Drag';\n            }\n            return 'Select';\n        }\n        return this.pdfViewer.tool || 'Select';\n    };\n    PdfViewerBase.prototype.inflate = function (padding, bound) {\n        bound.x -= padding;\n        bound.y -= padding;\n        bound.width += padding * 2;\n        bound.height += padding * 2;\n        return bound;\n    };\n    PdfViewerBase.prototype.checkResizeHandles = function (diagram, element, position, matrix, x, y) {\n        var action;\n        if (!action) {\n            action = this.checkForResizeHandles(diagram, element, position, matrix, x, y);\n        }\n        if (action) {\n            return action;\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.checkForResizeHandles = function (diagram, element, position, matrix, x, y) {\n        var forty = 40 / 1;\n        var ten = 10 / 1;\n        if (element.actualSize.width < 40 || element.actualSize.height < 40) {\n            ten = 5 * this.getZoomFactor() / 1;\n        }\n        var selectedItems = diagram.selectedItems;\n        var isStamp = false;\n        var isSticky = false;\n        var isNodeShape = false;\n        var isInk = false;\n        var resizerLocation = this.pdfViewer.annotationSelectorSettings.resizerLocation;\n        if (resizerLocation < 1 || resizerLocation > 3) {\n            resizerLocation = 3;\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp'\n            || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature'\n            || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) {\n            isStamp = true;\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes') {\n            isSticky = true;\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n            isInk = true;\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ellipse' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Radius' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Rectangle')) {\n            isNodeShape = true;\n        }\n        if (!isSticky) {\n            // eslint-disable-next-line max-len\n            if ((isInk || isStamp || (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage')) || ((element.actualSize.width >= forty && element.actualSize.height >= forty) && isNodeShape && (resizerLocation === 1 || resizerLocation === 3)))) {\n                if (contains(position, transformPointByMatrix(matrix, { x: x + element.actualSize.width, y: y + element.actualSize.height }), ten)) {\n                    return 'ResizeSouthEast';\n                }\n                if (contains(position, transformPointByMatrix(matrix, { x: x, y: y + element.actualSize.height }), ten)) {\n                    return 'ResizeSouthWest';\n                }\n                if (contains(position, transformPointByMatrix(matrix, { x: x + element.actualSize.width, y: y }), ten)) {\n                    return 'ResizeNorthEast';\n                }\n                if (contains(position, transformPointByMatrix(matrix, { x: x, y: y }), ten)) {\n                    return 'ResizeNorthWest';\n                }\n            }\n            // eslint-disable-next-line max-len\n            if (isInk || !isNodeShape || (isNodeShape && (resizerLocation === 2 || resizerLocation === 3 || (!(element.actualSize.width >= forty && element.actualSize.height >= forty) && resizerLocation === 1)))) {\n                if (contains(\n                // eslint-disable-next-line max-len\n                position, transformPointByMatrix(matrix, { x: x + element.actualSize.width, y: y + element.actualSize.height / 2 }), ten) && !isStamp) {\n                    return 'ResizeEast';\n                }\n                // eslint-disable-next-line max-len\n                if (contains(position, transformPointByMatrix(matrix, { x: x, y: y + element.actualSize.height / 2 }), ten) && !isStamp) {\n                    return 'ResizeWest';\n                }\n                if (contains(\n                // eslint-disable-next-line max-len\n                position, transformPointByMatrix(matrix, { x: x + element.actualSize.width / 2, y: y + element.actualSize.height }), ten) && !isStamp) {\n                    return 'ResizeSouth';\n                }\n                // eslint-disable-next-line max-len\n                if (contains(position, transformPointByMatrix(matrix, { x: x + element.actualSize.width / 2, y: y }), ten) && !isStamp) {\n                    return 'ResizeNorth';\n                }\n            }\n        }\n        return null;\n    };\n    /**\n     * @private\n     * @param {string} fieldID - The fieldID\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.checkSignatureFormField = function (fieldID) {\n        var isFormFieldSign = false;\n        if (this.pdfViewer.formDesignerModule) {\n            fieldID = fieldID.split('_')[0];\n        }\n        // eslint-disable-next-line\n        var formField = this.pdfViewer.nameTable[fieldID];\n        if (formField) {\n            if (formField.formFieldAnnotationType === 'SignatureField' || formField.formFieldAnnotationType === 'InitialField' || formField.annotName === 'SignatureField') {\n                isFormFieldSign = true;\n            }\n        }\n        return isFormFieldSign;\n    };\n    /**\n     * @private\n     * @param {MouseEvent | TouchEvent} evt - The event.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.diagramMouseMove = function (evt) {\n        var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n        this.pdfViewer.enableServerDataBinding(false);\n        this.currentPosition = this.getMousePosition(evt);\n        this.pdfViewer.firePageMouseover(this.currentPosition.x, this.currentPosition.y);\n        if (this.pdfViewer.annotation) {\n            this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt);\n        }\n        else if (this.pdfViewer.formDesignerModule) {\n            this.activeElements.activePageID = this.pdfViewer.formDesignerModule.getEventPageNumber(evt);\n        }\n        var obj = findActiveElement(evt, this, this.pdfViewer);\n        if ((this.tool instanceof NodeDrawingTool) || (this.tool instanceof LineTool)) {\n            obj = this.pdfViewer.drawingObject;\n        }\n        var target;\n        var isFormFieldSign = this.pdfViewer.selectedItems.annotations.length > 0 ? this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id) : false;\n        if ((Point.equals(this.currentPosition, this.prevPosition) === false || this.inAction)) {\n            if (this.isMouseDown === false) {\n                this.eventArgs = {};\n                var sourceDrawingElement = null;\n                if (obj) {\n                    this.tool = this.getTool(this.action);\n                    if (obj.wrapper) {\n                        sourceDrawingElement = obj.wrapper.children[0];\n                        if (sourceDrawingElement) {\n                            target = obj;\n                        }\n                    }\n                }\n                var eventTarget = evt.target;\n                this.action = this.findToolToActivate(obj, this.currentPosition);\n                // eslint-disable-next-line\n                if (obj && obj.annotationSettings && obj.annotationSettings.isLock) {\n                    if (this.action === 'Select') {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Select', obj)) {\n                            this.action = '';\n                        }\n                    }\n                    if (this.action === 'Drag') {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Move', obj)) {\n                            this.action = 'Select';\n                        }\n                    }\n                    // eslint-disable-next-line max-len\n                    if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' ||\n                        // eslint-disable-next-line max-len\n                        this.action === 'ResizeNorth' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize', obj)) {\n                            this.action = 'Select';\n                        }\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (!this.pdfViewer.designerMode && ((!isNullOrUndefined(target) && (!isNullOrUndefined(target.formFieldAnnotationType))) || isFormFieldSign)) {\n                    if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' ||\n                        // eslint-disable-next-line max-len\n                        this.action === 'ResizeNorth' || this.action === 'Drag' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n                        this.action = '';\n                    }\n                }\n                this.tool = this.getTool(this.action);\n                this.setCursor(eventTarget, evt);\n                if (this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(eventTarget, evt, this);\n                }\n            }\n            else {\n                if (!this.tool && this.action && this.action === 'Rotate') {\n                    this.tool = this.getTool(this.action);\n                    if (evt.target) {\n                        this.setCursor(evt.target, evt);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (!this.pdfViewer.designerMode && ((!isNullOrUndefined(target) && (!isNullOrUndefined(target.formFieldAnnotationType))) || isFormFieldSign)) {\n                    if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' ||\n                        // eslint-disable-next-line max-len\n                        this.action === 'ResizeNorth' || this.action === 'Drag' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action === 'ResizeSouth' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n                        this.action = '';\n                        this.tool = null;\n                    }\n                }\n                if (this.eventArgs && this.eventArgs.source) {\n                    var eventTarget = evt.target;\n                    this.updateDefaultCursor(this.eventArgs.source, eventTarget, evt);\n                }\n                else {\n                    this.setCursor(evt.target, evt);\n                }\n                this.diagramMouseActionHelper(evt);\n                if (this.tool) {\n                    var currentObject = obj;\n                    if (currentObject && currentObject.shapeAnnotationType === 'FreeText') {\n                        if (this.pdfViewer.freeTextSettings.allowEditTextOnly && this.action !== \"Ink\" &&\n                            (this.eventArgs.source && this.eventArgs.source.shapeAnnotationType === \"FreeText\")) {\n                            var eventTarget = event.target;\n                            eventTarget.style.cursor = 'default';\n                            this.tool = null;\n                        }\n                    }\n                    if (this.tool != null) {\n                        var info = { ctrlKey: evt.ctrlKey, shiftKey: evt.shiftKey };\n                        this.eventArgs.info = info;\n                        this.tool.mouseMove(this.eventArgs);\n                    }\n                }\n            }\n            if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.formFieldAnnotationType && this.action !== 'Drag') {\n                if (!(this.tool instanceof ResizeTool)) {\n                    this.tool = this.getTool(this.action);\n                    if (this.tool instanceof NodeDrawingTool) {\n                        var obj_1 = this.pdfViewer.drawingObject;\n                        // eslint-disable-next-line\n                        var bounds = this.pdfViewer.formDesignerModule.updateFormFieldInitialSize(obj_1, obj_1.formFieldAnnotationType);\n                        var pageWidth = this.pageContainer.firstElementChild.clientWidth - bounds.width;\n                        var pageHeight = this.pageContainer.firstElementChild.clientHeight - bounds.height;\n                        if (this.pdfViewer.formDesignerModule && obj_1.formFieldAnnotationType\n                            && this.currentPosition.x < pageWidth && this.currentPosition.y < pageHeight) {\n                            // eslint-disable-next-line\n                            var formFieldElement = document.getElementById('FormField_helper_html_element');\n                            if (!formFieldElement) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.formDesignerModule.drawHelper(obj_1.formFieldAnnotationType, obj_1, evt);\n                            }\n                            else if (formFieldElement) {\n                                var previousActivePage = formFieldElement.parentElement.id.split(\"_text_\")[1] || formFieldElement.parentElement.id.split(\"_textLayer_\")[1] || formFieldElement.parentElement.id.split(\"_annotationCanvas_\")[1] || formFieldElement.parentElement.id.split(\"_pageDiv_\")[1];\n                                if (parseInt(previousActivePage) !== this.activeElements.activePageID) {\n                                    formFieldElement.remove(\"FormField_helper_html_element\");\n                                }\n                                else {\n                                    // eslint-disable-next-line\n                                    var point = this.getMousePosition(event);\n                                    if (obj_1.formFieldAnnotationType === 'Checkbox') {\n                                        formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility = 'visible';\n                                    }\n                                    else if (obj_1.formFieldAnnotationType === 'SignatureField' || obj_1.formFieldAnnotationType === 'InitialField') {\n                                        formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                                        formFieldElement.firstElementChild.lastElementChild.style.visibility = 'visible';\n                                    }\n                                    else {\n                                        formFieldElement.firstElementChild.firstElementChild.style.visibility = 'visible';\n                                    }\n                                    formFieldElement.setAttribute('style', 'height:' + bounds.height + 'px; width:' + bounds.width + 'px;left:' + point.x + 'px; top:' + point.y + 'px;' +\n                                        'position:absolute;opacity: 0.5;');\n                                }\n                            }\n                        }\n                        else if (this.currentPosition.x > pageWidth || this.currentPosition.y > pageHeight) {\n                            // eslint-disable-next-line\n                            var formFieldElement = document.getElementById('FormField_helper_html_element');\n                            if (!formFieldElement) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.formDesignerModule.drawHelper(obj_1.formFieldAnnotationType, obj_1, evt);\n                            }\n                            else if (formFieldElement) {\n                                // eslint-disable-next-line\n                                var point = this.getMousePosition(event);\n                                formFieldElement.setAttribute('style', 'height:' + bounds.height + 'px; width:' + bounds.width + 'px;left:' + point.x + 'px; top:' + point.y + 'px;' +\n                                    'position:absolute;opacity: 0.5;');\n                                if (obj_1.formFieldAnnotationType === 'Checkbox') {\n                                    formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility = 'hidden';\n                                }\n                                else if (obj_1.formFieldAnnotationType === 'SignatureField' || obj_1.formFieldAnnotationType === 'InitialField') {\n                                    formFieldElement.firstElementChild.firstElementChild.style.visibility = 'hidden';\n                                    formFieldElement.firstElementChild.lastElementChild.style.visibility = 'hidden';\n                                }\n                                else {\n                                    formFieldElement.firstElementChild.firstElementChild.style.visibility = 'hidden';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            this.prevPosition = this.currentPosition;\n        }\n        this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateDefaultCursor = function (source, target, event) {\n        // eslint-disable-next-line max-len\n        if (source && source.pageIndex !== undefined && source.pageIndex !== this.activeElements.activePageID && target) {\n            // eslint-disable-next-line\n            this.isPanMode ? target.style.cursor = 'grab' : target.style.cursor = 'default';\n        }\n        else {\n            this.setCursor(target, event);\n        }\n    };\n    /**\n     * @private\n     * @param {MouseEvent | TouchEvent} evt - The event.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.diagramMouseLeave = function (evt) {\n        this.currentPosition = this.getMousePosition(evt);\n        if (this.pdfViewer.annotation) {\n            this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt);\n        }\n        var shapeElement = findActiveElement(evt, this, this.pdfViewer);\n        var mouseMoveforce = false;\n        var target;\n        if (Point.equals(this.currentPosition, this.prevPosition) === false || this.inAction) {\n            if (this.isMouseDown === false || mouseMoveforce) {\n                this.eventArgs = {};\n                var sourceElement = null;\n                if (shapeElement) {\n                    sourceElement = shapeElement.wrapper.children[0];\n                    if (sourceElement) {\n                        target = shapeElement;\n                    }\n                    mouseMoveforce = false;\n                }\n            }\n            else {\n                this.diagramMouseActionHelper(evt);\n                // eslint-disable-next-line max-len\n                if (this.tool && this.action !== 'Drag' && this.pdfViewer.tool !== 'Stamp' && this.tool.currentElement && this.tool.currentElement.shapeAnnotationType !== 'Stamp') {\n                    this.tool.mouseLeave(this.eventArgs);\n                    this.tool = null;\n                    if (this.pdfViewer.annotation) {\n                        this.pdfViewer.annotationModule.renderAnnotations(this.previousPage, null, null, null);\n                    }\n                }\n            }\n            this.prevPosition = this.currentPosition;\n        }\n    };\n    PdfViewerBase.prototype.diagramMouseActionHelper = function (evt) {\n        this.eventArgs.position = this.currentPosition;\n        if (this.action === 'Drag' &&\n            this.eventArgs.source instanceof Selector) {\n            this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt);\n        }\n        this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt, this.eventArgs.source);\n        this.inAction = true;\n        this.initialEventArgs = null;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.setCursor = function (eventTarget, event) {\n        // eslint-disable-next-line max-len\n        var freeTextAnnotModule = this.pdfViewer.annotationModule ? this.pdfViewer.annotationModule.freeTextAnnotationModule : null;\n        var cursorType;\n        if (this.tool instanceof ResizeTool) {\n            if (this.tool.corner === 'ResizeNorthWest') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'nw-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeNorthEast') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'ne-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeSouthWest') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'sw-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeSouthEast') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'se-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeNorth') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'n-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeWest') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'w-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeEast') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'e-resize' : cursorType;\n            }\n            else if (this.tool.corner === 'ResizeSouth') {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 's-resize' : cursorType;\n            }\n        }\n        else if (this.isCommentIconAdded && this.isAddComment) {\n            eventTarget.style.cursor = 'crosshair';\n        }\n        else if (this.pdfViewer.enableHandwrittenSignature && this.isNewSignatureAdded && this.tool instanceof StampTool) {\n            eventTarget.style.cursor = 'crosshair';\n        }\n        else if (this.tool instanceof MoveTool) {\n            eventTarget.style.cursor = 'move';\n            // eslint-disable-next-line max-len\n        }\n        else if (this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool || this.tool instanceof PolygonDrawingTool || (freeTextAnnotModule && freeTextAnnotModule.isNewAddedAnnot) || this.tool instanceof InkDrawingTool) {\n            eventTarget.style.cursor = 'crosshair';\n        }\n        else if (this.tool instanceof ConnectTool) {\n            if (this.tool.endPoint && this.tool.endPoint.indexOf('Leader0')) {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'nw-resize' : cursorType;\n            }\n            else if (this.tool.endPoint && this.tool.endPoint.indexOf('Leader1')) {\n                cursorType = this.setResizerCursorType();\n                eventTarget.style.cursor = isNullOrUndefined(cursorType) ? 'ne-resize' : cursorType;\n            }\n            else if (this.tool.endPoint && this.tool.endPoint.indexOf('ConnectorSegmentPoint')) {\n                eventTarget.style.cursor = 'sw-resize';\n            }\n        }\n        else {\n            if (eventTarget.classList.contains('e-pv-text')) {\n                eventTarget.style.cursor = 'text';\n            }\n            else if (eventTarget.classList.contains('e-pv-hyperlink')) {\n                eventTarget.style.cursor = 'pointer';\n            }\n            else if (this.isPanMode) {\n                if (this.isViewerMouseDown && event.type === 'mousemove') {\n                    eventTarget.style.cursor = 'grabbing';\n                }\n                else {\n                    var obj = findActiveElement(event, this, this.pdfViewer);\n                    if (obj && event.type === 'mousemove') {\n                        eventTarget.style.cursor = 'pointer';\n                        // eslint-disable-next-line max-len\n                        var currentObject = obj;\n                        // eslint-disable-next-line\n                        var currentPosition = this.getMousePosition(event);\n                        // eslint-disable-next-line\n                        var relativePosition = this.relativePosition(event);\n                        // eslint-disable-next-line\n                        var viewerPositions = { left: relativePosition.x, top: relativePosition.y };\n                        // eslint-disable-next-line\n                        var mousePositions = { left: currentPosition.x, top: currentPosition.y };\n                        // eslint-disable-next-line\n                        var annotationSettings = { opacity: currentObject.opacity, fillColor: currentObject.fillColor, strokeColor: currentObject.strokeColor, thicknes: currentObject.thickness, author: currentObject.author, subject: currentObject.subject, modifiedDate: currentObject.modifiedDate };\n                        // eslint-disable-next-line max-len\n                        this.isMousedOver = true;\n                        var isFormField = this.checkSignatureFormField(currentObject.id);\n                        if (currentObject.formFieldAnnotationType) {\n                            this.isFormFieldMousedOver = true;\n                            var field_1 = {\n                                // eslint-disable-next-line\n                                value: currentObject.value, fontFamily: currentObject.fontFamily, fontSize: currentObject.fontSize, fontStyle: currentObject.fontStyle,\n                                // eslint-disable-next-line max-len\n                                color: currentObject.color, backgroundColor: currentObject.backgroundColor, borderColor: currentObject.borderColor,\n                                // eslint-disable-next-line\n                                thickness: currentObject.thickness, alignment: currentObject.alignment, isReadonly: currentObject.isReadonly, visibility: currentObject.visibility,\n                                // eslint-disable-next-line\n                                maxLength: currentObject.maxLength, isRequired: currentObject.isRequired, isPrint: currentObject.isPrint, rotation: currentObject.rotateAngle, tooltip: currentObject.tooltip, options: currentObject.options,\n                                // eslint-disable-next-line\n                                isChecked: currentObject.isChecked, isSelected: currentObject.isSelected\n                            };\n                            this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field_1, currentObject.pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n                        }\n                        else {\n                            if (!isFormField)\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.fireAnnotationMouseover(currentObject.annotName, currentObject.pageIndex, currentObject.shapeAnnotationType, currentObject.bounds, annotationSettings, mousePositions, viewerPositions);\n                        }\n                    }\n                    else {\n                        eventTarget.style.cursor = 'grab';\n                        if (this.isMousedOver) {\n                            var pageIndex = void 0;\n                            if (this.pdfViewer.formDesignerModule) {\n                                pageIndex = this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n                            }\n                            else {\n                                pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n                            }\n                            if (this.isFormFieldMousedOver) {\n                                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', null, pageIndex);\n                            }\n                            else {\n                                this.pdfViewer.fireAnnotationMouseLeave(pageIndex);\n                            }\n                            this.isMousedOver = false;\n                            this.isFormFieldMousedOver = false;\n                        }\n                    }\n                }\n            }\n            else {\n                var obj = findActiveElement(event, this, this.pdfViewer);\n                if (obj && this.pdfViewer.selectedItems.annotations.length === 0 && event.type === 'mousemove') {\n                    var currentObject = obj;\n                    // eslint-disable-next-line\n                    var annotationObject = this.pdfViewer.nameTable[currentObject.id];\n                    // eslint-disable-next-line max-len\n                    if (annotationObject.shapeAnnotationType !== 'HandWrittenSignature' && annotationObject.shapeAnnotationType !== 'Ink' && annotationObject.annotationSettings && annotationObject.annotationSettings.isLock !== undefined) {\n                        annotationObject.annotationSettings.isLock = JSON.parse(annotationObject.annotationSettings.isLock);\n                    }\n                    if (annotationObject.annotationSettings && annotationObject.annotationSettings.isLock) {\n                        eventTarget.style.cursor = 'default';\n                    }\n                    else {\n                        eventTarget.style.cursor = 'pointer';\n                    }\n                    // eslint-disable-next-line\n                    var currentPosition = this.getMousePosition(event);\n                    // eslint-disable-next-line\n                    var relativePosition = this.relativePosition(event);\n                    // eslint-disable-next-line\n                    var viewerPositions = { left: relativePosition.x, top: relativePosition.y };\n                    // eslint-disable-next-line\n                    var mousePositions = { left: currentPosition.x, top: currentPosition.y };\n                    // eslint-disable-next-line\n                    var annotationSettings = { opacity: currentObject.opacity, fillColor: currentObject.fillColor, strokeColor: currentObject.strokeColor, thicknes: currentObject.thickness, author: currentObject.author, subject: currentObject.subject, modifiedDate: currentObject.modifiedDate };\n                    // eslint-disable-next-line max-len\n                    this.isMousedOver = true;\n                    var isFormField = this.checkSignatureFormField(currentObject.id);\n                    if (currentObject.formFieldAnnotationType) {\n                        this.isFormFieldMousedOver = true;\n                        var field_2 = {\n                            // eslint-disable-next-line\n                            value: currentObject.value, fontFamily: currentObject.fontFamily, fontSize: currentObject.fontSize, fontStyle: currentObject.fontStyle,\n                            // eslint-disable-next-line max-len\n                            color: currentObject.color, backgroundColor: currentObject.backgroundColor, borderColor: currentObject.borderColor,\n                            // eslint-disable-next-line\n                            thickness: currentObject.thickness, alignment: currentObject.alignment, isReadonly: currentObject.isReadonly, visibility: currentObject.visibility,\n                            // eslint-disable-next-line\n                            maxLength: currentObject.maxLength, isRequired: currentObject.isRequired, isPrint: currentObject.isPrint, rotation: currentObject.rotateAngle, tooltip: currentObject.tooltip, options: currentObject.options,\n                            // eslint-disable-next-line\n                            isChecked: currentObject.isChecked, isSelected: currentObject.isSelected\n                        };\n                        this.fromTarget = currentObject;\n                        this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field_2, currentObject.pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n                    }\n                    else {\n                        if (!isFormField)\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.fireAnnotationMouseover(currentObject.annotName, currentObject.pageIndex, currentObject.shapeAnnotationType, currentObject.bounds, annotationSettings, mousePositions, viewerPositions);\n                    }\n                }\n                else if (!this.pdfViewer.formDesignerModule && event.target.classList.contains('e-pdfviewer-formFields')) {\n                    var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n                    var currentPosition = this.getMousePosition(event);\n                    var relativePosition = this.relativePosition(event);\n                    var viewerPositions = { left: relativePosition.x, top: relativePosition.y };\n                    var mousePositions = { left: currentPosition.x, top: currentPosition.y };\n                    var dataJson = this.getItemFromSessionStorage('_formfields');\n                    var data = JSON.parse(dataJson);\n                    for (var i = 0; i < data.length; i++) {\n                        if (data[i].FieldName === event.target.name) {\n                            var field = { name: data[i].FieldName };\n                        }\n                    }\n                    this.isMousedOver = true;\n                    this.isFormFieldMousedOver = true;\n                    this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover', field, pageIndex, relativePosition.x, relativePosition.y, currentPosition.x, currentPosition.y);\n                }\n                else {\n                    if (this.isMousedOver) {\n                        var pageIndex = void 0;\n                        if (this.pdfViewer.formDesignerModule) {\n                            pageIndex = this.pdfViewer.formDesignerModule.getEventPageNumber(event);\n                        }\n                        else {\n                            pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n                        }\n                        if (this.isFormFieldMousedOver) {\n                            if (this.fromTarget) {\n                                var field_3 = {\n                                    // eslint-disable-next-line\n                                    name: this.fromTarget.name, id: this.fromTarget.id, value: this.fromTarget.value, fontFamily: this.fromTarget.fontFamily, fontSize: this.fromTarget.fontSize, fontStyle: this.fromTarget.fontStyle,\n                                    // eslint-disable-next-line max-len\n                                    color: this.fromTarget.color, backgroundColor: this.fromTarget.backgroundColor, borderColor: this.fromTarget.borderColor,\n                                    // eslint-disable-next-line\n                                    thickness: this.fromTarget.thickness, alignment: this.fromTarget.alignment, isReadonly: this.fromTarget.isReadonly, visibility: this.fromTarget.visibility,\n                                    // eslint-disable-next-line\n                                    maxLength: this.fromTarget.maxLength, isRequired: this.fromTarget.isRequired, isPrint: this.fromTarget.isPrint, rotation: this.fromTarget.rotateAngle, tooltip: this.fromTarget.tooltip, options: this.fromTarget.options,\n                                    // eslint-disable-next-line\n                                    isChecked: this.fromTarget.isChecked, isSelected: this.fromTarget.isSelected\n                                };\n                                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', field_3, pageIndex);\n                            }\n                            else {\n                                this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave', null, pageIndex);\n                            }\n                        }\n                        else {\n                            this.pdfViewer.fireAnnotationMouseLeave(pageIndex);\n                        }\n                        this.isMousedOver = false;\n                        this.isFormFieldMousedOver = false;\n                        eventTarget.style.cursor = 'default';\n                    }\n                    if (obj && this.pdfViewer.selectedItems.annotations.length === 1 && event.type === 'mousemove') {\n                        eventTarget.style.cursor = 'pointer';\n                    }\n                    else {\n                        eventTarget.style.cursor = 'default';\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.setResizerCursorType = function () {\n        var cursorType;\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)) {\n            if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                // eslint-disable-next-line max-len\n                cursorType = !isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings) ? this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType : null;\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp') {\n                // eslint-disable-next-line max-len\n                cursorType = !isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings) ? this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType : null;\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage') {\n                // eslint-disable-next-line max-len\n                cursorType = !isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings) ? this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType : null;\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n                // eslint-disable-next-line max-len\n                cursorType = !isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings) ? this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType : null;\n            }\n            else if (!this.pdfViewer.selectedItems.annotations[0].measureType) {\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings) ? this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'LineWidthArrowHead') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings) ? this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Rectangle') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings) ? this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ellipse') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings) ? this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Polygon') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings) ? this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].measureType) {\n                if (this.pdfViewer.selectedItems.annotations[0].subject === 'Distance calculation') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings) ? this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Perimeter calculation') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings) ? this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Area calculation') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings) ? this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Radius calculation') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings) ? this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].subject === 'Volume calculation') {\n                    // eslint-disable-next-line max-len\n                    cursorType = !isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings) ? this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType : null;\n                }\n            }\n        }\n        else {\n            if (this.pdfViewer.selectedItems.annotations[0]) {\n                cursorType = this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType;\n            }\n        }\n        if (!cursorType) {\n            cursorType = this.pdfViewer.annotationSelectorSettings.resizerCursorType;\n        }\n        return cursorType;\n    };\n    /**\n     * @private\n     * @param {Actions | string} action - The actions.\n     * @returns {ToolBase} - Returns tools.\n     */\n    PdfViewerBase.prototype.getTool = function (action) {\n        switch (action) {\n            case 'Select':\n                return new SelectTool(this.pdfViewer, this);\n            case 'Drag':\n                return new MoveTool(this.pdfViewer, this);\n            case 'ResizeSouthEast':\n            case 'ResizeSouthWest':\n            case 'ResizeNorthEast':\n            case 'ResizeNorthWest':\n            case 'ResizeSouth':\n            case 'ResizeNorth':\n            case 'ResizeWest':\n            case 'ResizeEast':\n                return new ResizeTool(this.pdfViewer, this, action);\n            case 'ConnectorSourceEnd':\n            case 'ConnectorTargetEnd':\n            case 'Leader':\n            case 'ConnectorSegmentPoint':\n                return new ConnectTool(this.pdfViewer, this, action);\n            case 'DrawTool':\n                return new NodeDrawingTool(this.pdfViewer, this, this.pdfViewer.drawingObject);\n            case 'Polygon':\n                return new PolygonDrawingTool(this.pdfViewer, this, 'Polygon');\n            case 'Distance':\n                return new LineTool(this.pdfViewer, this, 'Leader1', undefined);\n            case 'Line':\n                return new LineTool(this.pdfViewer, this, 'ConnectorSegmentPoint_1', this.pdfViewer.drawingObject);\n            case 'Perimeter':\n                return new PolygonDrawingTool(this.pdfViewer, this, 'Perimeter');\n            case 'Rotate':\n                return new RotateTool(this.pdfViewer, this);\n            case 'Stamp':\n                return new StampTool(this.pdfViewer, this);\n            case 'Ink':\n                return new InkDrawingTool(this.pdfViewer, this, this.pdfViewer.drawingObject);\n        }\n        if (action.indexOf('ConnectorSegmentPoint') > -1 || action.indexOf('Leader') > -1) {\n            return new ConnectTool(this.pdfViewer, this, action);\n        }\n        return null;\n    };\n    /**\n     * @private\n     * @param {MouseEvent | TouchEvent} evt - The events.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.diagramMouseUp = function (evt) {\n        var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n        this.pdfViewer.enableServerDataBinding(false);\n        var touches;\n        if (this.tool) {\n            if (!this.inAction && evt.which !== 3) {\n                if (this.action === 'Drag') {\n                    this.action = 'Select';\n                    var obj = findActiveElement(evt, this, this.pdfViewer);\n                    var isMultipleSelect = true;\n                }\n            }\n            var isGroupAction = void 0;\n            if (!(this.tool instanceof PolygonDrawingTool) && !(this.tool instanceof LineTool) && !(this.tool instanceof NodeDrawingTool)) {\n                this.inAction = false;\n                this.isMouseDown = false;\n            }\n            this.currentPosition = this.getMousePosition(evt);\n            if (this.tool) {\n                this.eventArgs.position = this.currentPosition;\n                this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt, this.eventArgs.source);\n                var ctrlKey = this.isMetaKey(evt);\n                var info = { ctrlKey: evt.ctrlKey, shiftKey: evt.shiftKey };\n                this.eventArgs.info = info;\n                this.eventArgs.clickCount = evt.detail;\n                this.tool.mouseUp(this.eventArgs);\n                this.isAnnotationMouseDown = false;\n                this.isFormFieldMouseDown = false;\n                // eslint-disable-next-line max-len\n                if ((this.tool instanceof NodeDrawingTool || this.tool instanceof LineTool || this.tool instanceof PolygonDrawingTool) && !this.tool.dragging) {\n                    this.inAction = false;\n                    this.isMouseDown = false;\n                }\n                var obj = findActiveElement(evt, this, this.pdfViewer);\n                // eslint-disable-next-line max-len\n                if ((this.isShapeAnnotationModule() && this.isCalibrateAnnotationModule())) {\n                    this.pdfViewer.annotation.onShapesMouseup(obj, evt);\n                }\n                this.isAnnotationDrawn = false;\n            }\n        }\n        var target = evt.target;\n        // eslint-disable-next-line max-len\n        if (!touches && evt.cancelable && this.skipPreventDefault(target) && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n            evt.preventDefault();\n        }\n        this.eventArgs = {};\n        this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n    };\n    /**\n     * @private\n     * @param {HTMLElement} target - The target.\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.skipPreventDefault = function (target) {\n        var isSkipped = false;\n        var isSkip = false;\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus) {\n            isSkip = true;\n        }\n        // eslint-disable-next-line max-len\n        if (target.parentElement && target.parentElement.className !== 'foreign-object' && !target.classList.contains('e-pv-radio-btn') && !target.classList.contains('e-pv-radiobtn-span') && !target.classList.contains('e-pv-checkbox-div') && !target.classList.contains('e-pdfviewer-formFields')\n            && !target.classList.contains('e-pdfviewer-ListBox') && !target.classList.contains('e-pdfviewer-signatureformfields')\n            && !((target).className === 'free-text-input' && (target).tagName === 'TEXTAREA')\n            && !isSkip && !((target).className === 'e-pv-hyperlink')) {\n            isSkipped = true;\n        }\n        return isSkipped;\n    };\n    PdfViewerBase.prototype.isMetaKey = function (evt) {\n        return navigator.platform.match('Mac') ? evt.metaKey : evt.ctrlKey;\n    };\n    /**\n     * @private\n     * @param {MouseEvent | TouchEvent} evt - The events.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.diagramMouseDown = function (evt) {\n        if (evt.which === 3) {\n            this.diagramMouseUp(evt);\n        }\n        var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n        this.pdfViewer.enableServerDataBinding(false);\n        var touches = null;\n        touches = evt.touches;\n        this.isMouseDown = true;\n        this.isAnnotationAdded = false;\n        this.currentPosition = this.prevPosition = this.getMousePosition(evt);\n        this.eventArgs = {};\n        var isStamp = false;\n        if (this.pdfViewer.tool === 'Stamp') {\n            this.pdfViewer.tool = '';\n            isStamp = true;\n        }\n        var target;\n        if (Browser.isDevice && this.pdfViewer.annotation) {\n            this.activeElements.activePageID = this.pdfViewer.annotation.getEventPageNumber(evt);\n        }\n        var obj = findActiveElement(evt, this, this.pdfViewer);\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && (obj && !(obj instanceof PdfFormFieldBase))) {\n            evt.preventDefault();\n        }\n        if (this.pdfViewer.annotation && this.pdfViewer.enableStampAnnotations) {\n            var stampModule = this.pdfViewer.annotationModule.stampAnnotationModule;\n            if (stampModule && stampModule.isNewStampAnnot) {\n                var stampObj = obj;\n                if (!stampObj && this.pdfViewer.selectedItems.annotations[0]) {\n                    stampObj = this.pdfViewer.selectedItems.annotations[0];\n                }\n                if (stampObj) {\n                    this.isViewerMouseDown = false;\n                    stampObj.opacity = this.pdfViewer.stampSettings.opacity;\n                    this.isNewStamp = true;\n                    var opacity = void 0;\n                    if (stampObj.shapeAnnotationType === 'Image') {\n                        opacity = this.pdfViewer.customStampSettings.opacity;\n                    }\n                    else {\n                        opacity = this.pdfViewer.stampSettings.opacity;\n                    }\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.nodePropertyChange(stampObj, { opacity: opacity });\n                    this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = false;\n                    if (stampObj.shapeAnnotationType === 'Image' && !this.isAlreadyAdded) {\n                        this.stampAdded = true;\n                        var stampName = stampObj.id;\n                        if (stampModule.currentStampAnnotation && stampModule.currentStampAnnotation.signatureName) {\n                            stampName = stampModule.currentStampAnnotation.signatureName;\n                        }\n                        var isSkip = false;\n                        for (var i = 0; i < this.customStampCollection.length; i++) {\n                            if (this.customStampCollection[i].customStampName === stampName) {\n                                isSkip = true;\n                                break;\n                            }\n                        }\n                        if (isSkip) {\n                            stampName = stampObj.id;\n                        }\n                        stampName = stampModule.customStampName ? stampModule.customStampName : stampModule.currentStampAnnotation.signatureName;\n                        this.customStampCollection.push({ customStampName: stampName, customStampImageSource: stampObj.data });\n                        if (isBlazor()) {\n                            this.pdfViewer._dotnetInstance.invokeMethodAsync(\"UpdateCustomStampCollection\", stampName, stampObj.data);\n                        }\n                    }\n                    if (this.pdfViewer.customStampSettings.enableCustomStamp && this.pdfViewer.customStampSettings.isAddToMenu) {\n                        this.stampAdded = true;\n                    }\n                    this.isAlreadyAdded = false;\n                    stampModule.updateDeleteItems(stampObj.pageIndex, stampObj, stampObj.opacity);\n                    stampModule.resetAnnotation();\n                    stampModule.isNewStampAnnot = false;\n                }\n            }\n        }\n        if (this.isNewSignatureAdded) {\n            this.signatureCount++;\n            this.currentSignatureAnnot = null;\n            var signObject = obj;\n            if (isNullOrUndefined(signObject) && this.pdfViewer.selectedItems.annotations[0]) {\n                signObject = this.pdfViewer.selectedItems.annotations[0];\n            }\n            if (signObject) {\n                this.signatureAdded = true;\n                this.signatureModule.storeSignatureData(signObject.pageIndex, signObject);\n                // eslint-disable-next-line\n                var bounds = { left: signObject.bounds.x, top: signObject.bounds.y, width: signObject.bounds.width, height: signObject.bounds.height };\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignatureAdd(signObject.pageIndex, signObject.signatureName, signObject.shapeAnnotationType, bounds, signObject.opacity, signObject.strokeColor, signObject.thickness, this.signatureModule.saveImageString);\n            }\n            this.isNewSignatureAdded = false;\n        }\n        if (this.pdfViewer.annotationModule) {\n            var freeTextAnnotModule = this.pdfViewer.annotationModule.freeTextAnnotationModule;\n            var canvasPaddingLeft = 5, canvasPaddingWidth = 10;\n            // eslint-disable-next-line\n            if (freeTextAnnotModule.isNewFreeTextAnnot === true) {\n                var canvas = void 0;\n                // eslint-disable-next-line max-len\n                if (evt.target && (evt.target.id.indexOf('_text') > -1 || evt.target.id.indexOf('_annotationCanvas') > -1 || evt.target.classList.contains('e-pv-hyperlink')) && this.pdfViewer.annotation) {\n                    var pageIndex = this.pdfViewer.annotation.getEventPageNumber(evt);\n                    var diagram = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                    if (diagram) {\n                        var canvas1 = diagram.getBoundingClientRect();\n                        var left = canvas1.x ? canvas1.x : canvas1.left;\n                        var top_4 = canvas1.y ? canvas1.y : canvas1.top;\n                        canvas = new Rect(left + canvasPaddingLeft, top_4 + canvasPaddingLeft, canvas1.width - canvasPaddingWidth, canvas1.height - canvasPaddingWidth);\n                    }\n                }\n                if (touches) {\n                    this.mouseX = touches[0].clientX;\n                    this.mouseY = touches[0].clientY;\n                }\n                if (canvas && canvas.containsPoint({ x: this.mouseX, y: this.mouseY }) && freeTextAnnotModule.isNewAddedAnnot) {\n                    var pageIndex = this.pdfViewer.annotation.getEventPageNumber(evt);\n                    if (!this.pdfViewer.freeTextSettings.enableAutoFit) {\n                        var zoomFactor = this.getZoomFactor();\n                        var width = this.currentPosition.x + (freeTextAnnotModule.defautWidth * zoomFactor);\n                        var pageWidth = this.getPageWidth(pageIndex);\n                        if (width >= pageWidth) {\n                            this.currentPosition.x = pageWidth - (freeTextAnnotModule.defautWidth * zoomFactor);\n                            this.currentPosition.x <= 0 ? this.currentPosition.x = canvasPaddingLeft : this.currentPosition.x;\n                            freeTextAnnotModule.defautWidth = (freeTextAnnotModule.defautWidth * zoomFactor) >= pageWidth ? pageWidth - canvasPaddingWidth : freeTextAnnotModule.defautWidth;\n                        }\n                    }\n                    freeTextAnnotModule.addInuptElemet(this.currentPosition, null, pageIndex);\n                    if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n                        // eslint-disable-next-line\n                        var annotModule = this.pdfViewer.toolbar.annotationToolbarModule;\n                        if (!isBlazor()) {\n                            annotModule.primaryToolbar.deSelectItem(annotModule.freeTextEditItem);\n                        }\n                    }\n                    evt.preventDefault();\n                    freeTextAnnotModule.isNewAddedAnnot = false;\n                }\n            }\n        }\n        var sourceElement = null;\n        if (obj) {\n            sourceElement = obj.wrapper.children[0];\n            if (sourceElement) {\n                target = obj;\n            }\n        }\n        if (!this.tool || (this.tool && !this.tool.drawingObject)) {\n            if (!isStamp) {\n                this.action = this.findToolToActivate(obj, this.currentPosition);\n                // eslint-disable-next-line\n                if (obj && obj.annotationSettings && obj.annotationSettings.isLock) {\n                    if (this.action === 'Select') {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Select', obj)) {\n                            this.action = '';\n                        }\n                    }\n                    if (this.action === 'Drag') {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Move', obj)) {\n                            this.action = 'Select';\n                        }\n                    }\n                    if (this.action === 'Rotate') {\n                        this.action = 'Select';\n                    }\n                    // eslint-disable-next-line max-len\n                    if (this.action === 'ResizeSouthEast' || this.action === 'ResizeNorthEast' || this.action === 'ResizeNorthWest' || this.action === 'ResizeSouthWest' || this.action === 'ResizeSouth' || // eslint-disable-next-line max-len\n                        this.action === 'ResizeNorth' || this.action === 'ResizeWest' || this.action === 'ResizeEast' || this.action.includes('ConnectorSegmentPoint') || this.action.includes('Leader')) {\n                        if (!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize', obj)) {\n                            this.action = 'Select';\n                        }\n                    }\n                }\n                this.tool = this.getTool(this.action);\n                if (!this.tool) {\n                    this.action = this.pdfViewer.tool || 'Select';\n                    this.tool = this.getTool(this.action);\n                }\n            }\n            else {\n                this.action = 'Select';\n                this.tool = this.getTool(this.action);\n            }\n        }\n        this.getMouseEventArgs(this.currentPosition, this.eventArgs, evt);\n        this.eventArgs.position = this.currentPosition;\n        if (this.tool) {\n            this.isAnnotationMouseDown = false;\n            this.isFormFieldMouseDown = false;\n            this.isAnnotationMouseMove = false;\n            this.isFormFieldMouseMove = false;\n            this.tool.mouseDown(this.eventArgs);\n            this.isAnnotationDrawn = true;\n            this.signatureAdded = true;\n        }\n        if (this.pdfViewer.annotation) {\n            this.pdfViewer.annotation.onAnnotationMouseDown();\n        }\n        if (this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.formFields.length === 1) {\n            if (!isNullOrUndefined(this.pdfViewer.toolbar) && !isNullOrUndefined(this.pdfViewer.toolbar.formDesignerToolbarModule)) {\n                this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);\n            }\n        }\n        var signatureFieldAnnotation = this.pdfViewer.selectedItems.annotations.length === 1 ? this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0] + '_content'] : null;\n        if (!signatureFieldAnnotation) {\n            signatureFieldAnnotation = this.pdfViewer.selectedItems.annotations.length === 1 ? this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id] : null;\n        }\n        // eslint-disable-next-line max-len\n        if (this.eventArgs && this.eventArgs.source && (this.eventArgs.source.formFieldAnnotationType || signatureFieldAnnotation) && !this.pdfViewer.designerMode) {\n            var currentObject = void 0;\n            if (signatureFieldAnnotation) {\n                currentObject = this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0]];\n            }\n            else {\n                currentObject = this.eventArgs.source;\n            }\n            if (!currentObject) {\n                currentObject = this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function (el) { return el.id === signatureFieldAnnotation.id; })];\n            }\n            if (currentObject) {\n                // eslint-disable-next-line\n                var field = {\n                    // eslint-disable-next-line max-len\n                    name: currentObject.name, id: currentObject.id, fontFamily: currentObject.fontFamily, fontSize: currentObject.fontSize, fontStyle: currentObject.fontStyle,\n                    // eslint-disable-next-line\n                    color: currentObject.color, value: currentObject.value, type: currentObject.formFieldAnnotationType ? currentObject.formFieldAnnotationType : currentObject.type, backgroundColor: currentObject.backgroundColor, alignment: currentObject.alignment\n                };\n                var target_1 = document.getElementById(currentObject.id);\n                target_1 = target_1 ? target_1 : (document.getElementById(currentObject.id + '_content_html_element') ? document.getElementById(currentObject.id + '_content_html_element').children[0].children[0] : null);\n                if (target_1) {\n                    this.currentTarget = target_1;\n                    this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', field, false, evt.button === 0);\n                }\n            }\n        }\n        this.initialEventArgs = { source: this.eventArgs.source, sourceWrapper: this.eventArgs.sourceWrapper };\n        this.initialEventArgs.position = this.currentPosition;\n        this.initialEventArgs.info = this.eventArgs.info;\n        this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.exportAnnotationsAsObject = function () {\n        var _this = this;\n        if (this.pdfViewer.annotationModule) {\n            var isAnnotations = this.updateExportItem();\n            if (isAnnotations) {\n                return new Promise(function (resolve, reject) {\n                    _this.createRequestForExportAnnotations(true, AnnotationDataFormat.Json).then(function (value) {\n                        resolve(value);\n                    });\n                });\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {string} type - The type.\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.getItemFromSessionStorage = function (type) {\n        if (this.isStorageExceed) {\n            return this.formFieldStorage[this.documentId + type];\n        }\n        else {\n            return window.sessionStorage.getItem(this.documentId + type);\n        }\n    };\n    /**\n     * @param textDiv\n     * @param left\n     * @param top\n     * @param fontHeight\n     * @param width\n     * @param height\n     * @param isPrint\n     * @param textDiv\n     * @param left\n     * @param top\n     * @param fontHeight\n     * @param width\n     * @param height\n     * @param isPrint\n     * @param textDiv\n     * @param left\n     * @param top\n     * @param fontHeight\n     * @param width\n     * @param height\n     * @param isPrint\n     * @param textDiv\n     * @param left\n     * @param top\n     * @param fontHeight\n     * @param width\n     * @param height\n     * @param isPrint\n     * @param textDiv\n     * @param left\n     * @param top\n     * @param fontHeight\n     * @param width\n     * @param height\n     * @param isPrint\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    PdfViewerBase.prototype.setStyleToTextDiv = function (textDiv, left, top, fontHeight, width, height, isPrint) {\n        var zoomvalue = this.getZoomFactor();\n        if (isPrint) {\n            zoomvalue = 1;\n            textDiv.style.position = 'absolute';\n        }\n        textDiv.style.left = left * zoomvalue + 'px';\n        textDiv.style.top = top * zoomvalue + 'px';\n        textDiv.style.height = height * zoomvalue + 'px';\n        textDiv.style.width = width * zoomvalue + 'px';\n        textDiv.style.margin = '0px';\n        if (fontHeight > 0) {\n            textDiv.style.fontSize = fontHeight * zoomvalue + 'px';\n        }\n    };\n    /**\n     * @param number\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.ConvertPointToPixel = function (number) {\n        return (number * (96 / 72));\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.setItemInSessionStorage = function (formFieldsData, type) {\n        // eslint-disable-next-line\n        var formFieldsSize = Math.round(JSON.stringify(formFieldsData).length / 1024);\n        if (formFieldsSize > 4500) {\n            this.isStorageExceed = true;\n            if (this.pdfViewer.formFieldsModule) {\n                this.pdfViewer.formFieldsModule.clearFormFieldStorage();\n            }\n        }\n        if (this.isStorageExceed) {\n            this.formFieldStorage[this.documentId + type] = JSON.stringify(formFieldsData);\n        }\n        else {\n            window.sessionStorage.setItem(this.documentId + type, JSON.stringify(formFieldsData));\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.exportFormFieldsAsObject = function () {\n        var _this = this;\n        if (this.pdfViewer.formFieldsModule) {\n            return new Promise(function (resolve, reject) {\n                _this.createRequestForExportFormfields(true).then(function (value) {\n                    resolve(value);\n                });\n            });\n        }\n    };\n    /**\n     * @param importData\n     * @param annotationDataFormat\n     * @param isXfdf\n     * @param importData\n     * @param annotationDataFormat\n     * @param isXfdf\n     * @param importData\n     * @param annotationDataFormat\n     * @param isXfdf\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.importAnnotations = function (importData, annotationDataFormat, isXfdf) {\n        if (this.pdfViewer.annotationModule) {\n            this.createRequestForImportAnnotations(importData, annotationDataFormat, isXfdf);\n        }\n    };\n    /**\n     * @private\n     * @param {AnnotationDataFormat} annotationDataFormat - The annotationDataFormat.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.exportAnnotations = function (annotationDataFormat) {\n        if (this.pdfViewer.annotationModule) {\n            var isAnnotations = this.updateExportItem();\n            if (isAnnotations) {\n                this.createRequestForExportAnnotations(false, annotationDataFormat);\n            }\n        }\n    };\n    /**\n     * @param isObject\n     * @param annotationDataFormat\n     * @param isBase64String\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createRequestForExportAnnotations = function (isObject, annotationDataFormat, isBase64String) {\n        var _this = this;\n        var proxy = null;\n        proxy = this;\n        var promise = new Promise(function (resolve, reject) {\n            // eslint-disable-next-line\n            var jsonObject;\n            if (annotationDataFormat === 'Json') {\n                // eslint-disable-next-line max-len\n                jsonObject = { hashId: proxy.hashId, action: 'ExportAnnotations', pdfAnnotation: proxy.createAnnotationJsonData(), elementId: proxy.pdfViewer.element.id, annotationDataFormat: annotationDataFormat, uniqueId: proxy.documentId };\n                proxy.pdfViewer.fireExportStart(jsonObject.pdfAnnotation);\n            }\n            else {\n                jsonObject = _this.constructJsonDownload();\n                jsonObject.annotationDataFormat = annotationDataFormat;\n                // eslint-disable-next-line\n                jsonObject['action'] = 'ExportAnnotations';\n                proxy.pdfViewer.fireExportStart(jsonObject);\n            }\n            if (proxy.jsonDocumentId) {\n                // eslint-disable-next-line\n                jsonObject.document = proxy.jsonDocumentId;\n            }\n            var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.exportAnnotations;\n            proxy.exportAnnotationRequestHandler = new AjaxHandler(_this.pdfViewer);\n            proxy.exportAnnotationRequestHandler.url = url;\n            proxy.exportAnnotationRequestHandler.mode = true;\n            proxy.exportAnnotationRequestHandler.responseType = 'text';\n            proxy.exportAnnotationRequestHandler.send(jsonObject);\n            // eslint-disable-next-line\n            proxy.exportAnnotationRequestHandler.onSuccess = function (result) {\n                // eslint-disable-next-line\n                var data = result.data;\n                if (data) {\n                    if (typeof data === 'object') {\n                        data = JSON.parse(data);\n                    }\n                    if (data) {\n                        var isCancel = proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportAnnotations, data);\n                        if (isObject || (isBase64String && !isBlazor())) {\n                            if (data.split('base64,')[1]) {\n                                var exportObject = data;\n                                // eslint-disable-next-line \n                                var annotationJson = atob(data.split(',')[1]);\n                                if (isObject) {\n                                    if (jsonObject.annotationDataFormat === 'Json') {\n                                        exportObject = JSON.parse(annotationJson);\n                                    }\n                                    else {\n                                        exportObject = annotationJson;\n                                    }\n                                }\n                                if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                                    proxy.pdfViewer.fireExportSuccess(exportObject, proxy.pdfViewer.exportAnnotationFileName);\n                                }\n                                else {\n                                    proxy.pdfViewer.fireExportSuccess(exportObject, proxy.pdfViewer.fileName);\n                                }\n                                proxy.updateDocumentAnnotationCollections();\n                                if (isBase64String) {\n                                    resolve(data);\n                                }\n                                else {\n                                    resolve(annotationJson);\n                                }\n                            }\n                            else {\n                                // eslint-disable-next-line max-len\n                                proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                            }\n                        }\n                        else {\n                            if (annotationDataFormat === 'Json') {\n                                if (data.split('base64,')[1]) {\n                                    if (!isCancel) {\n                                        var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/json');\n                                        if (Browser.isIE || Browser.info.name === 'edge') {\n                                            if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                                                // eslint-disable-next-line max-len\n                                                window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.exportAnnotationFileName.split('.')[0] + '.json');\n                                            }\n                                            else {\n                                                window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.json');\n                                            }\n                                        }\n                                        else {\n                                            proxy.downloadExportAnnotationJson(blobUrl);\n                                        }\n                                        proxy.updateDocumentAnnotationCollections();\n                                    }\n                                    else {\n                                        return data;\n                                    }\n                                }\n                                else {\n                                    if (isBlazor()) {\n                                        var promise_2 = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_ExportFailed');\n                                        promise_2.then(function (value) {\n                                            proxy.openImportExportNotificationPopup(value);\n                                        });\n                                    }\n                                    else {\n                                        proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                                    }\n                                    // eslint-disable-next-line max-len\n                                    proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                                }\n                            }\n                            else {\n                                if (data.split('base64,')[1]) {\n                                    if (!isCancel) {\n                                        var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/vnd.adobe.xfdf');\n                                        if (Browser.isIE || Browser.info.name === 'edge') {\n                                            window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName.split('.')[0] + '.xfdf');\n                                        }\n                                        else {\n                                            proxy.downloadExportedXFdfAnnotation(blobUrl);\n                                        }\n                                    }\n                                    else {\n                                        return data;\n                                    }\n                                }\n                                else {\n                                    if (isBlazor()) {\n                                        var promise_3 = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_ExportFailed');\n                                        promise_3.then(function (value) {\n                                            proxy.openImportExportNotificationPopup(value);\n                                        });\n                                    }\n                                    else {\n                                        proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                                    }\n                                    // eslint-disable-next-line max-len\n                                    proxy.pdfViewer.fireExportFailed(jsonObject, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                                }\n                            }\n                        }\n                    }\n                    if (typeof data !== 'string') {\n                        try {\n                            if (typeof data === 'string') {\n                                proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.exportAnnotations);\n                                data = null;\n                            }\n                        }\n                        catch (error) {\n                            // eslint-disable-next-line max-len\n                            proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, proxy.pdfViewer.localeObj.getConstant('Export Failed'));\n                            proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.exportAnnotations);\n                            data = null;\n                        }\n                    }\n                }\n                else {\n                    var fileName = void 0;\n                    if (proxy.pdfViewer.exportAnnotationFileName !== null) {\n                        fileName = proxy.pdfViewer.exportAnnotationFileName;\n                    }\n                    else {\n                        fileName = proxy.pdfViewer.fileName;\n                    }\n                    proxy.pdfViewer.fireExportSuccess('Exported data saved in server side successfully', fileName);\n                }\n            };\n            // eslint-disable-next-line\n            proxy.exportAnnotationRequestHandler.onFailure = function (result) {\n                proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, result.statusText);\n            };\n            // eslint-disable-next-line\n            proxy.exportAnnotationRequestHandler.onError = function (result) {\n                proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation, result.statusText);\n            };\n        });\n        if (isObject || isBase64String) {\n            return promise;\n        }\n        else {\n            return true;\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createRequestForImportAnnotations = function (importData, annotationDataFormat, isXfdf) {\n        var jsonObject;\n        var proxy = null;\n        proxy = this;\n        if (typeof importData === 'string' && annotationDataFormat === 'Json' && importData.indexOf(\".json\") === -1) {\n            importData = importData.split(',')[1] ? importData.split(',')[1] : importData.split(',')[0];\n            importData = JSON.parse(decodeURIComponent(escape(atob(importData))));\n        }\n        if (typeof importData === 'object') {\n            if (!isXfdf) {\n                this.isJsonImported = true;\n            }\n            else {\n                this.isJsonImported = false;\n            }\n            proxy.reRenderAnnotations(importData.pdfAnnotation);\n            proxy.isImportedAnnotation = true;\n            proxy.updateDocumentEditedProperty(true);\n            if (!this.isAddAnnotation) {\n                proxy.pdfViewer.fireImportSuccess(importData.pdfAnnotation);\n            }\n        }\n        else {\n            proxy.pdfViewer.fireImportStart(importData);\n            if (annotationDataFormat === 'Json') {\n                // eslint-disable-next-line max-len\n                jsonObject = { fileName: importData, action: 'ImportAnnotations', elementId: proxy.pdfViewer.element.id, hashId: proxy.hashId, uniqueId: proxy.documentId };\n            }\n            else {\n                if (!isXfdf) {\n                    importData = btoa(importData);\n                }\n                importData = importData.split(',')[1] ? importData.split(',')[1] : importData.split(',')[0];\n                // eslint-disable-next-line max-len\n                jsonObject = { importedData: importData, action: 'ImportAnnotations', elementId: proxy.pdfViewer.element.id, hashId: proxy.hashId, uniqueId: proxy.documentId };\n            }\n            if (proxy.jsonDocumentId) {\n                // eslint-disable-next-line\n                jsonObject.document = proxy.jsonDocumentId;\n            }\n            var url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.importAnnotations;\n            proxy.importAnnotationRequestHandler = new AjaxHandler(proxy.pdfViewer);\n            proxy.importAnnotationRequestHandler.url = url;\n            proxy.importAnnotationRequestHandler.mode = true;\n            proxy.importAnnotationRequestHandler.responseType = 'text';\n            proxy.importAnnotationRequestHandler.send(jsonObject);\n            // eslint-disable-next-line\n            proxy.importAnnotationRequestHandler.onSuccess = function (result) {\n                // eslint-disable-next-line\n                var data = result.data;\n                if (data) {\n                    if (typeof data !== 'object') {\n                        try {\n                            data = JSON.parse(data);\n                            if (typeof data !== 'object') {\n                                proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importAnnotations);\n                                data = null;\n                            }\n                        }\n                        catch (error) {\n                            proxy.pdfViewer.fireImportFailed(importData, proxy.pdfViewer.localeObj.getConstant('File not found'));\n                            if (isBlazor()) {\n                                var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_FileNotFound');\n                                promise.then(function (value) {\n                                    proxy.openImportExportNotificationPopup(value);\n                                });\n                            }\n                            else {\n                                proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));\n                            }\n                            proxy.onControlError(500, data, proxy.pdfViewer.serverActionSettings.importAnnotations);\n                            data = null;\n                        }\n                    }\n                    if (data) {\n                        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importAnnotations, data);\n                        if (data.pdfAnnotation) {\n                            proxy.reRenderAnnotations(data.pdfAnnotation);\n                            proxy.isImportedAnnotation = true;\n                            proxy.updateDocumentEditedProperty(true);\n                            proxy.pdfViewer.fireImportSuccess(data.pdfAnnotation);\n                        }\n                    }\n                }\n            };\n            // eslint-disable-next-line\n            proxy.importAnnotationRequestHandler.onFailure = function (result) {\n                proxy.pdfViewer.fireImportFailed(importData, result.statusText);\n            };\n            // eslint-disable-next-line\n            proxy.importAnnotationRequestHandler.onError = function (result) {\n                proxy.pdfViewer.fireImportFailed(importData, result.statusText);\n            };\n        }\n    };\n    /**\n     * @private\n     * @param {string} errorDetails - The error details.\n     * @returns {void}\n     */\n    PdfViewerBase.prototype.openImportExportNotificationPopup = function (errorDetails) {\n        if (this.pdfViewer.showNotificationDialog) {\n            this.textLayer.createNotificationPopup(errorDetails);\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.reRenderAnnotations = function (annotation) {\n        if (annotation) {\n            this.isImportAction = true;\n            var count = void 0;\n            if (this.isImportedAnnotation) {\n                this.importedAnnotation = this.combineImportedData(this.importedAnnotation, annotation);\n            }\n            else {\n                if (this.pageCount > 0) {\n                    this.importedAnnotation = annotation;\n                }\n            }\n            if (!this.isImportedAnnotation) {\n                count = 0;\n            }\n            for (var i = 0; i < this.pageCount; i++) {\n                if (annotation[i]) {\n                    // eslint-disable-next-line\n                    var importPageCollections = [];\n                    // eslint-disable-next-line\n                    var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n                    // eslint-disable-next-line\n                    var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n                    // eslint-disable-next-line\n                    var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n                    // eslint-disable-next-line\n                    var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n                    // eslint-disable-next-line\n                    var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n                    // eslint-disable-next-line\n                    var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n                    // eslint-disable-next-line\n                    var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n                    // eslint-disable-next-line\n                    var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n                    if (this.isStorageExceed) {\n                        textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n                        shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n                        measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n                        stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n                        stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n                        freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n                        inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n                    }\n                    var annotationCanvas = this.getElement('_annotationCanvas_' + i);\n                    if (annotationCanvas) {\n                        this.drawPageAnnotations(annotation[i], i);\n                        if (this.isImportedAnnotation) {\n                            var isAdded = false;\n                            for (var j = 0; j < this.annotationPageList.length; j++) {\n                                if (this.annotationPageList[j] === i) {\n                                    isAdded = true;\n                                }\n                            }\n                            if (isAdded) {\n                                this.annotationPageList[count] = i;\n                                count = count + 1;\n                            }\n                        }\n                        else {\n                            this.annotationPageList[count] = i;\n                            count = count + 1;\n                        }\n                    }\n                    if (annotation[i].textMarkupAnnotation && annotation[i].textMarkupAnnotation.length !== 0) {\n                        if (textMarkupObject) {\n                            var annotObject = JSON.parse(textMarkupObject);\n                            // eslint-disable-next-line max-len\n                            annotation[i].textMarkupAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].textMarkupAnnotation, i);\n                        }\n                        annotation[i].textMarkupAnnotation = this.checkAnnotationCommentsCollections(annotation[i].textMarkupAnnotation, i);\n                        importPageCollections.textMarkupAnnotation = annotation[i].textMarkupAnnotation;\n                        if (annotation[i].textMarkupAnnotation.length !== 0) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].textMarkupAnnotation, i);\n                            for (var j = 0; j < annotation[i].textMarkupAnnotation.length; j++) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(annotation[i].textMarkupAnnotation[j], i));\n                            }\n                        }\n                    }\n                    if (annotation[i].shapeAnnotation && annotation[i].shapeAnnotation.length !== 0) {\n                        if (shapeObject) {\n                            var annotObject = JSON.parse(shapeObject);\n                            annotation[i].shapeAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].shapeAnnotation, i);\n                        }\n                        annotation[i].shapeAnnotation = this.checkAnnotationCommentsCollections(annotation[i].shapeAnnotation, i);\n                        importPageCollections.shapeAnnotation = annotation[i].shapeAnnotation;\n                        if (annotation[i].shapeAnnotation.length !== 0) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].shapeAnnotation, i);\n                            for (var j = 0; j < annotation[i].shapeAnnotation.length; j++) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(annotation[i].shapeAnnotation[j], i));\n                            }\n                        }\n                    }\n                    if (annotation[i].measureShapeAnnotation && annotation[i].measureShapeAnnotation.length !== 0) {\n                        if (measureShapeObject) {\n                            var annotObject = JSON.parse(measureShapeObject);\n                            // eslint-disable-next-line max-len\n                            annotation[i].measureShapeAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].measureShapeAnnotation, i);\n                        }\n                        // eslint-disable-next-line max-len\n                        annotation[i].measureShapeAnnotation = this.checkAnnotationCommentsCollections(annotation[i].measureShapeAnnotation, i);\n                        importPageCollections.measureShapeAnnotation = annotation[i].measureShapeAnnotation;\n                        if (annotation[i].measureShapeAnnotation.length !== 0) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].measureShapeAnnotation, i);\n                            for (var j = 0; j < annotation[i].measureShapeAnnotation.length; j++) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(annotation[i].measureShapeAnnotation[j], i));\n                            }\n                        }\n                    }\n                    if (annotation[i].stampAnnotations && annotation[i].stampAnnotations.length !== 0) {\n                        if (stampObject) {\n                            var annotObject = JSON.parse(stampObject);\n                            // eslint-disable-next-line max-len\n                            annotation[i].stampAnnotations = this.checkAnnotationCollections(annotObject, annotation[i].stampAnnotations, i);\n                        }\n                        annotation[i].stampAnnotations = this.checkAnnotationCommentsCollections(annotation[i].stampAnnotations, i);\n                        importPageCollections.stampAnnotations = annotation[i].stampAnnotations;\n                        if (annotation[i].stampAnnotations.length !== 0) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].stampAnnotations, i);\n                            for (var j = 0; j < annotation[i].stampAnnotations.length; j++) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(annotation[i].stampAnnotations[j], i));\n                            }\n                        }\n                    }\n                    if (annotation[i].stickyNotesAnnotation && annotation[i].stickyNotesAnnotation.length !== 0) {\n                        if (stickyObject) {\n                            var annotObject = JSON.parse(stickyObject);\n                            // eslint-disable-next-line max-len\n                            annotation[i].stickyNotesAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].stickyNotesAnnotation, i);\n                        }\n                        // eslint-disable-next-line max-len\n                        annotation[i].stickyNotesAnnotation = this.checkAnnotationCommentsCollections(annotation[i].stickyNotesAnnotation, i);\n                        importPageCollections.stickyNotesAnnotation = annotation[i].stickyNotesAnnotation;\n                        if (annotation[i].stickyNotesAnnotation.length !== 0) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].stickyNotesAnnotation, i);\n                            for (var j = 0; j < annotation[i].stickyNotesAnnotation.length; j++) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(annotation[i].stickyNotesAnnotation[j], i));\n                            }\n                        }\n                    }\n                    if (annotation[i].freeTextAnnotation && annotation[i].freeTextAnnotation.length !== 0) {\n                        if (freeTextObject) {\n                            var annotObject = JSON.parse(freeTextObject);\n                            // eslint-disable-next-line max-len\n                            annotation[i].freeTextAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].freeTextAnnotation, i);\n                        }\n                        annotation[i].freeTextAnnotation = this.checkAnnotationCommentsCollections(annotation[i].freeTextAnnotation, i);\n                        importPageCollections.freeTextAnnotation = annotation[i].freeTextAnnotation;\n                        if (annotation[i].freeTextAnnotation.length !== 0) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].freeTextAnnotation, i);\n                            for (var j = 0; j < annotation[i].freeTextAnnotation.length; j++) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotation[i].freeTextAnnotation[j], i));\n                            }\n                        }\n                    }\n                    if (annotation[i].signatureAnnotation && annotation[i].signatureAnnotation.length !== 0) {\n                        if (signatureObject) {\n                            var annotObject = JSON.parse(signatureObject);\n                            // eslint-disable-next-line max-len\n                            annotation[i].signatureAnnotation = this.checkSignatureCollections(annotObject, annotation[i].signatureAnnotation, i);\n                        }\n                        importPageCollections.signatureAnnotation = annotation[i].signatureAnnotation;\n                        if (annotation[i].signatureAnnotation.length !== 0) {\n                            for (var j = 0; j < annotation[i].signatureAnnotation.length; j++) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(annotation[i].signatureAnnotation[j], i), true);\n                            }\n                        }\n                    }\n                    if (annotation[i].signatureInkAnnotation && annotation[i].signatureInkAnnotation.length !== 0) {\n                        if (inkObject) {\n                            var annotObject = JSON.parse(inkObject);\n                            // eslint-disable-next-line max-len\n                            annotation[i].signatureInkAnnotation = this.checkAnnotationCollections(annotObject, annotation[i].signatureInkAnnotation, i);\n                        }\n                        // eslint-disable-next-line max-len\n                        annotation[i].signatureInkAnnotation = this.checkAnnotationCommentsCollections(annotation[i].signatureInkAnnotation, i);\n                        importPageCollections.signatureInkAnnotation = annotation[i].signatureInkAnnotation;\n                        if (annotation[i].signatureInkAnnotation.length !== 0) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(annotation[i].signatureInkAnnotation, i);\n                            for (var j = 0; j < annotation[i].signatureInkAnnotation.length; j++) {\n                                // eslint-disable-next-line max-len\n                                // this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotation[i].freeTextAnnotation[j], i));\n                            }\n                        }\n                    }\n                    this.updateImportedAnnotationsInDocumentCollections(importPageCollections, i);\n                }\n            }\n            if (this.pageCount > 0) {\n                // eslint-disable-next-line max-len\n                if (this.pdfViewer.annotationModule.stickyNotesAnnotationModule && !this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered) {\n                    // eslint-disable-next-line\n                    var annotationCollection = this.createAnnotationsCollection();\n                    if (annotationCollection) {\n                        // eslint-disable-next-line max-len\n                        this.documentAnnotationCollections = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation, annotationCollection);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param importedAnnotations\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateImportedAnnotationsInDocumentCollections = function (importedAnnotations, pageNumber) {\n        if (this.documentAnnotationCollections) {\n            // eslint-disable-next-line\n            var documentAnnotationCollection = this.documentAnnotationCollections;\n            // eslint-disable-next-line\n            var pageCollections = documentAnnotationCollection[pageNumber];\n            if (pageCollections) {\n                if (importedAnnotations.textMarkupAnnotation && importedAnnotations.textMarkupAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.textMarkupAnnotation.length; i++) {\n                        pageCollections.textMarkupAnnotation.push(importedAnnotations.textMarkupAnnotation[i]);\n                    }\n                }\n                if (importedAnnotations.shapeAnnotation && importedAnnotations.shapeAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.shapeAnnotation.length; i++) {\n                        pageCollections.shapeAnnotation.push(importedAnnotations.shapeAnnotation[i]);\n                    }\n                }\n                if (importedAnnotations.measureShapeAnnotation && importedAnnotations.measureShapeAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.measureShapeAnnotation.length; i++) {\n                        pageCollections.measureShapeAnnotation.push(importedAnnotations.measureShapeAnnotation[i]);\n                    }\n                }\n                if (importedAnnotations.stampAnnotations && importedAnnotations.stampAnnotations.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.stampAnnotations.length; i++) {\n                        pageCollections.stampAnnotations.push(importedAnnotations.stampAnnotations[i]);\n                    }\n                }\n                if (importedAnnotations.stickyNotesAnnotation && importedAnnotations.stickyNotesAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.stickyNotesAnnotation.length; i++) {\n                        pageCollections.stickyNotesAnnotation.push(importedAnnotations.stickyNotesAnnotation[i]);\n                    }\n                }\n                if (importedAnnotations.freeTextAnnotation && importedAnnotations.freeTextAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.freeTextAnnotation.length; i++) {\n                        pageCollections.freeTextAnnotation.push(importedAnnotations.freeTextAnnotation[i]);\n                    }\n                }\n                if (importedAnnotations.signatureAnnotation && importedAnnotations.signatureAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.signatureAnnotation.length; i++) {\n                        pageCollections.signatureAnnotation.push(importedAnnotations.signatureAnnotation[i]);\n                    }\n                }\n                if (importedAnnotations.signatureInkAnnotation && importedAnnotations.signatureInkAnnotation.length !== 0) {\n                    for (var i = 0; i < importedAnnotations.signatureInkAnnotation.length; i++) {\n                        pageCollections.signatureInkAnnotation.push(importedAnnotations.signatureInkAnnotation[i]);\n                    }\n                }\n                this.documentAnnotationCollections[pageNumber] = pageCollections;\n            }\n        }\n    };\n    /**\n     * @param pageIndex\n     * @param pageCollections\n     * @param pageIndex\n     * @param pageCollections\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkDocumentCollectionData = function (pageIndex, pageCollections) {\n        // eslint-disable-next-line\n        var importPageCollections;\n        if (pageCollections) {\n            importPageCollections = pageCollections;\n        }\n        else if (this.documentAnnotationCollections) {\n            // eslint-disable-next-line\n            var documetCollections = this.documentAnnotationCollections[pageIndex];\n            if (documetCollections) {\n                importPageCollections = cloneObject(documetCollections);\n            }\n        }\n        if (importPageCollections) {\n            // eslint-disable-next-line\n            var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n            // eslint-disable-next-line\n            var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n            // eslint-disable-next-line\n            var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n            // eslint-disable-next-line\n            var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n            // eslint-disable-next-line\n            var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n            // eslint-disable-next-line\n            var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n            // eslint-disable-next-line\n            var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n            // eslint-disable-next-line\n            var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n            if (this.isStorageExceed) {\n                textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n                shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n                measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n                stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n                stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n                freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n                inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n                signatureObject = this.annotationStorage[this.documentId + '_annotations_sign'];\n            }\n            if (importPageCollections.textMarkupAnnotation && importPageCollections.textMarkupAnnotation.length !== 0) {\n                if (textMarkupObject) {\n                    var annotationObject = JSON.parse(textMarkupObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.textMarkupAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.textMarkupAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.shapeAnnotation && importPageCollections.shapeAnnotation.length !== 0) {\n                if (shapeObject) {\n                    var annotationObject = JSON.parse(shapeObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.shapeAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.shapeAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.measureShapeAnnotation && importPageCollections.measureShapeAnnotation.length !== 0) {\n                if (measureShapeObject) {\n                    var annotationObject = JSON.parse(measureShapeObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.measureShapeAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.measureShapeAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.stampAnnotations && importPageCollections.stampAnnotations.length !== 0) {\n                if (stampObject) {\n                    var annotationObject = JSON.parse(stampObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.stampAnnotations = this.findImportedAnnotations(annotationObject, importPageCollections.stampAnnotations, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.stickyNotesAnnotation && importPageCollections.stickyNotesAnnotation.length !== 0) {\n                if (stickyObject) {\n                    var annotationObject = JSON.parse(stickyObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.stickyNotesAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.stickyNotesAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.freeTextAnnotation && importPageCollections.freeTextAnnotation.length !== 0) {\n                if (freeTextObject) {\n                    var annotationObject = JSON.parse(freeTextObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.freeTextAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.freeTextAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.signatureInkAnnotation && importPageCollections.signatureInkAnnotation.length !== 0) {\n                if (inkObject) {\n                    var annotationObject = JSON.parse(inkObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.signatureInkAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.signatureInkAnnotation, pageIndex);\n                    }\n                }\n            }\n            if (importPageCollections.signatureAnnotation && importPageCollections.signatureAnnotation.length !== 0) {\n                if (signatureObject) {\n                    var annotationObject = JSON.parse(inkObject);\n                    if (annotationObject) {\n                        // eslint-disable-next-line max-len\n                        importPageCollections.signatureAnnotation = this.findImportedAnnotations(annotationObject, importPageCollections.signatureAnnotation, pageIndex);\n                    }\n                }\n            }\n            return importPageCollections;\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.findImportedAnnotations = function (annotationCollection, importAnnotations, pageNumber) {\n        // eslint-disable-next-line\n        var pageCollections = null;\n        for (var a = 0; a < annotationCollection.length; a++) {\n            if (annotationCollection[a].pageIndex === pageNumber) {\n                pageCollections = annotationCollection[a].annotations;\n            }\n        }\n        if (pageCollections) {\n            for (var i = 0; i < pageCollections.length; i++) {\n                for (var j = 0; j < importAnnotations.length; j++) {\n                    if (pageCollections[i].annotName === importAnnotations[j].AnnotName) {\n                        importAnnotations.splice(j, 1);\n                        j = j - 1;\n                    }\n                }\n            }\n        }\n        pageCollections = null;\n        return importAnnotations;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.drawPageAnnotations = function (annotation, pageIndex, isNewlyAdded) {\n        if (isNewlyAdded) {\n            annotation = annotation[pageIndex];\n        }\n        if (annotation) {\n            if (annotation.textMarkupAnnotation && annotation.textMarkupAnnotation.length !== 0) {\n                // eslint-disable-next-line\n                var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n                if (this.isStorageExceed) {\n                    storeObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n                }\n                if (storeObject) {\n                    var annotObject = JSON.parse(storeObject);\n                    if (annotObject) {\n                        // eslint-disable-next-line max-len\n                        annotation.textMarkupAnnotation = this.checkAnnotationCollections(annotObject, annotation.textMarkupAnnotation, pageIndex);\n                    }\n                }\n                annotation.textMarkupAnnotation = this.checkAnnotationCommentsCollections(annotation.textMarkupAnnotation, pageIndex);\n                if (annotation.textMarkupAnnotation.length !== 0) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.renderAnnotations(pageIndex, null, null, annotation.textMarkupAnnotation, null, true);\n                }\n            }\n            if (annotation.shapeAnnotation && annotation.shapeAnnotation.length !== 0) {\n                // eslint-disable-next-line\n                var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n                if (this.isStorageExceed) {\n                    storeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n                }\n                if (storeObject) {\n                    var annotObject = JSON.parse(storeObject);\n                    annotation.shapeAnnotation = this.checkAnnotationCollections(annotObject, annotation.shapeAnnotation, pageIndex);\n                }\n                annotation.shapeAnnotation = this.checkAnnotationCommentsCollections(annotation.shapeAnnotation, pageIndex);\n                if (annotation.shapeAnnotation.length !== 0) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.renderAnnotations(pageIndex, annotation.shapeAnnotation, null, null, null, true);\n                }\n            }\n            if (annotation.measureShapeAnnotation && annotation.measureShapeAnnotation.length !== 0) {\n                // eslint-disable-next-line\n                var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n                if (this.isStorageExceed) {\n                    storeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n                }\n                if (storeObject) {\n                    var annotObject = JSON.parse(storeObject);\n                    // eslint-disable-next-line max-len\n                    annotation.measureShapeAnnotation = this.checkAnnotationCollections(annotObject, annotation.measureShapeAnnotation, pageIndex);\n                }\n                annotation.measureShapeAnnotation = this.checkAnnotationCommentsCollections(annotation.measureShapeAnnotation, pageIndex);\n                if (annotation.measureShapeAnnotation.length !== 0) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.renderAnnotations(pageIndex, null, annotation.measureShapeAnnotation, null, null, true);\n                }\n            }\n            if (annotation.stampAnnotations && annotation.stampAnnotations.length !== 0) {\n                // eslint-disable-next-line\n                var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n                if (this.isStorageExceed) {\n                    storeObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n                }\n                if (storeObject) {\n                    var annotObject = JSON.parse(storeObject);\n                    annotation.stampAnnotations = this.checkAnnotationCollections(annotObject, annotation.stampAnnotations, pageIndex);\n                }\n                annotation.stampAnnotations = this.checkAnnotationCommentsCollections(annotation.stampAnnotations, pageIndex);\n                if (annotation.stampAnnotations.length !== 0) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(annotation.stampAnnotations, pageIndex, null, true);\n                }\n            }\n            if (annotation.stickyNotesAnnotation && annotation.stickyNotesAnnotation.length !== 0) {\n                // eslint-disable-next-line\n                var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n                if (this.isStorageExceed) {\n                    storeObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n                }\n                if (storeObject) {\n                    var annotObject = JSON.parse(storeObject);\n                    // eslint-disable-next-line max-len\n                    annotation.stickyNotesAnnotation = this.checkAnnotationCollections(annotObject, annotation.stickyNotesAnnotation, pageIndex);\n                }\n                annotation.stickyNotesAnnotation = this.checkAnnotationCommentsCollections(annotation.stickyNotesAnnotation, pageIndex);\n                if (annotation.stickyNotesAnnotation.length !== 0) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(annotation.stickyNotesAnnotation, pageIndex);\n                }\n            }\n            if (annotation.freeTextAnnotation && annotation.freeTextAnnotation.length !== 0) {\n                // eslint-disable-next-line\n                var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n                if (this.isStorageExceed) {\n                    storeObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n                }\n                if (storeObject) {\n                    var annotObject = JSON.parse(storeObject);\n                    annotation.freeTextAnnotation = this.checkAnnotationCollections(annotObject, annotation.freeTextAnnotation, pageIndex);\n                }\n                annotation.freeTextAnnotation = this.checkAnnotationCommentsCollections(annotation.freeTextAnnotation, pageIndex);\n                if (annotation.freeTextAnnotation.length !== 0) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(annotation.freeTextAnnotation, pageIndex, true);\n                }\n            }\n            if (annotation.signatureAnnotation && annotation.signatureAnnotation.length !== 0) {\n                // eslint-disable-next-line\n                var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n                var annotObject = JSON.parse(storeObject);\n                if (annotObject) {\n                    annotation.signatureAnnotation = this.checkSignatureCollections(annotObject, annotation.signatureAnnotation, pageIndex);\n                }\n                this.signatureModule.renderExistingSignature(annotation.signatureAnnotation, pageIndex, true);\n            }\n            if (annotation.signatureInkAnnotation && annotation.signatureInkAnnotation.length !== 0) {\n                // eslint-disable-next-line\n                var storeObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n                if (this.isStorageExceed) {\n                    storeObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n                }\n                if (storeObject) {\n                    var annotObject = JSON.parse(storeObject);\n                    // eslint-disable-next-line max-len\n                    annotation.signatureInkAnnotation = this.checkAnnotationCollections(annotObject, annotation.signatureInkAnnotation, pageIndex);\n                }\n                annotation.signatureInkAnnotation = this.checkAnnotationCommentsCollections(annotation.signatureInkAnnotation, pageIndex);\n                if (annotation.signatureInkAnnotation.length !== 0) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(annotation.signatureInkAnnotation, pageIndex, true);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkSignatureCollections = function (annotationCollection, annotation, pageNumber) {\n        // eslint-disable-next-line\n        var pageCollections = null;\n        for (var a = 0; a < annotationCollection.length; a++) {\n            if (annotationCollection[a].pageIndex === pageNumber) {\n                pageCollections = annotationCollection[a].annotations;\n            }\n        }\n        if (pageCollections) {\n            for (var i = 0; i < pageCollections.length; i++) {\n                for (var j = 0; j < annotation.length; j++) {\n                    if (pageCollections[i].signatureName === annotation[j].SignatureName) {\n                        annotation.splice(j, 1);\n                        j = j - 1;\n                    }\n                }\n            }\n        }\n        pageCollections = null;\n        return annotation;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkAnnotationCollections = function (annotationCollection, annotation, pageNumber) {\n        // eslint-disable-next-line\n        var pageCollections = null;\n        for (var a = 0; a < annotationCollection.length; a++) {\n            if (annotationCollection[a].pageIndex === pageNumber) {\n                pageCollections = annotationCollection[a].annotations;\n            }\n        }\n        if (pageCollections) {\n            for (var i = 0; i < pageCollections.length; i++) {\n                for (var j = 0; j < annotation.length; j++) {\n                    if (pageCollections[i].annotName === annotation[j].AnnotName) {\n                        annotation.splice(j, 1);\n                        j = j - 1;\n                    }\n                }\n            }\n        }\n        pageCollections = null;\n        return annotation;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkAnnotationCommentsCollections = function (annotation, pageNumber) {\n        if (this.annotationComments) {\n            // eslint-disable-next-line\n            var annotationCollections = this.annotationComments[pageNumber];\n            annotationCollections = this.selectAnnotationCollections(annotationCollections);\n            if (annotationCollections) {\n                for (var i = 0; i < annotationCollections.length; i++) {\n                    for (var j = 0; j < annotation.length; j++) {\n                        if (annotationCollections[i].AnnotName === annotation[j].AnnotName) {\n                            annotation.splice(j, 1);\n                            j = j - 1;\n                        }\n                    }\n                }\n            }\n            annotationCollections = null;\n        }\n        return annotation;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.selectAnnotationCollections = function (pageAnnotations) {\n        // eslint-disable-next-line\n        var pageCollections = [];\n        if (pageAnnotations) {\n            if (pageAnnotations.textMarkupAnnotation && pageAnnotations.textMarkupAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.textMarkupAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.textMarkupAnnotation[i]);\n                }\n            }\n            if (pageAnnotations.shapeAnnotation && pageAnnotations.shapeAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.shapeAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.shapeAnnotation[i]);\n                }\n            }\n            if (pageAnnotations.measureShapeAnnotation && pageAnnotations.measureShapeAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.measureShapeAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.measureShapeAnnotation[i]);\n                }\n            }\n            if (pageAnnotations.stampAnnotations && pageAnnotations.stampAnnotations.length !== 0) {\n                for (var i = 0; i < pageAnnotations.stampAnnotations.length; i++) {\n                    pageCollections.push(pageAnnotations.stampAnnotations[i]);\n                }\n            }\n            if (pageAnnotations.stickyNotesAnnotation && pageAnnotations.stickyNotesAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.stickyNotesAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.stickyNotesAnnotation[i]);\n                }\n            }\n            if (pageAnnotations.freeTextAnnotation && pageAnnotations.freeTextAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.freeTextAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.freeTextAnnotation[i]);\n                }\n            }\n            if (pageAnnotations.signatureInkAnnotation && pageAnnotations.signatureInkAnnotation.length !== 0) {\n                for (var i = 0; i < pageAnnotations.signatureInkAnnotation.length; i++) {\n                    pageCollections.push(pageAnnotations.signatureInkAnnotation[i]);\n                }\n            }\n        }\n        return pageCollections;\n    };\n    PdfViewerBase.prototype.saveImportedAnnotations = function () {\n        // eslint-disable-next-line\n        var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n        // eslint-disable-next-line\n        var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n        // eslint-disable-next-line\n        var measureShapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n        // eslint-disable-next-line\n        var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n        // eslint-disable-next-line\n        var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n        // eslint-disable-next-line\n        var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n        // eslint-disable-next-line\n        var inkObject = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n        // eslint-disable-next-line\n        var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n        if (this.isStorageExceed) {\n            textMarkupObject = this.annotationStorage[this.documentId + '_annotations_textMarkup'];\n            shapeObject = this.annotationStorage[this.documentId + '_annotations_shape'];\n            measureShapeObject = this.annotationStorage[this.documentId + '_annotations_shape_measure'];\n            stampObject = this.annotationStorage[this.documentId + '_annotations_stamp'];\n            stickyObject = this.annotationStorage[this.documentId + '_annotations_sticky'];\n            freeTextObject = this.annotationStorage[this.documentId + '_annotations_freetext'];\n            inkObject = this.annotationStorage[this.documentId + '_annotations_ink'];\n            signatureObject = this.annotationStorage[this.documentId + '_annotations_sign'];\n        }\n        // eslint-disable-next-line max-len\n        this.downloadCollections = { textMarkupObject: textMarkupObject, shapeObject: shapeObject, measureShapeObject: measureShapeObject, stampObject: stampObject, stickyObject: stickyObject, freeTextObject: freeTextObject, inkObject: inkObject, signatureObject: signatureObject };\n        if (this.documentAnnotationCollections) {\n            for (var i = 0; i < this.pageCount; i++) {\n                if (this.documentAnnotationCollections[i]) {\n                    // eslint-disable-next-line\n                    var pageCollections = cloneObject(this.documentAnnotationCollections[i]);\n                    pageCollections = this.checkDocumentCollectionData(i, pageCollections);\n                    this.savePageAnnotations(pageCollections, i);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.savePageAnnotations = function (annotation, pageIndex) {\n        if (annotation.textMarkupAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.textMarkupAnnotation.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(annotation.textMarkupAnnotation[s], pageIndex);\n            }\n        }\n        if (annotation.shapeAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.shapeAnnotation.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(annotation.shapeAnnotation[s], pageIndex);\n            }\n        }\n        if (annotation.measureShapeAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.measureShapeAnnotation.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(annotation.measureShapeAnnotation[s], pageIndex);\n            }\n        }\n        if (annotation.stampAnnotations.length !== 0) {\n            for (var s = 0; s < annotation.stampAnnotations.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(annotation.stampAnnotations[s], pageIndex);\n            }\n        }\n        if (annotation.stickyNotesAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.stickyNotesAnnotation.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(annotation.stickyNotesAnnotation[s], pageIndex);\n            }\n        }\n        if (annotation.freeTextAnnotation.length !== 0) {\n            for (var s = 0; s < annotation.freeTextAnnotation.length; s++) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(annotation.freeTextAnnotation[s], pageIndex);\n            }\n        }\n    };\n    PdfViewerBase.prototype.updateDocumentAnnotationCollections = function () {\n        window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n        window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n        if (this.downloadCollections) {\n            if (this.isStorageExceed) {\n                this.annotationStorage[this.documentId + '_annotations_textMarkup'] = this.downloadCollections.textMarkupObject;\n                this.annotationStorage[this.documentId + '_annotations_shape'] = this.downloadCollections.shapeObject;\n                this.annotationStorage[this.documentId + '_annotations_shape_measure'] = this.downloadCollections.measureShapeObject;\n                this.annotationStorage[this.documentId + '_annotations_stamp'] = this.downloadCollections.stampObject;\n                this.annotationStorage[this.documentId + '_annotations_sticky'] = this.downloadCollections.stickyObject;\n                this.annotationStorage[this.documentId + '_annotations_freetext'] = this.downloadCollections.freeTextObject;\n                this.annotationStorage[this.documentId + '_annotations_ink'] = this.downloadCollections.inkObject;\n            }\n            else {\n                if (this.downloadCollections.textMarkupObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_textMarkup', this.downloadCollections.textMarkupObject);\n                }\n                if (this.downloadCollections.shapeObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_shape', this.downloadCollections.shapeObject);\n                }\n                if (this.downloadCollections.measureShapeObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_shape_measure', this.downloadCollections.measureShapeObject);\n                }\n                if (this.downloadCollections.stampObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_stamp', this.downloadCollections.stampObject);\n                }\n                if (this.downloadCollections.stickyObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_sticky', this.downloadCollections.stickyObject);\n                }\n                if (this.downloadCollections.freeTextObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_freetext', this.downloadCollections.freeTextObject);\n                }\n                if (this.downloadCollections.inkObject) {\n                    window.sessionStorage.setItem(this.documentId + '_annotations_ink', this.downloadCollections.inkObject);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createAnnotationJsonData = function () {\n        // eslint-disable-next-line\n        var annotationCollection = {};\n        var textMarkupAnnotationCollection;\n        var shapeAnnotations;\n        var calibrateAnnotations;\n        var stampAnnotationCollection;\n        var stickyAnnotationCollection;\n        var freeTextAnnotationCollection;\n        var signaturCollection;\n        var signaturInkCollection;\n        this.saveImportedAnnotations();\n        if (this.isTextMarkupAnnotationModule()) {\n            this.isJsonExported = true;\n            // eslint-disable-next-line max-len\n            textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n        }\n        if (this.isShapeAnnotationModule()) {\n            this.isJsonExported = true;\n            // eslint-disable-next-line max-len\n            shapeAnnotations = this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();\n        }\n        if (this.isCalibrateAnnotationModule()) {\n            this.isJsonExported = true;\n            // eslint-disable-next-line max-len\n            calibrateAnnotations = this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();\n        }\n        if (this.isStampAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            stampAnnotationCollection = this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();\n        }\n        if (this.isCommentAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            stickyAnnotationCollection = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();\n        }\n        if (this.isFreeTextAnnotationModule()) {\n            // eslint-disable-next-line max-len\n            freeTextAnnotationCollection = this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();\n        }\n        if (this.isInkAnnotationModule()) {\n            // eslint-disable-next-line\n            signaturInkCollection = this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();\n        }\n        if (this.pdfViewer.isSignatureEditable) {\n            // eslint-disable-next-line\n            signaturCollection = this.signatureModule.saveSignature();\n        }\n        else {\n            // eslint-disable-next-line\n            var annotations = new Array();\n            for (var j = 0; j < this.pageCount; j++) {\n                annotations[j] = [];\n            }\n            signaturCollection = JSON.stringify(annotations);\n        }\n        for (var s = 0; s < this.pageCount; s++) {\n            // eslint-disable-next-line max-len\n            var annotation = {\n                textMarkupAnnotation: JSON.parse(textMarkupAnnotationCollection)[s], shapeAnnotation: JSON.parse(shapeAnnotations)[s],\n                measureShapeAnnotation: JSON.parse(calibrateAnnotations)[s], stampAnnotations: JSON.parse(stampAnnotationCollection)[s],\n                // eslint-disable-next-line max-len\n                stickyNotesAnnotation: JSON.parse(stickyAnnotationCollection)[s], freeTextAnnotation: JSON.parse(freeTextAnnotationCollection)[s], signatureAnnotation: JSON.parse(signaturCollection)[s], signatureInkAnnotation: JSON.parse(signaturInkCollection)[s]\n            };\n            annotationCollection[s] = annotation;\n        }\n        return JSON.stringify(annotationCollection);\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.combineImportedData = function (excistingImportAnnotation, newlyImportAnnotation) {\n        for (var i = 0; i < this.pageCount; i++) {\n            if (newlyImportAnnotation[i]) {\n                if (excistingImportAnnotation[i]) {\n                    if (newlyImportAnnotation[i].textMarkupAnnotation && newlyImportAnnotation[i].textMarkupAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[i].textMarkupAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[i].textMarkupAnnotation = this.checkImportedData(excistingImportAnnotation[i].textMarkupAnnotation, newlyImportAnnotation[i].textMarkupAnnotation, i);\n                            if (newlyImportAnnotation[i].textMarkupAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[i].textMarkupAnnotation = excistingImportAnnotation[i].textMarkupAnnotation.concat(newlyImportAnnotation[i].textMarkupAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[i].textMarkupAnnotation = newlyImportAnnotation[i].textMarkupAnnotation;\n                        }\n                    }\n                    if (newlyImportAnnotation[i].shapeAnnotation && newlyImportAnnotation[i].shapeAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[i].shapeAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[i].shapeAnnotation = this.checkImportedData(excistingImportAnnotation[i].shapeAnnotation, newlyImportAnnotation[i].shapeAnnotation, i);\n                            if (newlyImportAnnotation[i].shapeAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[i].shapeAnnotation = excistingImportAnnotation[i].shapeAnnotation.concat(newlyImportAnnotation[i].shapeAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[i].shapeAnnotation = newlyImportAnnotation[i].shapeAnnotation;\n                        }\n                    }\n                    if (newlyImportAnnotation[i].measureShapeAnnotation && newlyImportAnnotation[i].measureShapeAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[i].measureShapeAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[i].measureShapeAnnotation = this.checkImportedData(excistingImportAnnotation[i].measureShapeAnnotation, newlyImportAnnotation[i].measureShapeAnnotation, i);\n                            if (newlyImportAnnotation[i].measureShapeAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[i].measureShapeAnnotation = excistingImportAnnotation[i].measureShapeAnnotation.concat(newlyImportAnnotation[i].measureShapeAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[i].measureShapeAnnotation = newlyImportAnnotation[i].measureShapeAnnotation;\n                        }\n                    }\n                    if (newlyImportAnnotation[i].stampAnnotations && newlyImportAnnotation[i].stampAnnotations.length !== 0) {\n                        if (excistingImportAnnotation[i].stampAnnotations) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[i].stampAnnotations = this.checkImportedData(excistingImportAnnotation[i].stampAnnotations, newlyImportAnnotation[i].stampAnnotations, i);\n                            if (newlyImportAnnotation[i].stampAnnotations.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[i].stampAnnotations = excistingImportAnnotation[i].stampAnnotations.concat(newlyImportAnnotation[i].stampAnnotations);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[i].stampAnnotations = newlyImportAnnotation[i].stampAnnotations;\n                        }\n                    }\n                    if (newlyImportAnnotation[i].stickyNotesAnnotation && newlyImportAnnotation[i].stickyNotesAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[i].stickyNotesAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[i].stickyNotesAnnotation = this.checkImportedData(excistingImportAnnotation[i].stickyNotesAnnotation, newlyImportAnnotation[i].stickyNotesAnnotation, i);\n                            if (newlyImportAnnotation[i].stickyNotesAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[i].stickyNotesAnnotation = excistingImportAnnotation[i].stickyNotesAnnotation.concat(newlyImportAnnotation[i].stickyNotesAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[i].stickyNotesAnnotation = newlyImportAnnotation[i].stickyNotesAnnotation;\n                        }\n                    }\n                    if (newlyImportAnnotation[i].freeTextAnnotation && newlyImportAnnotation[i].freeTextAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[i].freeTextAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[i].freeTextAnnotation = this.checkImportedData(excistingImportAnnotation[i].freeTextAnnotation, newlyImportAnnotation[i].freeTextAnnotation, i);\n                            if (newlyImportAnnotation[i].freeTextAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[i].freeTextAnnotation = excistingImportAnnotation[i].freeTextAnnotation.concat(newlyImportAnnotation[i].freeTextAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[i].freeTextAnnotation = newlyImportAnnotation[i].freeTextAnnotation;\n                        }\n                    }\n                    if (newlyImportAnnotation[i].signatureInkAnnotation && newlyImportAnnotation[i].signatureInkAnnotation.length !== 0) {\n                        if (excistingImportAnnotation[i].signatureInkAnnotation) {\n                            // eslint-disable-next-line max-len\n                            newlyImportAnnotation[i].signatureInkAnnotation = this.checkImportedData(excistingImportAnnotation[i].signatureInkAnnotation, newlyImportAnnotation[i].signatureInkAnnotation, i);\n                            if (newlyImportAnnotation[i].signatureInkAnnotation.length !== 0) {\n                                // eslint-disable-next-line max-len\n                                excistingImportAnnotation[i].signatureInkAnnotation = excistingImportAnnotation[i].signatureInkAnnotation.concat(newlyImportAnnotation[i].signatureInkAnnotation);\n                            }\n                        }\n                        else {\n                            excistingImportAnnotation[i].signatureInkAnnotation = newlyImportAnnotation[i].signatureInkAnnotation;\n                        }\n                    }\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    var annotation = {\n                        // eslint-disable-next-line max-len\n                        textMarkupAnnotation: newlyImportAnnotation[i].textMarkupAnnotation, shapeAnnotation: newlyImportAnnotation[i].shapeAnnotation,\n                        // eslint-disable-next-line max-len\n                        measureShapeAnnotation: newlyImportAnnotation[i].measureShapeAnnotation, stampAnnotations: newlyImportAnnotation[i].stampAnnotations,\n                        // eslint-disable-next-line max-len\n                        stickyNotesAnnotation: newlyImportAnnotation[i].stickyNotesAnnotation, freeTextAnnotation: newlyImportAnnotation[i].freeTextAnnotation,\n                        signatureInkAnnotation: newlyImportAnnotation[i].signatureInkAnnotation\n                    };\n                    excistingImportAnnotation[i] = annotation;\n                }\n            }\n        }\n        return excistingImportAnnotation;\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns true or false.\n     */\n    PdfViewerBase.prototype.updateExportItem = function () {\n        // eslint-disable-next-line\n        var shapeObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape');\n        // eslint-disable-next-line\n        var measureObject = window.sessionStorage.getItem(this.documentId + '_annotations_shape_measure');\n        // eslint-disable-next-line\n        var stampObject = window.sessionStorage.getItem(this.documentId + '_annotations_stamp');\n        // eslint-disable-next-line\n        var stickyObject = window.sessionStorage.getItem(this.documentId + '_annotations_sticky');\n        // eslint-disable-next-line\n        var textMarkupObject = window.sessionStorage.getItem(this.documentId + '_annotations_textMarkup');\n        // eslint-disable-next-line\n        var freeTextObject = window.sessionStorage.getItem(this.documentId + '_annotations_freetext');\n        var isSignatureEditable = false;\n        // eslint-disable-next-line\n        var inkAnnotationObjct = window.sessionStorage.getItem(this.documentId + '_annotations_ink');\n        if (this.pdfViewer.isSignatureEditable) {\n            // eslint-disable-next-line\n            var signatureObject = window.sessionStorage.getItem(this.documentId + '_annotations_sign');\n            if (signatureObject) {\n                isSignatureEditable = true;\n            }\n        }\n        // eslint-disable-next-line max-len\n        if (shapeObject || measureObject || stampObject || stickyObject || textMarkupObject || freeTextObject || this.isImportAction || this.isStorageExceed || isSignatureEditable || inkAnnotationObjct) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.isFreeTextAnnotation = function (annotations) {\n        var resut = false;\n        if (annotations && annotations.length > 0) {\n            resut = annotations.some(function (s) { return s.shapeAnnotationType === 'FreeText' && s.subject === 'Text Box'; });\n        }\n        return resut;\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkImportedData = function (existingCollection, newCollection, pageIndex) {\n        for (var i = 0; i < existingCollection.length; i++) {\n            for (var j = 0; j < newCollection.length; j++) {\n                if (existingCollection[i].AnnotName === newCollection[j].AnnotName) {\n                    newCollection.splice(j, 1);\n                    j = j - 1;\n                }\n            }\n        }\n        if (this.annotationComments) {\n            // eslint-disable-next-line\n            var annotationCollections = this.annotationComments[pageIndex];\n            annotationCollections = this.selectAnnotationCollections(annotationCollections);\n            if (annotationCollections) {\n                for (var i = 0; i < annotationCollections.length; i++) {\n                    for (var j = 0; j < newCollection.length; j++) {\n                        if (annotationCollections[i].AnnotName === newCollection[j].AnnotName) {\n                            newCollection.splice(j, 1);\n                            j = j - 1;\n                        }\n                    }\n                }\n            }\n        }\n        return newCollection;\n    };\n    /**\n     * @param points\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.checkAnnotationWidth = function (points) {\n        var width = 0;\n        var height = 0;\n        var minWidth;\n        var maxWidth;\n        var minHeight;\n        var maxHeight;\n        for (var i = 0; i < points.length; i++) {\n            if (!minWidth) {\n                minWidth = points[i].x;\n                maxWidth = points[i].x;\n                minHeight = points[i].y;\n                maxHeight = points[i].y;\n            }\n            else {\n                if (minWidth > points[i].x) {\n                    minWidth = points[i].x;\n                }\n                else if (maxWidth < points[i].x) {\n                    maxWidth = points[i].x;\n                }\n                if (minHeight > points[i].y) {\n                    minHeight = points[i].y;\n                }\n                else if (maxHeight < points[i].y) {\n                    maxHeight = points[i].y;\n                }\n            }\n        }\n        width = maxWidth - minWidth;\n        height = maxHeight - minHeight;\n        return { width: width, height: height };\n    };\n    PdfViewerBase.prototype.deleteAnnotations = function () {\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotations = [];\n            this.pdfViewer.zIndexTable = [];\n            this.pdfViewer.annotationCollection = [];\n            this.pdfViewer.signatureCollection = [];\n            // eslint-disable-next-line\n            var annotationCollection = this.createAnnotationsCollection();\n            this.annotationComments = annotationCollection;\n            this.documentAnnotationCollections = annotationCollection;\n            this.annotationRenderredList = [];\n            window.sessionStorage.removeItem(this.documentId + '_annotations_shape');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_shape_measure');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_stamp');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_sticky');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_textMarkup');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_freetext');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_sign');\n            window.sessionStorage.removeItem(this.documentId + '_annotations_ink');\n            for (var i = 0; i < this.pageCount; i++) {\n                this.pdfViewer.annotationModule.renderAnnotations(i, null, null, null);\n                this.pdfViewer.renderDrawing(undefined, i);\n                this.pdfViewer.clearSelection(i);\n                var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + (i + 1));\n                if (accordionContent) {\n                    accordionContent.remove();\n                }\n                // eslint-disable-next-line max-len\n                var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n                if (accordionContentContainer) {\n                    if (accordionContentContainer.childElementCount === 0) {\n                        accordionContentContainer.style.display = 'none';\n                        if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n                            // eslint-disable-next-line max-len\n                            this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false);\n                            document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'block';\n                        }\n                    }\n                }\n            }\n            this.isImportedAnnotation = false;\n            this.isImportAction = false;\n            this.importedAnnotation = [];\n            this.annotationPageList = [];\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers = [];\n            this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber = [];\n            this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex = [];\n            this.isAnnotationCollectionRemoved = true;\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param isObject\n     * @param pageNumber\n     * @param isObject\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.createAnnotationsCollection = function (pageNumber, isObject) {\n        // eslint-disable-next-line\n        var annotationCollectionList = [];\n        if (!isObject) {\n            for (var i = 0; i < this.pageCount; i++) {\n                var annotation = {\n                    // eslint-disable-next-line max-len\n                    textMarkupAnnotation: [], shapeAnnotation: [], measureShapeAnnotation: [], stampAnnotations: [], stickyNotesAnnotation: [], freeTextAnnotation: [], signatureAnnotation: [], signatureInkAnnotation: []\n                };\n                annotationCollectionList.push(annotation);\n            }\n        }\n        else {\n            annotationCollectionList = {};\n            var annotation = {\n                // eslint-disable-next-line max-len\n                textMarkupAnnotation: [], shapeAnnotation: [], measureShapeAnnotation: [], stampAnnotations: [], stickyNotesAnnotation: [], freeTextAnnotation: [], signatureAnnotation: [], signatureInkAnnotation: []\n            };\n            annotationCollectionList[pageNumber] = annotation;\n        }\n        return annotationCollectionList;\n    };\n    /**\n     * @param importAnnotation\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.addAnnotation = function (importAnnotation) {\n        // eslint-disable-next-line\n        var pdfAnnotation = {};\n        // eslint-disable-next-line\n        var documentCollections;\n        if (importAnnotation) {\n            var isAnnotationObject = false;\n            var annotationCount = 1;\n            if (importAnnotation.shapeAnnotationType || importAnnotation.author) {\n                isAnnotationObject = true;\n                documentCollections = this.createAnnotationsCollection(importAnnotation.pageNumber, true);\n            }\n            else {\n                if (importAnnotation.length) {\n                    annotationCount = importAnnotation.length;\n                    documentCollections = this.createAnnotationsCollection();\n                }\n                else {\n                    isAnnotationObject = true;\n                    documentCollections = this.createAnnotationsCollection(importAnnotation.pageNumber, true);\n                }\n            }\n            for (var a = 0; a < annotationCount; a++) {\n                // eslint-disable-next-line\n                var annotation = void 0;\n                if (isAnnotationObject) {\n                    annotation = importAnnotation;\n                }\n                else {\n                    annotation = importAnnotation[a];\n                }\n                // eslint-disable-next-line\n                var newAnnotation = {};\n                newAnnotation.ShapeAnnotationType = annotation.shapeAnnotationType;\n                newAnnotation.AnnotationAddMode = annotation.annotationAddMode;\n                newAnnotation.Author = annotation.author;\n                newAnnotation.AnnotationSelectorSettings = annotation.annotationSelectorSettings;\n                newAnnotation.AnnotationSettings = annotation.annotationSettings;\n                newAnnotation.PageNumber = annotation.pageNumber;\n                newAnnotation.ModifiedDate = annotation.modifiedDate;\n                newAnnotation.Subject = annotation.subject;\n                newAnnotation.Note = annotation.note;\n                newAnnotation.AnnotName = annotation.annotationId;\n                newAnnotation.IsCommentLock = annotation.isCommentLock;\n                newAnnotation.Comments = annotation.comments;\n                if (annotation.comments && annotation.comments.length > 0) {\n                    // eslint-disable-next-line\n                    var comments = [];\n                    for (var i = 0; i < annotation.comments.length; i++) {\n                        comments.push(this.updateComments(annotation, annotation.comments[i]));\n                    }\n                    newAnnotation.Comments = comments;\n                }\n                if (annotation.review) {\n                    newAnnotation.State = annotation.review.state;\n                    newAnnotation.StateModel = annotation.review.stateModel;\n                }\n                newAnnotation.CustomData = annotation.customData;\n                newAnnotation.Opacity = annotation.opacity;\n                if (annotation.shapeAnnotationType === 'textMarkup') {\n                    newAnnotation.AnnotType = 'textMarkup';\n                    newAnnotation.Color = annotation.color;\n                    newAnnotation.IsMultiSelect = annotation.isMultiSelect;\n                    newAnnotation.TextMarkupAnnotationType = annotation.textMarkupAnnotationType;\n                    newAnnotation.TextMarkupContent = annotation.textMarkupContent;\n                    newAnnotation.TextMarkupStartIndex = annotation.textMarkupStartIndex;\n                    newAnnotation.TextMarkupEndIndex = annotation.textMarkupEndIndex;\n                    if (annotation.rect) {\n                        newAnnotation.Rect = this.convertBounds(annotation.rect, true);\n                    }\n                    if (annotation.bounds && annotation.bounds.length >= 1) {\n                        // eslint-disable-next-line\n                        var bounds = new Array();\n                        for (var i = 0; i < annotation.bounds.length; i++) {\n                            bounds.push(this.convertBounds(annotation.bounds[i]));\n                        }\n                        newAnnotation.Bounds = bounds;\n                    }\n                    documentCollections[annotation.pageNumber].textMarkupAnnotation.push(newAnnotation);\n                }\n                else if (annotation.shapeAnnotationType === 'sticky') {\n                    newAnnotation.AnnotType = 'sticky';\n                    newAnnotation.Icon = 'Comment';\n                    newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n                    newAnnotation.StrokeColor = annotation.strokeColor;\n                    newAnnotation.Color = annotation.color;\n                    documentCollections[annotation.pageNumber].stickyNotesAnnotation.push(newAnnotation);\n                }\n                else if (annotation.shapeAnnotationType === 'FreeText') {\n                    newAnnotation.AnnotType = 'freeText';\n                    newAnnotation.Name = annotation.annotationId;\n                    newAnnotation.MarkupText = annotation.dynamicText;\n                    newAnnotation.Text = annotation.dynamicText;\n                    newAnnotation.Note = annotation.dynamicText;\n                    newAnnotation.TextAlign = annotation.textAlign;\n                    newAnnotation.Thickness = annotation.thicknes;\n                    newAnnotation.StrokeColor = annotation.strokeColor;\n                    newAnnotation.FillColor = annotation.fillColor;\n                    newAnnotation.FontColor = annotation.fontColor;\n                    newAnnotation.FontSize = annotation.fontSize;\n                    newAnnotation.FontFamily = annotation.fontFamily;\n                    newAnnotation.Rotate = annotation.rotateAngle;\n                    newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n                    // eslint-disable-next-line max-len\n                    newAnnotation.Font = { 'Name': annotation.fontFamily, 'Size': annotation.fontSize, 'Bold': annotation.font.isBold, 'Italic': annotation.font.isItalic, 'Strikeout': annotation.font.isStrikeout, 'Underline': annotation.font.isUnderline };\n                    documentCollections[annotation.pageNumber].freeTextAnnotation.push(newAnnotation);\n                }\n                else if (annotation.shapeAnnotationType === 'stamp') {\n                    newAnnotation.AnnotType = 'stamp';\n                    newAnnotation.Icon = annotation.icon;\n                    newAnnotation.isDynamic = false;\n                    newAnnotation.Rect = this.convertBounds(annotation.bounds, false, true);\n                    newAnnotation.RotateAngle = annotation.rotateAngle;\n                    newAnnotation.FillColor = annotation.fillColor;\n                    newAnnotation.StrokeColor = annotation.strokeColor;\n                    newAnnotation.StampAnnotationType = annotation.stampAnnotationType;\n                    newAnnotation.CreationDate = annotation.creationDate;\n                    if (annotation.stampAnnotationType === 'image') {\n                        // eslint-disable-next-line\n                        var apperarance = [];\n                        // eslint-disable-next-line\n                        var imageData = { 'imagedata': annotation.stampAnnotationPath };\n                        apperarance.push(imageData);\n                        newAnnotation.Apperarance = apperarance;\n                    }\n                    if (annotation.isDynamicStamp) {\n                        newAnnotation.IsDynamic = true;\n                        newAnnotation.StrokeColor = annotation.stampFillcolor;\n                        // eslint-disable-next-line\n                        var apperarance = [];\n                        // eslint-disable-next-line\n                        var imageData = { 'type': 'string', 'text': annotation.dynamicText, 'currentFontname': '95b303ab-d397-438a-83af-e2ff8a9900f1', 'baseFontName': 'Helvetica-BoldOblique', 'fontSize': 10, 'isImport': true };\n                        apperarance.push(imageData);\n                        newAnnotation.Apperarance = apperarance;\n                    }\n                    documentCollections[annotation.pageNumber].stampAnnotations.push(newAnnotation);\n                }\n                else if (annotation.shapeAnnotationType === 'Ink' || annotation.shapeAnnotationType === 'Signature') {\n                    newAnnotation.StrokeColor = annotation.strokeColor;\n                    newAnnotation.FillColor = annotation.fillColor;\n                    newAnnotation.Thickness = annotation.thickness;\n                    newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n                    newAnnotation.PathData = annotation.data;\n                    newAnnotation.pageIndex = annotation.pageNumber;\n                    if (annotation.shapeAnnotationType === 'Ink') {\n                        newAnnotation.AnnotType = 'Ink';\n                        newAnnotation.IsPathData = true;\n                        documentCollections[annotation.pageNumber].signatureInkAnnotation.push(newAnnotation);\n                    }\n                    if (annotation.shapeAnnotationType === 'Signature') {\n                        newAnnotation.AnnotType = 'Signature';\n                        newAnnotation.SignatureName = annotation.annotationId;\n                        newAnnotation.IsSignature = true;\n                        documentCollections[annotation.pageNumber].signatureAnnotation.push(newAnnotation);\n                    }\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    if (annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'LineWidthArrowHead' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Polygon' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Oval' || annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Ellipse') {\n                        newAnnotation.AnnotType = 'shape';\n                        newAnnotation.StrokeColor = annotation.strokeColor;\n                        newAnnotation.FillColor = annotation.fillColor;\n                        newAnnotation.Thickness = annotation.thickness;\n                        newAnnotation.BorderStyle = annotation.borderStyle;\n                        newAnnotation.BorderDashArray = annotation.borderDashArray;\n                        newAnnotation.RotateAngle = annotation.rotateAngle;\n                        newAnnotation.IsCloudShape = annotation.isCloudShape;\n                        newAnnotation.CloudIntensity = annotation.cloudIntensity;\n                        newAnnotation.RectangleDifference = annotation.rectangleDifference;\n                        newAnnotation.LineHeadStart = annotation.lineHeadStart;\n                        newAnnotation.LineHeadEnd = annotation.lineHeadEnd;\n                        newAnnotation.IsLocked = annotation.isLocked;\n                        newAnnotation.EnableShapeLabel = annotation.enableShapeLabel;\n                        newAnnotation.LabelContent = annotation.labelContent;\n                        newAnnotation.LabelFillColor = annotation.labelFillColor;\n                        newAnnotation.LabelBorderColor = annotation.labelBorderColor;\n                        newAnnotation.FontColor = annotation.fontColor;\n                        newAnnotation.FontSize = annotation.fontSize;\n                        newAnnotation.LabelBounds = this.convertBounds(annotation.labelBounds);\n                        newAnnotation.LabelSettings = annotation.labelSettings;\n                        newAnnotation.Bounds = this.convertBounds(annotation.bounds);\n                        newAnnotation.LeaderLength = annotation.leaderLength;\n                        newAnnotation.LeaderLineExtenstion = annotation.leaderLineExtension;\n                        if (annotation.vertexPoints && annotation.vertexPoints.length >= 1) {\n                            // eslint-disable-next-line\n                            var points = new Array();\n                            for (var i = 0; i < annotation.vertexPoints.length; i++) {\n                                points.push(this.convertVertexPoints(annotation.vertexPoints[i]));\n                            }\n                            newAnnotation.VertexPoints = points;\n                        }\n                        newAnnotation.EnableShapeLabel = annotation.enableShapeLabel;\n                        // eslint-disable-next-line max-len\n                        if (annotation.subject === 'Distance calculation' || annotation.subject === 'Perimeter calculation' || annotation.subject === 'Area calculation' || annotation.subject === 'Radius calculation' || annotation.subject === 'Volume calculation') {\n                            newAnnotation.AnnotType = 'shape_measure';\n                            // eslint-disable-next-line\n                            var calibrate = annotation.calibrate;\n                            if (calibrate) {\n                                // eslint-disable-next-line\n                                newAnnotation.Calibrate = {\n                                    'Ratio': calibrate.ratio, 'X': [{ 'Unit': calibrate.x[0].unit, 'ConversionFactor': calibrate.x[0].conversionFactor, 'FractionalType': calibrate.x[0].fractionalType, 'Denominator': calibrate.x[0].denominator, 'FormatDenominator': calibrate.x[0].formatDenominator }],\n                                    // eslint-disable-next-line\n                                    'Distance': [{ 'Unit': calibrate.distance[0].unit, 'ConversionFactor': calibrate.distance[0].conversionFactor, 'FractionalType': calibrate.distance[0].fractionalType, 'Denominator': calibrate.distance[0].denominator, 'FormatDenominator': calibrate.distance[0].formatDenominator }],\n                                    // eslint-disable-next-line\n                                    'Area': [{ 'Unit': calibrate.area[0].unit, 'ConversionFactor': calibrate.area[0].conversionFactor, 'FractionalType': calibrate.area[0].fractionalType, 'Denominator': calibrate.area[0].denominator, 'FormatDenominator': calibrate.area[0].formatDenominator }],\n                                    // eslint-disable-next-line\n                                    'Angle': null, 'Volume': null, 'TargetUnitConversion': calibrate.targetUnitConversion, 'Depth': calibrate.depth\n                                };\n                            }\n                            newAnnotation.Indent = annotation.indent;\n                            newAnnotation.Caption = annotation.caption;\n                            newAnnotation.CaptionPosition = annotation.captionPosition;\n                            newAnnotation.LeaderLineExtension = annotation.leaderLineExtension;\n                            newAnnotation.LeaderLength = annotation.leaderLength;\n                            newAnnotation.LeaderLineOffset = annotation.leaderLineOffset;\n                            documentCollections[annotation.pageNumber].measureShapeAnnotation.push(newAnnotation);\n                        }\n                        else {\n                            documentCollections[annotation.pageNumber].shapeAnnotation.push(newAnnotation);\n                        }\n                    }\n                }\n            }\n            pdfAnnotation.pdfAnnotation = documentCollections;\n            this.pdfViewer.importAnnotation(pdfAnnotation);\n        }\n    };\n    /**\n     * @param bounds\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.convertBounds = function (bounds, isRect, isStamp) {\n        if (bounds) {\n            if (isRect) {\n                var left = bounds.left ? bounds.left : bounds.Left ? bounds.Left : 0;\n                var right = bounds.right ? bounds.right : bounds.Right ? bounds.Right : 0;\n                var bottom = bounds.bottom ? bounds.bottom : bounds.Bottom ? bounds.Bottom : 0;\n                var top_5 = bounds.top ? bounds.top : bounds.Top ? bounds.Top : 0;\n                return { left: left, right: right, bottom: bottom, top: top_5 };\n            }\n            else {\n                var x = bounds.x ? bounds.x : bounds.left ? bounds.left : bounds.Left ? bounds.Left : 0;\n                var y = bounds.y ? bounds.y : bounds.top ? bounds.top : bounds.Top ? bounds.Top : 0;\n                var width = bounds.width ? bounds.width : bounds.Width ? bounds.Width : 0;\n                var height = bounds.height ? bounds.height : bounds.Height ? bounds.Height : 0;\n                if (isStamp) {\n                    return { X: this.ConvertPixelToPoint(x), Y: this.ConvertPixelToPoint(y), Left: this.ConvertPixelToPoint(x), Top: this.ConvertPixelToPoint(y), Height: this.ConvertPixelToPoint(height), Width: this.ConvertPixelToPoint(width) };\n                }\n                else {\n                    return { X: x, Y: y, Left: x, Top: y, Height: height, Width: width };\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.ConvertPixelToPoint = function (number) {\n        return (number * (72 / 96));\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.convertVertexPoints = function (points) {\n        if (points) {\n            var x = points.x ? points.x : points.X ? points.X : 0;\n            var y = points.y ? points.y : points.Y ? points.Y : 0;\n            return { X: x, Y: y, Left: x, Top: y };\n        }\n    };\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateComments = function (annotation, comments) {\n        if (annotation && comments) {\n            // eslint-disable-next-line\n            var newAnnotation = {};\n            newAnnotation.ShapeAnnotationType = annotation.shapeAnnotationType;\n            newAnnotation.Author = comments.author;\n            newAnnotation.AnnotationSelectorSettings = annotation.annotationSelectorSettings;\n            newAnnotation.AnnotationSettings = annotation.annotationSettings;\n            newAnnotation.PageNumber = annotation.pageNumber;\n            newAnnotation.ModifiedDate = comments.modifiedDate;\n            newAnnotation.Subject = annotation.subject;\n            newAnnotation.Note = comments.note;\n            newAnnotation.AnnotName = comments.annotName;\n            newAnnotation.Comments = comments.comments;\n            newAnnotation.State = comments.review.state;\n            newAnnotation.StateModel = comments.review.stateModel;\n            newAnnotation.CustomData = annotation.customData;\n            newAnnotation.IsLock = comments.isLock;\n            return newAnnotation;\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.removeFocus = function () {\n        if (isBlazor()) {\n            // eslint-disable-next-line\n            var currentPageContainer = this.pdfViewer.element.querySelector('#' + this.pdfViewer.element.id + '_totalPage');\n            // eslint-disable-next-line max-len\n            if (currentPageContainer && currentPageContainer.firstElementChild && currentPageContainer.firstElementChild.firstElementChild) {\n                currentPageContainer.firstElementChild.firstElementChild.blur();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    PdfViewerBase.prototype.updateDocumentEditedProperty = function (isEdited) {\n        this.pdfViewer.allowServerDataBinding = true;\n        this.pdfViewer.isDocumentEdited = isEdited;\n        this.pdfViewer.allowServerDataBinding = false;\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.getWindowDevicePixelRatio = function () {\n        var devicePixelRatio = window.devicePixelRatio;\n        if (!Browser.isDevice) {\n            return devicePixelRatio;\n        }\n        else {\n            return devicePixelRatio = 2;\n        }\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.getZoomRatio = function (zoom) {\n        var zoomFactor = this.getZoomFactor();\n        var zoomValue = zoom ? zoom : 1;\n        var ratio;\n        var devicePixelRatio = this.getWindowDevicePixelRatio();\n        if (!Browser.isDevice || (Browser.isDevice && zoomFactor <= 0.7)) {\n            ratio = zoomValue * devicePixelRatio;\n        }\n        else {\n            ratio = zoomValue;\n        }\n        return ratio;\n    };\n    /**\n    * @private\n    */\n    PdfViewerBase.prototype.importJsonForRotatedDocuments = function (Rotate, pageNumber, bounds, originalRotation) {\n        // eslint-disable-next-line\n        var rotateAngle = Math.abs(Rotate);\n        var pageDetails = this.pageSize[pageNumber];\n        //originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;\n        if (originalRotation !== pageDetails.rotation) {\n            rotateAngle = this.getRotationAngle(originalRotation, pageNumber);\n            this.isPageRotated = true;\n        }\n        else {\n            rotateAngle = 0;\n            this.isPageRotated = false;\n        }\n        if (rotateAngle === 1) {\n            return { X: pageDetails.width - bounds.Y - bounds.Height, Y: bounds.X, Height: bounds.Width, Width: bounds.Height };\n        }\n        else if (rotateAngle === 2) {\n            return { X: pageDetails.width - bounds.X - bounds.Width, Y: pageDetails.height - bounds.Y - bounds.Height, Height: bounds.Height, Width: bounds.Width };\n        }\n        else if (rotateAngle === 3) {\n            return { X: bounds.Y, Y: pageDetails.height - bounds.X - bounds.Width, Height: bounds.Width, Width: bounds.Height };\n        }\n        else {\n            return bounds;\n        }\n    };\n    PdfViewerBase.prototype.getRotationAngle = function (originalRotation, pageNumber) {\n        var pageDetails = this.pageSize[pageNumber];\n        originalRotation = Math.abs(originalRotation);\n        var rotateAngle;\n        if (originalRotation === 0) {\n            return rotateAngle = pageDetails.rotation;\n        }\n        else if (originalRotation === 1 || originalRotation === 90) {\n            if (pageDetails.rotation == 0) {\n                return rotateAngle = 3;\n            }\n            else if (pageDetails.rotation === 2) {\n                return rotateAngle = 1;\n            }\n            else if (pageDetails.rotation === 3) {\n                return rotateAngle = 2;\n            }\n        }\n        else if (originalRotation === 2 || originalRotation === 180) {\n            if (pageDetails.rotation == 0) {\n                return rotateAngle = 2;\n            }\n            else if (pageDetails.rotation === 1) {\n                return rotateAngle = 3;\n            }\n            else if (pageDetails.rotation === 3) {\n                return rotateAngle = 1;\n            }\n        }\n        else if (originalRotation === 3 || originalRotation === 270) {\n            if (pageDetails.rotation == 0) {\n                return rotateAngle = 1;\n            }\n            else if (pageDetails.rotation === 2) {\n                return rotateAngle = 3;\n            }\n            else if (pageDetails.rotation === 1) {\n                return rotateAngle = 2;\n            }\n        }\n    };\n    /**\n   * @private\n   */\n    PdfViewerBase.prototype.calculateVertexPoints = function (Rotate, pageNumber, vertexPoints, originalRotation) {\n        // eslint-disable-next-line\n        var rotateAngle = Math.abs(Rotate);\n        var vPoints = [];\n        var pageDetails = this.pageSize[pageNumber];\n        var x;\n        var y;\n        var point;\n        //originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;\n        if (originalRotation !== pageDetails.rotation) {\n            rotateAngle = this.getRotationAngle(originalRotation, pageNumber);\n        }\n        else {\n            rotateAngle = 0;\n        }\n        for (var j = 0; j < vertexPoints.length; j++) {\n            if (rotateAngle === 1) {\n                x = vertexPoints[j].Y ? pageDetails.width - vertexPoints[j].Y : pageDetails.width - vertexPoints[j].y;\n                y = vertexPoints[j].X ? vertexPoints[j].X : vertexPoints[j].x;\n                point = { x: x, y: y };\n                vPoints.push(point);\n            }\n            else if (rotateAngle === 2) {\n                x = vertexPoints[j].X ? pageDetails.width - vertexPoints[j].X : pageDetails.width - vertexPoints[j].x;\n                y = vertexPoints[j].Y ? pageDetails.height - vertexPoints[j].Y : pageDetails.height - vertexPoints[j].y;\n                var point_1 = { x: x, y: y };\n                vPoints.push(point_1);\n            }\n            else if (rotateAngle == 3) {\n                x = vertexPoints[j].Y ? vertexPoints[j].Y : vertexPoints[j].y;\n                y = vertexPoints[j].X ? pageDetails.height - vertexPoints[j].X : pageDetails.height - vertexPoints[j].x;\n                point = { x: x, y: y };\n                vPoints.push(point);\n            }\n            else {\n                x = vertexPoints[j].X ? vertexPoints[j].X : vertexPoints[j].x;\n                y = vertexPoints[j].Y ? vertexPoints[j].Y : vertexPoints[j].y;\n                var point_2 = { x: x, y: y };\n                vPoints.push(point_2);\n            }\n        }\n        return vPoints;\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}