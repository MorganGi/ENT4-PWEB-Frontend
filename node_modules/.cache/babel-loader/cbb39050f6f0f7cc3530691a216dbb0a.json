{"ast":null,"code":"import { createElement, isNullOrUndefined, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n *\n * @hidden\n */\n\nvar TextLayer =\n/** @class */\nfunction () {\n  /**\n   * @param {PdfViewer} pdfViewer - The PdfViewer.\n   * @param {PdfViewerBase} pdfViewerBase - The PdfViewerBase.\n   * @private\n   */\n  function TextLayer(pdfViewer, pdfViewerBase) {\n    var _this = this; // eslint-disable-next-line\n\n\n    this.textBoundsArray = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.characterBound = [];\n    /**\n     * @returns {void}\n     */\n\n    this.closeNotification = function () {\n      _this.notifyDialog.hide();\n    };\n\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = pdfViewerBase;\n  }\n  /**\n   * @param {number} pageNumber - The pageNumber.\n   * @param {number} pageWidth - The pageWidth.\n   * @param {number} pageHeight - The pageHeight.\n   * @param {HTMLElement} pageDiv - The pageDiv.\n   * @returns {HTMLElement} - The HTMLElement.\n   * @private\n   */\n\n\n  TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n    var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n    var textLayer;\n\n    if (!textDiv) {\n      textLayer = createElement('div', {\n        id: this.pdfViewer.element.id + '_textLayer_' + pageNumber,\n        className: 'e-pv-text-layer'\n      });\n      textLayer.style.width = pageWidth + 'px';\n      textLayer.style.height = pageHeight + 'px';\n\n      if (pageDiv) {\n        pageDiv.appendChild(textLayer);\n      }\n    }\n\n    this.pdfViewerBase.applyElementStyles(textLayer, pageNumber);\n    return textLayer;\n  };\n  /**\n   * @param {number} pageNumber - The pageNumber.\n   * @param {any} textContents - The textContents.\n   * @param {any} textBounds - The textBounds.\n   * @param {any} rotation - The rotation.\n   * @returns {void}\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds, rotation) {\n    var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n    var canvasElement = createElement(\"canvas\");\n\n    if (canvasElement && textLayer && textLayer.childNodes.length === 0) {\n      for (var i = 0; i < textContents.length; i++) {\n        // eslint-disable-next-line\n        var bounds = textBounds[i]; // eslint-disable-next-line max-len\n\n        var textDiv = createElement('div', {\n          id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i,\n          className: 'e-pv-text',\n          attrs: {\n            'tabindex': '0'\n          }\n        });\n        var textContent = textContents[i];\n        textDiv.textContent = textContent.replace(/&nbsp;/g, ' '); // eslint-disable-next-line\n\n        var newLine = textContents[i].replace(/  +/g, ' ');\n\n        if (newLine !== ' ') {\n          textDiv.style.whiteSpace = 'pre';\n        }\n\n        if (bounds) {\n          this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n        }\n\n        this.setTextElementProperties(textDiv);\n        var context = canvasElement.getContext('2d');\n        context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n        var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n\n        if (bounds) {\n          var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n          this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n        }\n\n        textLayer.appendChild(textDiv);\n        this.resizeExcessDiv(textLayer, textDiv); // eslint-disable-next-line max-len\n\n        if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled && textDiv.className !== 'e-pdfviewer-formFields' && textDiv.className !== 'e-pdfviewer-signatureformfields' && textDiv.className !== 'e-pdfviewer-signatureformfields-signature') {\n          textDiv.classList.add('e-pv-cursor');\n        }\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param textContents\n   * @param textBounds\n   * @param rotation\n   * @param isTextSearch\n   * @param pageNumber\n   * @param textContents\n   * @param textBounds\n   * @param rotation\n   * @param isTextSearch\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds, rotation, isTextSearch) {\n    var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n    var canvasElement = createElement(\"canvas\");\n\n    if (canvasElement) {\n      for (var i = 0; i < textLayer.childNodes.length; i++) {\n        // eslint-disable-next-line\n        var bounds = void 0;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n\n        if (isNullOrUndefined(textDiv)) {\n          break;\n        }\n\n        if (textBounds) {\n          bounds = textBounds[i];\n\n          if (bounds) {\n            this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n          }\n        }\n\n        this.setTextElementProperties(textDiv);\n        var context = canvasElement.getContext('2d');\n        context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n        var contextWidth = void 0;\n\n        if (textContents) {\n          var textContent = textContents[i];\n\n          if (textContent) {\n            contextWidth = context.measureText(textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n          }\n        } else {\n          contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n        }\n\n        if (bounds) {\n          var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n          this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n        }\n\n        this.resizeExcessDiv(textLayer, textDiv);\n      }\n    } else {\n      textLayer.parentElement.removeChild(textLayer);\n    }\n\n    if (this.pdfViewer.textSearch) {\n      if (!isTextSearch) {\n        this.pdfViewer.textSearch.resizeSearchElements(pageNumber);\n      }\n    }\n  };\n\n  TextLayer.prototype.applyTextRotation = function (scale, textDiv, rotation, textRotation) {\n    var scaleString = 'scaleX(' + scale + ')';\n\n    if (rotation === 0) {\n      if (textRotation >= 0 && textRotation <= 90) {\n        textDiv.style.transform = scaleString;\n      } else {\n        textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n      }\n    } else if (rotation === 1) {\n      if (textRotation === 0) {\n        textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n      } else if (textRotation === -90) {\n        textDiv.style.transform = scaleString;\n      } else {\n        textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n      }\n    } else if (rotation === 2) {\n      if (textRotation === 0) {\n        textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n      } else if (textRotation === 180) {\n        textDiv.style.transform = scaleString;\n      } else {\n        textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n      }\n    } else if (rotation === 3) {\n      if (textRotation === 0) {\n        textDiv.style.transform = 'rotate(-90deg) ' + scaleString;\n      } else if (textRotation === 90) {\n        textDiv.style.transform = scaleString;\n      } else {\n        textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n      }\n    }\n  };\n\n  TextLayer.prototype.setTextElementProperties = function (textDiv) {\n    textDiv.style.fontFamily = 'serif';\n    textDiv.style.transformOrigin = '0%';\n  };\n  /**\n   * @param {number} pageNumber - The pageNumber.\n   * @returns {void}\n   * @private\n   */\n\n\n  TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n    // eslint-disable-next-line max-len\n    var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor()); // eslint-disable-next-line\n\n    var textBounds = [];\n    var textContents = []; // eslint-disable-next-line\n\n    var rotation;\n\n    if (renderObject) {\n      // eslint-disable-next-line\n      var data = JSON.parse(renderObject); // eslint-disable-next-line\n\n      textBounds = data['textBounds']; // eslint-disable-next-line\n\n      textContents = data['textContent']; // eslint-disable-next-line\n\n      rotation = data['rotation'];\n    }\n\n    if (textBounds.length !== 0) {\n      this.textBoundsArray.push({\n        pageNumber: pageNumber,\n        textBounds: textBounds\n      });\n      this.resizeTextContents(pageNumber, textContents, textBounds, rotation);\n    } else {\n      // eslint-disable-next-line\n      var textElements = this.textBoundsArray.filter(function (obj) {\n        return obj.pageNumber === pageNumber;\n      });\n\n      if (textElements) {\n        if (textElements.length !== 0) {\n          // eslint-disable-next-line\n          textBounds = textElements[0]['textBounds'];\n          this.resizeTextContents(pageNumber, null, textBounds, rotation);\n        }\n      }\n    }\n  };\n\n  TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n    var textLayerPosition = textLayer.getBoundingClientRect();\n    var textDivPosition = textDiv.getBoundingClientRect(); // eslint-disable-next-line max-len\n\n    if (textDivPosition.width + textDivPosition.left >= textLayerPosition.width + textLayerPosition.left || textDivPosition.width > textLayerPosition.width) {\n      // 'auto' width is set to reset the size of the div to its contents.\n      textDiv.style.width = 'auto'; // Client width gets reset by 'auto' width property which has the width of the content.\n\n      textDiv.style.width = textDiv.clientWidth + 'px';\n    }\n  };\n  /**\n   * @private\n   * @param {boolean} isPinchZoomed - The isPinchZoomed.\n   * @returns {void}\n   */\n\n\n  TextLayer.prototype.clearTextLayers = function (isPinchZoomed) {\n    var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n    lowerPageValue = lowerPageValue > 0 ? lowerPageValue : 0;\n    var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n    higherPageValue = higherPageValue < this.pdfViewerBase.pageCount ? higherPageValue : this.pdfViewerBase.pageCount - 1;\n    var textLayers = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n\n    for (var i = 0; i < textLayers.length; i++) {\n      textLayers[i].style.display = 'block';\n\n      if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n        // eslint-disable-next-line radix\n        var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n\n        if (!(lowerPageValue + 1 <= pageNumber && pageNumber <= higherPageValue - 1)) {\n          this.removeElement(textLayers[i], isPinchZoomed);\n        }\n      } else if (this.pdfViewerBase.getPinchZoomed()) {\n        this.removeElement(textLayers[i], isPinchZoomed);\n      } else {\n        this.removeElement(textLayers[i], isPinchZoomed);\n      }\n    }\n  };\n\n  TextLayer.prototype.removeElement = function (element, isPinchZoomed) {\n    if (isPinchZoomed) {\n      this.removeForeignObjects(element);\n    } else {\n      if (Browser.isIE) {\n        if (element.parentElement) {\n          element.parentElement.removeChild(element);\n        } else if (element.parentNode) {\n          element.parentNode.removeChild(element);\n        }\n      } else {\n        element.remove();\n      }\n    }\n  };\n\n  TextLayer.prototype.removeForeignObjects = function (element) {\n    // eslint-disable-next-line\n    var childElement = element.getElementsByClassName('foreign-object');\n\n    if (childElement) {\n      for (var i = 0; i < childElement.length; i++) {\n        if (childElement[i].parentElement.className === 'e-pv-text-layer') {\n          element.removeChild(childElement[0]);\n        }\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param divId\n   * @param fromOffset\n   * @param toOffset\n   * @param textString\n   * @param className\n   * @private\n   */\n  // eslint-disable-next-line max-len\n\n\n  TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n    var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n    var textContent = textString.substring(fromOffset, toOffset);\n    var node = document.createTextNode(textContent);\n\n    if (className) {\n      var spanElement = createElement('span');\n      spanElement.className = className + ' e-pv-text';\n      spanElement.appendChild(node);\n      textDiv.appendChild(spanElement);\n    } else {\n      textDiv.appendChild(node);\n    }\n  };\n  /**\n   * @param startPage\n   * @param endPage\n   * @param anchorOffsetDiv\n   * @param focusOffsetDiv\n   * @param anchorOffset\n   * @param focusOffset\n   * @private\n   */\n  // eslint-disable-next-line max-len\n\n\n  TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n    if (this.pdfViewer.textSelectionModule) {\n      for (var i = startPage; i <= endPage; i++) {\n        var startId = void 0;\n        var endId = void 0; // eslint-disable-next-line\n\n        var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n\n        if (i === startPage) {\n          startId = anchorOffsetDiv;\n          endId = textDivs.length - 1;\n        } else if (i === endPage) {\n          startId = 0;\n          endId = focusOffsetDiv;\n        } else {\n          startId = 0;\n          endId = textDivs.length - 1;\n        }\n\n        if (startPage === endPage) {\n          startId = anchorOffsetDiv;\n          endId = focusOffsetDiv;\n        }\n\n        for (var j = startId; j <= endId; j++) {\n          var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n          var initId = void 0;\n          var lastId = void 0;\n          var length_1 = void 0;\n\n          if (textDiv && textDiv.textContent) {\n            length_1 = textDiv.textContent.length;\n            var textContent = textDiv.textContent;\n            textDiv.textContent = '';\n\n            if (j === startId) {\n              if (i === startPage) {\n                initId = anchorOffset;\n              } else {\n                initId = 0;\n              }\n\n              lastId = length_1;\n              this.convertToSpan(i, j, 0, initId, textContent, null);\n            } else if (j === endId && i === endPage) {\n              initId = 0;\n              lastId = focusOffset;\n            } else {\n              initId = 0;\n              lastId = length_1;\n            }\n\n            if (startId === endId && startPage === endPage) {\n              initId = anchorOffset;\n              lastId = focusOffset;\n            }\n\n            this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n\n            if (j === endId && i === endPage) {\n              this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  TextLayer.prototype.clearDivSelection = function () {\n    var textLayers = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n\n    for (var i = 0; i < textLayers.length; i++) {\n      var childNodes = textLayers[i].childNodes;\n\n      for (var j = 0; j < childNodes.length; j++) {\n        var textDiv = childNodes[j]; // eslint-disable-next-line max-len\n\n        if (textDiv.className !== 'e-pdfviewer-formFields' && textDiv.className !== 'e-pdfviewer-signatureformfields' && textDiv.className !== 'e-pdfviewer-signatureformfields-signature') {\n          var textContent = textDiv.textContent; // eslint-disable-next-line max-len\n\n          if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && textDiv.childNodes[0].tagName === 'SPAN') {\n            textDiv.textContent = '';\n            textDiv.textContent = textContent;\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height) {\n    textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n    textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n    var textHeight = height * this.pdfViewerBase.getZoomFactor();\n    textDiv.style.height = textHeight + 'px';\n    textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n  };\n\n  TextLayer.prototype.getTextSelectionStatus = function () {\n    if (this.pdfViewer.textSelectionModule) {\n      return this.pdfViewer.textSelectionModule.isTextSelection;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @param {boolean} isAdd - The isAdd.\n   * @returns {void}\n   * @private\n   */\n\n\n  TextLayer.prototype.modifyTextCursor = function (isAdd) {\n    var textLayerList = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n\n    for (var i = 0; i < textLayerList.length; i++) {\n      var childNodes = textLayerList[i].childNodes;\n\n      for (var j = 0; j < childNodes.length; j++) {\n        var textElement = childNodes[j]; // eslint-disable-next-line max-len\n\n        if (isAdd && textElement.className !== 'e-pdfviewer-formFields' && textElement.className !== 'e-pdfviewer-signatureformfields' && textElement.className !== 'e-pdfviewer-signatureformfields-signature') {\n          textElement.classList.add('e-pv-cursor');\n        } else {\n          textElement.classList.remove('e-pv-cursor');\n        }\n      }\n    }\n  };\n  /**\n   * @param {Selection} selection - The Selection.\n   * @returns {boolean} - Returns true or false.\n   * @private\n   */\n\n\n  TextLayer.prototype.isBackWardSelection = function (selection) {\n    var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n    var backward = false;\n\n    if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n      backward = true;\n    }\n\n    return backward;\n  };\n  /**\n   * @param {Node} element - The element.\n   * @returns {number} - Returns number.\n   * @private\n   */\n\n\n  TextLayer.prototype.getPageIndex = function (element) {\n    var pageId; // eslint-disable-next-line\n\n    var parentElement = element.parentElement;\n\n    if (!parentElement) {\n      parentElement = element.parentNode;\n    }\n\n    if (parentElement.className === 'e-pv-text-layer') {\n      // eslint-disable-next-line radix\n      pageId = parseInt(element.id.split('_text_')[1]);\n    } else {\n      // eslint-disable-next-line radix\n      pageId = parseInt(parentElement.id.split('_text_')[1]);\n    }\n\n    return pageId;\n  };\n  /**\n   * @param {Node} element - The element.\n   * @param {number} pageIndex - The pageIndex.\n   * @returns {number} - Returns number.\n   * @private\n   */\n\n\n  TextLayer.prototype.getTextIndex = function (element, pageIndex) {\n    var textIndex; // eslint-disable-next-line\n\n    var parentElement = element.parentElement;\n\n    if (!parentElement) {\n      parentElement = element.parentNode;\n    }\n\n    if (parentElement.className === 'e-pv-text-layer') {\n      // eslint-disable-next-line radix\n      textIndex = parseInt(element.id.split('_text_' + pageIndex + '_')[1]);\n    } else {\n      // eslint-disable-next-line radix\n      textIndex = parseInt(parentElement.id.split('_text_' + pageIndex + '_')[1]);\n    }\n\n    return textIndex;\n  };\n\n  TextLayer.prototype.getPreviousZoomFactor = function () {\n    if (this.pdfViewer.magnificationModule) {\n      return this.pdfViewer.magnificationModule.previousZoomFactor;\n    } else {\n      return 1;\n    }\n  };\n  /**\n   * @private\n   * @returns {boolean} - Returns true or false.\n   */\n\n\n  TextLayer.prototype.getTextSearchStatus = function () {\n    if (this.pdfViewer.textSearchModule) {\n      return this.pdfViewer.textSearchModule.isTextSearch;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * @param {string} text - The text.\n   * @returns {void}\n   * @private\n   */\n\n\n  TextLayer.prototype.createNotificationPopup = function (text) {\n    var _this = this;\n\n    if (!this.isMessageBoxOpen) {\n      if (!isBlazor()) {\n        // eslint-disable-next-line max-len\n        var popupElement_1 = createElement('div', {\n          id: this.pdfViewer.element.id + '_notify',\n          className: 'e-pv-notification-popup'\n        });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement_1);\n        this.notifyDialog = new Dialog({\n          showCloseIcon: true,\n          closeOnEscape: false,\n          isModal: true,\n          header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n          buttons: [{\n            buttonModel: {\n              content: this.pdfViewer.localeObj.getConstant('OK'),\n              isPrimary: true\n            },\n            click: this.closeNotification.bind(this)\n          }],\n          // eslint-disable-next-line max-len\n          content: '<div class=\"e-pv-notification-popup-content\" tabindex = \"0\">' + text + '</div>',\n          target: this.pdfViewer.element,\n          beforeClose: function () {\n            _this.notifyDialog.destroy();\n\n            if (_this.pdfViewer.element) {\n              try {\n                _this.pdfViewer.element.removeChild(popupElement_1);\n              } catch (error) {\n                popupElement_1.parentElement.removeChild(popupElement_1);\n              }\n            }\n\n            if (_this.pdfViewer.textSearchModule) {\n              _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n            }\n\n            _this.isMessageBoxOpen = false;\n          }\n        });\n\n        if (this.pdfViewer.enableRtl) {\n          this.notifyDialog.enableRtl = true;\n        }\n\n        this.notifyDialog.appendTo(popupElement_1);\n        this.isMessageBoxOpen = true;\n      } else {\n        // eslint-disable-next-line\n        var notificationElement = document.getElementById(this.pdfViewer.element.id + '_notification_popup_content');\n\n        if (notificationElement) {\n          notificationElement.textContent = text;\n          notificationElement.innerHTML = text;\n        }\n\n        if (this.pdfViewer.textSearchModule) {\n          this.pdfViewer.textSearch.isMessagePopupOpened = false;\n        }\n\n        this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenNotificationPopup', text);\n      }\n    }\n  };\n\n  return TextLayer;\n}();\n\nexport { TextLayer };","map":{"version":3,"names":["createElement","isNullOrUndefined","Browser","isBlazor","Dialog","TextLayer","pdfViewer","pdfViewerBase","_this","textBoundsArray","characterBound","closeNotification","notifyDialog","hide","prototype","addTextLayer","pageNumber","pageWidth","pageHeight","pageDiv","textDiv","document","getElementById","element","id","textLayer","className","style","width","height","appendChild","applyElementStyles","renderTextContents","textContents","textBounds","rotation","canvasElement","childNodes","length","i","bounds","attrs","textContent","replace","newLine","whiteSpace","setStyleToTextDiv","X","Y","Bottom","Width","Height","setTextElementProperties","context","getContext","font","fontSize","fontFamily","contextWidth","measureText","scale","getZoomFactor","applyTextRotation","Rotation","resizeExcessDiv","textSelectionModule","enableTextSelection","isTextSelectionDisabled","classList","add","resizeTextContents","isTextSearch","getElement","parentElement","removeChild","textSearch","resizeSearchElements","textRotation","scaleString","transform","transformOrigin","resizeTextContentsOnZoom","renderObject","window","sessionStorage","getItem","getDocumentId","getPreviousZoomFactor","data","JSON","parse","push","textElements","filter","obj","textLayerPosition","getBoundingClientRect","textDivPosition","left","clientWidth","clearTextLayers","isPinchZoomed","lowerPageValue","currentPageNumber","higherPageValue","pageCount","textLayers","querySelectorAll","display","getMagnified","getTextSelectionStatus","getTextSearchStatus","parseInt","split","removeElement","getPinchZoomed","removeForeignObjects","isIE","parentNode","remove","childElement","getElementsByClassName","convertToSpan","divId","fromOffset","toOffset","textString","substring","node","createTextNode","spanElement","applySpanForSelection","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","anchorOffset","focusOffset","startId","endId","textDivs","j","initId","lastId","length_1","clearDivSelection","tagName","top","bottom","textHeight","isTextSelection","modifyTextCursor","isAdd","textLayerList","textElement","isBackWardSelection","selection","position","anchorNode","compareDocumentPosition","focusNode","backward","Node","DOCUMENT_POSITION_PRECEDING","getPageIndex","pageId","getTextIndex","pageIndex","textIndex","magnificationModule","previousZoomFactor","textSearchModule","createNotificationPopup","text","isMessageBoxOpen","popupElement_1","viewerContainer","showCloseIcon","closeOnEscape","isModal","header","localeObj","getConstant","buttons","buttonModel","content","isPrimary","click","bind","target","beforeClose","destroy","error","isMessagePopupOpened","enableRtl","appendTo","notificationElement","innerHTML","_dotnetInstance","invokeMethodAsync"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/base/text-layer.js"],"sourcesContent":["import { createElement, isNullOrUndefined, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n *\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @param {PdfViewer} pdfViewer - The PdfViewer.\n     * @param {PdfViewerBase} pdfViewerBase - The PdfViewerBase.\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // eslint-disable-next-line\n        this.textBoundsArray = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.characterBound = [];\n        /**\n         * @returns {void}\n         */\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @param {number} pageNumber - The pageNumber.\n     * @param {number} pageWidth - The pageWidth.\n     * @param {number} pageHeight - The pageHeight.\n     * @param {HTMLElement} pageDiv - The pageDiv.\n     * @returns {HTMLElement} - The HTMLElement.\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var textLayer;\n        if (!textDiv) {\n            textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            if (pageDiv) {\n                pageDiv.appendChild(textLayer);\n            }\n        }\n        this.pdfViewerBase.applyElementStyles(textLayer, pageNumber);\n        return textLayer;\n    };\n    /**\n     * @param {number} pageNumber - The pageNumber.\n     * @param {any} textContents - The textContents.\n     * @param {any} textBounds - The textBounds.\n     * @param {any} rotation - The rotation.\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = createElement(\"canvas\");\n        if (canvasElement && textLayer && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // eslint-disable-next-line\n                var bounds = textBounds[i];\n                // eslint-disable-next-line max-len\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text', attrs: { 'tabindex': '0' } });\n                var textContent = textContents[i];\n                textDiv.textContent = textContent.replace(/&nbsp;/g, ' ');\n                // eslint-disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                if (bounds) {\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                if (bounds) {\n                    var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                    this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                }\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // eslint-disable-next-line max-len\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled && textDiv.className !== 'e-pdfviewer-formFields'\n                    && textDiv.className !== 'e-pdfviewer-signatureformfields' && textDiv.className !== 'e-pdfviewer-signatureformfields-signature') {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param textContents\n     * @param textBounds\n     * @param rotation\n     * @param isTextSearch\n     * @param pageNumber\n     * @param textContents\n     * @param textBounds\n     * @param rotation\n     * @param isTextSearch\n     * @private\n     */\n    // eslint-disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds, rotation, isTextSearch) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = createElement(\"canvas\");\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // eslint-disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (isNullOrUndefined(textDiv)) {\n                    break;\n                }\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    if (bounds) {\n                        this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                    }\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    var textContent = textContents[i];\n                    if (textContent) {\n                        contextWidth = context.measureText(textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                    }\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                if (bounds) {\n                    var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                    this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                }\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n        if (this.pdfViewer.textSearch) {\n            if (!isTextSearch) {\n                this.pdfViewer.textSearch.resizeSearchElements(pageNumber);\n            }\n        }\n    };\n    TextLayer.prototype.applyTextRotation = function (scale, textDiv, rotation, textRotation) {\n        var scaleString = 'scaleX(' + scale + ')';\n        if (rotation === 0) {\n            if (textRotation >= 0 && textRotation <= 90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 1) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n            }\n            else if (textRotation === -90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 2) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n            }\n            else if (textRotation === 180) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 3) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(-90deg) ' + scaleString;\n            }\n            else if (textRotation === 90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @param {number} pageNumber - The pageNumber.\n     * @returns {void}\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // eslint-disable-next-line max-len\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // eslint-disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        // eslint-disable-next-line\n        var rotation;\n        if (renderObject) {\n            // eslint-disable-next-line\n            var data = JSON.parse(renderObject);\n            // eslint-disable-next-line\n            textBounds = data['textBounds'];\n            // eslint-disable-next-line\n            textContents = data['textContent'];\n            // eslint-disable-next-line\n            rotation = data['rotation'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds, rotation);\n        }\n        else {\n            // eslint-disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // eslint-disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds, rotation);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // eslint-disable-next-line max-len\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     * @param {boolean} isPinchZoomed - The isPinchZoomed.\n     * @returns {void}\n     */\n    TextLayer.prototype.clearTextLayers = function (isPinchZoomed) {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // eslint-disable-next-line radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    this.removeElement(textLayers[i], isPinchZoomed);\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                this.removeElement(textLayers[i], isPinchZoomed);\n            }\n            else {\n                this.removeElement(textLayers[i], isPinchZoomed);\n            }\n        }\n    };\n    TextLayer.prototype.removeElement = function (element, isPinchZoomed) {\n        if (isPinchZoomed) {\n            this.removeForeignObjects(element);\n        }\n        else {\n            if (Browser.isIE) {\n                if (element.parentElement) {\n                    element.parentElement.removeChild(element);\n                }\n                else if (element.parentNode) {\n                    element.parentNode.removeChild(element);\n                }\n            }\n            else {\n                element.remove();\n            }\n        }\n    };\n    TextLayer.prototype.removeForeignObjects = function (element) {\n        // eslint-disable-next-line\n        var childElement = element.getElementsByClassName('foreign-object');\n        if (childElement) {\n            for (var i = 0; i < childElement.length; i++) {\n                if (childElement[i].parentElement.className === 'e-pv-text-layer') {\n                    element.removeChild(childElement[0]);\n                }\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param divId\n     * @param fromOffset\n     * @param toOffset\n     * @param textString\n     * @param className\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @param startPage\n     * @param endPage\n     * @param anchorOffsetDiv\n     * @param focusOffsetDiv\n     * @param anchorOffset\n     * @param focusOffset\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // eslint-disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    if (textDiv && textDiv.textContent) {\n                        length_1 = textDiv.textContent.length;\n                        var textContent = textDiv.textContent;\n                        textDiv.textContent = '';\n                        if (j === startId) {\n                            if (i === startPage) {\n                                initId = anchorOffset;\n                            }\n                            else {\n                                initId = 0;\n                            }\n                            lastId = length_1;\n                            this.convertToSpan(i, j, 0, initId, textContent, null);\n                        }\n                        else if (j === endId && i === endPage) {\n                            initId = 0;\n                            lastId = focusOffset;\n                        }\n                        else {\n                            initId = 0;\n                            lastId = length_1;\n                        }\n                        if (startId === endId && startPage === endPage) {\n                            initId = anchorOffset;\n                            lastId = focusOffset;\n                        }\n                        this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                        if (j === endId && i === endPage) {\n                            this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                // eslint-disable-next-line max-len\n                if (textDiv.className !== 'e-pdfviewer-formFields' && textDiv.className !== 'e-pdfviewer-signatureformfields' && textDiv.className !== 'e-pdfviewer-signatureformfields-signature') {\n                    var textContent = textDiv.textContent;\n                    // eslint-disable-next-line max-len\n                    if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                        textDiv.textContent = '';\n                        textDiv.textContent = textContent;\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @param {boolean} isAdd - The isAdd.\n     * @returns {void}\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                // eslint-disable-next-line max-len\n                if (isAdd && textElement.className !== 'e-pdfviewer-formFields' && textElement.className !== 'e-pdfviewer-signatureformfields' && textElement.className !== 'e-pdfviewer-signatureformfields-signature') {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @param {Selection} selection - The Selection.\n     * @returns {boolean} - Returns true or false.\n     * @private\n     */\n    TextLayer.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @param {Node} element - The element.\n     * @returns {number} - Returns number.\n     * @private\n     */\n    TextLayer.prototype.getPageIndex = function (element) {\n        var pageId;\n        // eslint-disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // eslint-disable-next-line radix\n            pageId = parseInt(element.id.split('_text_')[1]);\n        }\n        else {\n            // eslint-disable-next-line radix\n            pageId = parseInt(parentElement.id.split('_text_')[1]);\n        }\n        return pageId;\n    };\n    /**\n     * @param {Node} element - The element.\n     * @param {number} pageIndex - The pageIndex.\n     * @returns {number} - Returns number.\n     * @private\n     */\n    TextLayer.prototype.getTextIndex = function (element, pageIndex) {\n        var textIndex;\n        // eslint-disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // eslint-disable-next-line radix\n            textIndex = parseInt(element.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        else {\n            // eslint-disable-next-line radix\n            textIndex = parseInt(parentElement.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        return textIndex;\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     * @returns {boolean} - Returns true or false.\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @param {string} text - The text.\n     * @returns {void}\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        if (!this.isMessageBoxOpen) {\n            if (!isBlazor()) {\n                // eslint-disable-next-line max-len\n                var popupElement_1 = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n                this.pdfViewerBase.viewerContainer.appendChild(popupElement_1);\n                this.notifyDialog = new Dialog({\n                    showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n                    buttons: [{\n                            buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                            click: this.closeNotification.bind(this)\n                        }],\n                    // eslint-disable-next-line max-len\n                    content: '<div class=\"e-pv-notification-popup-content\" tabindex = \"0\">' + text + '</div>', target: this.pdfViewer.element,\n                    beforeClose: function () {\n                        _this.notifyDialog.destroy();\n                        if (_this.pdfViewer.element) {\n                            try {\n                                _this.pdfViewer.element.removeChild(popupElement_1);\n                            }\n                            catch (error) {\n                                popupElement_1.parentElement.removeChild(popupElement_1);\n                            }\n                        }\n                        if (_this.pdfViewer.textSearchModule) {\n                            _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                        }\n                        _this.isMessageBoxOpen = false;\n                    }\n                });\n                if (this.pdfViewer.enableRtl) {\n                    this.notifyDialog.enableRtl = true;\n                }\n                this.notifyDialog.appendTo(popupElement_1);\n                this.isMessageBoxOpen = true;\n            }\n            else {\n                // eslint-disable-next-line\n                var notificationElement = document.getElementById(this.pdfViewer.element.id + '_notification_popup_content');\n                if (notificationElement) {\n                    notificationElement.textContent = text;\n                    notificationElement.innerHTML = text;\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n                this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenNotificationPopup', text);\n            }\n        }\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}