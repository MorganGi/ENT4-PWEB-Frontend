{"ast":null,"code":"/* eslint-disable */\nimport { AjaxHandler } from '../index';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n */\n\nvar ThumbnailView =\n/** @class */\nfunction () {\n  /**\n   * @param pdfViewer\n   * @param pdfViewerBase\n   * @param pdfViewer\n   * @param pdfViewerBase\n   * @private\n   */\n  function ThumbnailView(pdfViewer, pdfViewerBase) {\n    var _this = this;\n\n    this.thumbnailLimit = 30;\n    this.thumbnailThreshold = 50;\n    this.thumbnailTopMargin = 10;\n    /**\n     * @private\n     */\n\n    this.isThumbnailClicked = false;\n    /**\n     * @param event\n     * @private\n     */\n\n    this.thumbnailClick = function (event) {\n      var proxy = _this;\n      var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n\n      if (proxy.previousElement) {\n        proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n        proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n        proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n      }\n\n      if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n        proxy.setSelectionStyle(event.srcElement.parentElement);\n        proxy.previousElement = event.srcElement.parentElement;\n      } else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n        proxy.setSelectionStyle(event.srcElement);\n        proxy.previousElement = event.srcElement;\n      }\n\n      proxy.pdfViewer.fireThumbnailClick(pageNumber + 1);\n      proxy.isThumbnailClicked = true;\n      proxy.goToThumbnailPage(pageNumber + 1);\n      proxy.pdfViewerBase.focusViewerContainer();\n\n      if (_this.pdfViewer.annotationModule && _this.pdfViewer.annotationModule.inkAnnotationModule) {\n        // eslint-disable-next-line\n        var currentPageNumber = parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n\n        _this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n      }\n    };\n    /**\n     * @param event\n     * @private\n     */\n\n\n    this.thumbnailMouseOver = function (event) {\n      var proxy = _this;\n      var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n\n      if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n        proxy.setMouseOverStyle(event.srcElement);\n      } else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n        proxy.setMouseOverStyle(event.srcElement.parentElement);\n      }\n    };\n    /**\n     * @param event\n     * @private\n     */\n\n\n    this.thumbnailMouseLeave = function (event) {\n      var proxy = _this;\n      var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n\n      if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n        proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n      } else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n        proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n      }\n    };\n\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = pdfViewerBase;\n  }\n  /**\n   * @private\n   */\n\n\n  ThumbnailView.prototype.createThumbnailContainer = function () {\n    // eslint-disable-next-line max-len\n    this.thumbnailView = createElement('div', {\n      id: this.pdfViewer.element.id + '_thumbnail_view',\n      className: 'e-pv-thumbnail-view e-pv-thumbnail-row'\n    });\n    this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n  };\n  /**\n   * Open the thumbnail pane of the PdfViewer.\n   *\n   * @returns void\n   */\n\n\n  ThumbnailView.prototype.openThumbnailPane = function () {\n    if (this.pdfViewerBase.navigationPane) {\n      this.pdfViewerBase.navigationPane.openThumbnailPane();\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  ThumbnailView.prototype.createRequestForThumbnails = function () {\n    var proxy = this; // eslint-disable-next-line\n\n    var isIE = !!document.documentMode;\n\n    if (!isIE) {\n      // eslint-disable-next-line\n      return new Promise( // eslint-disable-next-line\n      function (renderThumbnailImage, reject) {\n        proxy.requestCreation(proxy);\n      });\n    } else {\n      this.requestCreation(proxy);\n      return null;\n    }\n  };\n\n  ThumbnailView.prototype.requestCreation = function (proxy) {\n    // Removed the condition to skip multiple request for thumbnail image.\n    proxy.startIndex = proxy.thumbnailLimit; // eslint-disable-next-line max-len\n\n    proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount; // eslint-disable-next-line max-len\n\n    var jsonObject = {\n      startPage: proxy.startIndex.toString(),\n      endPage: proxy.thumbnailLimit.toString(),\n      sizeX: \"99.7\",\n      sizeY: \"141\",\n      hashId: proxy.pdfViewerBase.hashId,\n      action: 'RenderThumbnailImages',\n      elementId: proxy.pdfViewer.element.id,\n      uniqueId: proxy.pdfViewerBase.documentId\n    };\n\n    if (this.pdfViewerBase.jsonDocumentId) {\n      // eslint-disable-next-line\n      jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n    }\n\n    this.thumbnailRequestHandler = new AjaxHandler(this.pdfViewer);\n    this.thumbnailRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail;\n    this.thumbnailRequestHandler.responseType = 'json';\n    this.thumbnailRequestHandler.send(jsonObject); // eslint-disable-next-line\n\n    this.thumbnailRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n\n      if (data) {\n        if (typeof data !== 'object') {\n          try {\n            data = JSON.parse(data);\n          } catch (error) {\n            proxy.pdfViewerBase.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n            data = null;\n          }\n        }\n\n        if (data && data.uniqueId === proxy.pdfViewerBase.documentId) {\n          proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderThumbnail, data);\n          proxy.renderThumbnailImage(data);\n\n          if (proxy.pdfViewer.isThumbnailViewOpen) {\n            proxy.pdfViewerBase.navigationPane.isThumbnailOpen = true; // eslint-disable-next-line max-len\n\n            proxy.pdfViewerBase.navigationPane.sideBarTitle.textContent = proxy.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            document.getElementById(proxy.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            var bookmarkContent = proxy.pdfViewer.element.querySelector('.e-pv-bookmark-view');\n\n            if (bookmarkContent) {\n              bookmarkContent.style.display = 'none';\n            }\n\n            proxy.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme();\n            proxy.pdfViewerBase.navigationPane.updateViewerContainerOnExpand();\n            proxy.pdfViewerBase.navigationPane.isBookmarkOpen = false;\n          }\n        }\n      }\n    }; // eslint-disable-next-line\n\n\n    this.thumbnailRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n    }; // eslint-disable-next-line\n\n\n    this.thumbnailRequestHandler.onError = function (result) {\n      proxy.pdfViewerBase.openNotificationPopup();\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n    };\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n\n\n  ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n    var shouldScroll = this.checkThumbnailScroll(pageNumber);\n\n    if (this.thumbnailView) {\n      var thumbnailChild = this.thumbnailView.children[pageNumber];\n\n      if (thumbnailChild) {\n        var thumbnailDiv = thumbnailChild.children[0];\n\n        if (shouldScroll) {\n          var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n          this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n        }\n\n        if (!this.isThumbnailClicked) {\n          if (this.previousElement) {\n            this.previousElement.classList.remove('e-pv-thumbnail-selection');\n            this.previousElement.classList.remove('e-pv-thumbnail-focus');\n            this.previousElement.classList.remove('e-pv-thumbnail-hover');\n            this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n          }\n\n          this.setFocusStyle(thumbnailDiv, pageNumber);\n        }\n\n        this.previousElement = thumbnailDiv.children[0];\n      }\n    }\n  };\n\n  ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n    var shouldScroll = false;\n\n    if (this.thumbnailView) {\n      var visibleThumbs = this.getVisibleThumbs();\n      var numVisibleThumbs = visibleThumbs.views.length; // if the thumbnail isn't currently visible, scroll it into view.\n\n      if (numVisibleThumbs > 0) {\n        var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id); // account for only one thumbnail being visible.\n        // eslint-disable-next-line max-len\n\n        var visibleLastPageID = numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID;\n\n        if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n          shouldScroll = true;\n        } else {\n          // eslint-disable-next-line\n          visibleThumbs.views.some(function (view) {\n            var pageID = view.id.split('_');\n            var thumbPageNumber = pageID[pageID.length - 1]; // eslint-disable-next-line radix\n\n            if (parseInt(thumbPageNumber) !== pageNumber) {\n              return false;\n            }\n\n            shouldScroll = view.percent < 100;\n            return true;\n          });\n        }\n      }\n    }\n\n    return shouldScroll;\n  };\n\n  ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n    var pageID = pageId.split('_');\n    var pageNumber = pageID[pageID.length - 1]; // eslint-disable-next-line radix\n\n    return parseInt(pageNumber);\n  };\n\n  ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n    if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n      this.setMouseFocusStyle(thumbnail.children[0]);\n    }\n  }; // eslint-disable-next-line\n\n\n  ThumbnailView.prototype.renderThumbnailImage = function (data) {\n    if (this.thumbnailView) {\n      var startPage = data && isNaN(data.startPage) ? data.startPage : this.startIndex;\n      var endPage = data && isNaN(data.endPage) ? data.endPage : this.thumbnailLimit;\n\n      for (var i = startPage; i < endPage; i++) {\n        // eslint-disable-next-line max-len\n        var pageLink = createElement('a', {\n          id: 'page_' + i,\n          attrs: {\n            'aria-label': 'Thumbnail of Page' + (i + 1),\n            'tabindex': '-1',\n            'role': 'link'\n          },\n          className: 'e-pv-thumbnail-anchor-node'\n        }); // eslint-disable-next-line max-len\n\n        var thumbnail = createElement('div', {\n          id: this.pdfViewer.element.id + '_thumbnail_' + i,\n          className: 'e-pv-thumbnail e-pv-thumbnail-column'\n        }); // eslint-disable-next-line max-len\n\n        this.thumbnailSelectionRing = createElement('div', {\n          id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i,\n          className: 'e-pv-thumbnail-selection-ring'\n        });\n        thumbnail.appendChild(this.thumbnailSelectionRing); // eslint-disable-next-line max-len\n\n        var thumbnailPageNumber = createElement('div', {\n          id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i,\n          className: 'e-pv-thumbnail-number'\n        });\n        thumbnailPageNumber.textContent = (i + 1).toString();\n        thumbnail.appendChild(thumbnailPageNumber); // eslint-disable-next-line max-len\n\n        this.thumbnailImage = createElement('img', {\n          id: this.pdfViewer.element.id + '_thumbnail_image_' + i,\n          className: 'e-pv-thumbnail-image'\n        });\n        this.thumbnailImage.src = data.thumbnailImage[i];\n\n        if (this.pdfViewerBase.pageSize[i] && this.pdfViewerBase.pageSize[i].height < this.pdfViewerBase.pageSize[i].width) {\n          this.thumbnailImage.style.height = '86px';\n          this.thumbnailImage.style.width = '126px';\n          thumbnail.style.height = '100px';\n          thumbnail.style.width = '140px';\n          pageLink.style.left = '-25px';\n          pageLink.style.position = 'relative';\n          thumbnailPageNumber.style.left = '18px';\n          thumbnailPageNumber.style.position = 'relative';\n        }\n\n        this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n        pageLink.appendChild(thumbnail);\n        this.thumbnailView.appendChild(pageLink);\n        this.wireUpEvents();\n\n        if (i === 0) {\n          this.setMouseFocusToFirstPage();\n        }\n      }\n    }\n\n    this.pdfViewerBase.navigationPane.enableThumbnailButton();\n\n    if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n      // eslint-disable-next-line\n      var isIE = !!document.documentMode;\n\n      if (!isIE) {\n        Promise.all([this.createRequestForThumbnails()]);\n      } else {\n        this.createRequestForThumbnails();\n      }\n    }\n  };\n\n  ThumbnailView.prototype.wireUpEvents = function () {\n    if (this.thumbnailSelectionRing) {\n      this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n      this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n      this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n    }\n  };\n\n  ThumbnailView.prototype.unwireUpEvents = function () {\n    if (this.thumbnailSelectionRing && this.thumbnailImage) {\n      this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n      this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n      this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n    }\n  };\n\n  ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n    if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n      this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n    } else {\n      this.isThumbnailClicked = false;\n    }\n  };\n\n  ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n    thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n    thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n    thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n    thumbnailElement.classList.add('e-pv-thumbnail-selection');\n  };\n\n  ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n    // eslint-disable-next-line max-len\n    if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n      thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n\n      if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n        thumbnailElement.classList.add('e-pv-thumbnail-hover');\n      }\n    }\n  };\n\n  ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n    if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n      if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n        thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n      }\n\n      thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n    } else {\n      if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n      }\n    }\n  };\n\n  ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n    thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n    thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n    thumbnailElement.classList.add('e-pv-thumbnail-focus');\n  };\n\n  ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n    var thumbnailChild = this.thumbnailView.children[0];\n\n    if (thumbnailChild) {\n      var thumbnailDiv = thumbnailChild.children[0].children[0];\n      this.setMouseFocusStyle(thumbnailDiv);\n      this.previousElement = thumbnailDiv;\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  ThumbnailView.prototype.clear = function () {\n    this.startIndex = 0;\n    this.thumbnailLimit = 0;\n\n    if (this.pdfViewerBase.navigationPane) {\n      if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n        this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n        this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n        this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n      }\n    }\n\n    if (this.thumbnailView) {\n      while (this.thumbnailView.hasChildNodes()) {\n        this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n      }\n    }\n\n    if (this.pdfViewerBase.navigationPane) {\n      this.pdfViewerBase.navigationPane.resetThumbnailView();\n    }\n\n    if (this.thumbnailRequestHandler) {\n      this.thumbnailRequestHandler.clear();\n    }\n\n    this.unwireUpEvents();\n  };\n\n  ThumbnailView.prototype.getVisibleThumbs = function () {\n    return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n  };\n\n  ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n    var top = scrollElement.scrollTop;\n    var bottom = top + scrollElement.clientHeight;\n    var left = scrollElement.scrollLeft;\n    var right = left + scrollElement.clientWidth;\n    /**\n     * @param thumbnailViewChildrenElement\n     */\n\n    function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n      var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n      return elementBottom > top;\n    } // eslint-disable-next-line\n\n\n    var visible = [];\n    var thumbnailView;\n    var element;\n    var currentHeight;\n    var viewHeight;\n    var viewBottom;\n    var hiddenHeight;\n    var currentWidth;\n    var viewWidth;\n    var viewRight;\n    var hiddenWidth;\n    var percentVisible;\n    var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 : this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n\n    if (thumbnailViewChildren.length > 0) {\n      firstVisibleElementInd = this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n    }\n\n    var lastEdge = -1;\n\n    for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n      thumbnailView = this.getThumbnailElement(i);\n      element = thumbnailView;\n      currentWidth = element.offsetLeft + element.clientLeft;\n      currentHeight = element.offsetTop + element.clientTop;\n      viewWidth = element.clientWidth;\n      viewHeight = element.clientHeight;\n      viewRight = currentWidth + viewWidth;\n      viewBottom = currentHeight + viewHeight;\n\n      if (lastEdge === -1) {\n        if (viewBottom >= bottom) {\n          lastEdge = viewBottom;\n        }\n      } else if (currentHeight > lastEdge) {\n        break;\n      }\n\n      if (viewBottom <= top || currentHeight >= bottom || viewRight <= left || currentWidth >= right) {\n        continue;\n      }\n\n      hiddenHeight = Math.max(0, top - currentHeight) + Math.max(0, viewBottom - bottom);\n      hiddenWidth = Math.max(0, left - currentWidth) + Math.max(0, viewRight - right); // eslint-disable-next-line no-bitwise\n\n      percentVisible = (viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth | 0;\n      visible.push({\n        id: thumbnailView.id,\n        x: currentWidth,\n        y: currentHeight,\n        view: thumbnailView,\n        percent: percentVisible\n      });\n    }\n\n    var first = visible[0];\n    var last = visible[visible.length - 1];\n    return {\n      first: first,\n      last: last,\n      views: visible\n    };\n  }; // eslint-disable-next-line\n\n\n  ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n    var minIndex = 0;\n    var maxIndex = items.length - 1;\n\n    if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n      return items.length - 1;\n    }\n\n    if (condition(this.getThumbnailElement(minIndex))) {\n      return minIndex;\n    }\n\n    while (minIndex < maxIndex) {\n      // eslint-disable-next-line no-bitwise\n      var currentIndex = minIndex + maxIndex >> 1;\n\n      if (condition(this.getThumbnailElement(currentIndex))) {\n        maxIndex = currentIndex;\n      } else {\n        minIndex = currentIndex + 1;\n      }\n    }\n\n    return minIndex;\n    /* === maxIndex */\n  };\n\n  ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n    if (index < 2) {\n      return index;\n    }\n\n    var thumbnailElement = this.getThumbnailElement(index);\n    var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n\n    if (pageTop >= top) {\n      thumbnailElement = this.getThumbnailElement(index - 1);\n      pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n    }\n\n    for (var i = index - 2; i >= 0; --i) {\n      thumbnailElement = this.getThumbnailElement(i);\n\n      if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n        break;\n      }\n\n      index = i;\n    }\n\n    return index;\n  };\n\n  ThumbnailView.prototype.getThumbnailElement = function (index) {\n    var thumbnailChild = this.thumbnailView.children[index];\n    return thumbnailChild.children[0];\n  };\n  /**\n   * @private\n   */\n\n\n  ThumbnailView.prototype.destroy = function () {\n    this.clear();\n  };\n  /**\n   * @private\n   */\n\n\n  ThumbnailView.prototype.getModuleName = function () {\n    return 'ThumbnailView';\n  };\n\n  return ThumbnailView;\n}();\n\nexport { ThumbnailView };","map":{"version":3,"names":["AjaxHandler","createElement","ThumbnailView","pdfViewer","pdfViewerBase","_this","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","isThumbnailClicked","thumbnailClick","event","proxy","pageNumber","getPageNumberFromID","srcElement","id","previousElement","classList","remove","add","parentElement","element","setSelectionStyle","fireThumbnailClick","goToThumbnailPage","focusViewerContainer","annotationModule","inkAnnotationModule","currentPageNumber","parseInt","drawInkAnnotation","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","children","prototype","createThumbnailContainer","thumbnailView","className","navigationPane","sideBarContent","appendChild","openThumbnailPane","createRequestForThumbnails","isIE","document","documentMode","Promise","renderThumbnailImage","reject","requestCreation","startIndex","pageCount","jsonObject","startPage","toString","endPage","sizeX","sizeY","hashId","action","elementId","uniqueId","documentId","jsonDocumentId","thumbnailRequestHandler","url","serviceUrl","serverActionSettings","renderThumbnail","responseType","send","onSuccess","result","data","JSON","parse","error","onControlError","fireAjaxRequestSuccess","isThumbnailViewOpen","isThumbnailOpen","sideBarTitle","textContent","localeObj","getConstant","getElementById","style","display","bookmarkContent","querySelector","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","isBookmarkOpen","onFailure","fireAjaxRequestFailed","status","statusText","onError","openNotificationPopup","gotoThumbnailImage","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","offsetTop","clientTop","scrollTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","length","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","split","thumbPageNumber","percent","pageId","thumbnail","setMouseFocusStyle","isNaN","i","pageLink","attrs","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","src","pageSize","height","width","left","position","wireUpEvents","setMouseFocusToFirstPage","enableThumbnailButton","all","addEventListener","unwireUpEvents","removeEventListener","updateScrollTop","thumbnailElement","contains","clear","sideBarContentContainer","hasChildNodes","removeChild","lastChild","resetThumbnailView","getVisibleElements","scrollElement","thumbnailViewChildren","top","bottom","clientHeight","scrollLeft","right","clientWidth","isThumbnailElementBottomAfterViewTop","thumbnailViewChildrenElement","elementBottom","visible","currentHeight","viewHeight","viewBottom","hiddenHeight","currentWidth","viewWidth","viewRight","hiddenWidth","percentVisible","firstVisibleElementInd","binarySearchFirstItem","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","offsetLeft","clientLeft","Math","max","push","x","y","items","condition","minIndex","maxIndex","currentIndex","index","pageTop","destroy","getModuleName"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/thumbnail-view/thumbnail-view.js"],"sourcesContent":["/* eslint-disable */\nimport { AjaxHandler } from '../index';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @param pdfViewer\n     * @param pdfViewerBase\n     * @param pdfViewer\n     * @param pdfViewerBase\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @param event\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.pdfViewer.fireThumbnailClick(pageNumber + 1);\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n            if (_this.pdfViewer.annotationModule && _this.pdfViewer.annotationModule.inkAnnotationModule) {\n                // eslint-disable-next-line\n                var currentPageNumber = parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n                _this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n            }\n        };\n        /**\n         * @param event\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @param event\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // eslint-disable-next-line max-len\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * Open the thumbnail pane of the PdfViewer.\n     *\n     * @returns void\n     */\n    ThumbnailView.prototype.openThumbnailPane = function () {\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.openThumbnailPane();\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // eslint-disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // eslint-disable-next-line\n            return new Promise(\n            // eslint-disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        // Removed the condition to skip multiple request for thumbnail image.\n        proxy.startIndex = proxy.thumbnailLimit;\n        // eslint-disable-next-line max-len\n        proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        // eslint-disable-next-line max-len\n        var jsonObject = { startPage: proxy.startIndex.toString(), endPage: proxy.thumbnailLimit.toString(), sizeX: \"99.7\", sizeY: \"141\", hashId: proxy.pdfViewerBase.hashId, action: 'RenderThumbnailImages', elementId: proxy.pdfViewer.element.id, uniqueId: proxy.pdfViewerBase.documentId };\n        if (this.pdfViewerBase.jsonDocumentId) {\n            // eslint-disable-next-line\n            jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n        }\n        this.thumbnailRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.thumbnailRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail;\n        this.thumbnailRequestHandler.responseType = 'json';\n        this.thumbnailRequestHandler.send(jsonObject);\n        // eslint-disable-next-line\n        this.thumbnailRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            if (data) {\n                if (typeof data !== 'object') {\n                    try {\n                        data = JSON.parse(data);\n                    }\n                    catch (error) {\n                        proxy.pdfViewerBase.onControlError(500, data, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n                        data = null;\n                    }\n                }\n                if (data && data.uniqueId === proxy.pdfViewerBase.documentId) {\n                    proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderThumbnail, data);\n                    proxy.renderThumbnailImage(data);\n                    if (proxy.pdfViewer.isThumbnailViewOpen) {\n                        proxy.pdfViewerBase.navigationPane.isThumbnailOpen = true;\n                        // eslint-disable-next-line max-len\n                        proxy.pdfViewerBase.navigationPane.sideBarTitle.textContent = proxy.pdfViewer.localeObj.getConstant('Page Thumbnails');\n                        document.getElementById(proxy.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n                        var bookmarkContent = proxy.pdfViewer.element.querySelector('.e-pv-bookmark-view');\n                        if (bookmarkContent) {\n                            bookmarkContent.style.display = 'none';\n                        }\n                        proxy.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme();\n                        proxy.pdfViewerBase.navigationPane.updateViewerContainerOnExpand();\n                        proxy.pdfViewerBase.navigationPane.isBookmarkOpen = false;\n                    }\n                }\n            }\n        };\n        // eslint-disable-next-line\n        this.thumbnailRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n        };\n        // eslint-disable-next-line\n        this.thumbnailRequestHandler.onError = function (result) {\n            proxy.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderThumbnail);\n        };\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // eslint-disable-next-line max-len\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // eslint-disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // eslint-disable-next-line radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // eslint-disable-next-line radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // eslint-disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            var startPage = (data && isNaN(data.startPage)) ? data.startPage : this.startIndex;\n            var endPage = (data && isNaN(data.endPage)) ? data.endPage : this.thumbnailLimit;\n            for (var i = startPage; i < endPage; i++) {\n                // eslint-disable-next-line max-len\n                var pageLink = createElement('a', { id: 'page_' + i, attrs: { 'aria-label': 'Thumbnail of Page' + (i + 1), 'tabindex': '-1', 'role': 'link' }, className: 'e-pv-thumbnail-anchor-node' });\n                // eslint-disable-next-line max-len\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // eslint-disable-next-line max-len\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // eslint-disable-next-line max-len\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // eslint-disable-next-line max-len\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                if (this.pdfViewerBase.pageSize[i] && (this.pdfViewerBase.pageSize[i].height < this.pdfViewerBase.pageSize[i].width)) {\n                    this.thumbnailImage.style.height = '86px';\n                    this.thumbnailImage.style.width = '126px';\n                    thumbnail.style.height = '100px';\n                    thumbnail.style.width = '140px';\n                    pageLink.style.left = '-25px';\n                    pageLink.style.position = 'relative';\n                    thumbnailPageNumber.style.left = '18px';\n                    thumbnailPageNumber.style.position = 'relative';\n                }\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // eslint-disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // eslint-disable-next-line max-len\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        if (this.pdfViewerBase.navigationPane) {\n            if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n                this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n            }\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.resetThumbnailView();\n        }\n        if (this.thumbnailRequestHandler) {\n            this.thumbnailRequestHandler.clear();\n        }\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        /**\n         * @param thumbnailViewChildrenElement\n         */\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // eslint-disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // eslint-disable-next-line no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible };\n    };\n    // eslint-disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // eslint-disable-next-line no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}