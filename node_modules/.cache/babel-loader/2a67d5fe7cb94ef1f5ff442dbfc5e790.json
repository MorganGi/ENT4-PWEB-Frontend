{"ast":null,"code":"import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { AjaxHandler } from '../index';\n/**\n * Print module\n */\n\nvar Print =\n/** @class */\nfunction () {\n  /**\n   * @param viewer\n   * @param base\n   * @private\n   */\n  function Print(viewer, base) {\n    this.pdfViewer = viewer;\n    this.pdfViewerBase = base;\n  }\n  /**\n   * Print the PDF document being loaded in the ejPdfViewer control.\n   *\n   * @returns void\n   */\n\n\n  Print.prototype.print = function () {\n    var _this = this;\n\n    var pageIndex;\n\n    if (this.pdfViewerBase.pageCount > 0) {\n      // eslint-disable-next-line max-len\n      this.printViewerContainer = createElement('div', {\n        id: this.pdfViewer.element.id + '_print_viewer_container',\n        className: 'e-pv-print-viewer-container'\n      });\n\n      if (this.pdfViewer.printMode === 'Default') {\n        this.pdfViewerBase.showPrintLoadingIndicator(true);\n        this.iframe = document.createElement('iframe');\n        this.iframe.className = 'iframeprint';\n        this.iframe.id = 'iframePrint';\n        this.iframe.style.position = 'fixed';\n        this.iframe.style.top = '-100000000px';\n        document.body.appendChild(this.iframe);\n        this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n        this.frameDoc.document.open();\n      } else {\n        this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWindow.moveTo(0, 0);\n        this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n        this.createPrintLoadingIndicator(this.printWindow.document.body);\n      }\n\n      setTimeout(function () {\n        for (pageIndex = 0; pageIndex < _this.pdfViewerBase.pageCount; pageIndex++) {\n          var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n          var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n\n          _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n        }\n\n        _this.pdfViewer.firePrintEnd(_this.pdfViewer.downloadFileName);\n      }, 100);\n    }\n  };\n\n  Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n    var proxy = this; // tslint: disable-next-line:max-line-length\n    // set default zoomFactor value.\n\n    var jsonObject = {\n      pageNumber: pageIndex.toString(),\n      documentId: this.pdfViewerBase.documentId,\n      hashId: this.pdfViewerBase.hashId,\n      zoomFactor: \"2\",\n      action: 'PrintImages',\n      elementId: this.pdfViewer.element.id,\n      uniqueId: this.pdfViewerBase.documentId\n    };\n\n    if (this.pdfViewerBase.jsonDocumentId) {\n      // eslint-disable-next-line\n      jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n    }\n\n    proxy.pdfViewerBase.createFormfieldsJsonData();\n    proxy.printRequestHandler = new AjaxHandler(proxy.pdfViewer);\n    proxy.printRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.print;\n    proxy.printRequestHandler.responseType = null;\n    proxy.printRequestHandler.mode = false;\n\n    if (this.pdfViewerBase.validateForm && this.pdfViewer.enableFormFieldsValidation) {\n      this.pdfViewer.fireValidatedFailed(proxy.pdfViewer.serverActionSettings.download);\n      this.pdfViewerBase.validateForm = false;\n      this.pdfViewerBase.showPrintLoadingIndicator(false);\n    } else {\n      proxy.printRequestHandler.send(jsonObject);\n    } // eslint-disable-next-line\n\n\n    proxy.printRequestHandler.onSuccess = function (result) {\n      proxy.pdfViewerBase.isPrint = true; // eslint-disable-next-line\n\n      var printImage = result.data;\n\n      if (printImage) {\n        if (typeof printImage !== 'object') {\n          try {\n            printImage = JSON.parse(printImage);\n\n            if (typeof printImage !== 'object') {\n              proxy.pdfViewerBase.onControlError(500, printImage, proxy.pdfViewer.serverActionSettings.print);\n              printImage = null;\n            }\n          } catch (error) {\n            proxy.pdfViewerBase.onControlError(500, printImage, proxy.pdfViewer.serverActionSettings.print);\n            printImage = null;\n          }\n        }\n      }\n\n      if (printImage && printImage.uniqueId === proxy.pdfViewerBase.documentId) {\n        proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.print, printImage);\n        var annotationSource_1 = '';\n\n        if (!proxy.pdfViewer.annotationSettings.skipPrint) {\n          // eslint-disable-next-line\n          var annotationCollections = proxy.pdfViewerBase.documentAnnotationCollections;\n\n          if (annotationCollections && annotationCollections[printImage.pageNumber] && proxy.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            // eslint-disable-next-line\n            var printCollection = annotationCollections[printImage.pageNumber];\n\n            if (proxy.pdfViewerBase.isImportAction) {\n              var textMarkupAnnotation = printCollection.textMarkupAnnotation;\n              var shapeAnnotation = printCollection.shapeAnnotation;\n              var measureShapeAnnotation = printCollection.measureShapeAnnotation;\n              var stampAnnotation = printCollection.stampAnnotations; // eslint-disable-next-line\n\n              var stickyNoteAnnotation = printCollection.stickyNotesAnnotation; // eslint-disable-next-line max-len\n\n              annotationSource_1 = proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(textMarkupAnnotation, printImage.pageNumber, stampAnnotation, shapeAnnotation, measureShapeAnnotation, stickyNoteAnnotation);\n            } else {\n              // eslint-disable-next-line max-len\n              annotationSource_1 = proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(printCollection.textMarkupAnnotation, printImage.pageNumber, printCollection.stampAnnotations, printCollection.shapeAnnotation, printCollection.measureShapeAnnotation, printCollection.stickyNoteAnnotation);\n            }\n          }\n\n          if (proxy.pdfViewerBase.isAnnotationCollectionRemoved) {\n            // eslint-disable-next-line max-len\n            annotationSource_1 = proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(null, printImage.pageNumber, null, null, null, null);\n          }\n        }\n\n        var currentPageNumber_1 = printImage.pageNumber; // eslint-disable-next-line max-len\n\n        proxy.printCanvas = createElement('canvas', {\n          id: proxy.pdfViewer.element.id + '_printCanvas_' + pageIndex,\n          className: 'e-pv-print-canvas'\n        });\n        proxy.printCanvas.style.width = pageWidth + 'px';\n        proxy.printCanvas.style.height = pageHeight + 'px';\n        var printScaleValue = 2;\n\n        if (pageHeight < pageWidth && this.pdfViewer.enablePrintRotation) {\n          proxy.printCanvas.height = pageWidth * printScaleValue * window.devicePixelRatio;\n          proxy.printCanvas.width = pageHeight * printScaleValue * window.devicePixelRatio;\n        } else {\n          proxy.printCanvas.height = pageHeight * printScaleValue * window.devicePixelRatio;\n          proxy.printCanvas.width = pageWidth * printScaleValue * window.devicePixelRatio;\n        }\n\n        var context_1 = proxy.printCanvas.getContext('2d');\n        var pageImage_1 = new Image();\n        var annotationImage_1 = new Image();\n\n        pageImage_1.onload = function () {\n          if (pageHeight > pageWidth || !proxy.pdfViewer.enablePrintRotation) {\n            context_1.drawImage(pageImage_1, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n\n            if (annotationSource_1) {\n              context_1.drawImage(annotationImage_1, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n            }\n          } else {\n            // translate to center canvas\n            context_1.translate(proxy.printCanvas.width * 0.5, proxy.printCanvas.height * 0.5); // rotate the canvas to - 90 degree\n\n            context_1.rotate(-0.5 * Math.PI); // un translate the canvas back to origin\n\n            context_1.translate(-proxy.printCanvas.height * 0.5, -proxy.printCanvas.width * 0.5); // draw the image\n\n            context_1.drawImage(pageImage_1, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n\n            if (annotationSource_1) {\n              context_1.drawImage(annotationImage_1, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n            }\n          }\n\n          if (currentPageNumber_1 === proxy.pdfViewerBase.pageCount - 1) {\n            proxy.printWindowOpen();\n          }\n\n          proxy.pdfViewer.renderDrawing(null, pageIndex);\n        };\n\n        pageImage_1.src = printImage.image;\n        annotationImage_1.src = annotationSource_1;\n        proxy.printViewerContainer.appendChild(proxy.printCanvas);\n      }\n\n      proxy.pdfViewerBase.isPrint = false;\n    }; // eslint-disable-next-line\n\n\n    this.printRequestHandler.onFailure = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.print);\n    }; // eslint-disable-next-line\n\n\n    this.printRequestHandler.onError = function (result) {\n      proxy.pdfViewerBase.openNotificationPopup();\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.print);\n    };\n  }; // eslint-disable-next-line\n\n\n  Print.prototype.renderFieldsForPrint = function (pageIndex, heightRatio, widthRatio) {\n    // eslint-disable-next-line\n    var data = null;\n    var targetField;\n\n    if (this.pdfViewer.printMode === 'Default') {\n      targetField = this.frameDoc.document.getElementById('fields_' + pageIndex);\n    } else {\n      targetField = this.printWindow.document.getElementById('fields_' + pageIndex);\n    }\n\n    if (this.pdfViewer.formFieldsModule) {\n      data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n    }\n\n    if (!this.pdfViewer.formDesignerModule) {\n      if (data) {\n        // eslint-disable-next-line\n        var formFieldsData = JSON.parse(data);\n\n        for (var i = 0; i < formFieldsData.length; i++) {\n          // eslint-disable-next-line\n          var currentData = formFieldsData[i]; // eslint-disable-next-line\n\n          if (parseFloat(currentData['PageIndex']) === pageIndex) {\n            // eslint-disable-next-line\n            var field = this.pdfViewer.formFieldsModule.createFormFields(currentData, pageIndex, i, targetField); // eslint-disable-next-line\n\n            var inputField = field.currentField;\n\n            if (inputField) {\n              // eslint-disable-next-line\n              var bounds = currentData['LineBounds']; // eslint-disable-next-line\n\n              var font = currentData['Font'];\n              this.applyPosition(inputField, bounds, font, heightRatio, widthRatio);\n              inputField.InsertSpaces = currentData.InsertSpaces;\n\n              if (inputField.InsertSpaces) {\n                // eslint-disable-next-line\n                var font_1 = parseInt(inputField.style.width) / inputField.maxLength - parseFloat(inputField.style.fontSize) / 2 - 0.6;\n                inputField.style.letterSpacing = '' + font_1 + 'px';\n                inputField.style.fontFamily = 'monospace';\n              } // eslint-disable-next-line\n\n\n              var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n\n              if (pageDetails.width > pageDetails.height && this.pdfViewer.enablePrintRotation) {\n                /*\n                The below logig have been modified for the bug https://syncfusion.atlassian.net/browse/EJ2-57986\n                This code changes is specific for form field elements.\n                         inputField.style.transform = 'rotate(-90deg)';\n                    let previousLeft: number = parseFloat(inputField.style.left);\n                    let currentWidthPosition: number = parseFloat(inputField.style.width) / 2;\n                    let currentHeightPosition: number = parseFloat(inputField.style.height) / 2;\n                    let currentTop: number = parseFloat(inputField.style.top);\n                    let currentHeight: number = parseFloat(inputField.style.height);\n                    inputField.style.left = (currentHeightPosition - currentWidthPosition + currentTop) + 'px';\n                    inputField.style.top = (pageDetails.width / widthRatio) - (currentHeight / heightRatio) - ((currentWidthPosition / heightRatio) - (currentHeightPosition / heightRatio) + previousLeft) + 'px';\n                */\n                var x = this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.X);\n                var y = this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Y);\n                var width = this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Width);\n                var height = this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Height);\n                var pageHeight = pageDetails.width;\n                var top = pageHeight - x - height;\n                var left = y + height;\n                var width = width;\n                var height = height;\n                inputField.style.transform = \"rotate(-90deg)\";\n                inputField.style.transformOrigin = \"left bottom\";\n                inputField.style.left = left + 'px';\n                inputField.style.top = top + 'px';\n                inputField.style.height = height + 'px';\n                inputField.style.width = width + 'px';\n              }\n\n              inputField.style.backgroundColor = 'transparent';\n\n              if (!currentData.IsSignatureField) {\n                inputField.style.borderColor = 'transparent';\n              }\n\n              targetField.appendChild(inputField);\n            }\n          }\n        }\n      }\n    } else {\n      var formDesignerData = null;\n\n      if (this.pdfViewer.formDesignerModule) {\n        formDesignerData = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n      }\n\n      if (formDesignerData) {\n        var formDesignerFieldsData = JSON.parse(formDesignerData);\n\n        for (var i = 0; i < formDesignerFieldsData.length; i++) {\n          // eslint-disable-next-line\n          var currentData = formDesignerFieldsData[i].FormField;\n\n          if (currentData.pageNumber - 1 === pageIndex && currentData.isPrint) {\n            var signatureField = this.pdfViewer.nameTable[formDesignerFieldsData[i].Key.split(\"_\")[0]];\n            var element = signatureField.wrapper.children[0];\n            var htmlElement = void 0;\n\n            if (element) {\n              if (currentData.formFieldAnnotationType === \"RadioButton\") {\n                for (var j = 0; j < currentData.radiobuttonItem.length; j++) {\n                  signatureField = this.pdfViewer.nameTable[currentData.radiobuttonItem[j].id.split(\"_\")[0]];\n                  htmlElement = this.createFormDesignerFields(currentData.radiobuttonItem[j], element, signatureField);\n\n                  if (htmlElement) {\n                    // eslint-disable-next-line\n                    var bounds = currentData.radiobuttonItem[j].lineBound; // eslint-disable-next-line\n\n                    var font = currentData.radiobuttonItem[j].fontFamily;\n                    this.applyPosition(htmlElement, bounds, font, heightRatio, widthRatio, true, currentData.radiobuttonItem[j].zoomValue, currentData.pageNumber - 1);\n                    targetField.appendChild(htmlElement);\n                  }\n                }\n              } else {\n                htmlElement = this.createFormDesignerFields(currentData, element, signatureField);\n\n                if (htmlElement) {\n                  // eslint-disable-next-line\n                  var bounds = currentData.lineBound; // eslint-disable-next-line\n\n                  var font = currentData.fontFamily;\n                  this.applyPosition(htmlElement, bounds, font, heightRatio, widthRatio, true, currentData.zoomValue, currentData.pageNumber - 1);\n                  targetField.appendChild(htmlElement);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n\n  Print.prototype.createFormDesignerFields = function (currentData, element, signatureField) {\n    var htmlElement;\n    var parentHtmlElement;\n    var parentHtmlElementAttribute = {\n      'id': \"form_field_\" + element.id + '_html_element',\n      'class': 'foreign-object'\n    };\n    parentHtmlElement = this.pdfViewer.formDesignerModule.createHtmlElement('div', parentHtmlElementAttribute);\n    var HtmlElementAttribute = {\n      'id': element.id + '_html_element',\n      'class': 'foreign-object'\n    };\n    htmlElement = this.pdfViewer.formDesignerModule.createHtmlElement('div', HtmlElementAttribute);\n\n    if (currentData.formFieldAnnotationType === \"SignatureField\" || currentData.formFieldAnnotationType === \"InitialField\") {\n      this.pdfViewer.formDesignerModule.disableSignatureClickEvent = true;\n      element.template = htmlElement.appendChild(this.pdfViewer.formDesignerModule.createSignatureDialog(this.pdfViewer, signatureField, null, true));\n      this.pdfViewer.formDesignerModule.disableSignatureClickEvent = false;\n    } else if (currentData.formFieldAnnotationType === \"DropdownList\") {\n      element.template = htmlElement.appendChild(this.pdfViewer.formDesignerModule.createDropDownList(element, signatureField));\n    } else if (currentData.formFieldAnnotationType === \"ListBox\") {\n      element.template = htmlElement.appendChild(this.pdfViewer.formDesignerModule.createListBox(element, signatureField));\n    } else {\n      element.template = htmlElement.appendChild(this.pdfViewer.formDesignerModule.createInputElement(currentData.formFieldAnnotationType, signatureField, null, true));\n    }\n\n    parentHtmlElement.appendChild(htmlElement);\n    return htmlElement;\n  };\n  /**\n   * @param inputField\n   * @param bounds\n   * @param font\n   * @param heightRatio\n   * @param widthRatio\n   * @param inputField\n   * @param bounds\n   * @param font\n   * @param heightRatio\n   * @param widthRatio\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Print.prototype.applyPosition = function (inputField, bounds, font, heightRatio, widthRatio, isFormDesignerField, zoomValue, pageIndex) {\n    if (bounds) {\n      var pageHeight = void 0;\n      var left = void 0;\n      var top_1;\n      var width = void 0;\n      var height = void 0; // This code changes is specific for form designer elements. https://syncfusion.atlassian.net/browse/EJ2-57986 \n\n      var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n      var actualWidth = pageDetails ? pageDetails.width : 0;\n      var actualHeight = pageDetails ? pageDetails.height : 0;\n\n      if (isFormDesignerField && actualHeight < actualWidth && this.pdfViewer.enablePrintRotation) {\n        /*\n        The below logig have been modified for the bug https://syncfusion.atlassian.net/browse/EJ2-57986\n        This code changes is specific for form designer elements.\n        pageHeight = actualWidth;\n        top=  pageHeight - bounds.X / zoomValue;\n        left = bounds.Y / zoomValue;\n        width = (bounds.Width / zoomValue);\n        height = (bounds.Height / zoomValue);\n        inputField.style.transform = \"rotate(-90deg)\";\n        inputField.style.transformOrigin = \"top left\";\n        */\n        // need to set inverse page height and width  \n        pageHeight = actualWidth;\n        top_1 = pageHeight - bounds.X / zoomValue - bounds.Height / zoomValue;\n        left = (bounds.Y + bounds.Height) / zoomValue;\n        width = bounds.Width / zoomValue;\n        height = bounds.Height / zoomValue;\n        inputField.style.transform = \"rotate(-90deg)\";\n        inputField.style.transformOrigin = \"left bottom\";\n      } else {\n        left = isFormDesignerField ? bounds.X / zoomValue / widthRatio : this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.X) / widthRatio;\n        top_1 = isFormDesignerField ? bounds.Y / zoomValue / heightRatio : this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Y) / heightRatio;\n        width = isFormDesignerField ? bounds.Width / zoomValue / widthRatio : this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Width) / widthRatio;\n        height = isFormDesignerField ? bounds.Height / zoomValue / heightRatio : this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Height) / heightRatio;\n      }\n\n      var fontHeight = 0;\n\n      if (font !== null && font.Height) {\n        inputField.style.fontFamily = font.Name;\n\n        if (font.Italic) {\n          inputField.style.fontStyle = 'italic';\n        }\n\n        if (font.Bold) {\n          inputField.style.fontWeight = 'Bold';\n        }\n\n        fontHeight = this.pdfViewerBase.ConvertPointToPixel(font.Size);\n      }\n\n      if (Browser.isIE) {\n        top_1 = top_1 - 1;\n      }\n\n      this.pdfViewerBase.setStyleToTextDiv(inputField, left, top_1, fontHeight, width, height, true);\n    }\n  };\n\n  Print.prototype.printWindowOpen = function () {\n    var _this = this;\n\n    var browserUserAgent = navigator.userAgent; // eslint-disable-next-line\n\n    var printDocument;\n\n    if (this.pdfViewer.printMode === 'Default') {\n      printDocument = this.frameDoc.document;\n    } else {\n      printDocument = this.printWindow.document;\n    }\n\n    for (var i = 0; i < this.printViewerContainer.children.length; i++) {\n      var pageWidth = this.pdfViewerBase.pageSize[i].width;\n      var pageHeight = this.pdfViewerBase.pageSize[i].height;\n      var printHeight = pageHeight;\n      var printWidth = pageWidth - 1;\n\n      if (pageHeight < pageWidth && this.pdfViewer.enablePrintRotation) {\n        printHeight = pageWidth;\n        printWidth = pageHeight;\n      } // eslint-disable-next-line max-len\n\n\n      var canvasUrl = this.printViewerContainer.children[i].toDataURL();\n      printDocument.write('<div style=\"margin:0mm;width:' + printWidth.toString() + 'px;height:' + printHeight.toString() + 'px;position:relative\"><img src=\"' + canvasUrl + '\" id=\"' + 'image_' + i + '\" /><div id=\"' + 'fields_' + i + '\" style=\"margin:0px;top:0px;left:0px;position:absolute;width:' + printWidth.toString() + 'px;height:' + printHeight.toString() + 'px;z-index:2\"></div></div>');\n\n      if (this.pdfViewer.formFieldsModule || this.pdfViewer.formDesignerModule) {\n        var heightRatio;\n        var widthRatio;\n\n        if (pageHeight < pageWidth && this.pdfViewer.enablePrintRotation) {\n          heightRatio = pageHeight / pageWidth;\n          widthRatio = pageWidth / pageHeight;\n        } else {\n          heightRatio = 1;\n          widthRatio = 1;\n        }\n\n        this.renderFieldsForPrint(i, heightRatio, widthRatio);\n      }\n\n      if (i === 0) {\n        if (browserUserAgent.indexOf('Chrome') !== -1 || browserUserAgent.indexOf('Safari') !== -1 || browserUserAgent.indexOf('Firefox') !== -1) {\n          printDocument.write('<!DOCTYPE html>');\n          printDocument.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; width:100% }' + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }' + ' img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; }' + ' div{ page-break-inside: avoid; }} @page{margin:0mm;  size:' + printWidth.toString() + 'px ' + printHeight.toString() + 'px; }</style></head><body><center class=\"loader\">');\n        } else {\n          printDocument.write('<!DOCTYPE html>');\n          printDocument.write('<html><head>' + '<style>html, body { height: 100%; } img { height: 100%; width: 100%; }@media print { body { margin: 0cm; }' + 'img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; } ' + 'div{ page-break-inside: avoid; }} @page{margin:0mm;  size:' + printWidth.toString() + 'px ' + printHeight.toString() + 'px; }</style></head><body><center>');\n        }\n      }\n    }\n\n    if (Browser.isIE || Browser.info.name === 'edge') {\n      try {\n        if (this.pdfViewer.printMode === 'Default') {\n          this.pdfViewerBase.showPrintLoadingIndicator(false);\n          this.iframe.contentWindow.document.execCommand('print', false, null);\n        } else {\n          this.printWindow.document.execCommand('print', false, null);\n        }\n      } catch (e) {\n        if (this.pdfViewer.printMode === 'Default') {\n          this.pdfViewerBase.showPrintLoadingIndicator(false);\n          this.iframe.contentWindow.print();\n        } else {\n          this.printWindow.print();\n        }\n      }\n    } else {\n      setTimeout(function () {\n        if (_this.pdfViewer.printMode === 'Default') {\n          _this.pdfViewerBase.showPrintLoadingIndicator(false);\n\n          _this.iframe.contentWindow.print();\n\n          _this.iframe.contentWindow.focus();\n\n          document.body.removeChild(_this.iframe);\n        } else {\n          if (_this.printWindow) {\n            _this.printWindow.print();\n\n            _this.printWindow.focus();\n\n            _this.printWindow.close();\n          }\n        }\n      }, 200);\n    }\n  }; // eslint-disable-next-line\n\n\n  Print.prototype.createPrintLoadingIndicator = function (element) {\n    // eslint-disable-next-line\n    var printWindowContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_printWindowcontainer'\n    });\n    printWindowContainer.style.height = '100%';\n    printWindowContainer.style.width = '100%';\n    printWindowContainer.style.position = 'absolute';\n    printWindowContainer.style.zIndex = 2000;\n    printWindowContainer.style.left = 0;\n    printWindowContainer.style.top = 0;\n    printWindowContainer.style.overflow = 'auto';\n    printWindowContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.3)';\n    element.appendChild(printWindowContainer);\n    var printWaitingPopup = createElement('div', {\n      id: this.pdfViewer.element.id + '_printLoadingContainer'\n    });\n    printWaitingPopup.style.position = 'absolute';\n    printWaitingPopup.style.width = '50px';\n    printWaitingPopup.style.height = '50px';\n    printWaitingPopup.style.left = '46%';\n    printWaitingPopup.style.top = '45%';\n    printWindowContainer.style.zIndex = 3000;\n    printWindowContainer.appendChild(printWaitingPopup); // eslint-disable-next-line\n\n    var printImageContainer = new Image(); // eslint-disable-next-line\n\n    printImageContainer.src = 'data:image/gif;base64,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';\n    printImageContainer.style.width = '50px';\n    printImageContainer.style.height = '50px';\n    printWaitingPopup.appendChild(printImageContainer);\n    var printLabelContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_printLabelContainer'\n    });\n    printLabelContainer.style.position = 'absolute';\n    printLabelContainer.textContent = 'Loading ...';\n    printLabelContainer.style.fontWeight = 'Bold';\n    printLabelContainer.style.left = '46%';\n    printLabelContainer.style.top = '54.5%';\n    printLabelContainer.style.zIndex = '3000';\n    printWindowContainer.appendChild(printLabelContainer);\n  };\n  /**\n   * @private\n   */\n\n\n  Print.prototype.destroy = function () {\n    this.printViewerContainer = undefined;\n    this.frameDoc = undefined;\n    this.printWindow = undefined;\n  };\n  /**\n   * @private\n   */\n\n\n  Print.prototype.getModuleName = function () {\n    return 'Print';\n  };\n\n  return Print;\n}();\n\nexport { Print };","map":{"version":3,"names":["createElement","Browser","AjaxHandler","Print","viewer","base","pdfViewer","pdfViewerBase","prototype","print","_this","pageIndex","pageCount","printViewerContainer","id","element","className","printMode","showPrintLoadingIndicator","iframe","document","style","position","top","body","appendChild","frameDoc","contentWindow","contentDocument","open","printWindow","window","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","availHeight","createPrintLoadingIndicator","setTimeout","pageWidth","pageSize","width","pageHeight","height","printModule","createRequestForPrint","firePrintEnd","downloadFileName","proxy","jsonObject","pageNumber","toString","documentId","hashId","zoomFactor","action","elementId","uniqueId","jsonDocumentId","createFormfieldsJsonData","printRequestHandler","url","serviceUrl","serverActionSettings","responseType","mode","validateForm","enableFormFieldsValidation","fireValidatedFailed","download","send","onSuccess","result","isPrint","printImage","data","JSON","parse","onControlError","error","fireAjaxRequestSuccess","annotationSource_1","annotationSettings","skipPrint","annotationCollections","documentAnnotationCollections","isTextMarkupAnnotationModule","printCollection","isImportAction","textMarkupAnnotation","shapeAnnotation","measureShapeAnnotation","stampAnnotation","stampAnnotations","stickyNoteAnnotation","stickyNotesAnnotation","annotationModule","textMarkupAnnotationModule","printTextMarkupAnnotations","isAnnotationCollectionRemoved","currentPageNumber_1","printCanvas","printScaleValue","enablePrintRotation","devicePixelRatio","context_1","getContext","pageImage_1","Image","annotationImage_1","onload","drawImage","translate","rotate","Math","PI","printWindowOpen","renderDrawing","src","image","onFailure","fireAjaxRequestFailed","status","statusText","onError","openNotificationPopup","renderFieldsForPrint","heightRatio","widthRatio","targetField","getElementById","formFieldsModule","getItemFromSessionStorage","formDesignerModule","formFieldsData","i","length","currentData","parseFloat","field","createFormFields","inputField","currentField","bounds","font","applyPosition","InsertSpaces","font_1","parseInt","maxLength","fontSize","letterSpacing","fontFamily","pageDetails","x","ConvertPointToPixel","X","y","Y","Width","Height","left","transform","transformOrigin","backgroundColor","IsSignatureField","borderColor","formDesignerData","formDesignerFieldsData","FormField","signatureField","nameTable","Key","split","wrapper","children","htmlElement","formFieldAnnotationType","j","radiobuttonItem","createFormDesignerFields","lineBound","zoomValue","parentHtmlElement","parentHtmlElementAttribute","createHtmlElement","HtmlElementAttribute","disableSignatureClickEvent","template","createSignatureDialog","createDropDownList","createListBox","createInputElement","isFormDesignerField","top_1","actualWidth","actualHeight","fontHeight","Name","Italic","fontStyle","Bold","fontWeight","Size","isIE","setStyleToTextDiv","browserUserAgent","navigator","userAgent","printDocument","printHeight","printWidth","canvasUrl","toDataURL","write","indexOf","info","name","execCommand","e","focus","removeChild","close","printWindowContainer","zIndex","overflow","printWaitingPopup","printImageContainer","printLabelContainer","textContent","destroy","undefined","getModuleName"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/print/print.js"],"sourcesContent":["import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { AjaxHandler } from '../index';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @param viewer\n     * @param base\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     *\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // eslint-disable-next-line max-len\n            this.printViewerContainer = createElement('div', {\n                id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container'\n            });\n            if (this.pdfViewer.printMode === 'Default') {\n                this.pdfViewerBase.showPrintLoadingIndicator(true);\n                this.iframe = document.createElement('iframe');\n                this.iframe.className = 'iframeprint';\n                this.iframe.id = 'iframePrint';\n                this.iframe.style.position = 'fixed';\n                this.iframe.style.top = '-100000000px';\n                document.body.appendChild(this.iframe);\n                this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n                this.frameDoc.document.open();\n            }\n            else {\n                this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n                this.printWindow.moveTo(0, 0);\n                this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n                this.createPrintLoadingIndicator(this.printWindow.document.body);\n            }\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex < _this.pdfViewerBase.pageCount; pageIndex++) {\n                    var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n                    var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n                    _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                }\n                _this.pdfViewer.firePrintEnd(_this.pdfViewer.downloadFileName);\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        // tslint: disable-next-line:max-line-length\n        // set default zoomFactor value.\n        var jsonObject = {\n            pageNumber: pageIndex.toString(), documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: \"2\",\n            action: 'PrintImages',\n            elementId: this.pdfViewer.element.id,\n            uniqueId: this.pdfViewerBase.documentId\n        };\n        if (this.pdfViewerBase.jsonDocumentId) {\n            // eslint-disable-next-line\n            jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n        }\n        proxy.pdfViewerBase.createFormfieldsJsonData();\n        proxy.printRequestHandler = new AjaxHandler(proxy.pdfViewer);\n        proxy.printRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.print;\n        proxy.printRequestHandler.responseType = null;\n        proxy.printRequestHandler.mode = false;\n        if (this.pdfViewerBase.validateForm && this.pdfViewer.enableFormFieldsValidation) {\n            this.pdfViewer.fireValidatedFailed(proxy.pdfViewer.serverActionSettings.download);\n            this.pdfViewerBase.validateForm = false;\n            this.pdfViewerBase.showPrintLoadingIndicator(false);\n        }\n        else {\n            proxy.printRequestHandler.send(jsonObject);\n        }\n        // eslint-disable-next-line\n        proxy.printRequestHandler.onSuccess = function (result) {\n            proxy.pdfViewerBase.isPrint = true;\n            // eslint-disable-next-line\n            var printImage = result.data;\n            if (printImage) {\n                if (typeof printImage !== 'object') {\n                    try {\n                        printImage = JSON.parse(printImage);\n                        if (typeof printImage !== 'object') {\n                            proxy.pdfViewerBase.onControlError(500, printImage, proxy.pdfViewer.serverActionSettings.print);\n                            printImage = null;\n                        }\n                    }\n                    catch (error) {\n                        proxy.pdfViewerBase.onControlError(500, printImage, proxy.pdfViewer.serverActionSettings.print);\n                        printImage = null;\n                    }\n                }\n            }\n            if (printImage && printImage.uniqueId === proxy.pdfViewerBase.documentId) {\n                proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.print, printImage);\n                var annotationSource_1 = '';\n                if (!proxy.pdfViewer.annotationSettings.skipPrint) {\n                    // eslint-disable-next-line\n                    var annotationCollections = proxy.pdfViewerBase.documentAnnotationCollections;\n                    if (annotationCollections && annotationCollections[printImage.pageNumber] && proxy.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                        // eslint-disable-next-line\n                        var printCollection = annotationCollections[printImage.pageNumber];\n                        if (proxy.pdfViewerBase.isImportAction) {\n                            var textMarkupAnnotation = printCollection.textMarkupAnnotation;\n                            var shapeAnnotation = printCollection.shapeAnnotation;\n                            var measureShapeAnnotation = printCollection.measureShapeAnnotation;\n                            var stampAnnotation = printCollection.stampAnnotations;\n                            // eslint-disable-next-line\n                            var stickyNoteAnnotation = printCollection.stickyNotesAnnotation;\n                            // eslint-disable-next-line max-len\n                            annotationSource_1 = proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(textMarkupAnnotation, printImage.pageNumber, stampAnnotation, shapeAnnotation, measureShapeAnnotation, stickyNoteAnnotation);\n                        }\n                        else {\n                            // eslint-disable-next-line max-len\n                            annotationSource_1 = proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(printCollection.textMarkupAnnotation, printImage.pageNumber, printCollection.stampAnnotations, printCollection.shapeAnnotation, printCollection.measureShapeAnnotation, printCollection.stickyNoteAnnotation);\n                        }\n                    }\n                    if (proxy.pdfViewerBase.isAnnotationCollectionRemoved) {\n                        // eslint-disable-next-line max-len\n                        annotationSource_1 = proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(null, printImage.pageNumber, null, null, null, null);\n                    }\n                }\n                var currentPageNumber_1 = printImage.pageNumber;\n                // eslint-disable-next-line max-len\n                proxy.printCanvas = createElement('canvas', { id: proxy.pdfViewer.element.id + '_printCanvas_' + pageIndex, className: 'e-pv-print-canvas' });\n                proxy.printCanvas.style.width = pageWidth + 'px';\n                proxy.printCanvas.style.height = pageHeight + 'px';\n                var printScaleValue = 2;\n                if ((pageHeight < pageWidth) && this.pdfViewer.enablePrintRotation) {\n                    proxy.printCanvas.height = pageWidth * printScaleValue * window.devicePixelRatio;\n                    proxy.printCanvas.width = pageHeight * printScaleValue * window.devicePixelRatio;\n                }\n                else {\n                    proxy.printCanvas.height = pageHeight * printScaleValue * window.devicePixelRatio;\n                    proxy.printCanvas.width = pageWidth * printScaleValue * window.devicePixelRatio;\n                }\n                var context_1 = proxy.printCanvas.getContext('2d');\n                var pageImage_1 = new Image();\n                var annotationImage_1 = new Image();\n                pageImage_1.onload = function () {\n                    if ((pageHeight > pageWidth) || !proxy.pdfViewer.enablePrintRotation) {\n                        context_1.drawImage(pageImage_1, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                        if (annotationSource_1) {\n                            context_1.drawImage(annotationImage_1, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                        }\n                    }\n                    else {\n                        // translate to center canvas\n                        context_1.translate(proxy.printCanvas.width * 0.5, proxy.printCanvas.height * 0.5);\n                        // rotate the canvas to - 90 degree\n                        context_1.rotate(-0.5 * Math.PI);\n                        // un translate the canvas back to origin\n                        context_1.translate(-proxy.printCanvas.height * 0.5, -proxy.printCanvas.width * 0.5);\n                        // draw the image\n                        context_1.drawImage(pageImage_1, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                        if (annotationSource_1) {\n                            context_1.drawImage(annotationImage_1, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                        }\n                    }\n                    if (currentPageNumber_1 === (proxy.pdfViewerBase.pageCount - 1)) {\n                        proxy.printWindowOpen();\n                    }\n                    proxy.pdfViewer.renderDrawing(null, pageIndex);\n                };\n                pageImage_1.src = printImage.image;\n                annotationImage_1.src = annotationSource_1;\n                proxy.printViewerContainer.appendChild(proxy.printCanvas);\n            }\n            proxy.pdfViewerBase.isPrint = false;\n        };\n        // eslint-disable-next-line\n        this.printRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.print);\n        };\n        // eslint-disable-next-line\n        this.printRequestHandler.onError = function (result) {\n            proxy.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.print);\n        };\n    };\n    // eslint-disable-next-line\n    Print.prototype.renderFieldsForPrint = function (pageIndex, heightRatio, widthRatio) {\n        // eslint-disable-next-line\n        var data = null;\n        var targetField;\n        if (this.pdfViewer.printMode === 'Default') {\n            targetField = this.frameDoc.document.getElementById('fields_' + pageIndex);\n        }\n        else {\n            targetField = this.printWindow.document.getElementById('fields_' + pageIndex);\n        }\n        if (this.pdfViewer.formFieldsModule) {\n            data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        }\n        if (!this.pdfViewer.formDesignerModule) {\n            if (data) {\n                // eslint-disable-next-line\n                var formFieldsData = JSON.parse(data);\n                for (var i = 0; i < formFieldsData.length; i++) {\n                    // eslint-disable-next-line\n                    var currentData = formFieldsData[i];\n                    // eslint-disable-next-line\n                    if (parseFloat(currentData['PageIndex']) === pageIndex) {\n                        // eslint-disable-next-line\n                        var field = this.pdfViewer.formFieldsModule.createFormFields(currentData, pageIndex, i, targetField);\n                        // eslint-disable-next-line\n                        var inputField = field.currentField;\n                        if (inputField) {\n                            // eslint-disable-next-line\n                            var bounds = currentData['LineBounds'];\n                            // eslint-disable-next-line\n                            var font = currentData['Font'];\n                            this.applyPosition(inputField, bounds, font, heightRatio, widthRatio);\n                            inputField.InsertSpaces = currentData.InsertSpaces;\n                            if (inputField.InsertSpaces) {\n                                // eslint-disable-next-line\n                                var font_1 = ((parseInt(inputField.style.width) / inputField.maxLength) - (parseFloat(inputField.style.fontSize) / 2)) - 0.6;\n                                inputField.style.letterSpacing = '' + font_1 + 'px';\n                                inputField.style.fontFamily = 'monospace';\n                            }\n                            // eslint-disable-next-line\n                            var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n                            if ((pageDetails.width > pageDetails.height) && this.pdfViewer.enablePrintRotation) {\n                                /*\n                                The below logig have been modified for the bug https://syncfusion.atlassian.net/browse/EJ2-57986\n                                This code changes is specific for form field elements.\n    \n                                    inputField.style.transform = 'rotate(-90deg)';\n                                    let previousLeft: number = parseFloat(inputField.style.left);\n                                    let currentWidthPosition: number = parseFloat(inputField.style.width) / 2;\n                                    let currentHeightPosition: number = parseFloat(inputField.style.height) / 2;\n                                    let currentTop: number = parseFloat(inputField.style.top);\n                                    let currentHeight: number = parseFloat(inputField.style.height);\n                                    inputField.style.left = (currentHeightPosition - currentWidthPosition + currentTop) + 'px';\n                                    inputField.style.top = (pageDetails.width / widthRatio) - (currentHeight / heightRatio) - ((currentWidthPosition / heightRatio) - (currentHeightPosition / heightRatio) + previousLeft) + 'px';\n                                */\n                                var x = this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.X);\n                                var y = this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Y);\n                                var width = this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Width);\n                                var height = this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Height);\n                                var pageHeight = pageDetails.width;\n                                var top = pageHeight - x - height;\n                                var left = (y + height);\n                                var width = (width);\n                                var height = (height);\n                                inputField.style.transform = \"rotate(-90deg)\";\n                                inputField.style.transformOrigin = \"left bottom\";\n                                inputField.style.left = left + 'px';\n                                inputField.style.top = top + 'px';\n                                inputField.style.height = height + 'px';\n                                inputField.style.width = width + 'px';\n                            }\n                            inputField.style.backgroundColor = 'transparent';\n                            if (!currentData.IsSignatureField) {\n                                inputField.style.borderColor = 'transparent';\n                            }\n                            targetField.appendChild(inputField);\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            var formDesignerData = null;\n            if (this.pdfViewer.formDesignerModule) {\n                formDesignerData = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n            }\n            if (formDesignerData) {\n                var formDesignerFieldsData = JSON.parse(formDesignerData);\n                for (var i = 0; i < formDesignerFieldsData.length; i++) {\n                    // eslint-disable-next-line\n                    var currentData = formDesignerFieldsData[i].FormField;\n                    if (currentData.pageNumber - 1 === pageIndex && currentData.isPrint) {\n                        var signatureField = this.pdfViewer.nameTable[formDesignerFieldsData[i].Key.split(\"_\")[0]];\n                        var element = signatureField.wrapper.children[0];\n                        var htmlElement = void 0;\n                        if (element) {\n                            if (currentData.formFieldAnnotationType === \"RadioButton\") {\n                                for (var j = 0; j < currentData.radiobuttonItem.length; j++) {\n                                    signatureField = this.pdfViewer.nameTable[currentData.radiobuttonItem[j].id.split(\"_\")[0]];\n                                    htmlElement = this.createFormDesignerFields(currentData.radiobuttonItem[j], element, signatureField);\n                                    if (htmlElement) {\n                                        // eslint-disable-next-line\n                                        var bounds = currentData.radiobuttonItem[j].lineBound;\n                                        // eslint-disable-next-line\n                                        var font = currentData.radiobuttonItem[j].fontFamily;\n                                        this.applyPosition(htmlElement, bounds, font, heightRatio, widthRatio, true, currentData.radiobuttonItem[j].zoomValue, currentData.pageNumber - 1);\n                                        targetField.appendChild(htmlElement);\n                                    }\n                                }\n                            }\n                            else {\n                                htmlElement = this.createFormDesignerFields(currentData, element, signatureField);\n                                if (htmlElement) {\n                                    // eslint-disable-next-line\n                                    var bounds = currentData.lineBound;\n                                    // eslint-disable-next-line\n                                    var font = currentData.fontFamily;\n                                    this.applyPosition(htmlElement, bounds, font, heightRatio, widthRatio, true, currentData.zoomValue, currentData.pageNumber - 1);\n                                    targetField.appendChild(htmlElement);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Print.prototype.createFormDesignerFields = function (currentData, element, signatureField) {\n        var htmlElement;\n        var parentHtmlElement;\n        var parentHtmlElementAttribute = {\n            'id': \"form_field_\" + element.id + '_html_element',\n            'class': 'foreign-object'\n        };\n        parentHtmlElement = this.pdfViewer.formDesignerModule.createHtmlElement('div', parentHtmlElementAttribute);\n        var HtmlElementAttribute = {\n            'id': element.id + '_html_element',\n            'class': 'foreign-object'\n        };\n        htmlElement = this.pdfViewer.formDesignerModule.createHtmlElement('div', HtmlElementAttribute);\n        if (currentData.formFieldAnnotationType === \"SignatureField\" || currentData.formFieldAnnotationType === \"InitialField\") {\n            this.pdfViewer.formDesignerModule.disableSignatureClickEvent = true;\n            element.template = htmlElement.appendChild(this.pdfViewer.formDesignerModule.createSignatureDialog(this.pdfViewer, signatureField, null, true));\n            this.pdfViewer.formDesignerModule.disableSignatureClickEvent = false;\n        }\n        else if (currentData.formFieldAnnotationType === \"DropdownList\") {\n            element.template = htmlElement.appendChild(this.pdfViewer.formDesignerModule.createDropDownList(element, signatureField));\n        }\n        else if (currentData.formFieldAnnotationType === \"ListBox\") {\n            element.template = htmlElement.appendChild(this.pdfViewer.formDesignerModule.createListBox(element, signatureField));\n        }\n        else {\n            element.template = htmlElement.appendChild(this.pdfViewer.formDesignerModule.createInputElement(currentData.formFieldAnnotationType, signatureField, null, true));\n        }\n        parentHtmlElement.appendChild(htmlElement);\n        return htmlElement;\n    };\n    /**\n     * @param inputField\n     * @param bounds\n     * @param font\n     * @param heightRatio\n     * @param widthRatio\n     * @param inputField\n     * @param bounds\n     * @param font\n     * @param heightRatio\n     * @param widthRatio\n     * @private\n     */\n    // eslint-disable-next-line\n    Print.prototype.applyPosition = function (inputField, bounds, font, heightRatio, widthRatio, isFormDesignerField, zoomValue, pageIndex) {\n        if (bounds) {\n            var pageHeight = void 0;\n            var left = void 0;\n            var top_1;\n            var width = void 0;\n            var height = void 0;\n            // This code changes is specific for form designer elements. https://syncfusion.atlassian.net/browse/EJ2-57986 \n            var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n            var actualWidth = pageDetails ? pageDetails.width : 0;\n            var actualHeight = pageDetails ? pageDetails.height : 0;\n            if (isFormDesignerField && actualHeight < actualWidth && this.pdfViewer.enablePrintRotation) {\n                /*\n                The below logig have been modified for the bug https://syncfusion.atlassian.net/browse/EJ2-57986\n                This code changes is specific for form designer elements.\n                pageHeight = actualWidth;\n                top=  pageHeight - bounds.X / zoomValue;\n                left = bounds.Y / zoomValue;\n                width = (bounds.Width / zoomValue);\n                height = (bounds.Height / zoomValue);\n                inputField.style.transform = \"rotate(-90deg)\";\n                inputField.style.transformOrigin = \"top left\";\n                */\n                // need to set inverse page height and width  \n                pageHeight = actualWidth;\n                top_1 = pageHeight - bounds.X / zoomValue - bounds.Height / zoomValue;\n                left = (bounds.Y + bounds.Height) / zoomValue;\n                width = (bounds.Width / zoomValue);\n                height = (bounds.Height / zoomValue);\n                inputField.style.transform = \"rotate(-90deg)\";\n                inputField.style.transformOrigin = \"left bottom\";\n            }\n            else {\n                left = isFormDesignerField ? (bounds.X / zoomValue) / widthRatio : (this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.X)) / widthRatio;\n                top_1 = isFormDesignerField ? (bounds.Y / zoomValue) / heightRatio : (this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Y)) / heightRatio;\n                width = isFormDesignerField ? (bounds.Width / zoomValue) / widthRatio : (this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Width)) / widthRatio;\n                height = isFormDesignerField ? (bounds.Height / zoomValue) / heightRatio : (this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Height)) / heightRatio;\n            }\n            var fontHeight = 0;\n            if (font !== null && font.Height) {\n                inputField.style.fontFamily = font.Name;\n                if (font.Italic) {\n                    inputField.style.fontStyle = 'italic';\n                }\n                if (font.Bold) {\n                    inputField.style.fontWeight = 'Bold';\n                }\n                fontHeight = this.pdfViewerBase.ConvertPointToPixel(font.Size);\n            }\n            if (Browser.isIE) {\n                top_1 = top_1 - 1;\n            }\n            this.pdfViewerBase.setStyleToTextDiv(inputField, left, top_1, fontHeight, width, height, true);\n        }\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // eslint-disable-next-line\n        var printDocument;\n        if (this.pdfViewer.printMode === 'Default') {\n            printDocument = this.frameDoc.document;\n        }\n        else {\n            printDocument = this.printWindow.document;\n        }\n        for (var i = 0; i < this.printViewerContainer.children.length; i++) {\n            var pageWidth = this.pdfViewerBase.pageSize[i].width;\n            var pageHeight = this.pdfViewerBase.pageSize[i].height;\n            var printHeight = pageHeight;\n            var printWidth = pageWidth - 1;\n            if ((pageHeight < pageWidth) && this.pdfViewer.enablePrintRotation) {\n                printHeight = pageWidth;\n                printWidth = pageHeight;\n            }\n            // eslint-disable-next-line max-len\n            var canvasUrl = this.printViewerContainer.children[i].toDataURL();\n            printDocument.write('<div style=\"margin:0mm;width:' + printWidth.toString() + 'px;height:' + printHeight.toString() + 'px;position:relative\"><img src=\"' + canvasUrl + '\" id=\"' + 'image_' + i + '\" /><div id=\"' + 'fields_' + i + '\" style=\"margin:0px;top:0px;left:0px;position:absolute;width:' + printWidth.toString() + 'px;height:' + printHeight.toString() + 'px;z-index:2\"></div></div>');\n            if (this.pdfViewer.formFieldsModule || this.pdfViewer.formDesignerModule) {\n                var heightRatio;\n                var widthRatio;\n                if ((pageHeight < pageWidth) && this.pdfViewer.enablePrintRotation) {\n                    heightRatio = pageHeight / pageWidth;\n                    widthRatio = pageWidth / pageHeight;\n                }\n                else {\n                    heightRatio = 1;\n                    widthRatio = 1;\n                }\n                this.renderFieldsForPrint(i, heightRatio, widthRatio);\n            }\n            if (i === 0) {\n                if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n                    (browserUserAgent.indexOf('Firefox')) !== -1) {\n                    printDocument.write('<!DOCTYPE html>');\n                    printDocument.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; width:100% }'\n                        + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'\n                        + ' img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; }'\n                        + ' div{ page-break-inside: avoid; }} @page{margin:0mm;  size:' + printWidth.toString() + 'px ' + printHeight.toString() + 'px; }</style></head><body><center class=\"loader\">');\n                }\n                else {\n                    printDocument.write('<!DOCTYPE html>');\n                    printDocument.write('<html><head>'\n                        + '<style>html, body { height: 100%; } img { height: 100%; width: 100%; }@media print { body { margin: 0cm; }'\n                        + 'img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; } '\n                        + 'div{ page-break-inside: avoid; }} @page{margin:0mm;  size:' + printWidth.toString() + 'px ' + printHeight.toString() + 'px; }</style></head><body><center>');\n                }\n            }\n        }\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            try {\n                if (this.pdfViewer.printMode === 'Default') {\n                    this.pdfViewerBase.showPrintLoadingIndicator(false);\n                    this.iframe.contentWindow.document.execCommand('print', false, null);\n                }\n                else {\n                    this.printWindow.document.execCommand('print', false, null);\n                }\n            }\n            catch (e) {\n                if (this.pdfViewer.printMode === 'Default') {\n                    this.pdfViewerBase.showPrintLoadingIndicator(false);\n                    this.iframe.contentWindow.print();\n                }\n                else {\n                    this.printWindow.print();\n                }\n            }\n        }\n        else {\n            setTimeout(function () {\n                if (_this.pdfViewer.printMode === 'Default') {\n                    _this.pdfViewerBase.showPrintLoadingIndicator(false);\n                    _this.iframe.contentWindow.print();\n                    _this.iframe.contentWindow.focus();\n                    document.body.removeChild(_this.iframe);\n                }\n                else {\n                    if (_this.printWindow) {\n                        _this.printWindow.print();\n                        _this.printWindow.focus();\n                        _this.printWindow.close();\n                    }\n                }\n            }, 200);\n        }\n    };\n    // eslint-disable-next-line\n    Print.prototype.createPrintLoadingIndicator = function (element) {\n        // eslint-disable-next-line\n        var printWindowContainer = createElement('div', {\n            id: this.pdfViewer.element.id + '_printWindowcontainer'\n        });\n        printWindowContainer.style.height = '100%';\n        printWindowContainer.style.width = '100%';\n        printWindowContainer.style.position = 'absolute';\n        printWindowContainer.style.zIndex = 2000;\n        printWindowContainer.style.left = 0;\n        printWindowContainer.style.top = 0;\n        printWindowContainer.style.overflow = 'auto';\n        printWindowContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.3)';\n        element.appendChild(printWindowContainer);\n        var printWaitingPopup = createElement('div', {\n            id: this.pdfViewer.element.id + '_printLoadingContainer'\n        });\n        printWaitingPopup.style.position = 'absolute';\n        printWaitingPopup.style.width = '50px';\n        printWaitingPopup.style.height = '50px';\n        printWaitingPopup.style.left = '46%';\n        printWaitingPopup.style.top = '45%';\n        printWindowContainer.style.zIndex = 3000;\n        printWindowContainer.appendChild(printWaitingPopup);\n        // eslint-disable-next-line\n        var printImageContainer = new Image();\n        // eslint-disable-next-line\n        printImageContainer.src = 'data:image/gif;base64,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';\n        printImageContainer.style.width = '50px';\n        printImageContainer.style.height = '50px';\n        printWaitingPopup.appendChild(printImageContainer);\n        var printLabelContainer = createElement('div', {\n            id: this.pdfViewer.element.id + '_printLabelContainer'\n        });\n        printLabelContainer.style.position = 'absolute';\n        printLabelContainer.textContent = 'Loading ...';\n        printLabelContainer.style.fontWeight = 'Bold';\n        printLabelContainer.style.left = '46%';\n        printLabelContainer.style.top = '54.5%';\n        printLabelContainer.style.zIndex = '3000';\n        printWindowContainer.appendChild(printLabelContainer);\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n        this.printWindow = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}