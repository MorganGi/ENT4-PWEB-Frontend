{"ast":null,"code":"import { AjaxHandler } from '../index';\nimport { createElement, Browser, Internationalization, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Accordion, ContextMenu as Context } from '@syncfusion/ej2-navigations';\nimport { InPlaceEditor } from '@syncfusion/ej2-inplace-editor';\nimport { cloneObject } from '../drawing/drawing-util';\n/**\n * StickyNotes module\n */\n\nvar StickyNotesAnnotation =\n/** @class */\nfunction () {\n  /**\n   * @param pdfViewer\n   * @param pdfViewerBase\n   * @param pdfViewer\n   * @param pdfViewerBase\n   * @private\n   */\n  function StickyNotesAnnotation(pdfViewer, pdfViewerBase) {\n    this.commentsCount = 0;\n    this.commentsreplyCount = 0;\n    this.commentContextMenu = [];\n    this.isAccordionContainer = true;\n    this.isCreateContextMenu = false;\n    this.isCommentsSelected = false;\n    /**\n     * @private\n     */\n\n    this.isAddAnnotationProgramatically = false;\n    /**\n     * @private\n     */\n\n    this.isEditableElement = false;\n    this.isPageCommentsRendered = false;\n    this.isCommentsRendered = false;\n    /**\n     * @private\n     */\n\n    this.isAnnotationRendered = false;\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = pdfViewerBase;\n    this.opacity = this.pdfViewer.stickyNotesSettings.opacity ? this.pdfViewer.stickyNotesSettings.opacity : 1;\n  }\n  /**\n   * @param stickyAnnotations\n   * @param pageNumber\n   * @param canvas\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.renderStickyNotesAnnotations = function (stickyAnnotations, pageNumber, canvas) {\n    if (stickyAnnotations) {\n      if (stickyAnnotations.length > 0) {\n        for (var i = 0; i < stickyAnnotations.length; i++) {\n          // eslint-disable-next-line\n          var annotation = stickyAnnotations[i];\n          var isAdded = false; // eslint-disable-next-line\n\n          var pageAnnotations = this.getAnnotations(pageNumber, null, 'sticky');\n\n          if (pageAnnotations !== null) {\n            for (var k = 0; k < pageAnnotations.length; k++) {\n              var annotationName = annotation.annotName ? annotation.annotName : annotation.AnnotName;\n              var pageAnnotationName = pageAnnotations[k].annotName ? pageAnnotations[k].annotName : pageAnnotations[k].AnnotName;\n\n              if (pageAnnotationName && annotationName && pageAnnotationName === annotationName) {\n                isAdded = true;\n                break;\n              }\n            }\n          }\n\n          if (!isAdded) {\n            annotation.annotationAddMode = this.pdfViewer.annotationModule.findAnnotationMode(annotation, pageNumber, annotation.AnnotType);\n            var annotationObject = null; // eslint-disable-next-line\n\n            var position = annotation.Bounds;\n            var author = annotation.Author; // eslint-disable-next-line max-len\n\n            annotation.AnnotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);\n            annotation.allowedInteractions = annotation.AllowedInteraction ? annotation.AllowedInteraction : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n            var isPrint = true;\n\n            if (annotation.annotationAddMode === 'Imported Annotation') {\n              isPrint = annotation.IsPrint;\n            } else {\n              isPrint = annotation.AnnotationSettings.isPrint;\n            }\n\n            if (annotation.IsLock) {\n              annotation.AnnotationSettings.isLock = annotation.IsLock;\n            }\n\n            annotationObject = {\n              // eslint-disable-next-line max-len\n              shapeAnnotationType: 'sticky',\n              author: author,\n              modifiedDate: annotation.ModifiedDate,\n              subject: annotation.Subject,\n              note: annotation.Note,\n              opacity: annotation.Opacity,\n              state: annotation.State,\n              stateModel: annotation.StateModel,\n              pathData: '',\n              comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, author),\n              review: {\n                state: annotation.State,\n                stateModel: annotation.StateModel,\n                modifiedDate: annotation.ModifiedDate,\n                author: author\n              },\n              // eslint-disable-next-line max-len\n              bounds: {\n                left: annotation.Bounds.X,\n                top: annotation.Bounds.Y,\n                width: annotation.Bounds.Width,\n                height: annotation.Bounds.Height,\n                right: annotation.Bounds.Right,\n                bottom: annotation.Bounds.Bottom\n              },\n              annotName: annotation.AnnotName,\n              color: annotation.color,\n              annotationSelectorSettings: this.getSettings(annotation),\n              customData: this.pdfViewer.annotation.getCustomData(annotation),\n              annotationSettings: annotation.AnnotationSettings,\n              allowedInteractions: annotation.allowedInteractions,\n              isPrint: isPrint,\n              isCommentLock: annotation.IsCommentLock\n            };\n            var annot = void 0; // eslint-disable-next-line max-len\n\n            annotation.AnnotationSelectorSettings = annotation.AnnotationSelectorSettings ? annotation.AnnotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n            annot = {\n              // eslint-disable-next-line max-len\n              author: author,\n              modifiedDate: annotationObject.modifiedDate,\n              annotName: annotationObject.annotName,\n              pageIndex: pageNumber,\n              bounds: {\n                x: position.Left,\n                y: position.Top,\n                width: position.Width,\n                height: position.Height\n              },\n              strokeColor: 'transparent',\n              stampStrokeColor: '',\n              data: this.setImageSource(),\n              shapeAnnotationType: 'StickyNotes',\n              subject: annotationObject.subject,\n              notes: annotationObject.note,\n              opacity: annotationObject.opacity,\n              id: annotationObject.annotName,\n              fillColor: annotationObject.color,\n              annotationSelectorSettings: annotation.AnnotationSelectorSettings,\n              annotationSettings: annotationObject.annotationSettings,\n              // eslint-disable-next-line max-len\n              annotationAddMode: annotation.annotationAddMode,\n              isPrint: isPrint,\n              isCommentLock: annotationObject.isCommentLock\n            };\n\n            if (canvas) {\n              this.drawStickyNotes(position.Left, position.Top, position.Width, position.Height, pageNumber, annot, canvas);\n            } else {\n              this.pdfViewer.add(annot);\n              this.drawStickyNotes(position.Left, position.Top, position.Width, position.Height, pageNumber, annot);\n              this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_sticky');\n            }\n\n            if (this.isAddAnnotationProgramatically) {\n              // eslint-disable-next-line\n              var settings = {\n                opacity: annot.opacity,\n                borderColor: annot.strokeColor,\n                borderWidth: annot.thickness,\n                author: annotation.author,\n                subject: annotation.subject,\n                modifiedDate: annotation.modifiedDate,\n                // eslint-disable-next-line\n                fillColor: annot.fillColor,\n                fontSize: annot.fontSize,\n                width: annot.bounds.width,\n                height: annot.bounds.height,\n                fontColor: annot.fontColor,\n                fontFamily: annot.fontFamily,\n                defaultText: annot.dynamicText,\n                fontStyle: annot.font,\n                textAlignment: annot.textAlign\n              };\n              this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'StickyNotes', annot.bounds, settings);\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.getSettings = function (annotation) {\n    var selector = this.pdfViewer.annotationSelectorSettings;\n\n    if (annotation.AnnotationSelectorSettings) {\n      selector = annotation.AnnotationSelectorSettings;\n    } else if (this.pdfViewer.stickyNotesSettings.annotationSelectorSettings) {\n      selector = this.pdfViewer.stickyNotesSettings.annotationSelectorSettings;\n    }\n\n    return selector;\n  };\n  /**\n   * @param X\n   * @param Y\n   * @param width\n   * @param height\n   * @param pageIndex\n   * @param annotation\n   * @param canvas\n   * @param X\n   * @param Y\n   * @param width\n   * @param height\n   * @param pageIndex\n   * @param annotation\n   * @param canvas\n   * @param X\n   * @param Y\n   * @param width\n   * @param height\n   * @param pageIndex\n   * @param annotation\n   * @param canvas\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.drawStickyNotes = function (X, Y, width, height, pageIndex, annotation, canvas) {\n    var _this = this;\n\n    var annot;\n    var annotationObject = null;\n    var image = new Image(); // eslint-disable-next-line\n\n    var proxy = this;\n\n    image.onload = function () {\n      var commentsDivid;\n      var annotationName; // eslint-disable-next-line max-len\n\n      var author = _this.pdfViewer.annotationSettings.author !== 'Guest' ? _this.pdfViewer.annotationSettings.author : _this.pdfViewer.stickyNotesSettings.author;\n\n      if (annotation) {\n        annot = {\n          // eslint-disable-next-line max-len\n          author: annotation.author,\n          modifiedDate: annotation.modifiedDate,\n          annotName: annotation.annotName,\n          data: image.src,\n          bounds: {\n            x: X,\n            y: Y,\n            width: width,\n            height: height\n          },\n          subject: annotation.subject,\n          notes: annotation.notes,\n          opacity: annotation.opacity,\n          id: annotation.annotName,\n          shapeAnnotationType: 'StickyNotes',\n          strokeColor: 'transparent',\n          stampStrokeColor: '',\n          pageIndex: annotation.pageIndex,\n          isPrint: annotation.isPrint\n        };\n      } else {\n        annotationName = _this.pdfViewer.annotation.createGUID();\n        commentsDivid = proxy.addComments('sticky', pageIndex + 1);\n\n        if (commentsDivid) {\n          document.getElementById(commentsDivid).id = annotationName;\n        } // eslint-disable-next-line\n\n\n        var annotationSelectorSettings = _this.pdfViewer.stickyNotesSettings.annotationSelectorSettings ? _this.pdfViewer.stickyNotesSettings.annotationSelectorSettings : _this.pdfViewer.annotationSelectorSettings;\n        var isPrint = _this.pdfViewer.stickyNotesSettings.isPrint;\n        annot = {\n          // eslint-disable-next-line max-len\n          bounds: {\n            x: X,\n            y: Y,\n            width: width,\n            height: height\n          },\n          pageIndex: pageIndex,\n          data: image.src,\n          modifiedDate: _this.getDateAndTime(),\n          shapeAnnotationType: 'StickyNotes',\n          strokeColor: 'transparent',\n          stampStrokeColor: '',\n          annotName: annotationName,\n          id: annotationName,\n          opacity: _this.opacity,\n          isPrint: isPrint\n        }; // eslint-disable-next-line max-len\n\n        var isLock = _this.pdfViewer.stickyNotesSettings.isLock ? _this.pdfViewer.stickyNotesSettings.isLock : _this.pdfViewer.annotationSettings.isLock; // eslint-disable-next-line\n\n        var allowedInteractions = _this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n\n        annotationObject = {\n          // eslint-disable-next-line max-len\n          author: author,\n          allowedInteractions: allowedInteractions,\n          modifiedDate: _this.getDateAndTime(),\n          subject: 'Sticky Note',\n          shapeAnnotationType: 'sticky',\n          // eslint-disable-next-line max-len\n          note: '',\n          opacity: _this.opacity,\n          pathData: '',\n          state: '',\n          stateModel: '',\n          color: 'rgba(255,255,0)',\n          comments: [],\n          annotName: annotationName,\n          // eslint-disable-next-line max-len\n          bounds: {\n            left: X,\n            top: Y,\n            width: width,\n            height: height\n          },\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: '',\n            author: author\n          },\n          annotationSelectorSettings: annotationSelectorSettings,\n          // eslint-disable-next-line max-len\n          customData: _this.pdfViewer.annotationModule.getData('sticky'),\n          annotationSettings: {\n            isLock: isLock\n          },\n          isPrint: isPrint,\n          isCommentLock: false\n        };\n      }\n\n      if (!annotation) {\n        // eslint-disable-next-line max-len\n        proxy.pdfViewer.annotation.addAction(pageIndex, null, annot, 'Addition', '', annot, annot);\n        proxy.pdfViewer.add(annot);\n        proxy.pdfViewer.annotationModule.storeAnnotations(pageIndex, annotationObject, '_annotations_sticky');\n      }\n\n      if (proxy.pdfViewerBase.isAddComment) {\n        // eslint-disable-next-line max-len\n        // eslint-disable-next-line\n        var bounds = {\n          left: annot.bounds.x,\n          top: annot.bounds.y,\n          width: annot.bounds.width,\n          height: annot.bounds.height\n        };\n\n        _this.pdfViewerBase.updateDocumentEditedProperty(true); // eslint-disable-next-line\n\n\n        var settings = {\n          opacity: annot.opacity,\n          author: author,\n          modifiedDate: annot.modifiedDate,\n          subject: annot.shapeAnnotationType\n        };\n\n        _this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'StickyNotes', bounds, settings);\n      }\n\n      if (canvas) {\n        // eslint-disable-next-line\n        proxy.pdfViewer.renderDrawing(canvas, pageIndex);\n      } else {\n        // eslint-disable-next-line\n        var canvass = document.getElementById(proxy.pdfViewer.element.id + '_annotationCanvas_' + pageIndex); // eslint-disable-next-line\n\n        proxy.pdfViewer.renderDrawing(canvass, pageIndex);\n      }\n\n      if (Browser.isDevice) {\n        proxy.pdfViewer.select([annot.id], annot.annotationSelectorSettings);\n      }\n\n      proxy.pdfViewerBase.isAddComment = false;\n    };\n\n    image.src = this.setImageSource();\n  };\n\n  StickyNotesAnnotation.prototype.setImageSource = function () {\n    // eslint-disable-next-line max-len\n    var imageSource = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo=';\n    return imageSource;\n  };\n  /**\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.createRequestForComments = function () {\n    var jsonObject;\n    var proxy = this;\n    var startIndex = 0;\n    var pageLimit = 20;\n    var pageCount = proxy.pdfViewerBase.pageCount;\n\n    if (!proxy.isCommentsRendered) {\n      if (pageLimit < pageCount) {\n        pageCount = pageLimit;\n      } else {\n        proxy.isPageCommentsRendered = true;\n      }\n    }\n\n    if (!this.isCommentsRendered) {\n      // eslint-disable-next-line max-len\n      jsonObject = {\n        pageStartIndex: startIndex.toString(),\n        pageEndIndex: pageCount.toString(),\n        hashId: this.pdfViewerBase.hashId,\n        action: 'RenderAnnotationComments',\n        elementId: this.pdfViewer.element.id,\n        uniqueId: proxy.pdfViewerBase.documentId\n      };\n      proxy.isCommentsRendered = true;\n    } else {\n      // eslint-disable-next-line max-len\n      jsonObject = {\n        pageStartIndex: pageLimit.toString(),\n        pageEndIndex: pageCount.toString(),\n        hashId: this.pdfViewerBase.hashId,\n        action: 'RenderAnnotationComments',\n        elementId: this.pdfViewer.element.id,\n        uniqueId: proxy.pdfViewerBase.documentId\n      };\n    }\n\n    if (this.pdfViewerBase.jsonDocumentId) {\n      // eslint-disable-next-line\n      jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n    }\n\n    var url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderComments;\n    proxy.commentsRequestHandler = new AjaxHandler(proxy.pdfViewer);\n    proxy.commentsRequestHandler.url = url;\n    proxy.commentsRequestHandler.mode = true;\n    proxy.commentsRequestHandler.responseType = 'text';\n    proxy.commentsRequestHandler.send(jsonObject); // eslint-disable-next-line\n\n    proxy.commentsRequestHandler.onSuccess = function (result) {\n      // eslint-disable-next-line\n      var data = result.data;\n\n      if (data) {\n        if (typeof data !== 'object') {\n          try {\n            data = JSON.parse(data);\n\n            if (typeof data !== 'object') {\n              data = JSON.parse(data);\n            }\n\n            if (typeof data !== 'object') {\n              proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderComments);\n              data = null;\n            }\n          } catch (error) {\n            proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderComments);\n            data = null;\n          }\n        }\n\n        if (data) {\n          var isInitialRender = false;\n\n          if (proxy.pdfViewerBase.annotationComments) {\n            // eslint-disable-next-line\n            proxy.pdfViewerBase.annotationComments = data.annotationDetails;\n          } else {\n            proxy.pdfViewerBase.annotationComments = data.annotationDetails;\n            isInitialRender = true;\n          }\n\n          if (data.annotationDetails && data.uniqueId === proxy.pdfViewerBase.documentId) {\n            proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderComments, data);\n            proxy.isAnnotationRendered = true; // eslint-disable-next-line\n\n            var annotationCollections = void 0;\n\n            if (proxy.pdfViewerBase.documentAnnotationCollections) {\n              // eslint-disable-next-line max-len\n              annotationCollections = proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments, proxy.pdfViewerBase.documentAnnotationCollections);\n            } else {\n              // eslint-disable-next-line\n              var newCollection = proxy.pdfViewerBase.createAnnotationsCollection(); // eslint-disable-next-line max-len\n\n              annotationCollections = proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments, newCollection);\n            }\n\n            proxy.pdfViewerBase.annotationComments = annotationCollections;\n            proxy.pdfViewerBase.documentAnnotationCollections = annotationCollections;\n\n            for (var j = data.startPageIndex; j < data.endPageIndex; j++) {\n              if (data.annotationDetails[j]) {\n                proxy.renderAnnotationCollections(data.annotationDetails[j], j, isInitialRender);\n              }\n            }\n\n            if (!proxy.isPageCommentsRendered) {\n              proxy.isPageCommentsRendered = true;\n              proxy.createRequestForComments();\n            }\n          }\n        }\n      }\n    }; // eslint-disable-next-line\n\n\n    proxy.commentsRequestHandler.onFailure = function (result) {\n      this.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n    }; // eslint-disable-next-line\n\n\n    proxy.commentsRequestHandler.onError = function (result) {\n      proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderComments);\n    };\n  };\n  /**\n   * @param excistingAnnotation\n   * @param newAnnotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateAnnotationsInDocumentCollections = function (excistingAnnotation, newAnnotation) {\n    for (var i = 0; i < this.pdfViewerBase.pageCount; i++) {\n      if (excistingAnnotation[i] && newAnnotation[i]) {\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation[i].textMarkupAnnotation && excistingAnnotation[i].textMarkupAnnotation.length !== 0 && newAnnotation[i].textMarkupAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].textMarkupAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].textMarkupAnnotation[j], newAnnotation[i].textMarkupAnnotation);\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (excistingAnnotation[i].shapeAnnotation && excistingAnnotation[i].shapeAnnotation.length !== 0 && newAnnotation[i].shapeAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].shapeAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].shapeAnnotation[j], newAnnotation[i].shapeAnnotation);\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (excistingAnnotation[i].measureShapeAnnotation && excistingAnnotation[i].measureShapeAnnotation.length !== 0 && newAnnotation[i].measureShapeAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].measureShapeAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].measureShapeAnnotation[j], newAnnotation[i].measureShapeAnnotation);\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (excistingAnnotation[i].stampAnnotations && excistingAnnotation[i].stampAnnotations.length !== 0 && newAnnotation[i].stampAnnotations) {\n          for (var j = 0; j < excistingAnnotation[i].stampAnnotations.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].stampAnnotations[j], newAnnotation[i].stampAnnotations);\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (excistingAnnotation[i].stickyNotesAnnotation && excistingAnnotation[i].stickyNotesAnnotation.length !== 0 && newAnnotation[i].stickyNotesAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].stickyNotesAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].stickyNotesAnnotation[j], newAnnotation[i].stickyNotesAnnotation);\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (excistingAnnotation[i].freeTextAnnotation && excistingAnnotation[i].freeTextAnnotation.length !== 0 && newAnnotation[i].freeTextAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].freeTextAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].freeTextAnnotation[j], newAnnotation[i].freeTextAnnotation);\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (excistingAnnotation[i].signatureAnnotation && excistingAnnotation[i].signatureAnnotation.length !== 0 && newAnnotation[i].signatureAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].signatureAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureAnnotation[j], newAnnotation[i].signatureAnnotation);\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (excistingAnnotation[i].signatureInkAnnotation && excistingAnnotation[i].signatureInkAnnotation.length !== 0 && newAnnotation[i].signatureInkAnnotation) {\n          for (var j = 0; j < excistingAnnotation[i].signatureInkAnnotation.length; j++) {\n            // eslint-disable-next-line max-len\n            this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureInkAnnotation[j], newAnnotation[i].signatureInkAnnotation);\n          }\n        }\n      }\n    }\n\n    return newAnnotation;\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateDocumentAnnotationCollections = function (excistingAnnotation, newAnnotation) {\n    if (newAnnotation.length === 0) {\n      newAnnotation.push(excistingAnnotation);\n    } else {\n      var isAdded = false;\n\n      for (var i = 0; i < newAnnotation.length; i++) {\n        // eslint-disable-next-line max-len\n        if (excistingAnnotation.AnnotName && newAnnotation[i].AnnotName && excistingAnnotation.AnnotName === newAnnotation[i].AnnotName) {\n          isAdded = true;\n          break;\n        }\n      }\n\n      if (!isAdded) {\n        newAnnotation.push(excistingAnnotation);\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.renderAnnotationCollections = function (pageAnnotations, pageNumber, isInitialRender) {\n    // eslint-disable-next-line\n    var pageCollections = [];\n\n    if (pageAnnotations.textMarkupAnnotation && pageAnnotations.textMarkupAnnotation.length !== 0) {\n      for (var i = 0; i < pageAnnotations.textMarkupAnnotation.length; i++) {\n        if (this.pdfViewer.dateTimeFormat) {\n          // eslint-disable-next-line max-len\n          pageAnnotations.textMarkupAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.textMarkupAnnotation[i].ModifiedDate);\n        }\n\n        pageCollections.push(pageAnnotations.textMarkupAnnotation[i]); // eslint-disable-next-line max-len\n\n        this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(pageAnnotations.textMarkupAnnotation[i], pageNumber));\n      }\n    }\n\n    if (pageAnnotations.shapeAnnotation && pageAnnotations.shapeAnnotation.length !== 0) {\n      for (var i = 0; i < pageAnnotations.shapeAnnotation.length; i++) {\n        if (this.pdfViewer.dateTimeFormat) {\n          // eslint-disable-next-line max-len\n          pageAnnotations.shapeAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.shapeAnnotation[i].ModifiedDate);\n        }\n\n        pageCollections.push(pageAnnotations.shapeAnnotation[i]); // eslint-disable-next-line max-len\n\n        this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(pageAnnotations.shapeAnnotation[i], pageNumber));\n      }\n    }\n\n    if (pageAnnotations.measureShapeAnnotation && pageAnnotations.measureShapeAnnotation.length !== 0) {\n      for (var i = 0; i < pageAnnotations.measureShapeAnnotation.length; i++) {\n        if (this.pdfViewer.dateTimeFormat) {\n          // eslint-disable-next-line max-len\n          pageAnnotations.measureShapeAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.measureShapeAnnotation[i].ModifiedDate);\n        }\n\n        pageCollections.push(pageAnnotations.measureShapeAnnotation[i]); // eslint-disable-next-line max-len\n\n        this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(pageAnnotations.measureShapeAnnotation[i], pageNumber));\n      }\n    }\n\n    if (pageAnnotations.stampAnnotations && pageAnnotations.stampAnnotations.length !== 0) {\n      for (var i = 0; i < pageAnnotations.stampAnnotations.length; i++) {\n        if (this.pdfViewer.dateTimeFormat) {\n          // eslint-disable-next-line max-len\n          pageAnnotations.stampAnnotations[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.stampAnnotations[i].ModifiedDate);\n        }\n\n        pageCollections.push(pageAnnotations.stampAnnotations[i]); // eslint-disable-next-line max-len\n\n        this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(pageAnnotations.stampAnnotations[i], pageNumber));\n      }\n    }\n\n    if (pageAnnotations.stickyNotesAnnotation && pageAnnotations.stickyNotesAnnotation.length !== 0) {\n      for (var i = 0; i < pageAnnotations.stickyNotesAnnotation.length; i++) {\n        if (this.pdfViewer.dateTimeFormat) {\n          // eslint-disable-next-line max-len\n          pageAnnotations.stickyNotesAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.stickyNotesAnnotation[i].ModifiedDate);\n        }\n\n        pageCollections.push(pageAnnotations.stickyNotesAnnotation[i]); // eslint-disable-next-line max-len\n\n        this.updateCollections(this.updateStickyNotesAnnotationCollections(pageAnnotations.stickyNotesAnnotation[i], pageNumber));\n      }\n    }\n\n    if (pageAnnotations.freeTextAnnotation && pageAnnotations.freeTextAnnotation.length !== 0) {\n      for (var i = 0; i < pageAnnotations.freeTextAnnotation.length; i++) {\n        if (this.pdfViewer.dateTimeFormat) {\n          // eslint-disable-next-line max-len\n          pageAnnotations.freeTextAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.freeTextAnnotation[i].ModifiedDate);\n        }\n\n        pageCollections.push(pageAnnotations.freeTextAnnotation[i]); // eslint-disable-next-line max-len\n\n        this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(pageAnnotations.freeTextAnnotation[i], pageNumber));\n      }\n    }\n\n    if (pageAnnotations.signatureAnnotation && pageAnnotations.signatureAnnotation.length !== 0) {\n      for (var i = 0; i < pageAnnotations.signatureAnnotation.length; i++) {\n        if (this.pdfViewer.dateTimeFormat) {\n          // eslint-disable-next-line max-len\n          pageAnnotations.signatureAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.signatureAnnotation[i].ModifiedDate);\n        } // eslint-disable-next-line max-len\n\n\n        this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(pageAnnotations.signatureAnnotation[i], pageNumber), true);\n      }\n    }\n\n    if (pageAnnotations.signatureInkAnnotation && pageAnnotations.signatureInkAnnotation.length !== 0) {\n      for (var i = 0; i < pageAnnotations.signatureInkAnnotation.length; i++) {\n        if (this.pdfViewer.dateTimeFormat) {\n          // eslint-disable-next-line max-len\n          pageAnnotations.signatureInkAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.signatureInkAnnotation[i].ModifiedDate);\n        }\n\n        pageCollections.push(pageAnnotations.signatureInkAnnotation[i]); // eslint-disable-next-line max-len\n\n        this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(pageAnnotations.signatureInkAnnotation[i], pageNumber));\n      }\n    }\n\n    if (this.pdfViewer.toolbarModule) {\n      this.renderAnnotationComments(pageCollections, pageNumber);\n    }\n\n    if (isInitialRender) {\n      for (var i = 0; i < this.pdfViewerBase.renderedPagesList.length; i++) {\n        this.pdfViewerBase.renderAnnotations(this.pdfViewerBase.renderedPagesList[i], false);\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param isSignature\n   * @param annotation\n   * @param isSignature\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateCollections = function (annotation, isSignature) {\n    var isAdded = false; // eslint-disable-next-line\n\n    var collections;\n\n    if (isSignature) {\n      collections = this.pdfViewer.signatureCollection;\n    } else {\n      collections = this.pdfViewer.annotationCollection;\n    }\n\n    if (collections && annotation) {\n      for (var i = 0; i < collections.length; i++) {\n        if (isSignature) {\n          if (collections[i].signatureName === annotation.signatureName) {\n            isAdded = true;\n            break;\n          }\n        } else {\n          if (collections[i].annotationId === annotation.annotationId) {\n            isAdded = true;\n            break;\n          }\n        }\n      }\n    }\n\n    if (!isAdded && annotation) {\n      if (isSignature) {\n        this.pdfViewer.signatureCollection.push(annotation);\n      } else {\n        this.pdfViewer.annotationCollection.push(annotation);\n      }\n    }\n  };\n  /**\n   * @param data\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.renderAnnotationComments = function (data, pageIndex) {\n    pageIndex = pageIndex + 1;\n\n    if (data) {\n      if (data.length !== 0) {\n        this.createPageAccordion(pageIndex);\n\n        for (var i = 0; i < data.length; i++) {\n          if (data[i].AnnotName && data[i].AnnotName.split('freeText').length === 1) {\n            this.createCommentControlPanel(data[i], pageIndex);\n          }\n        } // eslint-disable-next-line\n\n\n        var newCommentsDiv = document.querySelectorAll('.e-pv-new-comments-div');\n\n        if (newCommentsDiv) {\n          for (var j = 0; j < newCommentsDiv.length; j++) {\n            newCommentsDiv[j].style.display = 'none';\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.initializeAcccordionContainer = function () {\n    // eslint-disable-next-line max-len\n    var commentPanelText = createElement('div', {\n      id: this.pdfViewer.element.id + '_commentsPanelText',\n      className: 'e-pv-comments-panel-text'\n    });\n\n    if (isBlazor()) {\n      var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_NoCommentsYet');\n\n      promise.then(function (value) {\n        commentPanelText.textContent = value;\n      });\n    } else {\n      commentPanelText.textContent = this.pdfViewer.localeObj.getConstant('No Comments Yet');\n    }\n\n    this.updateCommentPanelTextTop();\n    this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(commentPanelText); // eslint-disable-next-line max-len\n\n    this.accordionContentContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_accordionContentContainer',\n      className: 'e-pv-accordion-content-container'\n    });\n    this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(this.accordionContentContainer); // eslint-disable-next-line max-len\n\n    this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false); // eslint-disable-next-line max-len\n\n    this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], false);\n  };\n  /**\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.updateCommentPanelTextTop = function () {\n    var commentPanelText = document.getElementById(this.pdfViewer.element.id + '_commentsPanelText'); // eslint-disable-next-line max-len\n\n    if (this.pdfViewerBase.navigationPane.commentPanelContainer && this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight && commentPanelText.style.display !== 'none') {\n      commentPanelText.style.paddingTop = this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight / 2 - 47 + 'px';\n      commentPanelText.style.paddingLeft = this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth / 3 + 'px';\n    }\n  };\n  /**\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.createPageAccordion = function (pageIndex) {\n    var pageAccordionContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n\n    if (pageAccordionContainer === null) {\n      this.accordionContent = createElement('div', {\n        id: this.pdfViewer.element.id + '_accordioncontent' + pageIndex\n      });\n      this.accordionContent.style.zIndex = '1000'; // eslint-disable-next-line max-len\n\n      this.accordionPageContainer = createElement('div', {\n        id: this.pdfViewer.element.id + '_accordionPageContainer' + pageIndex,\n        className: 'e-pv-accordion-page-container'\n      });\n      this.accordionPageContainer.appendChild(this.accordionContent);\n      this.pdfViewerBase.viewerMainContainer.appendChild(this.accordionPageContainer); // eslint-disable-next-line max-len\n\n      this.accordionContainer = createElement('div', {\n        id: this.pdfViewer.element.id + '_accordionContainer' + pageIndex,\n        className: 'e-pv-accordion-container'\n      });\n      var pageAccordion = new Accordion({\n        items: [// eslint-disable-next-line max-len\n        {\n          header: this.pdfViewer.localeObj.getConstant('Page') + ' ' + pageIndex,\n          expanded: true,\n          content: '#' + this.pdfViewer.element.id + '_accordioncontent' + pageIndex + ''\n        }]\n      });\n      pageAccordion.appendTo(this.accordionContainer);\n      this.accordionContainer.style.order = 'pageIndex';\n      this.alignAccordionContainer(this.accordionContainer, pageIndex);\n\n      if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true); // eslint-disable-next-line max-len\n\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n        document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'none';\n      }\n\n      if (document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer')) {\n        document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer').style.display = 'block';\n      }\n\n      return this.accordionContainer;\n    }\n  };\n\n  StickyNotesAnnotation.prototype.alignAccordionContainer = function (accordionDiv, pageIndex) {\n    var isAdded = true;\n\n    if (this.accordionContentContainer) {\n      if (this.isAccordionContainer) {\n        this.accordionContentContainer.appendChild(accordionDiv);\n        isAdded = false;\n      } else {\n        for (var i = 1; i <= this.pdfViewerBase.pageCount; i++) {\n          var nextElement = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + i);\n\n          if (nextElement) {\n            if (pageIndex < i) {\n              this.accordionContentContainer.insertBefore(accordionDiv, nextElement);\n              isAdded = false;\n              break;\n            }\n          }\n        }\n      }\n\n      if (isAdded) {\n        this.accordionContentContainer.appendChild(accordionDiv);\n        isAdded = false;\n      }\n\n      this.isAccordionContainer = false;\n    }\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.updateCommentPanelScrollTop = function (pageNumber) {\n    var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n\n    if (accordionDiv) {\n      var scrollValue = accordionDiv.offsetTop + accordionDiv.clientTop - 35;\n      this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n    }\n  };\n  /**\n   * @param data\n   * @param pageIndex\n   * @param type\n   * @param annotationSubType\n   * @param data\n   * @param pageIndex\n   * @param type\n   * @param annotationSubType\n   * @param data\n   * @param pageIndex\n   * @param type\n   * @param annotationSubType\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.createCommentControlPanel = function (data, pageIndex, type, annotationSubType) {\n    var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordioncontent' + pageIndex);\n\n    if (accordionContent) {\n      // eslint-disable-next-line\n      var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n\n      if (accordionExpand) {\n        accordionExpand.ej2_instances[0].expandItem(true);\n      } // eslint-disable-next-line max-len\n\n\n      this.commentsContainer = createElement('div', {\n        id: this.pdfViewer.element.id + 'commentscontainer' + pageIndex + '_' + this.commentsCount,\n        className: 'e-pv-comments-container'\n      });\n      this.commentsContainer.accessKey = pageIndex.toString();\n      var isCommentsAdded = false;\n\n      if (data) {\n        this.commentsContainer.id = data.AnnotName;\n\n        if (data.AnnotName) {\n          for (var j = 0; j < accordionContent.childElementCount; j++) {\n            if (accordionContent.children[j].id === data.AnnotName) {\n              isCommentsAdded = true;\n              break;\n            }\n          }\n        }\n\n        if (data.Name && data.Name === 'freeText') {\n          this.commentsContainer.setAttribute('name', 'freeText');\n        } else {\n          this.commentsContainer.setAttribute('name', data.AnnotType);\n        }\n      }\n\n      if (type) {\n        this.commentsContainer.setAttribute('name', type);\n      }\n\n      this.commentsContainer.addEventListener('mousedown', this.commentsAnnotationSelect.bind(this)); // eslint-disable-next-line max-len\n\n      var commentDiv = createElement('div', {\n        id: this.pdfViewer.element.id + '_commentdiv' + pageIndex + '_' + this.commentsCount,\n        className: 'e-pv-comments-div'\n      });\n      this.commentsCount = this.commentsCount + 1;\n      this.commentsContainer.appendChild(commentDiv);\n      this.updateCommentPanelScrollTop(pageIndex);\n\n      if (!isCommentsAdded) {\n        accordionContent.appendChild(this.commentsContainer);\n      }\n\n      var title = void 0;\n\n      if (data) {\n        title = this.commentsContainer.getAttribute('name');\n\n        if (title === 'null') {\n          title = data.AnnotationType;\n        }\n\n        this.createTitleContainer(commentDiv, title, data.Subject, data.ModifiedDate, data.Author);\n      } else {\n        title = this.commentsContainer.getAttribute('name');\n        this.createTitleContainer(commentDiv, title, annotationSubType);\n      } // eslint-disable-next-line max-len\n\n\n      var commentTextBox = createElement('div', {\n        id: this.pdfViewer.element.id + '_commenttextbox',\n        className: 'e-pv-comment-textbox'\n      }); // eslint-disable-next-line\n\n      var editObj_1 = new InPlaceEditor({\n        mode: 'Inline',\n        type: 'Text',\n        model: {\n          placeholder: this.pdfViewer.localeObj.getConstant('Add a comment') + '..'\n        },\n        emptyText: '',\n        editableOn: 'EditIconClick',\n        saveButton: {\n          content: this.pdfViewer.localeObj.getConstant('Post'),\n          cssClass: 'e-outline',\n          disabled: true\n        },\n        cancelButton: {\n          content: this.pdfViewer.localeObj.getConstant('Cancel'),\n          cssClass: 'e-outline'\n        },\n        submitOnEnter: true\n      });\n\n      if (data && (!isNullOrUndefined(data.Note) || !isNullOrUndefined(data.Text))) {\n        editObj_1.created = function () {\n          setTimeout(function () {\n            editObj_1.element.querySelector('.e-editable-value').innerText = !isNullOrUndefined(data.Note) ? data.Note : !isNullOrUndefined(data.Text) ? data.Text : '';\n          });\n        };\n\n        editObj_1.beginEdit = function () {\n          editObj_1.value = editObj_1.valueEle.innerText;\n        };\n      }\n\n      editObj_1.appendTo(commentTextBox); // eslint-disable-next-line\n\n      var textBox = document.querySelectorAll('.e-editable-inline');\n\n      for (var j = 0; j < textBox.length; j++) {\n        textBox[j].style.display = 'none';\n      }\n\n      if (!data) {\n        editObj_1.enableEditMode = true;\n      } // eslint-disable-next-line\n\n\n      commentTextBox.addEventListener('keydown', function (event) {\n        if (editObj_1.element.querySelector('.e-btn-save')) {\n          if (event.srcElement.value !== '') {\n            editObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n          } else {\n            editObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n          }\n        }\n      });\n      editObj_1.actionSuccess = this.createCommentDiv.bind(this, editObj_1);\n      commentDiv.appendChild(commentTextBox);\n\n      if (data) {\n        editObj_1.value = !isNullOrUndefined(data.Note) ? data.Note : !isNullOrUndefined(data.Text) ? data.Text : '';\n        var isCommentLocked = this.checkIslockProperty(data);\n\n        if (isCommentLocked && data.Comments == null) {\n          this.createCommentDiv(this.commentsContainer);\n        }\n\n        if (data.Name === 'freeText') {\n          editObj_1.value = data.MarkupText;\n        }\n\n        if (data.State) {\n          // eslint-disable-next-line max-len\n          var statusContainer = createElement('div', {\n            id: this.pdfViewer.element.id + 'status' + '_container',\n            className: 'e-pv-status-container'\n          }); // eslint-disable-next-line max-len\n\n          var statusDiv = createElement('div', {\n            id: this.pdfViewer.element.id + 'status' + '_div',\n            className: 'e-pv-status-div'\n          });\n          var statusSpan = createElement('span', {\n            id: this.pdfViewer.element.id + 'status' + '_icon'\n          });\n          statusDiv.appendChild(statusSpan);\n          statusContainer.appendChild(statusDiv);\n          commentDiv.appendChild(statusContainer);\n          this.updateStatusContainer(data.State, statusSpan, statusDiv, statusContainer);\n        }\n\n        if (data.Comments) {\n          for (var j = 0; j < data.Comments.length; j++) {\n            this.renderComments(data.Comments[j], this.commentsContainer);\n          }\n\n          if (data.Note !== ' ' && data.Note !== '' && data.Note !== null) {\n            this.createCommentDiv(this.commentsContainer);\n          }\n        }\n      }\n\n      this.isNewcommentAdded = true;\n      commentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n      commentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n      commentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n      commentDiv.addEventListener('mouseout', this.commentDivMouseLeave.bind(this));\n      commentDiv.addEventListener('focusout', this.commentDivMouseLeave.bind(this));\n      commentTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n      commentTextBox.addEventListener('focusin', this.commentDivFocus.bind(this));\n      return this.commentsContainer.id;\n    }\n\n    return '';\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.commentDivFocus = function (args) {\n    // eslint-disable-next-line\n    var proxy = this;\n    var pageNumber = this.pdfViewerBase.currentPageNumber;\n    setTimeout(function () {\n      proxy.updateScrollPosition(pageNumber);\n    }, 500);\n  };\n\n  StickyNotesAnnotation.prototype.updateScrollPosition = function (pageNumber) {\n    var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n\n    if (accordionDiv && this.isNewcommentAdded) {\n      var commentHeight = 0; // eslint-disable-next-line\n\n      var textBox = document.querySelectorAll('.e-editable-inline');\n\n      if (textBox[0]) {\n        commentHeight = textBox[0].getBoundingClientRect().height;\n      }\n\n      var scrollValue = accordionDiv.offsetTop + accordionDiv.clientTop + commentHeight;\n\n      if (this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop < scrollValue) {\n        this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n      }\n\n      this.isNewcommentAdded = false;\n    }\n  };\n\n  StickyNotesAnnotation.prototype.updateCommentsScrollTop = function (isCommentsAdded) {\n    // eslint-disable-next-line max-len\n    var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewerBase.currentPageNumber); // eslint-disable-next-line\n\n    var commentsContainer = document.querySelector('.e-pv-comments-border');\n    var commentsHeight = 0;\n\n    if (accordionDiv && commentsContainer) {\n      commentsHeight = commentsContainer.getBoundingClientRect().height;\n      var scrollValue = void 0;\n\n      if (isCommentsAdded) {\n        scrollValue = accordionDiv.offsetTop + commentsContainer.offsetTop + commentsHeight / 4;\n      } else {\n        scrollValue = accordionDiv.offsetTop + commentsContainer.offsetTop - 70;\n      }\n\n      this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n    }\n  };\n  /**\n   * @param args\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.createCommentDiv = function (args) {\n    var _this = this;\n\n    var commentsContainer;\n    var titleContainer; // eslint-disable-next-line\n\n    var newCommentDiv = createElement('div', {\n      id: this.pdfViewer.element.id + '_newcommentdiv' + this.commentsCount,\n      className: 'e-pv-new-comments-div'\n    });\n\n    if (args.localName) {\n      commentsContainer = args;\n    } else {\n      commentsContainer = args.valueEle.parentElement.parentElement.parentElement.parentElement;\n      titleContainer = args.valueEle.parentElement.parentElement.previousSibling.childNodes[1];\n    } // eslint-disable-next-line\n\n\n    var commentObj = new InPlaceEditor({\n      mode: 'Inline',\n      type: 'Text',\n      value: '',\n      editableOn: 'Click',\n      model: {\n        placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..'\n      },\n      emptyText: this.pdfViewer.localeObj.getConstant('Add a reply'),\n      saveButton: {\n        content: this.pdfViewer.localeObj.getConstant('Post'),\n        cssClass: 'e-outline',\n        disabled: true\n      },\n      cancelButton: {\n        content: this.pdfViewer.localeObj.getConstant('Cancel'),\n        cssClass: 'e-outline'\n      },\n      submitOnEnter: true\n    });\n    commentObj.appendTo(newCommentDiv);\n    newCommentDiv.lastChild.firstChild.click(); // eslint-disable-next-line\n\n    newCommentDiv.addEventListener('keydown', function (event) {\n      if (commentObj.element.querySelector('.e-btn-save')) {\n        if (event.srcElement.value !== '') {\n          commentObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n        } else {\n          commentObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n          commentObj.enableEditMode = true;\n        }\n      }\n    });\n\n    if (args.valueEle) {\n      if (args.value != null && args.value !== '' && args.value !== ' ') {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n          this.modifyTextProperty(args.value, args.prevValue, args.valueEle.parentNode.parentNode.parentNode.parentNode.id);\n        } else {\n          try {\n            this.modifyTextProperty(args.value, args.prevValue, args.valueEle.parentNode.parentNode.parentNode.parentNode.id);\n          } catch (error) {\n            this.modifyTextProperty(args.value, args.prevValue);\n          }\n        }\n\n        this.updateModifiedDate(titleContainer);\n      }\n\n      if (args.valueEle.parentElement.parentElement.parentElement.parentElement.childElementCount === 1) {\n        if (args.value != null && args.value !== '' && args.value !== ' ') {\n          commentsContainer.appendChild(newCommentDiv);\n          setTimeout(function () {\n            _this.updateCommentsScrollTop(true);\n          }, 50);\n        }\n      }\n    } else {\n      commentsContainer.appendChild(newCommentDiv);\n      setTimeout(function () {\n        _this.updateCommentsScrollTop(true);\n      }, 50);\n    }\n\n    commentObj.actionSuccess = this.saveCommentDiv.bind(this, commentObj);\n  };\n  /**\n   * @param args\n   * @param comment\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.saveCommentDiv = function (args, comment) {\n    var commentsContainer;\n    var annotationAuthor; // eslint-disable-next-line\n\n    var lastElement;\n    var commentValue;\n\n    if (comment.name && args.value !== '') {\n      commentsContainer = args.valueEle.parentElement.parentElement.parentElement;\n      lastElement = args.valueEle.parentElement.parentElement;\n      commentValue = args.value;\n    } else {\n      commentsContainer = args;\n      lastElement = commentsContainer.lastChild;\n      commentValue = comment;\n    }\n\n    if (commentsContainer && lastElement) {\n      commentsContainer.removeChild(lastElement);\n      var replyTextBox = createElement('div', {\n        id: this.pdfViewer.element.id + '_replytextbox'\n      });\n      this.commentsreplyCount = this.commentsreplyCount + 1; // eslint-disable-next-line\n\n      var replyCommentDiv = createElement('div', {\n        id: this.pdfViewer.element.id + 'replyDiv' + this.commentsreplyCount,\n        className: 'e-pv-reply-div'\n      });\n      replyCommentDiv.id = this.pdfViewer.annotation.createGUID();\n      annotationAuthor = this.getAuthorName(this.pdfViewer.selectedItems.annotations[0], commentsContainer);\n      this.createReplyDivTitleContainer(replyCommentDiv, null, annotationAuthor);\n      replyCommentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n      replyCommentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n      replyCommentDiv.addEventListener('click', this.commentDivOnSelect.bind(this));\n      replyTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n      replyCommentDiv.style.border = 1 + 'px';\n      replyCommentDiv.style.borderColor = 'black';\n      replyCommentDiv.style.zIndex = 1002; // eslint-disable-next-line\n\n      var saveObj_1 = new InPlaceEditor({\n        mode: 'Inline',\n        type: 'Text',\n        emptyText: '',\n        editableOn: 'EditIconClick',\n        model: {\n          placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..'\n        },\n        value: commentValue,\n        saveButton: {\n          content: this.pdfViewer.localeObj.getConstant('Post'),\n          cssClass: 'e-outline'\n        },\n        cancelButton: {\n          content: this.pdfViewer.localeObj.getConstant('Cancel'),\n          cssClass: 'e-outline'\n        }\n      });\n\n      saveObj_1.created = function () {\n        setTimeout(function () {\n          saveObj_1.element.querySelector('.e-editable-value').innerText = commentValue;\n        });\n      };\n\n      saveObj_1.beginEdit = function () {\n        saveObj_1.value = saveObj_1.valueEle.innerText;\n      };\n\n      saveObj_1.appendTo(replyTextBox);\n      saveObj_1.actionSuccess = this.modifyProperty.bind(this, saveObj_1);\n      replyCommentDiv.appendChild(replyTextBox);\n      replyCommentDiv.style.paddingLeft = 24 + 'px';\n      commentsContainer.appendChild(replyCommentDiv); // eslint-disable-next-line\n\n      replyTextBox.addEventListener('keydown', function (event) {\n        if (saveObj_1.element.querySelector('.e-btn-save')) {\n          if (event.srcElement.value !== '') {\n            saveObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n          } else {\n            saveObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n          }\n        }\n      });\n      replyCommentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n      replyCommentDiv.addEventListener('dblclick', this.commentsDivDoubleClickEvent.bind(this));\n      this.createCommentDiv(replyCommentDiv.parentElement);\n      this.modifyCommentsProperty(commentValue, replyCommentDiv.id, commentsContainer.id);\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.renderComments = function (data, commentDiv, undoRedoAction, id, isCommentAction) {\n    var annotationAuthor;\n    var replyTextBox = createElement('div', {\n      id: this.pdfViewer.element.id + '_replytextbox'\n    });\n    this.commentsreplyCount = this.commentsreplyCount + 1;\n    var replyDiv = createElement('div', {\n      id: 'replyDiv' + this.commentsreplyCount,\n      className: 'e-pv-reply-div'\n    });\n\n    if (undoRedoAction) {\n      replyDiv.id = data.annotName;\n      annotationAuthor = data.author;\n    } else {\n      replyDiv.id = data.AnnotName;\n      annotationAuthor = data.Author;\n    }\n\n    replyDiv.style.border = 1 + 'px';\n    replyDiv.style.borderColor = 'black';\n\n    if (!annotationAuthor) {\n      annotationAuthor = commentDiv.getAttribute('author');\n    }\n\n    if (undoRedoAction) {\n      if (data.modifiedDate !== undefined) {\n        this.createReplyDivTitleContainer(replyDiv, data.modifiedDate, annotationAuthor);\n      } else {\n        this.createReplyDivTitleContainer(replyDiv, null, annotationAuthor);\n      }\n    } else {\n      this.createReplyDivTitleContainer(replyDiv, data.ModifiedDate, annotationAuthor);\n    }\n\n    replyDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n    replyDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n    replyDiv.addEventListener('click', this.commentDivOnSelect.bind(this));\n    replyTextBox.addEventListener('dblclick', this.openEditorElement.bind(this)); // eslint-disable-next-line\n\n    var saveObj = new InPlaceEditor({\n      mode: 'Inline',\n      type: 'Text',\n      emptyText: '',\n      editableOn: 'EditIconClick',\n      model: {\n        placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..'\n      },\n      value: '',\n      saveButton: {\n        content: this.pdfViewer.localeObj.getConstant('Post'),\n        cssClass: 'e-outline'\n      },\n      cancelButton: {\n        content: this.pdfViewer.localeObj.getConstant('Cancel'),\n        cssClass: 'e-outline'\n      }\n    });\n\n    if (undoRedoAction) {\n      saveObj.value = data.note;\n    } else {\n      saveObj.value = data.Note;\n    }\n\n    saveObj.created = function () {\n      setTimeout(function () {\n        saveObj.element.querySelector('.e-editable-value').innerText = undoRedoAction ? data ? data.note : '' : data ? data.Note : '';\n      });\n    };\n\n    saveObj.beginEdit = function () {\n      saveObj.value = saveObj.valueEle.innerText;\n    };\n\n    saveObj.appendTo(replyTextBox);\n    replyDiv.appendChild(replyTextBox);\n\n    if (undoRedoAction) {\n      data.State = data.state;\n    }\n\n    if (data.State) {\n      // eslint-disable-next-line max-len\n      var statusContainer = createElement('div', {\n        id: this.pdfViewer.element.id + 'status' + '_container',\n        className: 'e-pv-status-container'\n      }); // eslint-disable-next-line max-len\n\n      var statusDiv = createElement('div', {\n        id: this.pdfViewer.element.id + 'status' + '_div',\n        className: 'e-pv-status-div'\n      });\n      var statusSpan = createElement('span', {\n        id: this.pdfViewer.element.id + 'status' + '_icon'\n      });\n      statusDiv.appendChild(statusSpan);\n      statusContainer.appendChild(statusDiv);\n      replyDiv.appendChild(statusContainer);\n      this.updateStatusContainer(data.State, statusSpan, statusDiv, statusContainer);\n    }\n\n    replyDiv.style.paddingLeft = 24 + 'px'; // eslint-disable-next-line\n\n    replyTextBox.addEventListener('keydown', function (event) {\n      if (saveObj.element.querySelector('.e-btn-save')) {\n        if (event.srcElement.value !== '') {\n          saveObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n        } else {\n          saveObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n        }\n      }\n    });\n\n    if (undoRedoAction) {\n      if (isCommentAction) {\n        commentDiv.appendChild(replyDiv);\n      } else {\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(id);\n\n        if (data.position) {\n          commentsDiv.insertBefore(replyDiv, commentsDiv.childNodes[data.position]);\n        } else {\n          // eslint-disable-next-line\n          if (commentsDiv) {\n            if (commentsDiv.childElementCount > 1) {\n              commentsDiv.insertBefore(replyDiv, commentsDiv.childNodes[commentsDiv.childElementCount - 1]);\n            } else {\n              commentDiv.appendChild(replyDiv);\n            }\n          }\n        }\n      }\n    } else {\n      commentDiv.appendChild(replyDiv);\n    }\n\n    replyDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n    replyDiv.addEventListener('dblclick', this.commentsDivDoubleClickEvent.bind(this));\n    saveObj.actionSuccess = this.modifyProperty.bind(this, saveObj);\n  };\n  /**\n   * @param data\n   * @param pageIndex\n   * @param isCopy\n   * @param data\n   * @param pageIndex\n   * @param isCopy\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.createCommentsContainer = function (data, pageIndex, isCopy) {\n    // eslint-disable-next-line\n    var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n\n    if (!accordionContentContainer) {\n      // eslint-disable-next-line max-len\n      var accordionPageContainer = document.getElementById(this.pdfViewer.element.id + '_accordionPageContainer' + pageIndex);\n\n      if (accordionPageContainer) {\n        accordionPageContainer.parentElement.removeChild(accordionPageContainer);\n      }\n\n      accordionContentContainer = this.createPageAccordion(pageIndex);\n\n      if (accordionContentContainer) {\n        accordionContentContainer.ej2_instances[0].expandItem(true);\n      }\n    }\n\n    var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordioncontent' + pageIndex); // eslint-disable-next-line max-len\n\n    this.commentsContainer = createElement('div', {\n      id: this.pdfViewer.element.id + 'commentscontainer' + pageIndex + '_' + this.commentsCount,\n      className: 'e-pv-comments-container'\n    });\n    this.commentsContainer.accessKey = pageIndex.toString();\n\n    if (data) {\n      this.commentsContainer.id = data.annotName;\n    }\n\n    this.commentsContainer.addEventListener('mousedown', this.commentsAnnotationSelect.bind(this)); // eslint-disable-next-line max-len\n\n    var commentDiv = createElement('div', {\n      id: this.pdfViewer.element.id + '_commentdiv' + pageIndex + '_' + this.commentsCount,\n      className: 'e-pv-comments-div'\n    });\n    this.commentsCount = this.commentsCount + 1;\n    this.commentsContainer.appendChild(commentDiv);\n    this.updateCommentPanelScrollTop(pageIndex);\n\n    if (data && accordionContent) {\n      if (data.position || data.position === 0) {\n        accordionContent.insertBefore(this.commentsContainer, accordionContent.children[data.position]);\n      } else {\n        accordionContent.appendChild(this.commentsContainer);\n      }\n    }\n\n    if (data && accordionContent) {\n      if (data.indent) {\n        this.commentsContainer.setAttribute('name', 'shape_measure');\n        this.createTitleContainer(commentDiv, 'shape_measure', data.subject, data.modifiedDate, data.author);\n      } else if (data.shapeAnnotationType === 'sticky' || data.shapeAnnotationType === 'stamp') {\n        // eslint-disable-next-line max-len\n        var annotType = this.createTitleContainer(commentDiv, data.shapeAnnotationType, null, data.modifiedDate, data.author);\n        this.commentsContainer.setAttribute('name', annotType);\n\n        if (annotType === 'sticky') {\n          if (!isCopy) {\n            this.addStickyNotesAnnotations(pageIndex - 1, data);\n          }\n        }\n      } else if (data.shapeAnnotationType === 'textMarkup') {\n        this.commentsContainer.setAttribute('name', 'textMarkup');\n        this.createTitleContainer(commentDiv, 'textMarkup', data.subject, data.modifiedDate, data.author);\n      } else if (data.shapeAnnotationType === 'FreeText') {\n        data.note = data.dynamicText;\n        this.commentsContainer.setAttribute('name', 'freetext');\n        this.createTitleContainer(commentDiv, 'freeText', data.subject, data.modifiedDate);\n      } else if (data.shapeAnnotationType === 'Ink') {\n        data.note = data.dynamicText;\n        this.commentsContainer.setAttribute('name', 'ink');\n        this.createTitleContainer(commentDiv, 'ink', data.subject, data.modifiedDate);\n      } else {\n        this.commentsContainer.setAttribute('name', 'shape');\n\n        if (data.shapeAnnotationType === 'Line') {\n          this.createTitleContainer(commentDiv, 'shape', data.subject, data.modifiedDate, data.author);\n        } else {\n          this.createTitleContainer(commentDiv, 'shape', data.shapeAnnotationType, data.modifiedDate, data.author);\n        }\n      }\n    } // eslint-disable-next-line max-len\n\n\n    var commentTextBox = createElement('div', {\n      id: this.pdfViewer.element.id + '_commenttextbox',\n      className: 'e-pv-comment-textbox'\n    }); // eslint-disable-next-line\n\n    var editObj = new InPlaceEditor({\n      mode: 'Inline',\n      type: 'Text',\n      model: {\n        placeholder: this.pdfViewer.localeObj.getConstant('Add a comment') + '..'\n      },\n      emptyText: '',\n      editableOn: 'EditIconClick',\n      saveButton: {\n        content: this.pdfViewer.localeObj.getConstant('Post'),\n        cssClass: 'e-outline',\n        disabled: true\n      },\n      cancelButton: {\n        content: this.pdfViewer.localeObj.getConstant('Cancel'),\n        cssClass: 'e-outline'\n      },\n      submitOnEnter: true\n    });\n    editObj.appendTo(commentTextBox); // eslint-disable-next-line\n\n    var textBox = document.querySelectorAll('.e-editable-inline');\n\n    for (var j = 0; j < textBox.length; j++) {\n      textBox[j].style.display = 'none';\n    } // eslint-disable-next-line\n\n\n    commentTextBox.addEventListener('keydown', function (event) {\n      if (editObj.element.querySelector('.e-btn-save')) {\n        if (event.srcElement.value !== '') {\n          editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n        } else {\n          editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n        }\n      }\n    });\n    editObj.actionSuccess = this.createCommentDiv.bind(this, editObj);\n    commentDiv.appendChild(commentTextBox);\n\n    if (data) {\n      editObj.value = data.note;\n\n      if (data.state) {\n        // eslint-disable-next-line max-len\n        var statusContainer = createElement('div', {\n          id: this.pdfViewer.element.id + 'status' + '_container',\n          className: 'e-pv-status-container'\n        }); // eslint-disable-next-line max-len\n\n        var statusDiv = createElement('div', {\n          id: this.pdfViewer.element.id + 'status' + '_div',\n          className: 'e-pv-status-div'\n        });\n        var statusSpan = createElement('span', {\n          id: this.pdfViewer.element.id + 'status' + '_icon'\n        });\n        statusDiv.appendChild(statusSpan);\n        statusContainer.appendChild(statusDiv);\n        commentDiv.appendChild(statusContainer);\n        this.updateStatusContainer(data.state, statusSpan, statusDiv, statusContainer);\n      }\n\n      if (data.comments) {\n        for (var j = 0; j < data.comments.length; j++) {\n          this.renderComments(data.comments[j], this.commentsContainer, true, null, true);\n        }\n\n        if (data.comments.length > 0) {\n          this.createCommentDiv(this.commentsContainer);\n        }\n      }\n    }\n\n    commentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n    commentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n    commentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n    commentDiv.addEventListener('mouseout', this.commentDivMouseLeave.bind(this));\n    commentDiv.addEventListener('focusout', this.commentDivMouseLeave.bind(this));\n    commentTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n    return this.commentsContainer.id;\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.modifyProperty = function (args) {\n    var commentElement = args.element.parentElement.id;\n    var parentElement = args.element.parentElement.parentElement.id;\n    var titleElement = args.element.previousSibling.firstChild;\n    this.updateModifiedDate(titleElement);\n    this.modifyCommentsProperty(args.value, commentElement, parentElement, args.prevValue);\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.createTitleContainer = function (commentsDivElement, type, subType, modifiedDate, author, note) {\n    var annotationType = this.getAnnotationType(type); // eslint-disable-next-line max-len\n\n    var commentTitleContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_commentTitleConatiner',\n      className: 'e-pv-comment-title-container'\n    }); // eslint-disable-next-line max-len\n\n    var commentTypeSpan = createElement('span', {\n      id: this.pdfViewer.element.id + '_commenttype' + '_icon'\n    });\n    commentTypeSpan.style.opacity = '0.6';\n    this.updateCommentIcon(commentTypeSpan, annotationType, subType);\n    var annotationAuthor;\n\n    if (!author) {\n      annotationAuthor = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, subType);\n    } else {\n      annotationAuthor = author;\n    }\n\n    commentTypeSpan.style.padding = 8 + 'px';\n    commentTypeSpan.style.cssFloat = 'left';\n    commentTitleContainer.appendChild(commentTypeSpan); // eslint-disable-next-line max-len\n\n    var commentsTitle = createElement('div', {\n      id: this.pdfViewer.element.id + '_commentTitle',\n      className: 'e-pv-comment-title'\n    });\n\n    if (!modifiedDate) {\n      commentsTitle.textContent = annotationAuthor + ' - ' + this.setModifiedDate();\n    } else {\n      commentsTitle.textContent = annotationAuthor + ' - ' + this.setExistingAnnotationModifiedDate(modifiedDate);\n    }\n\n    commentTitleContainer.appendChild(commentsTitle); // eslint-disable-next-line max-len\n\n    var moreOptionsButton = createElement('button', {\n      id: this.pdfViewer.element.id + '_more-options',\n      className: 'e-pv-more-options-button e-btn',\n      attrs: {\n        'tabindex': '-1'\n      }\n    });\n    moreOptionsButton.style.visibility = 'hidden';\n    moreOptionsButton.style.zIndex = '1001';\n    moreOptionsButton.setAttribute('type', 'button'); // eslint-disable-next-line max-len\n\n    var moreOptionsButtonSpan = createElement('span', {\n      id: this.pdfViewer.element.id + '_more-options_icon',\n      className: 'e-pv-more-icon e-pv-icon'\n    });\n    moreOptionsButton.appendChild(moreOptionsButtonSpan);\n    moreOptionsButtonSpan.style.opacity = '0.87';\n    commentTitleContainer.appendChild(moreOptionsButton);\n    commentsDivElement.appendChild(commentTitleContainer); // eslint-disable-next-line\n\n    var commentsContainer = commentsDivElement.parentElement;\n\n    if (commentsContainer) {\n      var author_1 = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, subType);\n      commentsContainer.setAttribute('author', author_1);\n    }\n\n    if (!this.isCreateContextMenu) {\n      this.createCommentContextMenu();\n    }\n\n    this.isCreateContextMenu = true;\n    commentTitleContainer.addEventListener('dblclick', this.openTextEditor.bind(this));\n    moreOptionsButton.addEventListener('mouseup', this.moreOptionsClick.bind(this));\n    return annotationType;\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.createReplyDivTitleContainer = function (commentsDivElement, modifiedDate, annotationAuthor) {\n    // eslint-disable-next-line max-len\n    var replyTitleContainer = createElement('div', {\n      id: this.pdfViewer.element.id + '_replyTitleConatiner',\n      className: 'e-pv-reply-title-container'\n    }); // eslint-disable-next-line max-len\n\n    var replyTitle = createElement('div', {\n      id: this.pdfViewer.element.id + '_replyTitle',\n      className: 'e-pv-reply-title'\n    });\n\n    if (!modifiedDate) {\n      replyTitle.textContent = annotationAuthor + ' - ' + this.setModifiedDate();\n    } else {\n      replyTitle.textContent = annotationAuthor + ' - ' + this.setExistingAnnotationModifiedDate(modifiedDate);\n    }\n\n    replyTitleContainer.appendChild(replyTitle); // eslint-disable-next-line max-len\n\n    var moreButton = createElement('button', {\n      id: this.pdfViewer.element.id + '_more-options',\n      className: 'e-pv-more-options-button e-btn',\n      attrs: {\n        'tabindex': '-1'\n      }\n    });\n    moreButton.style.visibility = 'hidden';\n    moreButton.style.zIndex = '1001';\n    moreButton.setAttribute('type', 'button'); // eslint-disable-next-line max-len\n\n    var moreButtonSpan = createElement('span', {\n      id: this.pdfViewer.element.id + '_more-options_icon',\n      className: 'e-pv-more-icon e-pv-icon'\n    });\n    moreButton.appendChild(moreButtonSpan);\n    moreButtonSpan.style.opacity = '0.87';\n    replyTitleContainer.appendChild(moreButton);\n    commentsDivElement.appendChild(replyTitleContainer);\n    replyTitleContainer.addEventListener('dblclick', this.openTextEditor.bind(this));\n    moreButton.addEventListener('mouseup', this.moreOptionsClick.bind(this));\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateCommentIcon = function (commentSpan, annotationType, annotationSubType) {\n    if (annotationType === 'sticky') {\n      commentSpan.className = 'e-pv-comment-icon e-pv-icon';\n    } else if (annotationType === 'stamp') {\n      commentSpan.className = 'e-pv-stamp-icon e-pv-icon';\n    } else if (annotationType === 'shape') {\n      if (annotationSubType === 'Line') {\n        commentSpan.className = 'e-pv-shape-line-icon e-pv-icon';\n      } else if (annotationSubType === 'LineWidthArrowHead' || annotationSubType === 'Arrow') {\n        commentSpan.className = 'e-pv-shape-arrow-icon e-pv-icon';\n      } else if (annotationSubType === 'Circle' || annotationSubType === 'Ellipse' || annotationSubType === 'Oval') {\n        commentSpan.className = 'e-pv-shape-circle-icon e-pv-icon';\n      } else if (annotationSubType === 'Rectangle' || annotationSubType === 'Square') {\n        commentSpan.className = 'e-pv-shape-rectangle-icon e-pv-icon';\n      } else if (annotationSubType === 'Polygon') {\n        commentSpan.className = 'e-pv-shape-pentagon-icon e-pv-icon';\n      } else {\n        commentSpan.className = 'e-pv-annotation-shape-icon e-pv-icon';\n      }\n    } else if (annotationType === 'measure') {\n      if (annotationSubType === 'Distance' || annotationSubType === 'Distance calculation') {\n        commentSpan.className = 'e-pv-calibrate-distance-icon e-pv-icon';\n      } else if (annotationSubType === 'Perimeter' || annotationSubType === 'Perimeter calculation') {\n        commentSpan.className = 'e-pv-calibrate-perimeter-icon e-pv-icon';\n      } else if (annotationSubType === 'Radius' || annotationSubType === 'Radius calculation') {\n        commentSpan.className = 'e-pv-calibrate-radius-icon e-pv-icon';\n      } else if (annotationSubType === 'Area' || annotationSubType === 'Area calculation') {\n        commentSpan.className = 'e-pv-calibrate-area-icon e-pv-icon';\n      } else if (annotationSubType === 'Volume' || annotationSubType === 'Volume calculation') {\n        commentSpan.className = 'e-pv-calibrate-volume-icon e-pv-icon';\n      } else {\n        commentSpan.className = 'e-pv-annotation-calibrate-icon e-pv-icon';\n      }\n    } else if (annotationType === 'textMarkup') {\n      if (annotationSubType === 'Highlight') {\n        commentSpan.className = 'e-pv-highlight-icon e-pv-icon';\n      } else if (annotationSubType === 'Underline') {\n        commentSpan.className = 'e-pv-underline-icon e-pv-icon';\n      } else if (annotationSubType === 'Strikethrough') {\n        commentSpan.className = 'e-pv-strikethrough-icon e-pv-icon';\n      } else {\n        commentSpan.className = 'e-pv-annotation-icon e-pv-icon';\n      }\n    } else if (annotationType === 'freeText') {\n      commentSpan.className = 'e-pv-freetext-icon e-pv-icon';\n    } else if (annotationType === 'ink' || annotationSubType === 'Ink') {\n      commentSpan.className = 'e-pv-inkannotation-icon e-pv-icon';\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateStatusContainer = function (state, statusSpan, statusDiv, statusContainer) {\n    if (state === 'Accepted') {\n      statusDiv.style.backgroundColor = 'rgb(24,169,85)';\n      statusSpan.className = 'e-pv-accepted-icon';\n    } else if (state === 'Completed') {\n      statusDiv.style.backgroundColor = 'rgb(0,122,255)';\n      statusSpan.className = 'e-pv-completed-icon';\n    } else if (state === 'Cancelled') {\n      statusDiv.style.backgroundColor = 'rgb(245,103,0)';\n      statusSpan.className = 'e-pv-cancelled-icon';\n    } else if (state === 'Rejected') {\n      statusDiv.style.backgroundColor = 'rgb(255,59,48)';\n      statusSpan.className = 'e-pv-rejected-icon';\n    } else {\n      statusSpan.className = '';\n      statusContainer.parentElement.removeChild(statusContainer);\n    }\n  };\n  /**\n   * @param removeDiv\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.updateAccordionContainer = function (removeDiv) {\n    // eslint-disable-next-line\n    var pageNumber = parseInt(removeDiv.accessKey);\n    var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n\n    if (accordionContent) {\n      accordionContent.parentElement.removeChild(accordionContent);\n    }\n\n    var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n\n    if (accordionContentContainer) {\n      if (accordionContentContainer.childElementCount === 0) {\n        accordionContentContainer.style.display = 'none';\n\n        if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n          // eslint-disable-next-line max-len\n          this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false); // eslint-disable-next-line max-len\n\n          this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], false);\n          document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'block';\n          this.updateCommentPanelTextTop();\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.createCommentContextMenu = function () {\n    // eslint-disable-next-line max-len\n    this.commentContextMenu = [{\n      text: this.pdfViewer.localeObj.getConstant('Edit')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Delete Context')\n    }, {\n      // eslint-disable-next-line max-len\n      text: this.pdfViewer.localeObj.getConstant('Set Status'),\n      items: [{\n        text: this.pdfViewer.localeObj.getConstant('None')\n      }, {\n        text: this.pdfViewer.localeObj.getConstant('Accepted')\n      }, {\n        text: this.pdfViewer.localeObj.getConstant('Cancelled')\n      }, {\n        text: this.pdfViewer.localeObj.getConstant('Completed')\n      }, {\n        text: this.pdfViewer.localeObj.getConstant('Rejected')\n      }]\n    }];\n    var commentMenuElement = createElement('ul', {\n      id: this.pdfViewer.element.id + '_comment_context_menu'\n    });\n    this.pdfViewer.element.appendChild(commentMenuElement);\n    this.commentMenuObj = new Context({\n      target: '#' + this.pdfViewer.element.id + '_more-options',\n      items: this.commentContextMenu,\n      beforeOpen: this.contextMenuBeforeOpen.bind(this),\n      select: this.commentMenuItemSelect.bind(this)\n    });\n\n    if (this.pdfViewer.enableRtl) {\n      this.commentMenuObj.enableRtl = true;\n    }\n\n    this.commentMenuObj.appendTo(commentMenuElement);\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.commentMenuObj.animationSettings.effect = 'ZoomIn';\n    } else {\n      this.commentMenuObj.animationSettings.effect = 'SlideDown';\n    }\n  };\n\n  StickyNotesAnnotation.prototype.contextMenuBeforeOpen = function (args) {\n    // eslint-disable-next-line\n    var contextActiveDiv; // eslint-disable-next-line\n\n    var contextDiv = document.querySelectorAll('#' + this.pdfViewer.element.id + '_more-options');\n\n    if (contextDiv) {\n      for (var i = 0; i < contextDiv.length; i++) {\n        if (contextDiv[i].style.visibility === 'visible') {\n          contextActiveDiv = contextDiv[i].parentElement.nextSibling;\n        }\n      }\n    }\n\n    var isCommentLocked = this.checkIslockProperty(contextActiveDiv);\n\n    if (isCommentLocked) {\n      this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Edit')], false);\n      this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], false);\n    } else {\n      this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Edit')], true);\n      this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.commentMenuItemSelect = function (args) {\n    // eslint-disable-next-line\n    var contextActiveDiv; // eslint-disable-next-line\n\n    var contextDiv = document.querySelectorAll('#' + this.pdfViewer.element.id + '_more-options');\n\n    if (contextDiv) {\n      for (var i = 0; i < contextDiv.length; i++) {\n        if (contextDiv[i].style.visibility === 'visible') {\n          contextActiveDiv = contextDiv[i].parentElement.nextSibling;\n        }\n      }\n\n      if (args.item) {\n        switch (args.item.text) {\n          case this.pdfViewer.localeObj.getConstant('Edit'):\n            // eslint-disable-next-line\n            var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n\n            for (var i = 0; i < commentShow.length; i++) {\n              commentShow[i].style.display = 'none';\n            }\n\n            contextActiveDiv.ej2_instances[0].enableEditMode = true;\n            break;\n\n          case this.pdfViewer.localeObj.getConstant('Delete Context'):\n            if (contextActiveDiv.parentElement.parentElement.firstChild === contextActiveDiv.parentElement) {\n              this.pdfViewer.annotationModule.deleteAnnotation();\n            } else {\n              // eslint-disable-next-line max-len\n              this.modifyCommentDeleteProperty(contextActiveDiv.parentElement.parentElement, contextActiveDiv.parentElement);\n            }\n\n            break;\n\n          case this.pdfViewer.localeObj.getConstant('Set Status'):\n            break;\n\n          case this.pdfViewer.localeObj.getConstant('Accepted'):\n            if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n              contextActiveDiv.parentElement.lastChild.remove();\n            } // eslint-disable-next-line max-len\n\n\n            var acceptedStatusDiv = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_container',\n              className: 'e-pv-status-container'\n            }); // eslint-disable-next-line max-len\n\n            var statusDiv = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_div',\n              className: 'e-pv-status-div'\n            });\n            var statusSpan = createElement('span', {\n              id: this.pdfViewer.element.id + 'status' + '_icon',\n              className: 'e-pv-accepted-icon'\n            });\n            statusDiv.style.backgroundColor = 'rgb(24,169,85)';\n            statusDiv.appendChild(statusSpan);\n            acceptedStatusDiv.appendChild(statusDiv);\n            contextActiveDiv.parentElement.appendChild(acceptedStatusDiv);\n            this.modifyStatusProperty('Accepted', contextActiveDiv.parentElement);\n            break;\n\n          case this.pdfViewer.localeObj.getConstant('Completed'):\n            if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n              contextActiveDiv.parentElement.lastChild.remove();\n            } // eslint-disable-next-line max-len\n\n\n            var completedStatusDiv = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_container',\n              className: 'e-pv-status-container'\n            }); // eslint-disable-next-line max-len\n\n            var statusElement = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_div',\n              className: 'e-pv-status-div'\n            }); // eslint-disable-next-line max-len\n\n            var statusOptionSpan = createElement('span', {\n              id: this.pdfViewer.element.id + 'status' + '_icon',\n              className: 'e-pv-completed-icon'\n            });\n            statusElement.style.backgroundColor = 'rgb(0,122,255)';\n            statusElement.appendChild(statusOptionSpan);\n            completedStatusDiv.appendChild(statusElement);\n            contextActiveDiv.parentElement.appendChild(completedStatusDiv);\n            this.modifyStatusProperty('Completed', contextActiveDiv.parentElement);\n            break;\n\n          case this.pdfViewer.localeObj.getConstant('Cancelled'):\n            if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n              contextActiveDiv.parentElement.lastChild.remove();\n            } // eslint-disable-next-line max-len\n\n\n            var cancelStatusDiv = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_container',\n              className: 'e-pv-status-container'\n            }); // eslint-disable-next-line max-len\n\n            var cancelStatusElement = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_div',\n              className: 'e-pv-status-div'\n            }); // eslint-disable-next-line max-len\n\n            var cancelStatusSpan = createElement('span', {\n              id: this.pdfViewer.element.id + 'status' + '_icon',\n              className: 'e-pv-cancelled-icon'\n            });\n            cancelStatusElement.style.backgroundColor = 'rgb(245,103,0)';\n            cancelStatusElement.appendChild(cancelStatusSpan);\n            cancelStatusDiv.appendChild(cancelStatusElement);\n            contextActiveDiv.parentElement.appendChild(cancelStatusDiv);\n            this.modifyStatusProperty('Cancelled', contextActiveDiv.parentElement);\n            break;\n\n          case this.pdfViewer.localeObj.getConstant('Rejected'):\n            if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n              contextActiveDiv.parentElement.lastChild.remove();\n            } // eslint-disable-next-line max-len\n\n\n            var rejectedStatusDiv = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_container',\n              className: 'e-pv-status-container'\n            }); // eslint-disable-next-line max-len\n\n            var rejectedStatusElement = createElement('div', {\n              id: this.pdfViewer.element.id + 'status' + '_div',\n              className: 'e-pv-status-div'\n            }); // eslint-disable-next-line max-len\n\n            var rejectedStatusSpan = createElement('span', {\n              id: this.pdfViewer.element.id + 'status' + '_icon',\n              className: 'e-pv-rejected-icon'\n            });\n            rejectedStatusElement.style.backgroundColor = 'rgb(255,59,48)';\n            rejectedStatusElement.appendChild(rejectedStatusSpan);\n            rejectedStatusDiv.appendChild(rejectedStatusElement);\n            contextActiveDiv.parentElement.appendChild(rejectedStatusDiv);\n            this.modifyStatusProperty('Rejected', contextActiveDiv.parentElement);\n            break;\n\n          case this.pdfViewer.localeObj.getConstant('None'):\n            if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n              contextActiveDiv.parentElement.lastChild.remove();\n            }\n\n            this.modifyStatusProperty('None', contextActiveDiv.parentElement);\n            break;\n\n          default:\n            break;\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.moreOptionsClick = function (event, isMoreOptionClick) {\n    if (document.getElementById(this.pdfViewer.element.id + '_comment_context_menu').style.display !== 'block') {\n      if (event.currentTarget.className === 'e-pv-more-options-button e-btn') {\n        event.currentTarget.parentElement.nextSibling.lastChild.firstChild.click();\n      }\n\n      this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj);\n      this.commentMenuObj.open(event.clientY, event.clientX, event.currentTarget);\n    }\n\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule) {\n      // eslint-disable-next-line\n      var currentPageNumber = parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n      this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.openTextEditor = function (event) {\n    // eslint-disable-next-line\n    var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n\n    for (var i = 0; i < commentShow.length; i++) {\n      commentShow[i].style.display = 'none';\n    }\n\n    var isCommentLocked = this.checkIslockProperty(event.currentTarget.nextSibling);\n\n    if (isCommentLocked) {\n      event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = false;\n    } else if (event.currentTarget.parentElement.parentElement) {\n      var isLocked = this.checkAnnotationSettings(event.currentTarget.parentElement.parentElement.id);\n\n      if (isLocked) {\n        // eslint-disable-next-line\n        var annotation = this.findAnnotationObject(event.currentTarget.parentElement.parentElement.id);\n\n        if (this.pdfViewer.annotationModule.checkAllowedInteractions('Select', annotation)) {\n          isLocked = false;\n        }\n      }\n\n      if (!isLocked) {\n        event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = true;\n      }\n    } else {\n      event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = true;\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.checkIslockProperty = function (commentEvent) {\n    // eslint-disable-next-line\n    var annotCollection = this.pdfViewer.annotationCollection; // eslint-disable-next-line\n\n    var annotation;\n\n    if (commentEvent.IsCommentLock) {\n      return true;\n    } // eslint-disable-next-line max-len\n\n\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      annotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    } else if (this.pdfViewer.selectedItems.annotations[0]) {\n      annotation = this.pdfViewer.selectedItems.annotations[0];\n    }\n\n    for (var i = 0; i < annotCollection.length; i++) {\n      // eslint-disable-next-line max-len\n      var note = annotCollection[i].note ? annotCollection[i].note : annotCollection[i].notes;\n\n      if (annotCollection[i].isCommentLock === true && (commentEvent.textContent === note || annotCollection[i].dynamicText === commentEvent.textContent)) {\n        return true;\n      }\n\n      for (var j = 0; j < annotCollection[i].comments.length; j++) {\n        if (annotation && annotCollection[i].annotationId === annotation.annotName) {\n          // eslint-disable-next-line max-len\n          if (annotCollection[i].comments[j].isLock === true && commentEvent.textContent === annotCollection[i].comments[j].note) {\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.openEditorElement = function (event) {\n    // eslint-disable-next-line\n    var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n\n    for (var i = 0; i < commentShow.length; i++) {\n      commentShow[i].style.display = 'none';\n    }\n\n    var isCommentLocked = this.checkIslockProperty(event.currentTarget);\n\n    if (isCommentLocked) {\n      event.currentTarget.ej2_instances[0].enableEditMode = false;\n    } else if (event.currentTarget.parentElement.parentElement) {\n      var isLocked = this.checkAnnotationSettings(event.currentTarget.parentElement.parentElement.id);\n\n      if (isLocked) {\n        // eslint-disable-next-line\n        var annotation = this.findAnnotationObject(event.currentTarget.parentElement.parentElement.id);\n\n        if (this.pdfViewer.annotationModule.checkAllowedInteractions('Select', annotation)) {\n          isLocked = false;\n        }\n      }\n\n      if (!isLocked) {\n        if (this.pdfViewer.selectedItems.annotations[0].isReadonly) {\n          event.currentTarget.ej2_instances[0].enableEditMode = false;\n        } else {\n          event.currentTarget.ej2_instances[0].enableEditMode = true;\n        }\n      }\n    } else {\n      event.currentTarget.ej2_instances[0].enableEditMode = true;\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.commentsDivClickEvent = function (event) {\n    // eslint-disable-next-line\n    var annotation = this.findAnnotationObject(event.currentTarget.parentElement.id);\n    var isLocked = this.checkAnnotationSettings(event.currentTarget.parentElement.id);\n\n    if (isLocked) {\n      if (this.pdfViewer.annotationModule.checkAllowedInteractions('Select', annotation)) {\n        isLocked = false;\n      }\n    }\n\n    if (!isLocked) {\n      var isCommentsSelect = false;\n\n      if (event.clientX === 0 && event.clientY === 0) {\n        this.isSetAnnotationType = true;\n      } else {\n        this.isSetAnnotationType = false;\n      }\n\n      if (event.target.className === 'e-pv-more-icon e-pv-icon') {\n        return null;\n      } // eslint-disable-next-line\n\n\n      var x = document.querySelectorAll('#' + this.pdfViewer.element.id + '_more-options');\n\n      for (var i = 0; i < x.length; i++) {\n        x[i].style.visibility = 'hidden';\n      }\n\n      if (document.getElementById(this.pdfViewer.element.id + '_commantPanel').style.display === 'none') {\n        this.pdfViewer.annotationModule.showCommentsPanel();\n      }\n\n      if (event.currentTarget.parentElement.classList.contains('e-pv-comments-border')) {\n        isCommentsSelect = true;\n      }\n\n      event.currentTarget.firstChild.lastChild.style.visibility = 'visible'; // eslint-disable-next-line\n\n      var commentsContainer = document.querySelectorAll('.e-pv-comments-border');\n\n      if (commentsContainer) {\n        for (var j = 0; j < commentsContainer.length; j++) {\n          commentsContainer[j].classList.remove('e-pv-comments-border');\n        }\n      }\n\n      event.currentTarget.parentElement.classList.add('e-pv-comments-border'); // eslint-disable-next-line\n\n      var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n\n      for (var i = 0; i < commentShow.length; i++) {\n        commentShow[i].style.display = 'none';\n      } // eslint-disable-next-line\n\n\n      var editElement = event.currentTarget.parentElement.lastChild; // eslint-disable-next-line\n\n      var commentsElement = event.currentTarget.parentElement;\n\n      if (editElement) {\n        editElement.style.display = 'block';\n\n        if (editElement.querySelector('.e-editable-inline')) {\n          if (!this.isEditableElement) {\n            editElement.querySelector('.e-editable-inline').style.display = 'block';\n          }\n\n          for (var i = 0; i < commentsElement.childElementCount; i++) {\n            // eslint-disable-next-line\n            var activeElement = commentsElement.childNodes[i]; // eslint-disable-next-line\n\n            var textElement = activeElement.querySelector('.e-editable-inline');\n\n            if (textElement) {\n              if (textElement.style.display === '') {\n                editElement.style.display = 'none';\n                editElement.querySelector('.e-editable-inline').style.display = 'none';\n              }\n            }\n          }\n        }\n\n        if (this.isSetAnnotationType) {\n          if (!isCommentsSelect) {\n            this.updateCommentsScrollTop();\n          }\n        }\n      }\n\n      if (event.currentTarget.parentElement.childElementCount === 1) {\n        if (!this.pdfViewer.enableShapeLabel) {\n          event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n        } else {\n          var type = event.currentTarget.parentElement.getAttribute('name');\n\n          if (this.isSetAnnotationType && type === 'shape') {\n            event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = false;\n          } else {\n            event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n          }\n        }\n      }\n\n      var editModule = void 0;\n\n      if (event && event.currentTarget && event.currentTarget.childNodes[1]) {\n        editModule = event.currentTarget.childNodes[1].ej2_instances[0];\n      }\n\n      if (event.currentTarget && event.currentTarget.id && editModule) {\n        // eslint-disable-next-line\n        if (annotation && annotation.isCommentLock) {\n          editModule.enableEditMode = false;\n          this.createCommentDiv(event.currentTarget);\n        }\n\n        this.pdfViewer.fireCommentSelect(event.currentTarget.id, event.currentTarget.childNodes[1].ej2_instances[0].value, annotation);\n      }\n\n      this.commentDivOnSelect(event);\n      event.preventDefault();\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.commentsDivDoubleClickEvent = function (event) {\n    // eslint-disable-next-line\n    var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n\n    for (var i = 0; i < commentShow.length; i++) {\n      commentShow[i].style.display = 'none';\n    }\n\n    var isCommentLocked = this.checkIslockProperty(event.currentTarget.children[1]);\n\n    if (isCommentLocked) {\n      if (event.currentTarget.childElementCount === 2) {\n        event.currentTarget.lastChild.ej2_instances[0].enableEditMode = false;\n      } else {\n        event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = false;\n      }\n    } else if (event.currentTarget) {\n      var isLocked = this.checkAnnotationSettings(event.currentTarget.parentElement.id);\n\n      if (!isLocked) {\n        if (event.currentTarget.childElementCount === 2) {\n          event.currentTarget.lastChild.ej2_instances[0].enableEditMode = true;\n        } else {\n          event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.commentDivOnSelect = function (event) {\n    // eslint-disable-next-line\n    var commentSelect = document.querySelectorAll('.e-pv-comments-select');\n\n    for (var z = 0; z < commentSelect.length; z++) {\n      commentSelect[z].classList.remove('e-pv-comments-select');\n    }\n\n    var activeElement = document.getElementById(event.currentTarget.id);\n\n    if (activeElement) {\n      activeElement.classList.remove('e-pv-comments-hover');\n      activeElement.classList.remove('e-pv-comments-leave');\n      activeElement.classList.add('e-pv-comments-select');\n\n      if (event.currentTarget.nextSibling) {\n        if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n          var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n          activeSiblingElement.classList.remove('e-pv-comments-hover');\n          activeSiblingElement.classList.remove('e-pv-comments-leave');\n          activeSiblingElement.classList.add('e-pv-comments-select');\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.commentDivMouseOver = function (event) {\n    var activeElement = document.getElementById(event.currentTarget.id);\n\n    if (activeElement) {\n      activeElement.classList.remove('e-pv-comments-select');\n      activeElement.classList.remove('e-pv-comments-leave');\n      activeElement.classList.add('e-pv-comments-hover');\n\n      if (event.currentTarget.nextSibling) {\n        if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n          var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n          activeSiblingElement.classList.remove('e-pv-comments-select');\n          activeSiblingElement.classList.remove('e-pv-comments-leave');\n          activeSiblingElement.classList.add('e-pv-comments-hover');\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.commentDivMouseLeave = function (event) {\n    var activeElement = document.getElementById(event.currentTarget.id);\n\n    if (activeElement) {\n      activeElement.classList.remove('e-pv-comments-hover');\n      activeElement.classList.remove('e-pv-comments-select');\n      activeElement.classList.add('e-pv-comments-leave');\n\n      if (event.currentTarget.nextSibling) {\n        if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n          var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n          activeSiblingElement.classList.remove('e-pv-comments-hover');\n          activeSiblingElement.classList.remove('e-pv-comments-select');\n          activeSiblingElement.classList.add('e-pv-comments-leave');\n        }\n      }\n    }\n  };\n  /**\n   * @param event\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.drawIcons = function (event) {\n    // eslint-disable-next-line\n    if (this.pdfViewerBase.isCommentIconAdded) {\n      var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n      var pageCurrentRect = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex).getBoundingClientRect();\n      var zoomValue = this.pdfViewerBase.getZoomFactor(); // eslint-disable-next-line max-len\n\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((event.clientX - pageCurrentRect.left) / zoomValue, (event.clientY - pageCurrentRect.top) / zoomValue, 30, 30, pageIndex, null);\n      this.pdfViewerBase.isCommentIconAdded = false;\n      var commentsButton = document.getElementById(this.pdfViewer.element.id + '_comment');\n\n      if (isBlazor()) {\n        commentsButton = commentsButton.children[0];\n      }\n\n      if (commentsButton && commentsButton.classList.contains('e-pv-select')) {\n        commentsButton.classList.remove('e-pv-select');\n      } else {\n        var commentsIcon = document.getElementById(this.pdfViewer.element.id + '_commentIcon');\n\n        if (commentsIcon) {\n          this.pdfViewer.enableRtl ? commentsIcon.className = 'e-pv-comment-icon e-pv-icon e-icon-left e-right' : commentsIcon.className = 'e-pv-comment-icon e-pv-icon e-icon-left';\n        }\n      }\n    }\n  };\n  /**\n   * @param annotationType\n   * @param pageNumber\n   * @param annotationSubType\n   * @param annotationType\n   * @param pageNumber\n   * @param annotationSubType\n   * @param annotationType\n   * @param pageNumber\n   * @param annotationSubType\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.addComments = function (annotationType, pageNumber, annotationSubType) {\n    var commentsDivid; // eslint-disable-next-line max-len\n\n    var accordion = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n\n    if (accordion) {\n      // eslint-disable-next-line max-len\n      commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null, pageNumber, annotationType, annotationSubType);\n    } else {\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.createPageAccordion(pageNumber); // eslint-disable-next-line max-len\n\n      commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null, pageNumber, annotationType, annotationSubType);\n    }\n\n    return commentsDivid;\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.commentsAnnotationSelect = function (event) {\n    var element = event.currentTarget;\n    var isLocked = this.checkAnnotationSettings(element.id);\n\n    if (isLocked) {\n      // eslint-disable-next-line\n      var annotation = this.findAnnotationObject(element.id);\n\n      if (this.pdfViewer.annotationModule.checkAllowedInteractions('Select', annotation)) {\n        isLocked = false;\n      }\n    }\n\n    if (!isLocked) {\n      if (element.classList.contains('e-pv-comments-border')) {\n        // eslint-disable-next-line\n        var commentsDiv = document.querySelectorAll('.e-pv-comments-div');\n\n        for (var j = 0; j < commentsDiv.length; j++) {\n          commentsDiv[j].style.minHeight = 60 + 'px';\n        }\n\n        if (event.currentTarget.childElementCount === 1) {\n          if (event.currentTarget.childNodes[0].querySelector('.e-editable-inline')) {\n            event.currentTarget.childNodes[0].style.minHeight = event.currentTarget.childNodes[0].clientHeight;\n          }\n        }\n      }\n\n      if (event.target.className === 'e-pv-more-icon e-pv-icon' || event.target.className === 'e-pv-more-options-button e-btn') {\n        event.preventDefault();\n        return null;\n      } // eslint-disable-next-line\n\n\n      var pageNumber = parseInt(element.accessKey);\n\n      if (!element.classList.contains('e-pv-comments-border')) {\n        // eslint-disable-next-line\n        var commentsContainer = document.querySelectorAll('.e-pv-comments-border');\n\n        if (commentsContainer) {\n          for (var j = 0; j < commentsContainer.length; j++) {\n            commentsContainer[j].classList.remove('e-pv-comments-border');\n          }\n        }\n\n        var commentsDiv = document.getElementById(element.id);\n\n        if (commentsDiv) {\n          commentsDiv.classList.add('e-pv-comments-border');\n        } // eslint-disable-next-line\n\n\n        var commentTextBox = document.querySelectorAll('.e-pv-new-comments-div');\n\n        for (var j = 0; j < commentTextBox.length; j++) {\n          commentTextBox[j].style.display = 'none';\n        }\n\n        if (commentsDiv) {\n          // eslint-disable-next-line\n          var currentTextBox = commentsDiv.querySelector('.e-pv-new-comments-div');\n\n          if (currentTextBox) {\n            currentTextBox.style.display = 'block';\n          }\n        } // eslint-disable-next-line\n\n\n        var textDiv = element.lastChild;\n        this.isEditableElement = false;\n\n        if (textDiv.querySelector('.e-editable-inline')) {\n          textDiv.style.display = 'block';\n          textDiv.querySelector('.e-editable-inline').style.display = 'block';\n\n          for (var i = 0; i < element.childElementCount; i++) {\n            // eslint-disable-next-line\n            var activeElement = element.childNodes[i]; // eslint-disable-next-line\n\n            var textElement = activeElement.querySelector('.e-editable-inline');\n\n            if (textElement) {\n              if (textElement.style.display === '') {\n                if (textDiv.classList.contains('e-pv-new-comments-div')) {\n                  this.isEditableElement = true;\n                  textDiv.style.display = 'none';\n                  textDiv.querySelector('.e-editable-inline').style.display = 'none';\n                }\n              }\n            }\n          }\n        }\n\n        this.isSetAnnotationType = false;\n\n        if (event.currentTarget.childElementCount === 1) {\n          event.currentTarget.childNodes[0].childNodes[1].ej2_instances[0].enableEditMode = true;\n        }\n      } else {\n        this.isSetAnnotationType = true;\n      }\n\n      if (!this.isSetAnnotationType) {\n        if (this.pdfViewer.navigation) {\n          this.pdfViewer.navigationModule.goToPage(pageNumber);\n        }\n\n        var annotType = element.getAttribute('name');\n\n        if (annotType === 'null' || annotType === 'Ink') {\n          annotType = 'ink';\n        }\n\n        this.isCommentsSelected = false;\n        this.setAnnotationType(element.id, annotType, pageNumber);\n\n        if (!this.isCommentsSelected) {\n          this.selectAnnotationObj = {\n            id: element.id,\n            annotType: annotType,\n            pageNumber: pageNumber\n          };\n        }\n      }\n    }\n\n    this.isSetAnnotationType = false;\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.findAnnotationObject = function (id) {\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    } else if (this.pdfViewer.selectedItems.annotations[0]) {\n      return this.pdfViewer.selectedItems.annotations[0];\n    } // eslint-disable-next-line\n\n\n    var annotationCollection = this.pdfViewer.annotationCollection;\n\n    if (annotationCollection) {\n      for (var i = 0; i < annotationCollection.length; i++) {\n        if (annotationCollection[i].annotationId && annotationCollection[i].annotationId === id) {\n          if (annotationCollection[i].shapeAnnotationType === 'textMarkup') {\n            return annotationCollection[i];\n          } else {\n            annotationCollection = this.pdfViewer.annotations;\n\n            for (var j = 0; j < annotationCollection.length; j++) {\n              if (annotationCollection[j].annotName && annotationCollection[j].annotName === id) {\n                return annotationCollection[j];\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n\n  StickyNotesAnnotation.prototype.checkAnnotationSettings = function (id) {\n    // eslint-disable-next-line\n    var annotationCollection = this.pdfViewer.annotationCollection;\n\n    if (annotationCollection) {\n      for (var i = 0; i < annotationCollection.length; i++) {\n        if (annotationCollection[i].annotationId && annotationCollection[i].annotationId === id) {\n          if (annotationCollection[i].annotationSettings && annotationCollection[i].annotationSettings.isLock) {\n            return true;\n          } else {\n            return false;\n          }\n        }\n      }\n\n      return false;\n    } else {\n      return false;\n    }\n  };\n\n  StickyNotesAnnotation.prototype.updateCommentsContainerWidth = function () {\n    var accordionContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n    var commentsContentContainer = document.getElementById(this.pdfViewer.element.id + '_commentscontentcontainer');\n    accordionContainer.style.width = commentsContentContainer.clientWidth + 'px';\n  };\n  /**\n   * @param pageIndex\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.selectCommentsAnnotation = function (pageIndex) {\n    if (this.selectAnnotationObj && !this.isCommentsSelected) {\n      if (this.selectAnnotationObj.pageNumber - 1 === pageIndex) {\n        // eslint-disable-next-line max-len\n        this.setAnnotationType(this.selectAnnotationObj.id, this.selectAnnotationObj.annotType, this.selectAnnotationObj.pageNumber);\n        this.selectAnnotationObj = null;\n        this.isCommentsSelected = true;\n      }\n    }\n  };\n\n  StickyNotesAnnotation.prototype.setAnnotationType = function (id, type, pageNumber) {\n    var typeString = type === 'measure' ? 'shape_measure' : type;\n\n    if (typeString === 'freeText') {\n      typeString = 'freetext';\n    } // eslint-disable-next-line\n\n\n    var storeCommentObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + typeString);\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeCommentObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + typeString];\n    }\n\n    if (storeCommentObject) {\n      var annotationCommentObject = JSON.parse(storeCommentObject); // eslint-disable-next-line\n\n      var annotation = this.pdfViewer.selectedItems.annotations[0]; // eslint-disable-next-line max-len\n\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotationCommentObject, pageNumber - 1);\n\n      if (annotationCommentObject[index]) {\n        // eslint-disable-next-line\n        var pageCollections = annotationCommentObject[index].annotations;\n\n        for (var i = 0; i < pageCollections.length; i++) {\n          var currentSelector = pageCollections[i].annotationSelectorSettings;\n\n          if (pageCollections[i].annotName === id) {\n            if (annotation) {\n              this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n            }\n\n            this.pdfViewer.clearSelection(pageNumber - 1);\n\n            if (type === 'textMarkup') {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageNumber - 1, true); // eslint-disable-next-line max-len\n\n              var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + (pageNumber - 1));\n              this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(pageCollections[i], canvas, pageNumber - 1);\n              this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation = pageCollections[i];\n              this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageNumber - 1;\n              this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n\n              if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true; // eslint-disable-next-line max-len\n\n                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n              }\n            } else if (type === 'stamp') {\n              this.pdfViewer.select([pageCollections[i].randomId], currentSelector);\n              this.pdfViewer.annotation.onAnnotationMouseDown();\n            } else if (type === 'sticky') {\n              this.pdfViewer.select([pageCollections[i].annotName], currentSelector);\n              this.pdfViewer.annotation.onAnnotationMouseDown();\n            } else if (type === 'ink') {\n              this.pdfViewer.select([pageCollections[i].id], currentSelector);\n              this.pdfViewer.annotation.onAnnotationMouseDown();\n            } else {\n              this.pdfViewer.select([pageCollections[i].id], currentSelector);\n              this.pdfViewer.annotation.onAnnotationMouseDown();\n            }\n\n            if (type === 'textMarkup') {\n              if (pageCollections[i].rect || pageCollections[i].bounds) {\n                // eslint-disable-next-line max-len\n                var scrollValue = this.pdfViewerBase.pageSize[pageNumber - 1].top * this.pdfViewerBase.getZoomFactor() + this.pdfViewer.annotationModule.getAnnotationTop(pageCollections[i]) * this.pdfViewerBase.getZoomFactor();\n\n                if (scrollValue) {\n                  var scroll_1 = (scrollValue - 20).toString(); // eslint-disable-next-line radix\n\n                  this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_1);\n                }\n              }\n            } else {\n              var top_1 = pageCollections[i].bounds.top;\n\n              if (type === 'ink') {\n                top_1 = pageCollections[i].bounds.y;\n              } // eslint-disable-next-line max-len\n\n\n              var scrollValue = this.pdfViewerBase.pageSize[pageNumber - 1].top * this.pdfViewerBase.getZoomFactor() + top_1 * this.pdfViewerBase.getZoomFactor();\n              var scroll_2 = (scrollValue - 20).toString(); // eslint-disable-next-line radix\n\n              this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_2);\n            }\n\n            this.isCommentsSelected = true;\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.modifyTextProperty = function (text, previousValue, annotationName) {\n    // eslint-disable-next-line\n    var currentAnnotation;\n    var module = this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n\n    if (module && module.currentTextMarkupAnnotation) {\n      currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    }\n\n    if (currentAnnotation) {\n      if (currentAnnotation.annotName !== annotationName) {\n        currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n      }\n    } else {\n      currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    }\n\n    if (annotationName && currentAnnotation.annotName !== annotationName) {\n      for (var i = 0; i < this.pdfViewer.annotations.length; i++) {\n        if (annotationName === this.pdfViewer.annotations[i].annotName) {\n          currentAnnotation = this.pdfViewer.annotations[i];\n          break;\n        }\n      }\n    }\n\n    if (currentAnnotation) {\n      // eslint-disable-next-line\n      var commentsDiv = document.getElementById(currentAnnotation.annotName);\n\n      if (commentsDiv) {\n        // eslint-disable-next-line\n        var pageNumber = void 0;\n\n        if (commentsDiv.accessKey) {\n          // eslint-disable-next-line\n          pageNumber = parseInt(commentsDiv.accessKey);\n        } else {\n          pageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n\n        var type = commentsDiv.getAttribute('name');\n        var pageIndex = pageNumber - 1; // eslint-disable-next-line\n\n        var pageAnnotations = void 0;\n        var isMeasure = false; // eslint-disable-next-line max-len\n\n        if (currentAnnotation.shapeAnnotationType === 'FreeText' || this.pdfViewer.enableShapeLabel && (type === 'shape' || type === 'shape_measure')) {\n          var isTextAdded = false;\n\n          if (annotationName) {\n            if (currentAnnotation.annotName !== annotationName) {\n              this.pdfViewer.annotation.modifyDynamicTextValue(text, annotationName);\n              isTextAdded = true;\n            }\n          }\n\n          if (!isTextAdded) {\n            if (currentAnnotation.shapeAnnotationType === 'FreeText') {\n              if (currentAnnotation.dynamicText !== text) {\n                this.pdfViewer.annotation.modifyDynamicTextValue(text, currentAnnotation.annotName);\n              }\n\n              currentAnnotation.dynamicText = text;\n            } else {\n              this.pdfViewer.annotation.modifyDynamicTextValue(text, currentAnnotation.annotName);\n              currentAnnotation.labelContent = text;\n              currentAnnotation.notes = text;\n            }\n\n            this.pdfViewer.nodePropertyChange(currentAnnotation, {});\n          }\n        }\n\n        if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n          pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n          isMeasure = true;\n        } else {\n          pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n        }\n\n        if (pageAnnotations !== null && currentAnnotation.shapeAnnotationType !== 'FreeText') {\n          for (var i = 0; i < pageAnnotations.length; i++) {\n            if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n              // eslint-disable-next-line\n              var clonedObject = cloneObject(pageAnnotations[i]);\n\n              if (text !== null) {\n                if (pageAnnotations[i].note !== text) {\n                  // eslint-disable-next-line max-len\n                  this.pdfViewer.annotation.addAction(pageIndex, i, pageAnnotations[i], 'Text Property Added', '', clonedObject, pageAnnotations[i]);\n                  currentAnnotation = pageAnnotations[i];\n                  currentAnnotation.note = text;\n\n                  if (currentAnnotation.enableShapeLabel) {\n                    currentAnnotation.labelContent = text;\n                  } // eslint-disable-next-line max-len\n\n\n                  currentAnnotation.modifiedDate = this.getDateAndTime();\n\n                  if (!isMeasure) {\n                    this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n                  } else {\n                    this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n                  }\n\n                  if (!previousValue || previousValue === '') {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.fireCommentAdd(currentAnnotation.annotName, currentAnnotation.note, currentAnnotation);\n                  } else {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.fireCommentEdit(currentAnnotation.annotName, currentAnnotation.note, currentAnnotation);\n                  }\n\n                  return currentAnnotation;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param date\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.getDateAndTime = function (date) {\n    if (!date) {\n      date = new Date();\n    }\n\n    this.globalize = new Internationalization();\n    var dateOptions = {\n      format: this.pdfViewer.dateTimeFormat,\n      type: 'dateTime'\n    }; // eslint-disable-next-line\n\n    var dateTime = this.globalize.formatDate(new Date(date), dateOptions);\n    return dateTime;\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.modifyCommentsProperty = function (text, annotName, parentElement, previousValue) {\n    // eslint-disable-next-line\n    var currentAnnotation;\n\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    } else {\n      currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    }\n\n    if (currentAnnotation) {\n      // eslint-disable-next-line\n      var commentsDiv = document.getElementById(currentAnnotation.annotName); // eslint-disable-next-line\n\n      var pageNumber = parseInt(commentsDiv.accessKey);\n      var pageIndex = pageNumber - 1; // eslint-disable-next-line\n\n      var pageAnnotations = void 0;\n      var isMeasure = false;\n      var author = this.getAuthorName(currentAnnotation, commentsDiv);\n\n      if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n        pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n        isMeasure = true;\n      } else {\n        pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n      }\n\n      if (pageAnnotations !== null) {\n        for (var i = 0; i < pageAnnotations.length; i++) {\n          if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n            currentAnnotation = pageAnnotations[i];\n          }\n        }\n      } // eslint-disable-next-line\n\n\n      var clonedObject = cloneObject(currentAnnotation);\n\n      if (currentAnnotation.comments.length > 0) {\n        var isComment = false;\n\n        for (var j = 0; j < currentAnnotation.comments.length; j++) {\n          if (currentAnnotation.comments[j].annotName === annotName) {\n            isComment = true;\n            currentAnnotation.comments[j].note = text; // eslint-disable-next-line max-len\n\n            currentAnnotation.comments[j].modifiedDate = this.getDateAndTime();\n          }\n        } // eslint-disable-next-line max-len\n\n\n        var newArray = {\n          annotName: annotName,\n          parentId: parentElement,\n          subject: 'Comments',\n          comments: [],\n          author: author,\n          note: text,\n          shapeAnnotationType: '',\n          state: '',\n          stateModel: '',\n          modifiedDate: this.getDateAndTime(),\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: this.getDateAndTime(),\n            author: author\n          },\n          isLock: false\n        };\n\n        if (!isComment) {\n          currentAnnotation.comments[currentAnnotation.comments.length] = newArray;\n        }\n      } else {\n        // eslint-disable-next-line max-len\n        var newArray = {\n          annotName: annotName,\n          parentId: parentElement,\n          subject: 'Comments',\n          comments: [],\n          author: author,\n          note: text,\n          shapeAnnotationType: '',\n          state: '',\n          stateModel: '',\n          modifiedDate: this.getDateAndTime(),\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: this.getDateAndTime(),\n            author: author\n          },\n          isLock: false\n        };\n        currentAnnotation.comments[currentAnnotation.comments.length] = newArray;\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Comments Property Added', '', clonedObject, currentAnnotation);\n\n      if (!isMeasure) {\n        this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n      } else {\n        this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n      }\n    }\n\n    if (previousValue !== undefined) {\n      this.pdfViewer.fireCommentEdit(annotName, text, currentAnnotation);\n    } else {\n      this.pdfViewer.fireCommentAdd(annotName, text, currentAnnotation);\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.modifyStatusProperty = function (text, statusElement) {\n    // eslint-disable-next-line\n    var currentAnnotation;\n\n    if (this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      currentAnnotation = this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    } else {\n      currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    }\n\n    if (currentAnnotation) {\n      // eslint-disable-next-line\n      var commentsDiv = document.getElementById(currentAnnotation.annotName); // eslint-disable-next-line\n\n      var pageNumber = parseInt(commentsDiv.accessKey);\n      var pageIndex = pageNumber - 1; // eslint-disable-next-line\n\n      var pageAnnotations = void 0;\n      var isMeasure = false;\n      var author = commentsDiv.getAttribute('author');\n\n      if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n        pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n        isMeasure = true;\n      } else {\n        pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n      }\n\n      if (pageAnnotations !== null) {\n        for (var i = 0; i < pageAnnotations.length; i++) {\n          if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n            currentAnnotation = pageAnnotations[i];\n          }\n        }\n      } // eslint-disable-next-line\n\n\n      var clonedObject = cloneObject(currentAnnotation);\n\n      if (statusElement.parentElement.firstChild.id === statusElement.id) {\n        // eslint-disable-next-line max-len\n        currentAnnotation.review = {\n          state: text,\n          stateModel: 'Review',\n          author: author,\n          modifiedDate: this.getDateAndTime(),\n          annotId: statusElement.id\n        };\n        currentAnnotation.state = text;\n        currentAnnotation.stateModel = 'Review'; // eslint-disable-next-line max-len\n\n        this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Status Property Added', '', clonedObject, currentAnnotation);\n        this.pdfViewer.fireCommentStatusChanged(statusElement.id, currentAnnotation.note, currentAnnotation, currentAnnotation.state);\n      } else {\n        for (var j = 0; j < currentAnnotation.comments.length; j++) {\n          if (currentAnnotation.comments[j].annotName === statusElement.id) {\n            // eslint-disable-next-line\n            var clonedObj = cloneObject(currentAnnotation.comments[j]);\n            currentAnnotation.comments[j].state = text;\n            currentAnnotation.comments[j].stateModel = 'Review'; // eslint-disable-next-line max-len\n\n            currentAnnotation.comments[j].review = {\n              state: text,\n              stateModel: 'Review',\n              author: author,\n              modifiedDate: this.getDateAndTime(),\n              annotId: statusElement.id\n            }; // eslint-disable-next-line max-len\n\n            this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Status Property Added', '', clonedObj, currentAnnotation.comments[j]);\n            this.pdfViewer.fireCommentStatusChanged(currentAnnotation.comments[j].annotName, currentAnnotation.comments[j].note, currentAnnotation, currentAnnotation.comments[j].state);\n          }\n        }\n      }\n\n      if (!isMeasure) {\n        this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n      } else {\n        this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n      }\n    }\n  };\n  /**\n   * @param commentsElement\n   * @param replyElement\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.modifyCommentDeleteProperty = function (commentsElement, replyElement) {\n    // eslint-disable-next-line\n    var clonedObject; // eslint-disable-next-line\n\n    var clonedAnnotation; // eslint-disable-next-line\n\n    var currentAnnotation; // eslint-disable-next-line\n\n    var commentsParentElement = document.getElementById(commentsElement.id);\n\n    if (commentsParentElement) {\n      // eslint-disable-next-line\n      var pageNumber = parseInt(commentsParentElement.accessKey);\n      var pageIndex = pageNumber - 1;\n      var annotType = commentsElement.getAttribute('name'); // eslint-disable-next-line\n\n      var pageAnnotations = this.getAnnotations(pageIndex, null, annotType);\n\n      if (pageAnnotations !== null) {\n        for (var i = 0; i < pageAnnotations.length; i++) {\n          if (pageAnnotations[i].annotName === commentsElement.id) {\n            currentAnnotation = pageAnnotations[i];\n          }\n        }\n      }\n\n      for (var i = 1; i < commentsParentElement.childElementCount; i++) {\n        if (commentsParentElement.childNodes[i].id === replyElement.id) {\n          clonedAnnotation = cloneObject(currentAnnotation);\n          var positionValue = i - 1;\n          currentAnnotation.comments[positionValue].position = i;\n          clonedObject = cloneObject(currentAnnotation.comments[positionValue]); // eslint-disable-next-line max-len\n\n          this.pdfViewer.fireCommentDelete(currentAnnotation.comments[positionValue].annotName, currentAnnotation.comments[positionValue].note, currentAnnotation);\n          currentAnnotation.comments.splice(positionValue, 1);\n          replyElement.remove();\n        }\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewer.annotation.addAction(pageIndex, null, clonedAnnotation, 'Comments Reply Deleted', '', clonedObject, currentAnnotation);\n      this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateOpacityValue = function (annotation) {\n    // eslint-disable-next-line\n    var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, annotation.shapeAnnotationType);\n\n    if (pageAnnotations !== null) {\n      for (var i = 0; i < pageAnnotations.length; i++) {\n        if (pageAnnotations[i].annotName === annotation.annotName) {\n          pageAnnotations[i].opacity = annotation.opacity;\n          this.updateUndoRedoCollections(pageAnnotations[i], annotation.pageIndex);\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param isAction\n   * @param undoAnnotation\n   * @param annotation\n   * @param isAction\n   * @param undoAnnotation\n   * @param annotation\n   * @param isAction\n   * @param undoAnnotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.undoAction = function (annotation, isAction, undoAnnotation) {\n    if (isAction === 'Text Property Added') {\n      if (annotation) {\n        // eslint-disable-next-line\n        var commentsMainDiv = document.getElementById(annotation.annotName);\n\n        if (commentsMainDiv) {\n          // eslint-disable-next-line\n          var pageNumber = parseInt(commentsMainDiv.accessKey);\n          var pageIndex = pageNumber - 1; // eslint-disable-next-line\n\n          var clonedAnnotationObject = cloneObject(annotation);\n          commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = undoAnnotation.note;\n          var value = undoAnnotation.note;\n          annotation.note = value;\n\n          if (commentsMainDiv.childElementCount === 2) {\n            commentsMainDiv.lastChild.style.display = 'block';\n          }\n\n          this.updateUndoRedoCollections(annotation, pageIndex);\n          return clonedAnnotationObject;\n        }\n      }\n    } else if (isAction === 'Comments Property Added') {\n      if (annotation.comments.length > 0) {\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(annotation.annotName);\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n\n        if (commentsDiv) {\n          // eslint-disable-next-line\n          var pageNumber = parseInt(commentsDiv.accessKey);\n          pageIndex = pageNumber - 1;\n        } // eslint-disable-next-line\n\n\n        var clonedAnnotationObject = cloneObject(annotation); // eslint-disable-next-line\n\n        var comment = annotation.comments[annotation.comments.length - 1]; // eslint-disable-next-line\n\n        var removeDiv = document.getElementById(comment.annotName);\n\n        if (removeDiv) {\n          removeDiv.remove();\n        }\n\n        annotation = undoAnnotation;\n        this.updateUndoRedoCollections(annotation, pageIndex);\n        return clonedAnnotationObject;\n      }\n    } else if (isAction === 'Status Property Added') {\n      if (annotation) {\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(annotation.annotName);\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n\n        if (commentsDiv) {\n          // eslint-disable-next-line\n          var pageNumber = parseInt(commentsDiv.accessKey);\n          pageIndex = pageNumber - 1;\n        } // eslint-disable-next-line\n\n\n        var clonedAnnotationObject = cloneObject(annotation);\n\n        if (annotation.annotName === undoAnnotation.annotName) {\n          annotation.review = undoAnnotation.review;\n          annotation.state = undoAnnotation.state;\n          annotation.stateModel = undoAnnotation.stateModel;\n          this.pdfViewer.annotation.redoCommentsElement.push(annotation);\n        } else {\n          for (var j = 0; j < annotation.comments.length; j++) {\n            if (annotation.comments[j].annotName === undoAnnotation.annotName) {\n              annotation.comments[j].state = undoAnnotation.state;\n              annotation.comments[j].stateModel = undoAnnotation.stateModel;\n              annotation.comments[j].review = undoAnnotation.review;\n              this.pdfViewer.annotation.redoCommentsElement.push(annotation.comments[j]);\n              break;\n            }\n          }\n        } // eslint-disable-next-line\n\n\n        var activeDiv = document.getElementById(undoAnnotation.annotName);\n\n        if (activeDiv.lastChild.id === this.pdfViewer.element.id + 'status' + '_container') {\n          activeDiv.lastChild.remove();\n        } else {\n          if (activeDiv.firstChild.lastChild.id === this.pdfViewer.element.id + 'status' + '_container') {\n            activeDiv.firstChild.lastChild.remove();\n          }\n        }\n\n        this.updateUndoRedoCollections(annotation, pageIndex);\n        return clonedAnnotationObject;\n      }\n    } else if (isAction === 'Comments Reply Deleted') {\n      // eslint-disable-next-line\n      var commentsDiv = document.getElementById(annotation.annotName);\n\n      if (commentsDiv) {\n        // eslint-disable-next-line\n        var pageNumber = parseInt(commentsDiv.accessKey);\n        var pageIndex = pageNumber - 1;\n        this.renderComments(undoAnnotation, commentsDiv, true, annotation.annotName);\n        this.pdfViewer.annotation.redoCommentsElement.push(undoAnnotation);\n        this.updateUndoRedoCollections(annotation, pageIndex);\n        return annotation;\n      }\n    } else if (isAction === 'dynamicText Change') {\n      if (annotation) {\n        // eslint-disable-next-line\n        var commentsMainDiv = document.getElementById(annotation.annotName);\n\n        if (commentsMainDiv) {\n          // eslint-disable-next-line\n          commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = undoAnnotation.dynamicText;\n          return annotation;\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param isAction\n   * @param undoAnnotation\n   * @param annotation\n   * @param isAction\n   * @param undoAnnotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.redoAction = function (annotation, isAction, undoAnnotation) {\n    if (isAction === 'Text Property Added') {\n      // eslint-disable-next-line\n      var commentsMainDiv = document.getElementById(annotation.annotName);\n\n      if (commentsMainDiv) {\n        // eslint-disable-next-line\n        var pageNumber = parseInt(commentsMainDiv.accessKey);\n        var pageIndex = pageNumber - 1;\n        commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = annotation.note;\n        commentsMainDiv.lastChild.style.display = 'block';\n        this.updateUndoRedoCollections(annotation, pageIndex);\n        return annotation;\n      }\n    } else if (isAction === 'Comments Property Added') {\n      // eslint-disable-next-line\n      var comment = annotation.comments[annotation.comments.length - 1];\n      var commentsDiv = document.getElementById(annotation.annotName);\n\n      if (commentsDiv) {\n        // eslint-disable-next-line\n        var pageNumber = parseInt(commentsDiv.accessKey);\n        var pageIndex = pageNumber - 1;\n        this.renderComments(comment, commentsDiv, true, annotation.annotName);\n        this.updateUndoRedoCollections(annotation, pageIndex);\n        return annotation;\n      }\n    } else if (isAction === 'Status Property Added') {\n      // eslint-disable-next-line\n      var poppedItem = this.pdfViewer.annotation.redoCommentsElement.pop();\n      var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n\n      if (poppedItem) {\n        // eslint-disable-next-line max-len\n        var statusContainer = createElement('div', {\n          id: this.pdfViewer.element.id + 'status' + '_container',\n          className: 'e-pv-status-container'\n        }); // eslint-disable-next-line max-len\n\n        var statusDiv = createElement('div', {\n          id: this.pdfViewer.element.id + 'status' + '_div',\n          className: 'e-pv-status-div'\n        });\n        var statusSpan = createElement('span', {\n          id: this.pdfViewer.element.id + 'status' + '_icon'\n        });\n        statusDiv.appendChild(statusSpan);\n        statusContainer.appendChild(statusDiv); // eslint-disable-next-line\n\n        var activeDiv = document.getElementById(annotation.annotName);\n\n        if (activeDiv) {\n          // eslint-disable-next-line\n          var pageNumber = parseInt(activeDiv.accessKey);\n          pageIndex = pageNumber - 1;\n        } // eslint-disable-next-line\n\n\n        if (annotation.annotName === poppedItem.annotName) {\n          this.updateStatusContainer(annotation.state, statusSpan, statusDiv, statusContainer);\n\n          for (var i = 0; i < activeDiv.firstChild.children.length; i++) {\n            if (activeDiv.firstChild.children[i].id === this.pdfViewer.element.id + 'status_container') {\n              activeDiv.firstChild.children[i].parentElement.removeChild(activeDiv.firstChild.children[i]);\n            }\n          }\n\n          activeDiv.firstChild.appendChild(statusContainer);\n        } else {\n          for (var i = 0; i < annotation.comments.length; i++) {\n            if (annotation.comments[i].annotName === poppedItem.annotName) {\n              this.updateStatusContainer(annotation.comments[i].state, statusSpan, statusDiv, statusContainer);\n              var statusElement = document.getElementById(poppedItem.annotName);\n\n              for (var i_1 = 0; i_1 < statusElement.children.length; i_1++) {\n                if (statusElement.children[i_1].id === this.pdfViewer.element.id + 'status_container') {\n                  statusElement.children[i_1].parentElement.removeChild(statusElement.children[i_1]);\n                }\n              }\n\n              if (statusElement) {\n                statusElement.appendChild(statusContainer);\n              }\n            }\n          }\n        }\n      }\n\n      this.updateUndoRedoCollections(annotation, pageIndex);\n      return annotation;\n    } else if (isAction === 'Comments Reply Deleted') {\n      var pageIndex = this.pdfViewerBase.currentPageNumber - 1; // eslint-disable-next-line\n\n      var activeDiv = document.getElementById(annotation.annotName);\n\n      if (activeDiv) {\n        // eslint-disable-next-line\n        var pageNumber = parseInt(activeDiv.accessKey);\n        pageIndex = pageNumber - 1;\n      } // eslint-disable-next-line\n\n\n      var poppedItem = this.pdfViewer.annotation.redoCommentsElement.pop(); // eslint-disable-next-line\n\n      var clonedAnnotationObject = cloneObject(annotation);\n\n      for (var i = 0; i < annotation.comments.length; i++) {\n        if (annotation.comments[i].annotName === poppedItem.annotName) {\n          // eslint-disable-next-line\n          var replyElement = document.getElementById(poppedItem.annotName);\n          annotation.comments.splice(i, 1);\n          replyElement.remove();\n        }\n      }\n\n      this.updateUndoRedoCollections(annotation, pageIndex);\n      return clonedAnnotationObject;\n    } else if (isAction === 'dynamicText Change') {\n      if (annotation) {\n        // eslint-disable-next-line\n        var commentsMainDiv = document.getElementById(annotation.annotName);\n\n        if (commentsMainDiv) {\n          // eslint-disable-next-line\n          commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = annotation.dynamicText;\n          return annotation;\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateUndoRedoCollections = function (annotationBase, pageNumber, shapeType, action) {\n    var annotationType = !shapeType ? annotationBase.shapeAnnotationType : shapeType;\n\n    if (annotationBase.indent && annotationBase.indent !== '') {\n      annotationType = 'shape_measure';\n    } // eslint-disable-next-line\n\n\n    var pageAnnotations = this.getAnnotations(pageNumber, null, annotationType);\n\n    if (pageAnnotations !== null) {\n      for (var i = 0; i < pageAnnotations.length; i++) {\n        if (annotationBase.annotName === pageAnnotations[i].annotName) {\n          pageAnnotations[i] = annotationBase;\n          this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], pageNumber);\n\n          if (action) {\n            pageAnnotations.splice(i, 1);\n            this.deleteStickyNotesAnnotations(pageAnnotations, pageNumber);\n          }\n        }\n      }\n\n      if (annotationType === 'shape_measure') {\n        this.manageAnnotations(pageAnnotations, pageNumber, 'shape_measure');\n      } else {\n        this.manageAnnotations(pageAnnotations, pageNumber, annotationBase.shapeAnnotationType);\n      }\n    }\n  };\n  /**\n   * @param pageIndex\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.addAnnotationComments = function (pageIndex, type) {\n    var pageNumber = pageIndex + 1; // eslint-disable-next-line\n\n    var poppedItem = this.pdfViewer.annotation.undoCommentsElement.pop();\n\n    if (poppedItem) {\n      this.createCommentsContainer(poppedItem, pageNumber);\n      this.updateUndoRedoCollections(poppedItem, pageIndex, type);\n    }\n  };\n  /**\n   * @param annotation\n   * @param type\n   * @param action\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.findPosition = function (annotation, type, action) {\n    var index; // eslint-disable-next-line\n\n    var commentsDiv = document.getElementById(annotation.annotName);\n\n    if (commentsDiv) {\n      // eslint-disable-next-line\n      var pageNumber = parseInt(commentsDiv.accessKey);\n      var pageIndex = pageNumber - 1; // eslint-disable-next-line\n\n      var parentDiv = commentsDiv.parentElement;\n\n      for (var i = 0; i < parentDiv.childElementCount; i++) {\n        if (parentDiv.childNodes[i].id === annotation.annotName) {\n          index = i;\n        }\n      }\n\n      if (type === 'Stamp' || type === 'Image') {\n        type = 'stamp';\n      } else if (type === 'FreeText') {\n        type = 'freetext';\n      } else if (type === 'StickyNotes' || type === 'sticky') {\n        type = 'sticky';\n      } else if (type === 'Ink') {\n        type = 'ink';\n      } // eslint-disable-next-line\n\n\n      var pageAnnotations = this.getAnnotations(pageIndex, null, type);\n\n      if (pageAnnotations !== null) {\n        for (var i = 0; i < pageAnnotations.length; i++) {\n          if (pageAnnotations[i].annotName === annotation.annotName) {\n            // eslint-disable-next-line\n            var clonedObject = cloneObject(pageAnnotations[i]);\n            pageAnnotations[i].position = index;\n            this.pdfViewer.annotation.undoCommentsElement.push(pageAnnotations[i]);\n\n            if (type === 'sticky') {\n              this.updateUndoRedoCollections(clonedObject, pageIndex, null, action);\n            }\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.getAnnotations = function (pageIndex, shapeAnnotations, type) {\n    // eslint-disable-next-line\n    var annotationCollection;\n\n    if (type === 'Stamp' || type === 'stamp' || type === 'Image') {\n      type = 'stamp';\n    } else if (type === 'StickyNotes' || type === 'sticky') {\n      type = 'sticky';\n    } else if (type === 'textMarkup') {\n      type = 'textMarkup';\n    } else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse' || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n      type = 'shape';\n    } else if (type === 'FreeText' || type === 'freetext' || type === 'freeText') {\n      type = 'freetext';\n    } else if (type === 'ink' || type === 'Ink') {\n      type = 'ink';\n    } else {\n      type = 'shape_measure';\n    } // eslint-disable-next-line\n\n\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type];\n    }\n\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n\n      if (annotObject[index]) {\n        annotationCollection = annotObject[index].annotations;\n      } else {\n        annotationCollection = shapeAnnotations;\n      }\n    } else {\n      annotationCollection = shapeAnnotations;\n    }\n\n    return annotationCollection;\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber, type) {\n    if (type === 'Stamp' || type === 'stamp') {\n      type = 'stamp';\n    } else if (type === 'Sticky' || type === 'sticky') {\n      type = 'sticky';\n    } else if (type === 'textMarkup') {\n      type = 'textMarkup';\n    } else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse' || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n      type = 'shape';\n    } else if (type === 'FreeText') {\n      type = 'freetext';\n    } else if (type === 'ink' || type === 'Ink') {\n      type = 'ink';\n    } else {\n      type = 'shape_measure';\n    } // eslint-disable-next-line\n\n\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type];\n    }\n\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n\n      if (!this.pdfViewerBase.isStorageExceed) {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n      }\n\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n\n      if (annotObject[index]) {\n        annotObject[index].annotations = pageAnnotations;\n      }\n\n      var annotationStringified = JSON.stringify(annotObject);\n\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_' + type, annotationStringified);\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateStickyNotes = function (annotation, id) {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n    }\n\n    if (storeObject) {\n      // eslint-disable-next-line\n      var bounds = annotation.bounds;\n      var annotObject = JSON.parse(storeObject);\n\n      for (var k = 0; k < annotObject.length; k++) {\n        // eslint-disable-next-line\n        var currentAnnot = annotObject[k];\n\n        for (var j = 0; j < currentAnnot.annotations.length; j++) {\n          if (annotObject[k].annotations[j].annotName === annotation.annotName) {\n            if (!this.pdfViewerBase.isStorageExceed) {\n              window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n            }\n\n            var pageIndex = this.pdfViewer.annotationModule.getPageCollection(annotObject, 0);\n\n            if (annotObject[pageIndex]) {\n              // eslint-disable-next-line max-len\n              annotObject[k].annotations[j].bounds = {\n                left: bounds.x,\n                top: bounds.y,\n                width: bounds.width,\n                height: bounds.height,\n                right: bounds.right,\n                bottom: bounds.bottom\n              };\n            }\n\n            var annotationStringified = JSON.stringify(annotObject);\n\n            if (this.pdfViewerBase.isStorageExceed) {\n              // eslint-disable-next-line max-len\n              this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'] = annotationStringified;\n            } else {\n              window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sticky', annotationStringified);\n            }\n\n            break;\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.saveStickyAnnotations = function () {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n    } // eslint-disable-next-line\n\n\n    var annotations = new Array();\n\n    for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n      annotations[j] = [];\n    }\n\n    if (storeObject && !this.pdfViewer.annotationSettings.skipDownload) {\n      var annotationCollection = JSON.parse(storeObject);\n\n      for (var i = 0; i < annotationCollection.length; i++) {\n        var newArray = [];\n        var pageAnnotationObject = annotationCollection[i];\n\n        if (pageAnnotationObject) {\n          for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n            this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]); // eslint-disable-next-line max-len\n\n            pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex));\n          }\n\n          newArray = pageAnnotationObject.annotations;\n        }\n\n        annotations[pageAnnotationObject.pageIndex] = newArray;\n      }\n    }\n\n    return JSON.stringify(annotations);\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.deleteStickyNotesAnnotations = function (pageAnnotations, pageNumber) {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n    }\n\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n\n      if (!this.pdfViewerBase.isStorageExceed) {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n      }\n\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n\n      if (annotObject[index]) {\n        annotObject[index].annotations = pageAnnotations;\n      }\n\n      var annotationStringified = JSON.stringify(annotObject);\n\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sticky', annotationStringified);\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.addStickyNotesAnnotations = function (pageNumber, annotationBase) {\n    var pageAnnotations = this.getAnnotations(pageNumber, null, 'sticky');\n\n    if (pageAnnotations) {\n      pageAnnotations.push(annotationBase);\n    }\n\n    this.manageAnnotations(pageAnnotations, pageNumber, 'sticky');\n  };\n  /**\n   * @param annotName\n   * @param text\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.addTextToComments = function (annotName, text) {\n    // eslint-disable-next-line\n    var commentsMainDiv = document.getElementById(annotName);\n\n    if (commentsMainDiv) {\n      commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = text;\n    }\n  };\n  /**\n   * @param newAnnotation\n   * @param annotation\n   * @param isCut\n   * @param newAnnotation\n   * @param annotation\n   * @param isCut\n   * @param newAnnotation\n   * @param annotation\n   * @param isCut\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateAnnotationCollection = function (newAnnotation, annotation, isCut) {\n    var type = this.findAnnotationType(annotation); // eslint-disable-next-line\n\n    var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, type);\n\n    if (isCut) {\n      pageAnnotations = this.pdfViewer.annotationModule.removedAnnotationCollection;\n    }\n\n    if (pageAnnotations !== null) {\n      for (var i = 0; i < pageAnnotations.length; i++) {\n        if (isCut && !pageAnnotations[i].annotName) {\n          pageAnnotations[i].annotName = pageAnnotations[i].annotationId;\n        }\n\n        if (pageAnnotations[i].annotName === annotation.annotName) {\n          // eslint-disable-next-line\n          var updateAnnotation = cloneObject(pageAnnotations[i]);\n          updateAnnotation.annotName = newAnnotation.annotName;\n\n          if (type === 'shape' || type === 'shape_measure' || type === 'freetext' || type === 'ink') {\n            updateAnnotation.id = newAnnotation.id;\n          }\n\n          if (type === 'stamp') {\n            updateAnnotation.randomId = newAnnotation.id;\n          }\n\n          if (type === 'ink') {\n            updateAnnotation.bounds.x = newAnnotation.bounds.x;\n            updateAnnotation.bounds.y = newAnnotation.bounds.y;\n          } else {\n            updateAnnotation.bounds.left = newAnnotation.bounds.x;\n            updateAnnotation.bounds.top = newAnnotation.bounds.y;\n            updateAnnotation.vertexPoints = newAnnotation.vertexPoints;\n          }\n\n          updateAnnotation.note = updateAnnotation.note ? updateAnnotation.note : '';\n          updateAnnotation.comments = []; // eslint-disable-next-line max-len\n\n          updateAnnotation.review = {\n            state: '',\n            stateModel: '',\n            modifiedDate: updateAnnotation.ModifiedDate,\n            author: updateAnnotation.author\n          };\n          updateAnnotation.state = '';\n          updateAnnotation.stateModel = '';\n          this.pdfViewer.annotationModule.storeAnnotations(annotation.pageIndex, updateAnnotation, '_annotations_' + type);\n          this.createCommentsContainer(updateAnnotation, annotation.pageIndex + 1, true);\n\n          if (isCut) {\n            this.pdfViewer.annotationModule.removedAnnotationCollection = [];\n          }\n\n          break;\n        }\n      }\n    }\n  };\n\n  StickyNotesAnnotation.prototype.findAnnotationType = function (annotation) {\n    var annotType;\n\n    if (annotation.measureType !== '') {\n      annotType = 'shape_measure';\n    } else {\n      if (annotation.shapeAnnotationType === 'StickyNotes') {\n        annotType = 'sticky';\n      } else if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n        annotType = 'stamp';\n      } else if (annotation.shapeAnnotationType === 'FreeText') {\n        annotType = 'freetext';\n      } else if (annotation.shapeAnnotationType === 'Ink') {\n        annotType = 'ink';\n      } else {\n        annotType = 'shape';\n      }\n    }\n\n    return annotType;\n  };\n\n  StickyNotesAnnotation.prototype.setExistingAnnotationModifiedDate = function (date) {\n    var modifiedDateTime;\n\n    if (date !== '') {\n      modifiedDateTime = this.setModifiedDate(date);\n    } else {\n      modifiedDateTime = this.setModifiedDate();\n    }\n\n    return modifiedDateTime;\n  };\n\n  StickyNotesAnnotation.prototype.updateModifiedTime = function (time, minutes) {\n    var modifiedTime;\n\n    if (time >= 12) {\n      if (time === 12) {\n        modifiedTime = time + ':' + minutes + ' PM';\n      } else {\n        modifiedTime = time - 12 + ':' + minutes + ' PM';\n      }\n    } else {\n      modifiedTime = time + ':' + minutes + ' AM';\n    }\n\n    return modifiedTime;\n  };\n\n  StickyNotesAnnotation.prototype.setModifiedDate = function (data) {\n    var dateTime;\n\n    if (data) {\n      dateTime = this.getDateAndTime(data);\n    } else {\n      dateTime = this.getDateAndTime();\n    }\n\n    var date = new Date(dateTime);\n    var modifiedTime;\n    var modifiedDate = date.toString().split(' ').splice(1, 2).join(' ');\n\n    if (date.toLocaleTimeString().split(' ').length === 2) {\n      // eslint-disable-next-line max-len\n      modifiedTime = date.toLocaleTimeString().split(' ')[0].split(':').splice(0, 2).join(':') + ' ' + date.toLocaleTimeString().split(' ')[1];\n    } else {\n      // eslint-disable-next-line\n      var time = parseInt(date.toLocaleTimeString().split(':')[0]);\n      var minutes = date.toLocaleTimeString().split(':')[1];\n      modifiedTime = this.updateModifiedTime(time, minutes);\n    }\n\n    var modifiedDateTime = modifiedDate + ', ' + modifiedTime;\n    return modifiedDateTime;\n  }; // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateModifiedDate = function (titleContainer) {\n    if (titleContainer.id === this.pdfViewer.element.id + '_commenttype_icon') {\n      titleContainer = titleContainer.nextSibling;\n    }\n\n    var author = titleContainer.textContent.split('-')[0];\n    titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n  };\n  /**\n   * @param annotation\n   * @param isBounds\n   * @param isUndoRedoAction\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateAnnotationModifiedDate = function (annotation, isBounds, isUndoRedoAction) {\n    // eslint-disable-next-line\n    var titleContainer;\n\n    if (annotation) {\n      // eslint-disable-next-line\n      var commentsContainer = document.getElementById(annotation.annotName);\n\n      if (commentsContainer) {\n        if (!isBounds) {\n          titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n          var author = titleContainer.textContent.split('-')[0];\n          titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n        } else {\n          var type = this.findAnnotationType(annotation); // eslint-disable-next-line\n\n          var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, type);\n\n          if (pageAnnotations != null && annotation) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n              if (annotation.annotName === pageAnnotations[i].annotName) {\n                // eslint-disable-next-line max-len\n                if (annotation.bounds.x !== pageAnnotations[i].bounds.left || annotation.bounds.y !== pageAnnotations[i].bounds.top || annotation.bounds.height !== pageAnnotations[i].bounds.height || annotation.bounds.width !== pageAnnotations[i].bounds.width) {\n                  titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n                  var author = titleContainer.textContent.split('-')[0];\n                  titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n                }\n              }\n\n              if (pageAnnotations[i].shapeAnnotationType === 'sticky') {\n                this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], annotation.pageIndex);\n              }\n            }\n          }\n        }\n\n        if (isUndoRedoAction) {\n          titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n\n          if (annotation.modifiedDate !== undefined) {\n            var author = titleContainer.textContent.split('-')[0];\n            titleContainer.textContent = author + ' - ' + this.setExistingAnnotationModifiedDate(annotation.modifiedDate);\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param annotation\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.saveImportedStickyNotesAnnotations = function (annotation, pageNumber) {\n    var annotationObject = null;\n\n    if (!annotation.Author) {\n      // eslint-disable-next-line max-len\n      annotation.Author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.stickyNotesSettings.author;\n    } // eslint-disable-next-line max-len\n\n\n    var isLock = this.pdfViewer.stickyNotesSettings.isLock ? this.pdfViewer.stickyNotesSettings.isLock : this.pdfViewer.annotationSettings.isLock; // eslint-disable-next-line\n\n    var allowedInteractions = this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n    annotationObject = {\n      // eslint-disable-next-line max-len\n      shapeAnnotationType: 'sticky',\n      author: annotation.Author,\n      allowedInteractions: allowedInteractions,\n      modifiedDate: annotation.ModifiedDate,\n      subject: annotation.Subject,\n      note: annotation.Note,\n      opacity: annotation.Opacity,\n      state: annotation.State,\n      stateModel: annotation.StateModel,\n      pathData: '',\n      comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author),\n      review: {\n        state: annotation.State,\n        stateModel: annotation.StateModel,\n        modifiedDate: annotation.ModifiedDate,\n        author: annotation.Author\n      },\n      // eslint-disable-next-line max-len\n      bounds: {\n        left: annotation.Bounds.X,\n        top: annotation.Bounds.Y,\n        width: annotation.Bounds.Width,\n        height: annotation.Bounds.Height,\n        right: annotation.Bounds.Right,\n        bottom: annotation.Bounds.Bottom\n      },\n      annotName: annotation.AnnotName,\n      color: annotation.color,\n      annotationSelectorSettings: this.getSettings(annotation),\n      customData: this.pdfViewer.annotation.getCustomData(annotation),\n      annotationSettings: {\n        isLock: isLock\n      },\n      isPrint: annotation.IsPrint,\n      isCommentLock: annotation.IsCommentLock\n    };\n    this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_sticky');\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param annotation\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  StickyNotesAnnotation.prototype.updateStickyNotesAnnotationCollections = function (annotation, pageNumber) {\n    // eslint-disable-next-line\n    var annotationObject = null;\n\n    if (!annotation.Author) {\n      // eslint-disable-next-line max-len\n      annotation.Author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.stickyNotesSettings.author;\n    } // eslint-disable-next-line max-len\n\n\n    var isLock = this.pdfViewer.stickyNotesSettings.isLock ? this.pdfViewer.stickyNotesSettings.isLock : this.pdfViewer.annotationSettings.isLock; // eslint-disable-next-line\n\n    var allowedInteractions = annotation.AllowedInteraction ? annotation.AllowedInteraction : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n\n    if (annotation.IsLock) {\n      isLock = annotation.isLock;\n    }\n\n    annotationObject = {\n      // eslint-disable-next-line max-len\n      shapeAnnotationType: 'sticky',\n      author: annotation.Author,\n      allowedInteractions: allowedInteractions,\n      modifiedDate: annotation.ModifiedDate,\n      subject: annotation.Subject,\n      note: annotation.Note,\n      opacity: annotation.Opacity,\n      state: annotation.State,\n      stateModel: annotation.StateModel,\n      pathData: '',\n      comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author),\n      review: {\n        state: annotation.State,\n        stateModel: annotation.StateModel,\n        modifiedDate: annotation.ModifiedDate,\n        author: annotation.Author\n      },\n      // eslint-disable-next-line max-len\n      bounds: {\n        left: annotation.Bounds.X,\n        top: annotation.Bounds.Y,\n        width: annotation.Bounds.Width,\n        height: annotation.Bounds.Height,\n        right: annotation.Bounds.Right,\n        bottom: annotation.Bounds.Bottom\n      },\n      annotationId: annotation.AnnotName,\n      color: annotation.color,\n      pageNumber: pageNumber,\n      customData: this.pdfViewer.annotation.getCustomData(annotation),\n      annotationSettings: {\n        isLock: isLock\n      },\n      isPrint: annotation.IsPrint,\n      isCommentLock: annotation.IsCommentLock\n    };\n    return annotationObject;\n  };\n  /**\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.clear = function () {\n    this.commentsCount = 0;\n    this.commentsreplyCount = 0;\n    this.isAccordionContainer = true;\n    this.isEditableElement = false;\n    this.isCreateContextMenu = false;\n    this.isPageCommentsRendered = false;\n    this.isCommentsRendered = false;\n    this.isAnnotationRendered = false;\n\n    if (this.commentMenuObj) {\n      this.commentMenuObj.destroy();\n    } // eslint-disable-next-line\n\n\n    var accordionPages = document.querySelectorAll('.e-pv-accordion-page-container');\n\n    if (accordionPages) {\n      for (var j = 0; j < accordionPages.length; j++) {\n        // eslint-disable-next-line\n        accordionPages[j].remove();\n      }\n    }\n\n    if (this.commentsRequestHandler) {\n      this.commentsRequestHandler.clear();\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.getModuleName = function () {\n    return 'StickyNotesAnnotation';\n  };\n  /**\n   * This method used to add annotations with using program.\n   *\n   * @param annotationObject - It describes type of annotation object\n   * @param offset - It describes about the annotation bounds or location\n   * @returns Object\n   * @private\n   */\n\n\n  StickyNotesAnnotation.prototype.updateAddAnnotationDetails = function (annotationObject, offset) {\n    //Creating new object if annotationObject is null\n    if (!annotationObject) {\n      annotationObject = {\n        offset: {\n          x: 1,\n          y: 1\n        },\n        pageNumber: 0\n      };\n      offset = annotationObject.offset;\n    } else if (!annotationObject.offset) offset = {\n      x: 1,\n      y: 1\n    };else offset = annotationObject.offset; //Creating the CurrentDate and Annotation name\n\n\n    var currentDateString = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n    var annotationName = this.pdfViewer.annotation.createGUID(); //Creating annotation settings\n\n    var annotationSelectorSettings = this.pdfViewer.stickyNotesSettings.annotationSelectorSettings ? this.pdfViewer.stickyNotesSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n    var annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings);\n    var allowedInteractions = this.pdfViewer.stickyNotesSettings.allowedInteractions ? this.pdfViewer.stickyNotesSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n    annotationSettings.isLock = annotationObject.isLock ? annotationObject.isLock : false; //Creating Annotation objects with it's proper properties\n\n    var stickyNotesAnnotation = [];\n    var stickyNotes = {\n      AllowedInteractions: annotationObject.allowedInteractions ? annotationObject.allowedInteractions : allowedInteractions,\n      AnnotName: annotationName,\n      AnnotType: 'sticky',\n      AnnotationFlags: null,\n      AnnotationSelectorSettings: annotationObject.annotationSelectorSettings ? annotationObject.annotationSelectorSettings : annotationSelectorSettings,\n      AnnotationSettings: annotationSettings,\n      Author: annotationObject.author ? annotationObject.author : 'Guest',\n      Bounds: {\n        X: offset.x,\n        Y: offset.y,\n        Width: 30,\n        Height: 30,\n        Left: offset.x,\n        Top: offset.y,\n        Location: {\n          X: offset.x,\n          Y: offset.y\n        },\n        Size: {\n          Height: 30,\n          IsEmpty: false,\n          Width: 30\n        }\n      },\n      Color: {\n        IsEmpty: false,\n        B: 51,\n        Blue: 0.2,\n        C: 0,\n        G: 255\n      },\n      Comments: null,\n      CreatedDate: currentDateString,\n      CustomData: annotationObject.customData ? annotationObject.customData : null,\n      ExistingCustomData: null,\n      Icon: 'Comment',\n      IsCommentLock: false,\n      IsLock: annotationObject.isLock ? annotationObject.isLock : false,\n      IsPrint: annotationObject.isPrint ? annotationObject.isPrint : true,\n      ModifiedDate: currentDateString,\n      Note: \"\",\n      Opacity: annotationObject.opacity ? annotationObject.opacity : 1,\n      Reference: null,\n      Size: {\n        IsEmpty: true,\n        Width: 0,\n        Height: 0\n      },\n      State: \"\",\n      StateModel: \"\",\n      StrokeColor: null,\n      SubType: null,\n      Subject: 'Sticky Note',\n      Type: null\n    }; //Adding the annotation object to an array and return it\n\n    stickyNotesAnnotation[0] = stickyNotes;\n    return {\n      stickyNotesAnnotation: stickyNotesAnnotation\n    };\n  };\n  /**\n   * @private\n  */\n\n\n  StickyNotesAnnotation.prototype.getAnnotationType = function (type) {\n    var annotationType;\n\n    if (type === 'stamp' || type === 'Stamp') {\n      annotationType = 'stamp';\n    } else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse' || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n      annotationType = 'shape';\n    } else if (type === 'textMarkup') {\n      annotationType = 'textMarkup';\n    } else if (type === 'freeText' || type === 'FreeText') {\n      annotationType = 'freeText';\n    } else if (type === 'sticky' || type === 'StickyNotes') {\n      annotationType = 'sticky';\n    } else if (type === 'measure' || type === 'shape_measure') {\n      annotationType = 'measure';\n    } else if (type === 'ink' || type === 'Ink') {\n      annotationType = 'ink';\n    }\n\n    return annotationType;\n  };\n  /**\n   * @private\n  */\n\n\n  StickyNotesAnnotation.prototype.getAuthorName = function (annotation, commonDiv) {\n    var author;\n\n    if (annotation) {\n      var type = annotation.shapeAnnotationType;\n      var annotationType = this.getAnnotationType(type);\n      author = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, type);\n    } else {\n      author = commonDiv.getAttribute('author');\n    }\n\n    return author;\n  };\n\n  return StickyNotesAnnotation;\n}();\n\nexport { StickyNotesAnnotation };","map":{"version":3,"names":["AjaxHandler","createElement","Browser","Internationalization","isBlazor","isNullOrUndefined","Accordion","ContextMenu","Context","InPlaceEditor","cloneObject","StickyNotesAnnotation","pdfViewer","pdfViewerBase","commentsCount","commentsreplyCount","commentContextMenu","isAccordionContainer","isCreateContextMenu","isCommentsSelected","isAddAnnotationProgramatically","isEditableElement","isPageCommentsRendered","isCommentsRendered","isAnnotationRendered","opacity","stickyNotesSettings","prototype","renderStickyNotesAnnotations","stickyAnnotations","pageNumber","canvas","length","i","annotation","isAdded","pageAnnotations","getAnnotations","k","annotationName","annotName","AnnotName","pageAnnotationName","annotationAddMode","annotationModule","findAnnotationMode","AnnotType","annotationObject","position","Bounds","author","Author","AnnotationSettings","updateAnnotationSettings","allowedInteractions","AllowedInteraction","updateAnnotationAllowedInteractions","isPrint","IsPrint","IsLock","isLock","shapeAnnotationType","modifiedDate","ModifiedDate","subject","Subject","note","Note","Opacity","state","State","stateModel","StateModel","pathData","comments","getAnnotationComments","Comments","review","bounds","left","X","top","Y","width","Width","height","Height","right","Right","bottom","Bottom","color","annotationSelectorSettings","getSettings","customData","getCustomData","annotationSettings","isCommentLock","IsCommentLock","annot","AnnotationSelectorSettings","pageIndex","x","Left","y","Top","strokeColor","stampStrokeColor","data","setImageSource","notes","id","fillColor","drawStickyNotes","add","storeAnnotations","settings","borderColor","borderWidth","thickness","fontSize","fontColor","fontFamily","defaultText","dynamicText","fontStyle","font","textAlignment","textAlign","fireAnnotationAdd","selector","_this","image","Image","proxy","onload","commentsDivid","src","createGUID","addComments","document","getElementById","getDateAndTime","getData","addAction","isAddComment","updateDocumentEditedProperty","renderDrawing","canvass","element","isDevice","select","imageSource","createRequestForComments","jsonObject","startIndex","pageLimit","pageCount","pageStartIndex","toString","pageEndIndex","hashId","action","elementId","uniqueId","documentId","jsonDocumentId","url","serviceUrl","serverActionSettings","renderComments","commentsRequestHandler","mode","responseType","send","onSuccess","result","JSON","parse","onControlError","error","isInitialRender","annotationComments","annotationDetails","fireAjaxRequestSuccess","annotationCollections","documentAnnotationCollections","updateAnnotationsInDocumentCollections","newCollection","createAnnotationsCollection","j","startPageIndex","endPageIndex","renderAnnotationCollections","onFailure","fireAjaxRequestFailed","status","statusText","onError","excistingAnnotation","newAnnotation","textMarkupAnnotation","updateDocumentAnnotationCollections","shapeAnnotation","measureShapeAnnotation","stampAnnotations","stickyNotesAnnotation","freeTextAnnotation","signatureAnnotation","signatureInkAnnotation","push","pageCollections","dateTimeFormat","stickyNotesAnnotationModule","updateCollections","textMarkupAnnotationModule","updateTextMarkupAnnotationCollections","shapeAnnotationModule","updateShapeAnnotationCollections","measureAnnotationModule","updateMeasureAnnotationCollections","stampAnnotationModule","updateStampAnnotationCollections","updateStickyNotesAnnotationCollections","freeTextAnnotationModule","updateFreeTextAnnotationCollections","signatureModule","updateSignatureCollections","inkAnnotationModule","updateInkCollections","toolbarModule","renderAnnotationComments","renderedPagesList","renderAnnotations","isSignature","collections","signatureCollection","annotationCollection","signatureName","annotationId","createPageAccordion","split","createCommentControlPanel","newCommentsDiv","querySelectorAll","style","display","initializeAcccordionContainer","commentPanelText","className","promise","_dotnetInstance","invokeMethodAsync","then","value","textContent","localeObj","getConstant","updateCommentPanelTextTop","navigationPane","commentsContentContainer","appendChild","accordionContentContainer","annotationMenuObj","enableItems","commentPanelContainer","clientHeight","paddingTop","paddingLeft","clientWidth","pageAccordionContainer","accordionContent","zIndex","accordionPageContainer","viewerMainContainer","accordionContainer","pageAccordion","items","header","expanded","content","appendTo","order","alignAccordionContainer","accordionDiv","nextElement","insertBefore","updateCommentPanelScrollTop","scrollValue","offsetTop","clientTop","scrollTop","type","annotationSubType","accordionExpand","ej2_instances","expandItem","commentsContainer","accessKey","isCommentsAdded","childElementCount","children","Name","setAttribute","addEventListener","commentsAnnotationSelect","bind","commentDiv","title","getAttribute","AnnotationType","createTitleContainer","commentTextBox","editObj_1","model","placeholder","emptyText","editableOn","saveButton","cssClass","disabled","cancelButton","submitOnEnter","Text","created","setTimeout","querySelector","innerText","beginEdit","valueEle","textBox","enableEditMode","event","srcElement","actionSuccess","createCommentDiv","isCommentLocked","checkIslockProperty","MarkupText","statusContainer","statusDiv","statusSpan","updateStatusContainer","isNewcommentAdded","commentsDivClickEvent","commentDivMouseOver","commentDivMouseLeave","openEditorElement","commentDivFocus","args","currentPageNumber","updateScrollPosition","commentHeight","getBoundingClientRect","updateCommentsScrollTop","commentsHeight","titleContainer","newCommentDiv","localName","parentElement","previousSibling","childNodes","commentObj","lastChild","firstChild","click","selectedItems","annotations","modifyTextProperty","prevValue","parentNode","updateModifiedDate","saveCommentDiv","comment","annotationAuthor","lastElement","commentValue","name","removeChild","replyTextBox","replyCommentDiv","getAuthorName","createReplyDivTitleContainer","commentDivOnSelect","border","saveObj_1","modifyProperty","commentsDivDoubleClickEvent","modifyCommentsProperty","undoRedoAction","isCommentAction","replyDiv","undefined","saveObj","commentsDiv","createCommentsContainer","isCopy","indent","annotType","addStickyNotesAnnotations","editObj","commentElement","titleElement","commentsDivElement","subType","annotationType","getAnnotationType","commentTitleContainer","commentTypeSpan","updateCommentIcon","updateAnnotationAuthor","padding","cssFloat","commentsTitle","setModifiedDate","setExistingAnnotationModifiedDate","moreOptionsButton","attrs","visibility","moreOptionsButtonSpan","author_1","createCommentContextMenu","openTextEditor","moreOptionsClick","replyTitleContainer","replyTitle","moreButton","moreButtonSpan","commentSpan","backgroundColor","updateAccordionContainer","removeDiv","parseInt","text","commentMenuElement","commentMenuObj","target","beforeOpen","contextMenuBeforeOpen","commentMenuItemSelect","enableRtl","enableDesktopMode","animationSettings","effect","contextActiveDiv","contextDiv","nextSibling","item","commentShow","deleteAnnotation","modifyCommentDeleteProperty","remove","acceptedStatusDiv","modifyStatusProperty","completedStatusDiv","statusElement","statusOptionSpan","cancelStatusDiv","cancelStatusElement","cancelStatusSpan","rejectedStatusDiv","rejectedStatusElement","rejectedStatusSpan","isMoreOptionClick","currentTarget","checkContextMenuDeleteItem","open","clientY","clientX","drawInkAnnotation","isLocked","checkAnnotationSettings","findAnnotationObject","checkAllowedInteractions","commentEvent","annotCollection","currentTextMarkupAnnotation","isReadonly","isCommentsSelect","isSetAnnotationType","showCommentsPanel","classList","contains","editElement","commentsElement","activeElement","textElement","enableShapeLabel","editModule","fireCommentSelect","preventDefault","commentSelect","z","activeSiblingElement","drawIcons","isCommentIconAdded","getEventPageNumber","pageCurrentRect","getElement","zoomValue","getZoomFactor","commentsButton","commentsIcon","accordion","minHeight","currentTextBox","textDiv","navigation","navigationModule","goToPage","setAnnotationType","selectAnnotationObj","updateCommentsContainerWidth","selectCommentsAnnotation","typeString","storeCommentObject","window","sessionStorage","getItem","isStorageExceed","annotationStorage","annotationCommentObject","index","getPageCollection","currentSelector","fireAnnotationUnSelect","clearSelection","clearCurrentAnnotationSelection","selectAnnotation","selectTextMarkupCurrentPage","enableAnnotationPropertiesTool","enableAnnotationToolbar","annotationToolbarModule","isToolbarHidden","showAnnotationToolbar","annotationItem","randomId","onAnnotationMouseDown","rect","pageSize","getAnnotationTop","scroll_1","viewerContainer","top_1","scroll_2","previousValue","currentAnnotation","module","isMeasure","isTextAdded","modifyDynamicTextValue","labelContent","nodePropertyChange","measureType","clonedObject","updateUndoRedoCollections","fireCommentAdd","fireCommentEdit","date","Date","globalize","dateOptions","format","dateTime","formatDate","isComment","newArray","parentId","annotId","fireCommentStatusChanged","clonedObj","replyElement","clonedAnnotation","commentsParentElement","positionValue","fireCommentDelete","splice","updateOpacityValue","undoAction","isAction","undoAnnotation","commentsMainDiv","clonedAnnotationObject","redoCommentsElement","activeDiv","redoAction","poppedItem","pop","i_1","annotationBase","shapeType","storeAnnotationCollections","deleteStickyNotesAnnotations","manageAnnotations","addAnnotationComments","undoCommentsElement","findPosition","parentDiv","shapeAnnotations","storeObject","annotObject","removeItem","annotationStringified","stringify","setItem","updateStickyNotes","currentAnnot","saveStickyAnnotations","Array","skipDownload","pageAnnotationObject","getBounds","addTextToComments","updateAnnotationCollection","isCut","findAnnotationType","removedAnnotationCollection","updateAnnotation","vertexPoints","modifiedDateTime","updateModifiedTime","time","minutes","modifiedTime","join","toLocaleTimeString","updateAnnotationModifiedDate","isBounds","isUndoRedoAction","saveImportedStickyNotesAnnotations","clear","destroy","accordionPages","getModuleName","updateAddAnnotationDetails","offset","currentDateString","updateSettings","stickyNotes","AllowedInteractions","AnnotationFlags","Location","Size","IsEmpty","Color","B","Blue","C","G","CreatedDate","CustomData","ExistingCustomData","Icon","Reference","StrokeColor","SubType","Type","commonDiv"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/annotation/sticky-notes-annotation.js"],"sourcesContent":["import { AjaxHandler } from '../index';\nimport { createElement, Browser, Internationalization, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Accordion, ContextMenu as Context } from '@syncfusion/ej2-navigations';\nimport { InPlaceEditor } from '@syncfusion/ej2-inplace-editor';\nimport { cloneObject } from '../drawing/drawing-util';\n/**\n * StickyNotes module\n */\nvar StickyNotesAnnotation = /** @class */ (function () {\n    /**\n     * @param pdfViewer\n     * @param pdfViewerBase\n     * @param pdfViewer\n     * @param pdfViewerBase\n     * @private\n     */\n    function StickyNotesAnnotation(pdfViewer, pdfViewerBase) {\n        this.commentsCount = 0;\n        this.commentsreplyCount = 0;\n        this.commentContextMenu = [];\n        this.isAccordionContainer = true;\n        this.isCreateContextMenu = false;\n        this.isCommentsSelected = false;\n        /**\n         * @private\n         */\n        this.isAddAnnotationProgramatically = false;\n        /**\n         * @private\n         */\n        this.isEditableElement = false;\n        this.isPageCommentsRendered = false;\n        this.isCommentsRendered = false;\n        /**\n         * @private\n         */\n        this.isAnnotationRendered = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.opacity = this.pdfViewer.stickyNotesSettings.opacity ? this.pdfViewer.stickyNotesSettings.opacity : 1;\n    }\n    /**\n     * @param stickyAnnotations\n     * @param pageNumber\n     * @param canvas\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.renderStickyNotesAnnotations = function (stickyAnnotations, pageNumber, canvas) {\n        if (stickyAnnotations) {\n            if (stickyAnnotations.length > 0) {\n                for (var i = 0; i < stickyAnnotations.length; i++) {\n                    // eslint-disable-next-line\n                    var annotation = stickyAnnotations[i];\n                    var isAdded = false;\n                    // eslint-disable-next-line\n                    var pageAnnotations = this.getAnnotations(pageNumber, null, 'sticky');\n                    if (pageAnnotations !== null) {\n                        for (var k = 0; k < pageAnnotations.length; k++) {\n                            var annotationName = annotation.annotName ? annotation.annotName : annotation.AnnotName;\n                            var pageAnnotationName = pageAnnotations[k].annotName ? pageAnnotations[k].annotName : pageAnnotations[k].AnnotName;\n                            if (pageAnnotationName && annotationName && pageAnnotationName === annotationName) {\n                                isAdded = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (!isAdded) {\n                        annotation.annotationAddMode = this.pdfViewer.annotationModule.findAnnotationMode(annotation, pageNumber, annotation.AnnotType);\n                        var annotationObject = null;\n                        // eslint-disable-next-line\n                        var position = annotation.Bounds;\n                        var author = annotation.Author;\n                        // eslint-disable-next-line max-len\n                        annotation.AnnotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);\n                        annotation.allowedInteractions = annotation.AllowedInteraction ? annotation.AllowedInteraction : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n                        var isPrint = true;\n                        if (annotation.annotationAddMode === 'Imported Annotation') {\n                            isPrint = annotation.IsPrint;\n                        }\n                        else {\n                            isPrint = annotation.AnnotationSettings.isPrint;\n                        }\n                        if (annotation.IsLock) {\n                            annotation.AnnotationSettings.isLock = annotation.IsLock;\n                        }\n                        annotationObject = {\n                            // eslint-disable-next-line max-len\n                            shapeAnnotationType: 'sticky', author: author, modifiedDate: annotation.ModifiedDate, subject: annotation.Subject, note: annotation.Note, opacity: annotation.Opacity, state: annotation.State, stateModel: annotation.StateModel,\n                            pathData: '', comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, author), review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: author },\n                            // eslint-disable-next-line max-len\n                            bounds: { left: annotation.Bounds.X, top: annotation.Bounds.Y, width: annotation.Bounds.Width, height: annotation.Bounds.Height, right: annotation.Bounds.Right, bottom: annotation.Bounds.Bottom },\n                            annotName: annotation.AnnotName, color: annotation.color,\n                            annotationSelectorSettings: this.getSettings(annotation),\n                            customData: this.pdfViewer.annotation.getCustomData(annotation),\n                            annotationSettings: annotation.AnnotationSettings, allowedInteractions: annotation.allowedInteractions,\n                            isPrint: isPrint, isCommentLock: annotation.IsCommentLock\n                        };\n                        var annot = void 0;\n                        // eslint-disable-next-line max-len\n                        annotation.AnnotationSelectorSettings = annotation.AnnotationSelectorSettings ? annotation.AnnotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n                        annot = {\n                            // eslint-disable-next-line max-len\n                            author: author, modifiedDate: annotationObject.modifiedDate, annotName: annotationObject.annotName, pageIndex: pageNumber, bounds: { x: position.Left, y: position.Top, width: position.Width, height: position.Height }, strokeColor: 'transparent', stampStrokeColor: '', data: this.setImageSource(), shapeAnnotationType: 'StickyNotes',\n                            subject: annotationObject.subject, notes: annotationObject.note, opacity: annotationObject.opacity, id: annotationObject.annotName, fillColor: annotationObject.color,\n                            annotationSelectorSettings: annotation.AnnotationSelectorSettings,\n                            annotationSettings: annotationObject.annotationSettings,\n                            // eslint-disable-next-line max-len\n                            annotationAddMode: annotation.annotationAddMode, isPrint: isPrint, isCommentLock: annotationObject.isCommentLock\n                        };\n                        if (canvas) {\n                            this.drawStickyNotes(position.Left, position.Top, position.Width, position.Height, pageNumber, annot, canvas);\n                        }\n                        else {\n                            this.pdfViewer.add(annot);\n                            this.drawStickyNotes(position.Left, position.Top, position.Width, position.Height, pageNumber, annot);\n                            this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_sticky');\n                        }\n                        if (this.isAddAnnotationProgramatically) {\n                            // eslint-disable-next-line\n                            var settings = {\n                                opacity: annot.opacity, borderColor: annot.strokeColor, borderWidth: annot.thickness, author: annotation.author, subject: annotation.subject, modifiedDate: annotation.modifiedDate,\n                                // eslint-disable-next-line\n                                fillColor: annot.fillColor, fontSize: annot.fontSize, width: annot.bounds.width, height: annot.bounds.height, fontColor: annot.fontColor, fontFamily: annot.fontFamily, defaultText: annot.dynamicText, fontStyle: annot.font, textAlignment: annot.textAlign\n                            };\n                            this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'StickyNotes', annot.bounds, settings);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.getSettings = function (annotation) {\n        var selector = this.pdfViewer.annotationSelectorSettings;\n        if (annotation.AnnotationSelectorSettings) {\n            selector = annotation.AnnotationSelectorSettings;\n        }\n        else if (this.pdfViewer.stickyNotesSettings.annotationSelectorSettings) {\n            selector = this.pdfViewer.stickyNotesSettings.annotationSelectorSettings;\n        }\n        return selector;\n    };\n    /**\n     * @param X\n     * @param Y\n     * @param width\n     * @param height\n     * @param pageIndex\n     * @param annotation\n     * @param canvas\n     * @param X\n     * @param Y\n     * @param width\n     * @param height\n     * @param pageIndex\n     * @param annotation\n     * @param canvas\n     * @param X\n     * @param Y\n     * @param width\n     * @param height\n     * @param pageIndex\n     * @param annotation\n     * @param canvas\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.drawStickyNotes = function (X, Y, width, height, pageIndex, annotation, canvas) {\n        var _this = this;\n        var annot;\n        var annotationObject = null;\n        var image = new Image();\n        // eslint-disable-next-line\n        var proxy = this;\n        image.onload = function () {\n            var commentsDivid;\n            var annotationName;\n            // eslint-disable-next-line max-len\n            var author = (_this.pdfViewer.annotationSettings.author !== 'Guest') ? _this.pdfViewer.annotationSettings.author : _this.pdfViewer.stickyNotesSettings.author;\n            if (annotation) {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    author: annotation.author, modifiedDate: annotation.modifiedDate, annotName: annotation.annotName, data: image.src, bounds: { x: X, y: Y, width: width, height: height }, subject: annotation.subject,\n                    notes: annotation.notes, opacity: annotation.opacity, id: annotation.annotName, shapeAnnotationType: 'StickyNotes', strokeColor: 'transparent', stampStrokeColor: '', pageIndex: annotation.pageIndex, isPrint: annotation.isPrint\n                };\n            }\n            else {\n                annotationName = _this.pdfViewer.annotation.createGUID();\n                commentsDivid = proxy.addComments('sticky', pageIndex + 1);\n                if (commentsDivid) {\n                    document.getElementById(commentsDivid).id = annotationName;\n                }\n                // eslint-disable-next-line\n                var annotationSelectorSettings = _this.pdfViewer.stickyNotesSettings.annotationSelectorSettings ? _this.pdfViewer.stickyNotesSettings.annotationSelectorSettings : _this.pdfViewer.annotationSelectorSettings;\n                var isPrint = _this.pdfViewer.stickyNotesSettings.isPrint;\n                annot = {\n                    // eslint-disable-next-line max-len\n                    bounds: { x: X, y: Y, width: width, height: height }, pageIndex: pageIndex, data: image.src, modifiedDate: _this.getDateAndTime(),\n                    shapeAnnotationType: 'StickyNotes', strokeColor: 'transparent', stampStrokeColor: '', annotName: annotationName, id: annotationName, opacity: _this.opacity, isPrint: isPrint\n                };\n                // eslint-disable-next-line max-len\n                var isLock = _this.pdfViewer.stickyNotesSettings.isLock ? _this.pdfViewer.stickyNotesSettings.isLock : _this.pdfViewer.annotationSettings.isLock;\n                // eslint-disable-next-line\n                var allowedInteractions = _this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n                annotationObject = {\n                    // eslint-disable-next-line max-len\n                    author: author, allowedInteractions: allowedInteractions, modifiedDate: _this.getDateAndTime(), subject: 'Sticky Note', shapeAnnotationType: 'sticky',\n                    // eslint-disable-next-line max-len\n                    note: '', opacity: _this.opacity, pathData: '', state: '', stateModel: '', color: 'rgba(255,255,0)', comments: [], annotName: annotationName,\n                    // eslint-disable-next-line max-len\n                    bounds: { left: X, top: Y, width: width, height: height }, review: { state: '', stateModel: '', modifiedDate: '', author: author },\n                    annotationSelectorSettings: annotationSelectorSettings,\n                    // eslint-disable-next-line max-len\n                    customData: _this.pdfViewer.annotationModule.getData('sticky'), annotationSettings: { isLock: isLock }, isPrint: isPrint, isCommentLock: false\n                };\n            }\n            if (!annotation) {\n                // eslint-disable-next-line max-len\n                proxy.pdfViewer.annotation.addAction(pageIndex, null, annot, 'Addition', '', annot, annot);\n                proxy.pdfViewer.add(annot);\n                proxy.pdfViewer.annotationModule.storeAnnotations(pageIndex, annotationObject, '_annotations_sticky');\n            }\n            if (proxy.pdfViewerBase.isAddComment) {\n                // eslint-disable-next-line max-len\n                // eslint-disable-next-line\n                var bounds = { left: annot.bounds.x, top: annot.bounds.y, width: annot.bounds.width, height: annot.bounds.height };\n                _this.pdfViewerBase.updateDocumentEditedProperty(true);\n                // eslint-disable-next-line\n                var settings = { opacity: annot.opacity, author: author, modifiedDate: annot.modifiedDate, subject: annot.shapeAnnotationType };\n                _this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'StickyNotes', bounds, settings);\n            }\n            if (canvas) {\n                // eslint-disable-next-line\n                proxy.pdfViewer.renderDrawing(canvas, pageIndex);\n            }\n            else {\n                // eslint-disable-next-line\n                var canvass = document.getElementById(proxy.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n                // eslint-disable-next-line\n                proxy.pdfViewer.renderDrawing(canvass, pageIndex);\n            }\n            if (Browser.isDevice) {\n                proxy.pdfViewer.select([annot.id], annot.annotationSelectorSettings);\n            }\n            proxy.pdfViewerBase.isAddComment = false;\n        };\n        image.src = this.setImageSource();\n    };\n    StickyNotesAnnotation.prototype.setImageSource = function () {\n        // eslint-disable-next-line max-len\n        var imageSource = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo=';\n        return imageSource;\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.createRequestForComments = function () {\n        var jsonObject;\n        var proxy = this;\n        var startIndex = 0;\n        var pageLimit = 20;\n        var pageCount = proxy.pdfViewerBase.pageCount;\n        if (!proxy.isCommentsRendered) {\n            if (pageLimit < pageCount) {\n                pageCount = pageLimit;\n            }\n            else {\n                proxy.isPageCommentsRendered = true;\n            }\n        }\n        if (!this.isCommentsRendered) {\n            // eslint-disable-next-line max-len\n            jsonObject = { pageStartIndex: startIndex.toString(), pageEndIndex: pageCount.toString(), hashId: this.pdfViewerBase.hashId, action: 'RenderAnnotationComments', elementId: this.pdfViewer.element.id, uniqueId: proxy.pdfViewerBase.documentId };\n            proxy.isCommentsRendered = true;\n        }\n        else {\n            // eslint-disable-next-line max-len\n            jsonObject = { pageStartIndex: pageLimit.toString(), pageEndIndex: pageCount.toString(), hashId: this.pdfViewerBase.hashId, action: 'RenderAnnotationComments', elementId: this.pdfViewer.element.id, uniqueId: proxy.pdfViewerBase.documentId };\n        }\n        if (this.pdfViewerBase.jsonDocumentId) {\n            // eslint-disable-next-line\n            jsonObject.documentId = this.pdfViewerBase.jsonDocumentId;\n        }\n        var url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderComments;\n        proxy.commentsRequestHandler = new AjaxHandler(proxy.pdfViewer);\n        proxy.commentsRequestHandler.url = url;\n        proxy.commentsRequestHandler.mode = true;\n        proxy.commentsRequestHandler.responseType = 'text';\n        proxy.commentsRequestHandler.send(jsonObject);\n        // eslint-disable-next-line\n        proxy.commentsRequestHandler.onSuccess = function (result) {\n            // eslint-disable-next-line\n            var data = result.data;\n            if (data) {\n                if (typeof data !== 'object') {\n                    try {\n                        data = JSON.parse(data);\n                        if (typeof data !== 'object') {\n                            data = JSON.parse(data);\n                        }\n                        if (typeof data !== 'object') {\n                            proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderComments);\n                            data = null;\n                        }\n                    }\n                    catch (error) {\n                        proxy.pdfViewerBase.onControlError(500, data, this.pdfViewer.serverActionSettings.renderComments);\n                        data = null;\n                    }\n                }\n                if (data) {\n                    var isInitialRender = false;\n                    if (proxy.pdfViewerBase.annotationComments) {\n                        // eslint-disable-next-line\n                        proxy.pdfViewerBase.annotationComments = data.annotationDetails;\n                    }\n                    else {\n                        proxy.pdfViewerBase.annotationComments = data.annotationDetails;\n                        isInitialRender = true;\n                    }\n                    if (data.annotationDetails && data.uniqueId === proxy.pdfViewerBase.documentId) {\n                        proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderComments, data);\n                        proxy.isAnnotationRendered = true;\n                        // eslint-disable-next-line\n                        var annotationCollections = void 0;\n                        if (proxy.pdfViewerBase.documentAnnotationCollections) {\n                            // eslint-disable-next-line max-len\n                            annotationCollections = proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments, proxy.pdfViewerBase.documentAnnotationCollections);\n                        }\n                        else {\n                            // eslint-disable-next-line\n                            var newCollection = proxy.pdfViewerBase.createAnnotationsCollection();\n                            // eslint-disable-next-line max-len\n                            annotationCollections = proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments, newCollection);\n                        }\n                        proxy.pdfViewerBase.annotationComments = annotationCollections;\n                        proxy.pdfViewerBase.documentAnnotationCollections = annotationCollections;\n                        for (var j = data.startPageIndex; j < data.endPageIndex; j++) {\n                            if (data.annotationDetails[j]) {\n                                proxy.renderAnnotationCollections(data.annotationDetails[j], j, isInitialRender);\n                            }\n                        }\n                        if (!proxy.isPageCommentsRendered) {\n                            proxy.isPageCommentsRendered = true;\n                            proxy.createRequestForComments();\n                        }\n                    }\n                }\n            }\n        };\n        // eslint-disable-next-line\n        proxy.commentsRequestHandler.onFailure = function (result) {\n            this.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n        // eslint-disable-next-line\n        proxy.commentsRequestHandler.onError = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText, proxy.pdfViewer.serverActionSettings.renderComments);\n        };\n    };\n    /**\n     * @param excistingAnnotation\n     * @param newAnnotation\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateAnnotationsInDocumentCollections = function (excistingAnnotation, newAnnotation) {\n        for (var i = 0; i < this.pdfViewerBase.pageCount; i++) {\n            if (excistingAnnotation[i] && newAnnotation[i]) {\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].textMarkupAnnotation && excistingAnnotation[i].textMarkupAnnotation.length !== 0 && newAnnotation[i].textMarkupAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].textMarkupAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].textMarkupAnnotation[j], newAnnotation[i].textMarkupAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].shapeAnnotation && excistingAnnotation[i].shapeAnnotation.length !== 0 && newAnnotation[i].shapeAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].shapeAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].shapeAnnotation[j], newAnnotation[i].shapeAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].measureShapeAnnotation && excistingAnnotation[i].measureShapeAnnotation.length !== 0 && newAnnotation[i].measureShapeAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].measureShapeAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].measureShapeAnnotation[j], newAnnotation[i].measureShapeAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].stampAnnotations && excistingAnnotation[i].stampAnnotations.length !== 0 && newAnnotation[i].stampAnnotations) {\n                    for (var j = 0; j < excistingAnnotation[i].stampAnnotations.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].stampAnnotations[j], newAnnotation[i].stampAnnotations);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].stickyNotesAnnotation && excistingAnnotation[i].stickyNotesAnnotation.length !== 0 && newAnnotation[i].stickyNotesAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].stickyNotesAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].stickyNotesAnnotation[j], newAnnotation[i].stickyNotesAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].freeTextAnnotation && excistingAnnotation[i].freeTextAnnotation.length !== 0 && newAnnotation[i].freeTextAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].freeTextAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].freeTextAnnotation[j], newAnnotation[i].freeTextAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].signatureAnnotation && excistingAnnotation[i].signatureAnnotation.length !== 0 && newAnnotation[i].signatureAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].signatureAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureAnnotation[j], newAnnotation[i].signatureAnnotation);\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (excistingAnnotation[i].signatureInkAnnotation && excistingAnnotation[i].signatureInkAnnotation.length !== 0 && newAnnotation[i].signatureInkAnnotation) {\n                    for (var j = 0; j < excistingAnnotation[i].signatureInkAnnotation.length; j++) {\n                        // eslint-disable-next-line max-len\n                        this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureInkAnnotation[j], newAnnotation[i].signatureInkAnnotation);\n                    }\n                }\n            }\n        }\n        return newAnnotation;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateDocumentAnnotationCollections = function (excistingAnnotation, newAnnotation) {\n        if (newAnnotation.length === 0) {\n            newAnnotation.push(excistingAnnotation);\n        }\n        else {\n            var isAdded = false;\n            for (var i = 0; i < newAnnotation.length; i++) {\n                // eslint-disable-next-line max-len\n                if ((excistingAnnotation.AnnotName && newAnnotation[i].AnnotName) && (excistingAnnotation.AnnotName === newAnnotation[i].AnnotName)) {\n                    isAdded = true;\n                    break;\n                }\n            }\n            if (!isAdded) {\n                newAnnotation.push(excistingAnnotation);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.renderAnnotationCollections = function (pageAnnotations, pageNumber, isInitialRender) {\n        // eslint-disable-next-line\n        var pageCollections = [];\n        if (pageAnnotations.textMarkupAnnotation && pageAnnotations.textMarkupAnnotation.length !== 0) {\n            for (var i = 0; i < pageAnnotations.textMarkupAnnotation.length; i++) {\n                if (this.pdfViewer.dateTimeFormat) {\n                    // eslint-disable-next-line max-len\n                    pageAnnotations.textMarkupAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.textMarkupAnnotation[i].ModifiedDate);\n                }\n                pageCollections.push(pageAnnotations.textMarkupAnnotation[i]);\n                // eslint-disable-next-line max-len\n                this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(pageAnnotations.textMarkupAnnotation[i], pageNumber));\n            }\n        }\n        if (pageAnnotations.shapeAnnotation && pageAnnotations.shapeAnnotation.length !== 0) {\n            for (var i = 0; i < pageAnnotations.shapeAnnotation.length; i++) {\n                if (this.pdfViewer.dateTimeFormat) {\n                    // eslint-disable-next-line max-len\n                    pageAnnotations.shapeAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.shapeAnnotation[i].ModifiedDate);\n                }\n                pageCollections.push(pageAnnotations.shapeAnnotation[i]);\n                // eslint-disable-next-line max-len\n                this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(pageAnnotations.shapeAnnotation[i], pageNumber));\n            }\n        }\n        if (pageAnnotations.measureShapeAnnotation && pageAnnotations.measureShapeAnnotation.length !== 0) {\n            for (var i = 0; i < pageAnnotations.measureShapeAnnotation.length; i++) {\n                if (this.pdfViewer.dateTimeFormat) {\n                    // eslint-disable-next-line max-len\n                    pageAnnotations.measureShapeAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.measureShapeAnnotation[i].ModifiedDate);\n                }\n                pageCollections.push(pageAnnotations.measureShapeAnnotation[i]);\n                // eslint-disable-next-line max-len\n                this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(pageAnnotations.measureShapeAnnotation[i], pageNumber));\n            }\n        }\n        if (pageAnnotations.stampAnnotations && pageAnnotations.stampAnnotations.length !== 0) {\n            for (var i = 0; i < pageAnnotations.stampAnnotations.length; i++) {\n                if (this.pdfViewer.dateTimeFormat) {\n                    // eslint-disable-next-line max-len\n                    pageAnnotations.stampAnnotations[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.stampAnnotations[i].ModifiedDate);\n                }\n                pageCollections.push(pageAnnotations.stampAnnotations[i]);\n                // eslint-disable-next-line max-len\n                this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(pageAnnotations.stampAnnotations[i], pageNumber));\n            }\n        }\n        if (pageAnnotations.stickyNotesAnnotation && pageAnnotations.stickyNotesAnnotation.length !== 0) {\n            for (var i = 0; i < pageAnnotations.stickyNotesAnnotation.length; i++) {\n                if (this.pdfViewer.dateTimeFormat) {\n                    // eslint-disable-next-line max-len\n                    pageAnnotations.stickyNotesAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.stickyNotesAnnotation[i].ModifiedDate);\n                }\n                pageCollections.push(pageAnnotations.stickyNotesAnnotation[i]);\n                // eslint-disable-next-line max-len\n                this.updateCollections(this.updateStickyNotesAnnotationCollections(pageAnnotations.stickyNotesAnnotation[i], pageNumber));\n            }\n        }\n        if (pageAnnotations.freeTextAnnotation && pageAnnotations.freeTextAnnotation.length !== 0) {\n            for (var i = 0; i < pageAnnotations.freeTextAnnotation.length; i++) {\n                if (this.pdfViewer.dateTimeFormat) {\n                    // eslint-disable-next-line max-len\n                    pageAnnotations.freeTextAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.freeTextAnnotation[i].ModifiedDate);\n                }\n                pageCollections.push(pageAnnotations.freeTextAnnotation[i]);\n                // eslint-disable-next-line max-len\n                this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(pageAnnotations.freeTextAnnotation[i], pageNumber));\n            }\n        }\n        if (pageAnnotations.signatureAnnotation && pageAnnotations.signatureAnnotation.length !== 0) {\n            for (var i = 0; i < pageAnnotations.signatureAnnotation.length; i++) {\n                if (this.pdfViewer.dateTimeFormat) {\n                    // eslint-disable-next-line max-len\n                    pageAnnotations.signatureAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.signatureAnnotation[i].ModifiedDate);\n                }\n                // eslint-disable-next-line max-len\n                this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(pageAnnotations.signatureAnnotation[i], pageNumber), true);\n            }\n        }\n        if (pageAnnotations.signatureInkAnnotation && pageAnnotations.signatureInkAnnotation.length !== 0) {\n            for (var i = 0; i < pageAnnotations.signatureInkAnnotation.length; i++) {\n                if (this.pdfViewer.dateTimeFormat) {\n                    // eslint-disable-next-line max-len\n                    pageAnnotations.signatureInkAnnotation[i].ModifiedDate = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.signatureInkAnnotation[i].ModifiedDate);\n                }\n                pageCollections.push(pageAnnotations.signatureInkAnnotation[i]);\n                // eslint-disable-next-line max-len\n                this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(pageAnnotations.signatureInkAnnotation[i], pageNumber));\n            }\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.renderAnnotationComments(pageCollections, pageNumber);\n        }\n        if (isInitialRender) {\n            for (var i = 0; i < this.pdfViewerBase.renderedPagesList.length; i++) {\n                this.pdfViewerBase.renderAnnotations(this.pdfViewerBase.renderedPagesList[i], false);\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param isSignature\n     * @param annotation\n     * @param isSignature\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateCollections = function (annotation, isSignature) {\n        var isAdded = false;\n        // eslint-disable-next-line\n        var collections;\n        if (isSignature) {\n            collections = this.pdfViewer.signatureCollection;\n        }\n        else {\n            collections = this.pdfViewer.annotationCollection;\n        }\n        if (collections && annotation) {\n            for (var i = 0; i < collections.length; i++) {\n                if (isSignature) {\n                    if (collections[i].signatureName === annotation.signatureName) {\n                        isAdded = true;\n                        break;\n                    }\n                }\n                else {\n                    if (collections[i].annotationId === annotation.annotationId) {\n                        isAdded = true;\n                        break;\n                    }\n                }\n            }\n        }\n        if (!isAdded && annotation) {\n            if (isSignature) {\n                this.pdfViewer.signatureCollection.push(annotation);\n            }\n            else {\n                this.pdfViewer.annotationCollection.push(annotation);\n            }\n        }\n    };\n    /**\n     * @param data\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.renderAnnotationComments = function (data, pageIndex) {\n        pageIndex = pageIndex + 1;\n        if (data) {\n            if (data.length !== 0) {\n                this.createPageAccordion(pageIndex);\n                for (var i = 0; i < data.length; i++) {\n                    if (data[i].AnnotName && (data[i].AnnotName.split('freeText').length === 1)) {\n                        this.createCommentControlPanel(data[i], pageIndex);\n                    }\n                }\n                // eslint-disable-next-line\n                var newCommentsDiv = document.querySelectorAll('.e-pv-new-comments-div');\n                if (newCommentsDiv) {\n                    for (var j = 0; j < newCommentsDiv.length; j++) {\n                        newCommentsDiv[j].style.display = 'none';\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.initializeAcccordionContainer = function () {\n        // eslint-disable-next-line max-len\n        var commentPanelText = createElement('div', { id: this.pdfViewer.element.id + '_commentsPanelText', className: 'e-pv-comments-panel-text' });\n        if (isBlazor()) {\n            var promise = this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText', 'PdfViewer_NoCommentsYet');\n            promise.then(function (value) {\n                commentPanelText.textContent = value;\n            });\n        }\n        else {\n            commentPanelText.textContent = this.pdfViewer.localeObj.getConstant('No Comments Yet');\n        }\n        this.updateCommentPanelTextTop();\n        this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(commentPanelText);\n        // eslint-disable-next-line max-len\n        this.accordionContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_accordionContentContainer', className: 'e-pv-accordion-content-container' });\n        this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(this.accordionContentContainer);\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false);\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], false);\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.updateCommentPanelTextTop = function () {\n        var commentPanelText = document.getElementById(this.pdfViewer.element.id + '_commentsPanelText');\n        // eslint-disable-next-line max-len\n        if (this.pdfViewerBase.navigationPane.commentPanelContainer && this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight && commentPanelText.style.display !== 'none') {\n            commentPanelText.style.paddingTop = (this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight / 2) - 47 + 'px';\n            commentPanelText.style.paddingLeft = (this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth) / 3 + 'px';\n        }\n    };\n    /**\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createPageAccordion = function (pageIndex) {\n        var pageAccordionContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n        if (pageAccordionContainer === null) {\n            this.accordionContent = createElement('div', { id: this.pdfViewer.element.id + '_accordioncontent' + pageIndex });\n            this.accordionContent.style.zIndex = '1000';\n            // eslint-disable-next-line max-len\n            this.accordionPageContainer = createElement('div', { id: this.pdfViewer.element.id + '_accordionPageContainer' + pageIndex, className: 'e-pv-accordion-page-container' });\n            this.accordionPageContainer.appendChild(this.accordionContent);\n            this.pdfViewerBase.viewerMainContainer.appendChild(this.accordionPageContainer);\n            // eslint-disable-next-line max-len\n            this.accordionContainer = createElement('div', { id: this.pdfViewer.element.id + '_accordionContainer' + pageIndex, className: 'e-pv-accordion-container' });\n            var pageAccordion = new Accordion({\n                items: [\n                    // eslint-disable-next-line max-len\n                    { header: this.pdfViewer.localeObj.getConstant('Page') + ' ' + (pageIndex), expanded: true, content: '#' + this.pdfViewer.element.id + '_accordioncontent' + pageIndex + '' }\n                ]\n            });\n            pageAccordion.appendTo(this.accordionContainer);\n            this.accordionContainer.style.order = 'pageIndex';\n            this.alignAccordionContainer(this.accordionContainer, pageIndex);\n            if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n                document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'none';\n            }\n            if (document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer')) {\n                document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer').style.display = 'block';\n            }\n            return this.accordionContainer;\n        }\n    };\n    StickyNotesAnnotation.prototype.alignAccordionContainer = function (accordionDiv, pageIndex) {\n        var isAdded = true;\n        if (this.accordionContentContainer) {\n            if (this.isAccordionContainer) {\n                this.accordionContentContainer.appendChild(accordionDiv);\n                isAdded = false;\n            }\n            else {\n                for (var i = 1; i <= this.pdfViewerBase.pageCount; i++) {\n                    var nextElement = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + i);\n                    if (nextElement) {\n                        if (pageIndex < i) {\n                            this.accordionContentContainer.insertBefore(accordionDiv, nextElement);\n                            isAdded = false;\n                            break;\n                        }\n                    }\n                }\n            }\n            if (isAdded) {\n                this.accordionContentContainer.appendChild(accordionDiv);\n                isAdded = false;\n            }\n            this.isAccordionContainer = false;\n        }\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    StickyNotesAnnotation.prototype.updateCommentPanelScrollTop = function (pageNumber) {\n        var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n        if (accordionDiv) {\n            var scrollValue = accordionDiv.offsetTop + accordionDiv.clientTop - 35;\n            this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n        }\n    };\n    /**\n     * @param data\n     * @param pageIndex\n     * @param type\n     * @param annotationSubType\n     * @param data\n     * @param pageIndex\n     * @param type\n     * @param annotationSubType\n     * @param data\n     * @param pageIndex\n     * @param type\n     * @param annotationSubType\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createCommentControlPanel = function (data, pageIndex, type, annotationSubType) {\n        var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordioncontent' + pageIndex);\n        if (accordionContent) {\n            // eslint-disable-next-line\n            var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n            if (accordionExpand) {\n                accordionExpand.ej2_instances[0].expandItem(true);\n            }\n            // eslint-disable-next-line max-len\n            this.commentsContainer = createElement('div', { id: this.pdfViewer.element.id + 'commentscontainer' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comments-container' });\n            this.commentsContainer.accessKey = pageIndex.toString();\n            var isCommentsAdded = false;\n            if (data) {\n                this.commentsContainer.id = data.AnnotName;\n                if (data.AnnotName) {\n                    for (var j = 0; j < accordionContent.childElementCount; j++) {\n                        if (accordionContent.children[j].id === data.AnnotName) {\n                            isCommentsAdded = true;\n                            break;\n                        }\n                    }\n                }\n                if (data.Name && data.Name === 'freeText') {\n                    this.commentsContainer.setAttribute('name', 'freeText');\n                }\n                else {\n                    this.commentsContainer.setAttribute('name', data.AnnotType);\n                }\n            }\n            if (type) {\n                this.commentsContainer.setAttribute('name', type);\n            }\n            this.commentsContainer.addEventListener('mousedown', this.commentsAnnotationSelect.bind(this));\n            // eslint-disable-next-line max-len\n            var commentDiv = createElement('div', { id: this.pdfViewer.element.id + '_commentdiv' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comments-div' });\n            this.commentsCount = this.commentsCount + 1;\n            this.commentsContainer.appendChild(commentDiv);\n            this.updateCommentPanelScrollTop(pageIndex);\n            if (!isCommentsAdded) {\n                accordionContent.appendChild(this.commentsContainer);\n            }\n            var title = void 0;\n            if (data) {\n                title = this.commentsContainer.getAttribute('name');\n                if (title === 'null') {\n                    title = data.AnnotationType;\n                }\n                this.createTitleContainer(commentDiv, title, data.Subject, data.ModifiedDate, data.Author);\n            }\n            else {\n                title = this.commentsContainer.getAttribute('name');\n                this.createTitleContainer(commentDiv, title, annotationSubType);\n            }\n            // eslint-disable-next-line max-len\n            var commentTextBox = createElement('div', { id: this.pdfViewer.element.id + '_commenttextbox', className: 'e-pv-comment-textbox' });\n            // eslint-disable-next-line\n            var editObj_1 = new InPlaceEditor({\n                mode: 'Inline',\n                type: 'Text',\n                model: { placeholder: this.pdfViewer.localeObj.getConstant('Add a comment') + '..' },\n                emptyText: '',\n                editableOn: 'EditIconClick',\n                saveButton: {\n                    content: this.pdfViewer.localeObj.getConstant('Post'),\n                    cssClass: 'e-outline',\n                    disabled: true\n                },\n                cancelButton: {\n                    content: this.pdfViewer.localeObj.getConstant('Cancel'),\n                    cssClass: 'e-outline'\n                },\n                submitOnEnter: true\n            });\n            if (data && (!isNullOrUndefined(data.Note) || !isNullOrUndefined(data.Text))) {\n                editObj_1.created = function () {\n                    setTimeout(function () {\n                        editObj_1.element.querySelector('.e-editable-value').innerText = !isNullOrUndefined(data.Note) ? data.Note : !isNullOrUndefined(data.Text) ? data.Text : '';\n                    });\n                };\n                editObj_1.beginEdit = function () {\n                    editObj_1.value = editObj_1.valueEle.innerText;\n                };\n            }\n            editObj_1.appendTo(commentTextBox);\n            // eslint-disable-next-line\n            var textBox = document.querySelectorAll('.e-editable-inline');\n            for (var j = 0; j < textBox.length; j++) {\n                textBox[j].style.display = 'none';\n            }\n            if (!data) {\n                editObj_1.enableEditMode = true;\n            }\n            // eslint-disable-next-line\n            commentTextBox.addEventListener('keydown', function (event) {\n                if (editObj_1.element.querySelector('.e-btn-save')) {\n                    if (event.srcElement.value !== '') {\n                        editObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n                    }\n                    else {\n                        editObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n                    }\n                }\n            });\n            editObj_1.actionSuccess = this.createCommentDiv.bind(this, editObj_1);\n            commentDiv.appendChild(commentTextBox);\n            if (data) {\n                editObj_1.value = !isNullOrUndefined(data.Note) ? data.Note : !isNullOrUndefined(data.Text) ? data.Text : '';\n                var isCommentLocked = this.checkIslockProperty(data);\n                if (isCommentLocked && data.Comments == null) {\n                    this.createCommentDiv(this.commentsContainer);\n                }\n                if (data.Name === 'freeText') {\n                    editObj_1.value = data.MarkupText;\n                }\n                if (data.State) {\n                    // eslint-disable-next-line max-len\n                    var statusContainer = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                    // eslint-disable-next-line max-len\n                    var statusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                    var statusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon' });\n                    statusDiv.appendChild(statusSpan);\n                    statusContainer.appendChild(statusDiv);\n                    commentDiv.appendChild(statusContainer);\n                    this.updateStatusContainer(data.State, statusSpan, statusDiv, statusContainer);\n                }\n                if (data.Comments) {\n                    for (var j = 0; j < data.Comments.length; j++) {\n                        this.renderComments(data.Comments[j], this.commentsContainer);\n                    }\n                    if (data.Note !== ' ' && data.Note !== '' && data.Note !== null) {\n                        this.createCommentDiv(this.commentsContainer);\n                    }\n                }\n            }\n            this.isNewcommentAdded = true;\n            commentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n            commentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n            commentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n            commentDiv.addEventListener('mouseout', this.commentDivMouseLeave.bind(this));\n            commentDiv.addEventListener('focusout', this.commentDivMouseLeave.bind(this));\n            commentTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n            commentTextBox.addEventListener('focusin', this.commentDivFocus.bind(this));\n            return (this.commentsContainer.id);\n        }\n        return '';\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentDivFocus = function (args) {\n        // eslint-disable-next-line\n        var proxy = this;\n        var pageNumber = this.pdfViewerBase.currentPageNumber;\n        setTimeout(function () {\n            proxy.updateScrollPosition(pageNumber);\n        }, 500);\n    };\n    StickyNotesAnnotation.prototype.updateScrollPosition = function (pageNumber) {\n        var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n        if (accordionDiv && this.isNewcommentAdded) {\n            var commentHeight = 0;\n            // eslint-disable-next-line\n            var textBox = document.querySelectorAll('.e-editable-inline');\n            if (textBox[0]) {\n                commentHeight = textBox[0].getBoundingClientRect().height;\n            }\n            var scrollValue = accordionDiv.offsetTop + accordionDiv.clientTop + commentHeight;\n            if (this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop < scrollValue) {\n                this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n            }\n            this.isNewcommentAdded = false;\n        }\n    };\n    StickyNotesAnnotation.prototype.updateCommentsScrollTop = function (isCommentsAdded) {\n        // eslint-disable-next-line max-len\n        var accordionDiv = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewerBase.currentPageNumber);\n        // eslint-disable-next-line\n        var commentsContainer = document.querySelector('.e-pv-comments-border');\n        var commentsHeight = 0;\n        if (accordionDiv && commentsContainer) {\n            commentsHeight = commentsContainer.getBoundingClientRect().height;\n            var scrollValue = void 0;\n            if (isCommentsAdded) {\n                scrollValue = accordionDiv.offsetTop + commentsContainer.offsetTop + (commentsHeight / 4);\n            }\n            else {\n                scrollValue = accordionDiv.offsetTop + commentsContainer.offsetTop - 70;\n            }\n            this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop = scrollValue;\n        }\n    };\n    /**\n     * @param args\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createCommentDiv = function (args) {\n        var _this = this;\n        var commentsContainer;\n        var titleContainer;\n        // eslint-disable-next-line\n        var newCommentDiv = createElement('div', { id: this.pdfViewer.element.id + '_newcommentdiv' + this.commentsCount, className: 'e-pv-new-comments-div' });\n        if (args.localName) {\n            commentsContainer = args;\n        }\n        else {\n            commentsContainer = args.valueEle.parentElement.parentElement.parentElement.parentElement;\n            titleContainer = args.valueEle.parentElement.parentElement.previousSibling.childNodes[1];\n        }\n        // eslint-disable-next-line\n        var commentObj = new InPlaceEditor({\n            mode: 'Inline',\n            type: 'Text',\n            value: '',\n            editableOn: 'Click',\n            model: { placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..' },\n            emptyText: this.pdfViewer.localeObj.getConstant('Add a reply'),\n            saveButton: {\n                content: this.pdfViewer.localeObj.getConstant('Post'),\n                cssClass: 'e-outline',\n                disabled: true\n            },\n            cancelButton: {\n                content: this.pdfViewer.localeObj.getConstant('Cancel'),\n                cssClass: 'e-outline'\n            },\n            submitOnEnter: true\n        });\n        commentObj.appendTo(newCommentDiv);\n        newCommentDiv.lastChild.firstChild.click();\n        // eslint-disable-next-line\n        newCommentDiv.addEventListener('keydown', function (event) {\n            if (commentObj.element.querySelector('.e-btn-save')) {\n                if (event.srcElement.value !== '') {\n                    commentObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n                }\n                else {\n                    commentObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n                    commentObj.enableEditMode = true;\n                }\n            }\n        });\n        if (args.valueEle) {\n            if (args.value != null && args.value !== '' && args.value !== ' ') {\n                // eslint-disable-next-line max-len\n                if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                    this.modifyTextProperty(args.value, args.prevValue, args.valueEle.parentNode.parentNode.parentNode.parentNode.id);\n                }\n                else {\n                    try {\n                        this.modifyTextProperty(args.value, args.prevValue, args.valueEle.parentNode.parentNode.parentNode.parentNode.id);\n                    }\n                    catch (error) {\n                        this.modifyTextProperty(args.value, args.prevValue);\n                    }\n                }\n                this.updateModifiedDate(titleContainer);\n            }\n            if (args.valueEle.parentElement.parentElement.parentElement.parentElement.childElementCount === 1) {\n                if (args.value != null && args.value !== '' && args.value !== ' ') {\n                    commentsContainer.appendChild(newCommentDiv);\n                    setTimeout(function () {\n                        _this.updateCommentsScrollTop(true);\n                    }, 50);\n                }\n            }\n        }\n        else {\n            commentsContainer.appendChild(newCommentDiv);\n            setTimeout(function () {\n                _this.updateCommentsScrollTop(true);\n            }, 50);\n        }\n        commentObj.actionSuccess = this.saveCommentDiv.bind(this, commentObj);\n    };\n    /**\n     * @param args\n     * @param comment\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.saveCommentDiv = function (args, comment) {\n        var commentsContainer;\n        var annotationAuthor;\n        // eslint-disable-next-line\n        var lastElement;\n        var commentValue;\n        if (comment.name && args.value !== '') {\n            commentsContainer = args.valueEle.parentElement.parentElement.parentElement;\n            lastElement = args.valueEle.parentElement.parentElement;\n            commentValue = args.value;\n        }\n        else {\n            commentsContainer = args;\n            lastElement = commentsContainer.lastChild;\n            commentValue = comment;\n        }\n        if (commentsContainer && lastElement) {\n            commentsContainer.removeChild(lastElement);\n            var replyTextBox = createElement('div', { id: this.pdfViewer.element.id + '_replytextbox' });\n            this.commentsreplyCount = this.commentsreplyCount + 1;\n            // eslint-disable-next-line\n            var replyCommentDiv = createElement('div', { id: this.pdfViewer.element.id + 'replyDiv' + this.commentsreplyCount, className: 'e-pv-reply-div' });\n            replyCommentDiv.id = this.pdfViewer.annotation.createGUID();\n            annotationAuthor = this.getAuthorName(this.pdfViewer.selectedItems.annotations[0], commentsContainer);\n            this.createReplyDivTitleContainer(replyCommentDiv, null, annotationAuthor);\n            replyCommentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n            replyCommentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n            replyCommentDiv.addEventListener('click', this.commentDivOnSelect.bind(this));\n            replyTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n            replyCommentDiv.style.border = 1 + 'px';\n            replyCommentDiv.style.borderColor = 'black';\n            replyCommentDiv.style.zIndex = 1002;\n            // eslint-disable-next-line\n            var saveObj_1 = new InPlaceEditor({\n                mode: 'Inline',\n                type: 'Text',\n                emptyText: '',\n                editableOn: 'EditIconClick',\n                model: { placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..' },\n                value: commentValue,\n                saveButton: {\n                    content: this.pdfViewer.localeObj.getConstant('Post'),\n                    cssClass: 'e-outline'\n                },\n                cancelButton: {\n                    content: this.pdfViewer.localeObj.getConstant('Cancel'),\n                    cssClass: 'e-outline'\n                }\n            });\n            saveObj_1.created = function () {\n                setTimeout(function () {\n                    saveObj_1.element.querySelector('.e-editable-value').innerText = commentValue;\n                });\n            };\n            saveObj_1.beginEdit = function () {\n                saveObj_1.value = saveObj_1.valueEle.innerText;\n            };\n            saveObj_1.appendTo(replyTextBox);\n            saveObj_1.actionSuccess = this.modifyProperty.bind(this, saveObj_1);\n            replyCommentDiv.appendChild(replyTextBox);\n            replyCommentDiv.style.paddingLeft = 24 + 'px';\n            commentsContainer.appendChild(replyCommentDiv);\n            // eslint-disable-next-line\n            replyTextBox.addEventListener('keydown', function (event) {\n                if (saveObj_1.element.querySelector('.e-btn-save')) {\n                    if (event.srcElement.value !== '') {\n                        saveObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n                    }\n                    else {\n                        saveObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n                    }\n                }\n            });\n            replyCommentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n            replyCommentDiv.addEventListener('dblclick', this.commentsDivDoubleClickEvent.bind(this));\n            this.createCommentDiv(replyCommentDiv.parentElement);\n            this.modifyCommentsProperty(commentValue, replyCommentDiv.id, commentsContainer.id);\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.renderComments = function (data, commentDiv, undoRedoAction, id, isCommentAction) {\n        var annotationAuthor;\n        var replyTextBox = createElement('div', { id: this.pdfViewer.element.id + '_replytextbox' });\n        this.commentsreplyCount = this.commentsreplyCount + 1;\n        var replyDiv = createElement('div', { id: 'replyDiv' + this.commentsreplyCount, className: 'e-pv-reply-div' });\n        if (undoRedoAction) {\n            replyDiv.id = data.annotName;\n            annotationAuthor = data.author;\n        }\n        else {\n            replyDiv.id = data.AnnotName;\n            annotationAuthor = data.Author;\n        }\n        replyDiv.style.border = 1 + 'px';\n        replyDiv.style.borderColor = 'black';\n        if (!annotationAuthor) {\n            annotationAuthor = commentDiv.getAttribute('author');\n        }\n        if (undoRedoAction) {\n            if (data.modifiedDate !== undefined) {\n                this.createReplyDivTitleContainer(replyDiv, data.modifiedDate, annotationAuthor);\n            }\n            else {\n                this.createReplyDivTitleContainer(replyDiv, null, annotationAuthor);\n            }\n        }\n        else {\n            this.createReplyDivTitleContainer(replyDiv, data.ModifiedDate, annotationAuthor);\n        }\n        replyDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n        replyDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n        replyDiv.addEventListener('click', this.commentDivOnSelect.bind(this));\n        replyTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n        // eslint-disable-next-line\n        var saveObj = new InPlaceEditor({\n            mode: 'Inline',\n            type: 'Text',\n            emptyText: '',\n            editableOn: 'EditIconClick',\n            model: { placeholder: this.pdfViewer.localeObj.getConstant('Add a reply') + '..' },\n            value: '',\n            saveButton: {\n                content: this.pdfViewer.localeObj.getConstant('Post'),\n                cssClass: 'e-outline'\n            },\n            cancelButton: {\n                content: this.pdfViewer.localeObj.getConstant('Cancel'),\n                cssClass: 'e-outline'\n            }\n        });\n        if (undoRedoAction) {\n            saveObj.value = data.note;\n        }\n        else {\n            saveObj.value = data.Note;\n        }\n        saveObj.created = function () {\n            setTimeout(function () {\n                saveObj.element.querySelector('.e-editable-value').innerText = undoRedoAction ? data ? data.note : '' : data ? data.Note : '';\n            });\n        };\n        saveObj.beginEdit = function () {\n            saveObj.value = saveObj.valueEle.innerText;\n        };\n        saveObj.appendTo(replyTextBox);\n        replyDiv.appendChild(replyTextBox);\n        if (undoRedoAction) {\n            data.State = data.state;\n        }\n        if (data.State) {\n            // eslint-disable-next-line max-len\n            var statusContainer = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n            // eslint-disable-next-line max-len\n            var statusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n            var statusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon' });\n            statusDiv.appendChild(statusSpan);\n            statusContainer.appendChild(statusDiv);\n            replyDiv.appendChild(statusContainer);\n            this.updateStatusContainer(data.State, statusSpan, statusDiv, statusContainer);\n        }\n        replyDiv.style.paddingLeft = 24 + 'px';\n        // eslint-disable-next-line\n        replyTextBox.addEventListener('keydown', function (event) {\n            if (saveObj.element.querySelector('.e-btn-save')) {\n                if (event.srcElement.value !== '') {\n                    saveObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n                }\n                else {\n                    saveObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n                }\n            }\n        });\n        if (undoRedoAction) {\n            if (isCommentAction) {\n                commentDiv.appendChild(replyDiv);\n            }\n            else {\n                // eslint-disable-next-line\n                var commentsDiv = document.getElementById(id);\n                if (data.position) {\n                    commentsDiv.insertBefore(replyDiv, commentsDiv.childNodes[data.position]);\n                }\n                else {\n                    // eslint-disable-next-line\n                    if (commentsDiv) {\n                        if (commentsDiv.childElementCount > 1) {\n                            commentsDiv.insertBefore(replyDiv, commentsDiv.childNodes[commentsDiv.childElementCount - 1]);\n                        }\n                        else {\n                            commentDiv.appendChild(replyDiv);\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            commentDiv.appendChild(replyDiv);\n        }\n        replyDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n        replyDiv.addEventListener('dblclick', this.commentsDivDoubleClickEvent.bind(this));\n        saveObj.actionSuccess = this.modifyProperty.bind(this, saveObj);\n    };\n    /**\n     * @param data\n     * @param pageIndex\n     * @param isCopy\n     * @param data\n     * @param pageIndex\n     * @param isCopy\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createCommentsContainer = function (data, pageIndex, isCopy) {\n        // eslint-disable-next-line\n        var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageIndex);\n        if (!accordionContentContainer) {\n            // eslint-disable-next-line max-len\n            var accordionPageContainer = document.getElementById(this.pdfViewer.element.id + '_accordionPageContainer' + pageIndex);\n            if (accordionPageContainer) {\n                accordionPageContainer.parentElement.removeChild(accordionPageContainer);\n            }\n            accordionContentContainer = this.createPageAccordion(pageIndex);\n            if (accordionContentContainer) {\n                accordionContentContainer.ej2_instances[0].expandItem(true);\n            }\n        }\n        var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordioncontent' + pageIndex);\n        // eslint-disable-next-line max-len\n        this.commentsContainer = createElement('div', { id: this.pdfViewer.element.id + 'commentscontainer' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comments-container' });\n        this.commentsContainer.accessKey = pageIndex.toString();\n        if (data) {\n            this.commentsContainer.id = data.annotName;\n        }\n        this.commentsContainer.addEventListener('mousedown', this.commentsAnnotationSelect.bind(this));\n        // eslint-disable-next-line max-len\n        var commentDiv = createElement('div', { id: this.pdfViewer.element.id + '_commentdiv' + pageIndex + '_' + this.commentsCount, className: 'e-pv-comments-div' });\n        this.commentsCount = this.commentsCount + 1;\n        this.commentsContainer.appendChild(commentDiv);\n        this.updateCommentPanelScrollTop(pageIndex);\n        if (data && accordionContent) {\n            if (data.position || data.position === 0) {\n                accordionContent.insertBefore(this.commentsContainer, accordionContent.children[data.position]);\n            }\n            else {\n                accordionContent.appendChild(this.commentsContainer);\n            }\n        }\n        if (data && accordionContent) {\n            if (data.indent) {\n                this.commentsContainer.setAttribute('name', 'shape_measure');\n                this.createTitleContainer(commentDiv, 'shape_measure', data.subject, data.modifiedDate, data.author);\n            }\n            else if (data.shapeAnnotationType === 'sticky' || data.shapeAnnotationType === 'stamp') {\n                // eslint-disable-next-line max-len\n                var annotType = this.createTitleContainer(commentDiv, data.shapeAnnotationType, null, data.modifiedDate, data.author);\n                this.commentsContainer.setAttribute('name', annotType);\n                if (annotType === 'sticky') {\n                    if (!isCopy) {\n                        this.addStickyNotesAnnotations((pageIndex - 1), data);\n                    }\n                }\n            }\n            else if (data.shapeAnnotationType === 'textMarkup') {\n                this.commentsContainer.setAttribute('name', 'textMarkup');\n                this.createTitleContainer(commentDiv, 'textMarkup', data.subject, data.modifiedDate, data.author);\n            }\n            else if (data.shapeAnnotationType === 'FreeText') {\n                data.note = data.dynamicText;\n                this.commentsContainer.setAttribute('name', 'freetext');\n                this.createTitleContainer(commentDiv, 'freeText', data.subject, data.modifiedDate);\n            }\n            else if (data.shapeAnnotationType === 'Ink') {\n                data.note = data.dynamicText;\n                this.commentsContainer.setAttribute('name', 'ink');\n                this.createTitleContainer(commentDiv, 'ink', data.subject, data.modifiedDate);\n            }\n            else {\n                this.commentsContainer.setAttribute('name', 'shape');\n                if (data.shapeAnnotationType === 'Line') {\n                    this.createTitleContainer(commentDiv, 'shape', data.subject, data.modifiedDate, data.author);\n                }\n                else {\n                    this.createTitleContainer(commentDiv, 'shape', data.shapeAnnotationType, data.modifiedDate, data.author);\n                }\n            }\n        }\n        // eslint-disable-next-line max-len\n        var commentTextBox = createElement('div', { id: this.pdfViewer.element.id + '_commenttextbox', className: 'e-pv-comment-textbox' });\n        // eslint-disable-next-line\n        var editObj = new InPlaceEditor({\n            mode: 'Inline',\n            type: 'Text',\n            model: { placeholder: this.pdfViewer.localeObj.getConstant('Add a comment') + '..' },\n            emptyText: '',\n            editableOn: 'EditIconClick',\n            saveButton: {\n                content: this.pdfViewer.localeObj.getConstant('Post'),\n                cssClass: 'e-outline',\n                disabled: true\n            },\n            cancelButton: {\n                content: this.pdfViewer.localeObj.getConstant('Cancel'),\n                cssClass: 'e-outline'\n            },\n            submitOnEnter: true\n        });\n        editObj.appendTo(commentTextBox);\n        // eslint-disable-next-line\n        var textBox = document.querySelectorAll('.e-editable-inline');\n        for (var j = 0; j < textBox.length; j++) {\n            textBox[j].style.display = 'none';\n        }\n        // eslint-disable-next-line\n        commentTextBox.addEventListener('keydown', function (event) {\n            if (editObj.element.querySelector('.e-btn-save')) {\n                if (event.srcElement.value !== '') {\n                    editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = false;\n                }\n                else {\n                    editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled = true;\n                }\n            }\n        });\n        editObj.actionSuccess = this.createCommentDiv.bind(this, editObj);\n        commentDiv.appendChild(commentTextBox);\n        if (data) {\n            editObj.value = data.note;\n            if (data.state) {\n                // eslint-disable-next-line max-len\n                var statusContainer = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                // eslint-disable-next-line max-len\n                var statusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                var statusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon' });\n                statusDiv.appendChild(statusSpan);\n                statusContainer.appendChild(statusDiv);\n                commentDiv.appendChild(statusContainer);\n                this.updateStatusContainer(data.state, statusSpan, statusDiv, statusContainer);\n            }\n            if (data.comments) {\n                for (var j = 0; j < data.comments.length; j++) {\n                    this.renderComments(data.comments[j], this.commentsContainer, true, null, true);\n                }\n                if (data.comments.length > 0) {\n                    this.createCommentDiv(this.commentsContainer);\n                }\n            }\n        }\n        commentDiv.addEventListener('click', this.commentsDivClickEvent.bind(this));\n        commentDiv.addEventListener('mouseover', this.commentDivMouseOver.bind(this));\n        commentDiv.addEventListener('mouseleave', this.commentDivMouseLeave.bind(this));\n        commentDiv.addEventListener('mouseout', this.commentDivMouseLeave.bind(this));\n        commentDiv.addEventListener('focusout', this.commentDivMouseLeave.bind(this));\n        commentTextBox.addEventListener('dblclick', this.openEditorElement.bind(this));\n        return (this.commentsContainer.id);\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.modifyProperty = function (args) {\n        var commentElement = args.element.parentElement.id;\n        var parentElement = args.element.parentElement.parentElement.id;\n        var titleElement = args.element.previousSibling.firstChild;\n        this.updateModifiedDate(titleElement);\n        this.modifyCommentsProperty(args.value, commentElement, parentElement, args.prevValue);\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createTitleContainer = function (commentsDivElement, type, subType, modifiedDate, author, note) {\n        var annotationType = this.getAnnotationType(type);\n        // eslint-disable-next-line max-len\n        var commentTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_commentTitleConatiner', className: 'e-pv-comment-title-container' });\n        // eslint-disable-next-line max-len\n        var commentTypeSpan = createElement('span', { id: this.pdfViewer.element.id + '_commenttype' + '_icon' });\n        commentTypeSpan.style.opacity = '0.6';\n        this.updateCommentIcon(commentTypeSpan, annotationType, subType);\n        var annotationAuthor;\n        if (!author) {\n            annotationAuthor = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, subType);\n        }\n        else {\n            annotationAuthor = author;\n        }\n        commentTypeSpan.style.padding = 8 + 'px';\n        commentTypeSpan.style.cssFloat = 'left';\n        commentTitleContainer.appendChild(commentTypeSpan);\n        // eslint-disable-next-line max-len\n        var commentsTitle = createElement('div', { id: this.pdfViewer.element.id + '_commentTitle', className: 'e-pv-comment-title' });\n        if (!modifiedDate) {\n            commentsTitle.textContent = annotationAuthor + ' - ' + this.setModifiedDate();\n        }\n        else {\n            commentsTitle.textContent = annotationAuthor + ' - ' + this.setExistingAnnotationModifiedDate(modifiedDate);\n        }\n        commentTitleContainer.appendChild(commentsTitle);\n        // eslint-disable-next-line max-len\n        var moreOptionsButton = createElement('button', { id: this.pdfViewer.element.id + '_more-options', className: 'e-pv-more-options-button e-btn', attrs: { 'tabindex': '-1' } });\n        moreOptionsButton.style.visibility = 'hidden';\n        moreOptionsButton.style.zIndex = '1001';\n        moreOptionsButton.setAttribute('type', 'button');\n        // eslint-disable-next-line max-len\n        var moreOptionsButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_more-options_icon', className: 'e-pv-more-icon e-pv-icon' });\n        moreOptionsButton.appendChild(moreOptionsButtonSpan);\n        moreOptionsButtonSpan.style.opacity = '0.87';\n        commentTitleContainer.appendChild(moreOptionsButton);\n        commentsDivElement.appendChild(commentTitleContainer);\n        // eslint-disable-next-line\n        var commentsContainer = commentsDivElement.parentElement;\n        if (commentsContainer) {\n            var author_1 = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, subType);\n            commentsContainer.setAttribute('author', author_1);\n        }\n        if (!this.isCreateContextMenu) {\n            this.createCommentContextMenu();\n        }\n        this.isCreateContextMenu = true;\n        commentTitleContainer.addEventListener('dblclick', this.openTextEditor.bind(this));\n        moreOptionsButton.addEventListener('mouseup', this.moreOptionsClick.bind(this));\n        return annotationType;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.createReplyDivTitleContainer = function (commentsDivElement, modifiedDate, annotationAuthor) {\n        // eslint-disable-next-line max-len\n        var replyTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_replyTitleConatiner', className: 'e-pv-reply-title-container' });\n        // eslint-disable-next-line max-len\n        var replyTitle = createElement('div', { id: this.pdfViewer.element.id + '_replyTitle', className: 'e-pv-reply-title' });\n        if (!modifiedDate) {\n            replyTitle.textContent = annotationAuthor + ' - ' + this.setModifiedDate();\n        }\n        else {\n            replyTitle.textContent = annotationAuthor + ' - ' + this.setExistingAnnotationModifiedDate(modifiedDate);\n        }\n        replyTitleContainer.appendChild(replyTitle);\n        // eslint-disable-next-line max-len\n        var moreButton = createElement('button', { id: this.pdfViewer.element.id + '_more-options', className: 'e-pv-more-options-button e-btn', attrs: { 'tabindex': '-1' } });\n        moreButton.style.visibility = 'hidden';\n        moreButton.style.zIndex = '1001';\n        moreButton.setAttribute('type', 'button');\n        // eslint-disable-next-line max-len\n        var moreButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_more-options_icon', className: 'e-pv-more-icon e-pv-icon' });\n        moreButton.appendChild(moreButtonSpan);\n        moreButtonSpan.style.opacity = '0.87';\n        replyTitleContainer.appendChild(moreButton);\n        commentsDivElement.appendChild(replyTitleContainer);\n        replyTitleContainer.addEventListener('dblclick', this.openTextEditor.bind(this));\n        moreButton.addEventListener('mouseup', this.moreOptionsClick.bind(this));\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateCommentIcon = function (commentSpan, annotationType, annotationSubType) {\n        if (annotationType === 'sticky') {\n            commentSpan.className = 'e-pv-comment-icon e-pv-icon';\n        }\n        else if (annotationType === 'stamp') {\n            commentSpan.className = 'e-pv-stamp-icon e-pv-icon';\n        }\n        else if (annotationType === 'shape') {\n            if (annotationSubType === 'Line') {\n                commentSpan.className = 'e-pv-shape-line-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'LineWidthArrowHead' || annotationSubType === 'Arrow') {\n                commentSpan.className = 'e-pv-shape-arrow-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Circle' || annotationSubType === 'Ellipse' || annotationSubType === 'Oval') {\n                commentSpan.className = 'e-pv-shape-circle-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Rectangle' || annotationSubType === 'Square') {\n                commentSpan.className = 'e-pv-shape-rectangle-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Polygon') {\n                commentSpan.className = 'e-pv-shape-pentagon-icon e-pv-icon';\n            }\n            else {\n                commentSpan.className = 'e-pv-annotation-shape-icon e-pv-icon';\n            }\n        }\n        else if (annotationType === 'measure') {\n            if (annotationSubType === 'Distance' || annotationSubType === 'Distance calculation') {\n                commentSpan.className = 'e-pv-calibrate-distance-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Perimeter' || annotationSubType === 'Perimeter calculation') {\n                commentSpan.className = 'e-pv-calibrate-perimeter-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Radius' || annotationSubType === 'Radius calculation') {\n                commentSpan.className = 'e-pv-calibrate-radius-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Area' || annotationSubType === 'Area calculation') {\n                commentSpan.className = 'e-pv-calibrate-area-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Volume' || annotationSubType === 'Volume calculation') {\n                commentSpan.className = 'e-pv-calibrate-volume-icon e-pv-icon';\n            }\n            else {\n                commentSpan.className = 'e-pv-annotation-calibrate-icon e-pv-icon';\n            }\n        }\n        else if (annotationType === 'textMarkup') {\n            if (annotationSubType === 'Highlight') {\n                commentSpan.className = 'e-pv-highlight-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Underline') {\n                commentSpan.className = 'e-pv-underline-icon e-pv-icon';\n            }\n            else if (annotationSubType === 'Strikethrough') {\n                commentSpan.className = 'e-pv-strikethrough-icon e-pv-icon';\n            }\n            else {\n                commentSpan.className = 'e-pv-annotation-icon e-pv-icon';\n            }\n        }\n        else if (annotationType === 'freeText') {\n            commentSpan.className = 'e-pv-freetext-icon e-pv-icon';\n        }\n        else if (annotationType === 'ink' || annotationSubType === 'Ink') {\n            commentSpan.className = 'e-pv-inkannotation-icon e-pv-icon';\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateStatusContainer = function (state, statusSpan, statusDiv, statusContainer) {\n        if (state === 'Accepted') {\n            statusDiv.style.backgroundColor = 'rgb(24,169,85)';\n            statusSpan.className = 'e-pv-accepted-icon';\n        }\n        else if (state === 'Completed') {\n            statusDiv.style.backgroundColor = 'rgb(0,122,255)';\n            statusSpan.className = 'e-pv-completed-icon';\n        }\n        else if (state === 'Cancelled') {\n            statusDiv.style.backgroundColor = 'rgb(245,103,0)';\n            statusSpan.className = 'e-pv-cancelled-icon';\n        }\n        else if (state === 'Rejected') {\n            statusDiv.style.backgroundColor = 'rgb(255,59,48)';\n            statusSpan.className = 'e-pv-rejected-icon';\n        }\n        else {\n            statusSpan.className = '';\n            statusContainer.parentElement.removeChild(statusContainer);\n        }\n    };\n    /**\n     * @param removeDiv\n     * @private\n     */\n    StickyNotesAnnotation.prototype.updateAccordionContainer = function (removeDiv) {\n        // eslint-disable-next-line\n        var pageNumber = parseInt(removeDiv.accessKey);\n        var accordionContent = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n        if (accordionContent) {\n            accordionContent.parentElement.removeChild(accordionContent);\n        }\n        var accordionContentContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n        if (accordionContentContainer) {\n            if (accordionContentContainer.childElementCount === 0) {\n                accordionContentContainer.style.display = 'none';\n                if (document.getElementById(this.pdfViewer.element.id + '_commentsPanelText')) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], false);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], false);\n                    document.getElementById(this.pdfViewer.element.id + '_commentsPanelText').style.display = 'block';\n                    this.updateCommentPanelTextTop();\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.createCommentContextMenu = function () {\n        // eslint-disable-next-line max-len\n        this.commentContextMenu = [\n            { text: this.pdfViewer.localeObj.getConstant('Edit') },\n            { text: this.pdfViewer.localeObj.getConstant('Delete Context') },\n            {\n                // eslint-disable-next-line max-len\n                text: this.pdfViewer.localeObj.getConstant('Set Status'), items: [{ text: this.pdfViewer.localeObj.getConstant('None') }, { text: this.pdfViewer.localeObj.getConstant('Accepted') }, { text: this.pdfViewer.localeObj.getConstant('Cancelled') }, { text: this.pdfViewer.localeObj.getConstant('Completed') }, { text: this.pdfViewer.localeObj.getConstant('Rejected') }]\n            }\n        ];\n        var commentMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_comment_context_menu' });\n        this.pdfViewer.element.appendChild(commentMenuElement);\n        this.commentMenuObj = new Context({\n            target: '#' + this.pdfViewer.element.id + '_more-options', items: this.commentContextMenu,\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            select: this.commentMenuItemSelect.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.commentMenuObj.enableRtl = true;\n        }\n        this.commentMenuObj.appendTo(commentMenuElement);\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            this.commentMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.commentMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    StickyNotesAnnotation.prototype.contextMenuBeforeOpen = function (args) {\n        // eslint-disable-next-line\n        var contextActiveDiv;\n        // eslint-disable-next-line\n        var contextDiv = document.querySelectorAll('#' + this.pdfViewer.element.id + '_more-options');\n        if (contextDiv) {\n            for (var i = 0; i < contextDiv.length; i++) {\n                if (contextDiv[i].style.visibility === 'visible') {\n                    contextActiveDiv = contextDiv[i].parentElement.nextSibling;\n                }\n            }\n        }\n        var isCommentLocked = this.checkIslockProperty(contextActiveDiv);\n        if (isCommentLocked) {\n            this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Edit')], false);\n            this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], false);\n        }\n        else {\n            this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Edit')], true);\n            this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentMenuItemSelect = function (args) {\n        // eslint-disable-next-line\n        var contextActiveDiv;\n        // eslint-disable-next-line\n        var contextDiv = document.querySelectorAll('#' + this.pdfViewer.element.id + '_more-options');\n        if (contextDiv) {\n            for (var i = 0; i < contextDiv.length; i++) {\n                if (contextDiv[i].style.visibility === 'visible') {\n                    contextActiveDiv = contextDiv[i].parentElement.nextSibling;\n                }\n            }\n            if (args.item) {\n                switch (args.item.text) {\n                    case this.pdfViewer.localeObj.getConstant('Edit'):\n                        // eslint-disable-next-line\n                        var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n                        for (var i = 0; i < commentShow.length; i++) {\n                            commentShow[i].style.display = 'none';\n                        }\n                        contextActiveDiv.ej2_instances[0].enableEditMode = true;\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Delete Context'):\n                        if (contextActiveDiv.parentElement.parentElement.firstChild === contextActiveDiv.parentElement) {\n                            this.pdfViewer.annotationModule.deleteAnnotation();\n                        }\n                        else {\n                            // eslint-disable-next-line max-len\n                            this.modifyCommentDeleteProperty(contextActiveDiv.parentElement.parentElement, contextActiveDiv.parentElement);\n                        }\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Set Status'):\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Accepted'):\n                        if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n                            contextActiveDiv.parentElement.lastChild.remove();\n                        }\n                        // eslint-disable-next-line max-len\n                        var acceptedStatusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                        // eslint-disable-next-line max-len\n                        var statusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                        var statusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon', className: 'e-pv-accepted-icon' });\n                        statusDiv.style.backgroundColor = 'rgb(24,169,85)';\n                        statusDiv.appendChild(statusSpan);\n                        acceptedStatusDiv.appendChild(statusDiv);\n                        contextActiveDiv.parentElement.appendChild(acceptedStatusDiv);\n                        this.modifyStatusProperty('Accepted', contextActiveDiv.parentElement);\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Completed'):\n                        if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n                            contextActiveDiv.parentElement.lastChild.remove();\n                        }\n                        // eslint-disable-next-line max-len\n                        var completedStatusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                        // eslint-disable-next-line max-len\n                        var statusElement = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                        // eslint-disable-next-line max-len\n                        var statusOptionSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon', className: 'e-pv-completed-icon' });\n                        statusElement.style.backgroundColor = 'rgb(0,122,255)';\n                        statusElement.appendChild(statusOptionSpan);\n                        completedStatusDiv.appendChild(statusElement);\n                        contextActiveDiv.parentElement.appendChild(completedStatusDiv);\n                        this.modifyStatusProperty('Completed', contextActiveDiv.parentElement);\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Cancelled'):\n                        if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n                            contextActiveDiv.parentElement.lastChild.remove();\n                        }\n                        // eslint-disable-next-line max-len\n                        var cancelStatusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                        // eslint-disable-next-line max-len\n                        var cancelStatusElement = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                        // eslint-disable-next-line max-len\n                        var cancelStatusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon', className: 'e-pv-cancelled-icon' });\n                        cancelStatusElement.style.backgroundColor = 'rgb(245,103,0)';\n                        cancelStatusElement.appendChild(cancelStatusSpan);\n                        cancelStatusDiv.appendChild(cancelStatusElement);\n                        contextActiveDiv.parentElement.appendChild(cancelStatusDiv);\n                        this.modifyStatusProperty('Cancelled', contextActiveDiv.parentElement);\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('Rejected'):\n                        if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n                            contextActiveDiv.parentElement.lastChild.remove();\n                        }\n                        // eslint-disable-next-line max-len\n                        var rejectedStatusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                        // eslint-disable-next-line max-len\n                        var rejectedStatusElement = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                        // eslint-disable-next-line max-len\n                        var rejectedStatusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon', className: 'e-pv-rejected-icon' });\n                        rejectedStatusElement.style.backgroundColor = 'rgb(255,59,48)';\n                        rejectedStatusElement.appendChild(rejectedStatusSpan);\n                        rejectedStatusDiv.appendChild(rejectedStatusElement);\n                        contextActiveDiv.parentElement.appendChild(rejectedStatusDiv);\n                        this.modifyStatusProperty('Rejected', contextActiveDiv.parentElement);\n                        break;\n                    case this.pdfViewer.localeObj.getConstant('None'):\n                        if (contextActiveDiv.parentElement.lastChild.id === this.pdfViewer.element.id + 'status_container') {\n                            contextActiveDiv.parentElement.lastChild.remove();\n                        }\n                        this.modifyStatusProperty('None', contextActiveDiv.parentElement);\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.moreOptionsClick = function (event, isMoreOptionClick) {\n        if (document.getElementById(this.pdfViewer.element.id + '_comment_context_menu').style.display !== 'block') {\n            if (event.currentTarget.className === 'e-pv-more-options-button e-btn') {\n                event.currentTarget.parentElement.nextSibling.lastChild.firstChild.click();\n            }\n            this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj);\n            this.commentMenuObj.open(event.clientY, event.clientX, event.currentTarget);\n        }\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule) {\n            // eslint-disable-next-line\n            var currentPageNumber = parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n            this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.openTextEditor = function (event) {\n        // eslint-disable-next-line\n        var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n        for (var i = 0; i < commentShow.length; i++) {\n            commentShow[i].style.display = 'none';\n        }\n        var isCommentLocked = this.checkIslockProperty(event.currentTarget.nextSibling);\n        if (isCommentLocked) {\n            event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = false;\n        }\n        else if (event.currentTarget.parentElement.parentElement) {\n            var isLocked = this.checkAnnotationSettings(event.currentTarget.parentElement.parentElement.id);\n            if (isLocked) {\n                // eslint-disable-next-line\n                var annotation = this.findAnnotationObject(event.currentTarget.parentElement.parentElement.id);\n                if (this.pdfViewer.annotationModule.checkAllowedInteractions('Select', annotation)) {\n                    isLocked = false;\n                }\n            }\n            if (!isLocked) {\n                event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = true;\n            }\n        }\n        else {\n            event.currentTarget.nextSibling.ej2_instances[0].enableEditMode = true;\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.checkIslockProperty = function (commentEvent) {\n        // eslint-disable-next-line\n        var annotCollection = this.pdfViewer.annotationCollection;\n        // eslint-disable-next-line\n        var annotation;\n        if (commentEvent.IsCommentLock) {\n            return true;\n        }\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            annotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        else if (this.pdfViewer.selectedItems.annotations[0]) {\n            annotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        for (var i = 0; i < annotCollection.length; i++) {\n            // eslint-disable-next-line max-len\n            var note = annotCollection[i].note ? annotCollection[i].note : annotCollection[i].notes;\n            if (annotCollection[i].isCommentLock === true && (commentEvent.textContent === note || annotCollection[i].dynamicText === commentEvent.textContent)) {\n                return true;\n            }\n            for (var j = 0; j < annotCollection[i].comments.length; j++) {\n                if (annotation && annotCollection[i].annotationId === annotation.annotName) {\n                    // eslint-disable-next-line max-len\n                    if (annotCollection[i].comments[j].isLock === true && commentEvent.textContent === annotCollection[i].comments[j].note) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.openEditorElement = function (event) {\n        // eslint-disable-next-line\n        var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n        for (var i = 0; i < commentShow.length; i++) {\n            commentShow[i].style.display = 'none';\n        }\n        var isCommentLocked = this.checkIslockProperty(event.currentTarget);\n        if (isCommentLocked) {\n            event.currentTarget.ej2_instances[0].enableEditMode = false;\n        }\n        else if (event.currentTarget.parentElement.parentElement) {\n            var isLocked = this.checkAnnotationSettings(event.currentTarget.parentElement.parentElement.id);\n            if (isLocked) {\n                // eslint-disable-next-line\n                var annotation = this.findAnnotationObject(event.currentTarget.parentElement.parentElement.id);\n                if (this.pdfViewer.annotationModule.checkAllowedInteractions('Select', annotation)) {\n                    isLocked = false;\n                }\n            }\n            if (!isLocked) {\n                if (this.pdfViewer.selectedItems.annotations[0].isReadonly) {\n                    event.currentTarget.ej2_instances[0].enableEditMode = false;\n                }\n                else {\n                    event.currentTarget.ej2_instances[0].enableEditMode = true;\n                }\n            }\n        }\n        else {\n            event.currentTarget.ej2_instances[0].enableEditMode = true;\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentsDivClickEvent = function (event) {\n        // eslint-disable-next-line\n        var annotation = this.findAnnotationObject(event.currentTarget.parentElement.id);\n        var isLocked = this.checkAnnotationSettings(event.currentTarget.parentElement.id);\n        if (isLocked) {\n            if (this.pdfViewer.annotationModule.checkAllowedInteractions('Select', annotation)) {\n                isLocked = false;\n            }\n        }\n        if (!isLocked) {\n            var isCommentsSelect = false;\n            if (event.clientX === 0 && event.clientY === 0) {\n                this.isSetAnnotationType = true;\n            }\n            else {\n                this.isSetAnnotationType = false;\n            }\n            if (event.target.className === 'e-pv-more-icon e-pv-icon') {\n                return null;\n            }\n            // eslint-disable-next-line\n            var x = document.querySelectorAll('#' + this.pdfViewer.element.id + '_more-options');\n            for (var i = 0; i < x.length; i++) {\n                x[i].style.visibility = 'hidden';\n            }\n            if (document.getElementById(this.pdfViewer.element.id + '_commantPanel').style.display === 'none') {\n                this.pdfViewer.annotationModule.showCommentsPanel();\n            }\n            if (event.currentTarget.parentElement.classList.contains('e-pv-comments-border')) {\n                isCommentsSelect = true;\n            }\n            event.currentTarget.firstChild.lastChild.style.visibility = 'visible';\n            // eslint-disable-next-line\n            var commentsContainer = document.querySelectorAll('.e-pv-comments-border');\n            if (commentsContainer) {\n                for (var j = 0; j < commentsContainer.length; j++) {\n                    commentsContainer[j].classList.remove('e-pv-comments-border');\n                }\n            }\n            event.currentTarget.parentElement.classList.add('e-pv-comments-border');\n            // eslint-disable-next-line\n            var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n            for (var i = 0; i < commentShow.length; i++) {\n                commentShow[i].style.display = 'none';\n            }\n            // eslint-disable-next-line\n            var editElement = event.currentTarget.parentElement.lastChild;\n            // eslint-disable-next-line\n            var commentsElement = event.currentTarget.parentElement;\n            if (editElement) {\n                editElement.style.display = 'block';\n                if (editElement.querySelector('.e-editable-inline')) {\n                    if (!this.isEditableElement) {\n                        editElement.querySelector('.e-editable-inline').style.display = 'block';\n                    }\n                    for (var i = 0; i < commentsElement.childElementCount; i++) {\n                        // eslint-disable-next-line\n                        var activeElement = commentsElement.childNodes[i];\n                        // eslint-disable-next-line\n                        var textElement = activeElement.querySelector('.e-editable-inline');\n                        if (textElement) {\n                            if (textElement.style.display === '') {\n                                editElement.style.display = 'none';\n                                editElement.querySelector('.e-editable-inline').style.display = 'none';\n                            }\n                        }\n                    }\n                }\n                if (this.isSetAnnotationType) {\n                    if (!isCommentsSelect) {\n                        this.updateCommentsScrollTop();\n                    }\n                }\n            }\n            if (event.currentTarget.parentElement.childElementCount === 1) {\n                if (!this.pdfViewer.enableShapeLabel) {\n                    event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n                }\n                else {\n                    var type = event.currentTarget.parentElement.getAttribute('name');\n                    if (this.isSetAnnotationType && type === 'shape') {\n                        event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = false;\n                    }\n                    else {\n                        event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n                    }\n                }\n            }\n            var editModule = void 0;\n            if (event && event.currentTarget && event.currentTarget.childNodes[1]) {\n                editModule = event.currentTarget.childNodes[1].ej2_instances[0];\n            }\n            if (event.currentTarget && event.currentTarget.id && editModule) {\n                // eslint-disable-next-line\n                if (annotation && annotation.isCommentLock) {\n                    editModule.enableEditMode = false;\n                    this.createCommentDiv(event.currentTarget);\n                }\n                this.pdfViewer.fireCommentSelect(event.currentTarget.id, event.currentTarget.childNodes[1].ej2_instances[0].value, annotation);\n            }\n            this.commentDivOnSelect(event);\n            event.preventDefault();\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentsDivDoubleClickEvent = function (event) {\n        // eslint-disable-next-line\n        var commentShow = document.querySelectorAll('.e-pv-new-comments-div');\n        for (var i = 0; i < commentShow.length; i++) {\n            commentShow[i].style.display = 'none';\n        }\n        var isCommentLocked = this.checkIslockProperty(event.currentTarget.children[1]);\n        if (isCommentLocked) {\n            if (event.currentTarget.childElementCount === 2) {\n                event.currentTarget.lastChild.ej2_instances[0].enableEditMode = false;\n            }\n            else {\n                event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = false;\n            }\n        }\n        else if (event.currentTarget) {\n            var isLocked = this.checkAnnotationSettings(event.currentTarget.parentElement.id);\n            if (!isLocked) {\n                if (event.currentTarget.childElementCount === 2) {\n                    event.currentTarget.lastChild.ej2_instances[0].enableEditMode = true;\n                }\n                else {\n                    event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode = true;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentDivOnSelect = function (event) {\n        // eslint-disable-next-line\n        var commentSelect = document.querySelectorAll('.e-pv-comments-select');\n        for (var z = 0; z < commentSelect.length; z++) {\n            commentSelect[z].classList.remove('e-pv-comments-select');\n        }\n        var activeElement = document.getElementById(event.currentTarget.id);\n        if (activeElement) {\n            activeElement.classList.remove('e-pv-comments-hover');\n            activeElement.classList.remove('e-pv-comments-leave');\n            activeElement.classList.add('e-pv-comments-select');\n            if (event.currentTarget.nextSibling) {\n                if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n                    var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n                    activeSiblingElement.classList.remove('e-pv-comments-hover');\n                    activeSiblingElement.classList.remove('e-pv-comments-leave');\n                    activeSiblingElement.classList.add('e-pv-comments-select');\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentDivMouseOver = function (event) {\n        var activeElement = document.getElementById(event.currentTarget.id);\n        if (activeElement) {\n            activeElement.classList.remove('e-pv-comments-select');\n            activeElement.classList.remove('e-pv-comments-leave');\n            activeElement.classList.add('e-pv-comments-hover');\n            if (event.currentTarget.nextSibling) {\n                if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n                    var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n                    activeSiblingElement.classList.remove('e-pv-comments-select');\n                    activeSiblingElement.classList.remove('e-pv-comments-leave');\n                    activeSiblingElement.classList.add('e-pv-comments-hover');\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentDivMouseLeave = function (event) {\n        var activeElement = document.getElementById(event.currentTarget.id);\n        if (activeElement) {\n            activeElement.classList.remove('e-pv-comments-hover');\n            activeElement.classList.remove('e-pv-comments-select');\n            activeElement.classList.add('e-pv-comments-leave');\n            if (event.currentTarget.nextSibling) {\n                if (event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')) {\n                    var activeSiblingElement = document.getElementById(event.currentTarget.nextSibling.id);\n                    activeSiblingElement.classList.remove('e-pv-comments-hover');\n                    activeSiblingElement.classList.remove('e-pv-comments-select');\n                    activeSiblingElement.classList.add('e-pv-comments-leave');\n                }\n            }\n        }\n    };\n    /**\n     * @param event\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.drawIcons = function (event) {\n        // eslint-disable-next-line\n        if (this.pdfViewerBase.isCommentIconAdded) {\n            var pageIndex = this.pdfViewer.annotation.getEventPageNumber(event);\n            var pageCurrentRect = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex).getBoundingClientRect();\n            var zoomValue = this.pdfViewerBase.getZoomFactor();\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((event.clientX - pageCurrentRect.left) / zoomValue, (event.clientY - pageCurrentRect.top) / zoomValue, 30, 30, pageIndex, null);\n            this.pdfViewerBase.isCommentIconAdded = false;\n            var commentsButton = document.getElementById(this.pdfViewer.element.id + '_comment');\n            if (isBlazor()) {\n                commentsButton = commentsButton.children[0];\n            }\n            if (commentsButton && commentsButton.classList.contains('e-pv-select')) {\n                commentsButton.classList.remove('e-pv-select');\n            }\n            else {\n                var commentsIcon = document.getElementById(this.pdfViewer.element.id + '_commentIcon');\n                if (commentsIcon) {\n                    this.pdfViewer.enableRtl ? commentsIcon.className = 'e-pv-comment-icon e-pv-icon e-icon-left e-right' : commentsIcon.className = 'e-pv-comment-icon e-pv-icon e-icon-left';\n                }\n            }\n        }\n    };\n    /**\n     * @param annotationType\n     * @param pageNumber\n     * @param annotationSubType\n     * @param annotationType\n     * @param pageNumber\n     * @param annotationSubType\n     * @param annotationType\n     * @param pageNumber\n     * @param annotationSubType\n     * @private\n     */\n    StickyNotesAnnotation.prototype.addComments = function (annotationType, pageNumber, annotationSubType) {\n        var commentsDivid;\n        // eslint-disable-next-line max-len\n        var accordion = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + pageNumber);\n        if (accordion) {\n            // eslint-disable-next-line max-len\n            commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null, pageNumber, annotationType, annotationSubType);\n        }\n        else {\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.createPageAccordion(pageNumber);\n            // eslint-disable-next-line max-len\n            commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null, pageNumber, annotationType, annotationSubType);\n        }\n        return commentsDivid;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.commentsAnnotationSelect = function (event) {\n        var element = event.currentTarget;\n        var isLocked = this.checkAnnotationSettings(element.id);\n        if (isLocked) {\n            // eslint-disable-next-line\n            var annotation = this.findAnnotationObject(element.id);\n            if (this.pdfViewer.annotationModule.checkAllowedInteractions('Select', annotation)) {\n                isLocked = false;\n            }\n        }\n        if (!isLocked) {\n            if (element.classList.contains('e-pv-comments-border')) {\n                // eslint-disable-next-line\n                var commentsDiv = document.querySelectorAll('.e-pv-comments-div');\n                for (var j = 0; j < commentsDiv.length; j++) {\n                    commentsDiv[j].style.minHeight = 60 + 'px';\n                }\n                if (event.currentTarget.childElementCount === 1) {\n                    if (event.currentTarget.childNodes[0].querySelector('.e-editable-inline')) {\n                        event.currentTarget.childNodes[0].style.minHeight = event.currentTarget.childNodes[0].clientHeight;\n                    }\n                }\n            }\n            if (event.target.className === 'e-pv-more-icon e-pv-icon' || event.target.className === 'e-pv-more-options-button e-btn') {\n                event.preventDefault();\n                return null;\n            }\n            // eslint-disable-next-line\n            var pageNumber = parseInt(element.accessKey);\n            if (!element.classList.contains('e-pv-comments-border')) {\n                // eslint-disable-next-line\n                var commentsContainer = document.querySelectorAll('.e-pv-comments-border');\n                if (commentsContainer) {\n                    for (var j = 0; j < commentsContainer.length; j++) {\n                        commentsContainer[j].classList.remove('e-pv-comments-border');\n                    }\n                }\n                var commentsDiv = document.getElementById(element.id);\n                if (commentsDiv) {\n                    commentsDiv.classList.add('e-pv-comments-border');\n                }\n                // eslint-disable-next-line\n                var commentTextBox = document.querySelectorAll('.e-pv-new-comments-div');\n                for (var j = 0; j < commentTextBox.length; j++) {\n                    commentTextBox[j].style.display = 'none';\n                }\n                if (commentsDiv) {\n                    // eslint-disable-next-line\n                    var currentTextBox = commentsDiv.querySelector('.e-pv-new-comments-div');\n                    if (currentTextBox) {\n                        currentTextBox.style.display = 'block';\n                    }\n                }\n                // eslint-disable-next-line\n                var textDiv = element.lastChild;\n                this.isEditableElement = false;\n                if (textDiv.querySelector('.e-editable-inline')) {\n                    textDiv.style.display = 'block';\n                    textDiv.querySelector('.e-editable-inline').style.display = 'block';\n                    for (var i = 0; i < element.childElementCount; i++) {\n                        // eslint-disable-next-line\n                        var activeElement = element.childNodes[i];\n                        // eslint-disable-next-line\n                        var textElement = activeElement.querySelector('.e-editable-inline');\n                        if (textElement) {\n                            if (textElement.style.display === '') {\n                                if (textDiv.classList.contains('e-pv-new-comments-div')) {\n                                    this.isEditableElement = true;\n                                    textDiv.style.display = 'none';\n                                    textDiv.querySelector('.e-editable-inline').style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n                this.isSetAnnotationType = false;\n                if (event.currentTarget.childElementCount === 1) {\n                    event.currentTarget.childNodes[0].childNodes[1].ej2_instances[0].enableEditMode = true;\n                }\n            }\n            else {\n                this.isSetAnnotationType = true;\n            }\n            if (!this.isSetAnnotationType) {\n                if (this.pdfViewer.navigation) {\n                    this.pdfViewer.navigationModule.goToPage(pageNumber);\n                }\n                var annotType = element.getAttribute('name');\n                if (annotType === 'null' || annotType === 'Ink') {\n                    annotType = 'ink';\n                }\n                this.isCommentsSelected = false;\n                this.setAnnotationType(element.id, annotType, pageNumber);\n                if (!this.isCommentsSelected) {\n                    this.selectAnnotationObj = { id: element.id, annotType: annotType, pageNumber: pageNumber };\n                }\n            }\n        }\n        this.isSetAnnotationType = false;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.findAnnotationObject = function (id) {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        else if (this.pdfViewer.selectedItems.annotations[0]) {\n            return this.pdfViewer.selectedItems.annotations[0];\n        }\n        // eslint-disable-next-line\n        var annotationCollection = this.pdfViewer.annotationCollection;\n        if (annotationCollection) {\n            for (var i = 0; i < annotationCollection.length; i++) {\n                if (annotationCollection[i].annotationId && (annotationCollection[i].annotationId === id)) {\n                    if (annotationCollection[i].shapeAnnotationType === 'textMarkup') {\n                        return annotationCollection[i];\n                    }\n                    else {\n                        annotationCollection = this.pdfViewer.annotations;\n                        for (var j = 0; j < annotationCollection.length; j++) {\n                            if (annotationCollection[j].annotName && (annotationCollection[j].annotName === id)) {\n                                return annotationCollection[j];\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    StickyNotesAnnotation.prototype.checkAnnotationSettings = function (id) {\n        // eslint-disable-next-line\n        var annotationCollection = this.pdfViewer.annotationCollection;\n        if (annotationCollection) {\n            for (var i = 0; i < annotationCollection.length; i++) {\n                if (annotationCollection[i].annotationId && (annotationCollection[i].annotationId === id)) {\n                    if (annotationCollection[i].annotationSettings && annotationCollection[i].annotationSettings.isLock) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n            }\n            return false;\n        }\n        else {\n            return false;\n        }\n    };\n    StickyNotesAnnotation.prototype.updateCommentsContainerWidth = function () {\n        var accordionContainer = document.getElementById(this.pdfViewer.element.id + '_accordionContentContainer');\n        var commentsContentContainer = document.getElementById(this.pdfViewer.element.id + '_commentscontentcontainer');\n        accordionContainer.style.width = commentsContentContainer.clientWidth + 'px';\n    };\n    /**\n     * @param pageIndex\n     * @private\n     */\n    StickyNotesAnnotation.prototype.selectCommentsAnnotation = function (pageIndex) {\n        if (this.selectAnnotationObj && !this.isCommentsSelected) {\n            if ((this.selectAnnotationObj.pageNumber - 1) === pageIndex) {\n                // eslint-disable-next-line max-len\n                this.setAnnotationType(this.selectAnnotationObj.id, this.selectAnnotationObj.annotType, this.selectAnnotationObj.pageNumber);\n                this.selectAnnotationObj = null;\n                this.isCommentsSelected = true;\n            }\n        }\n    };\n    StickyNotesAnnotation.prototype.setAnnotationType = function (id, type, pageNumber) {\n        var typeString = (type === 'measure') ? 'shape_measure' : type;\n        if (typeString === 'freeText') {\n            typeString = 'freetext';\n        }\n        // eslint-disable-next-line\n        var storeCommentObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + typeString);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeCommentObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + typeString];\n        }\n        if (storeCommentObject) {\n            var annotationCommentObject = JSON.parse(storeCommentObject);\n            // eslint-disable-next-line\n            var annotation = this.pdfViewer.selectedItems.annotations[0];\n            // eslint-disable-next-line max-len\n            var index = this.pdfViewer.annotationModule.\n                getPageCollection(annotationCommentObject, (pageNumber - 1));\n            if (annotationCommentObject[index]) {\n                // eslint-disable-next-line\n                var pageCollections = annotationCommentObject[index].annotations;\n                for (var i = 0; i < pageCollections.length; i++) {\n                    var currentSelector = pageCollections[i].annotationSelectorSettings;\n                    if (pageCollections[i].annotName === id) {\n                        if (annotation) {\n                            this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n                        }\n                        this.pdfViewer.clearSelection(pageNumber - 1);\n                        if (type === 'textMarkup') {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageNumber - 1, true);\n                            // eslint-disable-next-line max-len\n                            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + (pageNumber - 1));\n                            this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(pageCollections[i], canvas, (pageNumber - 1));\n                            this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation = pageCollections[i];\n                            this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageNumber - 1;\n                            this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n                            if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                            }\n                        }\n                        else if (type === 'stamp') {\n                            this.pdfViewer.select([pageCollections[i].randomId], currentSelector);\n                            this.pdfViewer.annotation.onAnnotationMouseDown();\n                        }\n                        else if (type === 'sticky') {\n                            this.pdfViewer.select([pageCollections[i].annotName], currentSelector);\n                            this.pdfViewer.annotation.onAnnotationMouseDown();\n                        }\n                        else if (type === 'ink') {\n                            this.pdfViewer.select([pageCollections[i].id], currentSelector);\n                            this.pdfViewer.annotation.onAnnotationMouseDown();\n                        }\n                        else {\n                            this.pdfViewer.select([pageCollections[i].id], currentSelector);\n                            this.pdfViewer.annotation.onAnnotationMouseDown();\n                        }\n                        if (type === 'textMarkup') {\n                            if (pageCollections[i].rect || pageCollections[i].bounds) {\n                                // eslint-disable-next-line max-len\n                                var scrollValue = this.pdfViewerBase.pageSize[pageNumber - 1].top * this.pdfViewerBase.getZoomFactor() + (this.pdfViewer.annotationModule.getAnnotationTop(pageCollections[i]) * this.pdfViewerBase.getZoomFactor());\n                                if (scrollValue) {\n                                    var scroll_1 = (scrollValue - 20).toString();\n                                    // eslint-disable-next-line radix\n                                    this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_1);\n                                }\n                            }\n                        }\n                        else {\n                            var top_1 = pageCollections[i].bounds.top;\n                            if (type === 'ink') {\n                                top_1 = pageCollections[i].bounds.y;\n                            }\n                            // eslint-disable-next-line max-len\n                            var scrollValue = this.pdfViewerBase.pageSize[pageNumber - 1].top * this.pdfViewerBase.getZoomFactor() + ((top_1) * this.pdfViewerBase.getZoomFactor());\n                            var scroll_2 = (scrollValue - 20).toString();\n                            // eslint-disable-next-line radix\n                            this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_2);\n                        }\n                        this.isCommentsSelected = true;\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.modifyTextProperty = function (text, previousValue, annotationName) {\n        // eslint-disable-next-line\n        var currentAnnotation;\n        var module = this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n        if (module && module.currentTextMarkupAnnotation) {\n            currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        if (currentAnnotation) {\n            if (currentAnnotation.annotName !== annotationName) {\n                currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n            }\n        }\n        else {\n            currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        if (annotationName && (currentAnnotation.annotName !== annotationName)) {\n            for (var i = 0; i < this.pdfViewer.annotations.length; i++) {\n                if (annotationName === this.pdfViewer.annotations[i].annotName) {\n                    currentAnnotation = this.pdfViewer.annotations[i];\n                    break;\n                }\n            }\n        }\n        if (currentAnnotation) {\n            // eslint-disable-next-line\n            var commentsDiv = document.getElementById(currentAnnotation.annotName);\n            if (commentsDiv) {\n                // eslint-disable-next-line\n                var pageNumber = void 0;\n                if (commentsDiv.accessKey) {\n                    // eslint-disable-next-line\n                    pageNumber = parseInt(commentsDiv.accessKey);\n                }\n                else {\n                    pageNumber = this.pdfViewerBase.currentPageNumber;\n                }\n                var type = commentsDiv.getAttribute('name');\n                var pageIndex = pageNumber - 1;\n                // eslint-disable-next-line\n                var pageAnnotations = void 0;\n                var isMeasure = false;\n                // eslint-disable-next-line max-len\n                if (currentAnnotation.shapeAnnotationType === 'FreeText' || (this.pdfViewer.enableShapeLabel && (type === 'shape' || type === 'shape_measure'))) {\n                    var isTextAdded = false;\n                    if (annotationName) {\n                        if (currentAnnotation.annotName !== annotationName) {\n                            this.pdfViewer.annotation.modifyDynamicTextValue(text, annotationName);\n                            isTextAdded = true;\n                        }\n                    }\n                    if (!isTextAdded) {\n                        if (currentAnnotation.shapeAnnotationType === 'FreeText') {\n                            if (currentAnnotation.dynamicText !== text) {\n                                this.pdfViewer.annotation.modifyDynamicTextValue(text, currentAnnotation.annotName);\n                            }\n                            currentAnnotation.dynamicText = text;\n                        }\n                        else {\n                            this.pdfViewer.annotation.modifyDynamicTextValue(text, currentAnnotation.annotName);\n                            currentAnnotation.labelContent = text;\n                            currentAnnotation.notes = text;\n                        }\n                        this.pdfViewer.nodePropertyChange(currentAnnotation, {});\n                    }\n                }\n                if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n                    pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n                    isMeasure = true;\n                }\n                else {\n                    pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n                }\n                if (pageAnnotations !== null && currentAnnotation.shapeAnnotationType !== 'FreeText') {\n                    for (var i = 0; i < pageAnnotations.length; i++) {\n                        if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n                            // eslint-disable-next-line\n                            var clonedObject = cloneObject(pageAnnotations[i]);\n                            if (text !== null) {\n                                if (pageAnnotations[i].note !== text) {\n                                    // eslint-disable-next-line max-len\n                                    this.pdfViewer.annotation.addAction(pageIndex, i, pageAnnotations[i], 'Text Property Added', '', clonedObject, pageAnnotations[i]);\n                                    currentAnnotation = pageAnnotations[i];\n                                    currentAnnotation.note = text;\n                                    if (currentAnnotation.enableShapeLabel) {\n                                        currentAnnotation.labelContent = text;\n                                    }\n                                    // eslint-disable-next-line max-len\n                                    currentAnnotation.modifiedDate = this.getDateAndTime();\n                                    if (!isMeasure) {\n                                        this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n                                    }\n                                    else {\n                                        this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n                                    }\n                                    if (!previousValue || previousValue === '') {\n                                        // eslint-disable-next-line max-len\n                                        this.pdfViewer.fireCommentAdd(currentAnnotation.annotName, currentAnnotation.note, currentAnnotation);\n                                    }\n                                    else {\n                                        // eslint-disable-next-line max-len\n                                        this.pdfViewer.fireCommentEdit(currentAnnotation.annotName, currentAnnotation.note, currentAnnotation);\n                                    }\n                                    return currentAnnotation;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param date\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.getDateAndTime = function (date) {\n        if (!date) {\n            date = new Date();\n        }\n        this.globalize = new Internationalization();\n        var dateOptions = { format: this.pdfViewer.dateTimeFormat, type: 'dateTime' };\n        // eslint-disable-next-line\n        var dateTime = this.globalize.formatDate(new Date(date), dateOptions);\n        return dateTime;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.modifyCommentsProperty = function (text, annotName, parentElement, previousValue) {\n        // eslint-disable-next-line\n        var currentAnnotation;\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        else {\n            currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        if (currentAnnotation) {\n            // eslint-disable-next-line\n            var commentsDiv = document.getElementById(currentAnnotation.annotName);\n            // eslint-disable-next-line\n            var pageNumber = parseInt(commentsDiv.accessKey);\n            var pageIndex = pageNumber - 1;\n            // eslint-disable-next-line\n            var pageAnnotations = void 0;\n            var isMeasure = false;\n            var author = this.getAuthorName(currentAnnotation, commentsDiv);\n            if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n                pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n                isMeasure = true;\n            }\n            else {\n                pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n            }\n            if (pageAnnotations !== null) {\n                for (var i = 0; i < pageAnnotations.length; i++) {\n                    if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n                        currentAnnotation = pageAnnotations[i];\n                    }\n                }\n            }\n            // eslint-disable-next-line\n            var clonedObject = cloneObject(currentAnnotation);\n            if (currentAnnotation.comments.length > 0) {\n                var isComment = false;\n                for (var j = 0; j < currentAnnotation.comments.length; j++) {\n                    if (currentAnnotation.comments[j].annotName === annotName) {\n                        isComment = true;\n                        currentAnnotation.comments[j].note = text;\n                        // eslint-disable-next-line max-len\n                        currentAnnotation.comments[j].modifiedDate = this.getDateAndTime();\n                    }\n                }\n                // eslint-disable-next-line max-len\n                var newArray = { annotName: annotName, parentId: parentElement, subject: 'Comments', comments: [], author: author, note: text, shapeAnnotationType: '', state: '', stateModel: '', modifiedDate: this.getDateAndTime(), review: { state: '', stateModel: '', modifiedDate: this.getDateAndTime(), author: author }, isLock: false };\n                if (!isComment) {\n                    currentAnnotation.comments[currentAnnotation.comments.length] = newArray;\n                }\n            }\n            else {\n                // eslint-disable-next-line max-len\n                var newArray = { annotName: annotName, parentId: parentElement, subject: 'Comments', comments: [], author: author, note: text, shapeAnnotationType: '', state: '', stateModel: '', modifiedDate: this.getDateAndTime(), review: { state: '', stateModel: '', modifiedDate: this.getDateAndTime(), author: author }, isLock: false };\n                currentAnnotation.comments[currentAnnotation.comments.length] = newArray;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Comments Property Added', '', clonedObject, currentAnnotation);\n            if (!isMeasure) {\n                this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n            }\n            else {\n                this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n            }\n        }\n        if (previousValue !== undefined) {\n            this.pdfViewer.fireCommentEdit(annotName, text, currentAnnotation);\n        }\n        else {\n            this.pdfViewer.fireCommentAdd(annotName, text, currentAnnotation);\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.modifyStatusProperty = function (text, statusElement) {\n        // eslint-disable-next-line\n        var currentAnnotation;\n        if (this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            currentAnnotation = this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        else {\n            currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        if (currentAnnotation) {\n            // eslint-disable-next-line\n            var commentsDiv = document.getElementById(currentAnnotation.annotName);\n            // eslint-disable-next-line\n            var pageNumber = parseInt(commentsDiv.accessKey);\n            var pageIndex = pageNumber - 1;\n            // eslint-disable-next-line\n            var pageAnnotations = void 0;\n            var isMeasure = false;\n            var author = commentsDiv.getAttribute('author');\n            if (currentAnnotation.measureType && currentAnnotation.measureType !== '') {\n                pageAnnotations = this.getAnnotations(pageIndex, null, 'shape_measure');\n                isMeasure = true;\n            }\n            else {\n                pageAnnotations = this.getAnnotations(pageIndex, null, currentAnnotation.shapeAnnotationType);\n            }\n            if (pageAnnotations !== null) {\n                for (var i = 0; i < pageAnnotations.length; i++) {\n                    if (pageAnnotations[i].annotName === currentAnnotation.annotName) {\n                        currentAnnotation = pageAnnotations[i];\n                    }\n                }\n            }\n            // eslint-disable-next-line\n            var clonedObject = cloneObject(currentAnnotation);\n            if (statusElement.parentElement.firstChild.id === statusElement.id) {\n                // eslint-disable-next-line max-len\n                currentAnnotation.review = { state: text, stateModel: 'Review', author: author, modifiedDate: this.getDateAndTime(), annotId: statusElement.id };\n                currentAnnotation.state = text;\n                currentAnnotation.stateModel = 'Review';\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Status Property Added', '', clonedObject, currentAnnotation);\n                this.pdfViewer.fireCommentStatusChanged(statusElement.id, currentAnnotation.note, currentAnnotation, currentAnnotation.state);\n            }\n            else {\n                for (var j = 0; j < currentAnnotation.comments.length; j++) {\n                    if (currentAnnotation.comments[j].annotName === statusElement.id) {\n                        // eslint-disable-next-line\n                        var clonedObj = cloneObject(currentAnnotation.comments[j]);\n                        currentAnnotation.comments[j].state = text;\n                        currentAnnotation.comments[j].stateModel = 'Review';\n                        // eslint-disable-next-line max-len\n                        currentAnnotation.comments[j].review = { state: text, stateModel: 'Review', author: author, modifiedDate: this.getDateAndTime(), annotId: statusElement.id };\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotation.addAction(pageIndex, null, currentAnnotation, 'Status Property Added', '', clonedObj, currentAnnotation.comments[j]);\n                        this.pdfViewer.fireCommentStatusChanged(currentAnnotation.comments[j].annotName, currentAnnotation.comments[j].note, currentAnnotation, currentAnnotation.comments[j].state);\n                    }\n                }\n            }\n            if (!isMeasure) {\n                this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n            }\n            else {\n                this.updateUndoRedoCollections(currentAnnotation, pageIndex, 'shape_measure');\n            }\n        }\n    };\n    /**\n     * @param commentsElement\n     * @param replyElement\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.modifyCommentDeleteProperty = function (commentsElement, replyElement) {\n        // eslint-disable-next-line\n        var clonedObject;\n        // eslint-disable-next-line\n        var clonedAnnotation;\n        // eslint-disable-next-line\n        var currentAnnotation;\n        // eslint-disable-next-line\n        var commentsParentElement = document.getElementById(commentsElement.id);\n        if (commentsParentElement) {\n            // eslint-disable-next-line\n            var pageNumber = parseInt(commentsParentElement.accessKey);\n            var pageIndex = pageNumber - 1;\n            var annotType = commentsElement.getAttribute('name');\n            // eslint-disable-next-line\n            var pageAnnotations = this.getAnnotations(pageIndex, null, annotType);\n            if (pageAnnotations !== null) {\n                for (var i = 0; i < pageAnnotations.length; i++) {\n                    if (pageAnnotations[i].annotName === commentsElement.id) {\n                        currentAnnotation = pageAnnotations[i];\n                    }\n                }\n            }\n            for (var i = 1; i < commentsParentElement.childElementCount; i++) {\n                if (commentsParentElement.childNodes[i].id === replyElement.id) {\n                    clonedAnnotation = cloneObject(currentAnnotation);\n                    var positionValue = (i - 1);\n                    currentAnnotation.comments[positionValue].position = i;\n                    clonedObject = cloneObject(currentAnnotation.comments[positionValue]);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.fireCommentDelete(currentAnnotation.comments[positionValue].annotName, currentAnnotation.comments[positionValue].note, currentAnnotation);\n                    currentAnnotation.comments.splice(positionValue, 1);\n                    replyElement.remove();\n                }\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(pageIndex, null, clonedAnnotation, 'Comments Reply Deleted', '', clonedObject, currentAnnotation);\n            this.updateUndoRedoCollections(currentAnnotation, pageIndex);\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateOpacityValue = function (annotation) {\n        // eslint-disable-next-line\n        var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, annotation.shapeAnnotationType);\n        if (pageAnnotations !== null) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (pageAnnotations[i].annotName === annotation.annotName) {\n                    pageAnnotations[i].opacity = annotation.opacity;\n                    this.updateUndoRedoCollections(pageAnnotations[i], annotation.pageIndex);\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param isAction\n     * @param undoAnnotation\n     * @param annotation\n     * @param isAction\n     * @param undoAnnotation\n     * @param annotation\n     * @param isAction\n     * @param undoAnnotation\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.undoAction = function (annotation, isAction, undoAnnotation) {\n        if (isAction === 'Text Property Added') {\n            if (annotation) {\n                // eslint-disable-next-line\n                var commentsMainDiv = document.getElementById(annotation.annotName);\n                if (commentsMainDiv) {\n                    // eslint-disable-next-line\n                    var pageNumber = parseInt(commentsMainDiv.accessKey);\n                    var pageIndex = pageNumber - 1;\n                    // eslint-disable-next-line\n                    var clonedAnnotationObject = cloneObject(annotation);\n                    commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = undoAnnotation.note;\n                    var value = undoAnnotation.note;\n                    annotation.note = value;\n                    if (commentsMainDiv.childElementCount === 2) {\n                        commentsMainDiv.lastChild.style.display = 'block';\n                    }\n                    this.updateUndoRedoCollections(annotation, pageIndex);\n                    return clonedAnnotationObject;\n                }\n            }\n        }\n        else if (isAction === 'Comments Property Added') {\n            if (annotation.comments.length > 0) {\n                // eslint-disable-next-line\n                var commentsDiv = document.getElementById(annotation.annotName);\n                var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n                if (commentsDiv) {\n                    // eslint-disable-next-line\n                    var pageNumber = parseInt(commentsDiv.accessKey);\n                    pageIndex = pageNumber - 1;\n                }\n                // eslint-disable-next-line\n                var clonedAnnotationObject = cloneObject(annotation);\n                // eslint-disable-next-line\n                var comment = annotation.comments[annotation.comments.length - 1];\n                // eslint-disable-next-line\n                var removeDiv = document.getElementById(comment.annotName);\n                if (removeDiv) {\n                    removeDiv.remove();\n                }\n                annotation = undoAnnotation;\n                this.updateUndoRedoCollections(annotation, pageIndex);\n                return clonedAnnotationObject;\n            }\n        }\n        else if (isAction === 'Status Property Added') {\n            if (annotation) {\n                // eslint-disable-next-line\n                var commentsDiv = document.getElementById(annotation.annotName);\n                var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n                if (commentsDiv) {\n                    // eslint-disable-next-line\n                    var pageNumber = parseInt(commentsDiv.accessKey);\n                    pageIndex = pageNumber - 1;\n                }\n                // eslint-disable-next-line\n                var clonedAnnotationObject = cloneObject(annotation);\n                if (annotation.annotName === undoAnnotation.annotName) {\n                    annotation.review = undoAnnotation.review;\n                    annotation.state = undoAnnotation.state;\n                    annotation.stateModel = undoAnnotation.stateModel;\n                    this.pdfViewer.annotation.redoCommentsElement.push(annotation);\n                }\n                else {\n                    for (var j = 0; j < annotation.comments.length; j++) {\n                        if (annotation.comments[j].annotName === undoAnnotation.annotName) {\n                            annotation.comments[j].state = undoAnnotation.state;\n                            annotation.comments[j].stateModel = undoAnnotation.stateModel;\n                            annotation.comments[j].review = undoAnnotation.review;\n                            this.pdfViewer.annotation.redoCommentsElement.push(annotation.comments[j]);\n                            break;\n                        }\n                    }\n                }\n                // eslint-disable-next-line\n                var activeDiv = document.getElementById(undoAnnotation.annotName);\n                if (activeDiv.lastChild.id === this.pdfViewer.element.id + 'status' + '_container') {\n                    activeDiv.lastChild.remove();\n                }\n                else {\n                    if (activeDiv.firstChild.lastChild.id === this.pdfViewer.element.id + 'status' + '_container') {\n                        activeDiv.firstChild.lastChild.remove();\n                    }\n                }\n                this.updateUndoRedoCollections(annotation, pageIndex);\n                return clonedAnnotationObject;\n            }\n        }\n        else if (isAction === 'Comments Reply Deleted') {\n            // eslint-disable-next-line\n            var commentsDiv = document.getElementById(annotation.annotName);\n            if (commentsDiv) {\n                // eslint-disable-next-line\n                var pageNumber = parseInt(commentsDiv.accessKey);\n                var pageIndex = pageNumber - 1;\n                this.renderComments(undoAnnotation, commentsDiv, true, annotation.annotName);\n                this.pdfViewer.annotation.redoCommentsElement.push(undoAnnotation);\n                this.updateUndoRedoCollections(annotation, pageIndex);\n                return annotation;\n            }\n        }\n        else if (isAction === 'dynamicText Change') {\n            if (annotation) {\n                // eslint-disable-next-line\n                var commentsMainDiv = document.getElementById(annotation.annotName);\n                if (commentsMainDiv) {\n                    // eslint-disable-next-line\n                    commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = undoAnnotation.dynamicText;\n                    return annotation;\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param isAction\n     * @param undoAnnotation\n     * @param annotation\n     * @param isAction\n     * @param undoAnnotation\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.redoAction = function (annotation, isAction, undoAnnotation) {\n        if (isAction === 'Text Property Added') {\n            // eslint-disable-next-line\n            var commentsMainDiv = document.getElementById(annotation.annotName);\n            if (commentsMainDiv) {\n                // eslint-disable-next-line\n                var pageNumber = parseInt(commentsMainDiv.accessKey);\n                var pageIndex = pageNumber - 1;\n                commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = annotation.note;\n                commentsMainDiv.lastChild.style.display = 'block';\n                this.updateUndoRedoCollections(annotation, pageIndex);\n                return annotation;\n            }\n        }\n        else if (isAction === 'Comments Property Added') {\n            // eslint-disable-next-line\n            var comment = annotation.comments[annotation.comments.length - 1];\n            var commentsDiv = document.getElementById(annotation.annotName);\n            if (commentsDiv) {\n                // eslint-disable-next-line\n                var pageNumber = parseInt(commentsDiv.accessKey);\n                var pageIndex = pageNumber - 1;\n                this.renderComments(comment, commentsDiv, true, annotation.annotName);\n                this.updateUndoRedoCollections(annotation, pageIndex);\n                return annotation;\n            }\n        }\n        else if (isAction === 'Status Property Added') {\n            // eslint-disable-next-line\n            var poppedItem = this.pdfViewer.annotation.redoCommentsElement.pop();\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            if (poppedItem) {\n                // eslint-disable-next-line max-len\n                var statusContainer = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_container', className: 'e-pv-status-container' });\n                // eslint-disable-next-line max-len\n                var statusDiv = createElement('div', { id: this.pdfViewer.element.id + 'status' + '_div', className: 'e-pv-status-div' });\n                var statusSpan = createElement('span', { id: this.pdfViewer.element.id + 'status' + '_icon' });\n                statusDiv.appendChild(statusSpan);\n                statusContainer.appendChild(statusDiv);\n                // eslint-disable-next-line\n                var activeDiv = document.getElementById(annotation.annotName);\n                if (activeDiv) {\n                    // eslint-disable-next-line\n                    var pageNumber = parseInt(activeDiv.accessKey);\n                    pageIndex = pageNumber - 1;\n                }\n                // eslint-disable-next-line\n                if (annotation.annotName === poppedItem.annotName) {\n                    this.updateStatusContainer(annotation.state, statusSpan, statusDiv, statusContainer);\n                    for (var i = 0; i < activeDiv.firstChild.children.length; i++) {\n                        if (activeDiv.firstChild.children[i].id === this.pdfViewer.element.id + 'status_container') {\n                            activeDiv.firstChild.children[i].parentElement.removeChild(activeDiv.firstChild.children[i]);\n                        }\n                    }\n                    activeDiv.firstChild.appendChild(statusContainer);\n                }\n                else {\n                    for (var i = 0; i < annotation.comments.length; i++) {\n                        if (annotation.comments[i].annotName === poppedItem.annotName) {\n                            this.updateStatusContainer(annotation.comments[i].state, statusSpan, statusDiv, statusContainer);\n                            var statusElement = document.getElementById(poppedItem.annotName);\n                            for (var i_1 = 0; i_1 < statusElement.children.length; i_1++) {\n                                if (statusElement.children[i_1].id === this.pdfViewer.element.id + 'status_container') {\n                                    statusElement.children[i_1].parentElement.removeChild(statusElement.children[i_1]);\n                                }\n                            }\n                            if (statusElement) {\n                                statusElement.appendChild(statusContainer);\n                            }\n                        }\n                    }\n                }\n            }\n            this.updateUndoRedoCollections(annotation, pageIndex);\n            return annotation;\n        }\n        else if (isAction === 'Comments Reply Deleted') {\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            // eslint-disable-next-line\n            var activeDiv = document.getElementById(annotation.annotName);\n            if (activeDiv) {\n                // eslint-disable-next-line\n                var pageNumber = parseInt(activeDiv.accessKey);\n                pageIndex = pageNumber - 1;\n            }\n            // eslint-disable-next-line\n            var poppedItem = this.pdfViewer.annotation.redoCommentsElement.pop();\n            // eslint-disable-next-line\n            var clonedAnnotationObject = cloneObject(annotation);\n            for (var i = 0; i < annotation.comments.length; i++) {\n                if (annotation.comments[i].annotName === poppedItem.annotName) {\n                    // eslint-disable-next-line\n                    var replyElement = document.getElementById(poppedItem.annotName);\n                    annotation.comments.splice(i, 1);\n                    replyElement.remove();\n                }\n            }\n            this.updateUndoRedoCollections(annotation, pageIndex);\n            return clonedAnnotationObject;\n        }\n        else if (isAction === 'dynamicText Change') {\n            if (annotation) {\n                // eslint-disable-next-line\n                var commentsMainDiv = document.getElementById(annotation.annotName);\n                if (commentsMainDiv) {\n                    // eslint-disable-next-line\n                    commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = annotation.dynamicText;\n                    return annotation;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateUndoRedoCollections = function (annotationBase, pageNumber, shapeType, action) {\n        var annotationType = (!shapeType) ? annotationBase.shapeAnnotationType : shapeType;\n        if (annotationBase.indent && annotationBase.indent !== '') {\n            annotationType = 'shape_measure';\n        }\n        // eslint-disable-next-line\n        var pageAnnotations = this.getAnnotations(pageNumber, null, annotationType);\n        if (pageAnnotations !== null) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (annotationBase.annotName === pageAnnotations[i].annotName) {\n                    pageAnnotations[i] = annotationBase;\n                    this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], pageNumber);\n                    if (action) {\n                        pageAnnotations.splice(i, 1);\n                        this.deleteStickyNotesAnnotations(pageAnnotations, pageNumber);\n                    }\n                }\n            }\n            if (annotationType === 'shape_measure') {\n                this.manageAnnotations(pageAnnotations, pageNumber, 'shape_measure');\n            }\n            else {\n                this.manageAnnotations(pageAnnotations, pageNumber, annotationBase.shapeAnnotationType);\n            }\n        }\n    };\n    /**\n     * @param pageIndex\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.addAnnotationComments = function (pageIndex, type) {\n        var pageNumber = pageIndex + 1;\n        // eslint-disable-next-line\n        var poppedItem = this.pdfViewer.annotation.undoCommentsElement.pop();\n        if (poppedItem) {\n            this.createCommentsContainer(poppedItem, pageNumber);\n            this.updateUndoRedoCollections(poppedItem, pageIndex, type);\n        }\n    };\n    /**\n     * @param annotation\n     * @param type\n     * @param action\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.findPosition = function (annotation, type, action) {\n        var index;\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(annotation.annotName);\n        if (commentsDiv) {\n            // eslint-disable-next-line\n            var pageNumber = parseInt(commentsDiv.accessKey);\n            var pageIndex = pageNumber - 1;\n            // eslint-disable-next-line\n            var parentDiv = commentsDiv.parentElement;\n            for (var i = 0; i < parentDiv.childElementCount; i++) {\n                if (parentDiv.childNodes[i].id === annotation.annotName) {\n                    index = i;\n                }\n            }\n            if (type === 'Stamp' || type === 'Image') {\n                type = 'stamp';\n            }\n            else if (type === 'FreeText') {\n                type = 'freetext';\n            }\n            else if (type === 'StickyNotes' || type === 'sticky') {\n                type = 'sticky';\n            }\n            else if (type === 'Ink') {\n                type = 'ink';\n            }\n            // eslint-disable-next-line\n            var pageAnnotations = this.getAnnotations(pageIndex, null, type);\n            if (pageAnnotations !== null) {\n                for (var i = 0; i < pageAnnotations.length; i++) {\n                    if (pageAnnotations[i].annotName === annotation.annotName) {\n                        // eslint-disable-next-line\n                        var clonedObject = cloneObject(pageAnnotations[i]);\n                        pageAnnotations[i].position = index;\n                        this.pdfViewer.annotation.undoCommentsElement.push(pageAnnotations[i]);\n                        if (type === 'sticky') {\n                            this.updateUndoRedoCollections(clonedObject, pageIndex, null, action);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.getAnnotations = function (pageIndex, shapeAnnotations, type) {\n        // eslint-disable-next-line\n        var annotationCollection;\n        if (type === 'Stamp' || type === 'stamp' || type === 'Image') {\n            type = 'stamp';\n        }\n        else if (type === 'StickyNotes' || type === 'sticky') {\n            type = 'sticky';\n        }\n        else if (type === 'textMarkup') {\n            type = 'textMarkup';\n        }\n        else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse'\n            || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n            type = 'shape';\n        }\n        else if (type === 'FreeText' || type === 'freetext' || type === 'freeText') {\n            type = 'freetext';\n        }\n        else if (type === 'ink' || type === 'Ink') {\n            type = 'ink';\n        }\n        else {\n            type = 'shape_measure';\n        }\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = shapeAnnotations;\n            }\n        }\n        else {\n            annotationCollection = shapeAnnotations;\n        }\n        return annotationCollection;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber, type) {\n        if (type === 'Stamp' || type === 'stamp') {\n            type = 'stamp';\n        }\n        else if (type === 'Sticky' || type === 'sticky') {\n            type = 'sticky';\n        }\n        else if (type === 'textMarkup') {\n            type = 'textMarkup';\n        }\n        else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse'\n            || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n            type = 'shape';\n        }\n        else if (type === 'FreeText') {\n            type = 'freetext';\n        }\n        else if (type === 'ink' || type === 'Ink') {\n            type = 'ink';\n        }\n        else {\n            type = 'shape_measure';\n        }\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            if (!this.pdfViewerBase.isStorageExceed) {\n                window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_' + type);\n            }\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + type] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_' + type, annotationStringified);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateStickyNotes = function (annotation, id) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n        }\n        if (storeObject) {\n            // eslint-disable-next-line\n            var bounds = annotation.bounds;\n            var annotObject = JSON.parse(storeObject);\n            for (var k = 0; k < annotObject.length; k++) {\n                // eslint-disable-next-line\n                var currentAnnot = annotObject[k];\n                for (var j = 0; j < currentAnnot.annotations.length; j++) {\n                    if (annotObject[k].annotations[j].annotName === annotation.annotName) {\n                        if (!this.pdfViewerBase.isStorageExceed) {\n                            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n                        }\n                        var pageIndex = this.pdfViewer.annotationModule.getPageCollection(annotObject, 0);\n                        if (annotObject[pageIndex]) {\n                            // eslint-disable-next-line max-len\n                            annotObject[k].annotations[j].bounds = { left: bounds.x, top: bounds.y, width: bounds.width, height: bounds.height, right: bounds.right, bottom: bounds.bottom };\n                        }\n                        var annotationStringified = JSON.stringify(annotObject);\n                        if (this.pdfViewerBase.isStorageExceed) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'] = annotationStringified;\n                        }\n                        else {\n                            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sticky', annotationStringified);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.saveStickyAnnotations = function () {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n        }\n        // eslint-disable-next-line\n        var annotations = new Array();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject && !this.pdfViewer.annotationSettings.skipDownload) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);\n                        // eslint-disable-next-line max-len\n                        pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex));\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.deleteStickyNotesAnnotations = function (pageAnnotations, pageNumber) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            if (!this.pdfViewerBase.isStorageExceed) {\n                window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n            }\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_sticky'] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_sticky', annotationStringified);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.addStickyNotesAnnotations = function (pageNumber, annotationBase) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null, 'sticky');\n        if (pageAnnotations) {\n            pageAnnotations.push(annotationBase);\n        }\n        this.manageAnnotations(pageAnnotations, pageNumber, 'sticky');\n    };\n    /**\n     * @param annotName\n     * @param text\n     * @private\n     */\n    StickyNotesAnnotation.prototype.addTextToComments = function (annotName, text) {\n        // eslint-disable-next-line\n        var commentsMainDiv = document.getElementById(annotName);\n        if (commentsMainDiv) {\n            commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value = text;\n        }\n    };\n    /**\n     * @param newAnnotation\n     * @param annotation\n     * @param isCut\n     * @param newAnnotation\n     * @param annotation\n     * @param isCut\n     * @param newAnnotation\n     * @param annotation\n     * @param isCut\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateAnnotationCollection = function (newAnnotation, annotation, isCut) {\n        var type = this.findAnnotationType(annotation);\n        // eslint-disable-next-line\n        var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, type);\n        if (isCut) {\n            pageAnnotations = this.pdfViewer.annotationModule.removedAnnotationCollection;\n        }\n        if (pageAnnotations !== null) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (isCut && !pageAnnotations[i].annotName) {\n                    pageAnnotations[i].annotName = pageAnnotations[i].annotationId;\n                }\n                if (pageAnnotations[i].annotName === annotation.annotName) {\n                    // eslint-disable-next-line\n                    var updateAnnotation = cloneObject(pageAnnotations[i]);\n                    updateAnnotation.annotName = newAnnotation.annotName;\n                    if (type === 'shape' || type === 'shape_measure' || type === 'freetext' || type === 'ink') {\n                        updateAnnotation.id = newAnnotation.id;\n                    }\n                    if (type === 'stamp') {\n                        updateAnnotation.randomId = newAnnotation.id;\n                    }\n                    if (type === 'ink') {\n                        updateAnnotation.bounds.x = newAnnotation.bounds.x;\n                        updateAnnotation.bounds.y = newAnnotation.bounds.y;\n                    }\n                    else {\n                        updateAnnotation.bounds.left = newAnnotation.bounds.x;\n                        updateAnnotation.bounds.top = newAnnotation.bounds.y;\n                        updateAnnotation.vertexPoints = newAnnotation.vertexPoints;\n                    }\n                    updateAnnotation.note = updateAnnotation.note ? updateAnnotation.note : '';\n                    updateAnnotation.comments = [];\n                    // eslint-disable-next-line max-len\n                    updateAnnotation.review = { state: '', stateModel: '', modifiedDate: updateAnnotation.ModifiedDate, author: updateAnnotation.author };\n                    updateAnnotation.state = '';\n                    updateAnnotation.stateModel = '';\n                    this.pdfViewer.annotationModule.storeAnnotations(annotation.pageIndex, updateAnnotation, '_annotations_' + type);\n                    this.createCommentsContainer(updateAnnotation, annotation.pageIndex + 1, true);\n                    if (isCut) {\n                        this.pdfViewer.annotationModule.removedAnnotationCollection = [];\n                    }\n                    break;\n                }\n            }\n        }\n    };\n    StickyNotesAnnotation.prototype.findAnnotationType = function (annotation) {\n        var annotType;\n        if (annotation.measureType !== '') {\n            annotType = 'shape_measure';\n        }\n        else {\n            if (annotation.shapeAnnotationType === 'StickyNotes') {\n                annotType = 'sticky';\n            }\n            else if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n                annotType = 'stamp';\n            }\n            else if (annotation.shapeAnnotationType === 'FreeText') {\n                annotType = 'freetext';\n            }\n            else if (annotation.shapeAnnotationType === 'Ink') {\n                annotType = 'ink';\n            }\n            else {\n                annotType = 'shape';\n            }\n        }\n        return annotType;\n    };\n    StickyNotesAnnotation.prototype.setExistingAnnotationModifiedDate = function (date) {\n        var modifiedDateTime;\n        if (date !== '') {\n            modifiedDateTime = this.setModifiedDate(date);\n        }\n        else {\n            modifiedDateTime = this.setModifiedDate();\n        }\n        return modifiedDateTime;\n    };\n    StickyNotesAnnotation.prototype.updateModifiedTime = function (time, minutes) {\n        var modifiedTime;\n        if (time >= 12) {\n            if (time === 12) {\n                modifiedTime = time + ':' + minutes + ' PM';\n            }\n            else {\n                modifiedTime = (time - 12) + ':' + minutes + ' PM';\n            }\n        }\n        else {\n            modifiedTime = time + ':' + minutes + ' AM';\n        }\n        return modifiedTime;\n    };\n    StickyNotesAnnotation.prototype.setModifiedDate = function (data) {\n        var dateTime;\n        if (data) {\n            dateTime = this.getDateAndTime(data);\n        }\n        else {\n            dateTime = this.getDateAndTime();\n        }\n        var date = new Date(dateTime);\n        var modifiedTime;\n        var modifiedDate = date.toString().split(' ').splice(1, 2).join(' ');\n        if (date.toLocaleTimeString().split(' ').length === 2) {\n            // eslint-disable-next-line max-len\n            modifiedTime = date.toLocaleTimeString().split(' ')[0].split(':').splice(0, 2).join(':') + ' ' + date.toLocaleTimeString().split(' ')[1];\n        }\n        else {\n            // eslint-disable-next-line\n            var time = parseInt(date.toLocaleTimeString().split(':')[0]);\n            var minutes = date.toLocaleTimeString().split(':')[1];\n            modifiedTime = this.updateModifiedTime(time, minutes);\n        }\n        var modifiedDateTime = modifiedDate + ', ' + modifiedTime;\n        return modifiedDateTime;\n    };\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateModifiedDate = function (titleContainer) {\n        if (titleContainer.id === this.pdfViewer.element.id + '_commenttype_icon') {\n            titleContainer = titleContainer.nextSibling;\n        }\n        var author = titleContainer.textContent.split('-')[0];\n        titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n    };\n    /**\n     * @param annotation\n     * @param isBounds\n     * @param isUndoRedoAction\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateAnnotationModifiedDate = function (annotation, isBounds, isUndoRedoAction) {\n        // eslint-disable-next-line\n        var titleContainer;\n        if (annotation) {\n            // eslint-disable-next-line\n            var commentsContainer = document.getElementById(annotation.annotName);\n            if (commentsContainer) {\n                if (!isBounds) {\n                    titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n                    var author = titleContainer.textContent.split('-')[0];\n                    titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n                }\n                else {\n                    var type = this.findAnnotationType(annotation);\n                    // eslint-disable-next-line\n                    var pageAnnotations = this.getAnnotations(annotation.pageIndex, null, type);\n                    if (pageAnnotations != null && annotation) {\n                        for (var i = 0; i < pageAnnotations.length; i++) {\n                            if (annotation.annotName === pageAnnotations[i].annotName) {\n                                // eslint-disable-next-line max-len\n                                if (annotation.bounds.x !== pageAnnotations[i].bounds.left || annotation.bounds.y !== pageAnnotations[i].bounds.top || annotation.bounds.height !== pageAnnotations[i].bounds.height || annotation.bounds.width !== pageAnnotations[i].bounds.width) {\n                                    titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n                                    var author = titleContainer.textContent.split('-')[0];\n                                    titleContainer.textContent = author + ' - ' + this.setModifiedDate();\n                                }\n                            }\n                            if (pageAnnotations[i].shapeAnnotationType === 'sticky') {\n                                this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], annotation.pageIndex);\n                            }\n                        }\n                    }\n                }\n                if (isUndoRedoAction) {\n                    titleContainer = commentsContainer.firstChild.firstChild.childNodes[1];\n                    if (annotation.modifiedDate !== undefined) {\n                        var author = titleContainer.textContent.split('-')[0];\n                        titleContainer.textContent = author + ' - ' + this.setExistingAnnotationModifiedDate(annotation.modifiedDate);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param annotation\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.saveImportedStickyNotesAnnotations = function (annotation, pageNumber) {\n        var annotationObject = null;\n        if (!annotation.Author) {\n            // eslint-disable-next-line max-len\n            annotation.Author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.stickyNotesSettings.author;\n        }\n        // eslint-disable-next-line max-len\n        var isLock = this.pdfViewer.stickyNotesSettings.isLock ? this.pdfViewer.stickyNotesSettings.isLock : this.pdfViewer.annotationSettings.isLock;\n        // eslint-disable-next-line\n        var allowedInteractions = this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n        annotationObject = {\n            // eslint-disable-next-line max-len\n            shapeAnnotationType: 'sticky', author: annotation.Author, allowedInteractions: allowedInteractions, modifiedDate: annotation.ModifiedDate, subject: annotation.Subject, note: annotation.Note, opacity: annotation.Opacity, state: annotation.State, stateModel: annotation.StateModel,\n            pathData: '', comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author), review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: annotation.Author },\n            // eslint-disable-next-line max-len\n            bounds: { left: annotation.Bounds.X, top: annotation.Bounds.Y, width: annotation.Bounds.Width, height: annotation.Bounds.Height, right: annotation.Bounds.Right, bottom: annotation.Bounds.Bottom },\n            annotName: annotation.AnnotName, color: annotation.color,\n            annotationSelectorSettings: this.getSettings(annotation),\n            customData: this.pdfViewer.annotation.getCustomData(annotation),\n            annotationSettings: { isLock: isLock }, isPrint: annotation.IsPrint, isCommentLock: annotation.IsCommentLock\n        };\n        this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_sticky');\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param annotation\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    StickyNotesAnnotation.prototype.updateStickyNotesAnnotationCollections = function (annotation, pageNumber) {\n        // eslint-disable-next-line\n        var annotationObject = null;\n        if (!annotation.Author) {\n            // eslint-disable-next-line max-len\n            annotation.Author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.stickyNotesSettings.author;\n        }\n        // eslint-disable-next-line max-len\n        var isLock = this.pdfViewer.stickyNotesSettings.isLock ? this.pdfViewer.stickyNotesSettings.isLock : this.pdfViewer.annotationSettings.isLock;\n        // eslint-disable-next-line\n        var allowedInteractions = annotation.AllowedInteraction ? annotation.AllowedInteraction : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n        if (annotation.IsLock) {\n            isLock = annotation.isLock;\n        }\n        annotationObject = {\n            // eslint-disable-next-line max-len\n            shapeAnnotationType: 'sticky', author: annotation.Author, allowedInteractions: allowedInteractions, modifiedDate: annotation.ModifiedDate, subject: annotation.Subject, note: annotation.Note, opacity: annotation.Opacity, state: annotation.State, stateModel: annotation.StateModel,\n            pathData: '', comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author), review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: annotation.Author },\n            // eslint-disable-next-line max-len\n            bounds: { left: annotation.Bounds.X, top: annotation.Bounds.Y, width: annotation.Bounds.Width, height: annotation.Bounds.Height, right: annotation.Bounds.Right, bottom: annotation.Bounds.Bottom },\n            annotationId: annotation.AnnotName, color: annotation.color, pageNumber: pageNumber,\n            customData: this.pdfViewer.annotation.getCustomData(annotation),\n            annotationSettings: { isLock: isLock }, isPrint: annotation.IsPrint, isCommentLock: annotation.IsCommentLock\n        };\n        return annotationObject;\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.clear = function () {\n        this.commentsCount = 0;\n        this.commentsreplyCount = 0;\n        this.isAccordionContainer = true;\n        this.isEditableElement = false;\n        this.isCreateContextMenu = false;\n        this.isPageCommentsRendered = false;\n        this.isCommentsRendered = false;\n        this.isAnnotationRendered = false;\n        if (this.commentMenuObj) {\n            this.commentMenuObj.destroy();\n        }\n        // eslint-disable-next-line\n        var accordionPages = document.querySelectorAll('.e-pv-accordion-page-container');\n        if (accordionPages) {\n            for (var j = 0; j < accordionPages.length; j++) {\n                // eslint-disable-next-line\n                accordionPages[j].remove();\n            }\n        }\n        if (this.commentsRequestHandler) {\n            this.commentsRequestHandler.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    StickyNotesAnnotation.prototype.getModuleName = function () {\n        return 'StickyNotesAnnotation';\n    };\n    /**\n     * This method used to add annotations with using program.\n     *\n     * @param annotationObject - It describes type of annotation object\n     * @param offset - It describes about the annotation bounds or location\n     * @returns Object\n     * @private\n     */\n    StickyNotesAnnotation.prototype.updateAddAnnotationDetails = function (annotationObject, offset) {\n        //Creating new object if annotationObject is null\n        if (!annotationObject) {\n            annotationObject = { offset: { x: 1, y: 1 }, pageNumber: 0 };\n            offset = annotationObject.offset;\n        }\n        else if (!annotationObject.offset)\n            offset = { x: 1, y: 1 };\n        else\n            offset = annotationObject.offset;\n        //Creating the CurrentDate and Annotation name\n        var currentDateString = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n        var annotationName = this.pdfViewer.annotation.createGUID();\n        //Creating annotation settings\n        var annotationSelectorSettings = this.pdfViewer.stickyNotesSettings.annotationSelectorSettings ? this.pdfViewer.stickyNotesSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n        var annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings);\n        var allowedInteractions = this.pdfViewer.stickyNotesSettings.allowedInteractions ? this.pdfViewer.stickyNotesSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n        annotationSettings.isLock = annotationObject.isLock ? annotationObject.isLock : false;\n        //Creating Annotation objects with it's proper properties\n        var stickyNotesAnnotation = [];\n        var stickyNotes = {\n            AllowedInteractions: annotationObject.allowedInteractions ? annotationObject.allowedInteractions : allowedInteractions,\n            AnnotName: annotationName,\n            AnnotType: 'sticky',\n            AnnotationFlags: null,\n            AnnotationSelectorSettings: annotationObject.annotationSelectorSettings ? annotationObject.annotationSelectorSettings : annotationSelectorSettings,\n            AnnotationSettings: annotationSettings,\n            Author: annotationObject.author ? annotationObject.author : 'Guest',\n            Bounds: { X: offset.x, Y: offset.y, Width: 30, Height: 30, Left: offset.x, Top: offset.y, Location: { X: offset.x, Y: offset.y }, Size: { Height: 30, IsEmpty: false, Width: 30 } },\n            Color: { IsEmpty: false, B: 51, Blue: 0.2, C: 0, G: 255 },\n            Comments: null,\n            CreatedDate: currentDateString,\n            CustomData: annotationObject.customData ? annotationObject.customData : null,\n            ExistingCustomData: null,\n            Icon: 'Comment',\n            IsCommentLock: false,\n            IsLock: annotationObject.isLock ? annotationObject.isLock : false,\n            IsPrint: annotationObject.isPrint ? annotationObject.isPrint : true,\n            ModifiedDate: currentDateString,\n            Note: \"\",\n            Opacity: annotationObject.opacity ? annotationObject.opacity : 1,\n            Reference: null,\n            Size: { IsEmpty: true, Width: 0, Height: 0 },\n            State: \"\",\n            StateModel: \"\",\n            StrokeColor: null,\n            SubType: null,\n            Subject: 'Sticky Note',\n            Type: null\n        };\n        //Adding the annotation object to an array and return it\n        stickyNotesAnnotation[0] = stickyNotes;\n        return { stickyNotesAnnotation: stickyNotesAnnotation };\n    };\n    /**\n     * @private\n    */\n    StickyNotesAnnotation.prototype.getAnnotationType = function (type) {\n        var annotationType;\n        if (type === 'stamp' || type === 'Stamp') {\n            annotationType = 'stamp';\n        }\n        else if (type === 'shape' || type === 'Line' || type === 'Radius' || type === 'Rectangle' || type === 'Ellipse'\n            || type === 'Polygon' || type === 'LineWidthArrowHead' || type === 'Square' || type === 'Circle') {\n            annotationType = 'shape';\n        }\n        else if (type === 'textMarkup') {\n            annotationType = 'textMarkup';\n        }\n        else if (type === 'freeText' || type === 'FreeText') {\n            annotationType = 'freeText';\n        }\n        else if (type === 'sticky' || type === 'StickyNotes') {\n            annotationType = 'sticky';\n        }\n        else if (type === 'measure' || type === 'shape_measure') {\n            annotationType = 'measure';\n        }\n        else if (type === 'ink' || type === 'Ink') {\n            annotationType = 'ink';\n        }\n        return annotationType;\n    };\n    /**\n     * @private\n    */\n    StickyNotesAnnotation.prototype.getAuthorName = function (annotation, commonDiv) {\n        var author;\n        if (annotation) {\n            var type = annotation.shapeAnnotationType;\n            var annotationType = this.getAnnotationType(type);\n            author = this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType, type);\n        }\n        else {\n            author = commonDiv.getAttribute('author');\n        }\n        return author;\n    };\n    return StickyNotesAnnotation;\n}());\nexport { StickyNotesAnnotation };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}