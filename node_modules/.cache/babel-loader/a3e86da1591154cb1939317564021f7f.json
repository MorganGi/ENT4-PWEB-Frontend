{"ast":null,"code":"import { Droppable } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, remove, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf, appendChildren, setDisplayValue, clearReactVueTemplates } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { isGroupAdaptive } from '../base/util';\nimport * as literals from '../base/string-literals'; // eslint-disable-next-line valid-jsdoc\n\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\n\nvar ContentRender =\n/** @class */\nfunction () {\n  /**\n   * Constructor for content renderer module\n   *\n   * @param {IGrid} parent - specifies the Igrid\n   * @param {ServiceLocator} serviceLocator - specifies the service locator\n   */\n  function ContentRender(parent, serviceLocator) {\n    var _this = this;\n\n    this.rows = [];\n    this.freezeRows = [];\n    this.movableRows = [];\n    this.freezeRowElements = [];\n    /** @hidden */\n\n    this.currentInfo = {};\n    /** @hidden */\n\n    this.prevCurrentView = [];\n    this.isLoaded = true;\n    this.viewColIndexes = [];\n\n    this.drop = function (e) {\n      _this.parent.notify(events.columnDrop, {\n        target: e.target,\n        droppedElement: e.droppedElement\n      });\n\n      remove(e.droppedElement);\n    };\n\n    this.infiniteCache = {};\n    this.isRemove = false;\n    /** @hidden */\n\n    this.visibleRows = [];\n    this.visibleFrozenRows = [];\n    this.rightFreezeRows = [];\n    this.isAddRows = false;\n    this.isInfiniteFreeze = false;\n    this.useGroupCache = false;\n\n    this.rafCallback = function (args) {\n      var arg = args;\n      return function () {\n        if (_this.parent.isFrozenGrid() && _this.parent.enableVirtualization) {\n          var tableName = args.tableName;\n          _this.isLoaded = _this.parent.getFrozenMode() === literals.leftRight ? tableName === 'frozen-right' : tableName === 'movable';\n\n          if (_this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll' && _this.isLoaded) {\n            var mHdr = [].slice.call(_this.parent.getMovableVirtualHeader().getElementsByClassName(literals.row));\n            var fHdr = [].slice.call(_this.parent.getFrozenVirtualHeader().getElementsByClassName(literals.row));\n            _this.isLoaded = mHdr.length === fHdr.length;\n          }\n        }\n\n        _this.ariaService.setBusy(_this.getPanel().querySelector('.' + literals.content), false);\n\n        if (_this.parent.isDestroyed) {\n          return;\n        }\n\n        var rows = _this.rows.slice(0);\n\n        if (_this.parent.enableInfiniteScrolling) {\n          rows = _this.parent.getRowsObject();\n          var prevPage = arg.prevPage;\n\n          if (_this.parent.infiniteScrollSettings.enableCache && prevPage) {\n            var maxBlock = _this.parent.infiniteScrollSettings.maxBlocks;\n            rows = [];\n            var rowIdx = parseInt(_this.rowElements[0].getAttribute('aria-rowindex'), 10) + 1;\n            var startIdx = Math.ceil(rowIdx / _this.parent.pageSettings.pageSize);\n\n            for (var i = 0, count = startIdx; i < maxBlock; i++, count++) {\n              if (_this.infiniteCache[count]) {\n                rows = rows.concat(_this.infiniteCache[count]);\n              }\n            }\n          }\n        }\n\n        if (_this.parent.isFrozenGrid()) {\n          rows = args.isFrozen ? _this.freezeRows : args.renderFrozenRightContent ? _this.parent.getFrozenRightRowsObject() : _this.movableRows;\n        }\n\n        _this.parent.notify(events.contentReady, {\n          rows: rows,\n          args: arg\n        });\n\n        if (_this.isLoaded) {\n          _this.parent.isManualRefresh = false;\n\n          _this.parent.trigger(events.dataBound, {}, function () {\n            if (_this.parent.allowTextWrap) {\n              _this.parent.notify(events.freezeRender, {\n                case: 'textwrap'\n              });\n            }\n          });\n        }\n\n        if (arg) {\n          var action = (arg.requestType || '').toLowerCase() + '-complete';\n\n          _this.parent.notify(action, arg);\n\n          if (args.requestType === 'batchsave') {\n            args.cancel = false;\n\n            _this.parent.trigger(events.actionComplete, args);\n          }\n        }\n\n        if (_this.isLoaded) {\n          _this.parent.hideSpinner();\n        }\n      };\n    };\n\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.ariaService = this.serviceLocator.getService('ariaService');\n    this.parent.enableDeepCompare = this.parent.getDataModule().isRemote();\n    this.generator = this.getModelGenerator();\n\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    if (!this.parent.enableColumnVirtualization && !this.parent.enableVirtualization && !this.parent.groupSettings.enableLazyLoading) {\n      this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    }\n\n    this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    this.parent.on(events.refreshInfiniteModeBlocks, this.refreshContentRows, this);\n    this.parent.on(events.beforeCellFocused, this.beforeCellFocused, this);\n    this.parent.on(events.destroy, this.droppableDestroy, this);\n  }\n\n  ContentRender.prototype.beforeCellFocused = function (e) {\n    if (e.byKey && (e.keyArgs.action === 'upArrow' || e.keyArgs.action === 'downArrow')) {\n      this.pressedKey = e.keyArgs.action;\n    } else {\n      this.pressedKey = undefined;\n    }\n  };\n  /**\n   * The function is used to render grid content div\n   *\n   * @returns {void}\n   */\n\n\n  ContentRender.prototype.renderPanel = function () {\n    var gObj = this.parent;\n    var div = this.parent.element.querySelector('.' + literals.gridContent);\n\n    if (div) {\n      this.ariaService.setOptions(this.parent.element.querySelector('.' + literals.content), {\n        busy: false\n      });\n      this.setPanel(div);\n      return;\n    }\n\n    div = this.parent.createElement('div', {\n      className: literals.gridContent\n    });\n    var innerDiv = this.parent.createElement('div', {\n      className: literals.content\n    });\n    this.ariaService.setOptions(innerDiv, {\n      busy: false\n    });\n    div.appendChild(innerDiv);\n    this.setPanel(div);\n    gObj.element.appendChild(div);\n  };\n  /**\n   * The function is used to render grid content table\n   *\n   * @returns {void}\n   */\n\n\n  ContentRender.prototype.renderTable = function () {\n    var contentDiv = this.getPanel();\n    var virtualTable = contentDiv.querySelector('.e-virtualtable');\n    var virtualTrack = contentDiv.querySelector('.e-virtualtrack');\n\n    if (this.parent.enableVirtualization && !isNullOrUndefined(virtualTable) && !isNullOrUndefined(virtualTrack)) {\n      remove(virtualTable);\n      remove(virtualTrack);\n    }\n\n    contentDiv.appendChild(this.createContentTable('_content_table'));\n    this.setTable(contentDiv.querySelector('.' + literals.table));\n    this.ariaService.setOptions(this.getTable(), {\n      multiselectable: this.parent.selectionSettings.type === 'Multiple'\n    });\n    this.initializeContentDrop();\n\n    if (this.parent.frozenRows) {\n      this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n    }\n  };\n  /**\n   * The function is used to create content table elements\n   *\n   * @param {string} id - specifies the id\n   * @returns {Element} returns the element\n   * @hidden\n   */\n\n\n  ContentRender.prototype.createContentTable = function (id) {\n    var innerDiv = this.getPanel().firstElementChild;\n\n    if (this.getTable()) {\n      remove(this.getTable());\n    }\n\n    var table = innerDiv.querySelector('.' + literals.table) ? innerDiv.querySelector('.' + literals.table) : this.parent.createElement('table', {\n      className: literals.table,\n      attrs: {\n        cellspacing: '0.25px',\n        role: 'grid',\n        id: this.parent.element.id + id\n      }\n    });\n    this.setColGroup(this.parent.getHeaderTable().querySelector(literals.colGroup).cloneNode(true));\n    table.appendChild(this.getColGroup());\n    table.appendChild(this.parent.createElement(literals.tbody, {\n      attrs: {\n        role: 'rowgroup'\n      }\n    }));\n    innerDiv.appendChild(table);\n    return innerDiv;\n  };\n  /**\n   * Refresh the content of the Grid.\n   *\n   * @param {NotifyArgs} args - specifies the args\n   * @returns {void}\n   */\n  // tslint:disable-next-line:max-func-body-length\n\n\n  ContentRender.prototype.refreshContentRows = function (args) {\n    var _this = this;\n\n    if (args === void 0) {\n      args = {};\n    }\n\n    var gObj = this.parent;\n\n    if (gObj.currentViewData.length === 0) {\n      return;\n    }\n\n    var dataSource = this.currentMovableRows || gObj.currentViewData;\n    var contentModule = this.parent.contentModule;\n    var isReact = gObj.isReact && !isNullOrUndefined(gObj.rowTemplate);\n    var frag = isReact ? gObj.createElement(literals.tbody, {\n      attrs: {\n        role: 'rowgroup'\n      }\n    }) : document.createDocumentFragment();\n\n    if (!this.initialPageRecords) {\n      this.initialPageRecords = extend([], dataSource);\n    }\n\n    var hdrfrag = isReact ? gObj.createElement(literals.tbody, {\n      attrs: {\n        role: 'rowgroup'\n      }\n    }) : document.createDocumentFragment();\n    var columns = gObj.getColumns();\n    var tr;\n    var hdrTbody;\n    var frzCols = gObj.getFrozenColumns();\n    var isFrozenGrid = this.parent.isFrozenGrid();\n    var trElement;\n    var row = new RowRenderer(this.serviceLocator, null, this.parent);\n    var isInfiniteScroll = this.parent.enableInfiniteScrolling && args.requestType === 'infiniteScroll';\n    gObj.notify(events.destroyChildGrid, {});\n    this.rowElements = [];\n    this.rows = [];\n    var fCont = this.getPanel().querySelector('.' + literals.frozenContent);\n    var mCont = this.getPanel().querySelector('.' + literals.movableContent);\n    var cont = this.getPanel().querySelector('.' + literals.content);\n    var tbdy;\n    var tableName;\n\n    if (isGroupAdaptive(gObj)) {\n      if (['sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder'].some(function (value) {\n        return args.requestType === value;\n      })) {\n        this.emptyVcRows();\n      }\n    }\n\n    var modelData;\n\n    if (this.parent.enableVirtualization && this.parent.isFrozenGrid()) {\n      if (this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo.axis === 'X') {\n        modelData = this.parent.contentModule.generateRows(dataSource, args);\n        args.renderMovableContent = true;\n      }\n\n      modelData = this.parent.contentModule.generateRows(dataSource, args);\n    } else {\n      modelData = this.checkCache(modelData, args);\n\n      if (!this.isAddRows && !this.useGroupCache) {\n        modelData = this.generator.generateRows(dataSource, args);\n      }\n    }\n\n    this.setGroupCache(modelData, args);\n    this.parent.notify(events.setInfiniteCache, {\n      isInfiniteScroll: isInfiniteScroll,\n      modelData: modelData,\n      args: args\n    });\n    var idx = modelData[0].cells[0].index;\n\n    if (isFrozenGrid) {\n      tableName = contentModule.setTbody(modelData, args);\n      tbdy = contentModule.getTbody(tableName);\n    }\n\n    var isFrozenLeft = this.parent.getFrozenMode() === literals.leftRight && tableName === literals.frozenRight;\n    /* eslint-disable */\n\n    if (args.requestType !== 'infiniteScroll' && this.parent.registeredTemplate && this.parent.registeredTemplate.template && !args.isFrozen && !isFrozenLeft) {\n      var templatetoclear = [];\n\n      for (var i = 0; i < this.parent.registeredTemplate.template.length; i++) {\n        for (var j = 0; j < this.parent.registeredTemplate.template[i].rootNodes.length; j++) {\n          if (isNullOrUndefined(this.parent.registeredTemplate.template[i].rootNodes[j].parentNode)) {\n            templatetoclear.push(this.parent.registeredTemplate.template[i]);\n            /* eslint-enable */\n          }\n        }\n      }\n\n      this.parent.destroyTemplate(['template'], templatetoclear);\n    }\n\n    if ((this.parent.isReact || this.parent.isVue) && args.requestType !== 'infiniteScroll' && !args.isFrozen) {\n      var templates = [this.parent.isVue ? 'template' : 'columnTemplate', 'rowTemplate', 'detailTemplate', 'captionTemplate', 'commandsTemplate', 'groupFooterTemplate', 'groupCaptionTemplate'];\n      clearReactVueTemplates(this.parent, templates);\n    }\n\n    if (this.parent.enableColumnVirtualization) {\n      var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n      cellMerge.updateVirtualCells(modelData);\n    }\n\n    if (!isFrozenGrid) {\n      this.tbody = this.getTable().querySelector(literals.tbody);\n    }\n\n    var startIndex = 0;\n    var blockLoad = true;\n\n    if (isGroupAdaptive(gObj) && gObj.vcRows.length) {\n      var top_1 = 'top';\n      var scrollTop = !isNullOrUndefined(args.virtualInfo.offsets) ? args.virtualInfo.offsets.top : !isNullOrUndefined(args.scrollTop) ? args.scrollTop[top_1] : 0;\n\n      if (scrollTop !== 0) {\n        var offsets_1 = gObj.vGroupOffsets;\n        var bSize = gObj.pageSettings.pageSize / 2;\n        var values = Object.keys(offsets_1).map(function (key) {\n          return offsets_1[key];\n        });\n\n        for (var m = 0; m < values.length; m++) {\n          if (scrollTop < values[m]) {\n            if (!isNullOrUndefined(args.virtualInfo) && args.virtualInfo.direction === 'up') {\n              startIndex = m > 0 ? (m - 1) * bSize : m * bSize;\n              break;\n            } else {\n              startIndex = m * bSize;\n\n              if (this.parent.contentModule.isEndBlock(m) || this.parent.contentModule.isEndBlock(m + 1)) {\n                args.virtualInfo.blockIndexes = [m, m + 1];\n              }\n\n              break;\n            }\n          }\n        }\n\n        if (Math.round(scrollTop + this.contentPanel.firstElementChild.offsetHeight) >= this.contentPanel.firstElementChild.scrollHeight && !args.rowObject) {\n          blockLoad = false;\n        }\n      }\n    }\n\n    var isVFFrozenOnly = gObj.frozenRows && !gObj.isFrozenGrid() && this.parent.enableVirtualization && args.requestType === 'reorder';\n\n    if (gObj.frozenRows && args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo.axis === 'X' || isVFFrozenOnly) {\n      var bIndex = args.virtualInfo.blockIndexes;\n      var page = args.virtualInfo.page;\n      args.virtualInfo.blockIndexes = [1, 2];\n\n      if (isVFFrozenOnly) {\n        args.virtualInfo.page = 1;\n      }\n\n      var data = isVFFrozenOnly ? this.initialPageRecords : dataSource;\n      var mhdrData = this.vgenerator.generateRows(data, args);\n      mhdrData.splice(this.parent.frozenRows);\n\n      for (var i = 0; i < this.parent.frozenRows; i++) {\n        mhdrData[i].cells.splice(0, this.parent.getFrozenColumns());\n        tr = row.render(mhdrData[i], columns);\n        hdrfrag.appendChild(tr);\n      }\n\n      args.virtualInfo.blockIndexes = bIndex;\n      args.virtualInfo.page = page;\n\n      if (isVFFrozenOnly && args.virtualInfo.page === 1) {\n        modelData.splice(0, this.parent.frozenRows);\n      }\n    }\n\n    this.virtualFrozenHdrRefresh(hdrfrag, modelData, row, args, dataSource, columns);\n\n    if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n      this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage] = [];\n    }\n\n    for (var i = startIndex, len = modelData.length; i < len; i++) {\n      this.rows.push(modelData[i]);\n\n      if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n        this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage].push(modelData[i]);\n        this.setRowsInLazyGroup(modelData[i], i);\n\n        if (isNullOrUndefined(modelData[i].indent)) {\n          continue;\n        }\n      }\n\n      this.setInfiniteVisibleRows(args, modelData[i], tableName);\n\n      if (isGroupAdaptive(gObj) && args.virtualInfo && args.virtualInfo.blockIndexes && this.rowElements.length >= args.virtualInfo.blockIndexes.length * this.parent.contentModule.getBlockSize() && blockLoad) {\n        this.parent.currentViewData['records'] = this.rows.map(function (m) {\n          return m.data;\n        });\n        break;\n      }\n\n      if (!gObj.rowTemplate) {\n        tr = row.render(modelData[i], columns);\n        var isVFreorder = this.ensureFrozenHeaderRender(args);\n\n        if (gObj.frozenRows && i < gObj.frozenRows && !isInfiniteScroll && args.requestType !== 'virtualscroll' && isVFreorder && this.ensureVirtualFrozenHeaderRender(args)) {\n          hdrfrag.appendChild(tr);\n        } else {\n          frag.appendChild(tr);\n        }\n\n        if (modelData[i].isExpand) {\n          gObj.notify(events.expandChildGrid, tr.cells[gObj.groupSettings.columns.length]);\n        }\n      } else {\n        var rowTemplateID = gObj.element.id + 'rowTemplate';\n        var elements = void 0;\n\n        if (gObj.isReact) {\n          var isHeader = gObj.frozenRows && i < gObj.frozenRows;\n          var copied = extend({\n            index: i\n          }, dataSource[i]);\n          gObj.getRowTemplate()(copied, gObj, 'rowTemplate', rowTemplateID, null, null, isHeader ? hdrfrag : frag);\n          gObj.renderTemplates();\n        } else {\n          elements = gObj.getRowTemplate()(extend({\n            index: i\n          }, dataSource[i]), gObj, 'rowTemplate', rowTemplateID, undefined, undefined, undefined, this.parent['root']);\n        }\n\n        if (!gObj.isReact && elements[0].tagName === 'TBODY') {\n          for (var j = 0; j < elements.length; j++) {\n            var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n\n            if (isTR || elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length) {\n              tr = isTR ? elements[j] : elements[j].querySelector('tr');\n            }\n          }\n\n          if (gObj.frozenRows && i < gObj.frozenRows) {\n            hdrfrag.appendChild(tr);\n          } else {\n            frag.appendChild(tr);\n          }\n        } else {\n          if (gObj.frozenRows && i < gObj.frozenRows) {\n            tr = !gObj.isReact ? appendChildren(hdrfrag, elements) : hdrfrag.lastElementChild;\n          } else {\n            // frag.appendChild(tr);\n            if (!gObj.isReact) {\n              tr = appendChildren(frag, elements);\n            }\n\n            trElement = gObj.isReact ? frag.lastElementChild : tr.lastElementChild;\n          }\n        }\n\n        var arg = {\n          data: modelData[i].data,\n          row: trElement ? trElement : tr\n        };\n        this.parent.trigger(events.rowDataBound, arg);\n      }\n\n      if (modelData[i].isDataRow) {\n        this.rowElements.push(tr);\n      }\n\n      this.ariaService.setOptions(this.getTable(), {\n        colcount: gObj.getColumns().length.toString()\n      });\n    }\n\n    if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n      this.parent.notify(events.refreshExpandandCollapse, {\n        rows: this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]\n      });\n    }\n\n    if (isFrozenGrid) {\n      contentModule.splitRows(tableName);\n    }\n\n    if (gObj.frozenRows && args.requestType !== 'virtualscroll' && !isInfiniteScroll && this.ensureVirtualFrozenHeaderRender(args) || args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo && args.virtualInfo.sentinelInfo.axis === 'X') {\n      hdrTbody = isFrozenGrid ? contentModule.getFrozenHeader(tableName) : gObj.getHeaderTable().querySelector(literals.tbody);\n\n      if (isReact) {\n        var parentTable = hdrTbody.parentElement;\n        remove(hdrTbody);\n        parentTable.appendChild(hdrfrag);\n      } else {\n        hdrTbody.innerHTML = '';\n        hdrTbody.appendChild(hdrfrag);\n      }\n    }\n\n    if (!gObj.enableVirtualization && gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n      cont.style.height = cont.offsetHeight - hdrTbody.offsetHeight + 'px';\n    }\n\n    args.rows = this.rows.slice(0);\n\n    if (isFrozenGrid) {\n      contentModule.setIsFrozen(args, tableName);\n    }\n\n    this.index = idx;\n    getUpdateUsingRaf(function () {\n      _this.parent.notify(events.beforeFragAppend, args);\n\n      var isVFTable = _this.parent.enableVirtualization && _this.parent.isFrozenGrid();\n\n      if (!_this.parent.enableVirtualization && !isInfiniteScroll) {\n        if (_this.parent.isFrozenGrid()) {\n          remove(contentModule.getTbody(tableName));\n          tbdy = _this.parent.createElement(literals.tbody, {\n            attrs: {\n              role: 'rowgroup'\n            }\n          });\n        } else {\n          _this.tbody.innerHTML = '';\n          remove(_this.tbody);\n          _this.tbody = _this.parent.createElement(literals.tbody, {\n            attrs: {\n              role: 'rowgroup'\n            }\n          });\n        }\n      }\n\n      if (isFrozenGrid && !isVFTable && !_this.parent.enableInfiniteScrolling) {\n        _this.appendContent(tbdy, frag, args, tableName);\n      } else {\n        if (gObj.rowTemplate) {\n          updateBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate', gObj);\n        }\n\n        if (isVFTable) {\n          if (args.renderFrozenRightContent) {\n            var frCont = gObj.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n\n            _this.appendContent(frCont, frag, args);\n          } else if (!args.renderMovableContent) {\n            _this.appendContent(fCont.querySelector(literals.tbody), frag, args);\n          } else {\n            _this.appendContent(mCont.querySelector(literals.tbody), frag, args);\n\n            args.renderMovableContent = false;\n          }\n\n          if (!_this.parent.getFrozenColumns()) {\n            contentModule.renderNextFrozentPart(args, tableName);\n          }\n        } else {\n          if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling) {\n            _this.isAddRows = false;\n\n            _this.parent.notify(events.removeInfiniteRows, {\n              args: args\n            });\n\n            _this.parent.notify(events.appendInfiniteContent, {\n              tbody: tbdy ? tbdy : _this.tbody,\n              frag: frag,\n              args: args,\n              rows: _this.rows,\n              rowElements: _this.rowElements,\n              visibleRows: _this.visibleRows,\n              tableName: tableName\n            });\n\n            if (!frzCols && isFrozenGrid) {\n              if (gObj.getFrozenMode() !== literals.leftRight && (tableName === literals.frozenLeft || tableName === literals.frozenRight) || gObj.getFrozenMode() === literals.leftRight && (tableName === literals.frozenLeft || tableName === 'movable')) {\n                _this.refreshContentRows(extend({}, args));\n              }\n            }\n          } else {\n            _this.useGroupCache = false;\n\n            _this.appendContent(_this.tbody, frag, args);\n          }\n        }\n      }\n\n      if (frzCols) {\n        contentModule.renderNextFrozentPart(args, tableName);\n      }\n\n      frag = null;\n    }, this.rafCallback(extend({}, args)));\n  };\n\n  ContentRender.prototype.emptyVcRows = function () {\n    this.parent.vcRows = [];\n    this.parent.vRows = [];\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ContentRender.prototype.appendContent = function (tbody, frag, args, tableName) {\n    var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n\n    if (isReact) {\n      this.getTable().appendChild(frag);\n    } else {\n      tbody.appendChild(frag);\n      this.getTable().appendChild(tbody);\n    }\n  };\n\n  ContentRender.prototype.setRowsInLazyGroup = function (row, index) {\n    if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n      this.parent.contentModule.maintainRows(row, index);\n    }\n  };\n\n  ContentRender.prototype.setGroupCache = function (data, args) {\n    if (!this.useGroupCache && this.parent.groupSettings.enableLazyLoading) {\n      this.parent.notify(events.setGroupCache, {\n        args: args,\n        data: data\n      });\n    }\n  };\n\n  ContentRender.prototype.ensureFrozenHeaderRender = function (args) {\n    return !(this.parent.enableVirtualization && (args.requestType === 'reorder' || args.requestType === 'refresh') || this.parent.infiniteScrollSettings.enableCache && this.parent.frozenRows && this.parent.infiniteScrollModule.requestType === 'delete' && this.parent.pageSettings.currentPage !== 1);\n  };\n\n  ContentRender.prototype.ensureVirtualFrozenHeaderRender = function (args) {\n    return !(this.parent.enableVirtualization && args.requestType === 'delete');\n  };\n\n  ContentRender.prototype.checkCache = function (modelData, args) {\n    if (this.parent.infiniteScrollSettings.enableCache && args.requestType === 'infiniteScroll') {\n      var index = args.isFrozen ? 1 : 0;\n      var frozenCols = this.parent.isFrozenGrid();\n      this.isAddRows = !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage]);\n\n      if (frozenCols && !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])) {\n        this.isAddRows = this.infiniteCache[this.parent.pageSettings.currentPage][index].length !== 0;\n      }\n\n      if (this.isAddRows) {\n        var data = !frozenCols ? this.infiniteCache[this.parent.pageSettings.currentPage] : this.infiniteCache[this.parent.pageSettings.currentPage][index];\n        modelData = this.parent.pageSettings.currentPage === 1 ? data.slice(this.parent.frozenRows) : data;\n      }\n\n      return modelData;\n    }\n\n    if (this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length && (args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder') && this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]) {\n      this.useGroupCache = true;\n      return this.parent.contentModule.initialGroupRows(args.requestType === 'reorder');\n    }\n\n    return null;\n  };\n\n  ContentRender.prototype.setInfiniteVisibleRows = function (args, data, tableName) {\n    var frozenCols = this.parent.isFrozenGrid();\n\n    if (this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache) {\n      if (frozenCols) {\n        if (tableName === literals.frozenLeft || this.parent.getFrozenMode() === 'Right' && tableName === literals.frozenRight) {\n          this.visibleFrozenRows.push(data);\n        } else if (tableName === 'movable') {\n          this.visibleRows.push(data);\n        } else {\n          this.rightFreezeRows.push(data);\n        }\n      } else if (!this.parent.infiniteScrollSettings.enableCache) {\n        this.visibleRows.push(data);\n      }\n    }\n  };\n\n  ContentRender.prototype.getCurrentBlockInfiniteRecords = function (isFreeze) {\n    var data = [];\n\n    if (this.parent.infiniteScrollSettings.enableCache) {\n      if (!Object.keys(this.infiniteCache).length) {\n        return [];\n      }\n\n      var frozenCols = this.parent.isFrozenGrid();\n      var rows = this.parent.getRows();\n      var index = parseInt(rows[this.parent.frozenRows].getAttribute(literals.ariaRowIndex), 10);\n      var first = Math.ceil((index + 1) / this.parent.pageSettings.pageSize);\n      index = parseInt(rows[rows.length - 1].getAttribute(literals.ariaRowIndex), 10);\n      var last = Math.ceil(index / this.parent.pageSettings.pageSize);\n\n      if (frozenCols) {\n        var idx = isFreeze ? 0 : 1;\n\n        for (var i = first; i <= last; i++) {\n          data = !data.length ? this.infiniteCache[i][idx] : data.concat(this.infiniteCache[i][idx]);\n        }\n\n        if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n          data = this.infiniteCache[1][idx].slice(0, this.parent.frozenRows).concat(data);\n        }\n      } else {\n        for (var i = first; i <= last; i++) {\n          data = !data.length ? this.infiniteCache[i] : data.concat(this.infiniteCache[i]);\n        }\n\n        if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n          data = this.infiniteCache[1].slice(0, this.parent.frozenRows).concat(data);\n        }\n      }\n    }\n\n    return data;\n  };\n\n  ContentRender.prototype.getReorderedVFRows = function (args) {\n    return this.parent.contentModule.getReorderedFrozenRows(args);\n  };\n\n  ContentRender.prototype.getReorderedRows = function (args) {\n    return this.parent.contentModule.getReorderedFrozenRows(args);\n  };\n\n  ContentRender.prototype.virtualFrozenHdrRefresh = function (hdrfrag, modelData, row, args, dataSource, columns) {\n    if (this.parent.frozenRows && this.parent.enableVirtualization && (args.requestType === 'reorder' || args.requestType === 'refresh')) {\n      var tr = void 0;\n      var fhdrData = [];\n\n      if (this.parent.isFrozenGrid()) {\n        this.currentMovableRows = dataSource;\n        fhdrData = this.getReorderedVFRows(args);\n      } else {\n        fhdrData = this.getReorderedRows(args);\n      }\n\n      for (var i = 0; i < fhdrData.length; i++) {\n        tr = row.render(fhdrData[i], columns);\n        hdrfrag.appendChild(tr);\n      }\n\n      if (args.virtualInfo.page === 1) {\n        modelData.splice(0, this.parent.frozenRows);\n      }\n\n      if (args.renderMovableContent) {\n        this.parent.currentViewData = this.currentMovableRows;\n        this.currentMovableRows = null;\n      }\n    }\n  };\n\n  ContentRender.prototype.getInfiniteRows = function () {\n    var rows = [];\n    var frozenCols = this.parent.isFrozenGrid();\n\n    if (this.parent.enableInfiniteScrolling) {\n      if (this.parent.infiniteScrollSettings.enableCache) {\n        var keys = Object.keys(this.infiniteCache);\n\n        for (var i = 0; i < keys.length; i++) {\n          rows = !frozenCols ? rows.concat(this.infiniteCache[keys[i]]) : rows.concat(this.infiniteCache[keys[i]][0]);\n        }\n      } else {\n        rows = frozenCols ? this.visibleFrozenRows : this.visibleRows;\n      }\n    }\n\n    return rows;\n  };\n\n  ContentRender.prototype.getInfiniteMovableRows = function () {\n    var infiniteCacheRows = this.getCurrentBlockInfiniteRecords();\n    var infiniteRows = this.parent.enableInfiniteScrolling ? infiniteCacheRows.length ? infiniteCacheRows : this.visibleRows : [];\n    return infiniteRows;\n  };\n  /**\n   * Get the content div element of grid\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  ContentRender.prototype.getPanel = function () {\n    return this.contentPanel;\n  };\n  /**\n   * Set the content div element of grid\n   *\n   * @param  {Element} panel - specifies the panel\n   * @returns {void}\n   */\n\n\n  ContentRender.prototype.setPanel = function (panel) {\n    this.contentPanel = panel;\n  };\n  /**\n   * Get the content table element of grid\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  ContentRender.prototype.getTable = function () {\n    return this.contentTable;\n  };\n  /**\n   * Set the content table element of grid\n   *\n   * @param  {Element} table - specifies the table\n   * @returns {void}\n   */\n\n\n  ContentRender.prototype.setTable = function (table) {\n    this.contentTable = table;\n  };\n  /**\n   * Get the Movable Row collection in the Freeze pane Grid.\n   *\n   * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>} returns the row\n   */\n\n\n  ContentRender.prototype.getRows = function () {\n    var infiniteRows = this.getInfiniteRows();\n    return infiniteRows.length ? infiniteRows : this.parent.getFrozenColumns() ? this.freezeRows : this.rows;\n  };\n  /**\n   * Get the Movable Row collection in the Freeze pane Grid.\n   *\n   * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>} returns the row\n   */\n\n\n  ContentRender.prototype.getMovableRows = function () {\n    var infiniteRows = this.getInfiniteMovableRows();\n    return infiniteRows.length ? infiniteRows : this.movableRows;\n  };\n  /**\n   * Get the content table data row elements\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  ContentRender.prototype.getRowElements = function () {\n    return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements;\n  };\n  /**\n   * Get the Freeze pane movable content table data row elements\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  ContentRender.prototype.getMovableRowElements = function () {\n    return this.rowElements;\n  };\n  /**\n   * Get the content table data row elements\n   *\n   * @param {Element[]} elements - specifies the elements\n   * @returns {void}\n   */\n\n\n  ContentRender.prototype.setRowElements = function (elements) {\n    this.rowElements = elements;\n  };\n  /**\n   * Get the header colgroup element\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  ContentRender.prototype.getColGroup = function () {\n    return this.colgroup;\n  };\n  /**\n   * Set the header colgroup element\n   *\n   * @param {Element} colGroup - specifies the colgroup\n   * @returns {Element} returns the element\n   */\n\n\n  ContentRender.prototype.setColGroup = function (colGroup) {\n    if (!isNullOrUndefined(colGroup)) {\n      colGroup.id = 'content-' + colGroup.id;\n    }\n\n    return this.colgroup = colGroup;\n  };\n  /**\n   * Function to hide content table column based on visible property\n   *\n   * @param {Column[]} columns - specifies the column\n   * @returns {void}\n   */\n\n\n  ContentRender.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var isFrozenGrid = this.parent.isFrozenGrid();\n    var frzCols = gObj.getFrozenColumns();\n    var rows = [];\n\n    if (isFrozenGrid) {\n      var fRows = this.freezeRows;\n      var mRows = this.movableRows;\n      var rowLen = fRows.length;\n      var cellLen = void 0;\n      var rightRows = [];\n\n      if (gObj.getFrozenMode() === literals.leftRight) {\n        rightRows = gObj.getFrozenRightRowsObject();\n      }\n\n      for (var i = 0, row = void 0; i < rowLen; i++) {\n        cellLen = mRows[i].cells.length;\n        var rightLen = rightRows.length ? rightRows[i].cells.length : 0;\n        row = fRows[i].clone();\n\n        for (var j = 0; j < cellLen; j++) {\n          row.cells.push(mRows[i].cells[j]);\n        }\n\n        for (var k = 0; k < rightLen; k++) {\n          row.cells.push(rightRows[i].cells[k]);\n        }\n\n        rows.push(row);\n      }\n    } else {\n      rows = this.getRows();\n    }\n\n    var testRow;\n    rows.some(function (r) {\n      if (r.isDataRow) {\n        testRow = r;\n      }\n\n      return r.isDataRow;\n    });\n    var needFullRefresh = true;\n\n    if (!gObj.groupSettings.columns.length && testRow) {\n      needFullRefresh = false;\n    }\n\n    var tr = gObj.getDataRows();\n    var args = {};\n    var infiniteData = this.infiniteRowVisibility();\n    var contentrows = infiniteData ? infiniteData : this.rows.filter(function (row) {\n      return !row.isDetailRow;\n    });\n\n    for (var c = 0, clen = columns.length; c < clen; c++) {\n      var column = columns[c];\n      var idx = this.parent.getNormalizedColumnIndex(column.uid);\n      var colIdx = this.parent.getColumnIndexByUid(column.uid);\n      var displayVal = column.visible === true ? '' : 'none';\n\n      if (idx !== -1 && testRow && idx < testRow.cells.length) {\n        if (isFrozenGrid) {\n          if (column.getFreezeTableName() !== 'movable') {\n            if (column.getFreezeTableName() === literals.frozenRight) {\n              var left = this.parent.getFrozenLeftColumnsCount();\n              var movable = this.parent.getMovableColumnsCount();\n              colIdx = idx = idx - (left + movable);\n              var colG = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.colGroup);\n              setStyleAttribute(colG.childNodes[idx], {\n                'display': displayVal\n              });\n              contentrows = gObj.getFrozenRightRowsObject();\n              tr = gObj.getFrozenRightDataRows();\n            } else {\n              setStyleAttribute(this.getColGroup().childNodes[idx], {\n                'display': displayVal\n              });\n              var infiniteFreezeData = this.infiniteRowVisibility(true);\n              contentrows = infiniteFreezeData ? infiniteFreezeData : this.freezeRows;\n              tr = gObj.getDataRows();\n            }\n          } else {\n            var mTable = gObj.getContent().querySelector('.' + literals.movableContent).querySelector(literals.colGroup);\n            colIdx = idx = idx - frzCols - this.parent.getFrozenLeftColumnsCount();\n            setStyleAttribute(mTable.childNodes[idx], {\n              'display': displayVal\n            });\n            tr = gObj.getMovableDataRows();\n            var infiniteMovableData = this.infiniteRowVisibility();\n            contentrows = infiniteMovableData ? infiniteMovableData : this.movableRows;\n          }\n        } else {\n          setStyleAttribute(this.getColGroup().childNodes[idx], {\n            'display': displayVal\n          });\n        }\n      }\n\n      if (!needFullRefresh) {\n        this.setDisplayNone(tr, colIdx, displayVal, contentrows);\n\n        if (isFrozenGrid) {\n          this.parent.notify(events.freezeRender, {\n            case: 'refreshHeight',\n            isModeChg: true\n          });\n        }\n      }\n\n      if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n        this.parent.updateMediaColumns(column);\n      }\n\n      this.parent.invokedFromMedia = false;\n    }\n\n    if (needFullRefresh) {\n      this.refreshContentRows({\n        requestType: 'refresh'\n      });\n    } else {\n      if (!this.parent.getFrozenColumns()) {\n        this.parent.notify(events.partialRefresh, {\n          rows: contentrows,\n          args: args\n        });\n      } else {\n        this.parent.notify(events.partialRefresh, {\n          rows: this.freezeRows,\n          args: {\n            isFrozen: true,\n            rows: this.freezeRows\n          }\n        });\n        this.parent.notify(events.partialRefresh, {\n          rows: this.movableRows,\n          args: {\n            isFrozen: false,\n            rows: this.movableRows\n          }\n        });\n      }\n    }\n  };\n  /**\n   * @param {Object} tr - specifies the trr\n   * @param {number} idx - specifies the idx\n   * @param {string} displayVal - specifies the displayval\n   * @param {Row<Column>} rows - specifies the rows\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ContentRender.prototype.setDisplayNone = function (tr, idx, displayVal, rows) {\n    setDisplayValue(tr, idx, displayVal, rows, this.parent, this.parent.isRowDragable());\n    this.parent.notify(events.infiniteShowHide, {\n      visible: displayVal,\n      index: idx,\n      isFreeze: this.isInfiniteFreeze\n    });\n  };\n\n  ContentRender.prototype.infiniteRowVisibility = function (isFreeze) {\n    var infiniteData;\n\n    if (this.parent.enableInfiniteScrolling) {\n      this.isInfiniteFreeze = isFreeze;\n\n      if (this.parent.infiniteScrollSettings.enableCache) {\n        infiniteData = isFreeze ? this.getCurrentBlockInfiniteRecords(true) : this.getCurrentBlockInfiniteRecords();\n      } else {\n        infiniteData = isFreeze ? this.visibleFrozenRows : this.visibleRows;\n      }\n    }\n\n    return infiniteData;\n  };\n\n  ContentRender.prototype.colGroupRefresh = function () {\n    if (this.getColGroup()) {\n      var colGroup = void 0;\n\n      if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() && this.parent.contentModule.isXaxis()) {\n        colGroup = this.parent.getMovableVirtualHeader().querySelector(literals.colGroup).cloneNode(true);\n      } else {\n        colGroup = this.getHeaderColGroup();\n      }\n\n      this.getTable().replaceChild(colGroup, this.getColGroup());\n      this.setColGroup(colGroup);\n    }\n  };\n\n  ContentRender.prototype.getHeaderColGroup = function () {\n    return this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n  };\n\n  ContentRender.prototype.initializeContentDrop = function () {\n    var gObj = this.parent;\n    this.droppable = new Droppable(gObj.element, {\n      accept: '.e-dragclone',\n      drop: this.drop\n    });\n  };\n\n  ContentRender.prototype.droppableDestroy = function () {\n    if (this.droppable && !this.droppable.isDestroyed) {\n      this.droppable.destroy();\n    }\n  };\n\n  ContentRender.prototype.canSkip = function (column, row, index) {\n    /**\n     * Skip the toggle visiblity operation when one of the following success\n     * 1. Grid has empty records\n     * 2. column visible property is unchanged\n     * 3. cell`s isVisible property is same as column`s visible property.\n     */\n    return isNullOrUndefined(row) || //(1)\n    isNullOrUndefined(column.visible) || //(2)\n    row.cells[index].visible === column.visible; //(3)\n  };\n\n  ContentRender.prototype.getModelGenerator = function () {\n    return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n  };\n\n  ContentRender.prototype.renderEmpty = function (tbody) {\n    this.getTable().appendChild(tbody);\n\n    if (this.parent.frozenRows) {\n      this.parent.getHeaderContent().querySelector(literals.tbody).innerHTML = '';\n    }\n  };\n\n  ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n    this.parent.notify(events.setFreezeSelection, {\n      uid: uid,\n      set: set,\n      clearAll: clearAll\n    });\n    var isFrozen = this.parent.isFrozenGrid();\n\n    if (isFrozen && this.parent.enableVirtualization) {\n      return;\n    }\n\n    if (isFrozen) {\n      var rows = this.getMovableRows().filter(function (row) {\n        return clearAll || uid === row.uid;\n      });\n\n      for (var i = 0; i < rows.length; i++) {\n        rows[i].isSelected = set;\n      }\n    }\n\n    var row = this.getRows().filter(function (row) {\n      return clearAll || uid === row.uid;\n    });\n\n    for (var j = 0; j < row.length; j++) {\n      row[j].isSelected = set;\n      var cells = row[j].cells;\n\n      for (var k = 0; k < cells.length; k++) {\n        cells[k].isSelected = set;\n      }\n    }\n  };\n\n  ContentRender.prototype.getRowByIndex = function (index) {\n    index = this.getInfiniteRowIndex(index);\n    return this.parent.getDataRows()[index];\n  };\n\n  ContentRender.prototype.getInfiniteRowIndex = function (index) {\n    if (this.parent.infiniteScrollSettings.enableCache) {\n      var fRows = this.parent.frozenRows;\n      var idx = fRows > index ? 0 : fRows;\n      var firstRowIndex = parseInt(this.parent.getRows()[idx].getAttribute(literals.ariaRowIndex), 10);\n      index = fRows > index ? index : index - firstRowIndex + fRows;\n    }\n\n    return index;\n  };\n\n  ContentRender.prototype.getVirtualRowIndex = function (index) {\n    return index;\n  };\n\n  ContentRender.prototype.getMovableRowByIndex = function (index) {\n    index = this.getInfiniteRowIndex(index);\n    return this.parent.getMovableDataRows()[index];\n  };\n\n  ContentRender.prototype.enableAfterRender = function (e) {\n    if (e.module === 'group' && e.enable) {\n      this.generator = this.getModelGenerator();\n    }\n  };\n\n  ContentRender.prototype.setRowObjects = function (rows) {\n    this.rows = rows;\n  };\n  /**\n   * @param {NotifyArgs} args - specifies the args\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ContentRender.prototype.immutableModeRendering = function (args) {\n    var _this = this;\n\n    if (args === void 0) {\n      args = {};\n    }\n\n    var gObj = this.parent;\n    gObj.hideSpinner();\n    var key = gObj.getPrimaryKeyFieldNames()[0];\n    var oldKeys = {};\n    var newKeys = {};\n    var newRowObjs = [];\n    var oldIndexes = {};\n    var oldRowObjs = gObj.getRowsObject().slice();\n    var batchChangeKeys = this.getBatchEditedRecords(key, oldRowObjs);\n    var newIndexes = {};\n    var hasBatch = Object.keys(batchChangeKeys).length !== 0;\n\n    if (gObj.getContent().querySelector('.e-emptyrow') || args.requestType === 'reorder' || this.parent.groupSettings.columns.length) {\n      this.refreshContentRows(args);\n    } else {\n      if (gObj.currentViewData.length === 0) {\n        return;\n      }\n\n      var oldRowElements = {};\n      var tbody = gObj.createElement(literals.tbody, {\n        attrs: {\n          role: 'rowgroup'\n        }\n      });\n      var dataSource = gObj.currentViewData;\n      var trs = [].slice.call(this.getTable().querySelector(literals.tbody).children);\n\n      if (this.prevCurrentView.length) {\n        var prevLen = this.prevCurrentView.length;\n        var currentLen = dataSource.length;\n\n        if (prevLen === currentLen) {\n          for (var i = 0; i < currentLen; i++) {\n            if (this.parent.editSettings.mode === 'Batch' && trs[i].classList.contains('e-insertedrow')) {\n              trs.splice(i, 1);\n              --i;\n              continue;\n            }\n\n            newKeys[dataSource[i][key]] = oldKeys[this.prevCurrentView[i][key]] = i;\n            newIndexes[i] = dataSource[i][key];\n            oldRowElements[oldRowObjs[i].uid] = trs[i];\n            oldIndexes[i] = this.prevCurrentView[i][key];\n          }\n        } else {\n          for (var i = 0; i < currentLen; i++) {\n            newKeys[dataSource[i][key]] = i;\n            newIndexes[i] = dataSource[i][key];\n          }\n\n          for (var i = 0; i < prevLen; i++) {\n            if (this.parent.editSettings.mode === 'Batch' && trs[i].classList.contains('e-insertedrow')) {\n              trs.splice(i, 1);\n              --i;\n              continue;\n            }\n\n            oldRowElements[oldRowObjs[i].uid] = trs[i];\n            oldKeys[this.prevCurrentView[i][key]] = i;\n            oldIndexes[i] = this.prevCurrentView[i][key];\n          }\n        }\n      }\n\n      for (var i = 0; i < dataSource.length; i++) {\n        var oldIndex = oldKeys[dataSource[i][key]];\n\n        if (!isNullOrUndefined(oldIndex)) {\n          var isEqual = false;\n\n          if (this.parent.enableDeepCompare) {\n            isEqual = this.objectEqualityChecker(this.prevCurrentView[oldIndex], dataSource[i]);\n          }\n\n          var tr = oldRowElements[oldRowObjs[oldIndex].uid];\n          newRowObjs.push(oldRowObjs[oldIndex]);\n\n          if (this.rowElements[oldIndex] && this.rowElements[oldIndex].getAttribute('data-uid') === newRowObjs[i].uid && (hasBatch && isNullOrUndefined(batchChangeKeys[newIndexes[i]]) || !hasBatch && (isEqual || this.prevCurrentView[oldIndex] === dataSource[i]))) {\n            if (oldIndex !== i) {\n              this.refreshImmutableContent(i, tr, newRowObjs[i]);\n            }\n\n            tbody.appendChild(tr);\n            continue;\n          }\n\n          if (hasBatch && !isNullOrUndefined(batchChangeKeys[newIndexes[i]]) || !this.parent.enableDeepCompare && dataSource[i] !== this.prevCurrentView[oldIndex] || this.parent.enableDeepCompare && !isEqual) {\n            oldRowObjs[oldIndex].setRowValue(dataSource[i]);\n          }\n\n          tbody.appendChild(tr);\n          this.refreshImmutableContent(i, tr, newRowObjs[i]);\n        } else {\n          var row = new RowRenderer(this.serviceLocator, null, gObj);\n          var modelData = this.generator.generateRows([dataSource[i]]);\n          newRowObjs.push(modelData[0]);\n          var tr = row.render(modelData[0], gObj.getColumns());\n          tbody.appendChild(tr);\n          this.refreshImmutableContent(i, tr, newRowObjs[i]);\n        }\n      }\n\n      this.rows = newRowObjs;\n      this.rowElements = [].slice.call(tbody.children);\n      remove(this.getTable().querySelector(literals.tbody));\n      this.getTable().appendChild(tbody);\n      this.parent.trigger(events.dataBound, {}, function () {\n        if (_this.parent.allowTextWrap) {\n          _this.parent.notify(events.freezeRender, {\n            case: 'textwrap'\n          });\n        }\n      });\n\n      if (args) {\n        var action = (args.requestType || '').toLowerCase() + '-complete';\n        this.parent.notify(action, args);\n      }\n    }\n  };\n\n  ContentRender.prototype.objectEqualityChecker = function (old, next) {\n    var keys = Object.keys(old);\n    var isEqual = true;\n\n    for (var i = 0; i < keys.length; i++) {\n      if (old[keys[i]] !== next[keys[i]]) {\n        var isDate = old[keys[i]] instanceof Date && next[keys[i]] instanceof Date;\n\n        if (!isDate || old[keys[i]].getTime() !== next[keys[i]].getTime()) {\n          isEqual = false;\n          break;\n        }\n      }\n    }\n\n    return isEqual;\n  };\n\n  ContentRender.prototype.getBatchEditedRecords = function (primaryKey, rows) {\n    var keys = {};\n    var changes = this.parent.getBatchChanges();\n    var changedRecords = [];\n    var addedRecords = [];\n\n    if (Object.keys(changes).length) {\n      changedRecords = changes.changedRecords;\n      addedRecords = changes.addedRecords;\n    }\n\n    var args = {\n      cancel: false\n    };\n    this.parent.notify(events.immutableBatchCancel, {\n      rows: rows,\n      args: args\n    });\n\n    if (addedRecords.length) {\n      if (this.parent.editSettings.newRowPosition === 'Bottom') {\n        rows.splice(rows.length - 1, addedRecords.length);\n      } else {\n        if (!args.cancel) {\n          rows.splice(0, addedRecords.length);\n        }\n      }\n    }\n\n    for (var i = 0; i < changedRecords.length; i++) {\n      keys[changedRecords[i][primaryKey]] = i;\n    }\n\n    return keys;\n  };\n\n  ContentRender.prototype.refreshImmutableContent = function (index, tr, row) {\n    row.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n\n    if (row.isAltRow) {\n      tr.classList.add('e-altrow');\n    } else {\n      tr.classList.remove('e-altrow');\n    }\n\n    row.index = index;\n    row.edit = undefined;\n    row.isDirty = false;\n    tr.setAttribute(literals.ariaRowIndex, index.toString());\n    this.updateCellIndex(tr, index);\n  };\n\n  ContentRender.prototype.updateCellIndex = function (rowEle, index) {\n    for (var i = 0; i < rowEle.cells.length; i++) {\n      rowEle.cells[i].setAttribute('index', index.toString());\n    }\n  };\n\n  return ContentRender;\n}();\n\nexport { ContentRender };","map":{"version":3,"names":["Droppable","isNullOrUndefined","extend","setStyleAttribute","remove","updateBlazorTemplate","getUpdateUsingRaf","appendChildren","setDisplayValue","clearReactVueTemplates","events","RowRenderer","CellMergeRender","RowModelGenerator","GroupModelGenerator","isGroupAdaptive","literals","ContentRender","parent","serviceLocator","_this","rows","freezeRows","movableRows","freezeRowElements","currentInfo","prevCurrentView","isLoaded","viewColIndexes","drop","e","notify","columnDrop","target","droppedElement","infiniteCache","isRemove","visibleRows","visibleFrozenRows","rightFreezeRows","isAddRows","isInfiniteFreeze","useGroupCache","rafCallback","args","arg","isFrozenGrid","enableVirtualization","tableName","getFrozenMode","leftRight","enableColumnVirtualization","requestType","mHdr","slice","call","getMovableVirtualHeader","getElementsByClassName","row","fHdr","getFrozenVirtualHeader","length","ariaService","setBusy","getPanel","querySelector","content","isDestroyed","enableInfiniteScrolling","getRowsObject","prevPage","infiniteScrollSettings","enableCache","maxBlock","maxBlocks","rowIdx","parseInt","rowElements","getAttribute","startIdx","Math","ceil","pageSettings","pageSize","i","count","concat","isFrozen","renderFrozenRightContent","getFrozenRightRowsObject","contentReady","isManualRefresh","trigger","dataBound","allowTextWrap","freezeRender","case","action","toLowerCase","cancel","actionComplete","hideSpinner","getService","enableDeepCompare","getDataModule","isRemote","generator","getModelGenerator","groupSettings","enableLazyLoading","on","columnVisibilityChanged","setVisible","colGroupRefresh","uiUpdate","enableAfterRender","refreshInfiniteModeBlocks","refreshContentRows","beforeCellFocused","destroy","droppableDestroy","prototype","byKey","keyArgs","pressedKey","undefined","renderPanel","gObj","div","element","gridContent","setOptions","busy","setPanel","createElement","className","innerDiv","appendChild","renderTable","contentDiv","virtualTable","virtualTrack","createContentTable","setTable","table","getTable","multiselectable","selectionSettings","type","initializeContentDrop","frozenRows","getHeaderContent","classList","add","id","firstElementChild","attrs","cellspacing","role","setColGroup","getHeaderTable","colGroup","cloneNode","getColGroup","tbody","currentViewData","dataSource","currentMovableRows","contentModule","isReact","rowTemplate","frag","document","createDocumentFragment","initialPageRecords","hdrfrag","columns","getColumns","tr","hdrTbody","frzCols","getFrozenColumns","trElement","isInfiniteScroll","destroyChildGrid","fCont","frozenContent","mCont","movableContent","cont","tbdy","some","value","emptyVcRows","modelData","virtualInfo","sentinelInfo","axis","generateRows","renderMovableContent","checkCache","setGroupCache","setInfiniteCache","idx","cells","index","setTbody","getTbody","isFrozenLeft","frozenRight","registeredTemplate","template","templatetoclear","j","rootNodes","parentNode","push","destroyTemplate","isVue","templates","cellMerge","updateVirtualCells","startIndex","blockLoad","vcRows","top_1","scrollTop","offsets","top","offsets_1","vGroupOffsets","bSize","values","Object","keys","map","key","m","direction","isEndBlock","blockIndexes","round","contentPanel","offsetHeight","scrollHeight","rowObject","isVFFrozenOnly","bIndex","page","data","mhdrData","vgenerator","splice","render","virtualFrozenHdrRefresh","refRowsObj","currentPage","len","setRowsInLazyGroup","indent","setInfiniteVisibleRows","getBlockSize","isVFreorder","ensureFrozenHeaderRender","ensureVirtualFrozenHeaderRender","isExpand","expandChildGrid","rowTemplateID","elements","isHeader","copied","getRowTemplate","renderTemplates","tagName","isTR","nodeName","querySelectorAll","lastElementChild","rowDataBound","isDataRow","colcount","toString","refreshExpandandCollapse","splitRows","getFrozenHeader","parentTable","parentElement","innerHTML","Number","height","style","setIsFrozen","beforeFragAppend","isVFTable","appendContent","frCont","getContent","renderNextFrozentPart","infiniteScrollModule","removeInfiniteRows","appendInfiniteContent","frozenLeft","vRows","maintainRows","frozenCols","getGroupCache","initialGroupRows","getCurrentBlockInfiniteRecords","isFreeze","getRows","ariaRowIndex","first","last","getReorderedVFRows","getReorderedFrozenRows","getReorderedRows","fhdrData","getInfiniteRows","getInfiniteMovableRows","infiniteCacheRows","infiniteRows","panel","contentTable","getMovableRows","getRowElements","getMovableRowElements","setRowElements","colgroup","fRows","mRows","rowLen","cellLen","rightRows","rightLen","clone","k","testRow","r","needFullRefresh","getDataRows","infiniteData","infiniteRowVisibility","contentrows","filter","isDetailRow","c","clen","column","getNormalizedColumnIndex","uid","colIdx","getColumnIndexByUid","displayVal","visible","getFreezeTableName","left","getFrozenLeftColumnsCount","movable","getMovableColumnsCount","colG","childNodes","getFrozenRightDataRows","infiniteFreezeData","mTable","getMovableDataRows","infiniteMovableData","setDisplayNone","isModeChg","invokedFromMedia","hideAtMedia","updateMediaColumns","partialRefresh","isRowDragable","infiniteShowHide","isXaxis","getHeaderColGroup","replaceChild","gridHeader","droppable","accept","canSkip","allowGrouping","renderEmpty","setSelection","set","clearAll","setFreezeSelection","isSelected","getRowByIndex","getInfiniteRowIndex","firstRowIndex","getVirtualRowIndex","getMovableRowByIndex","module","enable","setRowObjects","immutableModeRendering","getPrimaryKeyFieldNames","oldKeys","newKeys","newRowObjs","oldIndexes","oldRowObjs","batchChangeKeys","getBatchEditedRecords","newIndexes","hasBatch","oldRowElements","trs","children","prevLen","currentLen","editSettings","mode","contains","oldIndex","isEqual","objectEqualityChecker","refreshImmutableContent","setRowValue","old","next","isDate","Date","getTime","primaryKey","changes","getBatchChanges","changedRecords","addedRecords","immutableBatchCancel","newRowPosition","isAltRow","enableAltRow","edit","isDirty","setAttribute","updateCellIndex","rowEle"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-grids/src/grid/renderer/content-renderer.js"],"sourcesContent":["import { Droppable } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, remove, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf, appendChildren, setDisplayValue, clearReactVueTemplates } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { isGroupAdaptive } from '../base/util';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     *\n     * @param {IGrid} parent - specifies the Igrid\n     * @param {ServiceLocator} serviceLocator - specifies the service locator\n     */\n    function ContentRender(parent, serviceLocator) {\n        var _this = this;\n        this.rows = [];\n        this.freezeRows = [];\n        this.movableRows = [];\n        this.freezeRowElements = [];\n        /** @hidden */\n        this.currentInfo = {};\n        /** @hidden */\n        this.prevCurrentView = [];\n        this.isLoaded = true;\n        this.viewColIndexes = [];\n        this.drop = function (e) {\n            _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n            remove(e.droppedElement);\n        };\n        this.infiniteCache = {};\n        this.isRemove = false;\n        /** @hidden */\n        this.visibleRows = [];\n        this.visibleFrozenRows = [];\n        this.rightFreezeRows = [];\n        this.isAddRows = false;\n        this.isInfiniteFreeze = false;\n        this.useGroupCache = false;\n        this.rafCallback = function (args) {\n            var arg = args;\n            return function () {\n                if (_this.parent.isFrozenGrid() && _this.parent.enableVirtualization) {\n                    var tableName = args.tableName;\n                    _this.isLoaded = _this.parent.getFrozenMode() === literals.leftRight ? tableName === 'frozen-right' : tableName === 'movable';\n                    if (_this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll' && _this.isLoaded) {\n                        var mHdr = [].slice.call(_this.parent.getMovableVirtualHeader().getElementsByClassName(literals.row));\n                        var fHdr = [].slice.call(_this.parent.getFrozenVirtualHeader().getElementsByClassName(literals.row));\n                        _this.isLoaded = mHdr.length === fHdr.length;\n                    }\n                }\n                _this.ariaService.setBusy(_this.getPanel().querySelector('.' + literals.content), false);\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                var rows = _this.rows.slice(0);\n                if (_this.parent.enableInfiniteScrolling) {\n                    rows = _this.parent.getRowsObject();\n                    var prevPage = arg.prevPage;\n                    if (_this.parent.infiniteScrollSettings.enableCache && prevPage) {\n                        var maxBlock = _this.parent.infiniteScrollSettings.maxBlocks;\n                        rows = [];\n                        var rowIdx = (parseInt(_this.rowElements[0].getAttribute('aria-rowindex'), 10) + 1);\n                        var startIdx = Math.ceil(rowIdx / _this.parent.pageSettings.pageSize);\n                        for (var i = 0, count = startIdx; i < maxBlock; i++, count++) {\n                            if (_this.infiniteCache[count]) {\n                                rows = rows.concat(_this.infiniteCache[count]);\n                            }\n                        }\n                    }\n                }\n                if (_this.parent.isFrozenGrid()) {\n                    rows = args.isFrozen ? _this.freezeRows : args.renderFrozenRightContent ? _this.parent.getFrozenRightRowsObject()\n                        : _this.movableRows;\n                }\n                _this.parent.notify(events.contentReady, { rows: rows, args: arg });\n                if (_this.isLoaded) {\n                    _this.parent.isManualRefresh = false;\n                    _this.parent.trigger(events.dataBound, {}, function () {\n                        if (_this.parent.allowTextWrap) {\n                            _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                        }\n                    });\n                }\n                if (arg) {\n                    var action = (arg.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, arg);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                if (_this.isLoaded) {\n                    _this.parent.hideSpinner();\n                }\n            };\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.parent.enableDeepCompare = this.parent.getDataModule().isRemote();\n        this.generator = this.getModelGenerator();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization && !this.parent.enableVirtualization\n            && !this.parent.groupSettings.enableLazyLoading) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.refreshInfiniteModeBlocks, this.refreshContentRows, this);\n        this.parent.on(events.beforeCellFocused, this.beforeCellFocused, this);\n        this.parent.on(events.destroy, this.droppableDestroy, this);\n    }\n    ContentRender.prototype.beforeCellFocused = function (e) {\n        if (e.byKey && (e.keyArgs.action === 'upArrow' || e.keyArgs.action === 'downArrow')) {\n            this.pressedKey = e.keyArgs.action;\n        }\n        else {\n            this.pressedKey = undefined;\n        }\n    };\n    /**\n     * The function is used to render grid content div\n     *\n     * @returns {void}\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var gObj = this.parent;\n        var div = this.parent.element.querySelector('.' + literals.gridContent);\n        if (div) {\n            this.ariaService.setOptions(this.parent.element.querySelector('.' + literals.content), { busy: false });\n            this.setPanel(div);\n            return;\n        }\n        div = this.parent.createElement('div', { className: literals.gridContent });\n        var innerDiv = this.parent.createElement('div', {\n            className: literals.content\n        });\n        this.ariaService.setOptions(innerDiv, { busy: false });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        gObj.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid content table\n     *\n     * @returns {void}\n     */\n    ContentRender.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var virtualTable = contentDiv.querySelector('.e-virtualtable');\n        var virtualTrack = contentDiv.querySelector('.e-virtualtrack');\n        if (this.parent.enableVirtualization && !isNullOrUndefined(virtualTable) && !isNullOrUndefined(virtualTrack)) {\n            remove(virtualTable);\n            remove(virtualTrack);\n        }\n        contentDiv.appendChild(this.createContentTable('_content_table'));\n        this.setTable(contentDiv.querySelector('.' + literals.table));\n        this.ariaService.setOptions(this.getTable(), {\n            multiselectable: this.parent.selectionSettings.type === 'Multiple'\n        });\n        this.initializeContentDrop();\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n        }\n    };\n    /**\n     * The function is used to create content table elements\n     *\n     * @param {string} id - specifies the id\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    ContentRender.prototype.createContentTable = function (id) {\n        var innerDiv = this.getPanel().firstElementChild;\n        if (this.getTable()) {\n            remove(this.getTable());\n        }\n        var table = innerDiv.querySelector('.' + literals.table) ? innerDiv.querySelector('.' + literals.table) :\n            this.parent.createElement('table', {\n                className: literals.table, attrs: {\n                    cellspacing: '0.25px', role: 'grid',\n                    id: this.parent.element.id + id\n                }\n            });\n        this.setColGroup(this.parent.getHeaderTable().querySelector(literals.colGroup).cloneNode(true));\n        table.appendChild(this.getColGroup());\n        table.appendChild(this.parent.createElement(literals.tbody, { attrs: { role: 'rowgroup' } }));\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * Refresh the content of the Grid.\n     *\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {void}\n     */\n    // tslint:disable-next-line:max-func-body-length\n    ContentRender.prototype.refreshContentRows = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        if (gObj.currentViewData.length === 0) {\n            return;\n        }\n        var dataSource = this.currentMovableRows || gObj.currentViewData;\n        var contentModule = this.parent.contentModule;\n        var isReact = gObj.isReact && !isNullOrUndefined(gObj.rowTemplate);\n        var frag = isReact ? gObj.createElement(literals.tbody, { attrs: { role: 'rowgroup' } }) : document.createDocumentFragment();\n        if (!this.initialPageRecords) {\n            this.initialPageRecords = extend([], dataSource);\n        }\n        var hdrfrag = isReact ? gObj.createElement(literals.tbody, { attrs: { role: 'rowgroup' } }) : document.createDocumentFragment();\n        var columns = gObj.getColumns();\n        var tr;\n        var hdrTbody;\n        var frzCols = gObj.getFrozenColumns();\n        var isFrozenGrid = this.parent.isFrozenGrid();\n        var trElement;\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling\n            && args.requestType === 'infiniteScroll';\n        gObj.notify(events.destroyChildGrid, {});\n        this.rowElements = [];\n        this.rows = [];\n        var fCont = this.getPanel().querySelector('.' + literals.frozenContent);\n        var mCont = this.getPanel().querySelector('.' + literals.movableContent);\n        var cont = this.getPanel().querySelector('.' + literals.content);\n        var tbdy;\n        var tableName;\n        if (isGroupAdaptive(gObj)) {\n            if (['sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder']\n                .some(function (value) { return args.requestType === value; })) {\n                this.emptyVcRows();\n            }\n        }\n        var modelData;\n        if (this.parent.enableVirtualization && this.parent.isFrozenGrid()) {\n            if (this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll'\n                && args.virtualInfo.sentinelInfo.axis === 'X') {\n                modelData = this.parent.contentModule.generateRows(dataSource, args);\n                args.renderMovableContent = true;\n            }\n            modelData = this.parent.contentModule.generateRows(dataSource, args);\n        }\n        else {\n            modelData = this.checkCache(modelData, args);\n            if (!this.isAddRows && !this.useGroupCache) {\n                modelData = this.generator.generateRows(dataSource, args);\n            }\n        }\n        this.setGroupCache(modelData, args);\n        this.parent.notify(events.setInfiniteCache, { isInfiniteScroll: isInfiniteScroll, modelData: modelData, args: args });\n        var idx = modelData[0].cells[0].index;\n        if (isFrozenGrid) {\n            tableName = contentModule.setTbody(modelData, args);\n            tbdy = contentModule.getTbody(tableName);\n        }\n        var isFrozenLeft = this.parent.getFrozenMode() === literals.leftRight && tableName === literals.frozenRight;\n        /* eslint-disable */\n        if (args.requestType !== 'infiniteScroll' && this.parent.registeredTemplate\n            && this.parent.registeredTemplate.template && !args.isFrozen && !isFrozenLeft) {\n            var templatetoclear = [];\n            for (var i = 0; i < this.parent.registeredTemplate.template.length; i++) {\n                for (var j = 0; j < this.parent.registeredTemplate.template[i].rootNodes.length; j++) {\n                    if (isNullOrUndefined(this.parent.registeredTemplate.template[i].rootNodes[j].parentNode)) {\n                        templatetoclear.push(this.parent.registeredTemplate.template[i]);\n                        /* eslint-enable */\n                    }\n                }\n            }\n            this.parent.destroyTemplate(['template'], templatetoclear);\n        }\n        if ((this.parent.isReact || this.parent.isVue) && args.requestType !== 'infiniteScroll' && !args.isFrozen) {\n            var templates = [\n                this.parent.isVue ? 'template' : 'columnTemplate', 'rowTemplate', 'detailTemplate',\n                'captionTemplate', 'commandsTemplate', 'groupFooterTemplate', 'groupCaptionTemplate'\n            ];\n            clearReactVueTemplates(this.parent, templates);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n            cellMerge.updateVirtualCells(modelData);\n        }\n        if (!isFrozenGrid) {\n            this.tbody = this.getTable().querySelector(literals.tbody);\n        }\n        var startIndex = 0;\n        var blockLoad = true;\n        if (isGroupAdaptive(gObj) && gObj.vcRows.length) {\n            var top_1 = 'top';\n            var scrollTop = !isNullOrUndefined(args.virtualInfo.offsets) ? args.virtualInfo.offsets.top :\n                (!isNullOrUndefined(args.scrollTop) ? args.scrollTop[top_1] : 0);\n            if (scrollTop !== 0) {\n                var offsets_1 = gObj.vGroupOffsets;\n                var bSize = gObj.pageSettings.pageSize / 2;\n                var values = Object.keys(offsets_1).map(function (key) { return offsets_1[key]; });\n                for (var m = 0; m < values.length; m++) {\n                    if (scrollTop < values[m]) {\n                        if (!isNullOrUndefined(args.virtualInfo) && args.virtualInfo.direction === 'up') {\n                            startIndex = m > 0 ? ((m - 1) * bSize) : (m * bSize);\n                            break;\n                        }\n                        else {\n                            startIndex = m * bSize;\n                            if (this.parent.contentModule.isEndBlock(m) || this.parent.contentModule.isEndBlock(m + 1)) {\n                                args.virtualInfo.blockIndexes = [m, m + 1];\n                            }\n                            break;\n                        }\n                    }\n                }\n                if (Math.round(scrollTop + this.contentPanel.firstElementChild.offsetHeight) >=\n                    this.contentPanel.firstElementChild.scrollHeight && !args.rowObject) {\n                    blockLoad = false;\n                }\n            }\n        }\n        var isVFFrozenOnly = gObj.frozenRows && !gObj.isFrozenGrid() && this.parent.enableVirtualization\n            && args.requestType === 'reorder';\n        if ((gObj.frozenRows && args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo.axis === 'X') || isVFFrozenOnly) {\n            var bIndex = args.virtualInfo.blockIndexes;\n            var page = args.virtualInfo.page;\n            args.virtualInfo.blockIndexes = [1, 2];\n            if (isVFFrozenOnly) {\n                args.virtualInfo.page = 1;\n            }\n            var data = isVFFrozenOnly ? this.initialPageRecords : dataSource;\n            var mhdrData = this.vgenerator\n                .generateRows(data, args);\n            mhdrData.splice(this.parent.frozenRows);\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                mhdrData[i].cells.splice(0, this.parent.getFrozenColumns());\n                tr = row.render(mhdrData[i], columns);\n                hdrfrag.appendChild(tr);\n            }\n            args.virtualInfo.blockIndexes = bIndex;\n            args.virtualInfo.page = page;\n            if (isVFFrozenOnly && args.virtualInfo.page === 1) {\n                modelData.splice(0, this.parent.frozenRows);\n            }\n        }\n        this.virtualFrozenHdrRefresh(hdrfrag, modelData, row, args, dataSource, columns);\n        if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n            this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage] = [];\n        }\n        for (var i = startIndex, len = modelData.length; i < len; i++) {\n            this.rows.push(modelData[i]);\n            if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n                this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage].push(modelData[i]);\n                this.setRowsInLazyGroup(modelData[i], i);\n                if (isNullOrUndefined(modelData[i].indent)) {\n                    continue;\n                }\n            }\n            this.setInfiniteVisibleRows(args, modelData[i], tableName);\n            if (isGroupAdaptive(gObj) && args.virtualInfo && args.virtualInfo.blockIndexes\n                && (this.rowElements.length >= (args.virtualInfo.blockIndexes.length * this.parent.contentModule.getBlockSize()))\n                && blockLoad) {\n                this.parent.currentViewData['records'] = this.rows.map(function (m) { return m.data; });\n                break;\n            }\n            if (!gObj.rowTemplate) {\n                tr = row.render(modelData[i], columns);\n                var isVFreorder = this.ensureFrozenHeaderRender(args);\n                if (gObj.frozenRows && i < gObj.frozenRows && !isInfiniteScroll && args.requestType !== 'virtualscroll' && isVFreorder\n                    && this.ensureVirtualFrozenHeaderRender(args)) {\n                    hdrfrag.appendChild(tr);\n                }\n                else {\n                    frag.appendChild(tr);\n                }\n                if (modelData[i].isExpand) {\n                    gObj.notify(events.expandChildGrid, tr.cells[gObj.groupSettings.columns.length]);\n                }\n            }\n            else {\n                var rowTemplateID = gObj.element.id + 'rowTemplate';\n                var elements = void 0;\n                if (gObj.isReact) {\n                    var isHeader = gObj.frozenRows && i < gObj.frozenRows;\n                    var copied = extend({ index: i }, dataSource[i]);\n                    gObj.getRowTemplate()(copied, gObj, 'rowTemplate', rowTemplateID, null, null, isHeader ? hdrfrag : frag);\n                    gObj.renderTemplates();\n                }\n                else {\n                    elements = gObj.getRowTemplate()(extend({ index: i }, dataSource[i]), gObj, 'rowTemplate', rowTemplateID, undefined, undefined, undefined, this.parent['root']);\n                }\n                if (!gObj.isReact && elements[0].tagName === 'TBODY') {\n                    for (var j = 0; j < elements.length; j++) {\n                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n                        }\n                    }\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        hdrfrag.appendChild(tr);\n                    }\n                    else {\n                        frag.appendChild(tr);\n                    }\n                }\n                else {\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        tr = !gObj.isReact ? appendChildren(hdrfrag, elements) : hdrfrag.lastElementChild;\n                    }\n                    else {\n                        // frag.appendChild(tr);\n                        if (!gObj.isReact) {\n                            tr = appendChildren(frag, elements);\n                        }\n                        trElement = gObj.isReact ? frag.lastElementChild : tr.lastElementChild;\n                    }\n                }\n                var arg = { data: modelData[i].data, row: trElement ? trElement : tr };\n                this.parent.trigger(events.rowDataBound, arg);\n            }\n            if (modelData[i].isDataRow) {\n                this.rowElements.push(tr);\n            }\n            this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n        }\n        if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n            this.parent.notify(events.refreshExpandandCollapse, {\n                rows: this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]\n            });\n        }\n        if (isFrozenGrid) {\n            contentModule.splitRows(tableName);\n        }\n        if ((gObj.frozenRows && args.requestType !== 'virtualscroll' && !isInfiniteScroll && this.ensureVirtualFrozenHeaderRender(args))\n            || (args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo && args.virtualInfo.sentinelInfo.axis === 'X')) {\n            hdrTbody = isFrozenGrid ? contentModule.getFrozenHeader(tableName) : gObj.getHeaderTable().querySelector(literals.tbody);\n            if (isReact) {\n                var parentTable = hdrTbody.parentElement;\n                remove(hdrTbody);\n                parentTable.appendChild(hdrfrag);\n            }\n            else {\n                hdrTbody.innerHTML = '';\n                hdrTbody.appendChild(hdrfrag);\n            }\n        }\n        if (!gObj.enableVirtualization && gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n            cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n        }\n        args.rows = this.rows.slice(0);\n        if (isFrozenGrid) {\n            contentModule.setIsFrozen(args, tableName);\n        }\n        this.index = idx;\n        getUpdateUsingRaf(function () {\n            _this.parent.notify(events.beforeFragAppend, args);\n            var isVFTable = _this.parent.enableVirtualization && _this.parent.isFrozenGrid();\n            if (!_this.parent.enableVirtualization && !isInfiniteScroll) {\n                if (_this.parent.isFrozenGrid()) {\n                    remove(contentModule.getTbody(tableName));\n                    tbdy = _this.parent.createElement(literals.tbody, { attrs: { role: 'rowgroup' } });\n                }\n                else {\n                    _this.tbody.innerHTML = '';\n                    remove(_this.tbody);\n                    _this.tbody = _this.parent.createElement(literals.tbody, { attrs: { role: 'rowgroup' } });\n                }\n            }\n            if (isFrozenGrid && !isVFTable && !_this.parent.enableInfiniteScrolling) {\n                _this.appendContent(tbdy, frag, args, tableName);\n            }\n            else {\n                if (gObj.rowTemplate) {\n                    updateBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate', gObj);\n                }\n                if (isVFTable) {\n                    if (args.renderFrozenRightContent) {\n                        var frCont = gObj.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n                        _this.appendContent(frCont, frag, args);\n                    }\n                    else if (!args.renderMovableContent) {\n                        _this.appendContent(fCont.querySelector(literals.tbody), frag, args);\n                    }\n                    else {\n                        _this.appendContent(mCont.querySelector(literals.tbody), frag, args);\n                        args.renderMovableContent = false;\n                    }\n                    if (!_this.parent.getFrozenColumns()) {\n                        contentModule.renderNextFrozentPart(args, tableName);\n                    }\n                }\n                else {\n                    if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling) {\n                        _this.isAddRows = false;\n                        _this.parent.notify(events.removeInfiniteRows, { args: args });\n                        _this.parent.notify(events.appendInfiniteContent, {\n                            tbody: tbdy ? tbdy : _this.tbody, frag: frag, args: args, rows: _this.rows,\n                            rowElements: _this.rowElements, visibleRows: _this.visibleRows,\n                            tableName: tableName\n                        });\n                        if (!frzCols && isFrozenGrid) {\n                            if ((gObj.getFrozenMode() !== literals.leftRight\n                                && (tableName === literals.frozenLeft || tableName === literals.frozenRight))\n                                || (gObj.getFrozenMode() === literals.leftRight\n                                    && (tableName === literals.frozenLeft || tableName === 'movable'))) {\n                                _this.refreshContentRows(extend({}, args));\n                            }\n                        }\n                    }\n                    else {\n                        _this.useGroupCache = false;\n                        _this.appendContent(_this.tbody, frag, args);\n                    }\n                }\n            }\n            if (frzCols) {\n                contentModule.renderNextFrozentPart(args, tableName);\n            }\n            frag = null;\n        }, this.rafCallback(extend({}, args)));\n    };\n    ContentRender.prototype.emptyVcRows = function () {\n        this.parent.vcRows = [];\n        this.parent.vRows = [];\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ContentRender.prototype.appendContent = function (tbody, frag, args, tableName) {\n        var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n        if (isReact) {\n            this.getTable().appendChild(frag);\n        }\n        else {\n            tbody.appendChild(frag);\n            this.getTable().appendChild(tbody);\n        }\n    };\n    ContentRender.prototype.setRowsInLazyGroup = function (row, index) {\n        if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n            this.parent.contentModule.maintainRows(row, index);\n        }\n    };\n    ContentRender.prototype.setGroupCache = function (data, args) {\n        if (!this.useGroupCache && this.parent.groupSettings.enableLazyLoading) {\n            this.parent.notify(events.setGroupCache, { args: args, data: data });\n        }\n    };\n    ContentRender.prototype.ensureFrozenHeaderRender = function (args) {\n        return !((this.parent.enableVirtualization\n            && (args.requestType === 'reorder' || args.requestType === 'refresh')) || (this.parent.infiniteScrollSettings.enableCache\n            && this.parent.frozenRows && this.parent.infiniteScrollModule.requestType === 'delete'\n            && this.parent.pageSettings.currentPage !== 1));\n    };\n    ContentRender.prototype.ensureVirtualFrozenHeaderRender = function (args) {\n        return !(this.parent.enableVirtualization && args.requestType === 'delete');\n    };\n    ContentRender.prototype.checkCache = function (modelData, args) {\n        if (this.parent.infiniteScrollSettings.enableCache && args.requestType === 'infiniteScroll') {\n            var index = args.isFrozen ? 1 : 0;\n            var frozenCols = this.parent.isFrozenGrid();\n            this.isAddRows = !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage]);\n            if (frozenCols && !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])) {\n                this.isAddRows = this.infiniteCache[this.parent.pageSettings.currentPage][index].length !== 0;\n            }\n            if (this.isAddRows) {\n                var data = !frozenCols ? this.infiniteCache[this.parent.pageSettings.currentPage]\n                    : this.infiniteCache[this.parent.pageSettings.currentPage][index];\n                modelData = this.parent.pageSettings.currentPage === 1 ? data.slice(this.parent.frozenRows) : data;\n            }\n            return modelData;\n        }\n        if (this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length &&\n            (args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder')\n            && this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]) {\n            this.useGroupCache = true;\n            return this.parent.contentModule.initialGroupRows(args.requestType === 'reorder');\n        }\n        return null;\n    };\n    ContentRender.prototype.setInfiniteVisibleRows = function (args, data, tableName) {\n        var frozenCols = this.parent.isFrozenGrid();\n        if (this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache) {\n            if (frozenCols) {\n                if (tableName === literals.frozenLeft || (this.parent.getFrozenMode() === 'Right' && tableName === literals.frozenRight)) {\n                    this.visibleFrozenRows.push(data);\n                }\n                else if (tableName === 'movable') {\n                    this.visibleRows.push(data);\n                }\n                else {\n                    this.rightFreezeRows.push(data);\n                }\n            }\n            else if (!this.parent.infiniteScrollSettings.enableCache) {\n                this.visibleRows.push(data);\n            }\n        }\n    };\n    ContentRender.prototype.getCurrentBlockInfiniteRecords = function (isFreeze) {\n        var data = [];\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            if (!Object.keys(this.infiniteCache).length) {\n                return [];\n            }\n            var frozenCols = this.parent.isFrozenGrid();\n            var rows = this.parent.getRows();\n            var index = parseInt(rows[this.parent.frozenRows].getAttribute(literals.ariaRowIndex), 10);\n            var first = Math.ceil((index + 1) / this.parent.pageSettings.pageSize);\n            index = parseInt(rows[rows.length - 1].getAttribute(literals.ariaRowIndex), 10);\n            var last = Math.ceil(index / this.parent.pageSettings.pageSize);\n            if (frozenCols) {\n                var idx = isFreeze ? 0 : 1;\n                for (var i = first; i <= last; i++) {\n                    data = !data.length ? this.infiniteCache[i][idx]\n                        : data.concat(this.infiniteCache[i][idx]);\n                }\n                if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n                    data = this.infiniteCache[1][idx].slice(0, this.parent.frozenRows).concat(data);\n                }\n            }\n            else {\n                for (var i = first; i <= last; i++) {\n                    data = !data.length ? this.infiniteCache[i] : data.concat(this.infiniteCache[i]);\n                }\n                if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n                    data = this.infiniteCache[1].slice(0, this.parent.frozenRows).concat(data);\n                }\n            }\n        }\n        return data;\n    };\n    ContentRender.prototype.getReorderedVFRows = function (args) {\n        return this.parent.contentModule.getReorderedFrozenRows(args);\n    };\n    ContentRender.prototype.getReorderedRows = function (args) {\n        return this.parent.contentModule.getReorderedFrozenRows(args);\n    };\n    ContentRender.prototype.virtualFrozenHdrRefresh = function (hdrfrag, modelData, row, args, dataSource, columns) {\n        if (this.parent.frozenRows && this.parent.enableVirtualization\n            && (args.requestType === 'reorder' || args.requestType === 'refresh')) {\n            var tr = void 0;\n            var fhdrData = [];\n            if (this.parent.isFrozenGrid()) {\n                this.currentMovableRows = dataSource;\n                fhdrData = this.getReorderedVFRows(args);\n            }\n            else {\n                fhdrData = this.getReorderedRows(args);\n            }\n            for (var i = 0; i < fhdrData.length; i++) {\n                tr = row.render(fhdrData[i], columns);\n                hdrfrag.appendChild(tr);\n            }\n            if (args.virtualInfo.page === 1) {\n                modelData.splice(0, this.parent.frozenRows);\n            }\n            if (args.renderMovableContent) {\n                this.parent.currentViewData = this.currentMovableRows;\n                this.currentMovableRows = null;\n            }\n        }\n    };\n    ContentRender.prototype.getInfiniteRows = function () {\n        var rows = [];\n        var frozenCols = this.parent.isFrozenGrid();\n        if (this.parent.enableInfiniteScrolling) {\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                var keys = Object.keys(this.infiniteCache);\n                for (var i = 0; i < keys.length; i++) {\n                    rows = !frozenCols ? rows.concat(this.infiniteCache[keys[i]]) : rows.concat(this.infiniteCache[keys[i]][0]);\n                }\n            }\n            else {\n                rows = frozenCols ? this.visibleFrozenRows : this.visibleRows;\n            }\n        }\n        return rows;\n    };\n    ContentRender.prototype.getInfiniteMovableRows = function () {\n        var infiniteCacheRows = this.getCurrentBlockInfiniteRecords();\n        var infiniteRows = this.parent.enableInfiniteScrolling ? infiniteCacheRows.length ? infiniteCacheRows\n            : this.visibleRows : [];\n        return infiniteRows;\n    };\n    /**\n     * Get the content div element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Set the content div element of grid\n     *\n     * @param  {Element} panel - specifies the panel\n     * @returns {void}\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the content table element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.getTable = function () {\n        return this.contentTable;\n    };\n    /**\n     * Set the content table element of grid\n     *\n     * @param  {Element} table - specifies the table\n     * @returns {void}\n     */\n    ContentRender.prototype.setTable = function (table) {\n        this.contentTable = table;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     *\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>} returns the row\n     */\n    ContentRender.prototype.getRows = function () {\n        var infiniteRows = this.getInfiniteRows();\n        return infiniteRows.length ? infiniteRows : this.parent.getFrozenColumns() ? this.freezeRows : this.rows;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     *\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>} returns the row\n     */\n    ContentRender.prototype.getMovableRows = function () {\n        var infiniteRows = this.getInfiniteMovableRows();\n        return infiniteRows.length ? infiniteRows : this.movableRows;\n    };\n    /**\n     * Get the content table data row elements\n     *\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.getRowElements = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements;\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     *\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.getMovableRowElements = function () {\n        return this.rowElements;\n    };\n    /**\n     * Get the content table data row elements\n     *\n     * @param {Element[]} elements - specifies the elements\n     * @returns {void}\n     */\n    ContentRender.prototype.setRowElements = function (elements) {\n        this.rowElements = elements;\n    };\n    /**\n     * Get the header colgroup element\n     *\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     *\n     * @param {Element} colGroup - specifies the colgroup\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.setColGroup = function (colGroup) {\n        if (!isNullOrUndefined(colGroup)) {\n            colGroup.id = 'content-' + colGroup.id;\n        }\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Function to hide content table column based on visible property\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     */\n    ContentRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var isFrozenGrid = this.parent.isFrozenGrid();\n        var frzCols = gObj.getFrozenColumns();\n        var rows = [];\n        if (isFrozenGrid) {\n            var fRows = this.freezeRows;\n            var mRows = this.movableRows;\n            var rowLen = fRows.length;\n            var cellLen = void 0;\n            var rightRows = [];\n            if (gObj.getFrozenMode() === literals.leftRight) {\n                rightRows = gObj.getFrozenRightRowsObject();\n            }\n            for (var i = 0, row = void 0; i < rowLen; i++) {\n                cellLen = mRows[i].cells.length;\n                var rightLen = rightRows.length ? rightRows[i].cells.length : 0;\n                row = fRows[i].clone();\n                for (var j = 0; j < cellLen; j++) {\n                    row.cells.push(mRows[i].cells[j]);\n                }\n                for (var k = 0; k < rightLen; k++) {\n                    row.cells.push(rightRows[i].cells[k]);\n                }\n                rows.push(row);\n            }\n        }\n        else {\n            rows = this.getRows();\n        }\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var needFullRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            needFullRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        var args = {};\n        var infiniteData = this.infiniteRowVisibility();\n        var contentrows = infiniteData ? infiniteData\n            : this.rows.filter(function (row) { return !row.isDetailRow; });\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                if (isFrozenGrid) {\n                    if (column.getFreezeTableName() !== 'movable') {\n                        if (column.getFreezeTableName() === literals.frozenRight) {\n                            var left = this.parent.getFrozenLeftColumnsCount();\n                            var movable = this.parent.getMovableColumnsCount();\n                            colIdx = idx = idx - (left + movable);\n                            var colG = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.colGroup);\n                            setStyleAttribute(colG.childNodes[idx], { 'display': displayVal });\n                            contentrows = gObj.getFrozenRightRowsObject();\n                            tr = gObj.getFrozenRightDataRows();\n                        }\n                        else {\n                            setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                            var infiniteFreezeData = this.infiniteRowVisibility(true);\n                            contentrows = infiniteFreezeData ? infiniteFreezeData : this.freezeRows;\n                            tr = gObj.getDataRows();\n                        }\n                    }\n                    else {\n                        var mTable = gObj.getContent().querySelector('.' + literals.movableContent).querySelector(literals.colGroup);\n                        colIdx = idx = idx - frzCols - this.parent.getFrozenLeftColumnsCount();\n                        setStyleAttribute(mTable.childNodes[idx], { 'display': displayVal });\n                        tr = gObj.getMovableDataRows();\n                        var infiniteMovableData = this.infiniteRowVisibility();\n                        contentrows = infiniteMovableData ? infiniteMovableData : this.movableRows;\n                    }\n                }\n                else {\n                    setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                }\n            }\n            if (!needFullRefresh) {\n                this.setDisplayNone(tr, colIdx, displayVal, contentrows);\n                if (isFrozenGrid) {\n                    this.parent.notify(events.freezeRender, { case: 'refreshHeight', isModeChg: true });\n                }\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (needFullRefresh) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            if (!this.parent.getFrozenColumns()) {\n                this.parent.notify(events.partialRefresh, { rows: contentrows, args: args });\n            }\n            else {\n                this.parent.notify(events.partialRefresh, { rows: this.freezeRows, args: { isFrozen: true, rows: this.freezeRows } });\n                this.parent.notify(events.partialRefresh, { rows: this.movableRows, args: { isFrozen: false, rows: this.movableRows } });\n            }\n        }\n    };\n    /**\n     * @param {Object} tr - specifies the trr\n     * @param {number} idx - specifies the idx\n     * @param {string} displayVal - specifies the displayval\n     * @param {Row<Column>} rows - specifies the rows\n     * @returns {void}\n     * @hidden\n     */\n    ContentRender.prototype.setDisplayNone = function (tr, idx, displayVal, rows) {\n        setDisplayValue(tr, idx, displayVal, rows, this.parent, this.parent.isRowDragable());\n        this.parent.notify(events.infiniteShowHide, { visible: displayVal, index: idx, isFreeze: this.isInfiniteFreeze });\n    };\n    ContentRender.prototype.infiniteRowVisibility = function (isFreeze) {\n        var infiniteData;\n        if (this.parent.enableInfiniteScrolling) {\n            this.isInfiniteFreeze = isFreeze;\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                infiniteData = isFreeze ? this.getCurrentBlockInfiniteRecords(true) : this.getCurrentBlockInfiniteRecords();\n            }\n            else {\n                infiniteData = isFreeze ? this.visibleFrozenRows : this.visibleRows;\n            }\n        }\n        return infiniteData;\n    };\n    ContentRender.prototype.colGroupRefresh = function () {\n        if (this.getColGroup()) {\n            var colGroup = void 0;\n            if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n                && this.parent.contentModule.isXaxis()) {\n                colGroup = this.parent.getMovableVirtualHeader().querySelector(literals.colGroup).cloneNode(true);\n            }\n            else {\n                colGroup = this.getHeaderColGroup();\n            }\n            this.getTable().replaceChild(colGroup, this.getColGroup());\n            this.setColGroup(colGroup);\n        }\n    };\n    ContentRender.prototype.getHeaderColGroup = function () {\n        return this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n    };\n    ContentRender.prototype.initializeContentDrop = function () {\n        var gObj = this.parent;\n        this.droppable = new Droppable(gObj.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    ContentRender.prototype.droppableDestroy = function () {\n        if (this.droppable && !this.droppable.isDestroyed) {\n            this.droppable.destroy();\n        }\n    };\n    ContentRender.prototype.canSkip = function (column, row, index) {\n        /**\n         * Skip the toggle visiblity operation when one of the following success\n         * 1. Grid has empty records\n         * 2. column visible property is unchanged\n         * 3. cell`s isVisible property is same as column`s visible property.\n         */\n        return isNullOrUndefined(row) || //(1)\n            isNullOrUndefined(column.visible) || //(2)\n            row.cells[index].visible === column.visible; //(3)\n    };\n    ContentRender.prototype.getModelGenerator = function () {\n        return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    };\n    ContentRender.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector(literals.tbody).innerHTML = '';\n        }\n    };\n    ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n        this.parent.notify(events.setFreezeSelection, { uid: uid, set: set, clearAll: clearAll });\n        var isFrozen = this.parent.isFrozenGrid();\n        if (isFrozen && this.parent.enableVirtualization) {\n            return;\n        }\n        if (isFrozen) {\n            var rows = this.getMovableRows().filter(function (row) { return clearAll || uid === row.uid; });\n            for (var i = 0; i < rows.length; i++) {\n                rows[i].isSelected = set;\n            }\n        }\n        var row = this.getRows().filter(function (row) { return clearAll || uid === row.uid; });\n        for (var j = 0; j < row.length; j++) {\n            row[j].isSelected = set;\n            var cells = row[j].cells;\n            for (var k = 0; k < cells.length; k++) {\n                cells[k].isSelected = set;\n            }\n        }\n    };\n    ContentRender.prototype.getRowByIndex = function (index) {\n        index = this.getInfiniteRowIndex(index);\n        return this.parent.getDataRows()[index];\n    };\n    ContentRender.prototype.getInfiniteRowIndex = function (index) {\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            var fRows = this.parent.frozenRows;\n            var idx = fRows > index ? 0 : fRows;\n            var firstRowIndex = parseInt(this.parent.getRows()[idx].getAttribute(literals.ariaRowIndex), 10);\n            index = fRows > index ? index : (index - firstRowIndex) + fRows;\n        }\n        return index;\n    };\n    ContentRender.prototype.getVirtualRowIndex = function (index) {\n        return index;\n    };\n    ContentRender.prototype.getMovableRowByIndex = function (index) {\n        index = this.getInfiniteRowIndex(index);\n        return this.parent.getMovableDataRows()[index];\n    };\n    ContentRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'group' && e.enable) {\n            this.generator = this.getModelGenerator();\n        }\n    };\n    ContentRender.prototype.setRowObjects = function (rows) {\n        this.rows = rows;\n    };\n    /**\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {void}\n     * @hidden\n     */\n    ContentRender.prototype.immutableModeRendering = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        gObj.hideSpinner();\n        var key = gObj.getPrimaryKeyFieldNames()[0];\n        var oldKeys = {};\n        var newKeys = {};\n        var newRowObjs = [];\n        var oldIndexes = {};\n        var oldRowObjs = gObj.getRowsObject().slice();\n        var batchChangeKeys = this.getBatchEditedRecords(key, oldRowObjs);\n        var newIndexes = {};\n        var hasBatch = Object.keys(batchChangeKeys).length !== 0;\n        if (gObj.getContent().querySelector('.e-emptyrow') || args.requestType === 'reorder'\n            || this.parent.groupSettings.columns.length) {\n            this.refreshContentRows(args);\n        }\n        else {\n            if (gObj.currentViewData.length === 0) {\n                return;\n            }\n            var oldRowElements = {};\n            var tbody = gObj.createElement(literals.tbody, { attrs: { role: 'rowgroup' } });\n            var dataSource = gObj.currentViewData;\n            var trs = [].slice.call(this.getTable().querySelector(literals.tbody).children);\n            if (this.prevCurrentView.length) {\n                var prevLen = this.prevCurrentView.length;\n                var currentLen = dataSource.length;\n                if (prevLen === currentLen) {\n                    for (var i = 0; i < currentLen; i++) {\n                        if (this.parent.editSettings.mode === 'Batch'\n                            && trs[i].classList.contains('e-insertedrow')) {\n                            trs.splice(i, 1);\n                            --i;\n                            continue;\n                        }\n                        newKeys[dataSource[i][key]] = oldKeys[this.prevCurrentView[i][key]] = i;\n                        newIndexes[i] = dataSource[i][key];\n                        oldRowElements[oldRowObjs[i].uid] = trs[i];\n                        oldIndexes[i] = this.prevCurrentView[i][key];\n                    }\n                }\n                else {\n                    for (var i = 0; i < currentLen; i++) {\n                        newKeys[dataSource[i][key]] = i;\n                        newIndexes[i] = dataSource[i][key];\n                    }\n                    for (var i = 0; i < prevLen; i++) {\n                        if (this.parent.editSettings.mode === 'Batch'\n                            && trs[i].classList.contains('e-insertedrow')) {\n                            trs.splice(i, 1);\n                            --i;\n                            continue;\n                        }\n                        oldRowElements[oldRowObjs[i].uid] = trs[i];\n                        oldKeys[this.prevCurrentView[i][key]] = i;\n                        oldIndexes[i] = this.prevCurrentView[i][key];\n                    }\n                }\n            }\n            for (var i = 0; i < dataSource.length; i++) {\n                var oldIndex = oldKeys[dataSource[i][key]];\n                if (!isNullOrUndefined(oldIndex)) {\n                    var isEqual = false;\n                    if (this.parent.enableDeepCompare) {\n                        isEqual = this.objectEqualityChecker(this.prevCurrentView[oldIndex], dataSource[i]);\n                    }\n                    var tr = oldRowElements[oldRowObjs[oldIndex].uid];\n                    newRowObjs.push(oldRowObjs[oldIndex]);\n                    if (this.rowElements[oldIndex] && this.rowElements[oldIndex].getAttribute('data-uid') === newRowObjs[i].uid\n                        && ((hasBatch && isNullOrUndefined(batchChangeKeys[newIndexes[i]]))\n                            || (!hasBatch && (isEqual || this.prevCurrentView[oldIndex] === dataSource[i])))) {\n                        if (oldIndex !== i) {\n                            this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                        }\n                        tbody.appendChild(tr);\n                        continue;\n                    }\n                    if ((hasBatch && !isNullOrUndefined(batchChangeKeys[newIndexes[i]]))\n                        || (!this.parent.enableDeepCompare && dataSource[i] !== this.prevCurrentView[oldIndex])\n                        || (this.parent.enableDeepCompare && !isEqual)) {\n                        oldRowObjs[oldIndex].setRowValue(dataSource[i]);\n                    }\n                    tbody.appendChild(tr);\n                    this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                }\n                else {\n                    var row = new RowRenderer(this.serviceLocator, null, gObj);\n                    var modelData = this.generator.generateRows([dataSource[i]]);\n                    newRowObjs.push(modelData[0]);\n                    var tr = row.render(modelData[0], gObj.getColumns());\n                    tbody.appendChild(tr);\n                    this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                }\n            }\n            this.rows = newRowObjs;\n            this.rowElements = [].slice.call(tbody.children);\n            remove(this.getTable().querySelector(literals.tbody));\n            this.getTable().appendChild(tbody);\n            this.parent.trigger(events.dataBound, {}, function () {\n                if (_this.parent.allowTextWrap) {\n                    _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                }\n            });\n            if (args) {\n                var action = (args.requestType || '').toLowerCase() + '-complete';\n                this.parent.notify(action, args);\n            }\n        }\n    };\n    ContentRender.prototype.objectEqualityChecker = function (old, next) {\n        var keys = Object.keys(old);\n        var isEqual = true;\n        for (var i = 0; i < keys.length; i++) {\n            if (old[keys[i]] !== next[keys[i]]) {\n                var isDate = old[keys[i]] instanceof Date && next[keys[i]] instanceof Date;\n                if (!isDate || (old[keys[i]].getTime() !== next[keys[i]].getTime())) {\n                    isEqual = false;\n                    break;\n                }\n            }\n        }\n        return isEqual;\n    };\n    ContentRender.prototype.getBatchEditedRecords = function (primaryKey, rows) {\n        var keys = {};\n        var changes = this.parent.getBatchChanges();\n        var changedRecords = [];\n        var addedRecords = [];\n        if (Object.keys(changes).length) {\n            changedRecords = changes.changedRecords;\n            addedRecords = changes.addedRecords;\n        }\n        var args = { cancel: false };\n        this.parent.notify(events.immutableBatchCancel, { rows: rows, args: args });\n        if (addedRecords.length) {\n            if (this.parent.editSettings.newRowPosition === 'Bottom') {\n                rows.splice(rows.length - 1, addedRecords.length);\n            }\n            else {\n                if (!args.cancel) {\n                    rows.splice(0, addedRecords.length);\n                }\n            }\n        }\n        for (var i = 0; i < changedRecords.length; i++) {\n            keys[changedRecords[i][primaryKey]] = i;\n        }\n        return keys;\n    };\n    ContentRender.prototype.refreshImmutableContent = function (index, tr, row) {\n        row.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        if (row.isAltRow) {\n            tr.classList.add('e-altrow');\n        }\n        else {\n            tr.classList.remove('e-altrow');\n        }\n        row.index = index;\n        row.edit = undefined;\n        row.isDirty = false;\n        tr.setAttribute(literals.ariaRowIndex, index.toString());\n        this.updateCellIndex(tr, index);\n    };\n    ContentRender.prototype.updateCellIndex = function (rowEle, index) {\n        for (var i = 0; i < rowEle.cells.length; i++) {\n            rowEle.cells[i].setAttribute('index', index.toString());\n        }\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}