{"ast":null,"code":"import { contains } from '@syncfusion/ej2-drawings';\nimport { Rect } from '@syncfusion/ej2-drawings';\nimport { Point, identityMatrix, rotateMatrix } from '@syncfusion/ej2-drawings';\nimport { Container, transformPointByMatrix } from '@syncfusion/ej2-drawings';\nimport { isPointOverConnector } from './connector-util';\nimport { LineTool, NodeDrawingTool, StampTool } from './tools';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * @private\n * @param {MouseEvent | TouchEvent} event - Specified the annotaion event.\n * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.\n * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.\n * @param {boolean} isOverlapped - Specified the overlapped element or not.\n * @returns {any} - Returns the active element.\n */\n// eslint-disable-next-line\n\nexport function findActiveElement(event, pdfBase, pdfViewer, isOverlapped) {\n  if (pdfViewer && pdfBase.activeElements.activePageID > -1) {\n    var objects = findObjectsUnderMouse(pdfBase, pdfViewer, event);\n    var object = findObjectUnderMouse(objects, event, pdfBase, pdfViewer);\n\n    if (isOverlapped) {\n      return objects;\n    }\n\n    return object;\n  }\n\n  return undefined;\n}\n/**\n * @private\n * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.\n * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.\n * @param {MouseEvent} event - Specified the annotaion event.\n * @returns {IElement[]} - Returns the annotaion elements.\n */\n\nexport function findObjectsUnderMouse(pdfBase, pdfViewer, event) {\n  var pt = pdfBase.currentPosition || {\n    x: event.offsetX,\n    y: event.offsetY\n  };\n  pt = {\n    x: pt.x / pdfBase.getZoomFactor(),\n    y: pt.y / pdfBase.getZoomFactor()\n  };\n  var pageTable = pdfViewer.getPageTable(pdfBase.activeElements.activePageID);\n  var objArray = findObjects(pt, pageTable.objects);\n  return objArray;\n}\n/**\n * @private\n * @param {PdfAnnotationBaseModel[]} objects - Specified the annotaion object model.\n * @param {any} event - Specified the annotaion event.\n * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.\n * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.\n * @returns {IElement} - Returns the annotaion element.\n */\n\nexport function findObjectUnderMouse( // eslint-disable-next-line\nobjects, event, pdfBase, pdfViewer) {\n  var actualTarget = null;\n  var touchArg;\n  var offsetX;\n  var offsetY;\n\n  if (event && event.type && event.type.indexOf('touch') !== -1) {\n    touchArg = event;\n\n    if (pdfViewer.annotation) {\n      var pageDiv = pdfBase.getElement('_pageDiv_' + pdfViewer.annotation.getEventPageNumber(event));\n\n      if (pageDiv) {\n        var pageCurrentRect = pageDiv.getBoundingClientRect();\n        offsetX = touchArg.changedTouches[0].clientX - pageCurrentRect.left;\n        offsetY = touchArg.changedTouches[0].clientY - pageCurrentRect.top;\n      }\n    } // eslint-disable-next-line\n\n  } else if (event && event.target && event.path && event.target.parentElement && event.target.parentElement.classList.contains('foreign-object')) {\n    // eslint-disable-next-line\n    var targetParentRect = event.path[4].getBoundingClientRect();\n    offsetX = event.clientX - targetParentRect.left;\n    offsetY = event.clientY - targetParentRect.top;\n  } else if (event.target && event.target.parentElement && event.target.parentElement.classList.contains('foreign-object')) {\n    // eslint-disable-next-line\n    var targetParentRect = event.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n    offsetX = event.clientX - targetParentRect.left;\n    offsetY = event.clientY - targetParentRect.top; // eslint-disable-next-line\n  } else if (event.target && event.target.parentElement && event.target.parentElement.parentElement && event.target.parentElement.parentElement.classList.contains('foreign-object')) {\n    // eslint-disable-next-line\n    var targetParentRect = event.target.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n    offsetX = event.clientX - targetParentRect.left;\n    offsetY = event.clientY - targetParentRect.top; // eslint-disable-next-line\n  } else {\n    offsetX = !isNaN(event.offsetX) ? event.offsetX : event.position ? event.position.x : 0;\n    offsetY = !isNaN(event.offsetY) ? event.offsetY : event.position ? event.position.y : 0;\n  }\n\n  var offsetForSelector = 5;\n  var boundsDiff = 0;\n\n  for (var i = 0; i < objects.length; i++) {\n    if (!(objects[i].shapeAnnotationType === 'Distance' || objects[i].shapeAnnotationType === 'Line' || objects[i].shapeAnnotationType === 'LineWidthArrowHead' || pdfBase.tool instanceof LineTool)) {\n      var bounds = objects[i].wrapper.bounds;\n      var rotationValue = 0;\n\n      if (objects[i].shapeAnnotationType === 'Stamp' || objects[i].shapeAnnotationType === 'Image') {\n        rotationValue = 25;\n      } // eslint-disable-next-line max-len\n\n\n      if ((bounds.x - offsetForSelector) * pdfBase.getZoomFactor() < offsetX && (bounds.x + bounds.width + offsetForSelector) * pdfBase.getZoomFactor() > offsetX && // eslint-disable-next-line max-len\n      (bounds.y - offsetForSelector - rotationValue) * pdfBase.getZoomFactor() < offsetY && (bounds.y + bounds.height + offsetForSelector) * pdfBase.getZoomFactor() > offsetY) {\n        if (pdfBase.tool instanceof NodeDrawingTool || pdfBase.tool instanceof StampTool) {\n          actualTarget = objects[i];\n        } else {\n          if (!boundsDiff) {\n            actualTarget = objects[i]; // eslint-disable-next-line max-len\n\n            boundsDiff = offsetX - (bounds.x - offsetForSelector) * pdfBase.getZoomFactor() + ((bounds.x + bounds.width + offsetForSelector) * pdfBase.getZoomFactor() - offsetX) + ( // eslint-disable-next-line max-len\n            offsetY - (bounds.y - offsetForSelector - rotationValue) * pdfBase.getZoomFactor()) + ((bounds.y + bounds.height + offsetForSelector) * pdfBase.getZoomFactor() - offsetY);\n          } else {\n            // eslint-disable-next-line max-len\n            var objectBounds = offsetX - (bounds.x - offsetForSelector) * pdfBase.getZoomFactor() + ((bounds.x + bounds.width + offsetForSelector) * pdfBase.getZoomFactor() - offsetX) + ( // eslint-disable-next-line max-len\n            offsetY - (bounds.y - offsetForSelector - rotationValue) * pdfBase.getZoomFactor()) + ((bounds.y + bounds.height + offsetForSelector) * pdfBase.getZoomFactor() - offsetY);\n\n            if (boundsDiff > objectBounds) {\n              actualTarget = objects[i];\n              boundsDiff = objectBounds;\n            } else if (boundsDiff === objectBounds) {\n              actualTarget = objects[i];\n              boundsDiff = objectBounds;\n            } else if (objects[i].shapeAnnotationType === \"Image\" || objects[i].shapeAnnotationType === \"Stamp\") {\n              actualTarget = objects[i];\n            }\n          }\n        }\n      }\n    } else {\n      var pt = {\n        x: offsetX / pdfBase.getZoomFactor(),\n        y: offsetY / pdfBase.getZoomFactor()\n      };\n      var obj = findElementUnderMouse(objects[i], pt, offsetForSelector);\n      var isOver = isPointOverConnector(objects[i], pt);\n\n      if (obj && !isOver) {\n        var newpoint = CalculateLeaderPoints(objects[i], obj);\n\n        if (newpoint) {\n          var rect = Rect.toBounds([newpoint, newpoint]);\n          rect.Inflate(10);\n\n          if (rect.containsPoint(pt)) {\n            isOver = true;\n          }\n        }\n      }\n\n      if (obj && isOver) {\n        actualTarget = objects[i];\n      }\n    }\n  }\n\n  return actualTarget;\n}\n/**\n * @private\n * @param {any} selector - Specified the annotaion selctor.\n * @param {any} currentobject - Specified the current annotaion object.\n * @returns {any} - Returns the leader points.\n */\n// eslint-disable-next-line\n\nexport function CalculateLeaderPoints(selector, currentobject) {\n  var leaderCount = 0;\n  var sourcePoint = selector.sourcePoint;\n  var targetPoint = selector.targetPoint;\n\n  if (selector.shapeAnnotationType === 'Distance') {\n    var segment = currentobject;\n    var newPoint1 = void 0;\n    var angle = Point.findAngle(selector.sourcePoint, selector.targetPoint);\n\n    if (segment.id.indexOf('leader') > -1) {\n      var center = selector.wrapper.children[0].bounds.center;\n\n      if (leaderCount === 0 && segment.id.indexOf('leader1') > -1) {\n        newPoint1 = {\n          x: selector.sourcePoint.x,\n          y: selector.sourcePoint.y - selector.leaderHeight\n        };\n        center = sourcePoint;\n      } else {\n        newPoint1 = {\n          x: selector.targetPoint.x,\n          y: selector.targetPoint.y - selector.leaderHeight\n        };\n        center = targetPoint;\n      }\n\n      var matrix = identityMatrix();\n      rotateMatrix(matrix, angle, center.x, center.y);\n      var rotatedPoint = transformPointByMatrix(matrix, {\n        x: newPoint1.x,\n        y: newPoint1.y\n      });\n      return rotatedPoint;\n    }\n  }\n}\n/**\n * @private\n * @param {IElement} obj - Specified the annotation element.\n * @param {PointModel} position - Specified the annotation position value.\n * @param {number} padding - Specified the annotation padding.\n * @returns {DrawingElement} - Returns the annotation drawing element.\n */\n\nexport function findElementUnderMouse(obj, position, padding) {\n  return findTargetShapeElement(obj.wrapper, position, padding);\n}\n/**\n * @private\n * @param {PdfAnnotationBaseModel} obj - Specified the annotation object model.\n * @param {string} key - Specified the annotation key value.\n * @param {Object[]} collection - Specified the annotation collection.\n * @returns {void}\n */\n\nexport function insertObject(obj, key, collection) {\n  if (collection.length === 0) {\n    collection.push(obj);\n  } else if (collection.length === 1) {\n    // eslint-disable-next-line\n    if (collection[0][key] > obj[key]) {\n      collection.splice(0, 0, obj);\n    } else {\n      collection.push(obj);\n    }\n  } else if (collection.length > 1) {\n    var low = 0;\n    var high = collection.length - 1;\n    var mid = Math.floor((low + high) / 2);\n\n    while (mid !== low) {\n      // eslint-disable-next-line\n      if (collection[mid][key] < obj[key]) {\n        low = mid;\n        mid = Math.floor((low + high) / 2); // eslint-disable-next-line\n      } else if (collection[mid][key] > obj[key]) {\n        high = mid;\n        mid = Math.floor((low + high) / 2);\n      }\n    } // eslint-disable-next-line\n\n\n    if (collection[high][key] < obj[key]) {\n      collection.push(obj); // eslint-disable-next-line\n    } else if (collection[low][key] > obj[key]) {\n      collection.splice(low, 0, obj); // eslint-disable-next-line\n    } else if (collection[low][key] < obj[key] && collection[high][key] > obj[key]) {\n      collection.splice(high, 0, obj);\n    }\n  }\n}\n/**\n * @private\n * @param {Container} container - Specified the annotaion container.\n * @param {PointModel} position - Specified the annotation position.\n * @param {number} padding - Specified the annotaion padding value.\n * @returns {DrawingElement} - Returns the annotation drawing element.\n */\n\nexport function findTargetShapeElement(container, position, padding) {\n  if (container && container.children) {\n    for (var i = container.children.length - 1; i >= 0; i--) {\n      var shapeElement = container.children[i]; // eslint-disable-next-line\n\n      if (!isNullOrUndefined(shapeElement.children) && shapeElement.children.length > 0) {\n        // eslint-disable-next-line\n        for (var j = shapeElement.children.length - 1; j >= 0; j--) {\n          // eslint-disable-next-line\n          var currentTarget = shapeElement.children[j];\n\n          if (currentTarget && currentTarget.bounds.containsPoint(position, 10)) {\n            if (currentTarget instanceof Container) {\n              var targetElement = this.findTargetElement(currentTarget, position);\n\n              if (targetElement) {\n                return targetElement;\n              }\n            }\n\n            if (currentTarget.bounds.containsPoint(position, 10)) {\n              return currentTarget;\n            }\n          }\n        }\n      } else {\n        if (shapeElement && shapeElement.bounds.containsPoint(position, 10)) {\n          if (shapeElement instanceof Container) {\n            var targetElement = this.findTargetElement(shapeElement, position);\n\n            if (targetElement) {\n              return targetElement;\n            }\n          }\n\n          if (shapeElement.bounds.containsPoint(position, 10)) {\n            return shapeElement;\n          }\n        }\n      }\n    }\n  }\n\n  if (container && container.bounds.containsPoint(position, padding) && container.style.fill !== 'none') {\n    var element = container;\n    var paddingValue = 10;\n    var rotateThumbDistance = 30;\n    var matrix = identityMatrix();\n    rotateMatrix(matrix, element.parentTransform, element.offsetX, element.offsetY);\n    var x = element.offsetX - element.pivot.x * element.actualSize.width;\n    var y = element.offsetY - element.pivot.y * element.actualSize.height;\n    var rotateThumb = {\n      x: x + (element.pivot.x === 0.5 ? element.pivot.x * 2 : element.pivot.x) * element.actualSize.width / 2,\n      y: y - rotateThumbDistance\n    };\n    rotateThumb = transformPointByMatrix(matrix, rotateThumb);\n\n    if (contains(position, rotateThumb, paddingValue)) {\n      return container;\n    }\n  }\n\n  return null;\n}\n/**\n * @private\n * @param {PointModel} region - Specified the annotation region point model.\n * @param {PdfAnnotationBaseModel[]} objCollection - Specified the annotation object collections.\n * @returns {PdfAnnotationBaseModel[]} - Returns the annotation object collections.\n */\n\nexport function findObjects(region, objCollection) {\n  var objects = [];\n\n  for (var _i = 0, objCollection_1 = objCollection; _i < objCollection_1.length; _i++) {\n    var obj = objCollection_1[_i];\n\n    if (findElementUnderMouse(obj, region, 10) || obj.shapeAnnotationType === 'Stamp' && findElementUnderMouse(obj, region, 40)) {\n      insertObject(obj, 'zIndex', objects);\n    }\n  }\n\n  return objects;\n}\n/**\n * @private\n * @param {MouseEvent} event - Specified the annotaion mouse event.\n * @param {PdfViewerBase} pdfBase - Specified the pdfBase element.\n * @returns {number} - Returns the active page Id.\n */\n\nexport function findActivePage(event, pdfBase) {\n  var activePageID = undefined;\n\n  if (event.target && event.target.wrapper) {\n    return event.target.pageIndex;\n  }\n\n  if (event.target) {\n    var elementIdColl = event.target.id.split('_');\n\n    if (elementIdColl.length > 0) {\n      // eslint-disable-next-line radix\n      activePageID = parseInt(elementIdColl[elementIdColl.length - 1]);\n    }\n  }\n\n  return activePageID;\n}\n/**\n * @hidden\n */\n\nvar ActiveElements =\n/** @class */\nfunction () {\n  function ActiveElements() {\n    this.activePage = undefined;\n    this.activePageID = undefined;\n  }\n\n  Object.defineProperty(ActiveElements.prototype, \"activePageID\", {\n    /**\n     * @private\n     * @returns {number} - Returns the active page Id.\n     */\n    get: function () {\n      return this.activePage;\n    },\n\n    /**\n     * @private\n     * @param {number} offset - The page offset value.\n     */\n    set: function (offset) {\n      this.activePage = offset; // eslint-disable-next-line\n\n      if (offset !== this.activePage) {}\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ActiveElements;\n}();\n\nexport { ActiveElements };","map":{"version":3,"names":["contains","Rect","Point","identityMatrix","rotateMatrix","Container","transformPointByMatrix","isPointOverConnector","LineTool","NodeDrawingTool","StampTool","isNullOrUndefined","findActiveElement","event","pdfBase","pdfViewer","isOverlapped","activeElements","activePageID","objects","findObjectsUnderMouse","object","findObjectUnderMouse","undefined","pt","currentPosition","x","offsetX","y","offsetY","getZoomFactor","pageTable","getPageTable","objArray","findObjects","actualTarget","touchArg","type","indexOf","annotation","pageDiv","getElement","getEventPageNumber","pageCurrentRect","getBoundingClientRect","changedTouches","clientX","left","clientY","top","target","path","parentElement","classList","targetParentRect","offsetParent","isNaN","position","offsetForSelector","boundsDiff","i","length","shapeAnnotationType","tool","bounds","wrapper","rotationValue","width","height","objectBounds","obj","findElementUnderMouse","isOver","newpoint","CalculateLeaderPoints","rect","toBounds","Inflate","containsPoint","selector","currentobject","leaderCount","sourcePoint","targetPoint","segment","newPoint1","angle","findAngle","id","center","children","leaderHeight","matrix","rotatedPoint","padding","findTargetShapeElement","insertObject","key","collection","push","splice","low","high","mid","Math","floor","container","shapeElement","j","currentTarget","targetElement","findTargetElement","style","fill","element","paddingValue","rotateThumbDistance","parentTransform","pivot","actualSize","rotateThumb","region","objCollection","_i","objCollection_1","findActivePage","pageIndex","elementIdColl","split","parseInt","ActiveElements","activePage","Object","defineProperty","prototype","get","set","offset","enumerable","configurable"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/drawing/action.js"],"sourcesContent":["import { contains } from '@syncfusion/ej2-drawings';\nimport { Rect } from '@syncfusion/ej2-drawings';\nimport { Point, identityMatrix, rotateMatrix } from '@syncfusion/ej2-drawings';\nimport { Container, transformPointByMatrix } from '@syncfusion/ej2-drawings';\nimport { isPointOverConnector } from './connector-util';\nimport { LineTool, NodeDrawingTool, StampTool } from './tools';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * @private\n * @param {MouseEvent | TouchEvent} event - Specified the annotaion event.\n * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.\n * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.\n * @param {boolean} isOverlapped - Specified the overlapped element or not.\n * @returns {any} - Returns the active element.\n */\n// eslint-disable-next-line\nexport function findActiveElement(event, pdfBase, pdfViewer, isOverlapped) {\n    if (pdfViewer && pdfBase.activeElements.activePageID > -1) {\n        var objects = findObjectsUnderMouse(pdfBase, pdfViewer, event);\n        var object = findObjectUnderMouse(objects, event, pdfBase, pdfViewer);\n        if (isOverlapped) {\n            return objects;\n        }\n        return object;\n    }\n    return undefined;\n}\n/**\n * @private\n * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.\n * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.\n * @param {MouseEvent} event - Specified the annotaion event.\n * @returns {IElement[]} - Returns the annotaion elements.\n */\nexport function findObjectsUnderMouse(pdfBase, pdfViewer, event) {\n    var pt = pdfBase.currentPosition || { x: event.offsetX, y: event.offsetY };\n    pt = { x: pt.x / pdfBase.getZoomFactor(), y: pt.y / pdfBase.getZoomFactor() };\n    var pageTable = pdfViewer.getPageTable(pdfBase.activeElements.activePageID);\n    var objArray = findObjects(pt, pageTable.objects);\n    return objArray;\n}\n/**\n * @private\n * @param {PdfAnnotationBaseModel[]} objects - Specified the annotaion object model.\n * @param {any} event - Specified the annotaion event.\n * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.\n * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.\n * @returns {IElement} - Returns the annotaion element.\n */\nexport function findObjectUnderMouse(\n// eslint-disable-next-line\nobjects, event, pdfBase, pdfViewer) {\n    var actualTarget = null;\n    var touchArg;\n    var offsetX;\n    var offsetY;\n    if (event && event.type && event.type.indexOf('touch') !== -1) {\n        touchArg = event;\n        if (pdfViewer.annotation) {\n            var pageDiv = pdfBase.getElement('_pageDiv_' + pdfViewer.annotation.getEventPageNumber(event));\n            if (pageDiv) {\n                var pageCurrentRect = pageDiv.getBoundingClientRect();\n                offsetX = touchArg.changedTouches[0].clientX - pageCurrentRect.left;\n                offsetY = touchArg.changedTouches[0].clientY - pageCurrentRect.top;\n            }\n        }\n        // eslint-disable-next-line\n    }\n    else if (event && event.target && event.path && event.target.parentElement && event.target.parentElement.classList.contains('foreign-object')) {\n        // eslint-disable-next-line\n        var targetParentRect = event.path[4].getBoundingClientRect();\n        offsetX = event.clientX - targetParentRect.left;\n        offsetY = event.clientY - targetParentRect.top;\n    }\n    else if (event.target && event.target.parentElement && event.target.parentElement.classList.contains('foreign-object')) {\n        // eslint-disable-next-line\n        var targetParentRect = event.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n        offsetX = event.clientX - targetParentRect.left;\n        offsetY = event.clientY - targetParentRect.top;\n        // eslint-disable-next-line\n    }\n    else if (event.target && event.target.parentElement && event.target.parentElement.parentElement && event.target.parentElement.parentElement.classList.contains('foreign-object')) {\n        // eslint-disable-next-line\n        var targetParentRect = event.target.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n        offsetX = event.clientX - targetParentRect.left;\n        offsetY = event.clientY - targetParentRect.top;\n        // eslint-disable-next-line\n    }\n    else {\n        offsetX = !isNaN(event.offsetX) ? event.offsetX : (event.position ? event.position.x : 0);\n        offsetY = !isNaN(event.offsetY) ? event.offsetY : (event.position ? event.position.y : 0);\n    }\n    var offsetForSelector = 5;\n    var boundsDiff = 0;\n    for (var i = 0; i < objects.length; i++) {\n        if (!(objects[i].shapeAnnotationType === 'Distance' || objects[i].shapeAnnotationType === 'Line' || objects[i].shapeAnnotationType === 'LineWidthArrowHead' || pdfBase.tool instanceof LineTool)) {\n            var bounds = objects[i].wrapper.bounds;\n            var rotationValue = 0;\n            if (objects[i].shapeAnnotationType === 'Stamp' || objects[i].shapeAnnotationType === 'Image') {\n                rotationValue = 25;\n            }\n            // eslint-disable-next-line max-len\n            if ((((bounds.x - offsetForSelector) * pdfBase.getZoomFactor()) < offsetX) && (((bounds.x + bounds.width + offsetForSelector) * pdfBase.getZoomFactor()) > offsetX) &&\n                // eslint-disable-next-line max-len\n                (((bounds.y - offsetForSelector - rotationValue) * pdfBase.getZoomFactor()) < offsetY) && (((bounds.y + bounds.height + offsetForSelector) * pdfBase.getZoomFactor()) > offsetY)) {\n                if (pdfBase.tool instanceof NodeDrawingTool || pdfBase.tool instanceof StampTool) {\n                    actualTarget = objects[i];\n                }\n                else {\n                    if (!boundsDiff) {\n                        actualTarget = objects[i];\n                        // eslint-disable-next-line max-len\n                        boundsDiff = (offsetX - ((bounds.x - offsetForSelector) * pdfBase.getZoomFactor())) + (((bounds.x + bounds.width + offsetForSelector) * pdfBase.getZoomFactor()) - offsetX) +\n                            // eslint-disable-next-line max-len\n                            (offsetY - ((bounds.y - offsetForSelector - rotationValue) * pdfBase.getZoomFactor())) + (((bounds.y + bounds.height + offsetForSelector) * pdfBase.getZoomFactor()) - offsetY);\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        var objectBounds = (offsetX - ((bounds.x - offsetForSelector) * pdfBase.getZoomFactor())) + (((bounds.x + bounds.width + offsetForSelector) * pdfBase.getZoomFactor()) - offsetX) +\n                            // eslint-disable-next-line max-len\n                            (offsetY - ((bounds.y - offsetForSelector - rotationValue) * pdfBase.getZoomFactor())) + (((bounds.y + bounds.height + offsetForSelector) * pdfBase.getZoomFactor()) - offsetY);\n                        if (boundsDiff > objectBounds) {\n                            actualTarget = objects[i];\n                            boundsDiff = objectBounds;\n                        }\n                        else if (boundsDiff === objectBounds) {\n                            actualTarget = objects[i];\n                            boundsDiff = objectBounds;\n                        }\n                        else if ((objects[i].shapeAnnotationType === \"Image\") || (objects[i].shapeAnnotationType === \"Stamp\")) {\n                            actualTarget = objects[i];\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            var pt = { x: offsetX / pdfBase.getZoomFactor(), y: offsetY / pdfBase.getZoomFactor() };\n            var obj = findElementUnderMouse(objects[i], pt, offsetForSelector);\n            var isOver = isPointOverConnector(objects[i], pt);\n            if (obj && !isOver) {\n                var newpoint = CalculateLeaderPoints(objects[i], obj);\n                if (newpoint) {\n                    var rect = Rect.toBounds([newpoint, newpoint]);\n                    rect.Inflate(10);\n                    if (rect.containsPoint(pt)) {\n                        isOver = true;\n                    }\n                }\n            }\n            if (obj && isOver) {\n                actualTarget = objects[i];\n            }\n        }\n    }\n    return actualTarget;\n}\n/**\n * @private\n * @param {any} selector - Specified the annotaion selctor.\n * @param {any} currentobject - Specified the current annotaion object.\n * @returns {any} - Returns the leader points.\n */\n// eslint-disable-next-line\nexport function CalculateLeaderPoints(selector, currentobject) {\n    var leaderCount = 0;\n    var sourcePoint = selector.sourcePoint;\n    var targetPoint = selector.targetPoint;\n    if (selector.shapeAnnotationType === 'Distance') {\n        var segment = currentobject;\n        var newPoint1 = void 0;\n        var angle = Point.findAngle(selector.sourcePoint, selector.targetPoint);\n        if (segment.id.indexOf('leader') > -1) {\n            var center = selector.wrapper.children[0].bounds.center;\n            if (leaderCount === 0 && segment.id.indexOf('leader1') > -1) {\n                newPoint1 = { x: selector.sourcePoint.x, y: selector.sourcePoint.y - selector.leaderHeight };\n                center = sourcePoint;\n            }\n            else {\n                newPoint1 = { x: selector.targetPoint.x, y: selector.targetPoint.y - selector.leaderHeight };\n                center = targetPoint;\n            }\n            var matrix = identityMatrix();\n            rotateMatrix(matrix, angle, center.x, center.y);\n            var rotatedPoint = transformPointByMatrix(matrix, { x: newPoint1.x, y: newPoint1.y });\n            return rotatedPoint;\n        }\n    }\n}\n/**\n * @private\n * @param {IElement} obj - Specified the annotation element.\n * @param {PointModel} position - Specified the annotation position value.\n * @param {number} padding - Specified the annotation padding.\n * @returns {DrawingElement} - Returns the annotation drawing element.\n */\nexport function findElementUnderMouse(obj, position, padding) {\n    return findTargetShapeElement(obj.wrapper, position, padding);\n}\n/**\n * @private\n * @param {PdfAnnotationBaseModel} obj - Specified the annotation object model.\n * @param {string} key - Specified the annotation key value.\n * @param {Object[]} collection - Specified the annotation collection.\n * @returns {void}\n */\nexport function insertObject(obj, key, collection) {\n    if (collection.length === 0) {\n        collection.push(obj);\n    }\n    else if (collection.length === 1) {\n        // eslint-disable-next-line\n        if (collection[0][key] > obj[key]) {\n            collection.splice(0, 0, obj);\n        }\n        else {\n            collection.push(obj);\n        }\n    }\n    else if (collection.length > 1) {\n        var low = 0;\n        var high = collection.length - 1;\n        var mid = Math.floor((low + high) / 2);\n        while (mid !== low) {\n            // eslint-disable-next-line\n            if (collection[mid][key] < obj[key]) {\n                low = mid;\n                mid = Math.floor((low + high) / 2);\n                // eslint-disable-next-line\n            }\n            else if (collection[mid][key] > obj[key]) {\n                high = mid;\n                mid = Math.floor((low + high) / 2);\n            }\n        }\n        // eslint-disable-next-line\n        if (collection[high][key] < obj[key]) {\n            collection.push(obj);\n            // eslint-disable-next-line\n        }\n        else if (collection[low][key] > obj[key]) {\n            collection.splice(low, 0, obj);\n            // eslint-disable-next-line\n        }\n        else if ((collection[low][key] < obj[key]) && collection[high][key] > obj[key]) {\n            collection.splice(high, 0, obj);\n        }\n    }\n}\n/**\n * @private\n * @param {Container} container - Specified the annotaion container.\n * @param {PointModel} position - Specified the annotation position.\n * @param {number} padding - Specified the annotaion padding value.\n * @returns {DrawingElement} - Returns the annotation drawing element.\n */\nexport function findTargetShapeElement(container, position, padding) {\n    if (container && container.children) {\n        for (var i = container.children.length - 1; i >= 0; i--) {\n            var shapeElement = container.children[i];\n            // eslint-disable-next-line\n            if (!isNullOrUndefined(shapeElement.children) && shapeElement.children.length > 0) {\n                // eslint-disable-next-line\n                for (var j = shapeElement.children.length - 1; j >= 0; j--) {\n                    // eslint-disable-next-line\n                    var currentTarget = shapeElement.children[j];\n                    if (currentTarget && currentTarget.bounds.containsPoint(position, 10)) {\n                        if (currentTarget instanceof Container) {\n                            var targetElement = this.findTargetElement(currentTarget, position);\n                            if (targetElement) {\n                                return targetElement;\n                            }\n                        }\n                        if (currentTarget.bounds.containsPoint(position, 10)) {\n                            return currentTarget;\n                        }\n                    }\n                }\n            }\n            else {\n                if (shapeElement && shapeElement.bounds.containsPoint(position, 10)) {\n                    if (shapeElement instanceof Container) {\n                        var targetElement = this.findTargetElement(shapeElement, position);\n                        if (targetElement) {\n                            return targetElement;\n                        }\n                    }\n                    if (shapeElement.bounds.containsPoint(position, 10)) {\n                        return shapeElement;\n                    }\n                }\n            }\n        }\n    }\n    if (container && container.bounds.containsPoint(position, padding) && container.style.fill !== 'none') {\n        var element = container;\n        var paddingValue = 10;\n        var rotateThumbDistance = 30;\n        var matrix = identityMatrix();\n        rotateMatrix(matrix, element.parentTransform, element.offsetX, element.offsetY);\n        var x = element.offsetX - element.pivot.x * element.actualSize.width;\n        var y = element.offsetY - element.pivot.y * element.actualSize.height;\n        var rotateThumb = {\n            x: x + ((element.pivot.x === 0.5 ? element.pivot.x * 2 : element.pivot.x) * element.actualSize.width / 2),\n            y: y - rotateThumbDistance\n        };\n        rotateThumb = transformPointByMatrix(matrix, rotateThumb);\n        if (contains(position, rotateThumb, paddingValue)) {\n            return container;\n        }\n    }\n    return null;\n}\n/**\n * @private\n * @param {PointModel} region - Specified the annotation region point model.\n * @param {PdfAnnotationBaseModel[]} objCollection - Specified the annotation object collections.\n * @returns {PdfAnnotationBaseModel[]} - Returns the annotation object collections.\n */\nexport function findObjects(region, objCollection) {\n    var objects = [];\n    for (var _i = 0, objCollection_1 = objCollection; _i < objCollection_1.length; _i++) {\n        var obj = objCollection_1[_i];\n        if (findElementUnderMouse(obj, region, 10) || ((obj.shapeAnnotationType === 'Stamp') && findElementUnderMouse(obj, region, 40))) {\n            insertObject(obj, 'zIndex', objects);\n        }\n    }\n    return objects;\n}\n/**\n * @private\n * @param {MouseEvent} event - Specified the annotaion mouse event.\n * @param {PdfViewerBase} pdfBase - Specified the pdfBase element.\n * @returns {number} - Returns the active page Id.\n */\nexport function findActivePage(event, pdfBase) {\n    var activePageID = undefined;\n    if (event.target && event.target.wrapper) {\n        return event.target.pageIndex;\n    }\n    if (event.target) {\n        var elementIdColl = event.target.id.split('_');\n        if (elementIdColl.length > 0) {\n            // eslint-disable-next-line radix\n            activePageID = parseInt(elementIdColl[elementIdColl.length - 1]);\n        }\n    }\n    return activePageID;\n}\n/**\n * @hidden\n */\nvar ActiveElements = /** @class */ (function () {\n    function ActiveElements() {\n        this.activePage = undefined;\n        this.activePageID = undefined;\n    }\n    Object.defineProperty(ActiveElements.prototype, \"activePageID\", {\n        /**\n         * @private\n         * @returns {number} - Returns the active page Id.\n         */\n        get: function () {\n            return this.activePage;\n        },\n        /**\n         * @private\n         * @param {number} offset - The page offset value.\n         */\n        set: function (offset) {\n            this.activePage = offset;\n            // eslint-disable-next-line\n            if (offset !== this.activePage) { }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ActiveElements;\n}());\nexport { ActiveElements };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}