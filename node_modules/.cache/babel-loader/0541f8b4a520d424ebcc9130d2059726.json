{"ast":null,"code":"var _jsxFileName = \"/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/src/components2/DataFetching.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useSyncExternalStore } from \"react\";\nimport axios from \"axios\";\nimport \"../styles/DataFetching.css\";\nimport S1 from \"./S1\";\nimport UpdateComponent from \"./Update.component\";\nimport CreateComponent from \"./Create.component\";\nimport DeleteComponent from \"./Delete.component\";\nimport AuthService from \"../services/auth.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction DataFetching(_ref) {\n  _s();\n\n  let {\n    admin\n  } = _ref;\n  const [isSet, setisSet] = useState(false);\n  const [focusedlist, setfocusedlist] = useState();\n  const [posts, setPosts] = useState([]);\n  const [isModify, setisModify] = useState(false);\n  const [isAdmin, setAdmin] = useState(false); // const user = AuthService.getCurrentUser();\n\n  if (user) {\n    setAdmin(true);\n  }\n\n  useEffect(() => {\n    axios.get(\"http://localhost:8080/pb/\").then(res => {\n      setPosts(res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  function choixPb(e) {\n    setisSet(!isSet);\n    setfocusedlist(e.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"faq-list-pb\",\n    children: posts.map(_ref2 => {\n      let {\n        id,\n        title_pb\n      } = _ref2;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mainpb\",\n        children: [\" \", title_pb, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"fleche\",\n            value: id,\n            onClick: e => choixPb(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 13\n          }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ecrou\",\n            value: id,\n            onClick: e => {\n              setisModify(!isModify);\n              setfocusedlist(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), isModify && focusedlist === `${id}` && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main_crud\",\n          children: [/*#__PURE__*/_jsxDEV(UpdateComponent, {\n            id: id,\n            title: title_pb,\n            base: \"pb\",\n            champ: \"title_pb\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CreateComponent, {\n            id: id,\n            base: \"s1\",\n            champ: \"title_s1\",\n            champ2: \"ind_pb\",\n            title: title_pb\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DeleteComponent, {\n            id: id,\n            base: \"pb\",\n            champ: \"id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), isSet && focusedlist === `${id}` ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"choix-main\",\n          children: /*#__PURE__*/_jsxDEV(S1, {\n            id: id,\n            admin: admin\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this) : null]\n      }, id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DataFetching, \"U8D/qEb+RlZ2tIlBEdDJz/FiSSw=\");\n\n_c = DataFetching;\nexport default DataFetching;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataFetching\");","map":{"version":3,"names":["React","useState","useEffect","useSyncExternalStore","axios","S1","UpdateComponent","CreateComponent","DeleteComponent","AuthService","DataFetching","admin","isSet","setisSet","focusedlist","setfocusedlist","posts","setPosts","isModify","setisModify","isAdmin","setAdmin","user","get","then","res","data","catch","err","console","log","choixPb","e","target","value","map","id","title_pb"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/src/components2/DataFetching.js"],"sourcesContent":["import React, { useState, useEffect, useSyncExternalStore } from \"react\";\nimport axios from \"axios\";\nimport \"../styles/DataFetching.css\";\nimport S1 from \"./S1\";\nimport UpdateComponent from \"./Update.component\";\nimport CreateComponent from \"./Create.component\";\nimport DeleteComponent from \"./Delete.component\";\nimport AuthService from \"../services/auth.service\";\n\nfunction DataFetching({ admin }) {\n  const [isSet, setisSet] = useState(false);\n  const [focusedlist, setfocusedlist] = useState();\n  const [posts, setPosts] = useState([]);\n  const [isModify, setisModify] = useState(false);\n  const [isAdmin, setAdmin] = useState(false);\n\n  // const user = AuthService.getCurrentUser();\n  if (user) {\n    setAdmin(true);\n  }\n\n  useEffect(() => {\n    axios\n      .get(\"http://localhost:8080/pb/\")\n      .then((res) => {\n        setPosts(res.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  function choixPb(e) {\n    setisSet(!isSet);\n    setfocusedlist(e.target.value);\n  }\n\n  return (\n    <div className=\"faq-list-pb\">\n      {posts.map(({ id, title_pb }) => (\n        <div key={id} className=\"mainpb\">\n          {\" \"}\n          {title_pb}\n          <div className=\"main2\">\n            <button\n              className=\"fleche\"\n              value={id}\n              onClick={(e) => choixPb(e)}\n            ></button>\n            {isAdmin && (\n              <button\n                className=\"ecrou\"\n                value={id}\n                onClick={(e) => {\n                  setisModify(!isModify);\n                  setfocusedlist(e.target.value);\n                }}\n              ></button>\n            )}\n          </div>\n          {isModify && focusedlist === `${id}` && (\n            <div className=\"main_crud\">\n              <UpdateComponent\n                id={id}\n                title={title_pb}\n                base={\"pb\"}\n                champ={\"title_pb\"}\n              />\n              <CreateComponent\n                id={id}\n                base={\"s1\"}\n                champ={\"title_s1\"}\n                champ2={\"ind_pb\"}\n                title={title_pb}\n              />\n              <DeleteComponent id={id} base={\"pb\"} champ={\"id\"} />\n            </div>\n          )}\n          {isSet && focusedlist === `${id}` ? (\n            <div className=\"choix-main\">\n              <S1 id={id} admin={admin} />\n            </div>\n          ) : null}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default DataFetching;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}