{"ast":null,"code":"import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen, PdfPaddings } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush, PdfTextWebLink } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { PdfTrueTypeFont } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\nimport { getUid, getPrintGridModel, measureColumnDepth, isExportColumns, updateColumnTypeForExportColumns, prepareColumns } from '../base/util';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n *\n * @hidden\n */\n\nvar PdfExport =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the Grid PDF Export module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @hidden\n   */\n  function PdfExport(parent) {\n    this.hideColumnInclude = false;\n    this.currentViewData = false;\n    this.customDataSource = false;\n    this.isGrouping = false;\n    this.headerOnPages = [];\n    this.drawPosition = {\n      xPosition: 0,\n      yPosition: 0\n    };\n    this.parent = parent;\n    this.helper = new ExportHelper(parent);\n    this.gridPool = {};\n  }\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   */\n\n\n  PdfExport.prototype.getModuleName = function () {\n    return 'PdfExport';\n  };\n\n  PdfExport.prototype.init = function (parent) {\n    this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n    this.pdfDocument = undefined;\n    this.hideColumnInclude = false;\n    this.currentViewData = false;\n    this.parent = parent;\n    this.isGrouping = false;\n    this.isExporting = true;\n    parent.id = getUid('main-grid');\n    this.gridPool[parent.id] = false;\n    this.pdfPageSettings = new PdfPageSettings();\n  };\n\n  PdfExport.prototype.exportWithData = function (parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject) {\n    var _this = this;\n\n    this.init(parent);\n\n    if (!isNullOrUndefined(pdfDoc)) {\n      this.pdfDocument = pdfDoc;\n    } else {\n      this.pdfDocument = new PdfDocument();\n    }\n\n    this.processExport(parent, returnType, pdfExportProperties, isMultipleExport).then(function () {\n      _this.isExporting = false;\n      parent.trigger(events.pdfExportComplete, _this.isBlob ? {\n        promise: _this.blobPromise\n      } : {});\n\n      _this.parent.log('exporting_complete', _this.getModuleName());\n\n      resolve(_this.pdfDocument);\n    }).catch(function (e) {\n      reject(_this.pdfDocument);\n\n      _this.parent.trigger(events.actionFailure, e);\n    });\n  };\n  /**\n   * Used to map the input data\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {PdfExportProperties} pdfExportProperties - specifies the PdfExportProperties\n   * @param {boolean} isMultipleExport - specifies the isMultipleExport\n   * @param {Object} pdfDoc - specifies the pdfDoc\n   * @param {boolean} isBlob - speciies whether it is Blob or not\n   * @returns {void}\n   */\n\n\n  PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n    var _this = this;\n\n    this.data = new Data(this.parent);\n    this.isBlob = isBlob;\n    this.gridPool = {};\n    var query = new Query();\n\n    if (parent.childGrid && !(!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.hierarchyExportMode === 'None')) {\n      parent.expandedRows = getPrintGridModel(parent).expandedRows;\n    }\n\n    var args = {\n      requestType: 'beforePdfExport',\n      cancel: false,\n      headerPageNumbers: [],\n      gridDrawPosition: {\n        xPosition: 0,\n        yPosition: 0\n      },\n      generateQuery: false\n    };\n    var gridObject = 'gridObject';\n    args[gridObject] = parent;\n    var can = 'cancel';\n    var generateQuery = 'generateQuery';\n    var header = 'headerPageNumbers';\n    var drawPos = 'gridDrawPosition';\n    parent.trigger(events.beforePdfExport, args);\n\n    if (args[can] === true) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      return new Promise(function (resolve, reject) {\n        return resolve();\n      });\n    }\n\n    if (isExportColumns(pdfExportProperties)) {\n      updateColumnTypeForExportColumns(pdfExportProperties, parent);\n    }\n\n    if (args[generateQuery]) {\n      query = ExportHelper.getQuery(parent, this.data);\n    }\n\n    this.headerOnPages = args[header];\n    this.drawPosition = args[drawPos];\n    this.parent.log('exporting_begin', this.getModuleName());\n\n    if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource) && pdfExportProperties.dataSource instanceof DataManager) {\n      return new Promise(function (resolve, reject) {\n        pdfExportProperties.dataSource.executeQuery(query).then(function (returnType) {\n          _this.exportWithData(parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject);\n        });\n      });\n    } else if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType === 'CurrentPage') {\n      return new Promise(function (resolve, reject) {\n        _this.exportWithData(parent, pdfDoc, resolve, _this.parent.getCurrentViewRecords(), pdfExportProperties, isMultipleExport, reject);\n      });\n    } else {\n      var allPromise_1 = [];\n      allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(parent, this.data)));\n      allPromise_1.push(this.helper.getColumnData(parent));\n      return new Promise(function (resolve, reject) {\n        Promise.all(allPromise_1).then(function (e) {\n          _this.init(parent);\n\n          if (!isNullOrUndefined(pdfDoc)) {\n            _this.pdfDocument = pdfDoc;\n          } else {\n            _this.pdfDocument = new PdfDocument();\n          }\n\n          _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport).then(function () {\n            _this.isExporting = false;\n            parent.trigger(events.pdfExportComplete, _this.isBlob ? {\n              promise: _this.blobPromise\n            } : {});\n\n            _this.parent.log('exporting_complete', _this.getModuleName());\n\n            resolve(_this.pdfDocument);\n          }).catch(function (e) {\n            reject(_this.pdfDocument);\n\n            _this.parent.trigger(events.actionFailure, e);\n          });\n        });\n      });\n    }\n  };\n\n  PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n    var _this = this;\n\n    var section = this.pdfDocument.sections.add();\n    var pdfGrid;\n    this.processSectionExportProperties(section, pdfExportProperties);\n    var pdfPage = section.pages.add(); // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n    return new Promise(function (resolve, reject) {\n      pdfGrid = _this.processGridExport(gObj, returnType, pdfExportProperties);\n      _this.globalResolve = resolve;\n      _this.gridPool[gObj.id] = true;\n\n      _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n    }).then(function () {\n      // draw the grid\n      var xPosition = 'xPosition';\n      var yPosition = 'yPosition';\n      pdfGrid.draw(pdfPage, _this.drawPosition[xPosition], _this.drawPosition[yPosition]);\n\n      _this.drawHeader(pdfExportProperties);\n\n      if (!isMultipleExport) {\n        // save the PDF\n        if (!_this.isBlob) {\n          if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n            _this.pdfDocument.save(pdfExportProperties.fileName);\n          } else {\n            _this.pdfDocument.save('Export.pdf');\n          }\n        } else {\n          _this.blobPromise = _this.pdfDocument.save();\n        }\n\n        _this.pdfDocument.destroy();\n\n        delete gObj.expandedRows;\n      }\n\n      return _this.pdfDocument;\n    });\n  };\n\n  PdfExport.prototype.processSectionExportProperties = function (section, pdfExportProperties) {\n    if (!isNullOrUndefined(pdfExportProperties) && (!isNullOrUndefined(pdfExportProperties.pageOrientation) || !isNullOrUndefined(pdfExportProperties.pageSize))) {\n      this.pdfPageSettings.orientation = pdfExportProperties.pageOrientation === 'Landscape' ? PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n      this.pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n      section.setPageSettings(this.pdfPageSettings);\n    }\n\n    return section;\n  };\n\n  PdfExport.prototype.processGridExport = function (gObj, returnType, pdfExportProperties) {\n    var allowHorizontalOverflow = true;\n    var isFrozen = this.parent.isFrozenGrid() && !this.parent.getFrozenColumns();\n\n    if (!isNullOrUndefined(pdfExportProperties)) {\n      this.gridTheme = pdfExportProperties.theme;\n      allowHorizontalOverflow = isNullOrUndefined(pdfExportProperties.allowHorizontalOverflow) ? true : pdfExportProperties.allowHorizontalOverflow;\n    }\n\n    var helper = new ExportHelper(gObj, this.helper.getForeignKeyData());\n    var dataSource = this.processExportProperties(pdfExportProperties, returnType.result);\n    var columns = isExportColumns(pdfExportProperties) ? prepareColumns(pdfExportProperties.columns, gObj.enableColumnVirtualization) : helper.getGridExportColumns(isFrozen ? gObj.getColumns() : gObj.columns);\n    columns = columns.filter(function (columns) {\n      return isNullOrUndefined(columns.commands);\n    });\n    var isGrouping = false;\n\n    if (gObj.groupSettings.columns.length) {\n      isGrouping = true;\n    }\n\n    if (gObj.childGrid && !isNullOrUndefined(pdfExportProperties)) {\n      gObj.hierarchyPrintMode = pdfExportProperties.hierarchyExportMode || 'Expanded';\n    } // create a grid\n\n\n    var pdfGrid = new PdfGrid(); // get header theme style\n\n    var headerThemeStyle = this.getHeaderThemeStyle();\n    var border = headerThemeStyle.border;\n    var headerFont = headerThemeStyle.font;\n    var headerBrush = headerThemeStyle.brush;\n    var returnValue = helper.getHeaders(columns, this.hideColumnInclude); // Column collection with respect to the records in the grid\n\n    var gridColumns = returnValue.columns; // process grid header content\n\n    pdfGrid = this.processGridHeaders(gObj.groupSettings.columns.length, pdfGrid, returnValue.rows, gridColumns, border, headerFont, headerBrush, gObj, allowHorizontalOverflow, columns); // set alignment, width and type of the values of the column\n\n    this.setColumnProperties(gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow);\n    var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n\n    if (!isNullOrUndefined(dataSource) && dataSource.length) {\n      if (isGrouping) {\n        if (!isNullOrUndefined(captionThemeStyle.border)) {\n          border = captionThemeStyle.border;\n        }\n\n        this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType, pdfExportProperties, helper, 0);\n      } else {\n        this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid, 0, pdfExportProperties, helper, 0);\n      }\n\n      if (!isNullOrUndefined(returnType.aggregates)) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        var sRows = void 0;\n        var column = summaryModel.getColumns();\n        column = column.filter(function (col) {\n          return isNullOrUndefined(col.commands) && col.type !== 'checkbox';\n        });\n\n        if (gObj.aggregates.length && this.parent !== gObj) {\n          gObj.aggregateModule.prepareSummaryInfo();\n        }\n\n        if (this.customDataSource) {\n          sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n        } else if (this.currentViewData) {\n          sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n        } else if (isGrouping) {\n          sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n        } else {\n          sRows = summaryModel.generateRows(returnType.result, returnType.aggregates, null, null, column);\n        }\n\n        this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false, null, null, null, isGrouping ? false : true);\n      }\n    } else {\n      var row = pdfGrid.rows.addRow();\n      row.style.setBorder(border);\n    }\n\n    return pdfGrid;\n  };\n\n  PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n    if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption)) {\n      var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n      var fontFamily = !isNullOrUndefined(this.gridTheme.caption.fontName) ? this.getFontFamily(this.gridTheme.caption.fontName) : PdfFontFamily.Helvetica;\n      var fontStyle = this.getFontStyle(this.gridTheme.caption);\n      var pdfColor = new PdfColor(0, 0, 0);\n\n      if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n        var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n        pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n      }\n\n      var borderCaption = this.gridTheme.caption.border ? this.getBorderStyle(this.gridTheme.caption.border) : null;\n      var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n\n      if (!isNullOrUndefined(this.gridTheme.caption.font)) {\n        font = this.gridTheme.caption.font;\n      }\n\n      return {\n        font: font,\n        brush: new PdfSolidBrush(pdfColor),\n        backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)),\n        border: borderCaption\n      };\n    } else {\n      //Material theme\n      return {\n        font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75),\n        brush: new PdfSolidBrush(new PdfColor(0, 0, 0)),\n        backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246))\n      };\n    }\n  };\n\n  PdfExport.prototype.getGridPdfFont = function (args) {\n    var fontFamily = 'fontFamily';\n    var fontSize = 'fontSize';\n    var fontStyle = 'fontStyle';\n    var isTrueType = 'isTrueType';\n    var style = 0;\n\n    if (args.header && args.header.font) {\n      var headerFont = args.header.font[fontFamily];\n      var headerSize = args.header.font[fontSize];\n      var headerStyle = args.header.font[fontStyle];\n      style = isNullOrUndefined(PdfFontStyle[headerStyle]) ? 0 : PdfFontStyle[headerStyle];\n\n      if (args.header.font[isTrueType]) {\n        args.header.font = new PdfTrueTypeFont(headerFont, headerSize, style);\n      } else {\n        var fontFamily_1 = !isNullOrUndefined(headerFont) ? this.getFontFamily(headerFont) : PdfFontFamily.Helvetica;\n        args.header.font = new PdfStandardFont(fontFamily_1, headerSize, style);\n      }\n    }\n\n    if (args.caption && args.caption.font) {\n      var captionFont = args.caption.font[fontFamily];\n      var captionSize = args.caption.font[fontSize];\n      var captionStyle = args.caption.font[fontStyle];\n      style = isNullOrUndefined(PdfFontStyle[captionStyle]) ? 0 : PdfFontStyle[captionStyle];\n\n      if (args.caption.font[isTrueType]) {\n        args.caption.font = new PdfTrueTypeFont(captionFont, captionSize, style);\n      } else {\n        var fontFamily_2 = !isNullOrUndefined(captionFont) ? this.getFontFamily(captionFont) : PdfFontFamily.Helvetica;\n        args.caption.font = new PdfStandardFont(fontFamily_2, captionSize, style);\n      }\n    }\n\n    if (args.record && args.record.font) {\n      var recordFont = args.record.font[fontFamily];\n      var recordSize = args.record.font[fontSize];\n      var recordStyle = args.record.font[fontStyle];\n      style = isNullOrUndefined(PdfFontStyle[recordStyle]) ? 0 : PdfFontStyle[recordStyle];\n\n      if (args.record.font[isTrueType]) {\n        args.record.font = new PdfTrueTypeFont(recordFont, recordSize, style);\n      } else {\n        var fontFamily_3 = !isNullOrUndefined(recordFont) ? this.getFontFamily(recordFont) : PdfFontFamily.Helvetica;\n        args.record.font = new PdfStandardFont(fontFamily_3, recordSize, style);\n      }\n    }\n  };\n\n  PdfExport.prototype.getHeaderThemeStyle = function () {\n    var border = new PdfBorders();\n\n    if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n      var fontFamily = !isNullOrUndefined(this.gridTheme.header.fontName) ? this.getFontFamily(this.gridTheme.header.fontName) : PdfFontFamily.Helvetica;\n      var fontStyle = this.getFontStyle(this.gridTheme.header);\n      var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n      var pdfColor = new PdfColor();\n\n      if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n        var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n        pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n      }\n\n      var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n\n      if (!isNullOrUndefined(this.gridTheme.header.font)) {\n        font = this.gridTheme.header.font;\n      }\n\n      return {\n        border: this.getBorderStyle(this.gridTheme.header.border),\n        font: font,\n        brush: new PdfSolidBrush(pdfColor)\n      };\n    } else {\n      //Material theme\n      border.all = new PdfPen(new PdfColor(234, 234, 234));\n      return {\n        border: border,\n        font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5),\n        brush: new PdfSolidBrush(new PdfColor(102, 102, 102))\n      };\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index) {\n    var _this = this;\n\n    var groupIndex = level;\n\n    var _loop_1 = function (dataSourceItems) {\n      var row = pdfGrid.rows.addRow();\n      var col = gObj.getColumnByField(dataSourceItems.field); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var args = {\n        value: dataSourceItems.key,\n        column: col,\n        style: undefined,\n        isForeignKey: col.isForeignColumn()\n      };\n      var value = this_1.parent.getColumnByField(dataSourceItems.field).headerText + ': ' + (!col.enableGroupByFormat ? this_1.exportValueFormatter.formatCellValue(args) : dataSourceItems.key) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n      var cArgs = {\n        captionText: value,\n        type: 'PDF',\n        data: dataSourceItems,\n        style: undefined\n      };\n      this_1.parent.trigger(events.exportGroupCaption, cArgs, function (cArgs) {\n        row.cells.getCell(groupIndex).value = cArgs.captionText;\n        row.cells.getCell(groupIndex).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n        row.style.setBorder(border);\n        row.style.setFont(font);\n        row.style.setTextBrush(brush);\n        row.style.setBackgroundBrush(backgroundBrush);\n\n        if (!isNullOrUndefined(cArgs.style)) {\n          _this.processCellStyle(row.cells.getCell(groupIndex), cArgs);\n        }\n\n        var sRows;\n        var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n\n        if (!isNullOrUndefined(dataSourceItems.items.records)) {\n          sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n        } else {\n          sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n        }\n\n        if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n          row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n        }\n\n        if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n          _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\n          _this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, groupIndex + 1, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index);\n\n          var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n          sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n\n          _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n        } else {\n          _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\n          index = _this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, groupIndex + 1, pdfExportProperties, helper, index);\n          var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n          sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n          var isGroupedFooter = true;\n\n          _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false, null, null, isGroupedFooter);\n        }\n      });\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n      var dataSourceItems = dataSource_1[_i];\n\n      _loop_1(dataSourceItems);\n    }\n  };\n\n  PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumn, border, headerFont, headerBrush, grid, allowHorizontalOverflow, eCols) {\n    var _this = this;\n\n    var columnCount = gridColumn.length + childLevels;\n    var depth = measureColumnDepth(eCols);\n    var cols = eCols;\n    var index = 0;\n    var rowNumber = [];\n\n    for (var i = 0; i < rows.length; i++) {\n      rowNumber[i] = 0;\n    }\n\n    if (this.parent.groupSettings.columns.length) {\n      index = this.parent.groupSettings.columns.length - 1;\n      columnCount = columnCount - 1;\n    }\n\n    pdfGrid.columns.add(columnCount);\n    pdfGrid.headers.add(rows.length);\n\n    var applyTextAndSpan = function (rowIdx, colIdx, col, rowSpan, colSpan) {\n      var gridHeader = pdfGrid.headers.getHeader(rowIdx);\n      var pdfCell = gridHeader.cells.getCell(colIdx);\n      var cell = rows[rowIdx].cells[_this.parent.groupSettings.columns.length ? colIdx : rowNumber[rowIdx]];\n      rowNumber[rowIdx] = rowNumber[rowIdx] + 1;\n\n      if (!isNullOrUndefined(col.headerTextAlign)) {\n        pdfCell.style.stringFormat = _this.getHorizontalAlignment(col.headerTextAlign);\n      }\n\n      if (rowSpan > 0) {\n        pdfCell.rowSpan = rowSpan;\n        pdfCell.style.stringFormat = _this.getVerticalAlignment('Bottom', pdfCell.style.stringFormat, col.textAlign);\n      }\n\n      if (colSpan > 0) {\n        pdfCell.columnSpan = colSpan;\n      }\n\n      gridHeader.style.setBorder(border);\n      gridHeader.style.setFont(headerFont);\n      gridHeader.style.setTextBrush(headerBrush);\n      pdfCell.value = col.headerText;\n\n      if (!isNullOrUndefined(cell) && (cell.cellType === CellType.HeaderIndent || cell.cellType === CellType.DetailHeader)) {\n        pdfCell.value = '';\n        pdfCell.width = 20;\n      }\n\n      var args = {\n        cell: pdfCell,\n        gridCell: cell,\n        style: pdfCell.style\n      };\n\n      _this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n\n      var evtArgs = args;\n      var setCellBorder = args.style.borders;\n      var setCellFont = args.style.font;\n      var setHeaderBrush = args.style.textBrush;\n\n      if (!isNullOrUndefined(setCellBorder)) {\n        gridHeader.style.setBorder(setCellBorder);\n      }\n\n      if (!isNullOrUndefined(setCellFont)) {\n        gridHeader.style.setFont(setCellFont);\n      }\n\n      if (!isNullOrUndefined(setHeaderBrush)) {\n        gridHeader.style.setTextBrush(setHeaderBrush);\n      }\n\n      if (!isNullOrUndefined(evtArgs.style.verticalAlignment)) {\n        pdfCell.style.stringFormat = _this.getVerticalAlignment(evtArgs.style.verticalAlignment, pdfCell.style.stringFormat);\n      }\n\n      if (!isNullOrUndefined(evtArgs.image)) {\n        pdfCell.value = new PdfBitmap(evtArgs.image.base64);\n      }\n\n      if (!isNullOrUndefined(evtArgs.hyperLink)) {\n        pdfCell.value = _this.setHyperLink(evtArgs);\n      }\n    };\n\n    var recuHeader = function (cols, depth, spanCnt, colIndex, rowIndex, isRoot) {\n      var cidx = 0;\n\n      for (var i = 0; i < cols.length; i++) {\n        if (isRoot) {\n          cidx = cidx + spanCnt + (i === 0 ? 0 : -1);\n          colIndex = cidx;\n          spanCnt = 0;\n        }\n\n        if (!isRoot && !cols[i].visible) {\n          colIndex = colIndex - 1;\n        }\n\n        if (cols[i].columns && cols[i].columns.length) {\n          var newSpanCnt = recuHeader(cols[i].columns, depth - 1, 0, i + colIndex, rowIndex + 1, false);\n          applyTextAndSpan(rowIndex, i + colIndex + index, cols[i], 0, newSpanCnt);\n          spanCnt = spanCnt + newSpanCnt;\n          colIndex = colIndex + newSpanCnt - 1;\n        } else if (cols[i].visible || _this.hideColumnInclude) {\n          spanCnt++;\n          applyTextAndSpan(rowIndex, i + colIndex + index, cols[i], depth, 0);\n        }\n      }\n\n      return spanCnt;\n    };\n\n    recuHeader(cols, depth, 0, 0, 0, true);\n\n    if (pdfGrid.columns.count >= 6 && allowHorizontalOverflow) {\n      pdfGrid.style.allowHorizontalOverflow = true;\n    }\n\n    return pdfGrid;\n  };\n\n  PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource) {\n    if (!isNullOrUndefined(pdfExportProperties)) {\n      if (!isNullOrUndefined(pdfExportProperties.theme)) {\n        this.gridTheme = pdfExportProperties.theme;\n      }\n\n      var clientSize = this.pdfPageSettings.size;\n      this.drawHeader(pdfExportProperties);\n\n      if (!isNullOrUndefined(pdfExportProperties.footer)) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var footer = pdfExportProperties.footer;\n        var position = new PointF(0, clientSize.width - 80 - footer.fromBottom * 0.75);\n        var size = new SizeF(clientSize.width - 80, footer.height * 0.75);\n        var bounds = new RectangleF(position, size);\n        this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n      }\n\n      if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n        this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n      }\n\n      if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n        if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n          dataSource = pdfExportProperties.dataSource;\n        }\n\n        this.customDataSource = true;\n        this.currentViewData = false;\n      } else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n        if (pdfExportProperties.exportType === 'CurrentPage') {\n          dataSource = this.parent.currentViewData;\n          this.currentViewData = true;\n          this.customDataSource = false;\n        } else {\n          this.currentViewData = false;\n          this.customDataSource = false;\n        }\n      } else {\n        this.currentViewData = false;\n        this.customDataSource = false;\n      }\n    } else {\n      this.currentViewData = false;\n      this.customDataSource = false;\n    }\n\n    return dataSource;\n  };\n\n  PdfExport.prototype.drawHeader = function (pdfExportProperties) {\n    var _this = this;\n\n    var clientSize = this.pdfPageSettings.size;\n\n    if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.header)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var header = pdfExportProperties.header;\n      var position = new PointF(0, header.fromTop);\n      var size = new SizeF(clientSize.width - 80, header.height * 0.75);\n      var bounds = new RectangleF(position, size);\n\n      if (!this.headerOnPages.length) {\n        this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n      } else {\n        var headerTemplate_1 = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n        this.headerOnPages.filter(function (index) {\n          if (index - 1 >= 0 && index - 1 < _this.pdfDocument.pages.count - 1) {\n            _this.pdfDocument.pages.getPageByIndex(index - 1).graphics.drawPdfTemplate(headerTemplate_1.template, new PointF(0, 0));\n          }\n        });\n      }\n    }\n  };\n\n  PdfExport.prototype.drawPageTemplate = function (template, element) {\n    for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n      var content = _a[_i];\n      this.processContentValidation(content);\n\n      switch (content.type) {\n        case 'Text':\n          if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n            throw new Error('please enter the valid input value in text content...');\n          }\n\n          this.drawText(template, content);\n          break;\n\n        case 'PageNumber':\n          this.drawPageNumber(template, content);\n          break;\n\n        case 'Image':\n          if (content.src === undefined || content.src === null || content.src === '') {\n            throw new Error('please enter the valid base64 string in image content...');\n          }\n\n          this.drawImage(template, content);\n          break;\n\n        case 'Line':\n          this.drawLine(template, content);\n          break;\n\n        default:\n          throw new Error('Please set valid content type...');\n      }\n    }\n\n    return template;\n  };\n\n  PdfExport.prototype.processContentValidation = function (content) {\n    if (content.type === undefined || content.type === null) {\n      throw new Error('please set valid content type...');\n    } else {\n      if (content.type === 'Line') {\n        if (content.points === undefined || content.points === null) {\n          throw new Error('please enter valid points in ' + content.type + ' content...');\n        } else {\n          if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n            throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n          }\n\n          if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n            throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n          }\n\n          if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n            throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n          }\n\n          if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n            throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n          }\n        }\n      } else {\n        if (content.position === undefined || content.position === null) {\n          throw new Error('please enter valid position in ' + content.type + ' content...');\n        } else {\n          if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n            throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n          }\n\n          if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n            throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  PdfExport.prototype.drawText = function (pageTemplate, content) {\n    var font = this.getFont(content);\n    var brush = this.getBrushFromContent(content);\n    var pen = null;\n\n    if (!isNullOrUndefined(content.style.textPenColor)) {\n      var penColor = this.hexToRgb(content.style.textPenColor);\n      pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n    }\n\n    if (brush == null && pen == null) {\n      brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n    }\n\n    var value = content.value.toString();\n    var x = content.position.x * 0.75;\n    var y = content.position.y * 0.75;\n    var format = new PdfStringFormat();\n    var result = this.setContentFormat(content, format);\n\n    if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n      pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n    } else {\n      pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n    var font = this.getFont(content);\n    var brush = null;\n\n    if (!isNullOrUndefined(content.style.textBrushColor)) {\n      var brushColor = this.hexToRgb(content.style.textBrushColor);\n      brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n    } else {\n      brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n    }\n\n    var pageNumber = new PdfPageNumberField(font, brush);\n    pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n    var compositeField;\n    var format;\n\n    if (!isNullOrUndefined(content.format)) {\n      var total = '$total';\n      var current = '$current';\n\n      if (content.format.indexOf(total) !== -1 && content.format.indexOf(current) !== -1) {\n        var pageCount = new PdfPageCountField(font);\n        pageCount.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n\n        if (content.format.indexOf(total) > content.format.indexOf(current)) {\n          format = content.format.replace(current, '0');\n          format = format.replace(total, '1');\n        } else {\n          format = content.format.replace(current, '1');\n          format = format.replace(total, '0');\n        }\n\n        compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n      } else if (content.format.indexOf(current) !== -1 && content.format.indexOf(total) === -1) {\n        format = content.format.replace(current, '0');\n        compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n      } else {\n        var pageCount = new PdfPageCountField(font);\n        format = content.format.replace(total, '0');\n        compositeField = new PdfCompositeField(font, brush, format, pageCount);\n      }\n    } else {\n      format = '{0}';\n      compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n    }\n\n    var x = content.position.x * 0.75;\n    var y = content.position.y * 0.75;\n    var result = this.setContentFormat(content, compositeField.stringFormat);\n\n    if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n      compositeField.stringFormat = result.format;\n      compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n    }\n\n    compositeField.draw(documentHeader.graphics, x, y);\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  PdfExport.prototype.drawImage = function (documentHeader, content) {\n    var x = content.position.x * 0.75;\n    var y = content.position.y * 0.75;\n    var width = !isNullOrUndefined(content.size) ? content.size.width * 0.75 : undefined;\n    var height = !isNullOrUndefined(content.size) ? content.size.height * 0.75 : undefined;\n    var image = new PdfBitmap(content.src);\n\n    if (!isNullOrUndefined(width)) {\n      documentHeader.graphics.drawImage(image, x, y, width, height);\n    } else {\n      documentHeader.graphics.drawImage(image, x, y);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  PdfExport.prototype.drawLine = function (documentHeader, content) {\n    var x1 = content.points.x1 * 0.75;\n    var y1 = content.points.y1 * 0.75;\n    var x2 = content.points.x2 * 0.75;\n    var y2 = content.points.y2 * 0.75;\n    var pen = this.getPenFromContent(content);\n\n    if (!isNullOrUndefined(content.style) && content.style !== null) {\n      if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n        pen.width = content.style.penSize * 0.75;\n      }\n\n      pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n    }\n\n    documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n  };\n\n  PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex, isGroupedFooter, isAggregate) {\n    for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n      var row = sRows_1[_i];\n      var leastCaptionSummaryIndex = -1;\n      var index = 0;\n      var isEmpty = true; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var value = [];\n      var aggIdx = isAggregate ? 0 : 1;\n\n      for (var i = 0; i < pdfGrid.columns.count + aggIdx; i++) {\n        var cell = row.cells[index];\n\n        if (cell.cellType === CellType.DetailFooterIntent) {\n          i--;\n          index++;\n          continue;\n        }\n\n        if (!this.hideColumnInclude) {\n          while (cell.visible === undefined) {\n            if (cell.cellType === CellType.DetailFooterIntent) {\n              continue;\n            }\n\n            if (!isNullOrUndefined(captionRow)) {\n              if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                var args = {\n                  row: row,\n                  type: 'GroupCaption',\n                  style: captionRow.cells\n                };\n                this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n                value.push(captionRow.cells.getCell(i).value);\n                isEmpty = false;\n\n                if (!isCaption) {\n                  i += 1;\n                }\n              } else {\n                value.push('');\n              }\n            } else {\n              value.push('');\n            }\n\n            i += 1;\n            index = index + 1;\n            cell = row.cells[index];\n          }\n\n          while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n            index = index + 1;\n            cell = row.cells[index];\n          }\n        }\n\n        if (cell.isDataCell) {\n          var templateFn = {};\n\n          if (!isNullOrUndefined(cell.column.footerTemplate) || !isNullOrUndefined(cell.column.groupCaptionTemplate) || !isNullOrUndefined(cell.column.groupFooterTemplate)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell);\n            templateFn = result.templateFunction;\n            leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n            var txt = void 0;\n            var data = row.data[cell.column.field ? cell.column.field : cell.column.columnName];\n\n            if (this.parent.isReact || this.parent.isVue) {\n              txt = templateFn[getEnumValue(CellType, cell.cellType)](data, this.parent);\n\n              if (this.parent.isReact) {\n                this.parent.renderTemplates();\n              }\n            } else {\n              txt = templateFn[getEnumValue(CellType, cell.cellType)](data);\n            }\n\n            value.push(txt[0].textContent);\n            isEmpty = false;\n          } else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n\n            if (!isNullOrUndefined(result)) {\n              value.push(result);\n            }\n          }\n        } else {\n          value.push('');\n        }\n\n        if (isEmpty && value[i] !== '' && !isNullOrUndefined(value[i]) && value[i] !== null) {\n          isEmpty = false;\n        }\n\n        index += 1;\n      }\n\n      if (!isAggregate) {\n        if (!isCaption) {\n          value.splice(0, 1);\n        } else {\n          for (var i = this.parent.groupSettings.columns.length; i < value.length - 1; i++) {\n            value[i] = value[i + 1];\n            value[i + 1] = value[i + 2] ? value[i + 2] : '';\n          }\n        }\n      }\n\n      if (!isEmpty) {\n        if (!isCaption) {\n          var gridRow = pdfGrid.rows.addRow();\n          gridRow.style.setBorder(border);\n          gridRow.style.setFont(font);\n          gridRow.style.setTextBrush(brush);\n          gridRow.style.setBackgroundBrush(backgroundBrush);\n          var args = {\n            row: row,\n            type: isGroupedFooter ? 'GroupFooter' : 'Footer',\n            style: gridRow.cells\n          };\n          this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n\n          for (var i = 0; i < pdfGrid.columns.count; i++) {\n            gridRow.cells.getCell(i).value = value[i].toString();\n          }\n        } else {\n          for (var i = 0; i < pdfGrid.columns.count; i++) {\n            captionRow.cells.getCell(i).value = value[i].toString();\n\n            if (i === groupIndex && leastCaptionSummaryIndex !== -1 && leastCaptionSummaryIndex !== 1) {\n              captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - 1 - groupIndex;\n            } else if (i === groupIndex && leastCaptionSummaryIndex === -1) {\n              captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - groupIndex;\n            }\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, cell) {\n    if (!isNullOrUndefined(cell.column.footerTemplate) && cell.cellType === CellType.Summary) {\n      templateFn[getEnumValue(CellType, CellType.Summary)] = compile(cell.column.footerTemplate);\n    } else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n      if (leastCaptionSummaryIndex === -1) {\n        leastCaptionSummaryIndex = index;\n      }\n\n      templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(cell.column.groupCaptionTemplate);\n    } else {\n      templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(cell.column.groupFooterTemplate);\n    }\n\n    return {\n      templateFunction: templateFn,\n      leastCaptionSummaryIndex: leastCaptionSummaryIndex\n    };\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n    if (!isNullOrUndefined(data.Sum)) {\n      return data.Sum;\n    } else if (!isNullOrUndefined(data.Average)) {\n      return data.Average;\n    } else if (!isNullOrUndefined(data.Max)) {\n      return data.Max;\n    } else if (!isNullOrUndefined(data.Min)) {\n      return data.Min;\n    } else if (!isNullOrUndefined(data.Count)) {\n      return data.Count;\n    } else if (!isNullOrUndefined(data.TrueCount)) {\n      return data.TrueCount;\n    } else if (!isNullOrUndefined(data.FalseCount)) {\n      return data.FalseCount;\n    } else if (!isNullOrUndefined(data.Custom)) {\n      return data.Custom;\n    }\n  };\n  /**\n   * Set alignment, width and type of the values of the column\n   *\n   * @param {Column[]} gridColumns - specifies the grid column\n   * @param {PdfGrid} pdfGrid - specifies the pdfGrid\n   * @param {ExportHelper} helper - specifies the helper\n   * @param {IGrid} gObj - specifies the IGrid\n   * @param {boolean} allowHorizontalOverflow - specifies the allowHorizontalOverflow\n   * @returns {void}\n   */\n\n\n  PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow) {\n    var startIndex = gObj.groupSettings.columns.length ? gObj.groupSettings.columns.length - 1 : 0;\n\n    for (var i = 0; i < startIndex; i++) {\n      pdfGrid.columns.getColumn(i).width = 20;\n    }\n\n    for (var i = 0; i < gridColumns.length; i++) {\n      if (!isNullOrUndefined(gridColumns[i].textAlign)) {\n        pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n      } // Need to add width consideration with % value\n\n\n      if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[i].width) && allowHorizontalOverflow) {\n        pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ? gridColumns[i].width * 0.75 : helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n      }\n    }\n  };\n  /**\n   * set default style properties of each rows in exporting grid\n   *\n   * @param {PdfGridRow} row - specifies the PdfGridRow\n   * @param {PdfBorders} border - specifies the PdfBorders\n   * @returns {PdfGrid} returns the pdfgrid\n   * @private\n   */\n\n\n  PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n    if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record)) {\n      var fontFamily = !isNullOrUndefined(this.gridTheme.record.fontName) ? this.getFontFamily(this.gridTheme.record.fontName) : PdfFontFamily.Helvetica;\n      var fontSize = !isNullOrUndefined(this.gridTheme.record.fontSize) ? this.gridTheme.record.fontSize : 9.75;\n      var fontStyle = this.getFontStyle(this.gridTheme.record);\n      var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n\n      if (!isNullOrUndefined(this.gridTheme.record.font)) {\n        font = this.gridTheme.record.font;\n      }\n\n      row.style.setFont(font);\n      var pdfColor = new PdfColor();\n\n      if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n        var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n        pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n      }\n\n      row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n    } else {\n      row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n    }\n\n    var borderRecord = this.gridTheme && this.gridTheme.record && this.gridTheme.record.border ? this.getBorderStyle(this.gridTheme.record.border) : border;\n    row.style.setBorder(borderRecord);\n    return row;\n  };\n  /**\n   * generate the formatted cell values\n   *\n   * @param {PdfBorders} border - specifies the border\n   * @param {Column[]} columns - specifies the columns\n   * @param {IGrid} gObj - specifies the IGrid\n   * @param {Object[]} dataSource - specifies the datasource\n   * @param {PdfGrid} pdfGrid - specifies the pdfGrid\n   * @param {number} startIndex - specifies the startindex\n   * @param {PdfExportProperties} pdfExportProperties - specifies the pdfExportProperties\n   * @param {ExportHelper} helper - specifies the helper\n   * @param {number} rowIndex - specifies the rowIndex\n   * @returns {number} returns the number of records\n   * @private\n   */\n\n\n  PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, startIndex, pdfExportProperties, helper, rowIndex) {\n    var rows = helper.getGridRowModel(columns, dataSource, gObj, rowIndex);\n\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      rowIndex++; // create a new row and set default style properties\n\n      var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n      var cellLength = row.cells.length;\n\n      for (var j = 0; j < cellLength; j++) {\n        var gridCell = row.cells[j];\n\n        if (gridCell.cellType !== CellType.Data) {\n          continue;\n        }\n\n        var column = gridCell.column;\n        var field = column.field;\n        var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n        var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n        var foreignKeyData = void 0;\n\n        if (column.isForeignColumn && column.isForeignColumn()) {\n          foreignKeyData = helper.getFData(value, column);\n          value = getValue(column.foreignKeyValue, foreignKeyData);\n        }\n\n        var data = row.data;\n        var cell = gridRow.cells.getCell(j);\n        var args = {\n          data: data,\n          value: value,\n          column: column,\n          style: undefined,\n          colSpan: 1,\n          cell: cell\n        };\n        args.value = args.column.type === 'boolean' && typeof args.value === 'string' ? args.value : this.exportValueFormatter.formatCellValue(args);\n        this.parent.trigger(events.pdfQueryCellInfo, args);\n\n        if (!isNullOrUndefined(args.image)) {\n          args.value = new PdfBitmap(args.image.base64);\n          args.value.height = args.image.height || args.value.height;\n          args.value.width = args.image.width || args.value.width;\n        }\n\n        cell.value = args.value;\n\n        if (!isNullOrUndefined(args.hyperLink)) {\n          cell.value = this.setHyperLink(args);\n        }\n\n        if (!isNullOrUndefined(args.style)) {\n          this.processCellStyle(cell, args);\n        }\n\n        if (args.colSpan > 1) {\n          if (j + 1 + args.colSpan > gridRow.cells.count) {\n            args.colSpan = gridRow.cells.count - (j + 1);\n          }\n\n          cell.columnSpan = args.colSpan;\n\n          for (var i = 1; i < cell.columnSpan; i++) {\n            var spanCell = gridRow.cells.getCell(j + i);\n            spanCell.value = '';\n          }\n\n          j += args.colSpan - 1;\n        }\n      }\n\n      if (row.isExpand) {\n        var gridRow_1 = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n        var cell = gridRow_1.cells.getCell(startIndex);\n        cell.columnSpan = gridRow_1.cells.count - startIndex;\n        cell.style.cellPadding = new PdfPaddings(10, 10, 10, 10);\n        gObj.isPrinting = true;\n        var exportType = !isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType ? pdfExportProperties.exportType : 'AllPages';\n        var returnValue = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n        var childGridObj = returnValue.childGrid;\n        var element = returnValue.element;\n        childGridObj.actionFailure = helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n        var args = {\n          childGrid: childGridObj,\n          row: row,\n          cell: cell,\n          exportProperties: pdfExportProperties\n        };\n        this.parent.trigger(events.exportDetailDataBound, args);\n        childGridObj.beforeDataBound = this.childGridCell(cell, childGridObj, pdfExportProperties);\n        childGridObj.appendTo(element);\n      }\n\n      this.parent.notify(events.exportRowDataBound, {\n        type: 'pdf',\n        rowObj: row\n      });\n    }\n\n    return rowIndex;\n  };\n\n  PdfExport.prototype.setHyperLink = function (args) {\n    // create the Text Web Link\n    var textLink = new PdfTextWebLink(); // set the hyperlink\n\n    textLink.url = args.hyperLink.target; // set the link text\n\n    textLink.text = args.hyperLink.displayText || args.hyperLink.target; // set the font\n\n    textLink.font = new PdfStandardFont(PdfFontFamily.Helvetica, 9.75); // set the brush and pen for the text color\n\n    textLink.brush = new PdfSolidBrush(new PdfColor(51, 102, 187));\n    return textLink;\n  };\n\n  PdfExport.prototype.childGridCell = function (cell, childGridObj, pdfExportProperties) {\n    var _this = this;\n\n    return function (result) {\n      childGridObj.beforeDataBound = null;\n      result.cancel = true;\n      cell.value = _this.processGridExport(childGridObj, result, pdfExportProperties);\n      childGridObj.destroy();\n      detach(childGridObj.element);\n      _this.gridPool[childGridObj.id] = true;\n\n      _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n\n      return cell;\n    };\n  };\n\n  PdfExport.prototype.processCellStyle = function (cell, args) {\n    if (!isNullOrUndefined(args.style.backgroundColor)) {\n      var backColor = this.hexToRgb(args.style.backgroundColor);\n      cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n    }\n\n    if (!isNullOrUndefined(args.style.textAlignment)) {\n      cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n    }\n\n    if (!isNullOrUndefined(args.style.cellPadding)) {\n      cell.style.cellPadding = args.style.cellPadding;\n    }\n\n    if (!isNullOrUndefined(args.style.verticalAlignment)) {\n      cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n    }\n\n    if (!isNullOrUndefined(args.style.textBrushColor)) {\n      var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n      cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n    }\n\n    if (!isNullOrUndefined(args.style.textPenColor)) {\n      var textPenColor = this.hexToRgb(args.style.textPenColor);\n      cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n    }\n\n    if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) || !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n      cell.style.font = this.getFont(args);\n    }\n\n    if (!isNullOrUndefined(args.style.border)) {\n      var border = new PdfBorders();\n      var borderWidth = args.style.border.width; // set border width\n\n      var width = !isNullOrUndefined(borderWidth) && typeof borderWidth === 'number' ? borderWidth * 0.75 : undefined; // set border color\n\n      var color = new PdfColor(196, 196, 196);\n\n      if (!isNullOrUndefined(args.style.border.color)) {\n        var borderColor = this.hexToRgb(args.style.border.color);\n        color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n      }\n\n      var pen = new PdfPen(color, width); // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n\n      if (!isNullOrUndefined(args.style.border.dashStyle)) {\n        pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n      }\n\n      border.all = pen;\n      cell.style.borders = border;\n    }\n\n    if (!isNullOrUndefined(args.style.paragraphIndent)) {\n      cell.style.stringFormat = new PdfStringFormat();\n      cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n    }\n  };\n  /**\n   * set text alignment of each columns in exporting grid\n   *\n   * @param {string} textAlign - specifies the textAlign\n   * @param {PdfStringFormat} format - specifies the PdfStringFormat\n   * @returns {PdfStringFormat} returns the PdfStringFormat\n   * @private\n   */\n\n\n  PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n    if (format === undefined) {\n      format = new PdfStringFormat();\n    }\n\n    switch (textAlign) {\n      case 'Right':\n        format.alignment = PdfTextAlignment.Right;\n        break;\n\n      case 'Center':\n        format.alignment = PdfTextAlignment.Center;\n        break;\n\n      case 'Justify':\n        format.alignment = PdfTextAlignment.Justify;\n        break;\n\n      case 'Left':\n        format.alignment = PdfTextAlignment.Left;\n        break;\n    }\n\n    return format;\n  };\n  /**\n   * set vertical alignment of each columns in exporting grid\n   *\n   * @param {string} verticalAlign - specifies the verticalAlign\n   * @param {PdfStringFormat} format - specifies the PdfStringFormat\n   * @param {string} textAlign - specifies the text align\n   * @returns {PdfStringFormat} returns the PdfStringFormat\n   * @private\n   */\n\n\n  PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n    if (format === undefined) {\n      format = new PdfStringFormat();\n      format = this.getHorizontalAlignment(textAlign, format);\n    }\n\n    switch (verticalAlign) {\n      case 'Bottom':\n        format.lineAlignment = PdfVerticalAlignment.Bottom;\n        break;\n\n      case 'Middle':\n        format.lineAlignment = PdfVerticalAlignment.Middle;\n        break;\n\n      case 'Top':\n        format.lineAlignment = PdfVerticalAlignment.Top;\n        break;\n    }\n\n    return format;\n  };\n\n  PdfExport.prototype.getFontFamily = function (fontFamily) {\n    switch (fontFamily) {\n      case 'TimesRoman':\n        return 2;\n\n      case 'Courier':\n        return 1;\n\n      case 'Symbol':\n        return 3;\n\n      case 'ZapfDingbats':\n        return 4;\n\n      default:\n        return 0;\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  PdfExport.prototype.getFont = function (content) {\n    if (content.font) {\n      return content.font;\n    }\n\n    var fontSize = !isNullOrUndefined(content.style.fontSize) ? content.style.fontSize * 0.75 : 9.75;\n    var fontFamily = !isNullOrUndefined(content.style.fontFamily) ? this.getFontFamily(content.style.fontFamily) : PdfFontFamily.TimesRoman;\n    var fontStyle = PdfFontStyle.Regular;\n\n    if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n      fontStyle |= PdfFontStyle.Bold;\n    }\n\n    if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n      fontStyle |= PdfFontStyle.Italic;\n    }\n\n    if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n      fontStyle |= PdfFontStyle.Underline;\n    }\n\n    if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n      fontStyle |= PdfFontStyle.Strikeout;\n    }\n\n    return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n  };\n\n  PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n    switch (pageNumberType) {\n      case 'LowerLatin':\n        return 2;\n\n      case 'LowerRoman':\n        return 3;\n\n      case 'UpperLatin':\n        return 4;\n\n      case 'UpperRoman':\n        return 5;\n\n      default:\n        return 1;\n    }\n  };\n\n  PdfExport.prototype.setContentFormat = function (content, format) {\n    if (!isNullOrUndefined(content.size)) {\n      var width = content.size.width * 0.75;\n      var height = content.size.height * 0.75;\n      format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n\n      if (!isNullOrUndefined(content.style.hAlign)) {\n        switch (content.style.hAlign) {\n          case 'Right':\n            format.alignment = PdfTextAlignment.Right;\n            break;\n\n          case 'Center':\n            format.alignment = PdfTextAlignment.Center;\n            break;\n\n          case 'Justify':\n            format.alignment = PdfTextAlignment.Justify;\n            break;\n\n          default:\n            format.alignment = PdfTextAlignment.Left;\n        }\n      }\n\n      if (!isNullOrUndefined(content.style.vAlign)) {\n        format = this.getVerticalAlignment(content.style.vAlign, format);\n      }\n\n      return {\n        format: format,\n        size: new SizeF(width, height)\n      };\n    }\n\n    return null;\n  };\n\n  PdfExport.prototype.getPageSize = function (pageSize) {\n    switch (pageSize) {\n      case 'Letter':\n        return new SizeF(612, 792);\n\n      case 'Note':\n        return new SizeF(540, 720);\n\n      case 'Legal':\n        return new SizeF(612, 1008);\n\n      case 'A0':\n        return new SizeF(2380, 3368);\n\n      case 'A1':\n        return new SizeF(1684, 2380);\n\n      case 'A2':\n        return new SizeF(1190, 1684);\n\n      case 'A3':\n        return new SizeF(842, 1190);\n\n      case 'A5':\n        return new SizeF(421, 595);\n\n      case 'A6':\n        return new SizeF(297, 421);\n\n      case 'A7':\n        return new SizeF(210, 297);\n\n      case 'A8':\n        return new SizeF(148, 210);\n\n      case 'A9':\n        return new SizeF(105, 148);\n      // case 'A10':\n      // return new SizeF(74, 105);\n\n      case 'B0':\n        return new SizeF(2836, 4008);\n\n      case 'B1':\n        return new SizeF(2004, 2836);\n\n      case 'B2':\n        return new SizeF(1418, 2004);\n\n      case 'B3':\n        return new SizeF(1002, 1418);\n\n      case 'B4':\n        return new SizeF(709, 1002);\n\n      case 'B5':\n        return new SizeF(501, 709);\n\n      case 'Archa':\n        return new SizeF(648, 864);\n\n      case 'Archb':\n        return new SizeF(864, 1296);\n\n      case 'Archc':\n        return new SizeF(1296, 1728);\n\n      case 'Archd':\n        return new SizeF(1728, 2592);\n\n      case 'Arche':\n        return new SizeF(2592, 3456);\n\n      case 'Flsa':\n        return new SizeF(612, 936);\n\n      case 'HalfLetter':\n        return new SizeF(396, 612);\n\n      case 'Letter11x17':\n        return new SizeF(792, 1224);\n\n      case 'Ledger':\n        return new SizeF(1224, 792);\n\n      default:\n        return new SizeF(595, 842);\n    }\n  };\n\n  PdfExport.prototype.getDashStyle = function (dashStyle) {\n    switch (dashStyle) {\n      case 'Dash':\n        return 1;\n\n      case 'Dot':\n        return 2;\n\n      case 'DashDot':\n        return 3;\n\n      case 'DashDotDot':\n        return 4;\n\n      default:\n        return 0;\n    }\n  };\n\n  PdfExport.prototype.getPenFromContent = function (content) {\n    var pen = new PdfPen(new PdfColor(0, 0, 0));\n\n    if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n      var penColor = this.hexToRgb(content.style.penColor);\n      pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n    }\n\n    return pen;\n  };\n\n  PdfExport.prototype.getBrushFromContent = function (content) {\n    var brush = null;\n\n    if (!isNullOrUndefined(content.style.textBrushColor)) {\n      /* tslint:disable-next-line:max-line-length */\n      var brushColor = this.hexToRgb(content.style.textBrushColor);\n      brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n    }\n\n    return brush;\n  };\n\n  PdfExport.prototype.hexToRgb = function (hex) {\n    if (hex === null || hex === '' || hex.length !== 7) {\n      throw new Error('please set valid hex value for color...');\n    }\n\n    hex = hex.substring(1);\n    var bigint = parseInt(hex, 16);\n    var r = bigint >> 16 & 255;\n    var g = bigint >> 8 & 255;\n    var b = bigint & 255;\n    return {\n      r: r,\n      g: g,\n      b: b\n    };\n  };\n\n  PdfExport.prototype.getFontStyle = function (theme) {\n    var fontStyle = PdfFontStyle.Regular;\n\n    if (!isNullOrUndefined(theme) && theme.bold) {\n      fontStyle |= PdfFontStyle.Bold;\n    }\n\n    if (!isNullOrUndefined(theme) && theme.italic) {\n      fontStyle |= PdfFontStyle.Italic;\n    }\n\n    if (!isNullOrUndefined(theme) && theme.underline) {\n      fontStyle |= PdfFontStyle.Underline;\n    }\n\n    if (!isNullOrUndefined(theme) && theme.strikeout) {\n      fontStyle |= PdfFontStyle.Strikeout;\n    }\n\n    return fontStyle;\n  };\n\n  PdfExport.prototype.getBorderStyle = function (border) {\n    var borders = new PdfBorders();\n\n    if (!isNullOrUndefined(border)) {\n      var borderWidth = border.width; // set border width\n\n      var width = !isNullOrUndefined(borderWidth) && typeof borderWidth === 'number' ? borderWidth * 0.75 : undefined; // set border color\n\n      var color = new PdfColor(196, 196, 196);\n\n      if (!isNullOrUndefined(border.color)) {\n        var borderColor = this.hexToRgb(border.color);\n        color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n      }\n\n      var pen = new PdfPen(color, width); // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n\n      if (!isNullOrUndefined(border.dashStyle)) {\n        pen.dashStyle = this.getDashStyle(border.dashStyle);\n      }\n\n      borders.all = pen;\n    } else {\n      borders.all = new PdfPen(new PdfColor(234, 234, 234));\n    }\n\n    return borders;\n  };\n\n  PdfExport.prototype.destroy = function () {//destroy for exporting\n  };\n\n  return PdfExport;\n}();\n\nexport { PdfExport };","map":{"version":3,"names":["events","PdfDocument","PdfGrid","PdfBorders","PdfPen","PdfPaddings","PdfStandardFont","PdfFontFamily","PdfFontStyle","PdfBitmap","PdfStringFormat","PdfTextAlignment","PdfColor","PdfSolidBrush","PdfTextWebLink","PdfVerticalAlignment","RectangleF","PdfPageTemplateElement","PointF","PdfPageNumberField","PdfCompositeField","PdfPageCountField","SizeF","PdfPageSettings","PdfPageOrientation","PdfTrueTypeFont","ExportHelper","ExportValueFormatter","Data","SummaryModelGenerator","GroupSummaryModelGenerator","CaptionSummaryModelGenerator","compile","getEnumValue","isNullOrUndefined","detach","CellType","DataManager","Query","getValue","getUid","getPrintGridModel","measureColumnDepth","isExportColumns","updateColumnTypeForExportColumns","prepareColumns","PdfExport","parent","hideColumnInclude","currentViewData","customDataSource","isGrouping","headerOnPages","drawPosition","xPosition","yPosition","helper","gridPool","prototype","getModuleName","init","exportValueFormatter","locale","pdfDocument","undefined","isExporting","id","pdfPageSettings","exportWithData","pdfDoc","resolve","returnType","pdfExportProperties","isMultipleExport","reject","_this","processExport","then","trigger","pdfExportComplete","isBlob","promise","blobPromise","log","catch","e","actionFailure","Map","data","query","childGrid","hierarchyExportMode","expandedRows","args","requestType","cancel","headerPageNumbers","gridDrawPosition","generateQuery","gridObject","can","header","drawPos","beforePdfExport","Promise","getQuery","dataSource","executeQuery","exportType","getCurrentViewRecords","allPromise_1","push","getData","getColumnData","all","gObj","section","sections","add","pdfGrid","processSectionExportProperties","pdfPage","pages","processGridExport","globalResolve","checkAndExport","draw","drawHeader","fileName","save","destroy","pageOrientation","pageSize","orientation","Landscape","Portrait","size","getPageSize","setPageSettings","allowHorizontalOverflow","isFrozen","isFrozenGrid","getFrozenColumns","gridTheme","theme","getForeignKeyData","processExportProperties","result","columns","enableColumnVirtualization","getGridExportColumns","getColumns","filter","commands","groupSettings","length","hierarchyPrintMode","headerThemeStyle","getHeaderThemeStyle","border","headerFont","font","headerBrush","brush","returnValue","getHeaders","gridColumns","processGridHeaders","rows","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","aggregates","summaryModel","sRows","column","col","type","aggregateModule","prepareSummaryInfo","generateRows","records","processAggregates","row","addRow","style","setBorder","caption","fontSize","fontFamily","fontName","getFontFamily","Helvetica","fontStyle","getFontStyle","pdfColor","fontColor","penBrushColor","hexToRgb","r","g","b","borderCaption","getBorderStyle","getGridPdfFont","isTrueType","headerSize","headerStyle","fontFamily_1","captionFont","captionSize","captionStyle","fontFamily_2","record","recordFont","recordSize","recordStyle","fontFamily_3","level","index","groupIndex","_loop_1","dataSourceItems","getColumnByField","field","value","key","isForeignKey","isForeignColumn","this_1","headerText","enableGroupByFormat","formatCellValue","count","cArgs","captionText","exportGroupCaption","cells","getCell","stringFormat","Left","setFont","setTextBrush","setBackgroundBrush","processCellStyle","captionSummaryModel","items","columnSpan","childLevels","groupSummaryModel","isGroupedFooter","_i","dataSource_1","gridColumn","grid","eCols","columnCount","depth","cols","rowNumber","i","headers","applyTextAndSpan","rowIdx","colIdx","rowSpan","colSpan","gridHeader","getHeader","pdfCell","cell","headerTextAlign","getHorizontalAlignment","getVerticalAlignment","textAlign","cellType","HeaderIndent","DetailHeader","width","gridCell","pdfHeaderQueryCellInfo","evtArgs","setCellBorder","borders","setCellFont","setHeaderBrush","textBrush","verticalAlignment","image","base64","hyperLink","setHyperLink","recuHeader","spanCnt","colIndex","rowIndex","isRoot","cidx","visible","newSpanCnt","clientSize","footer","position","fromBottom","height","bounds","template","bottom","drawPageTemplate","includeHiddenColumn","fromTop","top","headerTemplate_1","getPageByIndex","graphics","drawPdfTemplate","element","_a","contents","content","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","x1","y1","x2","y2","x","y","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","toString","format","setContentFormat","drawString","documentHeader","textBrushColor","brushColor","pageNumber","numberStyle","getPageNumberStyle","pageNumberType","compositeField","total","current","indexOf","pageCount","replace","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","isAggregate","sRows_1","leastCaptionSummaryIndex","isEmpty","aggIdx","DetailFooterIntent","pdfAggregateQueryCellInfo","isDataCell","templateFn","footerTemplate","groupCaptionTemplate","groupFooterTemplate","getTemplateFunction","templateFunction","txt","columnName","isReact","isVue","renderTemplates","textContent","getSummaryWithoutTemplate","splice","gridRow","Summary","CaptionSummary","GroupSummary","Sum","Average","Max","Min","Count","TrueCount","FalseCount","Custom","startIndex","getColumn","getConvertedWidth","setRecordThemeStyle","borderRecord","getGridRowModel","rows_1","cellLength","j","cellValue","valueAccessor","foreignKeyData","getFData","foreignKeyValue","pdfQueryCellInfo","spanCell","isExpand","gridRow_1","cellPadding","isPrinting","createChildGrid","childGridObj","failureHandler","exportProperties","exportDetailDataBound","beforeDataBound","childGridCell","appendTo","notify","exportRowDataBound","rowObj","textLink","url","target","text","displayText","backgroundColor","backColor","textAlignment","textPen","bold","italic","underline","strikeout","borderWidth","color","borderColor","paragraphIndent","alignment","Right","Center","Justify","verticalAlign","lineAlignment","Bottom","Middle","Top","TimesRoman","Regular","Bold","Italic","Underline","Strikeout","hAlign","vAlign","hex","substring","bigint","parseInt"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-grids/src/grid/actions/pdf-export.js"],"sourcesContent":["import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen, PdfPaddings } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush, PdfTextWebLink } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { PdfTrueTypeFont } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\nimport { getUid, getPrintGridModel, measureColumnDepth, isExportColumns, updateColumnTypeForExportColumns, prepareColumns } from '../base/util';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n *\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.headerOnPages = [];\n        this.drawPosition = { xPosition: 0, yPosition: 0 };\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.gridPool = {};\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        this.isGrouping = false;\n        this.isExporting = true;\n        parent.id = getUid('main-grid');\n        this.gridPool[parent.id] = false;\n        this.pdfPageSettings = new PdfPageSettings();\n    };\n    PdfExport.prototype.exportWithData = function (parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject) {\n        var _this = this;\n        this.init(parent);\n        if (!isNullOrUndefined(pdfDoc)) {\n            this.pdfDocument = pdfDoc;\n        }\n        else {\n            this.pdfDocument = new PdfDocument();\n        }\n        this.processExport(parent, returnType, pdfExportProperties, isMultipleExport).then(function () {\n            _this.isExporting = false;\n            parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n            _this.parent.log('exporting_complete', _this.getModuleName());\n            resolve(_this.pdfDocument);\n        }).catch(function (e) {\n            reject(_this.pdfDocument);\n            _this.parent.trigger(events.actionFailure, e);\n        });\n    };\n    /**\n     * Used to map the input data\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {PdfExportProperties} pdfExportProperties - specifies the PdfExportProperties\n     * @param {boolean} isMultipleExport - specifies the isMultipleExport\n     * @param {Object} pdfDoc - specifies the pdfDoc\n     * @param {boolean} isBlob - speciies whether it is Blob or not\n     * @returns {void}\n     */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        this.isBlob = isBlob;\n        this.gridPool = {};\n        var query = new Query();\n        if (parent.childGrid && !(!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.hierarchyExportMode === 'None')) {\n            parent.expandedRows = getPrintGridModel(parent).expandedRows;\n        }\n        var args = {\n            requestType: 'beforePdfExport', cancel: false,\n            headerPageNumbers: [], gridDrawPosition: { xPosition: 0, yPosition: 0 }, generateQuery: false\n        };\n        var gridObject = 'gridObject';\n        args[gridObject] = parent;\n        var can = 'cancel';\n        var generateQuery = 'generateQuery';\n        var header = 'headerPageNumbers';\n        var drawPos = 'gridDrawPosition';\n        parent.trigger(events.beforePdfExport, args);\n        if (args[can] === true) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        if (isExportColumns(pdfExportProperties)) {\n            updateColumnTypeForExportColumns(pdfExportProperties, parent);\n        }\n        if (args[generateQuery]) {\n            query = ExportHelper.getQuery(parent, this.data);\n        }\n        this.headerOnPages = args[header];\n        this.drawPosition = args[drawPos];\n        this.parent.log('exporting_begin', this.getModuleName());\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource)\n            && pdfExportProperties.dataSource instanceof DataManager) {\n            return new Promise(function (resolve, reject) {\n                pdfExportProperties.dataSource.executeQuery(query).then(function (returnType) {\n                    _this.exportWithData(parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject);\n                });\n            });\n        }\n        else if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve, reject) {\n                _this.exportWithData(parent, pdfDoc, resolve, _this.parent.getCurrentViewRecords(), pdfExportProperties, isMultipleExport, reject);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(parent, this.data)));\n            allPromise_1.push(this.helper.getColumnData(parent));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(parent);\n                    if (!isNullOrUndefined(pdfDoc)) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport).then(function () {\n                        _this.isExporting = false;\n                        parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                        _this.parent.log('exporting_complete', _this.getModuleName());\n                        resolve(_this.pdfDocument);\n                    }).catch(function (e) {\n                        reject(_this.pdfDocument);\n                        _this.parent.trigger(events.actionFailure, e);\n                    });\n                });\n            });\n        }\n    };\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n        var _this = this;\n        var section = this.pdfDocument.sections.add();\n        var pdfGrid;\n        this.processSectionExportProperties(section, pdfExportProperties);\n        var pdfPage = section.pages.add();\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        return new Promise(function (resolve, reject) {\n            pdfGrid = _this.processGridExport(gObj, returnType, pdfExportProperties);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            // draw the grid\n            var xPosition = 'xPosition';\n            var yPosition = 'yPosition';\n            pdfGrid.draw(pdfPage, _this.drawPosition[xPosition], _this.drawPosition[yPosition]);\n            _this.drawHeader(pdfExportProperties);\n            if (!isMultipleExport) {\n                // save the PDF\n                if (!_this.isBlob) {\n                    if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n                        _this.pdfDocument.save(pdfExportProperties.fileName);\n                    }\n                    else {\n                        _this.pdfDocument.save('Export.pdf');\n                    }\n                }\n                else {\n                    _this.blobPromise = _this.pdfDocument.save();\n                }\n                _this.pdfDocument.destroy();\n                delete gObj.expandedRows;\n            }\n            return _this.pdfDocument;\n        });\n    };\n    PdfExport.prototype.processSectionExportProperties = function (section, pdfExportProperties) {\n        if (!isNullOrUndefined(pdfExportProperties) && (!isNullOrUndefined(pdfExportProperties.pageOrientation)\n            || !isNullOrUndefined(pdfExportProperties.pageSize))) {\n            this.pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ?\n                PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n            this.pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n            section.setPageSettings(this.pdfPageSettings);\n        }\n        return section;\n    };\n    PdfExport.prototype.processGridExport = function (gObj, returnType, pdfExportProperties) {\n        var allowHorizontalOverflow = true;\n        var isFrozen = this.parent.isFrozenGrid() && !this.parent.getFrozenColumns();\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            this.gridTheme = pdfExportProperties.theme;\n            allowHorizontalOverflow = isNullOrUndefined(pdfExportProperties.allowHorizontalOverflow) ?\n                true : pdfExportProperties.allowHorizontalOverflow;\n        }\n        var helper = new ExportHelper(gObj, this.helper.getForeignKeyData());\n        var dataSource = this.processExportProperties(pdfExportProperties, returnType.result);\n        var columns = isExportColumns(pdfExportProperties) ?\n            prepareColumns(pdfExportProperties.columns, gObj.enableColumnVirtualization) :\n            helper.getGridExportColumns(isFrozen ? gObj.getColumns() : gObj.columns);\n        columns = columns.filter(function (columns) { return isNullOrUndefined(columns.commands); });\n        var isGrouping = false;\n        if (gObj.groupSettings.columns.length) {\n            isGrouping = true;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(pdfExportProperties)) {\n            gObj.hierarchyPrintMode = pdfExportProperties.hierarchyExportMode || 'Expanded';\n        }\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        var returnValue = helper.getHeaders(columns, this.hideColumnInclude);\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(gObj.groupSettings.columns.length, pdfGrid, returnValue.rows, gridColumns, border, headerFont, headerBrush, gObj, allowHorizontalOverflow, columns);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow);\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (!isNullOrUndefined(dataSource) && dataSource.length) {\n            if (isGrouping) {\n                if (!isNullOrUndefined(captionThemeStyle.border)) {\n                    border = captionThemeStyle.border;\n                }\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.\n                    brush, captionThemeStyle.backgroundBrush, returnType, pdfExportProperties, helper, 0);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid, 0, pdfExportProperties, helper, 0);\n            }\n            if (!isNullOrUndefined(returnType.aggregates)) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                var column = summaryModel.getColumns();\n                column = column.filter(function (col) { return isNullOrUndefined(col.commands) && col.type !== 'checkbox'; });\n                if (gObj.aggregates.length && this.parent !== gObj) {\n                    gObj.aggregateModule.prepareSummaryInfo();\n                }\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates, null, null, column);\n                }\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false, null, null, null, isGrouping ? false : true);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption)) {\n            var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n            var fontFamily = !isNullOrUndefined(this.gridTheme.caption.fontName) ?\n                this.getFontFamily(this.gridTheme.caption.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.caption);\n            var pdfColor = new PdfColor(0, 0, 0);\n            if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var borderCaption = this.gridTheme.caption.border ? this.getBorderStyle(this.gridTheme.caption.border) : null;\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.caption.font)) {\n                font = this.gridTheme.caption.font;\n            }\n            return { font: font, brush: new PdfSolidBrush(pdfColor), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)),\n                border: borderCaption };\n        }\n        else {\n            //Material theme\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)),\n                backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    PdfExport.prototype.getGridPdfFont = function (args) {\n        var fontFamily = 'fontFamily';\n        var fontSize = 'fontSize';\n        var fontStyle = 'fontStyle';\n        var isTrueType = 'isTrueType';\n        var style = 0;\n        if (args.header && args.header.font) {\n            var headerFont = args.header.font[fontFamily];\n            var headerSize = args.header.font[fontSize];\n            var headerStyle = args.header.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[headerStyle]) ? 0 : PdfFontStyle[headerStyle]);\n            if (args.header.font[isTrueType]) {\n                args.header.font = new PdfTrueTypeFont(headerFont, headerSize, style);\n            }\n            else {\n                var fontFamily_1 = !isNullOrUndefined(headerFont) ?\n                    this.getFontFamily(headerFont) : PdfFontFamily.Helvetica;\n                args.header.font = new PdfStandardFont(fontFamily_1, headerSize, style);\n            }\n        }\n        if (args.caption && args.caption.font) {\n            var captionFont = args.caption.font[fontFamily];\n            var captionSize = args.caption.font[fontSize];\n            var captionStyle = args.caption.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[captionStyle]) ? 0 : PdfFontStyle[captionStyle]);\n            if (args.caption.font[isTrueType]) {\n                args.caption.font = new PdfTrueTypeFont(captionFont, captionSize, style);\n            }\n            else {\n                var fontFamily_2 = !isNullOrUndefined(captionFont) ?\n                    this.getFontFamily(captionFont) : PdfFontFamily.Helvetica;\n                args.caption.font = new PdfStandardFont(fontFamily_2, captionSize, style);\n            }\n        }\n        if (args.record && args.record.font) {\n            var recordFont = args.record.font[fontFamily];\n            var recordSize = args.record.font[fontSize];\n            var recordStyle = args.record.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[recordStyle]) ? 0 : PdfFontStyle[recordStyle]);\n            if (args.record.font[isTrueType]) {\n                args.record.font = new PdfTrueTypeFont(recordFont, recordSize, style);\n            }\n            else {\n                var fontFamily_3 = !isNullOrUndefined(recordFont) ?\n                    this.getFontFamily(recordFont) : PdfFontFamily.Helvetica;\n                args.record.font = new PdfStandardFont(fontFamily_3, recordSize, style);\n            }\n        }\n    };\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.header.fontName) ?\n                this.getFontFamily(this.gridTheme.header.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.header);\n            var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.header.font)) {\n                font = this.gridTheme.header.font;\n            }\n            return { border: this.getBorderStyle(this.gridTheme.header.border), font: font, brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5),\n                brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index) {\n        var _this = this;\n        var groupIndex = level;\n        var _loop_1 = function (dataSourceItems) {\n            var row = pdfGrid.rows.addRow();\n            var col = gObj.getColumnByField(dataSourceItems.field);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var args = {\n                value: dataSourceItems.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn()\n            };\n            var value = this_1.parent.getColumnByField(dataSourceItems.field).headerText + ': ' + (!col.enableGroupByFormat ? this_1.exportValueFormatter.formatCellValue(args) : dataSourceItems.key) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            var cArgs = { captionText: value, type: 'PDF', data: dataSourceItems, style: undefined };\n            this_1.parent.trigger(events.exportGroupCaption, cArgs, function (cArgs) {\n                row.cells.getCell(groupIndex).value = cArgs.captionText;\n                row.cells.getCell(groupIndex).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n                row.style.setBorder(border);\n                row.style.setFont(font);\n                row.style.setTextBrush(brush);\n                row.style.setBackgroundBrush(backgroundBrush);\n                if (!isNullOrUndefined(cArgs.style)) {\n                    _this.processCellStyle(row.cells.getCell(groupIndex), cArgs);\n                }\n                var sRows;\n                var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n                if (!isNullOrUndefined(dataSourceItems.items.records)) {\n                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                }\n                else {\n                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                }\n                if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                }\n                if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                    _this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index);\n                    var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n                }\n                else {\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                    index = _this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1), pdfExportProperties, helper, index);\n                    var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                    var isGroupedFooter = true;\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false, null, null, isGroupedFooter);\n                }\n            });\n        };\n        var this_1 = this;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            _loop_1(dataSourceItems);\n        }\n    };\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumn, border, headerFont, headerBrush, grid, allowHorizontalOverflow, eCols) {\n        var _this = this;\n        var columnCount = gridColumn.length + childLevels;\n        var depth = measureColumnDepth(eCols);\n        var cols = eCols;\n        var index = 0;\n        var rowNumber = [];\n        for (var i = 0; i < rows.length; i++) {\n            rowNumber[i] = 0;\n        }\n        if (this.parent.groupSettings.columns.length) {\n            index = this.parent.groupSettings.columns.length - 1;\n            columnCount = columnCount - 1;\n        }\n        pdfGrid.columns.add(columnCount);\n        pdfGrid.headers.add(rows.length);\n        var applyTextAndSpan = function (rowIdx, colIdx, col, rowSpan, colSpan) {\n            var gridHeader = pdfGrid.headers.getHeader(rowIdx);\n            var pdfCell = gridHeader.cells.getCell(colIdx);\n            var cell = rows[rowIdx].cells[_this.parent.groupSettings.columns.length ? colIdx : rowNumber[rowIdx]];\n            rowNumber[rowIdx] = rowNumber[rowIdx] + 1;\n            if (!isNullOrUndefined(col.headerTextAlign)) {\n                pdfCell.style.stringFormat = _this.getHorizontalAlignment(col.headerTextAlign);\n            }\n            if (rowSpan > 0) {\n                pdfCell.rowSpan = rowSpan;\n                pdfCell.style.stringFormat = _this.getVerticalAlignment('Bottom', pdfCell.style.stringFormat, col.textAlign);\n            }\n            if (colSpan > 0) {\n                pdfCell.columnSpan = colSpan;\n            }\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            pdfCell.value = col.headerText;\n            if (!isNullOrUndefined(cell) && (cell.cellType === CellType.HeaderIndent || cell.cellType === CellType.DetailHeader)) {\n                pdfCell.value = '';\n                pdfCell.width = 20;\n            }\n            var args = {\n                cell: pdfCell,\n                gridCell: cell,\n                style: pdfCell.style\n            };\n            _this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n            var evtArgs = args;\n            var setCellBorder = args.style.borders;\n            var setCellFont = args.style.font;\n            var setHeaderBrush = args.style.textBrush;\n            if (!isNullOrUndefined(setCellBorder)) {\n                gridHeader.style.setBorder(setCellBorder);\n            }\n            if (!isNullOrUndefined(setCellFont)) {\n                gridHeader.style.setFont(setCellFont);\n            }\n            if (!isNullOrUndefined(setHeaderBrush)) {\n                gridHeader.style.setTextBrush(setHeaderBrush);\n            }\n            if (!isNullOrUndefined(evtArgs.style.verticalAlignment)) {\n                pdfCell.style.stringFormat = _this.getVerticalAlignment(evtArgs.style.verticalAlignment, pdfCell.style.stringFormat);\n            }\n            if (!isNullOrUndefined(evtArgs.image)) {\n                pdfCell.value = new PdfBitmap(evtArgs.image.base64);\n            }\n            if (!isNullOrUndefined(evtArgs.hyperLink)) {\n                pdfCell.value = _this.setHyperLink(evtArgs);\n            }\n        };\n        var recuHeader = function (cols, depth, spanCnt, colIndex, rowIndex, isRoot) {\n            var cidx = 0;\n            for (var i = 0; i < cols.length; i++) {\n                if (isRoot) {\n                    cidx = cidx + spanCnt + (i === 0 ? 0 : -1);\n                    colIndex = cidx;\n                    spanCnt = 0;\n                }\n                if (!isRoot && !cols[i].visible) {\n                    colIndex = colIndex - 1;\n                }\n                if (cols[i].columns && cols[i].columns.length) {\n                    var newSpanCnt = recuHeader(cols[i].columns, depth - 1, 0, i + colIndex, rowIndex + 1, false);\n                    applyTextAndSpan(rowIndex, i + colIndex + index, cols[i], 0, newSpanCnt);\n                    spanCnt = spanCnt + newSpanCnt;\n                    colIndex = colIndex + newSpanCnt - 1;\n                }\n                else if (cols[i].visible || _this.hideColumnInclude) {\n                    spanCnt++;\n                    applyTextAndSpan(rowIndex, i + colIndex + index, cols[i], depth, 0);\n                }\n            }\n            return spanCnt;\n        };\n        recuHeader(cols, depth, 0, 0, 0, true);\n        if (pdfGrid.columns.count >= 6 && allowHorizontalOverflow) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            if (!isNullOrUndefined(pdfExportProperties.theme)) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            var clientSize = this.pdfPageSettings.size;\n            this.drawHeader(pdfExportProperties);\n            if (!isNullOrUndefined(pdfExportProperties.footer)) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n                if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                    dataSource = pdfExportProperties.dataSource;\n                }\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n                if (pdfExportProperties.exportType === 'CurrentPage') {\n                    dataSource = this.parent.currentViewData;\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return dataSource;\n    };\n    PdfExport.prototype.drawHeader = function (pdfExportProperties) {\n        var _this = this;\n        var clientSize = this.pdfPageSettings.size;\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.header)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var header = pdfExportProperties.header;\n            var position = new PointF(0, header.fromTop);\n            var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n            var bounds = new RectangleF(position, size);\n            if (!this.headerOnPages.length) {\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            else {\n                var headerTemplate_1 = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n                this.headerOnPages.filter(function (index) {\n                    if (index - 1 >= 0 && index - 1 < _this.pdfDocument.pages.count - 1) {\n                        _this.pdfDocument.pages.getPageByIndex(index - 1).graphics\n                            .drawPdfTemplate(headerTemplate_1.template, new PointF(0, 0));\n                    }\n                });\n            }\n        }\n    };\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'Text':\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'PageNumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'Image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'Line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'Line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (!isNullOrUndefined(content.style.textPenColor)) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format = new PdfStringFormat();\n        var result = this.setContentFormat(content, format);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (!isNullOrUndefined(content.format)) {\n            var total = '$total';\n            var current = '$current';\n            if (content.format.indexOf(total) !== -1 && content.format.indexOf(current) !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                pageCount.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n                if (content.format.indexOf(total) > content.format.indexOf(current)) {\n                    format = content.format.replace(current, '0');\n                    format = format.replace(total, '1');\n                }\n                else {\n                    format = content.format.replace(current, '1');\n                    format = format.replace(total, '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf(current) !== -1 && content.format.indexOf(total) === -1) {\n                format = content.format.replace(current, '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace(total, '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (!isNullOrUndefined(content.size)) ? (content.size.width * 0.75) : undefined;\n        var height = (!isNullOrUndefined(content.size)) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (!isNullOrUndefined(width)) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (!isNullOrUndefined(content.style) && content.style !== null) {\n            if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex, isGroupedFooter, isAggregate) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var value = [];\n            var aggIdx = isAggregate ? 0 : 1;\n            for (var i = 0; i < pdfGrid.columns.count + aggIdx; i++) {\n                var cell = row.cells[index];\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    i--;\n                    index++;\n                    continue;\n                }\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (cell.cellType === CellType.DetailFooterIntent) {\n                            continue;\n                        }\n                        if (!isNullOrUndefined(captionRow)) {\n                            if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                                var args = { row: row, type: 'GroupCaption', style: captionRow.cells };\n                                this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                if (!isCaption) {\n                                    i += 1;\n                                }\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                    while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    if (!isNullOrUndefined(cell.column.footerTemplate) || !isNullOrUndefined(cell.column.groupCaptionTemplate)\n                        || !isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        var txt = void 0;\n                        var data = row.data[cell.column.field ? cell.column.field : cell.column.columnName];\n                        if (this.parent.isReact || this.parent.isVue) {\n                            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data, this.parent));\n                            if (this.parent.isReact) {\n                                this.parent.renderTemplates();\n                            }\n                        }\n                        else {\n                            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data));\n                        }\n                        value.push(txt[0].textContent);\n                        isEmpty = false;\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (!isNullOrUndefined(result)) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[i] !== '' && !isNullOrUndefined(value[i]) && value[i] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (!isAggregate) {\n                if (!isCaption) {\n                    value.splice(0, 1);\n                }\n                else {\n                    for (var i = this.parent.groupSettings.columns.length; i < value.length - 1; i++) {\n                        value[i] = value[i + 1];\n                        value[i + 1] = value[i + 2] ? value[i + 2] : '';\n                    }\n                }\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    var gridRow = pdfGrid.rows.addRow();\n                    gridRow.style.setBorder(border);\n                    gridRow.style.setFont(font);\n                    gridRow.style.setTextBrush(brush);\n                    gridRow.style.setBackgroundBrush(backgroundBrush);\n                    var args = {\n                        row: row, type: isGroupedFooter ? 'GroupFooter' : 'Footer', style: gridRow.cells\n                    };\n                    this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[i].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[i].toString();\n                        if (i === groupIndex && leastCaptionSummaryIndex !== -1 && leastCaptionSummaryIndex !== 1) {\n                            captionRow.cells.getCell(i).columnSpan = (leastCaptionSummaryIndex - 1) - groupIndex;\n                        }\n                        else if (i === groupIndex && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - groupIndex;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, cell) {\n        if (!isNullOrUndefined(cell.column.footerTemplate) && cell.cellType === CellType.Summary) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(cell.column.footerTemplate);\n        }\n        else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(cell.column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(cell.column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (!isNullOrUndefined(data.Sum)) {\n            return data.Sum;\n        }\n        else if (!isNullOrUndefined(data.Average)) {\n            return data.Average;\n        }\n        else if (!isNullOrUndefined(data.Max)) {\n            return data.Max;\n        }\n        else if (!isNullOrUndefined(data.Min)) {\n            return data.Min;\n        }\n        else if (!isNullOrUndefined(data.Count)) {\n            return data.Count;\n        }\n        else if (!isNullOrUndefined(data.TrueCount)) {\n            return data.TrueCount;\n        }\n        else if (!isNullOrUndefined(data.FalseCount)) {\n            return data.FalseCount;\n        }\n        else if (!isNullOrUndefined(data.Custom)) {\n            return data.Custom;\n        }\n    };\n    /**\n     * Set alignment, width and type of the values of the column\n     *\n     * @param {Column[]} gridColumns - specifies the grid column\n     * @param {PdfGrid} pdfGrid - specifies the pdfGrid\n     * @param {ExportHelper} helper - specifies the helper\n     * @param {IGrid} gObj - specifies the IGrid\n     * @param {boolean} allowHorizontalOverflow - specifies the allowHorizontalOverflow\n     * @returns {void}\n     */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow) {\n        var startIndex = gObj.groupSettings.columns.length ? gObj.groupSettings.columns.length - 1 : 0;\n        for (var i = 0; i < startIndex; i++) {\n            pdfGrid.columns.getColumn(i).width = 20;\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (!isNullOrUndefined(gridColumns[i].textAlign)) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[i].width) && allowHorizontalOverflow) {\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ?\n                    gridColumns[i].width * 0.75 : helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     *\n     * @param {PdfGridRow} row - specifies the PdfGridRow\n     * @param {PdfBorders} border - specifies the PdfBorders\n     * @returns {PdfGrid} returns the pdfgrid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.record.fontName) ?\n                this.getFontFamily(this.gridTheme.record.fontName) : PdfFontFamily.Helvetica;\n            var fontSize = !isNullOrUndefined(this.gridTheme.record.fontSize) ? this.gridTheme.record.fontSize : 9.75;\n            var fontStyle = this.getFontStyle(this.gridTheme.record);\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.record.font)) {\n                font = this.gridTheme.record.font;\n            }\n            row.style.setFont(font);\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        var borderRecord = this.gridTheme && this.gridTheme.record &&\n            this.gridTheme.record.border ? this.getBorderStyle(this.gridTheme.record.border) : border;\n        row.style.setBorder(borderRecord);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     *\n     * @param {PdfBorders} border - specifies the border\n     * @param {Column[]} columns - specifies the columns\n     * @param {IGrid} gObj - specifies the IGrid\n     * @param {Object[]} dataSource - specifies the datasource\n     * @param {PdfGrid} pdfGrid - specifies the pdfGrid\n     * @param {number} startIndex - specifies the startindex\n     * @param {PdfExportProperties} pdfExportProperties - specifies the pdfExportProperties\n     * @param {ExportHelper} helper - specifies the helper\n     * @param {number} rowIndex - specifies the rowIndex\n     * @returns {number} returns the number of records\n     * @private\n     */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, startIndex, pdfExportProperties, helper, rowIndex) {\n        var rows = helper.getGridRowModel(columns, dataSource, gObj, rowIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            rowIndex++;\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            var cellLength = row.cells.length;\n            for (var j = 0; j < cellLength; j++) {\n                var gridCell = row.cells[j];\n                if (gridCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gridCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var foreignKeyData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                var data = row.data;\n                var cell = gridRow.cells.getCell(j);\n                var args = {\n                    data: data,\n                    value: value,\n                    column: column,\n                    style: undefined,\n                    colSpan: 1,\n                    cell: cell\n                };\n                args.value = args.column.type === 'boolean' && typeof args.value === 'string' ? args.value :\n                    this.exportValueFormatter.formatCellValue(args);\n                this.parent.trigger(events.pdfQueryCellInfo, args);\n                if (!isNullOrUndefined(args.image)) {\n                    args.value = new PdfBitmap(args.image.base64);\n                    args.value.height = args.image.height || args.value.height;\n                    args.value.width = args.image.width || args.value.width;\n                }\n                cell.value = args.value;\n                if (!isNullOrUndefined(args.hyperLink)) {\n                    cell.value = this.setHyperLink(args);\n                }\n                if (!isNullOrUndefined(args.style)) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n            if (row.isExpand) {\n                var gridRow_1 = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n                var cell = gridRow_1.cells.getCell(startIndex);\n                cell.columnSpan = gridRow_1.cells.count - (startIndex);\n                cell.style.cellPadding = new PdfPaddings(10, 10, 10, 10);\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType) ?\n                    pdfExportProperties.exportType : 'AllPages';\n                var returnValue = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnValue.childGrid;\n                var element = returnValue.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                var args = { childGrid: childGridObj, row: row, cell: cell, exportProperties: pdfExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(cell, childGridObj, pdfExportProperties);\n                childGridObj.appendTo(element);\n            }\n            this.parent.notify(events.exportRowDataBound, { type: 'pdf', rowObj: row });\n        }\n        return rowIndex;\n    };\n    PdfExport.prototype.setHyperLink = function (args) {\n        // create the Text Web Link\n        var textLink = new PdfTextWebLink();\n        // set the hyperlink\n        textLink.url = args.hyperLink.target;\n        // set the link text\n        textLink.text = args.hyperLink.displayText || args.hyperLink.target;\n        // set the font\n        textLink.font = new PdfStandardFont(PdfFontFamily.Helvetica, 9.75);\n        // set the brush and pen for the text color\n        textLink.brush = new PdfSolidBrush(new PdfColor(51, 102, 187));\n        return textLink;\n    };\n    PdfExport.prototype.childGridCell = function (cell, childGridObj, pdfExportProperties) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            cell.value = _this.processGridExport(childGridObj, result, pdfExportProperties);\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return cell;\n        };\n    };\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (!isNullOrUndefined(args.style.backgroundColor)) {\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textAlignment)) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (!isNullOrUndefined(args.style.cellPadding)) {\n            cell.style.cellPadding = args.style.cellPadding;\n        }\n        if (!isNullOrUndefined(args.style.verticalAlignment)) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (!isNullOrUndefined(args.style.textBrushColor)) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textPenColor)) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) ||\n            !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n            cell.style.font = this.getFont(args);\n        }\n        if (!isNullOrUndefined(args.style.border)) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(args.style.border.color)) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(args.style.border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n        if (!isNullOrUndefined(args.style.paragraphIndent)) {\n            cell.style.stringFormat = new PdfStringFormat();\n            cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     *\n     * @param {string} textAlign - specifies the textAlign\n     * @param {PdfStringFormat} format - specifies the PdfStringFormat\n     * @returns {PdfStringFormat} returns the PdfStringFormat\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'Right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'Center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'Justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'Left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     *\n     * @param {string} verticalAlign - specifies the verticalAlign\n     * @param {PdfStringFormat} format - specifies the PdfStringFormat\n     * @param {string} textAlign - specifies the text align\n     * @returns {PdfStringFormat} returns the PdfStringFormat\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'Bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'Middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'Top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.getFont = function (content) {\n        if (content.font) {\n            return content.font;\n        }\n        var fontSize = (!isNullOrUndefined(content.style.fontSize)) ? (content.style.fontSize * 0.75) : 9.75;\n        var fontFamily = (!isNullOrUndefined(content.style.fontFamily)) ?\n            (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.TimesRoman;\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'LowerLatin':\n                return 2;\n            case 'LowerRoman':\n                return 3;\n            case 'UpperLatin':\n                return 4;\n            case 'UpperRoman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (!isNullOrUndefined(content.size)) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (!isNullOrUndefined(content.style.hAlign)) {\n                switch (content.style.hAlign) {\n                    case 'Right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'Center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'Justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (!isNullOrUndefined(content.style.vAlign)) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'Letter':\n                return new SizeF(612, 792);\n            case 'Note':\n                return new SizeF(540, 720);\n            case 'Legal':\n                return new SizeF(612, 1008);\n            case 'A0':\n                return new SizeF(2380, 3368);\n            case 'A1':\n                return new SizeF(1684, 2380);\n            case 'A2':\n                return new SizeF(1190, 1684);\n            case 'A3':\n                return new SizeF(842, 1190);\n            case 'A5':\n                return new SizeF(421, 595);\n            case 'A6':\n                return new SizeF(297, 421);\n            case 'A7':\n                return new SizeF(210, 297);\n            case 'A8':\n                return new SizeF(148, 210);\n            case 'A9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            // return new SizeF(74, 105);\n            case 'B0':\n                return new SizeF(2836, 4008);\n            case 'B1':\n                return new SizeF(2004, 2836);\n            case 'B2':\n                return new SizeF(1418, 2004);\n            case 'B3':\n                return new SizeF(1002, 1418);\n            case 'B4':\n                return new SizeF(709, 1002);\n            case 'B5':\n                return new SizeF(501, 709);\n            case 'Archa':\n                return new SizeF(648, 864);\n            case 'Archb':\n                return new SizeF(864, 1296);\n            case 'Archc':\n                return new SizeF(1296, 1728);\n            case 'Archd':\n                return new SizeF(1728, 2592);\n            case 'Arche':\n                return new SizeF(2592, 3456);\n            case 'Flsa':\n                return new SizeF(612, 936);\n            case 'HalfLetter':\n                return new SizeF(396, 612);\n            case 'Letter11x17':\n                return new SizeF(792, 1224);\n            case 'Ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'Dash':\n                return 1;\n            case 'Dot':\n                return 2;\n            case 'DashDot':\n                return 3;\n            case 'DashDotDot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    PdfExport.prototype.getFontStyle = function (theme) {\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(theme) && theme.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(theme) && theme.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(theme) && theme.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(theme) && theme.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return fontStyle;\n    };\n    PdfExport.prototype.getBorderStyle = function (border) {\n        var borders = new PdfBorders();\n        if (!isNullOrUndefined(border)) {\n            var borderWidth = border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? borderWidth * 0.75 : undefined;\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(border.color)) {\n                var borderColor = this.hexToRgb(border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(border.dashStyle);\n            }\n            borders.all = pen;\n        }\n        else {\n            borders.all = new PdfPen(new PdfColor(234, 234, 234));\n        }\n        return borders;\n    };\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}