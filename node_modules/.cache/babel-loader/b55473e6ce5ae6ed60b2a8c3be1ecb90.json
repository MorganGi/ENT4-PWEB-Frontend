{"ast":null,"code":"/* eslint-disable */\nimport { Browser, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getDiagramElement } from '@syncfusion/ej2-drawings';\n/**\n * Magnification module\n */\n\nvar Magnification =\n/** @class */\nfunction () {\n  /**\n   * @param pdfViewer\n   * @param viewerBase\n   * @private\n   */\n  function Magnification(pdfViewer, viewerBase) {\n    /**\n     * @private\n     */\n    this.zoomFactor = 1;\n    /**\n     * @private\n     */\n\n    this.previousZoomFactor = 1;\n    this.scrollWidth = 25;\n    this.zoomPercentages = [10, 25, 50, 75, 100, 125, 150, 200, 400];\n    this.isNotPredefinedZoom = false;\n    this.pinchStep = 0;\n    this.reRenderPageNumber = 0; // eslint-disable-next-line\n\n    this.magnifyPageRerenderTimer = null; // eslint-disable-next-line\n\n    this.rerenderOnScrollTimer = null; // eslint-disable-next-line\n\n    this.rerenderInterval = null;\n    this.touchCenterX = 0;\n    this.touchCenterY = 0;\n    this.pageRerenderCount = 0;\n    this.imageObjects = [];\n    this.topValue = 0;\n    this.isTapToFitZoom = false;\n    /**\n     * @private\n     */\n\n    this.fitType = null;\n    /**\n     * @private\n     */\n\n    this.isPinchZoomed = false;\n    /**\n     * @private\n     */\n\n    this.isPagePinchZoomed = false;\n    /**\n     * @private\n     */\n\n    this.isRerenderCanvasCreated = false;\n    /**\n     * @private\n     */\n\n    this.isMagnified = false;\n    /**\n     * @private\n     */\n\n    this.isPagesZoomed = false;\n    /**\n     * @private\n     */\n\n    this.isPinchScrolled = false;\n    /**\n     * @private\n     */\n\n    this.isAutoZoom = false;\n    /**\n     * @private\n     */\n\n    this.isFormFieldPageZoomed = false;\n    this.isWebkitMobile = false;\n    this.isFitToPageMode = true;\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = viewerBase;\n    this.zoomLevel = 2; // eslint-disable-next-line max-len\n\n    this.isWebkitMobile = /Chrome/.test(navigator.userAgent) || /Google Inc/.test(navigator.vendor) || navigator.userAgent.indexOf('Safari') !== -1;\n  }\n  /**\n   * Zoom the PDF document to the given zoom value\n   *\n   * @param  {number} zoomValue - Specifies the Zoom Value for magnify the PDF document\n   * @returns void\n   */\n\n\n  Magnification.prototype.zoomTo = function (zoomValue) {\n    var MaximumZoomPercentage = 400;\n    var MinmumZoomPercentage = 10;\n\n    if (zoomValue < MinmumZoomPercentage) {\n      zoomValue = MinmumZoomPercentage;\n    } else if (zoomValue > MaximumZoomPercentage) {\n      zoomValue = MaximumZoomPercentage;\n    }\n\n    this.fitType = null;\n    this.isNotPredefinedZoom = false;\n\n    if (this.isAutoZoom && this.isInitialLoading) {\n      this.pdfViewerBase.onWindowResize();\n    } else {\n      this.isAutoZoom = false;\n      this.onZoomChanged(zoomValue);\n    }\n\n    this.isInitialLoading = false;\n  };\n  /**\n   * Magnifies the page to the next value in the zoom drop down list.\n   *\n   * @returns void\n   */\n\n\n  Magnification.prototype.zoomIn = function () {\n    if (this.fitType || this.isNotPredefinedZoom) {\n      this.zoomLevel = this.lowerZoomLevel;\n      this.fitType = null;\n    }\n\n    this.isNotPredefinedZoom = false;\n\n    if (this.zoomLevel >= 8) {\n      this.zoomLevel = 8;\n    } else {\n      this.zoomLevel++;\n    }\n\n    this.isAutoZoom = false;\n    this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n  };\n  /**\n   * Magnifies the page to the previous value in the zoom drop down list.\n   *\n   * @returns void\n   */\n\n\n  Magnification.prototype.zoomOut = function () {\n    if (this.fitType || this.isNotPredefinedZoom) {\n      this.zoomLevel = this.higherZoomLevel;\n      this.fitType = null;\n    }\n\n    this.isNotPredefinedZoom = false;\n\n    if (this.zoomLevel <= 0) {\n      this.zoomLevel = 0;\n    } else {\n      this.zoomLevel--;\n    }\n\n    this.isAutoZoom = false;\n    this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n  };\n  /**\n   * Scales the page to fit the page width to the width of the container in the control.\n   *\n   * @returns void\n   */\n\n\n  Magnification.prototype.fitToWidth = function () {\n    this.isAutoZoom = false;\n    var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n    this.onZoomChanged(zoomValue);\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.fitToAuto = function () {\n    this.isAutoZoom = true;\n    var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n    this.onZoomChanged(zoomValue);\n  };\n  /**\n   * Scales the page to fit the page in the container in the control.\n   *\n   * @param  {number} zoomValue - Defines the Zoom Value for fit the page in the Container\n   * @returns void\n   */\n\n\n  Magnification.prototype.fitToPage = function () {\n    var zoomValue = this.calculateFitZoomFactor('fitToPage');\n\n    if (zoomValue !== null) {\n      this.isAutoZoom = false;\n      this.onZoomChanged(zoomValue);\n\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        if (this.isWebkitMobile) {\n          this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        } else {\n          this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n      } else {\n        this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n      }\n\n      if (this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1]) {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n      }\n    }\n  };\n  /**\n   * Returns zoom factor for the fit zooms.\n   *\n   * @param type\n   */\n\n\n  Magnification.prototype.calculateFitZoomFactor = function (type) {\n    var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n    var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n\n    if (viewerWidth === 0 && viewerHeight === 0) {\n      viewerWidth = parseFloat(this.pdfViewer.width.toString());\n      viewerHeight = parseFloat(this.pdfViewer.height.toString());\n    }\n\n    if (isNaN(viewerHeight) || isNaN(viewerWidth)) {\n      return null;\n    }\n\n    this.fitType = type;\n\n    if (this.fitType === 'fitToWidth') {\n      var scaleX = (viewerWidth - this.scrollWidth) / this.pdfViewerBase.highestWidth;\n\n      if (this.isAutoZoom) {\n        this.fitType = null;\n        scaleX = Math.min(1, scaleX);\n\n        if (scaleX === 1) {\n          this.zoomLevel = 2;\n        }\n      } // eslint-disable-next-line radix\n\n\n      return parseInt((scaleX * 100).toString());\n    } else {\n      this.isFitToPageMode = true;\n      var pageLeft = 10;\n      var scaleX = (viewerWidth - this.scrollWidth - pageLeft) / this.pdfViewerBase.highestWidth;\n      var scaleY = viewerHeight / this.pdfViewerBase.highestHeight;\n\n      if (scaleY > scaleX) {\n        scaleY = scaleX;\n        this.isFitToPageMode = false;\n      } // eslint-disable-next-line radix\n\n\n      return parseInt((scaleY * 100).toString());\n    }\n  };\n  /**\n   * Performs pinch in operation\n   */\n\n\n  Magnification.prototype.pinchIn = function () {\n    this.fitType = null;\n    var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n\n    if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n      temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n    }\n\n    if (temporaryZoomFactor < 0.1) {\n      temporaryZoomFactor = 0.1;\n    }\n\n    this.isPinchZoomed = true;\n    this.onZoomChanged(temporaryZoomFactor * 100);\n    this.isTapToFitZoom = true;\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.zoomFactor * 100 === 50) {\n      var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n      this.fitType = null;\n\n      if (zoomValue <= 50) {\n        this.fitToWidth();\n      }\n    }\n  };\n  /**\n   * Performs pinch out operation\n   */\n\n\n  Magnification.prototype.pinchOut = function () {\n    this.fitType = null;\n    var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      if (temporaryZoomFactor > 2) {\n        temporaryZoomFactor = 2;\n      }\n    } else {\n      if (temporaryZoomFactor > 2) {\n        temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n      }\n\n      if (temporaryZoomFactor > 4) {\n        temporaryZoomFactor = 4;\n      }\n    }\n\n    this.isTapToFitZoom = true;\n    this.isPinchZoomed = true;\n    this.onZoomChanged(temporaryZoomFactor * 100);\n  };\n  /**\n   * returns zoom level for the zoom factor.\n   *\n   * @param zoomFactor\n   */\n\n\n  Magnification.prototype.getZoomLevel = function (zoomFactor) {\n    var min = 0;\n    var max = this.zoomPercentages.length - 1;\n\n    while (min <= max && !(min === 0 && max === 0)) {\n      var mid = Math.round((min + max) / 2);\n\n      if (this.zoomPercentages[mid] <= zoomFactor) {\n        min = mid + 1;\n      } else if (this.zoomPercentages[mid] >= zoomFactor) {\n        max = mid - 1;\n      }\n    }\n\n    this.higherZoomLevel = min;\n    this.lowerZoomLevel = max;\n    return max;\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.checkZoomFactor = function () {\n    return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n  };\n  /**\n   * Executes when the zoom or pinch operation is performed\n   *\n   * @param zoomValue\n   */\n\n\n  Magnification.prototype.onZoomChanged = function (zoomValue) {\n    if (zoomValue) {\n      if (this.pdfViewer.annotationModule) {\n        this.pdfViewer.annotationModule.closePopupMenu();\n      }\n\n      this.previousZoomFactor = this.zoomFactor;\n      this.zoomLevel = this.getZoomLevel(zoomValue);\n      this.zoomFactor = this.getZoomFactor(zoomValue);\n\n      if (this.zoomFactor <= 0.25) {\n        this.pdfViewerBase.isMinimumZoom = true;\n      } else {\n        this.pdfViewerBase.isMinimumZoom = false;\n      }\n\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n        if (this.isWebkitMobile) {\n          this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        } else {\n          this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n      } else {\n        this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n      }\n\n      if (this.pdfViewerBase.pageCount > 0) {\n        if (this.previousZoomFactor !== this.zoomFactor) {\n          if (!this.isPinchZoomed) {\n            this.magnifyPages();\n          } else {\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n              // eslint-disable-next-line max-len\n              this.pdfViewerBase.mobilePageNoContainer.style.left = this.pdfViewer.element.clientWidth / 2 - parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width) / 2 + 'px';\n            }\n\n            this.responsivePages();\n          }\n        }\n\n        if (!isBlazor()) {\n          if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomButtons();\n          }\n        }\n\n        if (!this.isInitialLoading) {\n          if (this.previousZoomFactor !== this.zoomFactor) {\n            // eslint-disable-next-line\n            this.pdfViewer.zoomValue = parseInt((this.zoomFactor * 100).toString());\n            this.pdfViewer.fireZoomChange();\n          }\n        }\n      }\n\n      if (this.pdfViewer.toolbarModule) {\n        this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n      }\n\n      if (!this.isInitialLoading) {\n        if (this.previousZoomFactor !== this.zoomFactor) {\n          this.pdfViewer.zoomValue = parseInt((this.zoomFactor * 100).toString());\n          this.pdfViewer.fireZoomChange();\n        }\n      }\n\n      if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.isPinchZoomed) {\n        // eslint-disable-next-line radix\n        var zoomPercentage = parseInt((this.zoomFactor * 100).toString()) + '%';\n        this.pdfViewerBase.navigationPane.createTooltipMobile(zoomPercentage);\n      }\n    }\n  };\n  /**\n   * @param clientX\n   * @param clientY\n   * @private\n   */\n\n\n  Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n    this.touchCenterX = clientX;\n    this.touchCenterY = clientY;\n  };\n  /**\n   * @param pointX1\n   * @param pointY1\n   * @param pointX2\n   * @param pointY2\n   * @param pointX1\n   * @param pointY1\n   * @param pointX2\n   * @param pointY2\n   * @param pointX1\n   * @param pointY1\n   * @param pointX2\n   * @param pointY2\n   * @param pointX1\n   * @param pointY1\n   * @param pointX2\n   * @param pointY2\n   * @private\n   */\n\n\n  Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n    this.isPinchScrolled = false;\n    this.isMagnified = false;\n    this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n    this.touchCenterX = (pointX1 + pointX2) / 2;\n    this.touchCenterY = (pointY1 + pointY2) / 2;\n    this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n  };\n\n  Magnification.prototype.magnifyPages = function () {\n    this.clearRerenderTimer();\n\n    if (!this.isPagesZoomed) {\n      this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n    }\n\n    if (!this.pdfViewerBase.documentLoaded && !this.pdfViewerBase.isInitialPageMode) {\n      this.isPagesZoomed = true;\n    }\n\n    var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n\n    if (this.pdfViewer.textSelectionModule) {\n      this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n    }\n\n    if (this.pdfViewer.formDesignerModule && !this.pdfViewerBase.documentLoaded && !this.pdfViewerBase.isDocumentLoaded) {\n      this.isFormFieldPageZoomed = true;\n    }\n\n    if (!this.isInitialLoading) {\n      this.isMagnified = true;\n    }\n\n    this.updatePageLocation();\n    this.resizeCanvas(this.reRenderPageNumber);\n\n    if (this.pdfViewer.textSelectionModule) {\n      this.pdfViewer.textSelectionModule.resizeTouchElements();\n    } // eslint-disable-next-line\n\n\n    var annotModule = this.pdfViewer.annotationModule;\n\n    if (annotModule && annotModule.textMarkupAnnotationModule) {\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateCurrentResizerPosition();\n    }\n\n    if (this.pdfViewerBase.pageSize.length > 0) {\n      // eslint-disable-next-line max-len\n      this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px'; // eslint-disable-next-line\n\n      var proxy_1 = this;\n      this.pdfViewerBase.renderedPagesList = [];\n      this.pdfViewerBase.pinchZoomStorage = [];\n      this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n\n      if (!this.pdfViewerBase.documentLoaded) {\n        this.magnifyPageRerenderTimer = setTimeout(function () {\n          proxy_1.rerenderMagnifiedPages();\n        }, 800);\n      }\n    }\n  };\n\n  Magnification.prototype.updatePageLocation = function () {\n    this.topValue = 0;\n\n    for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n      this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n    }\n\n    var limit = this.pdfViewerBase.pageCount < 10 ? this.pdfViewerBase.pageCount : 10;\n\n    for (var i = 0; i < limit; i++) {\n      this.updatePageContainer(i, this.pdfViewerBase.getPageWidth(i), this.pdfViewerBase.getPageHeight(i), this.pdfViewerBase.getPageTop(i), true);\n    }\n  };\n\n  Magnification.prototype.updatePageContainer = function (pageNumber, pageWidth, pageHeight, topValue, isReRender) {\n    // eslint-disable-next-line\n    var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n\n    if (pageDiv) {\n      pageDiv.style.width = pageWidth + 'px';\n      pageDiv.style.height = pageHeight + 'px'; // eslint-disable-next-line\n\n      var textLayerDiv = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n\n      if (textLayerDiv) {\n        textLayerDiv.style.width = pageWidth + 'px';\n        textLayerDiv.style.height = pageHeight + 'px';\n      }\n\n      pageDiv.style.width = pageWidth + 'px';\n      pageDiv.style.height = pageHeight + 'px';\n\n      if (this.pdfViewer.enableRtl) {\n        pageDiv.style.right = this.pdfViewerBase.updateLeftPosition(pageNumber) + 'px';\n      } else {\n        pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(pageNumber) + 'px';\n      }\n\n      pageDiv.style.top = topValue + 'px';\n      this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n      this.pdfViewerBase.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n    }\n  };\n\n  Magnification.prototype.clearRerenderTimer = function () {\n    clearTimeout(this.rerenderOnScrollTimer);\n    clearTimeout(this.magnifyPageRerenderTimer);\n    this.clearIntervalTimer();\n    this.isPinchScrolled = false;\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.clearIntervalTimer = function () {\n    clearInterval(this.rerenderInterval);\n    this.rerenderInterval = null;\n    this.clearRendering();\n    var oldCanvases = document.querySelectorAll('canvas[id*=\"' + this.pdfViewer.element.id + '_oldCanvas_\"]');\n\n    for (var i = 0; i < oldCanvases.length; i++) {\n      // eslint-disable-next-line\n      var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n      var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n\n      if (pageCanvas) {\n        oldCanvases[i].id = pageCanvas.id;\n        pageCanvas.parentElement.removeChild(pageCanvas);\n      } else {\n        oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n      }\n\n      if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(i);\n      }\n    }\n\n    this.isRerenderCanvasCreated = false;\n  };\n  /**\n   * @param image\n   * @private\n   */\n\n\n  Magnification.prototype.pushImageObjects = function (image) {\n    if (!isNullOrUndefined(this.imageObjects)) {\n      this.imageObjects && this.imageObjects.push(image);\n    }\n  };\n\n  Magnification.prototype.clearRendering = function () {\n    if (this.imageObjects) {\n      for (var j = 0; j < this.imageObjects.length; j++) {\n        if (this.imageObjects[j]) {\n          this.imageObjects[j].onload = null;\n        }\n      }\n\n      this.imageObjects = [];\n    }\n  };\n\n  Magnification.prototype.rerenderMagnifiedPages = function () {\n    if ((this.pdfViewerBase.isInitialLoaded || this.pdfViewerBase.isDocumentLoaded) && !this.pdfViewerBase.isInitialPageMode) {\n      this.renderInSeparateThread(this.reRenderPageNumber);\n      this.isPagesZoomed = false;\n    } else if (this.pdfViewerBase.isInitialPageMode) {\n      this.pageRerenderCount = 0;\n      this.pdfViewerBase.renderedPagesList = [];\n      this.pdfViewerBase.pinchZoomStorage = [];\n      this.isMagnified = false;\n      this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n      this.pdfViewerBase.isInitialPageMode = false;\n    }\n  };\n\n  Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n    var _this = this;\n\n    this.designNewCanvas(pageNumber);\n    this.pageRerenderCount = 0;\n    this.pdfViewerBase.renderedPagesList = [];\n    this.pdfViewerBase.pinchZoomStorage = [];\n    this.isMagnified = false;\n    this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber); // eslint-disable-next-line\n\n    var proxy = this;\n    this.rerenderInterval = setInterval(function () {\n      _this.initiateRerender(proxy);\n    }, 1);\n  };\n\n  Magnification.prototype.responsivePages = function () {\n    this.isPagesZoomed = true;\n    this.clearRerenderTimer();\n\n    if (this.pdfViewer.textSelectionModule) {\n      this.pdfViewer.textSelectionModule.clearTextSelection();\n    }\n\n    if (this.pdfViewer.textSearchModule) {\n      this.pdfViewer.textSearchModule.clearAllOccurrences();\n    }\n\n    var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n    this.isAutoZoom = false;\n    this.updatePageLocation(); // eslint-disable-next-line max-len\n\n    this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n    this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n\n    if (this.pdfViewerBase.textLayer && this.pdfViewer.formDesignerModule) {\n      this.pdfViewerBase.textLayer.clearTextLayers(true);\n    }\n\n    if (this.isPinchZoomed) {\n      this.calculateScrollValues(scrollValue);\n    }\n\n    this.pdfViewerBase.renderedPagesList = [];\n    this.pdfViewerBase.pinchZoomStorage = [];\n\n    if (this.pdfViewer.formFieldsModule && !this.pdfViewer.formDesignerModule) {\n      var proxy_2 = this;\n\n      if (!this.pdfViewerBase.documentLoaded) {\n        this.magnifyPageRerenderTimer = setTimeout(function () {\n          proxy_2.rerenderMagnifiedPages();\n        }, 800);\n      }\n    }\n  };\n\n  Magnification.prototype.calculateScrollValues = function (scrollValue) {\n    var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n    var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n\n    if (currentPageCanvas) {\n      var currentPageBounds = currentPageCanvas.getBoundingClientRect(); // update scroll top for the viewer container based on pinch zoom factor\n\n      var previousPageTop = currentPageBounds.top * this.previousZoomFactor;\n      var previousY = scrollValue + this.touchCenterY; // eslint-disable-next-line max-len\n\n      var currentY = currentPageBounds.top * this.zoomFactor + (previousY - previousPageTop < 0 ? previousY - previousPageTop : (previousY - // eslint-disable-next-line max-len\n      previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n      this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY; // update scroll left for the viewer container based on pinch zoom factor\n\n      var prevValue = currentPageBounds.width * this.previousZoomFactor / currentPageBounds.width;\n      var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n      var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n      this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n    }\n  };\n\n  Magnification.prototype.rerenderOnScroll = function () {\n    var _this = this;\n\n    this.isPinchZoomed = false;\n\n    if (this.isPinchScrolled) {\n      this.rerenderOnScrollTimer = null;\n      this.isPinchScrolled = false;\n      this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n      this.pdfViewerBase.renderedPagesList = [];\n      this.pdfViewerBase.pinchZoomStorage = [];\n      var pageDivs = document.querySelectorAll('img[id*=\"' + this.pdfViewer.element.id + '_pageCanvas_\"]');\n      var viewPortWidth = 816;\n\n      for (var i = 0; i < pageDivs.length; i++) {\n        // eslint-disable-next-line radix\n        var pageNumber = parseInt(pageDivs[i].id.split('_pageCanvas_')[1]);\n        var pageWidth = this.pdfViewerBase.pageSize[pageNumber].width;\n\n        if (viewPortWidth < pageWidth && this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n          if (this.pdfViewer.restrictZoomRequest) {\n            pageDivs[i].style.width = pageWidth * this.pdfViewerBase.getZoomFactor() + 'px'; // eslint-disable-next-line max-len\n\n            pageDivs[i].style.height = this.pdfViewerBase.pageSize[pageNumber].height * this.pdfViewerBase.getZoomFactor() + 'px';\n          } else {\n            pageDivs[i].style.width = pageWidth * this.pdfViewerBase.getZoomFactor() + 'px'; // eslint-disable-next-line max-len\n\n            pageDivs[i].style.height = this.pdfViewerBase.pageSize[pageNumber].height * this.pdfViewerBase.getZoomFactor() + 'px';\n          }\n        }\n      }\n\n      if (this.pdfViewerBase.textLayer) {\n        var textLayers = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n\n        for (var i = 0; i < textLayers.length; i++) {\n          textLayers[i].style.display = 'block';\n        }\n      }\n\n      if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n        // eslint-disable-next-line max-len\n        var annotationLayers = document.querySelectorAll('canvas[id*=\"' + this.pdfViewer.element.id + '_annotationCanvas_\"]');\n\n        for (var j = 0; j < annotationLayers.length; j++) {\n          var pageNumber = annotationLayers[j].id.split('_annotationCanvas_')[1]; // eslint-disable-next-line radix\n\n          this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(pageNumber));\n        }\n      }\n\n      this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n      this.isPagePinchZoomed = false;\n      this.rerenderOnScrollTimer = setTimeout(function () {\n        _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber);\n      }, 300);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.pinchMoveScroll = function () {\n    var _this = this;\n\n    if (this.isRerenderCanvasCreated) {\n      this.clearIntervalTimer();\n    }\n\n    if (this.isPagesZoomed || !this.isRerenderCanvasCreated && this.isPagePinchZoomed) {\n      this.clearRendering();\n      this.isPagesZoomed = false;\n      clearTimeout(this.magnifyPageRerenderTimer);\n      this.isPinchScrolled = true;\n      this.isFormFieldPageZoomed = true;\n      this.rerenderOnScrollTimer = setTimeout(function () {\n        _this.rerenderOnScroll();\n      }, 100);\n    }\n  }; // eslint-disable-next-line\n\n\n  Magnification.prototype.initiateRerender = function (proxy) {\n    var isReRender = false;\n\n    if (this.previousZoomFactor < 0.4 || this.pdfViewerBase.isMinimumZoom) {\n      isReRender = true;\n    } // eslint-disable-next-line max-len\n\n\n    if ((proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount || isReRender) && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n      proxy.reRenderAfterPinch(this.reRenderPageNumber);\n      proxy.isFormFieldPageZoomed = false;\n    }\n  };\n\n  Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n    this.pageRerenderCount = 0;\n    var lowerPageValue = currentPageIndex - 3;\n    var higherPageValue = currentPageIndex + 1;\n\n    if (this.pdfViewerBase.isMinimumZoom) {\n      lowerPageValue = currentPageIndex - 4;\n      higherPageValue = currentPageIndex + 4;\n    }\n\n    lowerPageValue = lowerPageValue > 0 ? lowerPageValue : 0;\n    higherPageValue = higherPageValue < this.pdfViewerBase.pageCount ? higherPageValue : this.pdfViewerBase.pageCount - 1;\n\n    for (var i = lowerPageValue; i <= higherPageValue; i++) {\n      var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n      var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n      var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n\n      if (oldCanvas) {\n        oldCanvas.parentNode.removeChild(oldCanvas);\n      }\n\n      if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(i);\n      } else if (this.pdfViewer.formDesignerModule) {\n        this.rerenderAnnotations(i);\n        this.pdfViewer.renderDrawing(undefined, currentPageIndex);\n      }\n\n      if (pageDiv) {\n        pageDiv.style.visibility = 'visible';\n      }\n    }\n\n    this.isRerenderCanvasCreated = false;\n    this.isPagePinchZoomed = false;\n\n    if (this.pdfViewerBase.reRenderedCount !== 0) {\n      this.pdfViewerBase.reRenderedCount = 0;\n      this.pageRerenderCount = 0;\n      clearInterval(this.rerenderInterval);\n      this.rerenderInterval = null;\n    }\n\n    this.imageObjects = [];\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n\n\n  Magnification.prototype.rerenderAnnotations = function (pageNumber) {\n    // eslint-disable-next-line\n    var oldCanvasCollection = document.querySelectorAll('#' + this.pdfViewer.element.id + '_old_annotationCanvas_' + pageNumber);\n\n    for (var i = 0; i < oldCanvasCollection.length; i++) {\n      if (oldCanvasCollection[i]) {\n        oldCanvasCollection[i].parentElement.removeChild(oldCanvasCollection[i]);\n      }\n    }\n\n    var newCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n\n    if (newCanvas) {\n      newCanvas.style.display = 'block';\n    }\n  };\n\n  Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n    if (this.pdfViewerBase.textLayer) {\n      this.pdfViewerBase.textLayer.clearTextLayers();\n    }\n\n    var lowerPageValue = currentPageIndex - 3;\n    var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n\n    if (this.pdfViewerBase.isMinimumZoom) {\n      lowerPageValue = currentPageIndex - 4;\n      higherPageValue = currentPageIndex + 4;\n    }\n\n    lowerPageValue = lowerPageValue > 0 ? lowerPageValue : 0;\n    higherPageValue = higherPageValue < this.pdfViewerBase.pageCount ? higherPageValue : this.pdfViewerBase.pageCount - 1;\n\n    for (var i = lowerPageValue; i <= higherPageValue; i++) {\n      var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n      var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n      var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n\n      if (canvas && !this.pdfViewer.restrictZoomRequest) {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), width, height, i, 'none');\n      } else if (!this.pdfViewer.restrictZoomRequest) {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), width, height, i, 'none');\n      }\n    }\n\n    this.isRerenderCanvasCreated = true;\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.pageRerenderOnMouseWheel = function () {\n    var _this = this;\n\n    if (this.isRerenderCanvasCreated) {\n      this.clearIntervalTimer();\n      clearTimeout(this.magnifyPageRerenderTimer);\n\n      if (!this.isPinchScrolled) {\n        this.isPinchScrolled = true;\n        this.rerenderOnScrollTimer = setTimeout(function () {\n          _this.rerenderOnScroll();\n        }, 100);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.renderCountIncrement = function () {\n    if (this.isRerenderCanvasCreated) {\n      this.pageRerenderCount++;\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.rerenderCountIncrement = function () {\n    if (this.pageRerenderCount > 0) {\n      this.pdfViewerBase.reRenderedCount++;\n    }\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n\n\n  Magnification.prototype.resizeCanvas = function (pageNumber) {\n    var annotationModule = this.pdfViewer.annotationModule;\n\n    if (annotationModule && annotationModule.inkAnnotationModule) {\n      // eslint-disable-next-line\n      var currentPageNumber = parseInt(annotationModule.inkAnnotationModule.currentPageNumber);\n      annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n    }\n\n    if (annotationModule && annotationModule.freeTextAnnotationModule) {\n      // eslint-disable-next-line\n      var currentPosition = {\n        x: annotationModule.freeTextAnnotationModule.currentPosition[0],\n        y: annotationModule.freeTextAnnotationModule.currentPosition[1],\n        width: annotationModule.freeTextAnnotationModule.currentPosition[2],\n        height: annotationModule.freeTextAnnotationModule.currentPosition[3]\n      };\n      annotationModule.freeTextAnnotationModule.addInputInZoom(currentPosition);\n    }\n\n    var lowerPageValue = pageNumber - 3;\n    var higherPageValue = pageNumber + 3;\n\n    if (this.pdfViewerBase.isMinimumZoom) {\n      lowerPageValue = pageNumber - 4;\n      higherPageValue = pageNumber + 4;\n    }\n\n    lowerPageValue = lowerPageValue > 0 ? lowerPageValue : 0;\n    higherPageValue = higherPageValue < this.pdfViewerBase.pageCount ? higherPageValue : this.pdfViewerBase.pageCount - 1;\n\n    for (var i = lowerPageValue; i <= higherPageValue; i++) {\n      var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n      var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n\n      if (pageDiv) {\n        if (lowerPageValue <= i && i <= higherPageValue) {\n          var isSelectionAvailable = false;\n\n          if (this.pdfViewer.textSelectionModule) {\n            isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n          }\n\n          if (this.pdfViewerBase.pageSize[i] != null) {\n            var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n            var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n            pageDiv.style.width = width + 'px';\n            pageDiv.style.height = height + 'px'; // eslint-disable-next-line max-len\n\n            pageDiv.style.top = this.pdfViewerBase.pageSize[i].top * this.zoomFactor + 'px';\n\n            if (this.pdfViewer.enableRtl) {\n              pageDiv.style.right = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n            } else {\n              pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n            }\n\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n\n            if (canvas) {\n              canvas.style.width = width + 'px';\n              canvas.style.height = height + 'px';\n\n              if (this.pdfViewer.annotation) {\n                this.pdfViewer.annotationModule.resizeAnnotations(width, height, i);\n              } else if (this.pdfViewer.formDesignerModule) {\n                this.pdfViewer.formDesignerModule.resizeAnnotations(width, height, i);\n              }\n            }\n\n            var zoomFactor = this.pdfViewerBase.retrieveCurrentZoomFactor();\n            var tileCount = this.pdfViewerBase.getTileCount(this.pdfViewerBase.pageSize[i].width);\n            var noTileX = void 0;\n            var noTileY = void 0;\n            noTileX = noTileY = tileCount;\n            var tileSettings = this.pdfViewer.tileRenderingSettings;\n\n            if (tileSettings.enableTileRendering && tileSettings.x > 0 && tileSettings.y > 0) {\n              if (1200 < this.pdfViewerBase.pageSize[i].width || this.pdfViewerBase.getZoomFactor() > 2) {\n                noTileX = tileSettings.x;\n                noTileY = tileSettings.y;\n              }\n            }\n\n            var tileRequestCount = noTileX * noTileY;\n\n            if (tileRequestCount === 1) {\n              var storedData = this.pdfViewerBase.getWindowSessionStorage(i, zoomFactor) ? this.pdfViewerBase.getWindowSessionStorage(i, zoomFactor) : this.pdfViewerBase.getPinchZoomPage(i);\n\n              if (storedData) {\n                storedData = JSON.parse(storedData);\n                var imageData = storedData['image'];\n\n                if (imageData) {\n                  canvas.src = imageData;\n                  canvas.style.display = 'block';\n                  var oldCanvases = document.querySelectorAll('img[id*=\"' + this.pdfViewer.element.id + '_tileimg_' + i + '_\"]');\n                  var pageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + i);\n\n                  for (var k = 0; k < oldCanvases.length; k++) {\n                    var tileImgId = oldCanvases[k].id.split('_');\n                    if (parseFloat(tileImgId[tileImgId.length - 3]) != this.pdfViewerBase.getZoomFactor()) pageCanvas.removeChild(oldCanvases[k]);\n                  }\n\n                  var oldPageDiv = document.querySelectorAll('img[id*=\"' + this.pdfViewer.element.id + '_oldCanvas\"]');\n\n                  for (var j = 0; j < oldPageDiv.length; j++) {\n                    pageDiv.removeChild(oldPageDiv[j]);\n                  }\n                }\n\n                this.pdfViewerBase.isReRenderRequired = false;\n              } else {\n                this.pdfViewerBase.isReRenderRequired = true;\n              }\n            } else {\n              var oldCanvases = document.querySelectorAll('img[id*=\"' + this.pdfViewer.element.id + '_tileimg_' + i + '_\"]');\n\n              for (var l = 0; l < oldCanvases.length; l++) {\n                var tileImgId = oldCanvases[l].id.split('_');\n                var tileX = parseFloat(tileImgId[tileImgId.length - 2]);\n                var tileY = parseFloat(tileImgId[tileImgId.length - 1]); // eslint-disable-next-line\n\n                var tileData = JSON.parse(this.pdfViewerBase.getWindowSessionStorageTile(i, tileX, tileY, zoomFactor));\n\n                if (tileData && tileData.zoomFactor) {\n                  zoomFactor = tileData.zoomFactor;\n                }\n\n                if (parseFloat(tileImgId[tileImgId.length - 4]) === i) {\n                  canvas.style.display = 'none';\n                  var node = oldCanvases[l]; // Make sure it's really an Element\n\n                  if (node.nodeType == Node.ELEMENT_NODE) {\n                    var dataScaleFactor = 1.5;\n\n                    if (!isNullOrUndefined(tileData)) {\n                      dataScaleFactor = !isNullOrUndefined(tileData.scaleFactor) ? tileData.scaleFactor : 1.5;\n                    }\n\n                    var pageWidth = this.pdfViewerBase.pageSize[i].width;\n                    var serverImageWidth = pageWidth * zoomFactor * dataScaleFactor;\n                    var serverImageHeight = this.pdfViewerBase.pageSize[i].height * zoomFactor * dataScaleFactor;\n                    var tilewidth = serverImageWidth / noTileX;\n                    var tileHeight = serverImageHeight / noTileY;\n                    var originalWidth = tilewidth;\n                    var originalLeft = parseFloat(tileImgId[tileImgId.length - 2]) * tilewidth;\n                    var originalTop = parseFloat(tileImgId[tileImgId.length - 1]) * tileHeight;\n                    node.width = originalWidth * this.pdfViewerBase.getZoomFactor() / zoomFactor / dataScaleFactor;\n                    node.style.width = originalWidth * this.pdfViewerBase.getZoomFactor() / zoomFactor / dataScaleFactor + 'px';\n                    node.style.left = originalLeft * this.pdfViewerBase.getZoomFactor() / zoomFactor / dataScaleFactor + 'px';\n                    node.style.top = originalTop * this.pdfViewerBase.getZoomFactor() / zoomFactor / dataScaleFactor + 'px';\n                    node.id = this.pdfViewer.element.id + '_tileimg_' + i + '_' + this.pdfViewerBase.getZoomFactor() + '_' + tileX + '_' + tileY;\n\n                    if (tileData) {\n                      var imageData = tileData['image'];\n\n                      if (imageData) {\n                        node.src = imageData;\n                      }\n\n                      this.pdfViewerBase.isReRenderRequired = false;\n                    } else {\n                      this.pdfViewerBase.isReRenderRequired = true;\n                    }\n                  }\n                }\n              }\n\n              if (oldCanvases.length === 0) {\n                this.pdfViewerBase.isReRenderRequired = true;\n              }\n            }\n\n            var aElement = pageDiv.getElementsByTagName('a');\n\n            if (aElement.length !== 0) {\n              for (var index = aElement.length - 1; index >= 0; index--) {\n                aElement[index].parentNode.removeChild(aElement[index]);\n              }\n            }\n\n            if (textLayer) {\n              textLayer.style.width = width + 'px';\n              textLayer.style.height = height + 'px';\n\n              if (this.pdfViewer.textSelectionModule) {\n                if (this.isPinchZoomed) {\n                  textLayer.style.display = 'none';\n                } else if (this.isMagnified) {\n                  var lowerValue = pageNumber - 2 === 0 ? 0 : pageNumber - 2; // eslint-disable-next-line max-len\n\n                  var higherValue = pageNumber === this.pdfViewerBase.pageCount ? this.pdfViewerBase.pageCount - 1 : pageNumber + 1;\n\n                  if (lowerValue <= i && i <= higherValue && (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable || this.pdfViewerBase.textLayer.getTextSearchStatus() || this.pdfViewerBase.isInitialPageMode)) {\n                    this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n\n                    if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                      this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                    }\n                  } else {\n                    textLayer.style.display = 'none';\n                  }\n                } else {\n                  textLayer.style.display = 'none';\n                }\n              }\n\n              this.pdfViewerBase.applyElementStyles(textLayer, i);\n            }\n\n            var adornerSvg = getDiagramElement(this.pdfViewer.element.id + '_textLayer_' + i);\n\n            if (adornerSvg) {\n              var adonerLayer = getDiagramElement(this.pdfViewer.element.id + i + '_diagramAdorner_svg');\n\n              if (adonerLayer) {\n                adonerLayer.style.width = width + 'px';\n                adonerLayer.style.height = height + 'px';\n              }\n\n              var diagramAdornerLayer = getDiagramElement(this.pdfViewer.element.id + i + '_diagramAdornerLayer');\n\n              if (diagramAdornerLayer) {\n                diagramAdornerLayer.style.width = width + 'px';\n                diagramAdornerLayer.style.height = height + 'px';\n              }\n\n              adornerSvg.style.width = width + 'px';\n              adornerSvg.style.height = height + 'px';\n              this.pdfViewer.renderSelector(i, this.pdfViewer.annotationSelectorSettings);\n              this.pdfViewerBase.applyElementStyles(diagramAdornerLayer, i);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n    // eslint-disable-next-line\n    var currentDifference = Math.sqrt(Math.pow(pointX1 - pointX2, 2) + Math.pow(pointY1 - pointY2, 2));\n\n    if (this.previousTouchDifference > -1) {\n      if (currentDifference > this.previousTouchDifference) {\n        this.pinchStep = this.getPinchStep(currentDifference, this.previousTouchDifference);\n        this.pinchOut();\n      } else if (currentDifference < this.previousTouchDifference) {\n        this.pinchStep = this.getPinchStep(this.previousTouchDifference, currentDifference);\n        this.pinchIn();\n      }\n    }\n\n    this.previousTouchDifference = currentDifference;\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.pinchMoveEnd = function () {\n    this.touchCenterX = 0;\n    this.touchCenterY = 0;\n    this.previousTouchDifference = -1;\n\n    if (this.isPinchZoomed) {\n      this.isPinchScrolled = false;\n      this.isPagePinchZoomed = true;\n      this.pinchMoveScroll();\n    }\n  };\n  /**\n   * @param event\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n    if (this.fitType === 'fitToPage') {\n      this.isMagnified = false;\n      event.preventDefault();\n\n      if (event.deltaY > 0) {\n        this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n      } else {\n        this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n      }\n    }\n  };\n  /**\n   * @param event\n   * @private\n   */\n\n\n  Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n    var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n    var isCommandKey = isMac ? event.metaKey : false;\n\n    switch (event.keyCode) {\n      case 38: // up arrow\n\n      case 37: // left arrow\n\n      case 33:\n        // page up\n        if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n          event.preventDefault();\n          this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n        }\n\n        break;\n\n      case 40: // down arrow\n\n      case 39: // right arrow\n\n      case 34:\n        // page down\n        if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n          event.preventDefault();\n          this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n        }\n\n        break;\n\n      case 187:\n        // equal key\n        if (event.ctrlKey || isCommandKey) {\n          event.preventDefault();\n          this.zoomIn();\n        }\n\n        break;\n\n      case 189:\n        // minus key\n        if (event.ctrlKey || isCommandKey) {\n          event.preventDefault();\n          this.zoomOut();\n        }\n\n        break;\n\n      case 48:\n        // zero key\n        if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n          event.preventDefault();\n          this.fitToPage();\n        }\n\n        break;\n\n      case 49:\n        // one key\n        if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n          event.preventDefault();\n          this.zoomTo(100);\n        }\n\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n    if (currentPageIndex > 0) {\n      this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n      this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n\n      if (this.isFitToPageMode) {\n        this.pdfViewerBase.getElement('_pageDiv_' + currentPageIndex).style.visibility = 'hidden';\n      }\n    }\n  };\n  /**\n   * @param currentPageIndex\n   * @private\n   */\n\n\n  Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n    if (this.fitType === 'fitToPage') {\n      if (this.isFitToPageMode) {\n        if (currentPageIndex > 0 && this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1))) {\n          this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n        } // eslint-disable-next-line max-len\n\n\n        if (currentPageIndex < this.pdfViewerBase.pageCount - 1 && this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1))) {\n          this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.onDoubleTapMagnification = function () {\n    if (this.pdfViewer.toolbarModule && isBlazor()) {\n      this.pdfViewer.toolbarModule.showToolbar(true);\n    }\n\n    var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n\n    if (!this.pdfViewer.selectedItems.annotations[0]) {\n      if (!this.isTapToFitZoom) {\n        if (this.zoomFactor < 2) {\n          this.zoomTo(200);\n        } else {\n          this.fitToWidth();\n        }\n      } else {\n        this.fitToWidth();\n      }\n\n      this.calculateScrollValues(scrollValue);\n      this.isTapToFitZoom = !this.isTapToFitZoom;\n    } else {\n      if (isBlazor()) {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n          var elmtPosition = {};\n          elmtPosition.x = this.pdfViewer.selectedItems.annotations[0].bounds.x;\n          elmtPosition.y = this.pdfViewer.selectedItems.annotations[0].bounds.y; // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition, this.pdfViewer.selectedItems.annotations[0]);\n        }\n      }\n    }\n  };\n\n  Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n    if (currentPageIndex !== this.pdfViewerBase.pageCount - 1) {\n      this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n      this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n\n      if (this.isFitToPageMode) {\n        if (currentPageIndex + 1 === this.pdfViewerBase.pageCount - 1) {\n          this.pdfViewerBase.getElement('_pageDiv_' + currentPageIndex).style.visibility = 'hidden';\n        } else {\n          this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n        }\n      }\n    }\n  };\n\n  Magnification.prototype.getMagnifiedValue = function (value) {\n    return value / this.previousZoomFactor * this.zoomFactor;\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.destroy = function () {\n    this.imageObjects = undefined;\n  };\n  /**\n   * returns zoom factor when the zoom percent is passed.\n   *\n   * @param zoomValue\n   */\n\n\n  Magnification.prototype.getZoomFactor = function (zoomValue) {\n    return zoomValue / 100;\n  };\n  /**\n   * @private\n   */\n\n\n  Magnification.prototype.getModuleName = function () {\n    return 'Magnification';\n  };\n  /**\n  * Returns the pinch step value.\n  * @param higherValue\n  * @param lowerValue\n  */\n\n\n  Magnification.prototype.getPinchStep = function (higherValue, lowerValue) {\n    var defaultPinchStep = 0.02; // Default pinch step value.\n\n    var higherPinchStep = 1; // higher pinch step value.\n\n    var pinchstep = (higherValue - lowerValue) / 100;\n\n    if (pinchstep < defaultPinchStep) {\n      pinchstep = defaultPinchStep;\n    } else if (pinchstep > higherPinchStep) {\n      pinchstep = 0.1; // set the pinch step as 0.1 if the pinch reaches the higher pinch step value.\n    }\n\n    return pinchstep;\n  };\n  /**\n  * @private\n  * Brings the given rectangular region to view and zooms in the document to fit the region in client area (view port).\n  *\n  * @param {Rect} zoomRect - Specifies the region in client coordinates that is to be brought to view.\n  */\n\n\n  Magnification.prototype.zoomToRect = function (zoomRect) {\n    var desiredScaleFactor;\n    var pdfViewerBase = this.pdfViewerBase;\n    var viewerContainer = pdfViewerBase.viewerContainer;\n    var pdfViewer = this.pdfViewer;\n\n    if (zoomRect.width > 0 && zoomRect.height > 0) {\n      var location_1 = {\n        x: zoomRect.x,\n        y: zoomRect.y\n      };\n      var pageNumber = pdfViewer.getPageNumberFromClientPoint(location_1);\n\n      if (pageNumber > 0) {\n        var desiredHorizontalScale = viewerContainer.getBoundingClientRect().width / zoomRect.width;\n        var desiredVerticalScale = viewerContainer.getBoundingClientRect().height / zoomRect.height;\n\n        if (desiredHorizontalScale < desiredVerticalScale) {\n          desiredScaleFactor = desiredHorizontalScale;\n        } else {\n          desiredScaleFactor = desiredVerticalScale;\n        }\n\n        var zoomValue = 100; // default zoom value\n\n        var zoomPercentage = pdfViewerBase.getZoomFactor() * 100;\n        zoomValue = zoomPercentage * desiredScaleFactor;\n        var prevScrollTop = viewerContainer.scrollTop;\n        var prevScrollLeft = viewerContainer.scrollLeft; // Zoom to desired zoom value.\n\n        this.zoomTo(zoomValue);\n        viewerContainer.scrollTop = prevScrollTop;\n        viewerContainer.scrollLeft = prevScrollLeft;\n        var zoomFactor = pdfViewerBase.getZoomFactor();\n        var pagepoint = {\n          x: zoomRect.x,\n          y: zoomRect.y\n        }; // Convert the client point to page point.\n\n        pagepoint = pdfViewer.convertClientPointToPagePoint(pagepoint, pageNumber);\n        pdfViewerBase.updateScrollTop(pageNumber - 1); // To adjust the container to the left position.\n\n        viewerContainer.scrollLeft = (pagepoint.x - prevScrollLeft) * zoomFactor; // To adjust the container to the top position.\n\n        viewerContainer.scrollTop = (pagepoint.y + pdfViewerBase.pageSize[pageNumber - 1].top - prevScrollTop) * zoomFactor;\n      }\n    }\n  };\n\n  return Magnification;\n}();\n\nexport { Magnification };","map":{"version":3,"names":["Browser","isBlazor","isNullOrUndefined","getDiagramElement","Magnification","pdfViewer","viewerBase","zoomFactor","previousZoomFactor","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","topValue","isTapToFitZoom","fitType","isPinchZoomed","isPagePinchZoomed","isRerenderCanvasCreated","isMagnified","isPagesZoomed","isPinchScrolled","isAutoZoom","isFormFieldPageZoomed","isWebkitMobile","isFitToPageMode","pdfViewerBase","zoomLevel","test","navigator","userAgent","vendor","indexOf","prototype","zoomTo","zoomValue","MaximumZoomPercentage","MinmumZoomPercentage","isInitialLoading","onWindowResize","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","fitToWidth","calculateFitZoomFactor","fitToAuto","fitToPage","isDevice","enableDesktopMode","viewerContainer","style","overflowY","pageSize","currentPageNumber","scrollTop","top","type","viewerWidth","getBoundingClientRect","width","viewerHeight","height","parseFloat","toString","isNaN","scaleX","highestWidth","Math","min","parseInt","pageLeft","scaleY","highestHeight","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","length","mid","round","checkZoomFactor","annotationModule","closePopupMenu","getZoomFactor","isMinimumZoom","pageCount","magnifyPages","mobilePageNoContainer","left","element","clientWidth","responsivePages","toolbarModule","updateZoomButtons","fireZoomChange","updateZoomPercentage","zoomPercentage","navigationPane","createTooltipMobile","setTouchPoints","clientX","clientY","initiatePinchMove","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","documentLoaded","isInitialPageMode","scrollValue","getMagnifiedValue","textSelectionModule","maintainSelectionOnZoom","formDesignerModule","isDocumentLoaded","updatePageLocation","resizeCanvas","resizeTouchElements","annotModule","textMarkupAnnotationModule","updateCurrentResizerPosition","pageContainer","getPageHeight","proxy_1","renderedPagesList","pinchZoomStorage","setTimeout","rerenderMagnifiedPages","i","pageGap","limit","updatePageContainer","getPageWidth","getPageTop","pageNumber","pageWidth","pageHeight","isReRender","pageDiv","getElement","textLayerDiv","enableRtl","right","updateLeftPosition","renderPageCanvas","clearTimeout","clearIntervalTimer","clearInterval","clearRendering","oldCanvases","document","querySelectorAll","id","split","pageCanvas","parentElement","removeChild","isTextMarkupAnnotationModule","rerenderAnnotationsPinch","pushImageObjects","image","push","j","onload","isInitialLoaded","renderInSeparateThread","pageViewScrollChanged","_this","designNewCanvas","proxy","setInterval","initiateRerender","clearTextSelection","textSearchModule","clearAllOccurrences","textLayer","clearTextLayers","calculateScrollValues","formFieldsModule","proxy_2","pageIndex","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","scrollLeft","rerenderOnScroll","pageDivs","viewPortWidth","tileRenderingSettings","enableTileRendering","restrictZoomRequest","textLayers","display","annotationLayers","pinchMoveScroll","reRenderedCount","reRenderAfterPinch","currentPageIndex","lowerPageValue","higherPageValue","oldCanvas","parentNode","rerenderAnnotations","renderDrawing","undefined","visibility","oldCanvasCollection","newCanvas","canvas","pageRerenderOnMouseWheel","renderCountIncrement","rerenderCountIncrement","inkAnnotationModule","drawInkAnnotation","freeTextAnnotationModule","currentPosition","x","y","addInputInZoom","getElementById","isSelectionAvailable","isSelectionAvailableOnScroll","annotation","resizeAnnotations","retrieveCurrentZoomFactor","tileCount","getTileCount","noTileX","noTileY","tileSettings","tileRequestCount","storedData","getWindowSessionStorage","getPinchZoomPage","JSON","parse","imageData","src","k","tileImgId","oldPageDiv","isReRenderRequired","l","tileX","tileY","tileData","getWindowSessionStorageTile","node","nodeType","Node","ELEMENT_NODE","dataScaleFactor","scaleFactor","serverImageWidth","serverImageHeight","tilewidth","tileHeight","originalWidth","originalLeft","originalTop","aElement","getElementsByTagName","index","lowerValue","higherValue","isTextSelection","getTextSearchStatus","resizeTextContentsOnZoom","applySelectionRangeOnScroll","applyElementStyles","adornerSvg","adonerLayer","diagramAdornerLayer","renderSelector","annotationSelectorSettings","currentDifference","sqrt","pow","previousTouchDifference","getPinchStep","pinchMoveEnd","fitPageScrollMouseWheel","event","preventDefault","deltaY","downwardScrollFitPage","upwardScrollFitPage","magnifyBehaviorKeyDown","isMac","platform","match","isCommandKey","metaKey","keyCode","ctrlKey","shiftKey","updatePagesForFitPage","onDoubleTapMagnification","showToolbar","selectedItems","annotations","shapeAnnotationType","elmtPosition","bounds","addInuptElemet","value","destroy","getModuleName","defaultPinchStep","higherPinchStep","pinchstep","zoomToRect","zoomRect","desiredScaleFactor","location_1","getPageNumberFromClientPoint","desiredHorizontalScale","desiredVerticalScale","prevScrollTop","prevScrollLeft","pagepoint","convertClientPointToPagePoint","updateScrollTop"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/magnification/magnification.js"],"sourcesContent":["/* eslint-disable */\nimport { Browser, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getDiagramElement } from '@syncfusion/ej2-drawings';\n/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @param pdfViewer\n     * @param viewerBase\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [10, 25, 50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0;\n        this.reRenderPageNumber = 0;\n        // eslint-disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // eslint-disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // eslint-disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        this.isTapToFitZoom = false;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        /**\n         * @private\n         */\n        this.isFormFieldPageZoomed = false;\n        this.isWebkitMobile = false;\n        this.isFitToPageMode = true;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n        // eslint-disable-next-line max-len\n        this.isWebkitMobile = /Chrome/.test(navigator.userAgent) || /Google Inc/.test(navigator.vendor) || (navigator.userAgent.indexOf('Safari') !== -1);\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     *\n     * @param  {number} zoomValue - Specifies the Zoom Value for magnify the PDF document\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        var MaximumZoomPercentage = 400;\n        var MinmumZoomPercentage = 10;\n        if (zoomValue < MinmumZoomPercentage) {\n            zoomValue = MinmumZoomPercentage;\n        }\n        else if (zoomValue > MaximumZoomPercentage) {\n            zoomValue = MaximumZoomPercentage;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     *\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 8) {\n            this.zoomLevel = 8;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     *\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     *\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     *\n     * @param  {number} zoomValue - Defines the Zoom Value for fit the page in the Container\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        if (zoomValue !== null) {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                if (this.isWebkitMobile) {\n                    this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n                }\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n            }\n            if (this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1]) {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n            }\n        }\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     *\n     * @param type\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        if (viewerWidth === 0 && viewerHeight === 0) {\n            viewerWidth = parseFloat(this.pdfViewer.width.toString());\n            viewerHeight = parseFloat(this.pdfViewer.height.toString());\n        }\n        if (isNaN(viewerHeight) || isNaN(viewerWidth)) {\n            return null;\n        }\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var scaleX = ((viewerWidth - this.scrollWidth) / this.pdfViewerBase.highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            // eslint-disable-next-line radix\n            return parseInt((scaleX * 100).toString());\n        }\n        else {\n            this.isFitToPageMode = true;\n            var pageLeft = 10;\n            var scaleX = ((viewerWidth - this.scrollWidth - pageLeft) / this.pdfViewerBase.highestWidth);\n            var scaleY = (viewerHeight / this.pdfViewerBase.highestHeight);\n            if (scaleY > scaleX) {\n                scaleY = scaleX;\n                this.isFitToPageMode = false;\n            }\n            // eslint-disable-next-line radix\n            return parseInt((scaleY * 100).toString());\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.1) {\n            temporaryZoomFactor = 0.1;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n        this.isTapToFitZoom = true;\n        if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && (this.zoomFactor * 100) === 50) {\n            var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n            this.fitType = null;\n            if (zoomValue <= 50) {\n                this.fitToWidth();\n            }\n        }\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            if (temporaryZoomFactor > 2) {\n                temporaryZoomFactor = 2;\n            }\n        }\n        else {\n            if (temporaryZoomFactor > 2) {\n                temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n            }\n            if (temporaryZoomFactor > 4) {\n                temporaryZoomFactor = 4;\n            }\n        }\n        this.isTapToFitZoom = true;\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     *\n     * @param zoomFactor\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     *\n     * @param zoomValue\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        if (zoomValue) {\n            if (this.pdfViewer.annotationModule) {\n                this.pdfViewer.annotationModule.closePopupMenu();\n            }\n            this.previousZoomFactor = this.zoomFactor;\n            this.zoomLevel = this.getZoomLevel(zoomValue);\n            this.zoomFactor = this.getZoomFactor(zoomValue);\n            if (this.zoomFactor <= 0.25) {\n                this.pdfViewerBase.isMinimumZoom = true;\n            }\n            else {\n                this.pdfViewerBase.isMinimumZoom = false;\n            }\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                if (this.isWebkitMobile) {\n                    this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n                }\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n            }\n            if (this.pdfViewerBase.pageCount > 0) {\n                if ((this.previousZoomFactor !== this.zoomFactor)) {\n                    if (!this.isPinchZoomed) {\n                        this.magnifyPages();\n                    }\n                    else {\n                        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewerBase.mobilePageNoContainer.style.left = (this.pdfViewer.element.clientWidth / 2) - (parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width) / 2) + 'px';\n                        }\n                        this.responsivePages();\n                    }\n                }\n                if (!isBlazor()) {\n                    if (this.pdfViewer.toolbarModule) {\n                        this.pdfViewer.toolbarModule.updateZoomButtons();\n                    }\n                }\n                if (!this.isInitialLoading) {\n                    if (this.previousZoomFactor !== this.zoomFactor) {\n                        // eslint-disable-next-line\n                        this.pdfViewer.zoomValue = parseInt((this.zoomFactor * 100).toString());\n                        this.pdfViewer.fireZoomChange();\n                    }\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n            }\n            if (!this.isInitialLoading) {\n                if (this.previousZoomFactor !== this.zoomFactor) {\n                    this.pdfViewer.zoomValue = parseInt((this.zoomFactor * 100).toString());\n                    this.pdfViewer.fireZoomChange();\n                }\n            }\n            if ((Browser.isDevice && !this.pdfViewer.enableDesktopMode) && this.isPinchZoomed) {\n                // eslint-disable-next-line radix\n                var zoomPercentage = parseInt((this.zoomFactor * 100).toString()) + '%';\n                this.pdfViewerBase.navigationPane.createTooltipMobile(zoomPercentage);\n            }\n        }\n    };\n    /**\n     * @param clientX\n     * @param clientY\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @param pointX1\n     * @param pointY1\n     * @param pointX2\n     * @param pointY2\n     * @param pointX1\n     * @param pointY1\n     * @param pointX2\n     * @param pointY2\n     * @param pointX1\n     * @param pointY1\n     * @param pointX2\n     * @param pointY2\n     * @param pointX1\n     * @param pointY1\n     * @param pointX2\n     * @param pointY2\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        if (!this.pdfViewerBase.documentLoaded && !this.pdfViewerBase.isInitialPageMode) {\n            this.isPagesZoomed = true;\n        }\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        if (this.pdfViewer.formDesignerModule && !this.pdfViewerBase.documentLoaded && !this.pdfViewerBase.isDocumentLoaded) {\n            this.isFormFieldPageZoomed = true;\n        }\n        if (!this.isInitialLoading) {\n            this.isMagnified = true;\n        }\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        // eslint-disable-next-line\n        var annotModule = this.pdfViewer.annotationModule;\n        if (annotModule && annotModule.textMarkupAnnotationModule) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateCurrentResizerPosition();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // eslint-disable-next-line\n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            if (!this.pdfViewerBase.documentLoaded) {\n                this.magnifyPageRerenderTimer = setTimeout(function () {\n                    proxy_1.rerenderMagnifiedPages();\n                }, 800);\n            }\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n        var limit = this.pdfViewerBase.pageCount < 10 ? this.pdfViewerBase.pageCount : 10;\n        for (var i = 0; i < limit; i++) {\n            this.updatePageContainer(i, this.pdfViewerBase.getPageWidth(i), this.pdfViewerBase.getPageHeight(i), this.pdfViewerBase.getPageTop(i), true);\n        }\n    };\n    Magnification.prototype.updatePageContainer = function (pageNumber, pageWidth, pageHeight, topValue, isReRender) {\n        // eslint-disable-next-line\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        if (pageDiv) {\n            pageDiv.style.width = pageWidth + 'px';\n            pageDiv.style.height = pageHeight + 'px';\n            // eslint-disable-next-line\n            var textLayerDiv = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n            if (textLayerDiv) {\n                textLayerDiv.style.width = pageWidth + 'px';\n                textLayerDiv.style.height = pageHeight + 'px';\n            }\n            pageDiv.style.width = pageWidth + 'px';\n            pageDiv.style.height = pageHeight + 'px';\n            if (this.pdfViewer.enableRtl) {\n                pageDiv.style.right = this.pdfViewerBase.updateLeftPosition(pageNumber) + 'px';\n            }\n            else {\n                pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(pageNumber) + 'px';\n            }\n            pageDiv.style.top = topValue + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.pdfViewerBase.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"' + this.pdfViewer.element.id + '_oldCanvas_\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // eslint-disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(i);\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @param image\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        if (!isNullOrUndefined(this.imageObjects)) {\n            this.imageObjects && this.imageObjects.push(image);\n        }\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        if ((this.pdfViewerBase.isInitialLoaded || this.pdfViewerBase.isDocumentLoaded) && !this.pdfViewerBase.isInitialPageMode) {\n            this.renderInSeparateThread(this.reRenderPageNumber);\n            this.isPagesZoomed = false;\n        }\n        else if (this.pdfViewerBase.isInitialPageMode) {\n            this.pageRerenderCount = 0;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.isMagnified = false;\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.pdfViewerBase.isInitialPageMode = false;\n        }\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // eslint-disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () {\n            _this.initiateRerender(proxy);\n        }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.clearAllOccurrences();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.pdfViewerBase.textLayer && this.pdfViewer.formDesignerModule) {\n            this.pdfViewerBase.textLayer.clearTextLayers(true);\n        }\n        if (this.isPinchZoomed) {\n            this.calculateScrollValues(scrollValue);\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        if (this.pdfViewer.formFieldsModule && !this.pdfViewer.formDesignerModule) {\n            var proxy_2 = this;\n            if (!this.pdfViewerBase.documentLoaded) {\n                this.magnifyPageRerenderTimer = setTimeout(function () {\n                    proxy_2.rerenderMagnifiedPages();\n                }, 800);\n            }\n        }\n    };\n    Magnification.prototype.calculateScrollValues = function (scrollValue) {\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n        if (currentPageCanvas) {\n            var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n            // update scroll top for the viewer container based on pinch zoom factor\n            var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n            var previousY = scrollValue + this.touchCenterY;\n            // eslint-disable-next-line max-len\n            var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                // eslint-disable-next-line max-len\n                previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n            this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n            // update scroll left for the viewer container based on pinch zoom factor\n            var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n            var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n            var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n            this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n        }\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            var pageDivs = document.querySelectorAll('img[id*=\"' + this.pdfViewer.element.id + '_pageCanvas_\"]');\n            var viewPortWidth = 816;\n            for (var i = 0; i < pageDivs.length; i++) {\n                // eslint-disable-next-line radix\n                var pageNumber = parseInt(pageDivs[i].id.split('_pageCanvas_')[1]);\n                var pageWidth = this.pdfViewerBase.pageSize[pageNumber].width;\n                if ((viewPortWidth < pageWidth) && this.pdfViewer.tileRenderingSettings.enableTileRendering) {\n                    if (this.pdfViewer.restrictZoomRequest) {\n                        pageDivs[i].style.width = pageWidth * this.pdfViewerBase.getZoomFactor() + 'px';\n                        // eslint-disable-next-line max-len\n                        pageDivs[i].style.height = this.pdfViewerBase.pageSize[pageNumber].height * this.pdfViewerBase.getZoomFactor() + 'px';\n                    }\n                    else {\n                        pageDivs[i].style.width = pageWidth * this.pdfViewerBase.getZoomFactor() + 'px';\n                        // eslint-disable-next-line max-len\n                        pageDivs[i].style.height = this.pdfViewerBase.pageSize[pageNumber].height * this.pdfViewerBase.getZoomFactor() + 'px';\n                    }\n                }\n            }\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"' + this.pdfViewer.element.id + '_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                // eslint-disable-next-line max-len\n                var annotationLayers = document.querySelectorAll('canvas[id*=\"' + this.pdfViewer.element.id + '_annotationCanvas_\"]');\n                for (var j = 0; j < annotationLayers.length; j++) {\n                    var pageNumber = annotationLayers[j].id.split('_annotationCanvas_')[1];\n                    // eslint-disable-next-line radix\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(pageNumber));\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () {\n                _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber);\n            }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.isFormFieldPageZoomed = true;\n            this.rerenderOnScrollTimer = setTimeout(function () {\n                _this.rerenderOnScroll();\n            }, 100);\n        }\n    };\n    // eslint-disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        var isReRender = false;\n        if (this.previousZoomFactor < 0.4 || this.pdfViewerBase.isMinimumZoom) {\n            isReRender = true;\n        }\n        // eslint-disable-next-line max-len\n        if (((proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount) || isReRender) && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n            proxy.isFormFieldPageZoomed = false;\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        var higherPageValue = currentPageIndex + 1;\n        if (this.pdfViewerBase.isMinimumZoom) {\n            lowerPageValue = currentPageIndex - 4;\n            higherPageValue = currentPageIndex + 4;\n        }\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(i);\n            }\n            else if (this.pdfViewer.formDesignerModule) {\n                this.rerenderAnnotations(i);\n                this.pdfViewer.renderDrawing(undefined, currentPageIndex);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    Magnification.prototype.rerenderAnnotations = function (pageNumber) {\n        // eslint-disable-next-line\n        var oldCanvasCollection = document.querySelectorAll('#' + this.pdfViewer.element.id + '_old_annotationCanvas_' + pageNumber);\n        for (var i = 0; i < oldCanvasCollection.length; i++) {\n            if (oldCanvasCollection[i]) {\n                oldCanvasCollection[i].parentElement.removeChild(oldCanvasCollection[i]);\n            }\n        }\n        var newCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (newCanvas) {\n            newCanvas.style.display = 'block';\n        }\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        if (this.pdfViewerBase.isMinimumZoom) {\n            lowerPageValue = currentPageIndex - 4;\n            higherPageValue = currentPageIndex + 4;\n        }\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n            var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n            if (canvas && !this.pdfViewer.restrictZoomRequest) {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), width, height, i, 'none');\n            }\n            else if (!this.pdfViewer.restrictZoomRequest) {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), width, height, i, 'none');\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () {\n                    _this.rerenderOnScroll();\n                }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var annotationModule = this.pdfViewer.annotationModule;\n        if (annotationModule && annotationModule.inkAnnotationModule) {\n            // eslint-disable-next-line\n            var currentPageNumber = parseInt(annotationModule.inkAnnotationModule.currentPageNumber);\n            annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n        }\n        if (annotationModule && annotationModule.freeTextAnnotationModule) {\n            // eslint-disable-next-line\n            var currentPosition = { x: annotationModule.freeTextAnnotationModule.currentPosition[0], y: annotationModule.freeTextAnnotationModule.currentPosition[1], width: annotationModule.freeTextAnnotationModule.currentPosition[2], height: annotationModule.freeTextAnnotationModule.currentPosition[3] };\n            annotationModule.freeTextAnnotationModule.addInputInZoom(currentPosition);\n        }\n        var lowerPageValue = pageNumber - 3;\n        var higherPageValue = pageNumber + 3;\n        if (this.pdfViewerBase.isMinimumZoom) {\n            lowerPageValue = pageNumber - 4;\n            higherPageValue = pageNumber + 4;\n        }\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // eslint-disable-next-line max-len\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        if (this.pdfViewer.enableRtl) {\n                            pageDiv.style.right = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        else {\n                            pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = (width) + 'px';\n                            canvas.style.height = height + 'px';\n                            if (this.pdfViewer.annotation) {\n                                this.pdfViewer.annotationModule.resizeAnnotations(width, height, i);\n                            }\n                            else if (this.pdfViewer.formDesignerModule) {\n                                this.pdfViewer.formDesignerModule.resizeAnnotations(width, height, i);\n                            }\n                        }\n                        var zoomFactor = this.pdfViewerBase.retrieveCurrentZoomFactor();\n                        var tileCount = this.pdfViewerBase.getTileCount(this.pdfViewerBase.pageSize[i].width);\n                        var noTileX = void 0;\n                        var noTileY = void 0;\n                        noTileX = noTileY = tileCount;\n                        var tileSettings = this.pdfViewer.tileRenderingSettings;\n                        if (tileSettings.enableTileRendering && tileSettings.x > 0 && tileSettings.y > 0) {\n                            if ((1200 < this.pdfViewerBase.pageSize[i].width || this.pdfViewerBase.getZoomFactor() > 2)) {\n                                noTileX = tileSettings.x;\n                                noTileY = tileSettings.y;\n                            }\n                        }\n                        var tileRequestCount = noTileX * noTileY;\n                        if (tileRequestCount === 1) {\n                            var storedData = this.pdfViewerBase.getWindowSessionStorage(i, zoomFactor) ? this.pdfViewerBase.getWindowSessionStorage(i, zoomFactor) : this.pdfViewerBase.getPinchZoomPage(i);\n                            if (storedData) {\n                                storedData = JSON.parse(storedData);\n                                var imageData = storedData['image'];\n                                if (imageData) {\n                                    canvas.src = imageData;\n                                    canvas.style.display = 'block';\n                                    var oldCanvases = document.querySelectorAll('img[id*=\"' + this.pdfViewer.element.id + '_tileimg_' + i + '_\"]');\n                                    var pageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + i);\n                                    for (var k = 0; k < oldCanvases.length; k++) {\n                                        var tileImgId = oldCanvases[k].id.split('_');\n                                        if (parseFloat(tileImgId[tileImgId.length - 3]) != this.pdfViewerBase.getZoomFactor())\n                                            pageCanvas.removeChild(oldCanvases[k]);\n                                    }\n                                    var oldPageDiv = document.querySelectorAll('img[id*=\"' + this.pdfViewer.element.id + '_oldCanvas\"]');\n                                    for (var j = 0; j < oldPageDiv.length; j++) {\n                                        pageDiv.removeChild(oldPageDiv[j]);\n                                    }\n                                }\n                                this.pdfViewerBase.isReRenderRequired = false;\n                            }\n                            else {\n                                this.pdfViewerBase.isReRenderRequired = true;\n                            }\n                        }\n                        else {\n                            var oldCanvases = document.querySelectorAll('img[id*=\"' + this.pdfViewer.element.id + '_tileimg_' + i + '_\"]');\n                            for (var l = 0; l < oldCanvases.length; l++) {\n                                var tileImgId = oldCanvases[l].id.split('_');\n                                var tileX = parseFloat(tileImgId[tileImgId.length - 2]);\n                                var tileY = parseFloat(tileImgId[tileImgId.length - 1]);\n                                // eslint-disable-next-line\n                                var tileData = JSON.parse(this.pdfViewerBase.getWindowSessionStorageTile(i, tileX, tileY, zoomFactor));\n                                if (tileData && tileData.zoomFactor) {\n                                    zoomFactor = tileData.zoomFactor;\n                                }\n                                if (parseFloat(tileImgId[tileImgId.length - 4]) === i) {\n                                    canvas.style.display = 'none';\n                                    var node = oldCanvases[l];\n                                    // Make sure it's really an Element\n                                    if (node.nodeType == Node.ELEMENT_NODE) {\n                                        var dataScaleFactor = 1.5;\n                                        if (!isNullOrUndefined(tileData)) {\n                                            dataScaleFactor = (!isNullOrUndefined(tileData.scaleFactor)) ? tileData.scaleFactor : 1.5;\n                                        }\n                                        var pageWidth = this.pdfViewerBase.pageSize[i].width;\n                                        var serverImageWidth = pageWidth * zoomFactor * dataScaleFactor;\n                                        var serverImageHeight = this.pdfViewerBase.pageSize[i].height * zoomFactor * dataScaleFactor;\n                                        var tilewidth = serverImageWidth / noTileX;\n                                        var tileHeight = serverImageHeight / noTileY;\n                                        var originalWidth = tilewidth;\n                                        var originalLeft = parseFloat(tileImgId[tileImgId.length - 2]) * tilewidth;\n                                        var originalTop = parseFloat(tileImgId[tileImgId.length - 1]) * tileHeight;\n                                        node.width = (((originalWidth * this.pdfViewerBase.getZoomFactor()) / zoomFactor) / dataScaleFactor);\n                                        node.style.width = (((originalWidth * this.pdfViewerBase.getZoomFactor()) / zoomFactor) / dataScaleFactor) + 'px';\n                                        node.style.left = (((originalLeft * this.pdfViewerBase.getZoomFactor()) / zoomFactor) / dataScaleFactor) + 'px';\n                                        node.style.top = (((originalTop * this.pdfViewerBase.getZoomFactor()) / zoomFactor) / dataScaleFactor) + 'px';\n                                        node.id = this.pdfViewer.element.id + '_tileimg_' + i + '_' + this.pdfViewerBase.getZoomFactor() + '_' + tileX + '_' + tileY;\n                                        if (tileData) {\n                                            var imageData = tileData['image'];\n                                            if (imageData) {\n                                                node.src = imageData;\n                                            }\n                                            this.pdfViewerBase.isReRenderRequired = false;\n                                        }\n                                        else {\n                                            this.pdfViewerBase.isReRenderRequired = true;\n                                        }\n                                    }\n                                }\n                            }\n                            if (oldCanvases.length === 0) {\n                                this.pdfViewerBase.isReRenderRequired = true;\n                            }\n                        }\n                        var aElement = pageDiv.getElementsByTagName('a');\n                        if (aElement.length !== 0) {\n                            for (var index = aElement.length - 1; index >= 0; index--) {\n                                aElement[index].parentNode.removeChild(aElement[index]);\n                            }\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // eslint-disable-next-line max-len\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : (pageNumber + 1);\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus() || this.pdfViewerBase.isInitialPageMode)) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                            this.pdfViewerBase.applyElementStyles(textLayer, i);\n                        }\n                        var adornerSvg = getDiagramElement(this.pdfViewer.element.id + '_textLayer_' + i);\n                        if (adornerSvg) {\n                            var adonerLayer = getDiagramElement(this.pdfViewer.element.id + i + '_diagramAdorner_svg');\n                            if (adonerLayer) {\n                                adonerLayer.style.width = width + 'px';\n                                adonerLayer.style.height = height + 'px';\n                            }\n                            var diagramAdornerLayer = getDiagramElement(this.pdfViewer.element.id + i + '_diagramAdornerLayer');\n                            if (diagramAdornerLayer) {\n                                diagramAdornerLayer.style.width = width + 'px';\n                                diagramAdornerLayer.style.height = height + 'px';\n                            }\n                            adornerSvg.style.width = width + 'px';\n                            adornerSvg.style.height = height + 'px';\n                            this.pdfViewer.renderSelector(i, this.pdfViewer.annotationSelectorSettings);\n                            this.pdfViewerBase.applyElementStyles(diagramAdornerLayer, i);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // eslint-disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchStep = this.getPinchStep(currentDifference, this.previousTouchDifference);\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchStep = this.getPinchStep(this.previousTouchDifference, currentDifference);\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @param event\n     * @private\n     */\n    // eslint-disable-next-line\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            this.isMagnified = false;\n            event.preventDefault();\n            if (event.deltaY > 0) {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @param event\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            if (this.isFitToPageMode) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n        }\n    };\n    /**\n     * @param currentPageIndex\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (this.isFitToPageMode) {\n                if (currentPageIndex > 0 && this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1))) {\n                    this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n                }\n                // eslint-disable-next-line max-len\n                if ((currentPageIndex < (this.pdfViewerBase.pageCount - 1)) && this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1))) {\n                    this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.onDoubleTapMagnification = function () {\n        if (this.pdfViewer.toolbarModule && isBlazor()) {\n            this.pdfViewer.toolbarModule.showToolbar(true);\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (!this.pdfViewer.selectedItems.annotations[0]) {\n            if (!this.isTapToFitZoom) {\n                if (this.zoomFactor < 2) {\n                    this.zoomTo(200);\n                }\n                else {\n                    this.fitToWidth();\n                }\n            }\n            else {\n                this.fitToWidth();\n            }\n            this.calculateScrollValues(scrollValue);\n            this.isTapToFitZoom = !this.isTapToFitZoom;\n        }\n        else {\n            if (isBlazor()) {\n                // eslint-disable-next-line max-len\n                if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                    var elmtPosition = {};\n                    elmtPosition.x = this.pdfViewer.selectedItems.annotations[0].bounds.x;\n                    elmtPosition.y = this.pdfViewer.selectedItems.annotations[0].bounds.y;\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition, this.pdfViewer.selectedItems.annotations[0]);\n                }\n            }\n        }\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (this.isFitToPageMode) {\n                if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                    this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n                }\n                else {\n                    this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n                }\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     *\n     * @param zoomValue\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    /**\n    * Returns the pinch step value.\n    * @param higherValue\n    * @param lowerValue\n    */\n    Magnification.prototype.getPinchStep = function (higherValue, lowerValue) {\n        var defaultPinchStep = 0.02; // Default pinch step value.\n        var higherPinchStep = 1; // higher pinch step value.\n        var pinchstep = (higherValue - lowerValue) / 100;\n        if (pinchstep < defaultPinchStep) {\n            pinchstep = defaultPinchStep;\n        }\n        else if (pinchstep > higherPinchStep) {\n            pinchstep = 0.1; // set the pinch step as 0.1 if the pinch reaches the higher pinch step value.\n        }\n        return pinchstep;\n    };\n    /**\n    * @private\n    * Brings the given rectangular region to view and zooms in the document to fit the region in client area (view port).\n    *\n    * @param {Rect} zoomRect - Specifies the region in client coordinates that is to be brought to view.\n    */\n    Magnification.prototype.zoomToRect = function (zoomRect) {\n        var desiredScaleFactor;\n        var pdfViewerBase = this.pdfViewerBase;\n        var viewerContainer = pdfViewerBase.viewerContainer;\n        var pdfViewer = this.pdfViewer;\n        if (zoomRect.width > 0 && zoomRect.height > 0) {\n            var location_1 = { x: zoomRect.x, y: zoomRect.y };\n            var pageNumber = pdfViewer.getPageNumberFromClientPoint(location_1);\n            if (pageNumber > 0) {\n                var desiredHorizontalScale = viewerContainer.getBoundingClientRect().width / zoomRect.width;\n                var desiredVerticalScale = viewerContainer.getBoundingClientRect().height / zoomRect.height;\n                if (desiredHorizontalScale < desiredVerticalScale) {\n                    desiredScaleFactor = desiredHorizontalScale;\n                }\n                else {\n                    desiredScaleFactor = desiredVerticalScale;\n                }\n                var zoomValue = 100; // default zoom value\n                var zoomPercentage = pdfViewerBase.getZoomFactor() * 100;\n                zoomValue = zoomPercentage * desiredScaleFactor;\n                var prevScrollTop = viewerContainer.scrollTop;\n                var prevScrollLeft = viewerContainer.scrollLeft;\n                // Zoom to desired zoom value.\n                this.zoomTo(zoomValue);\n                viewerContainer.scrollTop = prevScrollTop;\n                viewerContainer.scrollLeft = prevScrollLeft;\n                var zoomFactor = pdfViewerBase.getZoomFactor();\n                var pagepoint = { x: zoomRect.x, y: zoomRect.y };\n                // Convert the client point to page point.\n                pagepoint = pdfViewer.convertClientPointToPagePoint(pagepoint, pageNumber);\n                pdfViewerBase.updateScrollTop(pageNumber - 1);\n                // To adjust the container to the left position.\n                viewerContainer.scrollLeft = (pagepoint.x - prevScrollLeft) * zoomFactor;\n                // To adjust the container to the top position.\n                viewerContainer.scrollTop = ((pagepoint.y + pdfViewerBase.pageSize[pageNumber - 1].top) - prevScrollTop) * zoomFactor;\n            }\n        }\n    };\n    return Magnification;\n}());\nexport { Magnification };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}