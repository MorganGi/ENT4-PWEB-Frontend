{"ast":null,"code":"/* eslint-disable */\nimport { createElement, Browser, isBlazor, isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool, Menu } from '@syncfusion/ej2-navigations'; // eslint-disable-next-line max-len\n\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Slider } from '@syncfusion/ej2-inputs';\nimport { cloneObject } from '../drawing/drawing-util';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Query } from '@syncfusion/ej2-data';\nimport { DynamicStampItem, SignStampItem, StandardBusinessStampItem } from '../base/types';\n/**\n * @hidden\n */\n\nvar AnnotationToolbar =\n/** @class */\nfunction () {\n  function AnnotationToolbar(viewer, viewerBase, toolbar) {\n    var _this = this;\n\n    this.toolbarBorderHeight = 1;\n    /**\n     * @private\n     */\n\n    this.isToolbarHidden = false;\n    /**\n     * @private\n     */\n\n    this.isMobileAnnotEnabled = false;\n    this.isHighlightEnabled = false;\n    this.isUnderlineEnabled = false;\n    this.isStrikethroughEnabled = false;\n    this.isHighlightBtnVisible = true;\n    this.isCommentBtnVisible = true;\n    this.isUnderlineBtnVisible = true;\n    this.isStrikethroughBtnVisible = true;\n    this.isColorToolVisible = true;\n    this.isOpacityToolVisible = true;\n    this.isDeleteAnnotationToolVisible = true;\n    this.isCurrentAnnotationOpacitySet = false;\n    this.isStampBtnVisible = false;\n    this.isShapeBtnVisible = false;\n    this.isSignatureBtnVisible = false;\n    this.isInkBtnVisible = false;\n    this.isFontFamilyToolVisible = false;\n    this.isFontSizeToolVisible = false;\n    this.isFontAlignToolVisible = false;\n    this.isFontColorToolVisible = false;\n    this.isFontStylesToolVisible = false;\n    this.isCommentPanelBtnVisible = false;\n    this.isFreeTextBtnVisible = false;\n    this.isCalibrateBtnVisible = false;\n    this.isStrokeColorToolVisible = false;\n    this.isThicknessToolVisible = false;\n    this.stampMenu = [];\n    this.stampParentID = '';\n    /**\n     * @private\n     */\n\n    this.inkAnnotationSelected = false;\n    /**\n     * @private\n     */\n\n    this.openSignaturePopup = false;\n    this.isSavedSignatureClicked = false;\n    this.saveSignatureCount = 0;\n    this.saveInitialCount = 0;\n    /**\n     * @private\n     */\n\n    this.isToolbarCreated = false; // eslint-disable-next-line\n\n    this.addStampImage = function (args) {\n      // eslint-disable-next-line\n      var proxy = _this; // eslint-disable-next-line\n\n      var upoadedFiles = args.target.files;\n\n      if (args.target.files[0] !== null) {\n        var uploadedFile = upoadedFiles[0];\n        _this.pdfViewer.annotationModule.stampAnnotationModule.customStampName = uploadedFile.name.split('.')[0];\n\n        if (uploadedFile.type.split('/')[0] === 'image') {\n          var reader = new FileReader(); // eslint-disable-next-line\n\n          reader.onload = function (e) {\n            var uploadedFileUrl = e.currentTarget.result;\n            proxy.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n            proxy.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n            proxy.pdfViewerBase.stampAdded = true;\n\n            _this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(uploadedFileUrl);\n\n            proxy.pdfViewerBase.stampAdded = false;\n          };\n\n          reader.readAsDataURL(uploadedFile);\n        }\n      }\n\n      args.target.value = '';\n      args.currentTarget.value = '';\n    };\n\n    this.onShapeToolbarClicked = function (args) {\n      var elementId = _this.pdfViewer.element.id;\n      var shapeAnnotationModule = _this.pdfViewer.annotation.shapeAnnotationModule;\n\n      if (!Browser.isDevice) {\n        _this.deselectAllItems();\n\n        _this.resetFreeTextAnnot();\n      } else {\n        // eslint:disable-next-line\n        var element = args.originalEvent.target;\n\n        _this.pdfViewer.toolbarModule.selectItem(element.parentElement);\n      }\n\n      switch (args.originalEvent.target.id) {\n        case elementId + '_shape_line':\n        case elementId + '_shape_lineIcon':\n          shapeAnnotationModule.setAnnotationType('Line');\n\n          _this.onShapeDrawSelection(true);\n\n          _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.lineFillColor);\n\n          _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.lineStrokeColor);\n\n          _this.handleShapeTool(elementId + '_shape_line');\n\n          break;\n\n        case elementId + '_shape_arrow':\n        case elementId + '_shape_arrowIcon':\n          shapeAnnotationModule.setAnnotationType('Arrow');\n\n          _this.onShapeDrawSelection(true);\n\n          _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.arrowFillColor);\n\n          _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.arrowStrokeColor);\n\n          _this.handleShapeTool(elementId + '_shape_arrow');\n\n          break;\n\n        case elementId + '_shape_rectangle':\n        case elementId + '_shape_rectangleIcon':\n          shapeAnnotationModule.setAnnotationType('Rectangle');\n\n          _this.onShapeDrawSelection(true);\n\n          _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.rectangleFillColor);\n\n          _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.rectangleStrokeColor);\n\n          _this.handleShapeTool(elementId + '_shape_rectangle');\n\n          break;\n\n        case elementId + '_shape_circle':\n        case elementId + '_shape_circleIcon':\n          shapeAnnotationModule.setAnnotationType('Circle');\n\n          _this.onShapeDrawSelection(true);\n\n          _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.circleFillColor);\n\n          _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.circleStrokeColor);\n\n          _this.handleShapeTool(elementId + '_shape_circle');\n\n          break;\n\n        case elementId + '_shape_pentagon':\n        case elementId + '_shape_pentagonIcon':\n          shapeAnnotationModule.setAnnotationType('Polygon');\n\n          _this.onShapeDrawSelection(true);\n\n          _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.polygonFillColor);\n\n          _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.polygonStrokeColor);\n\n          _this.handleShapeTool(elementId + '_shape_pentagon');\n\n          break;\n      } // this.pdfViewer.clearSelection();\n\n    };\n\n    this.pdfViewer = viewer;\n    this.pdfViewerBase = viewerBase;\n    this.primaryToolbar = toolbar;\n  }\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.initializeAnnotationToolbar = function () {\n    var _this = this; // eslint-disable-next-line max-len\n\n\n    this.toolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_annotation_toolbar',\n      className: 'e-pv-annotation-toolbar'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n    this.toolbar = new Tool({\n      width: '',\n      height: '',\n      overflowMode: 'Popup',\n      cssClass: 'e-pv-toolbar-scroll',\n      items: this.createToolbarItems(),\n      clicked: this.onToolbarClicked.bind(this),\n      created: function () {\n        _this.createDropDowns();\n      }\n    });\n    this.toolbar.isStringTemplate = true;\n\n    if (this.pdfViewer.enableRtl) {\n      this.toolbar.enableRtl = true;\n    }\n\n    this.toolbar.appendTo(this.toolbarElement);\n    this.afterToolbarCreation();\n    this.createStampContainer();\n    this.createSignContainer();\n    this.applyAnnotationToolbarSettings();\n    this.updateToolbarItems();\n    this.showAnnotationToolbar(null, true);\n  };\n\n  AnnotationToolbar.prototype.createMobileAnnotationToolbar = function (isEnable, isPath) {\n    var _this = this;\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      if (this.toolbarElement == null && isEnable) {\n        this.isMobileAnnotEnabled = true; // eslint-disable-next-line max-len\n\n        this.toolbarElement = createElement('div', {\n          id: this.pdfViewer.element.id + '_annotation_toolbar',\n          className: 'e-pv-annotation-toolbar'\n        });\n        this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n        this.toolbar = new Tool({\n          width: '',\n          height: '',\n          overflowMode: 'Popup',\n          items: this.createMobileToolbarItems(isPath),\n          clicked: this.onToolbarClicked.bind(this),\n          created: function () {\n            _this.createDropDowns(isPath);\n          }\n        });\n        this.toolbar.isStringTemplate = true;\n\n        if (this.pdfViewer.enableRtl) {\n          this.toolbar.enableRtl = true;\n        }\n\n        this.pdfViewerBase.navigationPane.goBackToToolbar();\n        this.pdfViewer.toolbarModule.showToolbar(false);\n        this.toolbar.appendTo(this.toolbarElement);\n        this.deleteItem = this.pdfViewerBase.getElement('_annotation_delete');\n        this.deleteItem.firstElementChild.id = this.pdfViewer.element.id + '_annotation_delete';\n      } else if (this.toolbarElement != null) {\n        if (isEnable) {\n          this.isMobileAnnotEnabled = true;\n          this.pdfViewerBase.navigationPane.goBackToToolbar();\n          this.pdfViewer.toolbarModule.showToolbar(false);\n          this.toolbarElement.style.display = 'block';\n        } else if (!isEnable) {\n          this.isMobileAnnotEnabled = false;\n          this.pdfViewer.toolbarModule.showToolbar(true);\n          this.hideMobileAnnotationToolbar();\n        }\n      }\n    } else {\n      this.isMobileAnnotEnabled = true;\n    }\n  };\n\n  AnnotationToolbar.prototype.hideMobileAnnotationToolbar = function () {\n    if (this.toolbarElement != null) {\n      if (this.pdfViewer.selectedItems.annotations.length > 0 || this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        if (this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n          this.propertyToolbar.element.style.display = 'block';\n          this.toolbarCreated = true;\n        }\n      } else {\n        if (this.toolbar.element.children.length > 0) {\n          this.toolbarCreated = true;\n        } else {\n          this.toolbarCreated = false;\n        }\n\n        if (this.propertyToolbar && this.propertyToolbar.element.style.display !== 'none') {\n          this.propertyToolbar.element.style.display = 'none';\n\n          if (!this.toolbarCreated) {\n            var editIcon = document.getElementById(this.pdfViewer.element.id + '_annotationIcon');\n\n            if (editIcon && editIcon.parentElement.classList.contains('e-pv-select')) {\n              this.createAnnotationToolbarForMobile();\n            }\n          }\n        }\n      }\n\n      if (this.toolbarElement.children.length > 0) {\n        this.toolbarElement.style.display = 'block';\n      }\n\n      this.adjustMobileViewer();\n    } else if (this.toolbarCreated && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n      this.propertyToolbar.element.style.display = 'none';\n      this.adjustMobileViewer();\n      this.toolbarCreated = false;\n    }\n  };\n\n  AnnotationToolbar.prototype.FreeTextForMobile = function () {\n    var _this = this;\n\n    this.hideExistingTool(); // eslint-disable-next-line max-len\n\n    this.freetextToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_freeTextToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.freetextToolbarElement); // eslint-disable-next-line max-len\n\n    var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container'); // eslint-disable-next-line max-len\n\n    var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    var fontFamilyTemplate = this.getTemplate('input', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n    var fontSizeTemplate = this.getTemplate('input', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n    var textColorTemplate = this.getTemplate('span', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n    var alignmentTemplate = this.getTemplate('span', '_annotation_textalign', 'e-pv-annotation-textalign-container'); // eslint-disable-next-line max-len\n\n    var textPropertiesTemplate = this.getTemplate('span', '_annotation_textproperties', 'e-pv-annotation-textprop-container'); // eslint:disable-next-line\n\n    var items;\n    items = [// eslint-disable-next-line max-len\n    {\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    }, {\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-hightlight-separator-container'\n    }, {\n      template: fontFamilyTemplate\n    }, {\n      template: fontSizeTemplate\n    }, {\n      template: textColorTemplate\n    }, {\n      template: alignmentTemplate\n    }, {\n      template: textPropertiesTemplate\n    }, {\n      template: colorTemplate\n    }, {\n      template: strokeTemplate\n    }, {\n      template: thicknessTemplate\n    }, {\n      template: opacityTemplate\n    }];\n    this.toolbar = new Tool({\n      items: items,\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      created: function () {\n        // eslint-disable-next-line max-len\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(_this.pdfViewer.element.id + '_annotation_freeTextEdit');\n      }\n    });\n    this.toolbar.appendTo(this.freetextToolbarElement);\n    this.showFreeTextPropertiesTool();\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.createPropertyTools = function (shapeType) {\n    var _this = this;\n\n    if (shapeType !== \"\") {\n      if (this.propertyToolbar) {\n        this.propertyToolbar.destroy();\n      }\n\n      if (this.toolbar) {\n        this.toolbar.destroy();\n      } // eslint-disable-next-line max-len\n\n\n      var shapeToolbarElement = void 0;\n      shapeToolbarElement = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n\n      if (shapeToolbarElement) {\n        shapeToolbarElement.parentElement.removeChild(shapeToolbarElement);\n      } // eslint-disable-next-line max-len\n\n\n      shapeToolbarElement = createElement('div', {\n        id: this.pdfViewer.element.id + '_propertyToolbar',\n        className: 'e-pv-mobile-annotation-toolbar',\n        styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n      });\n      this.pdfViewerBase.viewerMainContainer.appendChild(shapeToolbarElement);\n      var id_1;\n      var propertyToolbar = new Tool({\n        // eslint-disable-next-line max-len\n        items: this.createPropertyToolbarForMobile(shapeType),\n        width: '',\n        height: '',\n        overflowMode: 'Scrollable',\n        created: function () {\n          if (_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            id_1 = _this.pdfViewer.element.id + '_underlineIcon';\n          } else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n            id_1 = _this.pdfViewer.element.id + '_annotation_freeTextEdit'; // eslint-disable-next-line max-len\n          } else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image') {\n            id_1 = _this.pdfViewer.element.id + '_annotation_stamp'; // eslint-disable-next-line max-len\n          } else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText') {\n            id_1 = _this.pdfViewer.element.id + '_annotation_handwrittenSign';\n          } else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage') {\n            id_1 = _this.pdfViewer.element.id + '_annotation_handwrittenImage';\n          } else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Path') {\n            id_1 = _this.pdfViewer.element.id + '_annotation_inkIcon';\n          } else if (shapeType === 'Highlight' || shapeType === 'Underline' || shapeType === 'Strikethrough') {\n            id_1 = _this.pdfViewer.element.id + '_highlightIcon';\n          } else {\n            id_1 = _this.pdfViewer.element.id + '_annotation_shapesIcon';\n          }\n\n          _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(id_1);\n        }\n      });\n      propertyToolbar.isStringTemplate = true;\n      propertyToolbar.appendTo(shapeToolbarElement);\n\n      if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n          this.toolbar.enableItems(this.colorDropDownElement.parentElement, false);\n        }\n\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature') {\n          var commentIcon = document.getElementById(this.pdfViewer.element.id + '_annotation_commentPanel');\n          this.toolbar.enableItems(commentIcon.parentElement, false);\n        }\n      }\n\n      this.showPropertyTool(propertyToolbar, id_1);\n    }\n  };\n\n  AnnotationToolbar.prototype.showPropertyTool = function (existingTool, id) {\n    if (this.toolbar) {\n      this.toolbar.destroy();\n    }\n\n    this.propertyToolbar = existingTool;\n    this.applyProperiesToolSettings(id); //this.propertyToolbar.element.style.display = 'block';\n\n    if (this.pdfViewer.selectedItems.annotations[0]) {\n      // eslint:disable-next-line\n      var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0]; // eslint-disable-next-line max-len\n\n      if (selectedAnnotation.shapeAnnotationType !== 'SignatureText' && selectedAnnotation.shapeAnnotationType !== 'HandWrittenSignature' && selectedAnnotation.shapeAnnotationType !== 'Stamp' && selectedAnnotation.shapeAnnotationType !== 'Image' && selectedAnnotation.shapeAnnotationType !== 'Ink' && selectedAnnotation.shapeAnnotationType !== 'Path' && selectedAnnotation.shapeAnnotationType !== 'StickyNotes') {\n        this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.selectedItems.annotations[0].fillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.selectedItems.annotations[0].strokeColor);\n\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n          // eslint:disable-next-line\n          var fontFamily = this.fontFamilyElement;\n          fontFamily.ej2_instances[0].value = this.pdfViewer.selectedItems.annotations[0].fontFamily; // eslint:disable-next-line\n\n          var fontColor = this.fontColorElement;\n          fontColor.children[0].style.borderBottomColor = this.pdfViewer.selectedItems.annotations[0].fontColor;\n          this.pdfViewer.annotation.modifyTextAlignment(this.pdfViewer.selectedItems.annotations[0].textAlign);\n          this.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n        }\n      } else {\n        if (this.strokeDropDownElement) {\n          this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.selectedItems.annotations[0].strokeColor);\n        }\n      }\n    }\n\n    this.toolbarCreated = true;\n    this.adjustMobileViewer();\n  };\n\n  AnnotationToolbar.prototype.stampToolMobileForMobile = function (args) {\n    var _this = this;\n\n    this.hideExistingTool();\n\n    if (this.stampToolbarElement) {\n      this.stampToolbarElement.parentElement.removeChild(this.stampToolbarElement);\n    } // eslint-disable-next-line max-len\n\n\n    this.stampToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_stampToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.stampToolbarElement); // eslint-disable-next-line max-len\n\n    this.toolbar = new Tool({\n      items: this.createStampToolbarItemsForMobile(),\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      clicked: this.onShapeToolbarClicked.bind(this),\n      created: function () {\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args);\n      }\n    });\n    this.toolbar.isStringTemplate = true;\n    this.toolbar.appendTo(this.stampToolbarElement);\n    this.showStampPropertiesTool(); //this.afterShapeToolbarCreationForMobile();\n  };\n\n  AnnotationToolbar.prototype.shapeToolMobile = function (args) {\n    var _this = this;\n\n    this.hideExistingTool();\n\n    if (this.shapeToolbarElement) {\n      this.shapeToolbarElement.parentElement.removeChild(this.shapeToolbarElement);\n    } // eslint-disable-next-line max-len\n\n\n    this.shapeToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_shapeToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.shapeToolbarElement); // eslint-disable-next-line max-len\n\n    this.toolbar = new Tool({\n      items: this.createShapeToolbarItemsForMobile(),\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      clicked: this.onShapeToolbarClicked.bind(this),\n      created: function () {\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n      }\n    });\n    this.toolbar.isStringTemplate = true;\n    this.toolbar.appendTo(this.shapeToolbarElement);\n    this.afterShapeToolbarCreationForMobile();\n    this.showShapeTool();\n  };\n\n  AnnotationToolbar.prototype.calibrateToolMobile = function (args) {\n    var _this = this;\n\n    this.hideExistingTool();\n\n    if (this.calibrateToolbarElement) {\n      this.calibrateToolbarElement.parentElement.removeChild(this.calibrateToolbarElement);\n    } // eslint-disable-next-line max-len\n\n\n    this.calibrateToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_calibrateToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.calibrateToolbarElement); // eslint-disable-next-line max-len\n\n    this.toolbar = new Tool({\n      items: this.createCalibrateToolbarItemsForMobile(),\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      clicked: this.onCalibrateToolbarClicked.bind(this),\n      created: function () {\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n      }\n    });\n    this.toolbar.isStringTemplate = true;\n    this.toolbar.appendTo(this.calibrateToolbarElement);\n    this.afterCalibrateToolbarCreationForMobile();\n    this.showShapeTool();\n  };\n\n  AnnotationToolbar.prototype.textMarkupForMobile = function (args) {\n    var _this = this;\n\n    this.hideExistingTool();\n\n    if (this.textMarkupToolbarElement) {\n      this.textMarkupToolbarElement.parentElement.removeChild(this.textMarkupToolbarElement);\n    } // eslint-disable-next-line max-len\n\n\n    this.textMarkupToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_mobileAnnotationToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.textMarkupToolbarElement); // eslint-disable-next-line max-len\n\n    var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container'); // eslint:disable-next-line\n\n    var items;\n    items = [// eslint-disable-next-line max-len\n    {\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    }, {\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-hightlight-separator-container'\n    }, {\n      template: colorTemplate,\n      align: 'left'\n    }, {\n      template: opacityTemplate,\n      align: 'left'\n    }];\n    this.propertyToolbar = new Tool({\n      items: items,\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      created: function () {\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n      }\n    });\n    this.propertyToolbar.isStringTemplate = true;\n    this.propertyToolbar.appendTo(this.textMarkupToolbarElement);\n    this.showTextMarkupPropertiesTool();\n  };\n\n  AnnotationToolbar.prototype.showShapeTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n        this.showColorEditTool(true, 7, 7);\n      } else {\n        this.showColorEditTool(false, 7, 7);\n      }\n\n      if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n        this.showStrokeColorEditTool(true, 8, 8);\n      } else {\n        this.showStrokeColorEditTool(false, 8, 8);\n      }\n\n      if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n        this.showThicknessEditTool(true, 9, 9);\n      } else {\n        this.showThicknessEditTool(false, 9, 9);\n      }\n\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 10, 10);\n      } else {\n        this.showOpacityEditTool(false, 10, 10);\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.signatureInkForMobile = function () {\n    var _this = this;\n\n    this.hideExistingTool();\n\n    if (this.signatureInkToolbarElement) {\n      this.signatureInkToolbarElement.parentElement.removeChild(this.signatureInkToolbarElement);\n    } // eslint-disable-next-line max-len\n\n\n    this.signatureInkToolbarElement = createElement('div', {\n      id: this.pdfViewer.element.id + '_mobileAnnotationToolbar',\n      className: 'e-pv-mobile-annotation-toolbar',\n      styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n    });\n    this.pdfViewerBase.viewerMainContainer.appendChild(this.signatureInkToolbarElement);\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container'); // eslint-disable-next-line max-len\n\n    var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container'); // eslint:disable-next-line\n\n    var items;\n    items = [// eslint-disable-next-line max-len\n    {\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    }, {\n      template: opacityTemplate,\n      align: 'left'\n    }, {\n      template: strokeTemplate,\n      aign: 'left'\n    }, {\n      template: thicknessTemplate,\n      align: 'left'\n    }];\n    this.toolbar = new Tool({\n      items: items,\n      width: '',\n      height: '',\n      overflowMode: 'Scrollable',\n      created: function () {\n        _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(_this.pdfViewer.element.id + '_annotation_inkIcon');\n      }\n    });\n    this.toolbar.isStringTemplate = true;\n    this.toolbar.appendTo(this.signatureInkToolbarElement);\n  };\n\n  AnnotationToolbar.prototype.hideExistingTool = function () {\n    if (this.toolbar && !this.pdfViewer.enableDesktopMode) {\n      this.toolbar.destroy();\n    }\n\n    if (this.propertyToolbar && !this.pdfViewer.enableDesktopMode) {\n      this.propertyToolbar.destroy();\n    }\n\n    var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_mobileAnnotationToolbar');\n\n    if (mobileAnnotationToolbar) {\n      mobileAnnotationToolbar.style.display = 'none';\n    }\n  };\n\n  AnnotationToolbar.prototype.applyProperiesToolSettings = function (type) {\n    switch (type) {\n      case this.pdfViewer.element.id + '_highlightIcon':\n        this.showTextMarkupPropertiesTool();\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_freeTextEdit':\n        this.showFreeTextPropertiesTool();\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_shapesIcon':\n        this.shapePropertiesTool();\n        break;\n\n      case 'stampTool':\n      case this.pdfViewer.element.id + '_annotation_stamp':\n        this.showStampPropertiesTool();\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_handwrittenSign':\n      case this.pdfViewer.element.id + '_annotation_inkIcon':\n        this.showInkPropertiesTool();\n        break;\n    }\n  };\n\n  AnnotationToolbar.prototype.showFreeTextPropertiesTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('FontFamilyAnnotationTool') !== -1) {\n        this.showFontFamilyAnnotationTool(true, 2, 2);\n      } else {\n        this.showFontFamilyAnnotationTool(false, 2, 2);\n      }\n\n      if (annotationToolbarItems.indexOf('FontSizeAnnotationTool') !== -1) {\n        this.showFontSizeAnnotationTool(true, 3, 3);\n      } else {\n        this.showFontSizeAnnotationTool(false, 3, 3);\n      }\n\n      if (annotationToolbarItems.indexOf('FontColorAnnotationTool') !== -1) {\n        this.showFontColorAnnotationTool(true, 4, 4);\n      } else {\n        this.showFontColorAnnotationTool(false, 4, 4);\n      }\n\n      if (annotationToolbarItems.indexOf('FontAlignAnnotationTool') !== -1) {\n        this.showFontAlignAnnotationTool(true, 5, 5);\n      } else {\n        this.showFontAlignAnnotationTool(false, 5, 5);\n      }\n\n      if (annotationToolbarItems.indexOf('FontStylesAnnotationTool') !== -1) {\n        this.showFontStylesAnnotationTool(true, 6, 6);\n      } else {\n        this.showFontStylesAnnotationTool(false, 6, 6);\n      }\n\n      if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n        this.showColorEditTool(true, 7, 7);\n      } else {\n        this.showColorEditTool(false, 7, 7);\n      }\n\n      if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n        this.showStrokeColorEditTool(true, 8, 8);\n      } else {\n        this.showStrokeColorEditTool(false, 8, 8);\n      }\n\n      if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n        this.showThicknessEditTool(true, 9, 9);\n      } else {\n        this.showThicknessEditTool(false, 9, 9);\n      }\n\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 10, 10);\n      } else {\n        this.showOpacityEditTool(false, 10, 10);\n      }\n\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 11, 11);\n      } else {\n        this.showCommentPanelTool(false, 11, 11);\n      }\n\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 12, 12);\n      } else {\n        this.showAnnotationDeleteTool(false, 12, 12);\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.shapePropertiesTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n        this.showColorEditTool(true, 2, 2);\n      } else {\n        this.showColorEditTool(false, 2, 2);\n      }\n\n      if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n        this.showStrokeColorEditTool(true, 3, 3);\n      } else {\n        this.showStrokeColorEditTool(false, 3, 3);\n      }\n\n      if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n        this.showThicknessEditTool(true, 4, 4);\n      } else {\n        this.showThicknessEditTool(false, 4, 4);\n      }\n\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 5, 5);\n      } else {\n        this.showOpacityEditTool(false, 5, 5);\n      }\n\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 6, 6);\n      } else {\n        this.showCommentPanelTool(false, 6, 6);\n      }\n\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 7, 7);\n      } else {\n        this.showAnnotationDeleteTool(false, 7, 7);\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.showStampPropertiesTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 2, 2);\n      } else {\n        this.showOpacityEditTool(false, 2, 2);\n      }\n\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 3, 3);\n      } else {\n        this.showCommentPanelTool(false, 3, 3);\n      }\n\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 4, 4);\n      } else {\n        this.showAnnotationDeleteTool(false, 4, 4);\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.showTextMarkupPropertiesTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n        this.showColorEditTool(true, 2, 2);\n      } else {\n        this.showColorEditTool(false, 2, 2);\n      }\n\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 3, 3);\n      } else {\n        this.showOpacityEditTool(false, 3, 3);\n      }\n\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 4, 4);\n      } else {\n        this.showCommentPanelTool(false, 4, 4);\n      }\n\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 5, 5);\n      } else {\n        this.showAnnotationDeleteTool(false, 5, 5);\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.showInkPropertiesTool = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n        this.showStrokeColorEditTool(true, 2, 2);\n      } else {\n        this.showStrokeColorEditTool(false, 2, 2);\n      }\n\n      if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n        this.showThicknessEditTool(true, 3, 3);\n      } else {\n        this.showThicknessEditTool(false, 3, 3);\n      }\n\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 4, 4);\n      } else {\n        this.showOpacityEditTool(false, 4, 4);\n      }\n\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 5, 5);\n      } else {\n        this.showCommentPanelTool(false, 5, 5);\n      }\n\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 6, 6);\n      } else {\n        this.showAnnotationDeleteTool(false, 6, 6);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint:disable-next-line\n\n\n  AnnotationToolbar.prototype.createAnnotationToolbarForMobile = function (id) {\n    var hideToolbar;\n\n    if (id) {\n      var editIcon = document.getElementById(id);\n\n      if (editIcon.parentElement.classList.contains('e-pv-select')) {\n        hideToolbar = true;\n        editIcon.parentElement.classList.remove('e-pv-select');\n      } else {\n        hideToolbar = false;\n        this.pdfViewer.toolbarModule.selectItem(editIcon.parentElement);\n      }\n    }\n\n    if (hideToolbar) {\n      this.toolbarCreated = false;\n      this.adjustMobileViewer();\n\n      if (this.toolbar) {\n        this.toolbar.destroy();\n      }\n\n      if (this.propertyToolbar) {\n        this.propertyToolbar.destroy();\n      }\n\n      var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_mobileAnnotationToolbar');\n\n      if (mobileAnnotationToolbar) {\n        mobileAnnotationToolbar.style.display = 'none';\n      }\n\n      return [];\n    } else {\n      this.isToolbarCreated = true;\n\n      if (this.propertyToolbar) {\n        this.propertyToolbar.destroy();\n      }\n\n      if (this.toolbarElement) {\n        this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n      } // eslint-disable-next-line max-len\n\n\n      this.toolbarElement = createElement('div', {\n        id: this.pdfViewer.element.id + '_mobileAnnotationToolbar',\n        className: 'e-pv-mobile-annotation-toolbar',\n        styles: 'bottom: 0px; position: absolute; width: 100%; float: left;'\n      }); //this.toolbarElement.append(this.pdfViewerBase.viewerContainer);\n\n      this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n      var stampTemplate = this.getTemplate('span', '_annotation_stamp', 'e-pv-annotation-stamp-container');\n      var signTemplate = this.getTemplate('span', '_annotation_signature', 'e-pv-annotation-handwritten-container'); // eslint:disable-next-line\n\n      var items = void 0;\n      items = [// eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-comment-icon e-pv-icon',\n        className: 'e-pv-comment-container',\n        id: this.pdfViewer.element.id + '_comment'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      }, // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-highlight-icon e-pv-icon',\n        className: 'e-pv-highlight-container',\n        id: this.pdfViewer.element.id + '_highlight'\n      }, // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-underline-icon e-pv-icon',\n        className: 'e-pv-underline-container',\n        id: this.pdfViewer.element.id + '_underline'\n      }, // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-strikethrough-icon e-pv-icon',\n        className: 'e-pv-strikethrough-container',\n        id: this.pdfViewer.element.id + '_strikethrough'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      }, // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-annotation-shape-icon e-pv-icon',\n        className: 'e-pv-annotation-shapes-container',\n        id: this.pdfViewer.element.id + '_annotation_shapes'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      }, // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-annotation-calibrate-icon e-pv-icon',\n        className: 'e-pv-annotation-calibrate-container',\n        id: this.pdfViewer.element.id + '_annotation_calibrate'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      }, // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-freetext-icon e-pv-icon',\n        className: 'e-pv-annotation-freetextedit-container',\n        id: this.pdfViewer.element.id + '_annotation_freeTextEdit'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      }, {\n        template: stampTemplate\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      }, {\n        template: signTemplate,\n        align: 'Left'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      }, // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-inkannotation-icon e-pv-icon',\n        className: 'e-pv-annotation-ink-container',\n        id: this.pdfViewer.element.id + '_annotation_ink',\n        align: 'Left'\n      }, {\n        type: 'Separator',\n        align: 'Left'\n      }, // eslint-disable-next-line max-len\n      {\n        prefixIcon: 'e-pv-comment-panel-icon e-pv-icon',\n        className: 'e-pv-comment-panel-icon-container',\n        id: this.pdfViewer.element.id + '_annotation_commentPanel',\n        align: 'Right'\n      }];\n\n      if (this.toolbarCreated && this.toolbar) {\n        this.toolbar.destroy();\n        this.toolbarCreated = false;\n        this.adjustMobileViewer();\n      } else {\n        // eslint-disable-next-line max-len\n        this.toolbar = new Tool({\n          items: items,\n          width: '',\n          height: '',\n          overflowMode: 'Scrollable',\n          clicked: this.onToolbarClicked.bind(this)\n        });\n\n        if (this.pdfViewer.enableRtl) {\n          this.toolbar.enableRtl = true;\n        }\n\n        this.toolbar.isStringTemplate = true;\n        this.toolbar.appendTo(this.toolbarElement);\n        this.afterMobileToolbarCreation();\n        this.createStampContainer();\n        this.createSignContainer();\n        this.applyMobileAnnotationToolbarSettings();\n        this.toolbarCreated = true;\n        this.adjustMobileViewer();\n      }\n\n      return items;\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.adjustMobileViewer = function () {\n    var toolbarHeight;\n\n    if (this.toolbarElement) {\n      toolbarHeight = this.toolbarElement.clientHeight;\n    }\n\n    var isPrimaryTool = false;\n\n    if (this.toolbarElement && this.toolbarElement.children.length === 0 && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n      toolbarHeight = this.propertyToolbar.element.clientHeight;\n\n      if (this.pdfViewer.toolbarModule.toolbarElement.style.display === 'none') {\n        this.pdfViewer.toolbarModule.toolbarElement.style.display = 'block';\n      }\n    } else if (this.freetextToolbarElement && this.freetextToolbarElement.children.length > 0) {\n      toolbarHeight = this.freetextToolbarElement.clientHeight;\n    } else if (toolbarHeight === 0 && this.pdfViewer.toolbarModule.toolbar) {\n      toolbarHeight = this.pdfViewer.toolbarModule.toolbarElement.clientHeight;\n      isPrimaryTool = true;\n    } else if (!toolbarHeight && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n      toolbarHeight = this.propertyToolbar.element.clientHeight;\n    }\n\n    if (this.pdfViewer.enableToolbar && this.toolbarCreated) {\n      // eslint-disable-next-line max-len\n      this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), toolbarHeight + toolbarHeight) + 'px';\n    } else {\n      if (!isPrimaryTool) {\n        if (this.pdfViewerBase.viewerContainer.style.height.split('%').length > 1) {\n          this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), -toolbarHeight) + 'px';\n        } else {\n          this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), toolbarHeight) + 'px';\n        }\n      }\n    }\n  };\n  /**\n   * Shows /hides the toolbar in the PdfViewer\n   * @param  {boolean} enableToolbar - If set true , its show the Toolbar\n   * @returns void\n   */\n\n\n  AnnotationToolbar.prototype.showToolbar = function (enable) {\n    var toolbar = this.toolbarElement;\n\n    if (enable) {\n      toolbar.style.display = 'block';\n\n      if (Browser.isDevice && this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n        this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n      }\n    } else {\n      toolbar.style.display = 'none';\n    }\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.createMobileToolbarItems = function (isPath) {\n    var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container'); // eslint-disable-next-line\n\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    }); // eslint-disable-next-line max-len\n\n    if (!isPath) {\n      items.push({\n        template: colorTemplate,\n        align: 'right'\n      });\n      items.push({\n        template: opacityTemplate,\n        align: 'right'\n      });\n      items.push({\n        type: 'Separator',\n        align: 'right'\n      });\n    } // eslint-disable-next-line max-len\n\n\n    items.push({\n      prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon',\n      className: 'e-pv-annotation-delete-container',\n      id: this.pdfViewer.element.id + '_annotation_delete',\n      align: 'right'\n    });\n    return items;\n  };\n\n  AnnotationToolbar.prototype.goBackToToolbar = function () {\n    this.isMobileAnnotEnabled = false;\n\n    if (this.toolbarElement.children.length > 0) {\n      this.toolbarElement.style.display = 'block';\n    } else {\n      this.toolbarCreated = false;\n      this.toolbar.destroy();\n      this.createAnnotationToolbarForMobile();\n    }\n\n    var page = this.pdfViewerBase.getSelectTextMarkupCurrentPage();\n\n    if (page) {\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);\n    }\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.createToolbarItems = function () {\n    var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n    var strokeTemplate = this.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    var shapesTemplate = this.getTemplate('span', '_annotation_shapes', 'e-pv-annotation-shapes-container');\n    var calibrateTemplate = this.getTemplate('span', '_annotation_calibrate', 'e-pv-annotation-calibrate-container');\n    var stampTemplate = this.getTemplate('span', '_annotation_stamp', 'e-pv-annotation-stamp-container');\n    var fontFamilyTemplate = this.getTemplate('input', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n    var fontSizeTemplate = this.getTemplate('input', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n    var textColorTemplate = this.getTemplate('span', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n    var alignmentTemplate = this.getTemplate('span', '_annotation_textalign', 'e-pv-annotation-textalign-container');\n    var textPropertiesTemplate = this.getTemplate('span', '_annotation_textproperties', 'e-pv-annotation-textprop-container');\n    var signTemplate = this.getTemplate('span', '_annotation_signature', 'e-pv-annotation-handwritten-container'); // eslint-disable-next-line\n\n    var items = []; // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-highlight-icon e-pv-icon',\n      className: 'e-pv-highlight-container',\n      id: this.pdfViewer.element.id + '_highlight',\n      align: 'Left'\n    });\n    items.push({\n      prefixIcon: 'e-pv-underline-icon e-pv-icon',\n      className: 'e-pv-underline-container',\n      id: this.pdfViewer.element.id + '_underline',\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-strikethrough-icon e-pv-icon',\n      className: 'e-pv-strikethrough-container',\n      id: this.pdfViewer.element.id + '_strikethrough',\n      align: 'Left'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-hightlight-separator-container'\n    });\n    items.push({\n      template: shapesTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-shape-template-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-shape-separator-container'\n    });\n    items.push({\n      template: calibrateTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-calibrate-template-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-calibrate-separator-container'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-freetext-icon e-pv-icon',\n      className: 'e-pv-annotation-freetextedit-container',\n      id: this.pdfViewer.element.id + '_annotation_freeTextEdit',\n      align: 'Left'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-freetext-separator-container'\n    });\n    items.push({\n      template: stampTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-stamp-template-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-stamp-separator-container'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      template: signTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-sign-template-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-sign-separator-container'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-inkannotation-icon e-pv-icon',\n      className: 'e-pv-annotation-ink-container',\n      id: this.pdfViewer.element.id + '_annotation_ink',\n      align: 'Left'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-ink-separator-container'\n    });\n    items.push({\n      template: fontFamilyTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-fontfamily-container'\n    });\n    items.push({\n      template: fontSizeTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-fontsize-container'\n    });\n    items.push({\n      template: textColorTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-text-color-container'\n    });\n    items.push({\n      template: alignmentTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-alignment-container'\n    });\n    items.push({\n      template: textPropertiesTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-text-properties-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-text-separator-container'\n    });\n    items.push({\n      template: colorTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-color-template-container'\n    });\n    items.push({\n      template: strokeTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-stroke-template-container'\n    });\n    items.push({\n      template: thicknessTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-thickness-template-container'\n    });\n    items.push({\n      template: opacityTemplate,\n      align: 'Left',\n      cssClass: 'e-pv-opacity-template-container'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left',\n      cssClass: 'e-pv-opacity-separator-container'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon',\n      className: 'e-pv-annotation-delete-container',\n      id: this.pdfViewer.element.id + '_annotation_delete',\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-comment-panel-icon e-pv-icon',\n      className: 'e-pv-comment-panel-icon-container',\n      id: this.pdfViewer.element.id + '_annotation_commentPanel',\n      align: 'Right'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-annotation-tools-close-icon e-pv-icon',\n      className: 'e-pv-annotation-tools-close-container',\n      id: this.pdfViewer.element.id + '_annotation_close',\n      align: 'Right'\n    });\n    return items;\n  };\n\n  AnnotationToolbar.prototype.createSignContainer = function () {\n    var _this = this;\n\n    this.handWrittenSignatureItem = this.pdfViewerBase.getElement('_annotation_signature'); // eslint-disable-next-line max-len\n\n    this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_annotation_signature'), this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText')); // eslint-disable-next-line\n\n    var proxy = this;\n    var items = [];\n\n    if (this.pdfViewer.handWrittenSignatureSettings.signatureItem.length === 0 || this.pdfViewer.handWrittenSignatureSettings.signatureItem.length == 2) {\n      items = [{\n        text: 'ADD SIGNATURE'\n      }, {\n        separator: true\n      }, {\n        text: 'ADD INITIAL'\n      }];\n    } else {\n      if (this.pdfViewer.handWrittenSignatureSettings.signatureItem[0] === 'Signature') {\n        items = [{\n          text: 'ADD SIGNATURE'\n        }];\n      } else {\n        items = [{\n          text: 'ADD INITIAL'\n        }];\n      }\n    }\n\n    var saveOptions = {\n      items: items,\n      iconCss: 'e-pv-handwritten-icon e-pv-icon',\n      cssClass: 'e-pv-handwritten-popup',\n      open: function (args) {\n        proxy.openSignature();\n      },\n      beforeItemRender: function (args) {\n        _this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber - 1);\n\n        if (args.element && args.element.className.indexOf(\"e-separator\") !== -1) {\n          args.element.style.margin = \"8px 0\";\n        }\n\n        if (args.item.text === 'ADD SIGNATURE') {\n          args.element.innerHTML = '';\n          _this.saveSignatureCount = 0;\n\n          for (var collection = _this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n            if (_this.saveSignatureCount < _this.pdfViewerBase.signatureModule.getSaveLimit(_this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)) {\n              args.element.style.display = 'block'; // eslint-disable-next-line\n\n              var signatureCollection = _this.pdfViewerBase.signatureModule.signaturecollection[collection - 1]; // eslint-disable-next-line\n\n              var collectionKey = signatureCollection.image[0].imageData;\n              var signatureID = signatureCollection.image[0].id.split('_')[1];\n\n              if (!signatureCollection.isInitial && collectionKey !== '') {\n                // eslint-disable-next-line max-len\n                var signatureContainer = createElement('div');\n                signatureContainer.id = 's' + signatureID;\n                signatureContainer.style.display = 'block';\n                signatureContainer.style.paddingBottom = '10px';\n                var signatureSpan = createElement('span');\n                signatureSpan.id = 'sign_border_' + signatureID;\n                signatureSpan.classList.add('e-pv-align-border');\n                var signatureImage = void 0;\n\n                if (signatureCollection.image[0].signatureType === 'SignatureText') {\n                  signatureImage = createElement('div');\n                  signatureImage.classList.add('e-pv-align-border-div');\n                  signatureImage.innerText = collectionKey;\n                  signatureImage.style.fontFamily = signatureCollection.image[0].fontFamily;\n                  signatureImage.style.fontSize = '15px';\n                  signatureImage.style.display = 'inline-flex';\n                  signatureImage.style.alignItems = 'center';\n                  signatureImage.style.position = 'relative';\n                  signatureImage.id = 'sign_' + signatureID;\n                  signatureImage.style.width = '80px';\n                  signatureImage.style.height = '53px';\n                  signatureImage.style.overflow = 'hidden';\n                  signatureImage.style.textOverflow = 'ellipsis';\n                  signatureImage.style.paddingLeft = '11px';\n                } else {\n                  signatureImage = createElement('img');\n                  signatureImage.id = 'sign_' + signatureID;\n                  signatureImage.src = collectionKey;\n                  signatureImage.width = 80;\n                  signatureImage.height = 32;\n                  signatureImage.classList.add('e-pv-signatureimage');\n                  signatureImage.style.paddingLeft = '20px';\n                  signatureImage.style.paddingRight = '18px';\n                  signatureImage.style.paddingTop = '12px';\n                  signatureImage.style.paddingBottom = '12px';\n                  signatureImage.style.boxSizing = 'content-box';\n                }\n\n                signatureImage.addEventListener('mouseover', _this.hoverSignatureImage.bind(_this));\n                signatureImage.addEventListener('mouseleave', _this.leaveSignatureImage.bind(_this));\n                var signatureDeleteSpan = createElement('span');\n                signatureDeleteSpan.id = 'delete_' + signatureID;\n                signatureDeleteSpan.classList.add('e-pv-delete');\n                signatureDeleteSpan.classList.add('e-pv-align');\n                signatureSpan.append(signatureImage);\n                signatureSpan.append(signatureDeleteSpan);\n                signatureContainer.append(signatureSpan);\n                args.element.appendChild(signatureContainer);\n                args.element.style.pointerEvents = 'auto';\n                args.element.style.background = 'none';\n                _this.pdfViewerBase.getElement('_annotation_signature-popup').style.width = '206px';\n                _this.saveSignatureCount++;\n              }\n            }\n          }\n\n          var addInitialSpan = createElement('button');\n          addInitialSpan.classList.add(\"e-control\", \"e-btn\", \"e-lib\", \"e-outline\", \"e-primary\");\n          addInitialSpan.textContent = _this.pdfViewer.localeObj.getConstant('HandwrittenSignatureDialogHeaderText');\n          _this.pdfViewer.locale === 'en-US' ? addInitialSpan.style.width = \"130px\" : addInitialSpan.style.width = \"auto\";\n          addInitialSpan.style.height = \"36px\";\n          addInitialSpan.addEventListener('click', _this.clickSignature.bind(_this));\n          args.element.appendChild(addInitialSpan);\n          args.element.addEventListener('mouseover', _this.hoverInitialBtn.bind(_this));\n          args.element.style.width = '206px';\n          args.element.style.display = 'flex';\n          args.element.style.flexDirection = 'column';\n          args.element.style.height = 'auto';\n          args.element.style.alignItems = 'center';\n        }\n\n        if (args.item.text === 'ADD INITIAL') {\n          _this.saveInitialCount = 0;\n          args.element.innerHTML = '';\n\n          for (var collection = _this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n            if (_this.saveInitialCount < _this.pdfViewerBase.signatureModule.getSaveLimit(_this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)) {\n              // eslint-disable-next-line\n              var signatureCollection = _this.pdfViewerBase.signatureModule.signaturecollection[collection - 1]; // eslint-disable-next-line\n\n              var collectionKey = signatureCollection.image[0].imageData;\n              var signatureID = signatureCollection.image[0].id.split('_')[1];\n\n              if (signatureCollection.isInitial && collectionKey !== '') {\n                var signatureContainer = createElement('div');\n                signatureContainer.id = 's' + signatureID;\n                signatureContainer.style.display = 'block';\n                signatureContainer.style.paddingBottom = '10px';\n                var signatureSpan = createElement('span');\n                signatureSpan.id = 'sign_border_' + signatureID;\n                signatureSpan.classList.add('e-pv-align-border');\n                var signatureImage = void 0;\n\n                if (signatureCollection.image[0].signatureType === 'SignatureText') {\n                  signatureImage = createElement('div');\n                  signatureImage.classList.add('e-pv-align-border-div');\n                  signatureImage.innerText = collectionKey;\n                  signatureImage.style.fontFamily = signatureCollection.image[0].fontFamily;\n                  signatureImage.style.fontSize = '15px';\n                  signatureImage.style.display = 'inline-flex';\n                  signatureImage.style.alignItems = 'center';\n                  signatureImage.style.position = 'relative';\n                  signatureImage.id = 'sign_' + signatureID;\n                  signatureImage.style.width = '80px';\n                  signatureImage.style.height = '53px';\n                  signatureImage.style.overflow = 'hidden';\n                  signatureImage.style.textOverflow = 'ellipsis';\n                  signatureImage.style.paddingLeft = '11px';\n                } else {\n                  signatureImage = createElement('img');\n                  signatureImage.id = 'sign_' + signatureID;\n                  signatureImage.src = collectionKey;\n                  signatureImage.width = 80;\n                  signatureImage.height = 32;\n                  signatureImage.classList.add('e-pv-signatureimage');\n                  signatureImage.style.paddingLeft = '20px';\n                  signatureImage.style.paddingRight = '18px';\n                  signatureImage.style.paddingTop = '12px';\n                  signatureImage.style.paddingBottom = '12px';\n                  signatureImage.style.boxSizing = 'content-box';\n                }\n\n                signatureImage.addEventListener('mouseover', _this.hoverSignatureImage.bind(_this));\n                signatureImage.addEventListener('mouseleave', _this.leaveSignatureImage.bind(_this));\n                signatureImage.width = 80;\n                signatureImage.height = 32;\n                var signatureDeleteSpan = createElement('span');\n                signatureDeleteSpan.id = 'delete_' + signatureID;\n                signatureDeleteSpan.classList.add('e-pv-delete');\n                signatureDeleteSpan.classList.add('e-pv-align');\n                signatureSpan.append(signatureImage);\n                signatureSpan.append(signatureDeleteSpan);\n                signatureContainer.append(signatureSpan);\n                args.element.appendChild(signatureContainer); // eslint-disable-next-line max-len\n\n                args.element.style.pointerEvents = 'auto';\n                args.element.style.background = 'none';\n                _this.pdfViewerBase.getElement('_annotation_signature-popup').style.width = '206px';\n                _this.saveInitialCount++;\n              }\n            }\n          }\n\n          _this.isSignatureIteam = false;\n          var addInitialSpan = createElement('button');\n          addInitialSpan.classList.add(\"e-control\", \"e-btn\", \"e-lib\", \"e-outline\", \"e-primary\");\n          addInitialSpan.textContent = _this.pdfViewer.localeObj.getConstant('HandwrittenInitialDialogHeaderText');\n          _this.pdfViewer.locale === 'en-US' ? addInitialSpan.style.width = \"130px\" : addInitialSpan.style.width = \"auto\";\n          addInitialSpan.style.height = \"36px\";\n          addInitialSpan.addEventListener('click', _this.clickInitial.bind(_this));\n          args.element.appendChild(addInitialSpan);\n          args.element.addEventListener('mouseover', _this.hoverInitialBtn.bind(_this));\n          args.element.style.width = '206px';\n          args.element.style.display = 'flex';\n          args.element.style.flexDirection = 'column';\n          args.element.style.height = 'auto';\n          args.element.style.alignItems = 'center';\n        }\n      },\n      select: function (args) {\n        _this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber - 1);\n      }\n    };\n    var drpDownBtn = new DropDownButton(saveOptions);\n\n    if (this.pdfViewer.enableRtl) {\n      drpDownBtn.enableRtl = this.pdfViewer.enableRtl;\n    }\n\n    drpDownBtn.appendTo(this.handWrittenSignatureItem);\n  };\n\n  AnnotationToolbar.prototype.updateSignatureCount = function () {\n    var count = 0;\n    this.openSignaturePopup = false; // eslint-disable-next-line\n\n    var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection;\n\n    for (var collection = 0; collection < signatureCollection.length; collection++) {\n      // eslint-disable-next-line\n      var colletionList = signatureCollection[collection];\n\n      if (colletionList.image[0].imageData === '') {\n        count++;\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.openSignature = function () {\n    this.saveInitialCount = 0;\n    this.saveSignatureCount = 0;\n\n    for (var collection = this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n      if (this.saveSignatureCount < this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)) {\n        // eslint-disable-next-line\n        var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n\n        if (signatureCollection.image[0].imageData !== '') {\n          if (!signatureCollection.isInitial) {\n            this.saveSignatureCount++; // eslint-disable-next-line\n\n            var addedSignature = document.getElementById('sign_border_' + signatureCollection.image[0].id.split('_')[1] + ''); // eslint-disable-next-line\n\n            var deleteSignature = document.getElementById('delete_' + signatureCollection.image[0].id.split('_')[1] + '');\n            deleteSignature.style.backgroundClip = 'content-box';\n            addedSignature.addEventListener('click', this.renderAddedSignature.bind(this));\n            deleteSignature.addEventListener('click', this.deleteSavedSign.bind(this));\n            deleteSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n            deleteSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n            addedSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n            addedSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n          }\n        }\n      }\n    }\n\n    for (var collection = this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n      if (this.saveInitialCount < this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)) {\n        // eslint-disable-next-line\n        var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n\n        if (signatureCollection.image[0].imageData !== '') {\n          if (signatureCollection.isInitial) {\n            this.saveInitialCount++; // eslint-disable-next-line\n\n            var addedSignature = document.getElementById('sign_border_' + signatureCollection.image[0].id.split('_')[1] + ''); // eslint-disable-next-line\n\n            var deleteSignature = document.getElementById('delete_' + signatureCollection.image[0].id.split('_')[1] + '');\n            deleteSignature.style.backgroundClip = 'content-box';\n            addedSignature.addEventListener('click', this.renderAddedSignature.bind(this));\n            deleteSignature.addEventListener('click', this.deleteSavedSign.bind(this));\n            deleteSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n            deleteSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n            addedSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n            addedSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n          }\n        }\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.hoverSignatureDelete = function () {\n    var eventTarget = event.target;\n\n    if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n      eventTarget.classList.add('e-pv-signaturehover');\n      eventTarget.style.cursor = 'pointer';\n    }\n  };\n\n  AnnotationToolbar.prototype.hoverInitialBtn = function (event) {\n    var eventTarget = event.target;\n    var currentFieldID = '';\n\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n      currentFieldID = eventTarget.id;\n    } else {\n      currentFieldID = isNullOrUndefined(event.path) ? event.composedPath()[0].id : event.path[0].id;\n    }\n\n    if (currentFieldID !== 'sign_' + currentFieldID.split(\"_\")[1] && currentFieldID !== 'delete_' + currentFieldID.split(\"_\")[1]) {\n      var liElement = document.getElementById(eventTarget.id);\n\n      if (isNullOrUndefined(liElement)) {\n        liElement = document.getElementById(eventTarget.parentElement.id);\n      }\n\n      if (liElement != null && (eventTarget.id !== 'sign_' + eventTarget.id.split('_')[1] || eventTarget.id !== 'sign_border_' + eventTarget.id.split('_')[2])) {\n        liElement.style.background = 'transparent';\n        liElement.style.cursor = 'default';\n      } else if (liElement.parentElement != null && (eventTarget.id !== 'sign_' + eventTarget.id.split('_')[1] || eventTarget.id !== 'sign_border_' + eventTarget.id.split('_')[2])) {\n        liElement.parentElement.style.background = 'transparent';\n        liElement.parentElement.style.cursor = 'default';\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.hoverSignatureImage = function () {\n    var eventTarget = event.target;\n\n    if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n      eventTarget.classList.add('e-pv-signaturehover');\n      eventTarget.classList.remove('e-pv-signatureimage');\n      eventTarget.style.cursor = 'pointer';\n    }\n  };\n\n  AnnotationToolbar.prototype.leaveSignatureDelete = function () {\n    var eventTarget = event.target;\n\n    if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n      eventTarget.classList.remove('e-pv-signaturehover');\n\n      if (eventTarget.children[0] && eventTarget.children[0].tagName === 'IMG') {\n        eventTarget.children[0].classList.remove('e-pv-signaturehover');\n      }\n\n      eventTarget.style.cursor = 'default';\n    }\n  };\n\n  AnnotationToolbar.prototype.clickSignature = function () {\n    this.pdfViewerBase.isInitialField = false;\n    this.addSignature();\n  };\n\n  AnnotationToolbar.prototype.clickInitial = function () {\n    this.pdfViewerBase.isInitialField = true;\n    this.addSignature();\n  };\n\n  AnnotationToolbar.prototype.leaveSignatureImage = function () {\n    var eventTarget = event.target;\n\n    if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n      eventTarget.classList.remove('e-pv-signaturehover');\n      if (eventTarget.tagName === 'IMG') eventTarget.classList.add('e-pv-signatureimage');\n\n      if (eventTarget.children[0] && eventTarget.children[0].tagName === 'IMG') {\n        eventTarget.children[0].classList.remove('e-pv-signaturehover');\n        eventTarget.children[0].classList.add('e-pv-signatureimage');\n      }\n\n      eventTarget.style.cursor = 'default';\n    }\n  };\n\n  AnnotationToolbar.prototype.addSignature = function () {\n    this.deselectAllItems();\n    this.showSignaturepanel();\n  };\n\n  AnnotationToolbar.prototype.renderAddedSignature = function () {\n    this.pdfViewerBase.isAddedSignClicked = true;\n    this.isSavedSignatureClicked = true;\n    this.pdfViewerBase.signatureModule.RenderSavedSignature();\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.deleteSavedSign = function (event) {\n    event.stopPropagation(); // eslint-disable-next-line\n\n    var signaturecollection = this.pdfViewerBase.signatureModule.signaturecollection;\n\n    for (var collection = signaturecollection.length; collection > 0; collection--) {\n      if (event.target.parentElement.children[0].id === 'sign_' + signaturecollection[collection - 1].image[0].id.split('_')[1]) {\n        // eslint-disable-next-line\n        var RemoveSignature = signaturecollection[collection - 1];\n        RemoveSignature.image[0].imageData = '';\n        this.pdfViewerBase.signatureModule.signaturecollection.splice(collection - 1, 1);\n        break;\n      }\n    }\n\n    event.target.parentElement.remove();\n  };\n\n  AnnotationToolbar.prototype.getTemplate = function (elementName, id, className) {\n    var element = createElement(elementName, {\n      id: this.pdfViewer.element.id + id\n    });\n\n    if (className) {\n      element.className = className;\n    }\n\n    return element.outerHTML;\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.createStampContainer = function () {\n    var _this = this;\n\n    this.stampElement = this.pdfViewerBase.getElement('_annotation_stamp'); // eslint-disable-next-line max-len\n\n    this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_annotation_stamp'), this.pdfViewer.localeObj.getConstant('Add Stamp'));\n    var contextMenuElement = createElement('ul', {\n      id: this.pdfViewer.element.id + 'contextMenuElement'\n    });\n    this.pdfViewerBase.getElement('_annotation_stamp').appendChild(contextMenuElement);\n    var items = [];\n\n    if (this.pdfViewer.stampSettings.dynamicStamps && this.pdfViewer.stampSettings.dynamicStamps.length > 0) {\n      var dynamicStamps_1 = [];\n      items.push({\n        text: this.pdfViewer.localeObj.getConstant('Dynamic'),\n        label: 'Dynamic',\n        items: dynamicStamps_1\n      });\n      this.pdfViewer.stampSettings.dynamicStamps.forEach(function (stampItem, index) {\n        var name = DynamicStampItem[stampItem];\n\n        switch (name) {\n          case 'NotApproved':\n            name = 'Not Approved';\n            break;\n        }\n\n        dynamicStamps_1.push({\n          text: _this.pdfViewer.localeObj.getConstant(name),\n          label: name\n        });\n      });\n    }\n\n    if (this.pdfViewer.stampSettings.signStamps && this.pdfViewer.stampSettings.signStamps.length > 0) {\n      var signStamps_1 = [];\n      items.push({\n        text: this.pdfViewer.localeObj.getConstant('Sign Here'),\n        label: 'Sign Here',\n        items: signStamps_1\n      });\n      this.pdfViewer.stampSettings.signStamps.forEach(function (stampItem, index) {\n        var name = SignStampItem[stampItem];\n\n        switch (name) {\n          case 'InitialHere':\n            name = 'Initial Here';\n            break;\n\n          case 'SignHere':\n            name = 'Sign Here';\n            break;\n        }\n\n        signStamps_1.push({\n          text: _this.pdfViewer.localeObj.getConstant(name),\n          label: name\n        });\n      });\n    }\n\n    if (this.pdfViewer.stampSettings.standardBusinessStamps && this.pdfViewer.stampSettings.standardBusinessStamps.length > 0) {\n      var standardsBusinessStamps_1 = [];\n      items.push({\n        text: this.pdfViewer.localeObj.getConstant('Standard Business'),\n        label: 'Standard Business',\n        items: standardsBusinessStamps_1\n      });\n      this.pdfViewer.stampSettings.standardBusinessStamps.forEach(function (stampItem, index) {\n        var name = StandardBusinessStampItem[stampItem];\n\n        switch (name) {\n          case 'NotApproved':\n            name = 'Not Approved';\n            break;\n\n          case 'ForPublicRelease':\n            name = 'For Public Release';\n            break;\n\n          case 'NotForPublicRelease':\n            name = 'Not For Public Release';\n            break;\n\n          case 'ForComment':\n            name = 'For Comment';\n            break;\n\n          case 'PreliminaryResults':\n            name = 'Preliminary Results';\n            break;\n\n          case 'InformationOnly':\n            name = 'Information Only';\n            break;\n        }\n\n        standardsBusinessStamps_1.push({\n          text: _this.pdfViewer.localeObj.getConstant(name),\n          label: name\n        });\n      });\n    }\n\n    if (this.pdfViewer.customStampSettings.enableCustomStamp && !Browser.isDevice) {\n      if (items.length > 0) {\n        items.push({\n          separator: true\n        });\n      }\n\n      items.push({\n        text: this.pdfViewer.localeObj.getConstant('Custom Stamp'),\n        label: 'Custom Stamp',\n        items: []\n      });\n    }\n\n    this.stampMenu = [{\n      iconCss: 'e-pv-stamp-icon e-pv-icon',\n      items: items\n    }];\n    var menuOptions = {\n      items: this.stampMenu,\n      cssClass: 'e-custom-scroll',\n      showItemOnClick: true,\n      enableScrolling: true,\n      beforeOpen: function (args) {\n        _this.resetFreeTextAnnot();\n\n        if (args.parentItem.text === '' && _this.pdfViewer.customStampSettings.isAddToMenu && args.items.length > 0) {\n          // eslint-disable-next-line\n          var currentElements = null;\n\n          for (var i = 0; i < args.items.length; i++) {\n            if (args.items[i].text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n              args.items[i].items = [];\n              currentElements = args.items[i];\n              break;\n            }\n          } // eslint-disable-next-line\n\n\n          var elements = _this.pdfViewerBase.customStampCollection; // eslint-disable-next-line\n\n          var stampElements = _this.pdfViewer.customStampSettings.customStamps;\n\n          if (elements.length === 0 && stampElements && stampElements.length > 0) {\n            for (var n = 0; n < stampElements.length; n++) {\n              // eslint-disable-next-line max-len\n              elements.push({\n                customStampName: stampElements[n].customStampName,\n                customStampImageSource: stampElements[n].customStampImageSource\n              });\n            }\n          }\n\n          for (var m = 0; m < elements.length; m++) {\n            if (currentElements != null) {\n              currentElements.items.push({\n                text: elements[m].customStampName\n              });\n\n              for (var i = 0; i < args.items.length; i++) {\n                if (args.items[i].text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n                  var liElem = args.element.children[i];\n\n                  if (liElem && !liElem.childElementCount) {\n                    var span = document.createElement('span');\n                    span.className = 'e-icons e-caret e-menu-caret-icon';\n                    liElem.appendChild(span);\n                    liElem.setAttribute('aria-haspopup', 'true');\n                    liElem.setAttribute('aria-expanded', 'false');\n                  }\n                }\n              }\n            }\n          }\n        }\n\n        if (args.parentItem.text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n          // eslint-disable-next-line\n          var stampElements = _this.pdfViewer.customStampSettings.customStamps;\n\n          if (stampElements && stampElements.length > 10) {\n            closest(args.element, '.e-menu-wrapper').style.height = '350px';\n          }\n        }\n\n        _this.stampParentID = args.parentItem.text;\n        _this.menuItems.showItemOnClick = false;\n      },\n      beforeClose: function (args) {\n        // eslint-disable-next-line max-len\n        if (args.parentItem && args.parentItem.text !== _this.pdfViewer.localeObj.getConstant('Custom Stamp') && args.parentItem.text !== 'Standard Business' && args.parentItem.text !== 'Dynamic' && args.parentItem.text !== 'Sign Here' || !args.parentItem) {\n          _this.menuItems.showItemOnClick = true;\n        }\n      },\n      select: function (args) {\n        _this.pdfViewerBase.isAlreadyAdded = false;\n\n        if (args.item.text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n          _this.updateInteractionTools();\n\n          _this.checkStampAnnotations();\n\n          _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true; // eslint-disable-next-line\n\n          var stampImage = document.getElementById(_this.pdfViewer.element.id + '_stampElement');\n\n          if (stampImage) {\n            stampImage.click();\n          }\n\n          _this.pdfViewer.annotation.triggerAnnotationUnselectEvent(); // eslint-disable-next-line max-len\n\n        } else if (_this.stampParentID === _this.pdfViewer.localeObj.getConstant('Custom Stamp') && args.item.text !== '') {\n          // eslint-disable-next-line\n          var elements = _this.pdfViewerBase.customStampCollection;\n\n          for (var n = 0; n < elements.length; n++) {\n            if (elements[n].customStampName === args.item.text) {\n              _this.pdfViewer.annotationModule.stampAnnotationModule.customStampName = args.item.text;\n\n              _this.checkStampAnnotations();\n\n              _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n              _this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n              _this.pdfViewerBase.stampAdded = true;\n              _this.pdfViewerBase.isAlreadyAdded = true; // eslint-disable-next-line max-len\n\n              _this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(elements[n].customStampImageSource);\n\n              _this.pdfViewerBase.stampAdded = false;\n            }\n          } // eslint-disable-next-line max-len\n\n        } else if (args.item.text !== _this.pdfViewer.localeObj.getConstant('Dynamic') && args.item.text !== '' && args.item.text !== 'Standard Business' && (_this.stampParentID === 'Sign Here' || args.item.text !== 'Sign Here')) {\n          _this.updateInteractionTools();\n\n          _this.checkStampAnnotations();\n\n          _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n          _this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n          _this.pdfViewerBase.stampAdded = true;\n\n          _this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n\n          if (_this.stampParentID === _this.pdfViewer.localeObj.getConstant('Dynamic')) {\n            _this.pdfViewerBase.isDynamicStamp = true;\n\n            _this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(args.item.label);\n          } else {\n            _this.pdfViewerBase.isDynamicStamp = false;\n\n            _this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(args.item.label);\n          }\n\n          if (Browser.isDevice) {\n            _this.stampToolMobileForMobile(_this.pdfViewer.element.id + '_annotation_stamp');\n          }\n        }\n      }\n    };\n    this.menuItems = new Menu(menuOptions, '#' + this.pdfViewer.element.id + 'contextMenuElement');\n    contextMenuElement.parentElement.classList.add('e-pv-stamp');\n\n    if (this.pdfViewer.enableRtl) {\n      this.menuItems.enableRtl = true;\n    }\n\n    return contextMenuElement;\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.createCustomStampElement = function () {\n    // eslint-disable-next-line\n    var stampImage = createElement('input', {\n      id: this.pdfViewer.element.id + '_stampElement',\n      attrs: {\n        'type': 'file'\n      }\n    });\n    stampImage.setAttribute('accept', '.jpg,.jpeg,.png');\n    stampImage.style.position = 'absolute';\n    stampImage.style.left = '0px';\n    stampImage.style.top = '0px';\n    stampImage.style.visibility = 'hidden';\n    document.body.appendChild(stampImage);\n    stampImage.addEventListener('change', this.addStampImage);\n  };\n\n  AnnotationToolbar.prototype.checkStampAnnotations = function () {\n    // eslint-disable-next-line max-len\n    if (this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode && this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.annotations) {\n      for (var i = 0; i < this.pdfViewer.selectedItems.annotations.length; i++) {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[i]; // eslint-disable-next-line\n\n        if (annotation && !annotation.annotName && !annotation.author && (annotation.shapeAnnotationType !== 'Shape' || annotation.shapeAnnotationType !== 'Image')) {\n          this.pdfViewer.remove(annotation);\n          this.pdfViewer.annotation.renderAnnotations(annotation.pageIndex, null, null, null);\n          this.pdfViewer.clearSelection(annotation.pageIndex);\n        }\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.createDropDowns = function (isPath) {\n    var _this = this;\n\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.shapeElement = this.pdfViewerBase.getElement('_annotation_shapes');\n      var shapeToolbar = this.createShapeOptions(this.shapeElement.id, true); // eslint-disable-next-line max-len\n\n      this.shapeDropDown = this.createDropDownButton(this.shapeElement, 'e-pv-annotation-shape-icon', shapeToolbar.element, this.pdfViewer.localeObj.getConstant('Add Shapes'));\n      this.calibrateElement = this.pdfViewerBase.getElement('_annotation_calibrate');\n      var calibrateToolbar = this.createShapeOptions(this.calibrateElement.id, false); // eslint-disable-next-line max-len\n\n      this.calibrateDropDown = this.createDropDownButton(this.calibrateElement, 'e-pv-annotation-calibrate-icon', calibrateToolbar.element, this.pdfViewer.localeObj.getConstant('Calibrate'));\n    }\n\n    if (!isPath) {\n      this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n      this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n      this.colorPalette.change = this.onColorPickerChange.bind(this); // eslint-disable-next-line max-len\n\n      this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n      this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n      this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n      this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n    }\n\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.strokeDropDownElement = this.pdfViewerBase.getElement('_annotation_stroke');\n      this.strokeColorPicker = this.createColorPicker(this.strokeDropDownElement.id);\n      this.strokeColorPicker.change = this.onStrokePickerChange.bind(this); // eslint-disable-next-line max-len\n\n      this.strokeDropDown = this.createDropDownButton(this.strokeDropDownElement, 'e-pv-annotation-stroke-icon', this.strokeColorPicker.element.parentElement, this.pdfViewer.localeObj.getConstant('Stroke edit'));\n      this.strokeDropDown.beforeOpen = this.strokeDropDownBeforeOpen.bind(this);\n      this.strokeDropDown.open = this.strokeDropDownOpen.bind(this);\n      this.pdfViewerBase.getElement('_annotation_stroke-popup').addEventListener('click', this.onStrokePickerCancelClick.bind(this));\n      this.thicknessElement = this.pdfViewerBase.getElement('_annotation_thickness');\n      var thicknessContainer = this.createThicknessSlider(this.thicknessElement.id); // eslint-disable-next-line max-len\n\n      this.thicknessDropDown = this.createDropDownButton(this.thicknessElement, 'e-pv-annotation-thickness-icon', thicknessContainer, this.pdfViewer.localeObj.getConstant('Change thickness'));\n      this.thicknessDropDown.beforeOpen = this.thicknessDropDownBeforeOpen.bind(this);\n      this.thicknessSlider.change = this.thicknessChange.bind(this);\n      this.thicknessSlider.changed = this.thicknessChange.bind(this);\n      this.thicknessDropDown.open = this.thicknessDropDownOpen.bind(this);\n    }\n\n    if (!isPath) {\n      this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n      var sliderContainer = this.createSlider(this.opacityDropDownElement.id); // eslint-disable-next-line max-len\n\n      this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n      this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n      this.opacitySlider.change = this.opacityChange.bind(this);\n      this.opacitySlider.changed = this.opacityChange.bind(this);\n      this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n    }\n\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.fontFamilyElement = this.pdfViewerBase.getElement('_annotation_fontname');\n      this.createDropDownListForFamily(this.fontFamilyElement); //this.fontFamilyElement.style.textAlign = 'left';\n\n      this.fontFamilyElement.addEventListener('change', function () {\n        _this.onFontFamilyChange.bind(_this);\n      });\n      this.fontSizeElement = this.pdfViewerBase.getElement('_annotation_fontsize');\n      this.createDropDownListForSize(this.fontSizeElement);\n      this.fontColorElement = this.pdfViewerBase.getElement('_annotation_textcolor');\n      this.fontColorPalette = this.createColorPicker(this.fontColorElement.id);\n      this.fontColorPalette.change = this.onFontColorChange.bind(this); // eslint-disable-next-line max-len\n\n      this.fontColorDropDown = this.createDropDownButton(this.fontColorElement, 'e-pv-annotation-textcolor-icon', this.fontColorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Font color'));\n      this.textAlignElement = this.pdfViewerBase.getElement('_annotation_textalign');\n      this.alignmentToolbar = this.createShapeOptions(this.textAlignElement.id, undefined, true); // eslint-disable-next-line max-len\n\n      this.textAlignDropDown = this.createDropDownButton(this.textAlignElement, 'e-pv-annotation-textalign-icon', this.alignmentToolbar.element, this.pdfViewer.localeObj.getConstant('Text Align'));\n      this.textAlignDropDown.beforeOpen = this.textAlignDropDownBeforeOpen.bind(this);\n      this.textPropElement = this.pdfViewerBase.getElement('_annotation_textproperties');\n      this.propertiesToolbar = this.createShapeOptions(this.textPropElement.id, undefined, false, true); // eslint-disable-next-line max-len\n\n      this.textPropertiesDropDown = this.createPropDropDownButton(this.textPropElement, 'e-pv-annotation-textprop-icon', this.propertiesToolbar.element, this.pdfViewer.localeObj.getConstant('Text Properties'));\n      this.textPropertiesDropDown.beforeOpen = this.textPropertiesDropDownBeforeOpen.bind(this);\n    }\n  };\n\n  AnnotationToolbar.prototype.mobileColorpicker = function (id) {\n    var _this = this;\n\n    this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n    var sliderContainer = this.createSlider(this.opacityDropDownElement.id); // eslint-disable-next-line max-len\n\n    this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n    this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n    this.opacitySlider.change = this.opacityChange.bind(this);\n    this.opacitySlider.changed = this.opacityChange.bind(this);\n    this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n\n    if (id === this.pdfViewer.element.id + '_annotation_shapes') {\n      id = this.pdfViewer.element.id + '_annotation_shapesIcon';\n    } else if (id === this.pdfViewer.element.id + '_annotation_calibrate') {\n      id = this.pdfViewer.element.id + '_annotation_calibrateIcon';\n    } else if (id === this.pdfViewer.element.id + '_highlight') {\n      id = this.pdfViewer.element.id + '_highlightIcon';\n    } else if (id === this.pdfViewer.element.id + '_underline') {\n      id = this.pdfViewer.element.id + '_underlineIcon';\n    } else if (id === this.pdfViewer.element.id + '_strikethrough') {\n      id = this.pdfViewer.element.id + '_strikethroughIcon';\n    } // eslint-disable-next-line max-len\n\n\n    if (id === this.pdfViewer.element.id + '_annotation_shapesIcon' || id === this.pdfViewer.element.id + '_annotation_calibrateIcon' || id === this.pdfViewer.element.id + '_annotation_freeTextEdit' || // eslint-disable-next-line max-len\n    id === this.pdfViewer.element.id + '_highlightIcon' || id === this.pdfViewer.element.id + '_underlineIcon' || id === this.pdfViewer.element.id + '_strikethroughIcon' || id === this.pdfViewer.element.id + '_annotation_inkIcon' || id === this.pdfViewer.element.id + '_annotation_handwrittenSign') {\n      if (id !== this.pdfViewer.element.id + '_annotation_handwrittenSign' && id !== this.pdfViewer.element.id + '_annotation_inkIcon') {\n        this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n        this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n        this.colorPalette.change = this.onColorPickerChange.bind(this); // eslint-disable-next-line max-len\n\n        this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n        this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n        this.colorDropDown.open = this.colorDropDownOpen.bind(this); // eslint-disable-next-line max-len\n\n        this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n      }\n\n      if (id === this.pdfViewer.element.id + '_annotation_freeTextEdit') {\n        this.fontFamilyElement = this.pdfViewerBase.getElement('_annotation_fontname');\n        this.createDropDownListForFamily(this.fontFamilyElement);\n        this.fontFamilyElement.style.textAlign = 'left';\n        this.fontFamilyElement.addEventListener('change', function () {\n          _this.onFontFamilyChange.bind(_this);\n        });\n        this.fontSizeElement = this.pdfViewerBase.getElement('_annotation_fontsize');\n        this.createDropDownListForSize(this.fontSizeElement);\n        this.fontColorElement = this.pdfViewerBase.getElement('_annotation_textcolor');\n        this.fontColorPalette = this.createColorPicker(this.fontColorElement.id);\n        this.fontColorPalette.change = this.onFontColorChange.bind(this); // eslint-disable-next-line max-len\n\n        this.fontColorDropDown = this.createDropDownButton(this.fontColorElement, 'e-pv-annotation-textcolor-icon', this.fontColorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Font color'));\n        this.textAlignElement = this.pdfViewerBase.getElement('_annotation_textalign');\n        this.alignmentToolbar = this.createShapeOptions(this.textAlignElement.id, undefined, true); // eslint-disable-next-line max-len\n\n        this.textAlignDropDown = this.createDropDownButton(this.textAlignElement, 'e-pv-annotation-textalign-icon', this.alignmentToolbar.element, this.pdfViewer.localeObj.getConstant('Text Align'));\n        this.textAlignDropDown.beforeOpen = this.textAlignDropDownBeforeOpen.bind(this);\n        this.textPropElement = this.pdfViewerBase.getElement('_annotation_textproperties');\n        this.propertiesToolbar = this.createShapeOptions(this.textPropElement.id, undefined, false, true); // eslint-disable-next-line max-len\n\n        this.textPropertiesDropDown = this.createPropDropDownButton(this.textPropElement, 'e-pv-annotation-textprop-icon', this.propertiesToolbar.element, this.pdfViewer.localeObj.getConstant('Text Properties'));\n        this.textPropertiesDropDown.beforeOpen = this.textPropertiesDropDownBeforeOpen.bind(this);\n      } // eslint-disable-next-line max-len\n\n\n      if (id === this.pdfViewer.element.id + '_annotation_shapesIcon' || id === this.pdfViewer.element.id + '_annotation_calibrateIcon' || id === this.pdfViewer.element.id + '_annotation_freeTextEdit' || id === this.pdfViewer.element.id + '_annotation_inkIcon' || id === this.pdfViewer.element.id + '_annotation_handwrittenSign') {\n        this.thicknessElement = this.pdfViewerBase.getElement('_annotation_thickness');\n        var thicknessContainer = this.createThicknessSlider(this.thicknessElement.id); // eslint-disable-next-line max-len\n\n        this.thicknessDropDown = this.createDropDownButton(this.thicknessElement, 'e-pv-annotation-thickness-icon', thicknessContainer, this.pdfViewer.localeObj.getConstant('Change thickness'));\n        this.thicknessDropDown.beforeOpen = this.thicknessDropDownBeforeOpen.bind(this);\n        this.thicknessSlider.change = this.thicknessChange.bind(this);\n        this.thicknessSlider.changed = this.thicknessChange.bind(this);\n        this.thicknessDropDown.open = this.thicknessDropDownOpen.bind(this);\n        this.strokeDropDownElement = this.pdfViewerBase.getElement('_annotation_stroke');\n        this.strokeColorPicker = this.createColorPicker(this.strokeDropDownElement.id);\n        this.strokeColorPicker.change = this.onStrokePickerChange.bind(this); // eslint-disable-next-line max-len\n\n        this.strokeDropDown = this.createDropDownButton(this.strokeDropDownElement, 'e-pv-annotation-stroke-icon', this.strokeColorPicker.element.parentElement, this.pdfViewer.localeObj.getConstant('Stroke edit'));\n        this.strokeDropDown.beforeOpen = this.strokeDropDownBeforeOpen.bind(this);\n        this.strokeDropDown.open = this.strokeDropDownOpen.bind(this); // eslint-disable-next-line max-len\n\n        this.pdfViewerBase.getElement('_annotation_stroke-popup').addEventListener('click', this.onStrokePickerCancelClick.bind(this));\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.opacityDropDownOpen = function (args) {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      args.element.parentElement.style.left = '0px';\n      args.element.parentElement.style.top = this.pdfViewerBase.viewerContainer.clientHeight + 'px';\n    } else {\n      this.calculateToolbarPosition(args);\n    }\n  };\n\n  AnnotationToolbar.prototype.onColorPickerCancelClick = function (event) {\n    if (event.target.classList.contains('e-cancel')) {\n      this.colorDropDown.toggle();\n    }\n  };\n\n  AnnotationToolbar.prototype.onStrokePickerCancelClick = function (event) {\n    if (event.target.classList.contains('e-cancel')) {\n      this.strokeDropDown.toggle();\n    }\n  };\n\n  AnnotationToolbar.prototype.colorDropDownBeforeOpen = function (args) {\n    this.colorPalette.noColor = false;\n\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;\n      } else {\n        this.setCurrentColorInPicker();\n      }\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.colorPalette.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n      this.colorPalette.noColor = true;\n    } else {\n      this.setCurrentColorInPicker();\n    }\n\n    this.colorPalette.refresh();\n    this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.setCurrentColorInPicker = function () {\n    if (!isBlazor()) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n        switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n          case 'Highlight':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n            break;\n\n          case 'Underline':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n            break;\n\n          case 'Strikethrough':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n            break;\n        }\n      }\n\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.lineFillColor);\n            break;\n\n          case 'Arrow':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.arrowFillColor);\n            break;\n\n          case 'Rectangle':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleFillColor);\n            break;\n\n          case 'Circle':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.circleFillColor);\n            break;\n\n          case 'Polygon':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.polygonFillColor);\n            break;\n        }\n      }\n\n      if (this.colorDropDownElement) {\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.colorDropDownOpen = function (args) {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      // eslint-disable-next-line max-len\n      args.element.parentElement.style.top = this.pdfViewerBase.viewerContainer.clientHeight / 2 + 'px';\n    }\n\n    this.colorPalette.refresh();\n  };\n\n  AnnotationToolbar.prototype.strokeDropDownBeforeOpen = function (args) {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n    } else {\n      this.setCurrentStrokeColorInPicker();\n    }\n\n    this.strokeColorPicker.refresh();\n    this.updateColorInIcon(this.strokeDropDownElement, this.strokeColorPicker.value);\n    this.updateInkannotationItems();\n  };\n\n  AnnotationToolbar.prototype.setCurrentStrokeColorInPicker = function () {\n    if (!isBlazor()) {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.lineStrokeColor);\n            break;\n\n          case 'Arrow':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.arrowStrokeColor);\n            break;\n\n          case 'Rectangle':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleStrokeColor);\n            break;\n\n          case 'Circle':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.circleStrokeColor);\n            break;\n\n          case 'Polygon':\n            // eslint-disable-next-line max-len\n            this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.polygonStrokeColor);\n            break;\n        }\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.strokeDropDownOpen = function (args) {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      args.element.parentElement.style.top = this.pdfViewerBase.viewerContainer.clientHeight / 2 + 'px';\n    }\n\n    this.strokeColorPicker.refresh();\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.onFontColorChange = function (args) {\n    // eslint-disable-next-line\n    var currentColor;\n\n    if (!isBlazor()) {\n      currentColor = args.currentValue.hex === '' ? '#ffffff00' : args.currentValue.hex;\n    } else {\n      currentColor = args[0];\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.pdfViewer.annotation.modifyFontColor(currentColor);\n    } else {\n      this.pdfViewer.freeTextSettings.fontColor = currentColor;\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n    }\n\n    if (isBlazor()) {\n      this.fontColorElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');\n      this.updateColorInIcon(this.fontColorElementInBlazor, currentColor);\n    } else {\n      this.updateColorInIcon(this.fontColorElement, currentColor);\n      this.fontColorDropDown.toggle();\n    }\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.onFontFamilyChange = function (args) {\n    var currentValue;\n\n    if (!isBlazor()) {\n      currentValue = args && args.fontFamily && args.fontFamily.value ? args.fontFamily.value : '';\n    } else {\n      currentValue = args;\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n      this.pdfViewer.annotation.modifyFontFamily(currentValue);\n    } else {\n      this.pdfViewer.freeTextSettings.fontFamily = currentValue;\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n    }\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.onFontSizeChange = function (args) {\n    var currentValue;\n\n    if (!isBlazor()) {\n      currentValue = args && args.fontSize && args.fontSize.value ? args.fontSize.value : '';\n    } else {\n      currentValue = args;\n    }\n\n    var fontSize = parseFloat(currentValue);\n\n    if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n      this.pdfViewer.annotation.modifyFontSize(fontSize);\n    } else {\n      this.pdfViewer.freeTextSettings.fontSize = fontSize;\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n    }\n  };\n\n  AnnotationToolbar.prototype.textAlignDropDownBeforeOpen = function (args) {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      if (args.element.getElementsByTagName('button') && args.element.getElementsByTagName('button').length > 0) {\n        // eslint-disable-next-line\n        var dropDownOptions = args.element.getElementsByTagName('button'); // eslint-disable-next-line\n\n        var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n\n        for (var n = 0; n < dropDownOptions.length; n++) {\n          if (dropDownOptions[n]) {\n            dropDownOptions[n].classList.remove('textprop-option-active'); // eslint-disable-next-line max-len\n\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_left_align' && selectedAnnotation.textAlign === 'Left') {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            } // eslint-disable-next-line max-len\n\n\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_right_align' && selectedAnnotation.textAlign === 'Right') {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            } // eslint-disable-next-line max-len\n\n\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_center_align' && selectedAnnotation.textAlign === 'Center') {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            } // eslint-disable-next-line max-len\n\n\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_justify_align' && selectedAnnotation.textAlign === 'Justify') {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n          }\n        }\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.textPropertiesDropDownBeforeOpen = function (args) {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      if (args.element.getElementsByTagName('button') && args.element.getElementsByTagName('button').length > 0) {\n        // eslint-disable-next-line\n        var dropDownOptions = args.element.getElementsByTagName('button'); // eslint-disable-next-line\n\n        var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n\n        for (var n = 0; n < dropDownOptions.length; n++) {\n          if (dropDownOptions[n]) {\n            dropDownOptions[n].classList.remove('textprop-option-active');\n\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_bold' && selectedAnnotation.font.isBold) {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_italic' && selectedAnnotation.font.isItalic) {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_strikeout' && selectedAnnotation.font.isStrikeout) {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            } // eslint-disable-next-line max-len\n\n\n            if (dropDownOptions[n].id === this.pdfViewer.element.id + '_underline_textinput' && selectedAnnotation.font.isUnderline) {\n              dropDownOptions[n].classList.add('textprop-option-active');\n            }\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.onClickTextAlignment = function (args) {\n    var currentValue;\n\n    if (isBlazor()) {\n      currentValue = args[0];\n    } else {\n      currentValue = args && args.item && args.item.value ? args.item.value : '';\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n      this.pdfViewer.annotation.modifyTextAlignment(currentValue);\n    } else {\n      this.pdfViewer.freeTextSettings.textAlignment = args.item.value;\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n    }\n\n    this.updateTextAlignInIcon(currentValue);\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.onClickTextProperties = function (args) {\n    var currentValue;\n\n    if (isBlazor()) {\n      currentValue = args[0];\n    } else {\n      currentValue = args && args.item && args.item.value ? args.item.value : '';\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n      var fontInfo = {\n        isBold: undefined,\n        isItalic: undefined,\n        isStrikeout: undefined,\n        isUnderline: undefined\n      };\n\n      if (currentValue === 'bold') {\n        fontInfo.isBold = !this.pdfViewer.selectedItems.annotations[0].font.isBold;\n      } else if (currentValue === 'italic') {\n        fontInfo.isItalic = !this.pdfViewer.selectedItems.annotations[0].font.isItalic;\n      } else if (currentValue === 'underline') {\n        fontInfo.isUnderline = !this.pdfViewer.selectedItems.annotations[0].font.isUnderline;\n      } else if (currentValue === 'strikeout') {\n        fontInfo.isStrikeout = !this.pdfViewer.selectedItems.annotations[0].font.isStrikeout;\n      }\n\n      this.pdfViewer.annotation.modifyTextProperties(fontInfo, currentValue);\n    } else {\n      if (currentValue === 'bold') {\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold) {\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold = false;\n        } else {\n          this.pdfViewer.freeTextSettings.fontStyle = 1;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n      } else if (currentValue === 'italic') {\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic) {\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic = false;\n        } else {\n          this.pdfViewer.freeTextSettings.fontStyle = 2;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n      } else if (currentValue === 'underline') {\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline) {\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline = false;\n        } else {\n          this.pdfViewer.freeTextSettings.fontStyle = 4;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough = false;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n      } else if (currentValue === 'strikeout') {\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough) {\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough = false;\n        } else {\n          this.pdfViewer.freeTextSettings.fontStyle = 8;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline = false;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n      }\n    }\n\n    this.updateTextPropertySelection(currentValue);\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.opacityChange = function (args) {\n    var opacityValue = 1;\n\n    if (args && args.length === 1) {\n      opacityValue = args[0];\n    } else {\n      opacityValue = args.value;\n    }\n\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        if (!isBlazor()) {\n          if (this.isCurrentAnnotationOpacitySet && args.name === 'changed') {\n            this.isCurrentAnnotationOpacitySet = false;\n          } else {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(args);\n          }\n        } else {\n          this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null, opacityValue);\n        }\n      } else {\n        switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n          case 'Highlight':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity = opacityValue / 100;\n            break;\n\n          case 'Underline':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity = opacityValue / 100;\n            break;\n\n          case 'Strikethrough':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity = opacityValue / 100;\n            break;\n        }\n      }\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      // eslint-disable-next-line\n      var currentAnnotations = this.pdfViewer.selectedItems.annotations[0]; // eslint-disable-next-line max-len\n\n      if (currentAnnotations != null && (currentAnnotations.shapeAnnotationType === 'Stamp' || currentAnnotations.shapeAnnotationType === 'Image')) {\n        var clonedObject = cloneObject(currentAnnotations);\n        var redoClonedObject = cloneObject(currentAnnotations);\n        redoClonedObject.opacity = opacityValue / 100;\n        this.pdfViewer.nodePropertyChange(currentAnnotations, {\n          opacity: opacityValue / 100\n        });\n        this.pdfViewer.annotation.triggerAnnotationPropChange(currentAnnotations, false, false, false, true); // eslint-disable-next-line max-len\n\n        this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex, null, this.pdfViewer.selectedItems.annotations[0], 'stampOpacity', '', clonedObject, redoClonedObject); // eslint-disable-next-line max-len\n\n        this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0], null, 'opacity');\n      } else {\n        if (isBlazor()) {\n          this.pdfViewer.annotation.modifyOpacity(opacityValue, true);\n        } else {\n          if (args.name === 'changed') {\n            if (args.value !== args.previousValue) {\n              this.pdfViewer.annotation.modifyOpacity(args);\n            }\n          }\n        }\n      }\n    } else {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity = opacityValue / 100;\n            break;\n\n          case 'Arrow':\n            this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity = opacityValue / 100;\n            break;\n\n          case 'Rectangle':\n            this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity = opacityValue / 100;\n            break;\n\n          case 'Circle':\n            this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity = opacityValue / 100;\n            break;\n\n          case 'Polygon':\n            this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity = opacityValue / 100;\n            break;\n        }\n      } // eslint-disable-next-line\n\n\n      var annotationModule = this.pdfViewer.annotation;\n\n      if (annotationModule && annotationModule.inkAnnotationModule) {\n        this.pdfViewer.inkAnnotationSettings.opacity = opacityValue / 100;\n      }\n\n      if (this.pdfViewer.drawingObject) {\n        this.pdfViewer.drawingObject.opacity = opacityValue / 100;\n\n        if (this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n          this.pdfViewer.freeTextSettings.opacity = opacityValue / 100;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n      }\n    }\n\n    if (!isBlazor()) {\n      this.updateOpacityIndicator();\n    }\n  };\n\n  AnnotationToolbar.prototype.opacityDropDownBeforeOpen = function (args) {\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        this.isCurrentAnnotationOpacitySet = true; // eslint-disable-next-line max-len\n\n        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity * 100;\n      } else {\n        switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n          case 'Highlight':\n            this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity * 100;\n            break;\n\n          case 'Underline':\n            this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity * 100;\n            break;\n\n          case 'Strikethrough':\n            this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity * 100;\n            break;\n        }\n      }\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.opacitySlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n    } else {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity * 100;\n            break;\n\n          case 'Arrow':\n            this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity * 100;\n            break;\n\n          case 'Rectangle':\n            this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity * 100;\n            break;\n\n          case 'Circle':\n            this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity * 100;\n            break;\n\n          case 'Polygon':\n            this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity * 100;\n            break;\n        }\n      }\n    }\n\n    this.updateOpacityIndicator();\n    this.updateInkannotationItems();\n  };\n\n  AnnotationToolbar.prototype.thicknessDropDownBeforeOpen = function () {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.thicknessSlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n    } else {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.lineThickness;\n            break;\n\n          case 'Arrow':\n            this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness;\n            break;\n\n          case 'Rectangle':\n            this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness;\n            break;\n\n          case 'Circle':\n            this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.circleThickness;\n            break;\n\n          case 'Polygon':\n            this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness;\n            break;\n        }\n      }\n    }\n\n    this.updateThicknessIndicator();\n    this.updateInkannotationItems();\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.thicknessDropDownOpen = function (args) {\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      args.element.parentElement.style.left = '0px';\n      args.element.parentElement.style.top = this.pdfViewerBase.viewerContainer.clientHeight + 'px';\n    } else {\n      this.calculateToolbarPosition(args);\n    }\n  };\n\n  AnnotationToolbar.prototype.calculateToolbarPosition = function (args) {\n    if (args.element && args.element.parentElement) {\n      var leftValue = parseFloat(args.element.parentElement.style.left);\n      var width = args.element.parentElement.offsetWidth;\n\n      if (leftValue + width < this.pdfViewer.element.offsetWidth + 10) {\n        args.element.parentElement.style.left = leftValue - width + 'px';\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.thicknessChangeInBlazor = function (args) {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.pdfViewer.annotation.modifyThickness(args[0]);\n    } else {\n      this.ShapeThickness(args[0]);\n    }\n  };\n\n  AnnotationToolbar.prototype.thicknessChange = function (args) {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      if (args.name === 'changed') {\n        this.pdfViewer.annotation.modifyThickness(args.value);\n\n        if (!isBlazor()) {\n          this.updateThicknessIndicator();\n        }\n\n        var annotationModule = this.pdfViewer.annotation;\n\n        if (annotationModule && annotationModule.inkAnnotationModule) {\n          this.pdfViewer.inkAnnotationSettings.thickness = args.value;\n        }\n      }\n    } else {\n      this.ShapeThickness(args.value);\n    }\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.ShapeThickness = function (args) {\n    if (this.pdfViewer.annotation.shapeAnnotationModule) {\n      switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n        case 'Line':\n          this.pdfViewer.annotation.shapeAnnotationModule.lineThickness = args;\n          break;\n\n        case 'Arrow':\n          this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness = args;\n          break;\n\n        case 'Rectangle':\n          this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness = args;\n          break;\n\n        case 'Circle':\n          this.pdfViewer.annotation.shapeAnnotationModule.circleThickness = args;\n          break;\n\n        case 'Polygon':\n          this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness = args;\n          break;\n      } // eslint-disable-next-line\n\n\n      var annotationModule_1 = this.pdfViewer.annotation;\n\n      if (annotationModule_1 && annotationModule_1.inkAnnotationModule) {\n        this.pdfViewer.inkAnnotationSettings.thickness = args.value;\n      }\n\n      if (this.pdfViewer.drawingObject) {\n        this.pdfViewer.drawingObject.thickness = args.value;\n      }\n\n      if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n        this.pdfViewer.freeTextSettings.borderWidth = args.value;\n        this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n      }\n    } // eslint-disable-next-line\n\n\n    var annotationModule = this.pdfViewer.annotation;\n\n    if (annotationModule && annotationModule.inkAnnotationModule) {\n      this.pdfViewer.inkAnnotationSettings.thickness = args;\n    }\n\n    if (this.pdfViewer.drawingObject) {\n      this.pdfViewer.drawingObject.thickness = args;\n    }\n\n    if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n      this.pdfViewer.freeTextSettings.borderWidth = args;\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n    }\n\n    if (!isBlazor()) {\n      this.updateThicknessIndicator();\n    }\n  };\n\n  AnnotationToolbar.prototype.createDropDownButton = function (element, iconClass, target, tooltipText) {\n    // eslint-disable-next-line max-len\n    var dropDownButton = new DropDownButton({\n      iconCss: iconClass + ' e-pv-icon',\n      target: target\n    });\n\n    if (this.pdfViewer.enableRtl) {\n      dropDownButton.enableRtl = true;\n    }\n\n    dropDownButton.appendTo(element);\n    this.primaryToolbar.createTooltip(element, tooltipText);\n    return dropDownButton;\n  };\n\n  AnnotationToolbar.prototype.createShapeOptions = function (idString, isShape, isAlign, isTextProp) {\n    var toolbarElement = createElement('div', {\n      id: idString + '_target',\n      className: 'e-pv-shapes-toolbar'\n    });\n    document.body.appendChild(toolbarElement);\n    var toolbar;\n\n    if (isAlign) {\n      toolbar = new Tool({\n        items: this.textAlignmentToolbarItems(),\n        overflowMode: 'MultiRow'\n      }, toolbarElement);\n      toolbar.isStringTemplate = true;\n      this.afterAlignmentToolbarCreation();\n    } else if (isTextProp) {\n      toolbar = new Tool({\n        items: this.textPropertiesToolbarItems(),\n        overflowMode: 'MultiRow'\n      }, toolbarElement);\n      toolbar.isStringTemplate = true;\n      this.afterPropertiesToolbarCreation();\n    } else {\n      if (isShape) {\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n          // eslint-disable-next-line max-len\n          toolbar = new Tool({\n            items: this.createShapeToolbarItems(),\n            overflowMode: 'MultiRow',\n            clicked: this.onShapeToolbarClicked.bind(this)\n          }, toolbarElement);\n          toolbar.isStringTemplate = true;\n          this.afterShapeToolbarCreation();\n        } else {\n          // eslint-disable-next-line max-len\n          this.toolbarElement = createElement('div', {\n            id: idString + '_target',\n            className: 'e-pv-mobile-annotation-toolbar',\n            styles: 'bottom: 0px; position: absolute; width: 100%; float: left'\n          });\n          this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement); // eslint-disable-next-line max-len\n\n          toolbar = new Tool({\n            items: this.createShapeToolbarItemsForMobile(),\n            overflowMode: 'Scrollable',\n            clicked: this.onShapeToolbarClicked.bind(this)\n          }, this.toolbarElement);\n          toolbar.isStringTemplate = true;\n          this.afterShapeToolbarCreationForMobile();\n        }\n      } else {\n        // eslint-disable-next-line max-len\n        toolbar = new Tool({\n          items: this.createCalibrateToolbarItems(),\n          overflowMode: 'MultiRow',\n          clicked: this.onCalibrateToolbarClicked.bind(this)\n        }, toolbarElement);\n        toolbar.isStringTemplate = true;\n        this.afterCalibrateToolbarCreation();\n      }\n    }\n\n    return toolbar;\n  }; // eslint:disable-next-line\n\n\n  AnnotationToolbar.prototype.createPropertyToolbarForMobile = function (shapeType) {\n    var _this = this;\n\n    var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container'); // eslint-disable-next-line max-len\n\n    var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n    var fontFamilyTemplate = this.getTemplate('input', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n    var fontSizeTemplate = this.getTemplate('input', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n    var textColorTemplate = this.getTemplate('span', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n    var alignmentTemplate = this.getTemplate('span', '_annotation_textalign', 'e-pv-annotation-textalign-container'); // eslint-disable-next-line max-len\n\n    var textPropertiesTemplate = this.getTemplate('span', '_annotation_textproperties', 'e-pv-annotation-textprop-container'); // eslint:disable-next-line\n\n    var items = []; // eslint-disable-next-line max-len\n\n    if (shapeType === 'Polygon' || shapeType === 'Rectangle' || shapeType === 'Ellipse' || shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Distance' || shapeType === 'Perimeter' || shapeType === 'Radius' || shapeType === 'FreeText') {\n      if (shapeType === 'FreeText') {\n        // eslint-disable-next-line max-len\n        items.push({\n          prefixIcon: 'e-pv-freetext-icon e-pv-icon',\n          className: 'e-pv-annotation-freetextedit-container'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n        items.push({\n          template: fontFamilyTemplate\n        });\n        items.push({\n          template: fontSizeTemplate\n        });\n        items.push({\n          template: textColorTemplate\n        });\n        items.push({\n          template: alignmentTemplate\n        });\n        items.push({\n          template: textPropertiesTemplate\n        });\n      }\n\n      if (shapeType === 'Polygon') {\n        if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Area') {\n          items.push({\n            prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon'\n          });\n          items.push({\n            type: 'Separator',\n            align: 'Left'\n          });\n        } else if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Volume') {\n          items.push({\n            prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon'\n          });\n          items.push({\n            type: 'Separator',\n            align: 'Left'\n          });\n        } else {\n          items.push({\n            prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon'\n          });\n          items.push({\n            type: 'Separator',\n            align: 'Left'\n          });\n        }\n      } else if (shapeType === 'Rectangle') {\n        items.push({\n          prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Ellipse') {\n        items.push({\n          prefixIcon: 'e-pv-shape-circle-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Line') {\n        if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Perimeter') {\n          items.push({\n            prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon'\n          });\n          items.push({\n            type: 'Separator',\n            align: 'Left'\n          });\n        } else {\n          items.push({\n            prefixIcon: 'e-pv-shape-line-icon e-pv-icon'\n          });\n          items.push({\n            type: 'Separator',\n            align: 'Left'\n          });\n        }\n      } else if (shapeType === 'LineWidthArrowHead') {\n        items.push({\n          prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Distance') {\n        items.push({\n          prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Perimeter') {\n        items.push({\n          prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Radius') {\n        items.push({\n          prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      }\n\n      items.push({\n        template: colorTemplate\n      });\n      items.push({\n        template: strokeTemplate\n      });\n      items.push({\n        template: thicknessTemplate\n      });\n    } else if (shapeType === 'Path' || shapeType === 'Ink' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText') {\n      if (shapeType === 'Path' || shapeType === 'Ink') {\n        items.push({\n          prefixIcon: 'e-pv-inkannotation-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText') {\n        items.push({\n          prefixIcon: 'e-pv-handwritten-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      }\n\n      items.push({\n        template: strokeTemplate\n      });\n      items.push({\n        template: thicknessTemplate\n      });\n    } else if (shapeType === 'Underline' || shapeType === 'Highlight' || shapeType === 'Strikethrough') {\n      if (shapeType === 'Highlight') {\n        items.push({\n          prefixIcon: 'e-pv-highlight-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Underline') {\n        items.push({\n          prefixIcon: 'e-pv-underline-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      } else if (shapeType === 'Strikethrough') {\n        items.push({\n          prefixIcon: 'e-pv-strikethrough-icon e-pv-icon'\n        });\n        items.push({\n          type: 'Separator',\n          align: 'Left'\n        });\n      }\n\n      items.push({\n        template: colorTemplate\n      });\n    } else if (shapeType === 'Stamp' || shapeType === 'Image') {\n      items.push({\n        prefixIcon: 'e-pv-stamp-icon e-pv-icon'\n      });\n      items.push({\n        type: 'Separator',\n        align: 'Left'\n      });\n    } else if (shapeType === 'StickyNotes') {\n      items.push({\n        prefixIcon: 'e-pv-comment-icon e-pv-icon'\n      });\n      items.push({\n        type: 'Separator',\n        align: 'Left'\n      });\n    }\n\n    items.push({\n      template: opacityTemplate\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-comment-panel-icon e-pv-icon',\n      className: 'e-pv-comment-panel-icon-container',\n      id: this.pdfViewer.element.id + '_annotation_commentPanel',\n      align: 'Right',\n      click: function (args) {\n        _this.pdfViewer.annotationModule.showCommentsPanel();\n      }\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon',\n      className: 'e-pv-annotation-delete-container',\n      id: this.pdfViewer.element.id + '_annotation_delete',\n      align: 'Right',\n      click: function (args) {\n        _this.pdfViewer.annotationModule.deleteAnnotation();\n\n        _this.propertyToolbar.destroy();\n\n        _this.toolbarCreated = false;\n\n        _this.createAnnotationToolbarForMobile();\n\n        _this.adjustMobileViewer();\n      }\n    });\n    return items;\n  }; // eslint:disable-next-line\n\n\n  AnnotationToolbar.prototype.createStampToolbarItemsForMobile = function () {\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container'); // eslint:disable-next-line\n\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left'\n    });\n    items.push({\n      template: opacityTemplate\n    });\n    return items;\n  }; // eslint:disable-next-line\n\n\n  AnnotationToolbar.prototype.createShapeToolbarItemsForMobile = function () {\n    var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container'); // eslint-disable-next-line max-len\n\n    var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container'); // eslint:disable-next-line\n\n    var items = []; // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    });\n    items.push({\n      prefixIcon: 'e-pv-shape-line-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_line',\n      text: this.pdfViewer.localeObj.getConstant('Line Shape'),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_arrow',\n      text: this.pdfViewer.localeObj.getConstant('Arrow Shape'),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_rectangle',\n      text: this.pdfViewer.localeObj.getConstant('Rectangle Shape'),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-shape-circle-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_circle',\n      text: this.pdfViewer.localeObj.getConstant('Circle Shape'),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_pentagon',\n      text: this.pdfViewer.localeObj.getConstant('Pentagon Shape'),\n      align: 'Left'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left'\n    });\n    items.push({\n      template: colorTemplate\n    });\n    items.push({\n      template: strokeTemplate\n    });\n    items.push({\n      template: thicknessTemplate\n    });\n    items.push({\n      template: opacityTemplate\n    });\n    return items;\n  }; // eslint:disable-next-line\n\n\n  AnnotationToolbar.prototype.createCalibrateToolbarItemsForMobile = function () {\n    var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container'); // eslint-disable-next-line max-len\n\n    var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n    var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n    var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container'); // eslint:disable-next-line\n\n    var items = []; // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-backward-icon e-pv-icon',\n      tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'),\n      id: this.pdfViewer.element.id + '_backward',\n      click: this.goBackToToolbar.bind(this)\n    });\n    items.push({\n      prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_distance',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_perimeter',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_area',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_radius',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_volume',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    items.push({\n      type: 'Separator',\n      align: 'Left'\n    });\n    items.push({\n      template: colorTemplate\n    });\n    items.push({\n      template: strokeTemplate\n    });\n    items.push({\n      template: thicknessTemplate\n    });\n    items.push({\n      template: opacityTemplate\n    });\n    return items;\n  };\n\n  AnnotationToolbar.prototype.handleShapeTool = function (type) {\n    if (!isBlazor() && Browser.isDevice) {\n      // eslint:disable-next-line\n      var selectedItems = document.querySelectorAll('.e-pv-select');\n\n      for (var i = 0; i < selectedItems.length; i++) {\n        if (selectedItems[i].id !== type && selectedItems[i].id !== this.pdfViewer.element.id + '_annotation') {\n          selectedItems[i].classList.remove('e-pv-select');\n        }\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.createPropDropDownButton = function (element, iconClass, target, tooltipText) {\n    // eslint-disable-next-line max-len\n    var dropDownButton = new DropDownButton({\n      iconCss: iconClass + ' e-pv-icon',\n      target: target,\n      cssClass: 'e-caret-hide'\n    });\n\n    if (this.pdfViewer.enableRtl) {\n      dropDownButton.enableRtl = true;\n    }\n\n    dropDownButton.appendTo(element);\n    this.primaryToolbar.createTooltip(element, tooltipText);\n    return dropDownButton;\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.textAlignmentToolbarItems = function () {\n    // eslint-disable-next-line\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-left-align-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_left_align',\n      align: 'Left',\n      value: 'Left',\n      click: this.onClickTextAlignment.bind(this)\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-center-align-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_center_align',\n      align: 'Left',\n      value: 'Center',\n      click: this.onClickTextAlignment.bind(this)\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-right-align-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_right_align',\n      align: 'Left',\n      value: 'Right',\n      click: this.onClickTextAlignment.bind(this)\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-justfiy-align-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_justify_align',\n      align: 'Left',\n      value: 'Justify',\n      click: this.onClickTextAlignment.bind(this)\n    }); // eslint-disable-next-line max-len\n\n    return items;\n  };\n\n  AnnotationToolbar.prototype.afterAlignmentToolbarCreation = function () {\n    // eslint-disable-next-line max-len\n    this.alignLeftElement = this.primaryToolbar.addClassToolbarItem('_left_align', 'e-pv-left-align', this.pdfViewer.localeObj.getConstant('Align left'));\n    this.alignRightElement = this.primaryToolbar.addClassToolbarItem('_right_align', 'e-pv-right-align', this.pdfViewer.localeObj.getConstant('Align right')); // eslint-disable-next-line max-len\n\n    this.alignCenterElement = this.primaryToolbar.addClassToolbarItem('_center_align', 'e-pv-center-align', this.pdfViewer.localeObj.getConstant('Center'));\n    this.alignJustifyElement = this.primaryToolbar.addClassToolbarItem('_justify_align', 'e-pv-justfiy-align', this.pdfViewer.localeObj.getConstant('Justify'));\n  };\n\n  AnnotationToolbar.prototype.afterPropertiesToolbarCreation = function () {\n    // eslint-disable-next-line max-len\n    this.boldElement = this.primaryToolbar.addClassToolbarItem('_bold', 'e-pv-bold', this.pdfViewer.localeObj.getConstant('Bold'));\n    this.italicElement = this.primaryToolbar.addClassToolbarItem('_italic', 'e-pv-italic', this.pdfViewer.localeObj.getConstant('Italic')); // eslint-disable-next-line max-len\n\n    this.fontStyleStrikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikeout', 'e-pv-strikeout', this.pdfViewer.localeObj.getConstant('Strikethroughs'));\n    this.fontStyleUnderlineItem = this.primaryToolbar.addClassToolbarItem('_underline_textinput', 'e-pv-underlinetext', this.pdfViewer.localeObj.getConstant('Underlines'));\n  };\n\n  AnnotationToolbar.prototype.createDropDownListForSize = function (fontSelectElement) {\n    var _this = this; // eslint-disable-next-line max-len\n\n\n    var fontSize = ['8px', '9px', '10px', '11px', '12px', '14px', '16px', '18px', '20px', '22px', '24px', '26px', '28px', '36px', '48px', '72px', '96px'];\n\n    if (!this.pdfViewer.enableRtl) {\n      this.fontSize = new ComboBox({\n        dataSource: fontSize,\n        cssClass: 'e-pv-prop-dropdown',\n        allowCustom: true,\n        showClearButton: false,\n        width: '80px',\n        popupWidth: '100px'\n      });\n    } else {\n      this.fontSize = new ComboBox({\n        dataSource: fontSize,\n        cssClass: 'e-pv-prop-dropdown-rtl',\n        allowCustom: true,\n        showClearButton: false,\n        width: '80px',\n        popupWidth: '100px',\n        enableRtl: true\n      });\n    }\n\n    this.fontSize.value = '16px';\n    this.fontSize.appendTo(fontSelectElement);\n    this.primaryToolbar.createTooltip(fontSelectElement, this.pdfViewer.localeObj.getConstant('Font size'));\n    this.fontSize.addEventListener('change', function () {\n      _this.onFontSizeChange(_this);\n    });\n  };\n\n  AnnotationToolbar.prototype.createDropDownListForFamily = function (fontSelectElement) {\n    var _this = this;\n\n    var fontStyle = [{\n      FontName: 'Helvetica'\n    }, {\n      FontName: 'Courier'\n    }, {\n      FontName: 'Symbol'\n    }, {\n      FontName: 'Times New Roman'\n    }];\n\n    if (!this.pdfViewer.enableRtl) {\n      this.fontFamily = new ComboBox({\n        dataSource: fontStyle,\n        query: new Query().select(['FontName']),\n        fields: {\n          text: 'FontName',\n          value: 'FontName'\n        },\n        cssClass: 'e-pv-prop-dropdown',\n        itemTemplate: '<span style=\"font-family: ${FontName};\">${FontName}</span>',\n        allowCustom: true,\n        showClearButton: false,\n        width: '110px',\n        popupWidth: '190px'\n      });\n    } else {\n      this.fontFamily = new ComboBox({\n        dataSource: fontStyle,\n        query: new Query().select(['FontName']),\n        fields: {\n          text: 'FontName',\n          value: 'FontName'\n        },\n        cssClass: 'e-pv-prop-dropdown-rtl',\n        itemTemplate: '<span style=\"font-family: ${FontName};\">${FontName}</span>',\n        allowCustom: true,\n        showClearButton: false,\n        width: '110px',\n        popupWidth: '190px',\n        enableRtl: true\n      });\n    }\n\n    this.fontFamily.isStringTemplate = true;\n    this.fontFamily.value = 'Helvetica';\n    this.fontFamily.appendTo(fontSelectElement);\n    this.primaryToolbar.createTooltip(fontSelectElement, this.pdfViewer.localeObj.getConstant('Font family'));\n    this.fontFamily.addEventListener('change', function () {\n      _this.onFontFamilyChange(_this);\n    });\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.textPropertiesToolbarItems = function () {\n    // eslint-disable-next-line\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-bold-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_bold',\n      align: 'Left',\n      value: 'bold',\n      click: this.onClickTextProperties.bind(this)\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-italic-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_italic',\n      align: 'Left',\n      value: 'italic',\n      click: this.onClickTextProperties.bind(this)\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-strikeout-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_strikeout',\n      align: 'Left',\n      value: 'strikeout',\n      click: this.onClickTextProperties.bind(this)\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-underlinetext-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_underline_textinput',\n      align: 'Left',\n      value: 'underline',\n      click: this.onClickTextProperties.bind(this)\n    });\n    return items;\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.createShapeToolbarItems = function () {\n    // eslint-disable-next-line\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-shape-line-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_line',\n      text: this.pdfViewer.localeObj.getConstant('Line Shape'),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_arrow',\n      text: this.pdfViewer.localeObj.getConstant('Arrow Shape'),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_rectangle',\n      text: this.pdfViewer.localeObj.getConstant('Rectangle Shape'),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-shape-circle-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_circle',\n      text: this.pdfViewer.localeObj.getConstant('Circle Shape'),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_shape_pentagon',\n      text: this.pdfViewer.localeObj.getConstant('Pentagon Shape'),\n      align: 'Left'\n    });\n    return items;\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.createCalibrateToolbarItems = function () {\n    // eslint-disable-next-line\n    var items = [];\n    items.push({\n      prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_distance',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_perimeter',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_area',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_radius',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    }); // eslint-disable-next-line max-len\n\n    items.push({\n      prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon',\n      cssClass: '',\n      id: this.pdfViewer.element.id + '_calibrate_volume',\n      text: this.pdfViewer.localeObj.getConstant(''),\n      align: 'Left'\n    });\n    return items;\n  };\n\n  AnnotationToolbar.prototype.onCalibrateToolbarClicked = function (args) {\n    var elementId = this.pdfViewer.element.id;\n    var measureModule = this.pdfViewer.annotation.measureAnnotationModule;\n    this.deselectAllItems();\n    this.resetFreeTextAnnot();\n\n    if (Browser.isDevice && !isBlazor()) {\n      // tslint:disable-next-line\n      var element = args.originalEvent.target;\n      this.pdfViewer.toolbarModule.selectItem(element.parentElement);\n    }\n\n    switch (args.originalEvent.target.id) {\n      case elementId + '_calibrate_distance':\n      case elementId + '_calibrate_distanceIcon':\n        measureModule.setAnnotationType('Distance');\n        this.onShapeDrawSelection(false);\n        this.updateColorInIcon(this.colorDropDownElement, measureModule.distanceFillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, measureModule.distanceStrokeColor);\n        this.handleShapeTool(elementId + '_calibrate_distance');\n        break;\n\n      case elementId + '_calibrate_perimeter':\n      case elementId + '_calibrate_perimeterIcon':\n        measureModule.setAnnotationType('Perimeter');\n        this.onShapeDrawSelection(false);\n        this.updateColorInIcon(this.colorDropDownElement, measureModule.perimeterFillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, measureModule.perimeterStrokeColor);\n        this.handleShapeTool(elementId + '_calibrate_perimeter');\n        break;\n\n      case elementId + '_calibrate_area':\n      case elementId + '_calibrate_areaIcon':\n        measureModule.setAnnotationType('Area');\n        this.onShapeDrawSelection(false);\n        this.updateColorInIcon(this.colorDropDownElement, measureModule.areaFillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, measureModule.areaStrokeColor);\n        this.handleShapeTool(elementId + '_calibrate_area');\n        break;\n\n      case elementId + '_calibrate_radius':\n      case elementId + '_calibrate_radiusIcon':\n        measureModule.setAnnotationType('Radius');\n        this.onShapeDrawSelection(false);\n        this.updateColorInIcon(this.colorDropDownElement, measureModule.radiusFillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, measureModule.radiusStrokeColor);\n        this.handleShapeTool(elementId + '_calibrate_radius');\n        break;\n\n      case elementId + '_calibrate_volume':\n      case elementId + '_calibrate_volumeIcon':\n        measureModule.setAnnotationType('Volume');\n        this.onShapeDrawSelection(false);\n        this.updateColorInIcon(this.colorDropDownElement, measureModule.volumeFillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, measureModule.volumeStrokeColor);\n        this.handleShapeTool(elementId + '_calibrate_volume');\n        break;\n    }\n  };\n\n  AnnotationToolbar.prototype.onShapeDrawSelection = function (isShape) {\n    // eslint-disable-next-line\n    var annotation = this.pdfViewer.selectedItems.annotations[0];\n\n    if (!Browser.isDevice) {\n      this.updateInteractionTools();\n      this.enableAnnotationPropertiesTools(true);\n\n      if (isShape) {\n        this.shapeDropDown.toggle();\n      } else {\n        this.calibrateDropDown.toggle();\n      }\n    }\n\n    this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n  };\n\n  AnnotationToolbar.prototype.afterCalibrateToolbarCreationForMobile = function () {\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_calibrate_distance', 'e-pv-calibrate-distance', this.pdfViewer.localeObj.getConstant('Calibrate Distance'));\n    this.primaryToolbar.addClassToolbarItem('_calibrate_perimeter', 'e-pv-calibrate-perimeter', this.pdfViewer.localeObj.getConstant('Calibrate Perimeter')); // eslint-disable-next-line max-len\n\n    this.primaryToolbar.addClassToolbarItem('_calibrate_area', 'e-pv-calibrate-area', this.pdfViewer.localeObj.getConstant('Calibrate Area'));\n    this.primaryToolbar.addClassToolbarItem('_calibrate_radius', 'e-pv-calibrate-radius', this.pdfViewer.localeObj.getConstant('Calibrate Radius')); // eslint-disable-next-line max-len\n\n    this.primaryToolbar.addClassToolbarItem('_calibrate_volume', 'e-pv-calibrate-volume', this.pdfViewer.localeObj.getConstant('Calibrate Volume'));\n  };\n\n  AnnotationToolbar.prototype.afterShapeToolbarCreationForMobile = function () {\n    // eslint-disable-next-line max-len\n    this.primaryToolbar.addClassToolbarItem('_annotation_color', 'e-pv-annotation-color-container', this.pdfViewer.localeObj.getConstant('Change Color')); // eslint-disable-next-line max-len\n\n    this.primaryToolbar.addClassToolbarItem('_annotation_stroke', 'e-pv-annotation-stroke-container', this.pdfViewer.localeObj.getConstant('Change Stroke Color')); // eslint-disable-next-line max-len\n\n    this.primaryToolbar.addClassToolbarItem('_annotation_thickness', 'e-pv-annotation-thickness-container', this.pdfViewer.localeObj.getConstant('Chnage Border Thickness')); // eslint-disable-next-line max-len\n\n    this.primaryToolbar.addClassToolbarItem('_annotation_opacity', 'e-annotation-opacity-container', this.pdfViewer.localeObj.getConstant('Change Opacity'));\n    this.primaryToolbar.addClassToolbarItem('_shape_line', 'e-pv-shape-line', this.pdfViewer.localeObj.getConstant('Add line'));\n    this.primaryToolbar.addClassToolbarItem('_shape_arrow', 'e-pv-shape-arrow', this.pdfViewer.localeObj.getConstant('Add arrow')); // eslint-disable-next-line max-len\n\n    this.primaryToolbar.addClassToolbarItem('_shape_rectangle', 'e-pv-shape-rectangle', this.pdfViewer.localeObj.getConstant('Add rectangle')); // eslint-disable-next-line max-len\n\n    this.primaryToolbar.addClassToolbarItem('_shape_circle', 'e-pv-shape-circle', this.pdfViewer.localeObj.getConstant('Add circle'));\n    this.primaryToolbar.addClassToolbarItem('_shape_pentagon', 'e-pv-shape-pentagon', this.pdfViewer.localeObj.getConstant('Add polygon'));\n  };\n\n  AnnotationToolbar.prototype.afterShapeToolbarCreation = function () {\n    this.lineElement = this.primaryToolbar.addClassToolbarItem('_shape_line', 'e-pv-shape-line', this.pdfViewer.localeObj.getConstant('Add line'));\n    this.arrowElement = this.primaryToolbar.addClassToolbarItem('_shape_arrow', 'e-pv-shape-arrow', this.pdfViewer.localeObj.getConstant('Add arrow')); // eslint-disable-next-line max-len\n\n    this.rectangleElement = this.primaryToolbar.addClassToolbarItem('_shape_rectangle', 'e-pv-shape-rectangle', this.pdfViewer.localeObj.getConstant('Add rectangle')); // eslint-disable-next-line max-len\n\n    this.circleElement = this.primaryToolbar.addClassToolbarItem('_shape_circle', 'e-pv-shape-circle', this.pdfViewer.localeObj.getConstant('Add circle'));\n    this.polygonElement = this.primaryToolbar.addClassToolbarItem('_shape_pentagon', 'e-pv-shape-pentagon', this.pdfViewer.localeObj.getConstant('Add polygon'));\n  };\n\n  AnnotationToolbar.prototype.afterCalibrateToolbarCreation = function () {\n    // eslint-disable-next-line max-len\n    this.calibrateDistance = this.primaryToolbar.addClassToolbarItem('_calibrate_distance', 'e-pv-calibrate-distance', this.pdfViewer.localeObj.getConstant('Calibrate Distance'));\n    this.calibratePerimeter = this.primaryToolbar.addClassToolbarItem('_calibrate_perimeter', 'e-pv-calibrate-perimeter', this.pdfViewer.localeObj.getConstant('Calibrate Perimeter')); // eslint-disable-next-line max-len\n\n    this.calibrateArea = this.primaryToolbar.addClassToolbarItem('_calibrate_area', 'e-pv-calibrate-area', this.pdfViewer.localeObj.getConstant('Calibrate Area'));\n    this.calibrateRadius = this.primaryToolbar.addClassToolbarItem('_calibrate_radius', 'e-pv-calibrate-radius', this.pdfViewer.localeObj.getConstant('Calibrate Radius')); // eslint-disable-next-line max-len\n\n    this.calibrateVolume = this.primaryToolbar.addClassToolbarItem('_calibrate_volume', 'e-pv-calibrate-volume', this.pdfViewer.localeObj.getConstant('Calibrate Volume'));\n  };\n\n  AnnotationToolbar.prototype.afterMobileToolbarCreation = function () {\n    // eslint-disable-next-line max-len\n    this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n    this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline')); // eslint-disable-next-line max-len\n\n    this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough')); // eslint-disable-next-line max-len\n\n    this.shapesItem = this.primaryToolbar.addClassToolbarItem('_annotation_shapes', 'e-pv-annotation-shapes', this.pdfViewer.localeObj.getConstant('Add Shapes'));\n    this.calibrateItem = this.primaryToolbar.addClassToolbarItem('_annotation_calibrate', 'e-pv-annotation-calibrate', this.pdfViewer.localeObj.getConstant('Calibrate')); // eslint-disable-next-line max-len\n\n    this.freeTextEditItem = this.primaryToolbar.addClassToolbarItem('_annotation_freeTextEdit', 'e-pv-annotation-freeTextEdit', this.pdfViewer.localeObj.getConstant('Free Text')); // eslint-disable-next-line max-len\n\n    this.commentItem = this.primaryToolbar.addClassToolbarItem('_comment', 'e-pv-comment', this.pdfViewer.localeObj.getConstant('Add Comments')); // eslint-disable-next-line max-len\n\n    this.commentItem = this.primaryToolbar.addClassToolbarItem('_annotation_commentPanel', 'e-pv-annotation-comment-panel', this.pdfViewer.localeObj.getConstant('Comment Panel')); // eslint-disable-next-line max-len\n\n    this.inkAnnotationItem = this.primaryToolbar.addClassToolbarItem('_annotation_ink', 'e-pv-annotation-ink', this.pdfViewer.localeObj.getConstant('Draw Ink'));\n    this.selectAnnotationDeleteItem(false);\n    this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel);\n  };\n\n  AnnotationToolbar.prototype.createColorPicker = function (idString) {\n    var inputElement;\n    var existingInput = document.getElementById(idString + '_target');\n\n    if (existingInput) {\n      inputElement = existingInput;\n    } else {\n      inputElement = createElement('input', {\n        id: idString + '_target'\n      });\n    }\n\n    document.body.appendChild(inputElement);\n    var colorPicker = new ColorPicker({\n      inline: true,\n      mode: 'Palette',\n      cssClass: 'e-show-value',\n      enableOpacity: false,\n      value: '#000000',\n      showButtons: false,\n      modeSwitcher: false\n    });\n\n    if (this.pdfViewer.enableRtl) {\n      colorPicker.enableRtl = true;\n    }\n\n    colorPicker.appendTo(inputElement);\n    return colorPicker;\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.onColorPickerChange = function (args) {\n    // eslint-disable-next-line\n    var currentColor;\n\n    if (!isBlazor()) {\n      currentColor = args.currentValue.hex === '' ? '#ffffff00' : args.currentValue.hex;\n    } else {\n      currentColor = args[0];\n    }\n\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n      if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(currentColor);\n      } else {\n        switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n          case 'Highlight':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = currentColor;\n            break;\n\n          case 'Underline':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = currentColor;\n            break;\n\n          case 'Strikethrough':\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = currentColor;\n            break;\n        }\n      }\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      if (isBlazor()) {\n        if (args[0] !== args[1]) {\n          this.pdfViewer.annotation.modifyFillColor(currentColor);\n        }\n      } else {\n        if (args.currentValue.hex !== args.previousValue.hex) {\n          this.pdfViewer.annotation.modifyFillColor(currentColor);\n        }\n      }\n    } else {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor = currentColor;\n            break;\n\n          case 'Arrow':\n            this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor = currentColor;\n            break;\n\n          case 'Rectangle':\n            this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor = currentColor;\n            break;\n\n          case 'Circle':\n            this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor = currentColor;\n            break;\n\n          case 'Polygon':\n            this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor = currentColor;\n            break;\n        }\n      }\n\n      if (this.pdfViewer.drawingObject) {\n        this.pdfViewer.drawingObject.fillColor = currentColor;\n\n        if (this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n          this.pdfViewer.freeTextSettings.fillColor = currentColor;\n          this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n      }\n    }\n\n    if (isBlazor()) {\n      this.colorDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');\n      this.updateColorInIcon(this.colorDropDownElementInBlazor, currentColor);\n    } else {\n      this.updateColorInIcon(this.colorDropDownElement, currentColor);\n      this.colorDropDown.toggle();\n    }\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.onStrokePickerChange = function (args) {\n    // eslint-disable-next-line\n    var currentColor;\n\n    if (!isBlazor()) {\n      currentColor = args.currentValue.hex === '' ? '#ffffff00' : args.currentValue.hex;\n    } else {\n      currentColor = args[0];\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      if (isBlazor()) {\n        if (args[0] !== args[1]) {\n          this.pdfViewer.annotation.modifyStrokeColor(currentColor);\n        }\n      } else {\n        if (args.currentValue.hex !== args.previousValue.hex) {\n          this.pdfViewer.annotation.modifyStrokeColor(currentColor);\n        }\n      }\n    } else {\n      if (this.pdfViewer.annotation.shapeAnnotationModule) {\n        switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n          case 'Line':\n            this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor = currentColor;\n            break;\n\n          case 'Arrow':\n            this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor = currentColor;\n            break;\n\n          case 'Rectangle':\n            this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor = currentColor;\n            break;\n\n          case 'Circle':\n            this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor = currentColor;\n            break;\n\n          case 'Polygon':\n            this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor = currentColor;\n            break;\n        }\n      } // eslint-disable-next-line\n\n\n      var annotationModule = this.pdfViewer.annotation;\n\n      if (annotationModule && annotationModule.inkAnnotationModule) {\n        this.pdfViewer.inkAnnotationSettings.strokeColor = currentColor;\n      }\n\n      if (this.pdfViewer.drawingObject) {\n        this.pdfViewer.drawingObject.strokeColor = currentColor;\n      }\n\n      if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n        this.pdfViewer.freeTextSettings.borderColor = currentColor;\n        this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n      }\n    }\n\n    if (isBlazor()) {\n      this.strokeDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');\n      this.updateColorInIcon(this.strokeDropDownElementInBlazor, currentColor);\n    } else {\n      this.updateColorInIcon(this.strokeDropDownElement, currentColor);\n      this.strokeDropDown.toggle();\n    }\n  };\n  /**\n   * @param element\n   * @param color\n   * @param element\n   * @param color\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.updateColorInIcon = function (element, color) {\n    if (isBlazor()) {\n      if (element) {\n        element.children[0].style.borderBottomColor = color;\n      }\n    } else {\n      if (element) {\n        element.childNodes[0] ? element.childNodes[0].style.borderBottomColor = color : element.childNodes[0];\n      }\n    }\n  };\n  /**\n   * @param currentOption\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.updateTextPropertySelection = function (currentOption) {\n    if (currentOption === 'bold') {\n      document.getElementById(this.pdfViewer.element.id + '_bold').classList.toggle('textprop-option-active');\n    } else if (currentOption === 'italic') {\n      document.getElementById(this.pdfViewer.element.id + '_italic').classList.toggle('textprop-option-active');\n    } else if (currentOption === 'underline') {\n      document.getElementById(this.pdfViewer.element.id + '_underline_textinput').classList.toggle('textprop-option-active');\n      document.getElementById(this.pdfViewer.element.id + '_strikeout').classList.remove('textprop-option-active');\n    } else if (currentOption === 'strikeout') {\n      document.getElementById(this.pdfViewer.element.id + '_strikeout').classList.toggle('textprop-option-active');\n      document.getElementById(this.pdfViewer.element.id + '_underline_textinput').classList.remove('textprop-option-active');\n    }\n  };\n  /**\n   * @param family\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.updateFontFamilyInIcon = function (family) {\n    this.fontFamily.value = family;\n  };\n  /**\n   * @param align\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.updateTextAlignInIcon = function (align) {\n    var className = 'e-btn-icon e-pv-left-align-icon e-pv-icon';\n    var leftAlign = document.getElementById(this.pdfViewer.element.id + '_left_align');\n    var rightAlign = document.getElementById(this.pdfViewer.element.id + '_right_align');\n    var centerAlign = document.getElementById(this.pdfViewer.element.id + '_center_align');\n    var justifyAlign = document.getElementById(this.pdfViewer.element.id + '_justify_align');\n\n    if (!isBlazor()) {\n      leftAlign.classList.remove('textprop-option-active');\n      rightAlign.classList.remove('textprop-option-active');\n      centerAlign.classList.remove('textprop-option-active');\n      justifyAlign.classList.remove('textprop-option-active');\n    }\n\n    if (align === 'Left') {\n      leftAlign.classList.add('textprop-option-active');\n    } else if (align === 'Right') {\n      className = 'e-btn-icon e-pv-right-align-icon e-pv-icon';\n      rightAlign.classList.add('textprop-option-active');\n    } else if (align === 'Center') {\n      className = 'e-btn-icon e-pv-center-align-icon e-pv-icon';\n      centerAlign.classList.add('textprop-option-active');\n    } else if (align === 'Justify') {\n      className = 'e-btn-icon e-pv-justfiy-align-icon e-pv-icon';\n      justifyAlign.classList.add('textprop-option-active');\n    }\n\n    document.getElementById(this.pdfViewer.element.id + '_annotation_textalign').children[0].className = className;\n  };\n  /**\n   * @param size\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.updateFontSizeInIcon = function (size) {\n    this.fontSize.value = size + 'px';\n  };\n\n  AnnotationToolbar.prototype.updateOpacityIndicator = function () {\n    // eslint-disable-next-line\n    this.opacityIndicator.textContent = parseInt(Math.round(this.opacitySlider.value).toString()) + '%';\n  };\n\n  AnnotationToolbar.prototype.updateThicknessIndicator = function () {\n    this.thicknessIndicator.textContent = this.thicknessSlider.value + ' pt';\n  };\n\n  AnnotationToolbar.prototype.createSlider = function (idString) {\n    var outerContainer = createElement('div', {\n      className: 'e-pv-annotation-opacity-popup-container'\n    });\n    document.body.appendChild(outerContainer);\n    var label = createElement('span', {\n      id: idString + '_label',\n      className: 'e-pv-annotation-opacity-label'\n    });\n    label.textContent = this.pdfViewer.localeObj.getConstant('Opacity');\n    var sliderElement = createElement('div', {\n      id: idString + '_slider'\n    });\n    this.opacitySlider = new Slider({\n      type: 'MinRange',\n      cssClass: 'e-pv-annotation-opacity-slider',\n      max: 100,\n      min: 0\n    }); // eslint-disable-next-line max-len\n\n    this.opacityIndicator = createElement('div', {\n      id: idString + '_opacity_indicator',\n      className: 'e-pv-annotation-opacity-indicator'\n    });\n    this.opacityIndicator.textContent = '100%';\n\n    if (!this.pdfViewer.enableRtl) {\n      outerContainer.appendChild(label);\n      outerContainer.appendChild(sliderElement);\n      this.opacitySlider.appendTo(sliderElement);\n      this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n      outerContainer.appendChild(this.opacityIndicator);\n    } else {\n      outerContainer.appendChild(this.opacityIndicator);\n      outerContainer.appendChild(sliderElement);\n      this.opacitySlider.enableRtl = true;\n      this.opacitySlider.appendTo(sliderElement);\n      this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n      outerContainer.appendChild(label);\n    }\n\n    return outerContainer;\n  };\n\n  AnnotationToolbar.prototype.createThicknessSlider = function (idString) {\n    var outerContainer = createElement('div', {\n      className: 'e-pv-annotation-thickness-popup-container'\n    });\n    document.body.appendChild(outerContainer);\n    var label = createElement('span', {\n      id: idString + '_label',\n      className: 'e-pv-annotation-thickness-label'\n    });\n    label.textContent = this.pdfViewer.localeObj.getConstant('Line Thickness');\n    var sliderElement = createElement('div', {\n      id: idString + '_slider'\n    });\n    this.thicknessSlider = new Slider({\n      type: 'MinRange',\n      cssClass: 'e-pv-annotation-thickness-slider',\n      max: 12,\n      min: 0\n    }); // eslint-disable-next-line max-len\n\n    this.thicknessIndicator = createElement('div', {\n      id: idString + '_thickness_indicator',\n      className: 'e-pv-annotation-thickness-indicator'\n    });\n    this.thicknessIndicator.textContent = '0 pt';\n\n    if (!this.pdfViewer.enableRtl) {\n      outerContainer.appendChild(label);\n      outerContainer.appendChild(sliderElement);\n      this.thicknessSlider.appendTo(sliderElement);\n      outerContainer.appendChild(this.thicknessIndicator);\n    } else {\n      outerContainer.appendChild(this.thicknessIndicator);\n      outerContainer.appendChild(sliderElement);\n      this.thicknessSlider.enableRtl = true;\n      this.thicknessSlider.appendTo(sliderElement);\n      outerContainer.appendChild(label);\n    }\n\n    this.thicknessSlider.element.parentElement.classList.add('e-pv-annotation-thickness-slider-container');\n    return outerContainer;\n  };\n\n  AnnotationToolbar.prototype.afterToolbarCreation = function () {\n    // eslint-disable-next-line max-len\n    this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n    this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline')); // eslint-disable-next-line max-len\n\n    this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n    this.deleteItem = this.primaryToolbar.addClassToolbarItem('_annotation_delete', 'e-pv-annotation-delete', this.pdfViewer.localeObj.getConstant('Delete')); // eslint-disable-next-line max-len\n\n    this.freeTextEditItem = this.primaryToolbar.addClassToolbarItem('_annotation_freeTextEdit', 'e-pv-annotation-freeTextEdit', this.pdfViewer.localeObj.getConstant('Free Text')); // eslint-disable-next-line max-len\n\n    this.inkAnnotationItem = this.primaryToolbar.addClassToolbarItem('_annotation_ink', 'e-pv-annotation-ink', this.pdfViewer.localeObj.getConstant('Draw Ink')); // eslint-disable-next-line max-len\n\n    this.commentItem = this.primaryToolbar.addClassToolbarItem('_annotation_commentPanel', 'e-pv-annotation-comment-panel', this.pdfViewer.localeObj.getConstant('Comment Panel'));\n    this.closeItem = this.primaryToolbar.addClassToolbarItem('_annotation_close', 'e-pv-annotation-tools-close', null);\n    this.selectAnnotationDeleteItem(false);\n    this.enableTextMarkupAnnotationPropertiesTools(false);\n    this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel);\n  };\n\n  AnnotationToolbar.prototype.onToolbarClicked = function (args) {\n    // eslint-disable-next-line\n    var annotation = this.pdfViewer.selectedItems.annotations[0];\n\n    if (args.originalEvent.target.id) {\n      this.pdfViewer.toolbarModule.updateStampItems();\n    }\n\n    this.pdfViewer.toolbarModule.deSelectCommentAnnotation();\n\n    switch (args.originalEvent.target.id) {\n      case this.pdfViewer.element.id + '_highlight':\n      case this.pdfViewer.element.id + '_highlightIcon':\n        this.pdfViewer.tool = '';\n\n        if (!Browser.isDevice) {\n          this.pdfViewer.tool = '';\n          this.resetFreeTextAnnot();\n          this.handleHighlight();\n        } else {\n          this.pdfViewer.annotationModule.setAnnotationMode('Highlight');\n          this.textMarkupForMobile(args);\n        }\n\n        this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n        break;\n\n      case this.pdfViewer.element.id + '_underline':\n      case this.pdfViewer.element.id + '_underlineIcon':\n        this.pdfViewer.tool = '';\n\n        if (!Browser.isDevice) {\n          this.pdfViewer.tool = '';\n          this.resetFreeTextAnnot();\n          this.handleUnderline();\n        } else {\n          this.pdfViewer.annotationModule.setAnnotationMode('Underline');\n          this.textMarkupForMobile(args);\n        }\n\n        this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n        break;\n\n      case this.pdfViewer.element.id + '_strikethrough':\n      case this.pdfViewer.element.id + '_strikethroughIcon':\n        this.pdfViewer.tool = '';\n\n        if (!Browser.isDevice) {\n          this.pdfViewer.tool = '';\n          this.resetFreeTextAnnot();\n          this.handleStrikethrough();\n        } else {\n          this.pdfViewer.annotationModule.setAnnotationMode('Strikethrough');\n          this.textMarkupForMobile(args);\n        }\n\n        this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_delete':\n      case this.pdfViewer.element.id + '_annotation_deleteIcon':\n        this.pdfViewer.annotationModule.deleteAnnotation();\n        this.resetFreeTextAnnot();\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_commentPanel':\n      case this.pdfViewer.element.id + '_annotation_commentPanelIcon':\n        this.inkAnnotationSelected = false;\n        var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n          this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);\n        }\n\n        if (commentPanel.style.display === 'block') {\n          this.pdfViewerBase.navigationPane.closeCommentPanelContainer();\n        } else {\n          this.pdfViewer.annotationModule.showCommentsPanel();\n        }\n\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_close':\n      case this.pdfViewer.element.id + '_annotation_closeIcon':\n        this.inkAnnotationSelected = false;\n        var commentsPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n\n        if (commentsPanel.style.display === 'block') {\n          this.pdfViewerBase.navigationPane.closeCommentPanelContainer();\n        }\n\n        this.showAnnotationToolbar(this.primaryToolbar.annotationItem);\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_freeTextEdit':\n      case this.pdfViewer.element.id + '_annotation_freeTextEditIcon':\n        if (!Browser.isDevice) {\n          this.resetFreeTextAnnot();\n          this.handleFreeTextEditor();\n        } else {\n          this.pdfViewer.annotationModule.setAnnotationMode('FreeText');\n          this.FreeTextForMobile();\n        }\n\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_signature':\n      case this.pdfViewer.element.id + '_annotation_signatureIcon':\n        this.inkAnnotationSelected = false;\n        this.updateSignatureCount();\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_ink':\n      case this.pdfViewer.element.id + '_annotation_inkIcon':\n        if (annotation) {\n          this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n        }\n\n        this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n\n        if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n          // eslint-disable-next-line\n          var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n\n          if (currentPageNumber && currentPageNumber !== '') {\n            // eslint-disable-next-line\n            this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n            this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n          }\n        }\n\n        if (!this.inkAnnotationSelected) {\n          this.deselectAllItems();\n          this.drawInkAnnotation();\n        } else {\n          this.inkAnnotationSelected = false;\n        }\n\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_shapesIcon':\n      case this.pdfViewer.element.id + '_annotation_shapes':\n        if (Browser.isDevice) {\n          this.shapeToolMobile(args);\n        }\n\n        break;\n\n      case this.pdfViewer.element.id + '_annotation_calibrateIcon':\n      case this.pdfViewer.element.id + '_annotation_calibrate':\n        if (Browser.isDevice) {\n          this.calibrateToolMobile(args);\n        }\n\n        break;\n\n      case this.pdfViewer.element.id + '_commentIcon':\n      case this.pdfViewer.element.id + '_comment':\n        this.pdfViewerBase.isAddComment = true;\n        this.pdfViewerBase.isCommentIconAdded = true;\n        var commentsButton = document.getElementById(this.pdfViewer.element.id + '_comment');\n        commentsButton.classList.add('e-pv-select');\n        this.pdfViewer.toolbarModule.addComments(args);\n        break;\n    }\n  };\n\n  AnnotationToolbar.prototype.addInkAnnotation = function () {\n    this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n\n    if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n      // eslint-disable-next-line\n      var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n\n      if (currentPageNumber && currentPageNumber !== '') {\n        // eslint-disable-next-line\n        this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n\n        if (!isBlazor()) {\n          this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n        } else {\n          this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n          this.pdfViewerBase.focusViewerContainer();\n        }\n      }\n    }\n\n    if (!this.inkAnnotationSelected) {\n      this.deselectAllItemsInBlazor();\n      this.drawInkAnnotation();\n    } else {\n      this.inkAnnotationSelected = false;\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.deselectInkAnnotation = function () {\n    if (!isBlazor()) {\n      this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n    } else {\n      this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n      this.pdfViewerBase.focusViewerContainer();\n    }\n  };\n\n  AnnotationToolbar.prototype.drawInkAnnotation = function () {\n    this.inkAnnotationSelected = true;\n\n    if (!isBlazor()) {\n      this.primaryToolbar.selectItem(this.inkAnnotationItem);\n    } else {\n      this.primaryToolbar.selectItem(this.InkAnnotationElement);\n    }\n\n    this.enableSignaturePropertiesTools(true);\n    this.pdfViewerBase.isToolbarInkClicked = true;\n    this.pdfViewer.annotationModule.inkAnnotationModule.drawInk();\n  };\n\n  AnnotationToolbar.prototype.resetFreeTextAnnot = function () {\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule) {\n      this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n      this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot = false;\n\n      if (!Browser.isDevice) {\n        if (this.freeTextEditItem && !isBlazor()) {\n          this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n        } else if (isBlazor()) {\n          this.primaryToolbar.deSelectItem(this.FreeTextElement);\n        }\n\n        this.enableFreeTextAnnotationPropertiesTools(false);\n      }\n    }\n\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule) {\n      // eslint-disable-next-line\n      var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n\n      if (currentPageNumber && currentPageNumber !== '') {\n        // eslint-disable-next-line\n        this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n\n        if (!isBlazor()) {\n          this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n        } else {\n          this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n        }\n      }\n    }\n\n    this.inkAnnotationSelected = false;\n  };\n\n  AnnotationToolbar.prototype.updateInkannotationItems = function () {\n    if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule && this.inkAnnotationSelected) {\n      // eslint-disable-next-line\n      var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n\n      if (currentPageNumber && currentPageNumber !== '') {\n        // eslint-disable-next-line\n        this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n        this.pdfViewerBase.isToolbarInkClicked = true;\n        this.pdfViewer.tool = 'Ink';\n        this.pdfViewer.clearSelection(currentPageNumber);\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.showSignaturepanel = function () {\n    this.pdfViewerBase.isToolbarSignClicked = true;\n    this.pdfViewerBase.signatureModule.showSignatureDialog(true);\n  };\n\n  AnnotationToolbar.prototype.handleFreeTextEditor = function () {\n    // eslint-disable-next-line\n    var annotation = this.pdfViewer.selectedItems.annotations[0];\n    this.enableFreeTextAnnotationPropertiesTools(true);\n\n    if (annotation) {\n      this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n    }\n\n    this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n    }\n\n    this.isStrikethroughEnabled = false;\n    this.isHighlightEnabled = false;\n    this.isUnderlineEnabled = false;\n    var freeTextAnnotationModule = this.pdfViewer.annotation.freeTextAnnotationModule;\n    freeTextAnnotationModule.setAnnotationType('FreeText');\n    freeTextAnnotationModule.isNewFreeTextAnnot = true;\n    freeTextAnnotationModule.isNewAddedAnnot = true;\n    this.updateInteractionTools();\n    this.primaryToolbar.deSelectItem(this.highlightItem);\n    this.primaryToolbar.deSelectItem(this.underlineItem);\n    this.primaryToolbar.deSelectItem(this.strikethroughItem);\n    this.primaryToolbar.selectItem(this.freeTextEditItem);\n    this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.fillColor);\n    this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.borderColor);\n    this.updateColorInIcon(this.fontColorElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.fontColor);\n    this.updateFontFamilyInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontFamily);\n    this.updateFontSizeInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontSize);\n    this.updateTextAlignInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.textAlign);\n    this.updateFontFamily();\n  };\n\n  AnnotationToolbar.prototype.updateFontFamily = function () {\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold ? this.updateFontFamilyIcon('_bold', true) : this.updateFontFamilyIcon('_bold', false); // eslint-disable-next-line max-len\n\n    this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic ? this.updateFontFamilyIcon('_italic', true) : this.updateFontFamilyIcon('_italic', false);\n\n    if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline) {\n      this.updateFontFamilyIcon('_underline_textinput', true);\n      this.updateFontFamilyIcon('_strikeout', false);\n    } else {\n      this.updateFontFamilyIcon('_underline_textinput', false);\n    }\n\n    if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough) {\n      this.updateFontFamilyIcon('_strikeout', true);\n      this.updateFontFamilyIcon('_underline_textinput', false);\n    } else {\n      this.updateFontFamilyIcon('_strikeout', false);\n    }\n  };\n\n  AnnotationToolbar.prototype.updateFontFamilyIcon = function (fontFamily, isActive) {\n    var fontFamilyElement = document.getElementById(this.pdfViewer.element.id + fontFamily);\n    isActive ? fontFamilyElement.classList.add('textprop-option-active') : fontFamilyElement.classList.remove('textprop-option-active');\n  };\n  /**\n   * @param element\n   * @param isInitialLoading\n   * @param element\n   * @param isInitialLoading\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.showAnnotationToolbar = function (element, isInitialLoading) {\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      if (!this.isToolbarHidden) {\n        // eslint-disable-next-line\n        var annotationModule = this.pdfViewer.annotationModule;\n\n        if (element) {\n          this.primaryToolbar.deSelectItem(element);\n        } else {\n          if (this.pdfViewer.enableToolbar) {\n            this.primaryToolbar.deSelectItem(this.primaryToolbar.annotationItem);\n          }\n        }\n\n        this.adjustViewer(false); // eslint-disable-next-line max-len\n\n        if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n          this.enablePropertiesTool(annotationModule);\n        } else {\n          this.deselectAllItems();\n        }\n\n        this.toolbarElement.style.display = 'none';\n\n        if (!isInitialLoading) {\n          this.pdfViewer.isAnnotationToolbarVisible = false;\n        }\n\n        if (this.pdfViewerBase.isPanMode) {\n          this.primaryToolbar.updateInteractionTools(false);\n        } else {\n          this.primaryToolbar.updateInteractionTools(true);\n        }\n      } else {\n        var toolBarInitialStatus = void 0;\n\n        if (this.toolbarElement) {\n          toolBarInitialStatus = this.toolbarElement.style.display;\n          this.toolbarElement.style.display = 'block';\n        }\n\n        if (!isInitialLoading) {\n          this.pdfViewer.isAnnotationToolbarVisible = true;\n        }\n\n        if (element) {\n          this.primaryToolbar.selectItem(element);\n        } else {\n          if (this.pdfViewer.enableToolbar) {\n            this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem);\n          }\n        }\n\n        if (toolBarInitialStatus === 'none') {\n          this.adjustViewer(true);\n        }\n      } // eslint-disable-next-line max-len\n\n\n      if (this.pdfViewer.magnification && this.pdfViewer.magnification.fitType === 'fitToPage') {\n        this.pdfViewer.magnification.fitToPage();\n      }\n\n      this.enableAnnotationAddTools(true);\n      this.isToolbarHidden = !this.isToolbarHidden;\n    }\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.enablePropertiesTool = function (annotationModule) {\n    this.isHighlightEnabled = false;\n    this.isUnderlineEnabled = false;\n    this.isStrikethroughEnabled = false;\n\n    if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n      annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n    }\n\n    this.primaryToolbar.deSelectItem(this.highlightItem);\n    this.primaryToolbar.deSelectItem(this.underlineItem);\n    this.primaryToolbar.deSelectItem(this.strikethroughItem);\n    this.enableTextMarkupAnnotationPropertiesTools(true); // eslint-disable-next-line max-len\n\n    this.updateColorInIcon(this.colorDropDownElement, annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);\n    this.selectAnnotationDeleteItem(true);\n  };\n\n  AnnotationToolbar.prototype.applyAnnotationToolbarSettings = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('HighlightTool') !== -1) {\n        this.showHighlightTool(true, 0, 0);\n      } else {\n        this.showHighlightTool(false, 0, 0);\n      }\n\n      if (annotationToolbarItems.indexOf('UnderlineTool') !== -1) {\n        this.showUnderlineTool(true, 1, 1);\n      } else {\n        this.showUnderlineTool(false, 1, 1);\n      }\n\n      if (annotationToolbarItems.indexOf('StrikethroughTool') !== -1) {\n        this.showStrikethroughTool(true, 2, 2);\n      } else {\n        this.showStrikethroughTool(false, 2, 2);\n      }\n\n      if (annotationToolbarItems.indexOf('ShapeTool') !== -1) {\n        this.showShapeAnnotationTool(true, 4, 4);\n      } else {\n        this.showShapeAnnotationTool(false, 4, 4);\n      }\n\n      if (annotationToolbarItems.indexOf('CalibrateTool') !== -1) {\n        this.showCalibrateAnnotationTool(true, 6, 6);\n      } else {\n        this.showCalibrateAnnotationTool(false, 6, 6);\n      }\n\n      if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n        this.showColorEditTool(true, 22, 22);\n      } else {\n        this.showColorEditTool(false, 22, 22);\n      }\n\n      if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n        this.showStrokeColorEditTool(true, 23, 23);\n      } else {\n        this.showStrokeColorEditTool(false, 23, 23);\n      }\n\n      if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n        this.showThicknessEditTool(true, 24, 24);\n      } else {\n        this.showThicknessEditTool(false, 24, 24);\n      }\n\n      if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n        this.showOpacityEditTool(true, 25, 25);\n      } else {\n        this.showOpacityEditTool(false, 25, 25);\n      }\n\n      if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n        this.showAnnotationDeleteTool(true, 27, 27);\n      } else {\n        this.showAnnotationDeleteTool(false, 27, 27);\n      }\n\n      if (annotationToolbarItems.indexOf('StampAnnotationTool') !== -1) {\n        this.showStampAnnotationTool(true, 10, 10);\n      } else {\n        this.showStampAnnotationTool(false, 10, 10);\n      }\n\n      if (annotationToolbarItems.indexOf('HandWrittenSignatureTool') !== -1) {\n        this.showSignatureTool(true, 12, 12);\n      } else {\n        this.showSignatureTool(false, 12, 12);\n      }\n\n      if (annotationToolbarItems.indexOf('FreeTextAnnotationTool') !== -1) {\n        this.showFreeTextAnnotationTool(true, 8, 8);\n      } else {\n        this.showFreeTextAnnotationTool(false, 8, 8);\n      }\n\n      if (annotationToolbarItems.indexOf('FontFamilyAnnotationTool') !== -1) {\n        this.showFontFamilyAnnotationTool(true, 16, 16);\n      } else {\n        this.showFontFamilyAnnotationTool(false, 16, 16);\n      }\n\n      if (annotationToolbarItems.indexOf('FontSizeAnnotationTool') !== -1) {\n        this.showFontSizeAnnotationTool(true, 17, 17);\n      } else {\n        this.showFontSizeAnnotationTool(false, 17, 17);\n      }\n\n      if (annotationToolbarItems.indexOf('FontStylesAnnotationTool') !== -1) {\n        this.showFontStylesAnnotationTool(true, 20, 20);\n      } else {\n        this.showFontStylesAnnotationTool(false, 20, 20);\n      }\n\n      if (annotationToolbarItems.indexOf('FontAlignAnnotationTool') !== -1) {\n        this.showFontAlignAnnotationTool(true, 18, 18);\n      } else {\n        this.showFontAlignAnnotationTool(false, 18, 18);\n      }\n\n      if (annotationToolbarItems.indexOf('FontColorAnnotationTool') !== -1) {\n        this.showFontColorAnnotationTool(true, 19, 19);\n      } else {\n        this.showFontColorAnnotationTool(false, 19, 19);\n      }\n\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 28, 28);\n      } else {\n        this.showCommentPanelTool(false, 28, 28);\n      }\n\n      this.showInkAnnotationTool();\n      this.showSeparator();\n    }\n  };\n\n  AnnotationToolbar.prototype.applyMobileAnnotationToolbarSettings = function () {\n    // eslint-disable-next-line\n    var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n\n    if (annotationToolbarItems) {\n      if (annotationToolbarItems.indexOf('HighlightTool') !== -1) {\n        this.showHighlightTool(true, 2, 2);\n      } else {\n        this.showHighlightTool(false, 2, 2);\n      }\n\n      if (annotationToolbarItems.indexOf('UnderlineTool') !== -1) {\n        this.showUnderlineTool(true, 3, 3);\n      } else {\n        this.showUnderlineTool(false, 3, 3);\n      }\n\n      if (annotationToolbarItems.indexOf('StrikethroughTool') !== -1) {\n        this.showStrikethroughTool(true, 4, 4);\n      } else {\n        this.showStrikethroughTool(false, 4, 4);\n      }\n\n      if (annotationToolbarItems.indexOf('ShapeTool') !== -1) {\n        this.showShapeAnnotationTool(true, 6, 6);\n      } else {\n        this.showShapeAnnotationTool(false, 6, 6);\n      }\n\n      if (annotationToolbarItems.indexOf('CalibrateTool') !== -1) {\n        this.showCalibrateAnnotationTool(true, 8, 8);\n      } else {\n        this.showCalibrateAnnotationTool(false, 8, 8);\n      }\n\n      var toolbarItems = this.pdfViewer.toolbarSettings.toolbarItems;\n\n      if (toolbarItems && toolbarItems.indexOf('CommentTool') !== -1) {\n        this.showStickyNoteToolInMobile(true);\n      } else {\n        this.showStickyNoteToolInMobile(false);\n      }\n\n      if (annotationToolbarItems.indexOf('StampAnnotationTool') !== -1) {\n        this.showStampAnnotationTool(true, 12, 12);\n      } else {\n        this.showStampAnnotationTool(false, 12, 12);\n      }\n\n      if (annotationToolbarItems.indexOf('HandWrittenSignatureTool') !== -1) {\n        this.showSignatureTool(true, 14, 14);\n      } else {\n        this.showSignatureTool(false, 14, 14);\n      }\n\n      if (annotationToolbarItems.indexOf('FreeTextAnnotationTool') !== -1) {\n        this.showFreeTextAnnotationTool(true, 10, 10);\n      } else {\n        this.showFreeTextAnnotationTool(false, 10, 10);\n      }\n\n      if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n        this.showCommentPanelTool(true, 18, 18);\n      } else {\n        this.showCommentPanelTool(false, 18, 18);\n      }\n\n      if (annotationToolbarItems.indexOf('InkAnnotationTool') !== -1) {\n        this.showInkTool(true, 16, 16);\n      } else {\n        this.showInkTool(false, 16, 16);\n      }\n\n      this.showSeparatorInMobile();\n    }\n  };\n\n  AnnotationToolbar.prototype.showStickyNoteToolInMobile = function (isShow) {\n    this.isCommentBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, 0, 0);\n  };\n\n  AnnotationToolbar.prototype.showSeparatorInMobile = function () {\n    if (!this.isCommentBtnVisible) {\n      this.applyHideToToolbar(false, 1, 1);\n    }\n\n    if (!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible) {\n      this.applyHideToToolbar(false, 5, 5);\n    }\n\n    if (!this.isShapeBtnVisible) {\n      this.applyHideToToolbar(false, 7, 7);\n    }\n\n    if (!this.isCalibrateBtnVisible) {\n      this.applyHideToToolbar(false, 9, 9);\n    }\n\n    if (!this.isFreeTextBtnVisible) {\n      this.applyHideToToolbar(false, 11, 11);\n    }\n\n    if (!this.isStampBtnVisible) {\n      this.applyHideToToolbar(false, 13, 13);\n    }\n\n    if (!this.isSignatureBtnVisible) {\n      this.applyHideToToolbar(false, 15, 15);\n    }\n\n    if (!this.isInkBtnVisible) {\n      this.applyHideToToolbar(false, 17, 17);\n    }\n  };\n\n  AnnotationToolbar.prototype.showInkAnnotationTool = function () {\n    if (this.pdfViewer.toolbarSettings.annotationToolbarItems.indexOf('InkAnnotationTool') !== -1) {\n      this.showInkTool(true, 14, 14);\n    } else {\n      this.showInkTool(false, 14, 14);\n    }\n  };\n\n  AnnotationToolbar.prototype.showSeparator = function () {\n    if (!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible) {\n      this.applyHideToToolbar(false, 3, 3);\n    }\n\n    if (!this.isShapeBtnVisible) {\n      this.applyHideToToolbar(false, 5, 5);\n    }\n\n    if (!this.isCalibrateBtnVisible) {\n      this.applyHideToToolbar(false, 7, 7);\n    }\n\n    if (!this.isFreeTextBtnVisible) {\n      this.applyHideToToolbar(false, 9, 9);\n    }\n\n    if (!this.isStampBtnVisible) {\n      this.applyHideToToolbar(false, 11, 11);\n    }\n\n    if (!this.isSignatureBtnVisible) {\n      this.applyHideToToolbar(false, 13, 13);\n    }\n\n    if (!this.isInkBtnVisible) {\n      this.applyHideToToolbar(false, 15, 15);\n    } // eslint-disable-next-line max-len\n\n\n    if (!this.isFontFamilyToolVisible && !this.isFontSizeToolVisible && !this.isFontColorToolVisible && !this.isFontAlignToolVisible && !this.isFontStylesToolVisible) {\n      this.applyHideToToolbar(false, 21, 21);\n    } // eslint-disable-next-line max-len\n\n\n    if (!this.isColorToolVisible && !this.isStrokeColorToolVisible && !this.isThicknessToolVisible && !this.isOpacityToolVisible || !this.isDeleteAnnotationToolVisible) {\n      this.applyHideToToolbar(false, 26, 26);\n    }\n  };\n\n  AnnotationToolbar.prototype.showHighlightTool = function (isShow, startIndex, endIndex) {\n    this.isHighlightBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showUnderlineTool = function (isShow, startIndex, endIndex) {\n    this.isUnderlineBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showStrikethroughTool = function (isShow, startIndex, endIndex) {\n    this.isStrikethroughBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showShapeAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isShapeBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showCalibrateAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isCalibrateBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showFreeTextAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFreeTextBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showStampAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isStampBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showSignatureTool = function (isShow, startIndex, endIndex) {\n    this.isSignatureBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showInkTool = function (isShow, startIndex, endIndex) {\n    this.isInkBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showFontFamilyAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFontFamilyToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showFontSizeAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFontSizeToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showFontAlignAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFontAlignToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showFontColorAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFontColorToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showFontStylesAnnotationTool = function (isShow, startIndex, endIndex) {\n    this.isFontStylesToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showColorEditTool = function (isShow, startIndex, endIndex) {\n    this.isColorToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showStrokeColorEditTool = function (isShow, startIndex, endIndex) {\n    this.isStrokeColorToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showThicknessEditTool = function (isShow, startIndex, endIndex) {\n    this.isThicknessToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showOpacityEditTool = function (isShow, startIndex, endIndex) {\n    this.isOpacityToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showAnnotationDeleteTool = function (isShow, startIndex, endIndex) {\n    this.isDeleteAnnotationToolVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.showCommentPanelTool = function (isShow, startIndex, endIndex) {\n    this.isCommentPanelBtnVisible = isShow;\n    this.applyHideToToolbar(isShow, startIndex, endIndex);\n  };\n\n  AnnotationToolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n    var isHide = !show;\n\n    for (var index = startIndex; index <= endIndex; index++) {\n      var toolbar_1 = void 0;\n      var propertyToolbarElement = this.propertyToolbar && this.propertyToolbar.element ? this.propertyToolbar.element : null;\n      var toolbarElement = this.toolbar && this.toolbar.element ? this.toolbar.element : null;\n\n      if (toolbarElement && toolbarElement.children && toolbarElement.children.length > 0) {\n        toolbar_1 = this.toolbar;\n      } else if (Browser.isDevice && propertyToolbarElement && propertyToolbarElement.children && propertyToolbarElement.children.length > 0) {\n        toolbar_1 = this.propertyToolbar;\n      }\n\n      if (toolbar_1.items[index]) {\n        var className = toolbar_1.items[index].cssClass;\n\n        if (className && className !== '') {\n          // Querying the toolbar item\n          var element = toolbar_1.element.querySelector('.' + className);\n\n          if (element) {\n            this.toolbar.hideItem(element, isHide);\n          }\n        } else {\n          toolbar_1.hideItem(index, isHide);\n        }\n      }\n    }\n  };\n  /**\n   * @param isAdjust\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.adjustViewer = function (isAdjust) {\n    var splitterElement;\n    var toolbarContainer;\n    var annotationToolbarHeight;\n\n    if (isBlazor()) {\n      splitterElement = this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');\n      toolbarContainer = this.pdfViewer.element.querySelector('.e-pv-toolbar');\n      var annotationToolbarContainer = this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');\n      annotationToolbarHeight = this.getToolbarHeight(annotationToolbarContainer);\n    } else {\n      splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n      toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n      annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n    }\n\n    var toolbarHeight = this.getToolbarHeight(toolbarContainer);\n    var sideBarToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n    var sideBarContentContainer = this.pdfViewerBase.navigationPane.sideBarContentContainer;\n    var commentsContainer = this.pdfViewerBase.navigationPane.commentPanelContainer;\n    var commentPanelResizer = this.pdfViewerBase.navigationPane.commentPanelResizer;\n\n    if (isAdjust) {\n      if (this.pdfViewer.enableToolbar) {\n        sideBarToolbar.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n        sideBarContentContainer.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n        splitterElement.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n        commentsContainer.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n        commentPanelResizer.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n      } else {\n        sideBarToolbar.style.top = annotationToolbarHeight + 'px';\n        sideBarContentContainer.style.top = annotationToolbarHeight + 'px';\n        splitterElement.style.top = annotationToolbarHeight + 'px';\n        commentsContainer.style.top = annotationToolbarHeight + 'px';\n        commentPanelResizer.style.top = toolbarHeight + annotationToolbarHeight + 'px';\n      }\n\n      if (!this.pdfViewer.enableToolbar) {\n        toolbarHeight = 0;\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight + toolbarHeight) + 'px';\n      sideBarToolbar.style.height = this.getNavigationToolbarHeight(annotationToolbarHeight + toolbarHeight) + 'px';\n      splitterElement.style.height = this.getNavigationToolbarHeight(annotationToolbarHeight + toolbarHeight) + 'px';\n    } else {\n      if (this.pdfViewer.enableToolbar) {\n        // eslint-disable-next-line max-len\n        sideBarToolbar.style.top = toolbarHeight + 'px';\n        sideBarContentContainer.style.top = toolbarHeight + 'px';\n        splitterElement.style.top = toolbarHeight + 'px';\n        commentsContainer.style.top = toolbarHeight + 'px';\n        commentPanelResizer.style.top = toolbarHeight + 'px';\n      } else {\n        sideBarToolbar.style.top = 1 + 'px';\n        sideBarToolbar.style.height = '100%';\n        sideBarContentContainer.style.top = 1 + 'px';\n        sideBarContentContainer.style.height = '100%';\n        splitterElement.style.top = 1 + 'px';\n        splitterElement.style.height = '100%';\n        commentsContainer.style.top = 1 + 'px';\n        commentsContainer.style.height = '100%';\n        commentPanelResizer.style.top = 1 + 'px';\n        commentPanelResizer.style.height = '100%';\n      }\n\n      if (!this.pdfViewer.enableToolbar) {\n        toolbarHeight = 0;\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight) + 'px';\n      sideBarToolbar.style.height = this.getNavigationToolbarHeight(toolbarHeight);\n      splitterElement.style.height = this.getNavigationToolbarHeight(toolbarHeight);\n\n      if (this.pdfViewerBase.viewerContainer.style.height === '0px') {\n        // eslint-disable-next-line\n        this.pdfViewerBase.viewerContainer.style.height = parseInt(this.pdfViewer.element.style.height) - parseInt(sideBarToolbar.style.top) + 'px';\n      }\n    }\n\n    if (isBlazor()) {\n      this.updateContentContainerHeight(isAdjust, true);\n    } else {\n      this.updateContentContainerHeight(isAdjust);\n    }\n  };\n\n  AnnotationToolbar.prototype.updateContentContainerHeight = function (isAdjust, isBlazor) {\n    var annotationToolbarHeight;\n\n    if (isBlazor) {\n      var annotationToolbarContainer = this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');\n      annotationToolbarHeight = this.getToolbarHeight(annotationToolbarContainer);\n    } else {\n      annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n    }\n\n    var sideBarClientRect = this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();\n\n    if (sideBarClientRect.height !== 0) {\n      if (isAdjust) {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height - annotationToolbarHeight + 'px';\n      } else {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height + annotationToolbarHeight + 'px';\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.getToolbarHeight = function (element) {\n    var toolbarHeight = element.getBoundingClientRect().height;\n\n    if (toolbarHeight === 0 && element === this.pdfViewerBase.getElement('_toolbarContainer')) {\n      // getComputedStyle gets the value from style and toolbar border height is added to it.\n      // eslint-disable-next-line\n      toolbarHeight = parseFloat(window.getComputedStyle(element)['height']) + this.toolbarBorderHeight;\n    }\n\n    return toolbarHeight;\n  };\n\n  AnnotationToolbar.prototype.getNavigationToolbarHeight = function (toolbarHeight) {\n    var height = this.pdfViewer.element.getBoundingClientRect().height;\n    return height !== 0 ? height - toolbarHeight + 'px' : '';\n  };\n\n  AnnotationToolbar.prototype.handleHighlight = function () {\n    if (!this.isHighlightEnabled) {\n      this.updateInteractionTools();\n      this.clearShapeMode();\n      this.clearMeasureMode();\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n      this.primaryToolbar.selectItem(this.highlightItem);\n      this.primaryToolbar.deSelectItem(this.underlineItem);\n      this.primaryToolbar.deSelectItem(this.strikethroughItem);\n      this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n      this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n      this.enableTextMarkupAnnotationPropertiesTools(true);\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = null;\n      this.setCurrentColorInPicker();\n      this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n      this.isHighlightEnabled = true;\n      this.isUnderlineEnabled = false;\n      this.isStrikethroughEnabled = false;\n    } else {\n      this.deselectAllItems();\n    }\n  };\n\n  AnnotationToolbar.prototype.handleUnderline = function () {\n    if (!this.isUnderlineEnabled) {\n      this.updateInteractionTools();\n      this.clearShapeMode();\n      this.clearMeasureMode();\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n      this.primaryToolbar.selectItem(this.underlineItem);\n      this.primaryToolbar.deSelectItem(this.highlightItem);\n      this.primaryToolbar.deSelectItem(this.strikethroughItem);\n      this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n      this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n      this.enableTextMarkupAnnotationPropertiesTools(true);\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = null;\n      this.setCurrentColorInPicker();\n      this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n      this.isUnderlineEnabled = true;\n      this.isHighlightEnabled = false;\n      this.isStrikethroughEnabled = false;\n    } else {\n      this.deselectAllItems();\n    }\n  };\n\n  AnnotationToolbar.prototype.handleStrikethrough = function () {\n    if (!this.isStrikethroughEnabled) {\n      this.updateInteractionTools();\n      this.clearShapeMode();\n      this.clearMeasureMode();\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n      this.primaryToolbar.selectItem(this.strikethroughItem);\n      this.primaryToolbar.deSelectItem(this.highlightItem);\n      this.primaryToolbar.deSelectItem(this.underlineItem);\n      this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n      this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n      this.enableTextMarkupAnnotationPropertiesTools(true);\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = null;\n      this.setCurrentColorInPicker(); // eslint-disable-next-line max-len\n\n      this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n      this.isStrikethroughEnabled = true;\n      this.isHighlightEnabled = false;\n      this.isUnderlineEnabled = false;\n    } else {\n      this.deselectAllItems();\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.deselectAllItemsInBlazor = function () {\n    if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);\n    }\n\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.primaryToolbar.deSelectItem(this.HighlightElement);\n      this.primaryToolbar.deSelectItem(this.UnderlineElement);\n      this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n      this.primaryToolbar.deSelectItem(this.FreeTextElement);\n      this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n\n      this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateTextMarkupButtons', false, false, false);\n    }\n\n    this.resetFreeTextAnnot();\n    this.clearTextMarkupMode();\n    this.clearShapeMode();\n    this.clearMeasureMode();\n    this.pdfViewer.tool = '';\n\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.enableTextMarkupAnnotationPropertiesTools(false);\n      this.enableFreeTextAnnotationPropertiesTools(false);\n      this.updateColorInIcon(this.colorDropDownElement, '#000000');\n      this.updateColorInIcon(this.strokeDropDownElement, '#000000');\n      this.updateColorInIcon(this.fontColorElement, '#000000');\n      this.selectAnnotationDeleteItem(false);\n    }\n\n    if (this.pdfViewer.annotationModule) {\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.deselectAllItems = function () {\n    var isBlazorPlatform = isBlazor();\n    this.isHighlightEnabled = false;\n    this.isUnderlineEnabled = false;\n    this.isStrikethroughEnabled = false;\n\n    if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n      this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);\n    }\n\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      if (isBlazorPlatform) {\n        this.primaryToolbar.deSelectItem(this.pdfViewer.toolbar.SelectToolElement);\n        this.primaryToolbar.selectItem(this.pdfViewer.toolbar.PanElement);\n        this.primaryToolbar.deSelectItem(this.HighlightElement);\n        this.primaryToolbar.deSelectItem(this.UnderlineElement);\n        this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n        this.primaryToolbar.deSelectItem(this.FreeTextElement);\n        this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n      } else {\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n        this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n      }\n    }\n\n    this.resetFreeTextAnnot();\n    this.clearTextMarkupMode();\n    this.clearShapeMode();\n    this.clearMeasureMode();\n    this.pdfViewer.tool = '';\n\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      this.enableTextMarkupAnnotationPropertiesTools(false);\n      this.enableFreeTextAnnotationPropertiesTools(false);\n      this.updateColorInIcon(this.colorDropDownElement, '#000000');\n      this.updateColorInIcon(this.strokeDropDownElement, '#000000');\n      this.updateColorInIcon(this.fontColorElement, '#000000');\n      this.selectAnnotationDeleteItem(false);\n    }\n\n    if (this.pdfViewer.annotationModule) {\n      this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n    }\n  };\n\n  AnnotationToolbar.prototype.updateInteractionTools = function () {\n    if (this.pdfViewer.enableTextSelection) {\n      this.pdfViewerBase.initiateTextSelectMode();\n\n      if (!Browser.isDevice) {\n        this.pdfViewer.toolbar.updateInteractionTools(true);\n      }\n    } else if (!Browser.isDevice) {\n      this.pdfViewer.toolbar.updateInteractionTools(false);\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.selectAnnotationDeleteItem = function (isEnable, deleteIconCicked) {\n    if (!isBlazor() && !Browser.isDevice) {\n      if (this.toolbar) {\n        if (isEnable) {\n          // eslint-disable-next-line\n          var annotation = this.pdfViewer.annotationModule.findCurrentAnnotation();\n\n          if (annotation) {\n            // eslint-disable-next-line\n            if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n              if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n                this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n              } else {\n                this.toolbar.enableItems(this.deleteItem.parentElement, false);\n              }\n            } else {\n              this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n            }\n          }\n        } else {\n          this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n        }\n      }\n    } else {\n      if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n        if (isEnable) {\n          // eslint-disable-next-line\n          var annotation = this.pdfViewer.annotationModule.findCurrentAnnotation();\n\n          if (annotation) {\n            // eslint-disable-next-line\n            if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n              if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n                this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n              } else {\n                this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(false);\n              }\n            } else if (this.pdfViewerBase.blazorUIAdaptor) {\n              this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n            }\n          }\n        } else if (this.pdfViewerBase.blazorUIAdaptor) {\n          this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n        }\n\n        if (deleteIconCicked) {\n          this.pdfViewerBase.focusViewerContainer();\n        }\n      }\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.enableTextMarkupAnnotationPropertiesTools = function (isEnable) {\n    if (!Browser.isDevice) {\n      if (!isBlazor()) {\n        this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n          this.toolbar.enableItems(this.strokeDropDownElement.parentElement, false);\n          this.toolbar.enableItems(this.thicknessElement.parentElement, false);\n          this.toolbar.enableItems(this.fontFamilyElement.parentElement, false);\n          this.toolbar.enableItems(this.fontSizeElement.parentElement, false);\n          this.toolbar.enableItems(this.fontColorElement.parentElement, false);\n          this.toolbar.enableItems(this.textAlignElement.parentElement, false);\n          this.toolbar.enableItems(this.textPropElement.parentElement, false);\n        }\n      } else {\n        // this.pdfViewer._dotnetInstance.invokeMethodAsync('AnnotationSelect', 'TextMarkup');\n        this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(isEnable);\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.checkAnnotationPropertiesChange = function () {\n    // eslint-disable-next-line\n    var annotation = this.pdfViewer.selectedItems.annotations[0];\n\n    if (annotation && annotation.annotationSettings) {\n      // eslint-disable-next-line\n      var isLock = annotation.annotationSettings.isLock;\n\n      if (isLock) {\n        if (this.pdfViewer.annotationModule.checkAllowedInteractions('PropertyChange', annotation)) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.enableAnnotationPropertiesTools = function (isEnable) {\n    if (!Browser.isDevice) {\n      var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n\n      if (!isEnable) {\n        isPropertiesChanges = true;\n      }\n\n      if (!isBlazor()) {\n        if (isPropertiesChanges) {\n          // eslint-disable-next-line max-len\n          if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n            this.toolbar.enableItems(this.colorDropDownElement.parentElement, false);\n          } else {\n            this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n          }\n\n          this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n          this.toolbar.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n          this.toolbar.enableItems(this.thicknessElement.parentElement, isEnable);\n\n          if (this.pdfViewer.enableShapeLabel) {\n            this.toolbar.enableItems(this.fontFamilyElement.parentElement, isEnable);\n            this.toolbar.enableItems(this.fontSizeElement.parentElement, isEnable);\n            this.toolbar.enableItems(this.fontColorElement.parentElement, isEnable);\n          }\n\n          this.toolbar.enableItems(this.textAlignElement.parentElement, false);\n          this.toolbar.enableItems(this.textPropElement.parentElement, false);\n        }\n      } else {\n        // this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n        this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(isEnable, isPropertiesChanges);\n      }\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.enableSignaturePropertiesTools = function (isEnable) {\n    if (!Browser.isDevice) {\n      var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n\n      if (!isEnable) {\n        isPropertiesChanges = true;\n      }\n\n      if (!isBlazor()) {\n        if (isPropertiesChanges) {\n          this.toolbar.enableItems(this.colorDropDownElement.parentElement, false);\n          this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n          this.toolbar.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n          this.toolbar.enableItems(this.thicknessElement.parentElement, isEnable);\n          this.toolbar.enableItems(this.textAlignElement.parentElement, false);\n          this.toolbar.enableItems(this.textPropElement.parentElement, false);\n          this.toolbar.enableItems(this.fontFamilyElement.parentElement, false);\n          this.toolbar.enableItems(this.fontSizeElement.parentElement, false);\n          this.toolbar.enableItems(this.fontColorElement.parentElement, false);\n          this.toolbar.enableItems(this.textAlignElement.parentElement, false);\n        }\n      } else {\n        //this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableSignaturePropertiesTools', isEnable, isPropertiesChanges);\n        this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(isEnable, isPropertiesChanges);\n      }\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.enableStampAnnotationPropertiesTools = function (isEnable) {\n    var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n\n    if (!isEnable) {\n      isPropertiesChanges = true;\n    }\n\n    if (!isBlazor()) {\n      if (isPropertiesChanges) {\n        this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.colorDropDownElement.parentElement, false);\n        this.toolbar.enableItems(this.strokeDropDownElement.parentElement, false);\n        this.toolbar.enableItems(this.thicknessElement.parentElement, false);\n        this.toolbar.enableItems(this.fontFamilyElement.parentElement, false);\n        this.toolbar.enableItems(this.fontSizeElement.parentElement, false);\n        this.toolbar.enableItems(this.fontColorElement.parentElement, false);\n        this.toolbar.enableItems(this.textAlignElement.parentElement, false);\n        this.toolbar.enableItems(this.textPropElement.parentElement, false);\n      }\n    } else {\n      // this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableStampAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n      this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(isEnable, isPropertiesChanges);\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.enableFreeTextAnnotationPropertiesTools = function (isEnable) {\n    var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n\n    if (!isEnable) {\n      isPropertiesChanges = true;\n    }\n\n    if (!isBlazor()) {\n      if (isPropertiesChanges) {\n        this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.thicknessElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.fontFamilyElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.fontSizeElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.fontColorElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.textAlignElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.textPropElement.parentElement, isEnable);\n      }\n    } else {\n      //this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableFreeTextAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n      this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(isEnable, isPropertiesChanges);\n    }\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.enableAnnotationAddTools = function (isEnable) {\n    if (this.toolbar && !Browser.isDevice) {\n      if (this.pdfViewer.enableTextMarkupAnnotation) {\n        this.toolbar.enableItems(this.highlightItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.underlineItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.strikethroughItem.parentElement, isEnable);\n      }\n\n      if (this.pdfViewer.enableShapeAnnotation) {\n        this.toolbar.enableItems(this.shapeElement.parentElement, isEnable);\n      }\n\n      if (this.pdfViewer.enableStampAnnotations) {\n        this.toolbar.enableItems(this.stampElement.parentElement, isEnable);\n      }\n\n      if (this.pdfViewer.enableMeasureAnnotation && this.pdfViewerBase.isCalibrateAnnotationModule()) {\n        this.toolbar.enableItems(this.calibrateElement.parentElement, isEnable);\n      }\n\n      if (this.pdfViewer.enableFreeText) {\n        this.toolbar.enableItems(this.freeTextEditItem.parentElement, isEnable);\n      }\n\n      if (this.pdfViewer.enableHandwrittenSignature) {\n        this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement, isEnable);\n      }\n\n      if (this.pdfViewer.enableInkAnnotation) {\n        this.toolbar.enableItems(this.inkAnnotationItem.parentElement, isEnable);\n      }\n\n      if (this.pdfViewer.enableCommentPanel) {\n        this.enableCommentPanelTool(isEnable);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.isAnnotationButtonsEnabled = function () {\n    var isButtonsEnabled = false;\n\n    if (this.isHighlightEnabled || this.isUnderlineEnabled || this.isStrikethroughEnabled) {\n      isButtonsEnabled = true;\n    }\n\n    return isButtonsEnabled;\n  };\n  /**\n   * @param isEnable\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.enableCommentPanelTool = function (isEnable) {\n    if (this.toolbar) {\n      this.toolbar.enableItems(this.commentItem.parentElement, isEnable);\n    }\n  };\n\n  AnnotationToolbar.prototype.updateToolbarItems = function () {\n    if (this.pdfViewer.enableTextMarkupAnnotation) {\n      this.enableTextMarkupAddTools(true);\n    } else {\n      this.enableTextMarkupAddTools(false);\n    }\n\n    this.toolbar.enableItems(this.shapeElement.parentElement, this.pdfViewer.enableShapeAnnotation);\n    this.toolbar.enableItems(this.stampElement.parentElement, this.pdfViewer.enableStampAnnotations);\n    this.toolbar.enableItems(this.calibrateElement.parentElement, this.pdfViewer.enableMeasureAnnotation);\n    this.toolbar.enableItems(this.freeTextEditItem.parentElement, this.pdfViewer.enableFreeText);\n    this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement, this.pdfViewer.enableHandwrittenSignature);\n    this.toolbar.enableItems(this.inkAnnotationItem.parentElement, this.pdfViewer.enableInkAnnotation);\n  };\n\n  AnnotationToolbar.prototype.enableTextMarkupAddTools = function (isEnable) {\n    this.toolbar.enableItems(this.highlightItem.parentElement, isEnable);\n    this.toolbar.enableItems(this.underlineItem.parentElement, isEnable);\n    this.toolbar.enableItems(this.strikethroughItem.parentElement, isEnable);\n  };\n  /**\n   * @private\n   */\n  // for shapes added by drawing package\n\n\n  AnnotationToolbar.prototype.updateAnnnotationPropertyItems = function () {\n    if (!isBlazor()) {\n      if (this.pdfViewer.selectedItems.annotations.length === 1) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill, 'fillColor'));\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor, 'strokeColor'));\n\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n          // eslint-disable-next-line\n          this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor, 'fontColor'));\n          this.pdfViewer.toolbar.annotationToolbarModule.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily); // eslint-disable-next-line max-len\n\n          this.pdfViewer.toolbar.annotationToolbarModule.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize);\n          this.pdfViewer.toolbar.annotationToolbarModule.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n        }\n      } else {\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement, '#000000');\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement, '#000000');\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement, '#000000');\n      }\n    } else {\n      this.colorDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');\n      this.strokeDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');\n      this.fontColorElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');\n\n      if (this.pdfViewer.selectedItems.annotations.length === 1) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill, 'fillColor'));\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor, 'strokeColor'));\n\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n          // eslint-disable-next-line\n          this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor, 'fontColor')); //this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontFamilyInIcon', this.pdfViewer.selectedItems.annotations[0].fontFamily);\n          // eslint-disable-next-line max-len\n\n          this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily); // this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontSizeInIcon', this.pdfViewer.selectedItems.annotations[0].fontSize);\n\n          this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize); //this.pdfViewer.toolbar.annotationtoolbar.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n        }\n      } else {\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor, '#000000');\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor, '#000000');\n        this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor, '#000000');\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.getColorHexValue = function (colorString, type) {\n    if (colorString === '#ffffff00') {\n      colorString = '#ffffff';\n    }\n\n    if (colorString.toLowerCase() === 'red') {\n      colorString = '#FF0000';\n    }\n\n    if (colorString !== 'transparent') {\n      if (!isBlazor()) {\n        return this.colorPalette.getValue(colorString, 'hex');\n      } else {\n        return colorString;\n      }\n    } else {\n      if (type === 'fontColor' || type === 'strokeColor') {\n        return '#000000';\n      } else {\n        return '#ffffff';\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.setColorInPicker = function (colorpick, colorString) {\n    if (colorpick) {\n      colorpick.setProperties({\n        'value': colorString\n      }, true);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.resetToolbar = function () {\n    this.adjustViewer(false);\n    this.updateToolbarItems(); // eslint-disable-next-line max-len\n\n    if ((this.pdfViewer.isAnnotationToolbarOpen || this.pdfViewer.isAnnotationToolbarVisible) && this.pdfViewer.enableAnnotationToolbar) {\n      this.toolbarElement.style.display = '';\n      this.isToolbarHidden = false;\n      this.adjustViewer(true);\n      this.enableAnnotationAddTools(false);\n      this.pdfViewer.isAnnotationToolbarVisible = true;\n    } else {\n      this.toolbarElement.style.display = 'none';\n      this.isToolbarHidden = true;\n      this.pdfViewer.isAnnotationToolbarVisible = false;\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.clearTextMarkupMode = function () {\n    if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n      if (isBlazor()) {\n        this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n      }\n\n      this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.clearShapeMode = function () {\n    if (this.pdfViewerBase.isShapeAnnotationModule()) {\n      this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode = '';\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.clearMeasureMode = function () {\n    if (this.pdfViewerBase.isCalibrateAnnotationModule()) {\n      this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode = '';\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.clear = function () {\n    this.deselectAllItems();\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.destroy = function () {\n    this.destroyComponent();\n    this.shapeDropDown ? this.shapeDropDown.destroy() : null;\n    this.calibrateDropDown ? this.calibrateDropDown.destroy() : null;\n    this.fontColorDropDown ? this.fontColorDropDown.destroy() : null;\n    this.textAlignDropDown ? this.textAlignDropDown.destroy() : null;\n    this.colorDropDown ? this.colorDropDown.destroy() : null;\n    this.strokeDropDown ? this.strokeDropDown.destroy() : null;\n    this.thicknessDropDown ? this.thicknessDropDown.destroy() : null;\n    this.opacityDropDown ? this.opacityDropDown.destroy() : null;\n    this.textPropertiesDropDown ? this.textPropertiesDropDown.destroy() : null;\n    this.toolbar ? this.toolbar.destroy() : null; // eslint-disable-next-line\n\n    var stampImage = document.getElementById(this.pdfViewer.element.id + '_stampElement');\n\n    if (stampImage) {\n      stampImage.parentElement.removeChild(stampImage);\n    }\n  };\n\n  AnnotationToolbar.prototype.destroyComponent = function () {\n    // eslint-disable-next-line\n    var componentElement = [this.highlightItem, this.underlineItem, this.strikethroughItem, this.lineElement, this.arrowElement, this.rectangleElement, this.circleElement, this.polygonElement, this.calibrateDistance, this.calibrateArea, this.calibrateRadius, this.calibrateVolume, this.calibratePerimeter, this.freeTextEditItem, this.stampElement, this.handWrittenSignatureItem, this.inkAnnotationItem, this.fontFamilyElement, this.fontSizeElement, this.alignLeftElement, this.alignRightElement, this.alignCenterElement, this.alignJustifyElement, this.boldElement, this.italicElement, this.fontStyleStrikethroughItem, this.fontStyleUnderlineItem, this.deleteItem, this.commentItem, this.shapeDropDown ? this.shapeDropDown.activeElem[0] : null, this.calibrateDropDown ? this.calibrateDropDown.activeElem[0] : null, this.fontColorDropDown ? this.fontColorDropDown.activeElem[0] : null, this.textAlignDropDown ? this.textAlignDropDown.activeElem[0] : null, this.colorDropDown ? this.colorDropDown.activeElem[0] : null, this.strokeDropDown ? this.strokeDropDown.activeElem[0] : null, this.thicknessDropDown ? this.thicknessDropDown.activeElem[0] : null, this.opacityDropDown ? this.opacityDropDown.activeElem[0] : null, this.textPropertiesDropDown ? this.textPropertiesDropDown.activeElem[0] : null];\n\n    for (var i = 0; i < componentElement.length; i++) {\n      if (componentElement[i]) {\n        this.destroyDependentComponent(componentElement[i]);\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.destroyDependentComponent = function (component) {\n    if (component.ej2_instances) {\n      for (var i = component.ej2_instances.length - 1; i >= 0; i--) {\n        component.ej2_instances[i].destroy();\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.getElementHeight = function (element) {\n    try {\n      return element.getBoundingClientRect().height;\n    } catch (error) {\n      return 0;\n    }\n  };\n\n  AnnotationToolbar.prototype.updateViewerHeight = function (viewerHeight, toolbarHeight) {\n    return this.getElementHeight(this.pdfViewer.element) - toolbarHeight;\n  };\n\n  AnnotationToolbar.prototype.resetViewerHeight = function (viewerHeight, toolbarHeight) {\n    return viewerHeight + toolbarHeight;\n  };\n  /**\n   * @private\n   */\n\n\n  AnnotationToolbar.prototype.afterAnnotationToolbarCreationInBlazor = function () {\n    this.HighlightElement = document.getElementById(this.pdfViewer.element.id + '_highLight').children[0];\n    this.UnderlineElement = document.getElementById(this.pdfViewer.element.id + '_underline').children[0];\n    this.StrikethroughElement = document.getElementById(this.pdfViewer.element.id + '_strikethrough').children[0];\n    this.InkAnnotationElement = document.getElementById(this.pdfViewer.element.id + '_annotation_ink').children[0];\n    this.InkAnnotationElement.classList.add('e-pv-tbar-btn');\n    this.FreeTextElement = document.getElementById(this.pdfViewer.element.id + '_annotation_freeTextEdit').children[0];\n    this.HighlightElement = this.addClassToToolbarInBlazor(this.HighlightElement, 'e-pv-highlight', '_highLight');\n    this.UnderlineElement = this.addClassToToolbarInBlazor(this.UnderlineElement, 'e-pv-underline', '_underline');\n    this.StrikethroughElement = this.addClassToToolbarInBlazor(this.StrikethroughElement, 'e-pv-strikethrough', '_strikethrough');\n  }; // eslint-disable-next-line\n\n\n  AnnotationToolbar.prototype.addClassToToolbarInBlazor = function (element, className, idString) {\n    element.classList.add(className);\n    element.classList.add('e-pv-tbar-btn');\n\n    if (element.childNodes.length > 0) {\n      var spanElement = element.childNodes[0];\n\n      if (spanElement && spanElement.classList) {\n        spanElement.id = this.pdfViewer.element.id + idString + 'Icon';\n        spanElement.classList.remove('e-icons');\n        spanElement.classList.remove('e-btn-icon');\n\n        if (this.pdfViewer.enableRtl) {\n          spanElement.classList.add('e-right');\n        }\n      }\n    }\n\n    return element;\n  };\n\n  AnnotationToolbar.prototype.handleHighlightInBlazor = function () {\n    if (this.HighlightElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.HighlightElement);\n    } else if (!this.HighlightElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.selectItem(this.HighlightElement);\n    }\n\n    if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n    }\n\n    if (this.UnderlineElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.UnderlineElement);\n    }\n  };\n\n  AnnotationToolbar.prototype.handleUnderlineInBlazor = function () {\n    if (this.UnderlineElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.UnderlineElement);\n    } else if (!this.UnderlineElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.selectItem(this.UnderlineElement);\n    }\n\n    if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n    }\n\n    if (this.HighlightElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.HighlightElement);\n    }\n  };\n\n  AnnotationToolbar.prototype.handleStrikethroughInBlazor = function () {\n    if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n    } else if (!this.StrikethroughElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.selectItem(this.StrikethroughElement);\n    }\n\n    if (this.HighlightElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.HighlightElement);\n    }\n\n    if (this.UnderlineElement.classList.contains('e-pv-select')) {\n      this.primaryToolbar.deSelectItem(this.UnderlineElement);\n    }\n  };\n\n  AnnotationToolbar.prototype.AnnotationSliderOpened = function () {\n    if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations.length > 0 && this.pdfViewer.selectedItems.annotations[0]) {\n      if (this.pdfViewer.selectedItems.annotations[0].wrapper && this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]) {\n        var opacity = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n        var thickness = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n\n        this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateAnnotationSlider', opacity, thickness);\n      }\n    }\n  };\n\n  AnnotationToolbar.prototype.DropDownOpened = function (colorElement) {\n    if (colorElement && colorElement[0].element) {\n      var colorElementBounds = colorElement[0].element.getBoundingClientRect();\n      var sidebarElement = this.pdfViewerBase.navigationPane.sideBarToolbar;\n      var sideBarElementWidth = sidebarElement ? sidebarElement.getBoundingClientRect().width : 0;\n\n      if (colorElementBounds.left > this.pdfViewerBase.viewerContainer.clientWidth + colorElementBounds.width + sideBarElementWidth) {\n        colorElement[0].element.style.left = colorElementBounds.left - this.pdfViewerBase.viewerContainer.clientHeight / 2 + 'px';\n      }\n    }\n  };\n\n  return AnnotationToolbar;\n}();\n\nexport { AnnotationToolbar };","map":{"version":3,"names":["createElement","Browser","isBlazor","isNullOrUndefined","closest","Toolbar","Tool","Menu","DropDownButton","ColorPicker","Slider","cloneObject","ComboBox","Query","DynamicStampItem","SignStampItem","StandardBusinessStampItem","AnnotationToolbar","viewer","viewerBase","toolbar","_this","toolbarBorderHeight","isToolbarHidden","isMobileAnnotEnabled","isHighlightEnabled","isUnderlineEnabled","isStrikethroughEnabled","isHighlightBtnVisible","isCommentBtnVisible","isUnderlineBtnVisible","isStrikethroughBtnVisible","isColorToolVisible","isOpacityToolVisible","isDeleteAnnotationToolVisible","isCurrentAnnotationOpacitySet","isStampBtnVisible","isShapeBtnVisible","isSignatureBtnVisible","isInkBtnVisible","isFontFamilyToolVisible","isFontSizeToolVisible","isFontAlignToolVisible","isFontColorToolVisible","isFontStylesToolVisible","isCommentPanelBtnVisible","isFreeTextBtnVisible","isCalibrateBtnVisible","isStrokeColorToolVisible","isThicknessToolVisible","stampMenu","stampParentID","inkAnnotationSelected","openSignaturePopup","isSavedSignatureClicked","saveSignatureCount","saveInitialCount","isToolbarCreated","addStampImage","args","proxy","upoadedFiles","target","files","uploadedFile","pdfViewer","annotationModule","stampAnnotationModule","customStampName","name","split","type","reader","FileReader","onload","e","uploadedFileUrl","currentTarget","result","annotation","isStampAddMode","isStampAnnotSelected","pdfViewerBase","stampAdded","createCustomStampAnnotation","readAsDataURL","value","onShapeToolbarClicked","elementId","element","id","shapeAnnotationModule","isDevice","deselectAllItems","resetFreeTextAnnot","originalEvent","toolbarModule","selectItem","parentElement","setAnnotationType","onShapeDrawSelection","updateColorInIcon","colorDropDownElement","lineFillColor","strokeDropDownElement","lineStrokeColor","handleShapeTool","arrowFillColor","arrowStrokeColor","rectangleFillColor","rectangleStrokeColor","circleFillColor","circleStrokeColor","polygonFillColor","polygonStrokeColor","primaryToolbar","prototype","initializeAnnotationToolbar","toolbarElement","className","viewerMainContainer","appendChild","width","height","overflowMode","cssClass","items","createToolbarItems","clicked","onToolbarClicked","bind","created","createDropDowns","isStringTemplate","enableRtl","appendTo","afterToolbarCreation","createStampContainer","createSignContainer","applyAnnotationToolbarSettings","updateToolbarItems","showAnnotationToolbar","createMobileAnnotationToolbar","isEnable","isPath","enableDesktopMode","insertBefore","viewerContainer","createMobileToolbarItems","navigationPane","goBackToToolbar","showToolbar","deleteItem","getElement","firstElementChild","style","display","hideMobileAnnotationToolbar","selectedItems","annotations","length","textMarkupAnnotationModule","currentTextMarkupAnnotation","propertyToolbar","children","toolbarCreated","editIcon","document","getElementById","classList","contains","createAnnotationToolbarForMobile","adjustMobileViewer","FreeTextForMobile","hideExistingTool","freetextToolbarElement","styles","colorTemplate","annotationToolbarModule","getTemplate","strokeTemplate","thicknessTemplate","opacityTemplate","fontFamilyTemplate","fontSizeTemplate","textColorTemplate","alignmentTemplate","textPropertiesTemplate","prefixIcon","tooltipText","localeObj","getConstant","click","align","template","mobileColorpicker","showFreeTextPropertiesTool","createPropertyTools","shapeType","destroy","shapeToolbarElement","removeChild","id_1","createPropertyToolbarForMobile","shapeAnnotationType","enableItems","commentIcon","showPropertyTool","existingTool","applyProperiesToolSettings","selectedAnnotation","fillColor","strokeColor","fontFamily","fontFamilyElement","ej2_instances","fontColor","fontColorElement","borderBottomColor","modifyTextAlignment","textAlign","updateTextAlignInIcon","stampToolMobileForMobile","stampToolbarElement","createStampToolbarItemsForMobile","showStampPropertiesTool","shapeToolMobile","createShapeToolbarItemsForMobile","afterShapeToolbarCreationForMobile","showShapeTool","calibrateToolMobile","calibrateToolbarElement","createCalibrateToolbarItemsForMobile","onCalibrateToolbarClicked","afterCalibrateToolbarCreationForMobile","textMarkupForMobile","textMarkupToolbarElement","showTextMarkupPropertiesTool","annotationToolbarItems","toolbarSettings","indexOf","showColorEditTool","showStrokeColorEditTool","showThicknessEditTool","showOpacityEditTool","signatureInkForMobile","signatureInkToolbarElement","aign","mobileAnnotationToolbar","shapePropertiesTool","showInkPropertiesTool","showFontFamilyAnnotationTool","showFontSizeAnnotationTool","showFontColorAnnotationTool","showFontAlignAnnotationTool","showFontStylesAnnotationTool","showCommentPanelTool","showAnnotationDeleteTool","hideToolbar","remove","stampTemplate","signTemplate","afterMobileToolbarCreation","applyMobileAnnotationToolbarSettings","toolbarHeight","clientHeight","isPrimaryTool","enableToolbar","updateViewerHeight","getElementHeight","resetViewerHeight","enable","push","page","getSelectTextMarkupCurrentPage","selectTextMarkupCurrentPage","clearAnnotationSelection","shapesTemplate","calibrateTemplate","handWrittenSignatureItem","createTooltip","handWrittenSignatureSettings","signatureItem","text","separator","saveOptions","iconCss","open","openSignature","beforeItemRender","clearSelection","currentPageNumber","margin","item","innerHTML","collection","signatureModule","signaturecollection","getSaveLimit","saveSignatureLimit","signatureCollection","collectionKey","image","imageData","signatureID","isInitial","signatureContainer","paddingBottom","signatureSpan","add","signatureImage","signatureType","innerText","fontSize","alignItems","position","overflow","textOverflow","paddingLeft","src","paddingRight","paddingTop","boxSizing","addEventListener","hoverSignatureImage","leaveSignatureImage","signatureDeleteSpan","append","pointerEvents","background","addInitialSpan","textContent","locale","clickSignature","hoverInitialBtn","flexDirection","saveInitialLimit","isSignatureIteam","clickInitial","select","drpDownBtn","updateSignatureCount","count","colletionList","addedSignature","deleteSignature","backgroundClip","renderAddedSignature","deleteSavedSign","hoverSignatureDelete","leaveSignatureDelete","eventTarget","event","cursor","currentFieldID","navigator","userAgent","path","composedPath","liElement","tagName","isInitialField","addSignature","showSignaturepanel","isAddedSignClicked","RenderSavedSignature","stopPropagation","RemoveSignature","splice","elementName","outerHTML","stampElement","contextMenuElement","stampSettings","dynamicStamps","dynamicStamps_1","label","forEach","stampItem","index","signStamps","signStamps_1","standardBusinessStamps","standardsBusinessStamps_1","customStampSettings","enableCustomStamp","menuOptions","showItemOnClick","enableScrolling","beforeOpen","parentItem","isAddToMenu","currentElements","i","elements","customStampCollection","stampElements","customStamps","n","customStampImageSource","m","liElem","childElementCount","span","setAttribute","menuItems","beforeClose","isAlreadyAdded","updateInteractionTools","checkStampAnnotations","stampImage","triggerAnnotationUnselectEvent","isDynamicStamp","retrieveDynamicStampAnnotation","retrievestampAnnotation","createCustomStampElement","attrs","left","top","visibility","body","annotName","author","renderAnnotations","pageIndex","shapeElement","shapeToolbar","createShapeOptions","shapeDropDown","createDropDownButton","calibrateElement","calibrateToolbar","calibrateDropDown","colorPalette","createColorPicker","change","onColorPickerChange","colorDropDown","colorDropDownBeforeOpen","colorDropDownOpen","onColorPickerCancelClick","strokeColorPicker","onStrokePickerChange","strokeDropDown","strokeDropDownBeforeOpen","strokeDropDownOpen","onStrokePickerCancelClick","thicknessElement","thicknessContainer","createThicknessSlider","thicknessDropDown","thicknessDropDownBeforeOpen","thicknessSlider","thicknessChange","changed","thicknessDropDownOpen","opacityDropDownElement","sliderContainer","createSlider","opacityDropDown","opacityDropDownBeforeOpen","opacitySlider","opacityChange","opacityDropDownOpen","createDropDownListForFamily","onFontFamilyChange","fontSizeElement","createDropDownListForSize","fontColorPalette","onFontColorChange","fontColorDropDown","textAlignElement","alignmentToolbar","undefined","textAlignDropDown","textAlignDropDownBeforeOpen","textPropElement","propertiesToolbar","textPropertiesDropDown","createPropDropDownButton","textPropertiesDropDownBeforeOpen","calculateToolbarPosition","toggle","noColor","color","setCurrentColorInPicker","wrapper","fill","refresh","currentTextMarkupAddMode","setColorInPicker","highlightColor","underlineColor","strikethroughColor","currentAnnotationMode","setCurrentStrokeColorInPicker","updateInkannotationItems","currentColor","currentValue","hex","modifyFontColor","freeTextSettings","freeTextAnnotationModule","updateTextProperties","fontColorElementInBlazor","querySelector","modifyFontFamily","onFontSizeChange","parseFloat","modifyFontSize","getElementsByTagName","dropDownOptions","font","isBold","isItalic","isStrikeout","isUnderline","onClickTextAlignment","textAlignment","onClickTextProperties","fontInfo","modifyTextProperties","fontStyle","isStrikethrough","updateTextPropertySelection","opacityValue","modifyOpacityProperty","highlightOpacity","underlineOpacity","strikethroughOpacity","currentAnnotations","clonedObject","redoClonedObject","opacity","nodePropertyChange","triggerAnnotationPropChange","addAction","updateSessionStorage","modifyOpacity","previousValue","lineOpacity","arrowOpacity","rectangleOpacity","circleOpacity","polygonOpacity","inkAnnotationModule","inkAnnotationSettings","drawingObject","updateOpacityIndicator","strokeWidth","lineThickness","arrowThickness","rectangleThickness","circleThickness","polygonThickness","updateThicknessIndicator","leftValue","offsetWidth","thicknessChangeInBlazor","modifyThickness","ShapeThickness","thickness","annotationModule_1","borderWidth","iconClass","dropDownButton","idString","isShape","isAlign","isTextProp","textAlignmentToolbarItems","afterAlignmentToolbarCreation","textPropertiesToolbarItems","afterPropertiesToolbarCreation","createShapeToolbarItems","afterShapeToolbarCreation","createCalibrateToolbarItems","afterCalibrateToolbarCreation","measureType","showCommentsPanel","deleteAnnotation","querySelectorAll","alignLeftElement","addClassToolbarItem","alignRightElement","alignCenterElement","alignJustifyElement","boldElement","italicElement","fontStyleStrikethroughItem","fontStyleUnderlineItem","fontSelectElement","dataSource","allowCustom","showClearButton","popupWidth","FontName","query","fields","itemTemplate","measureModule","measureAnnotationModule","distanceFillColor","distanceStrokeColor","perimeterFillColor","perimeterStrokeColor","areaFillColor","areaStrokeColor","radiusFillColor","radiusStrokeColor","volumeFillColor","volumeStrokeColor","enableAnnotationPropertiesTools","lineElement","arrowElement","rectangleElement","circleElement","polygonElement","calibrateDistance","calibratePerimeter","calibrateArea","calibrateRadius","calibrateVolume","highlightItem","underlineItem","strikethroughItem","shapesItem","calibrateItem","freeTextEditItem","commentItem","inkAnnotationItem","selectAnnotationDeleteItem","enableCommentPanelTool","enableCommentPanel","inputElement","existingInput","colorPicker","inline","mode","enableOpacity","showButtons","modeSwitcher","modifyColorProperty","modifyFillColor","colorDropDownElementInBlazor","modifyStrokeColor","borderColor","strokeDropDownElementInBlazor","childNodes","currentOption","updateFontFamilyInIcon","family","leftAlign","rightAlign","centerAlign","justifyAlign","updateFontSizeInIcon","size","opacityIndicator","parseInt","Math","round","toString","thicknessIndicator","outerContainer","sliderElement","max","min","closeItem","enableTextMarkupAnnotationPropertiesTools","updateStampItems","deSelectCommentAnnotation","tool","handleHighlight","setAnnotationMode","handleUnderline","handleStrikethrough","commentPanel","showHideDropletDiv","closeCommentPanelContainer","commentsPanel","annotationItem","handleFreeTextEditor","drawInkAnnotation","deSelectItem","isAddComment","isCommentIconAdded","commentsButton","addComments","addInkAnnotation","InkAnnotationElement","focusViewerContainer","deselectAllItemsInBlazor","deselectInkAnnotation","enableSignaturePropertiesTools","isToolbarInkClicked","drawInk","isNewFreeTextAnnot","isNewAddedAnnot","FreeTextElement","enableFreeTextAnnotationPropertiesTools","isToolbarSignClicked","showSignatureDialog","fireAnnotationUnSelect","isTextMarkupAnnotationMode","updateFontFamily","updateFontFamilyIcon","isActive","isInitialLoading","adjustViewer","enablePropertiesTool","isAnnotationToolbarVisible","isPanMode","toolBarInitialStatus","magnification","fitType","fitToPage","enableAnnotationAddTools","isTextMarkupAnnotationModule","showHighlightTool","showUnderlineTool","showStrikethroughTool","showShapeAnnotationTool","showCalibrateAnnotationTool","showStampAnnotationTool","showSignatureTool","showFreeTextAnnotationTool","showInkAnnotationTool","showSeparator","toolbarItems","showStickyNoteToolInMobile","showInkTool","showSeparatorInMobile","isShow","applyHideToToolbar","startIndex","endIndex","show","isHide","toolbar_1","propertyToolbarElement","hideItem","isAdjust","splitterElement","toolbarContainer","annotationToolbarHeight","annotationToolbarContainer","getToolbarHeight","sideBarToolbar","sideBarContentContainer","commentsContainer","commentPanelContainer","commentPanelResizer","getNavigationToolbarHeight","updateContentContainerHeight","sideBarClientRect","getBoundingClientRect","window","getComputedStyle","clearShapeMode","clearMeasureMode","drawTextMarkupAnnotations","HighlightElement","UnderlineElement","StrikethroughElement","_dotnetInstance","invokeMethodAsync","clearTextMarkupMode","isBlazorPlatform","SelectToolElement","PanElement","enableTextSelection","initiateTextSelectMode","deleteIconCicked","findCurrentAnnotation","annotationSettings","isLock","checkAllowedInteractions","blazorUIAdaptor","EnableDeleteOption","checkAnnotationPropertiesChange","isPropertiesChanges","enableShapeLabel","enableAnnotationPropertiesTool","enableStampAnnotationPropertiesTools","enableTextMarkupAnnotation","enableShapeAnnotation","enableStampAnnotations","enableMeasureAnnotation","isCalibrateAnnotationModule","enableFreeText","enableHandwrittenSignature","enableInkAnnotation","isAnnotationButtonsEnabled","isButtonsEnabled","enableTextMarkupAddTools","updateAnnnotationPropertyItems","getColorHexValue","colorString","toLowerCase","getValue","colorpick","setProperties","resetToolbar","isAnnotationToolbarOpen","enableAnnotationToolbar","isShapeAnnotationModule","clear","destroyComponent","componentElement","activeElem","destroyDependentComponent","component","error","viewerHeight","afterAnnotationToolbarCreationInBlazor","addClassToToolbarInBlazor","spanElement","handleHighlightInBlazor","handleUnderlineInBlazor","handleStrikethroughInBlazor","AnnotationSliderOpened","DropDownOpened","colorElement","colorElementBounds","sidebarElement","sideBarElementWidth","clientWidth"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/toolbar/annotation-toolbar.js"],"sourcesContent":["/* eslint-disable */\nimport { createElement, Browser, isBlazor, isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool, Menu } from '@syncfusion/ej2-navigations';\n// eslint-disable-next-line max-len\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Slider } from '@syncfusion/ej2-inputs';\nimport { cloneObject } from '../drawing/drawing-util';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Query } from '@syncfusion/ej2-data';\nimport { DynamicStampItem, SignStampItem, StandardBusinessStampItem } from '../base/types';\n/**\n * @hidden\n */\nvar AnnotationToolbar = /** @class */ (function () {\n    function AnnotationToolbar(viewer, viewerBase, toolbar) {\n        var _this = this;\n        this.toolbarBorderHeight = 1;\n        /**\n         * @private\n         */\n        this.isToolbarHidden = false;\n        /**\n         * @private\n         */\n        this.isMobileAnnotEnabled = false;\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        this.isHighlightBtnVisible = true;\n        this.isCommentBtnVisible = true;\n        this.isUnderlineBtnVisible = true;\n        this.isStrikethroughBtnVisible = true;\n        this.isColorToolVisible = true;\n        this.isOpacityToolVisible = true;\n        this.isDeleteAnnotationToolVisible = true;\n        this.isCurrentAnnotationOpacitySet = false;\n        this.isStampBtnVisible = false;\n        this.isShapeBtnVisible = false;\n        this.isSignatureBtnVisible = false;\n        this.isInkBtnVisible = false;\n        this.isFontFamilyToolVisible = false;\n        this.isFontSizeToolVisible = false;\n        this.isFontAlignToolVisible = false;\n        this.isFontColorToolVisible = false;\n        this.isFontStylesToolVisible = false;\n        this.isCommentPanelBtnVisible = false;\n        this.isFreeTextBtnVisible = false;\n        this.isCalibrateBtnVisible = false;\n        this.isStrokeColorToolVisible = false;\n        this.isThicknessToolVisible = false;\n        this.stampMenu = [];\n        this.stampParentID = '';\n        /**\n         * @private\n         */\n        this.inkAnnotationSelected = false;\n        /**\n         * @private\n         */\n        this.openSignaturePopup = false;\n        this.isSavedSignatureClicked = false;\n        this.saveSignatureCount = 0;\n        this.saveInitialCount = 0;\n        /**\n         * @private\n         */\n        this.isToolbarCreated = false;\n        // eslint-disable-next-line\n        this.addStampImage = function (args) {\n            // eslint-disable-next-line\n            var proxy = _this;\n            // eslint-disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                _this.pdfViewer.annotationModule.stampAnnotationModule.customStampName = uploadedFile.name.split('.')[0];\n                if (uploadedFile.type.split('/')[0] === 'image') {\n                    var reader = new FileReader();\n                    // eslint-disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        proxy.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n                        proxy.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n                        proxy.pdfViewerBase.stampAdded = true;\n                        _this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(uploadedFileUrl);\n                        proxy.pdfViewerBase.stampAdded = false;\n                    };\n                    reader.readAsDataURL(uploadedFile);\n                }\n            }\n            args.target.value = '';\n            args.currentTarget.value = '';\n        };\n        this.onShapeToolbarClicked = function (args) {\n            var elementId = _this.pdfViewer.element.id;\n            var shapeAnnotationModule = _this.pdfViewer.annotation.shapeAnnotationModule;\n            if (!Browser.isDevice) {\n                _this.deselectAllItems();\n                _this.resetFreeTextAnnot();\n            }\n            else {\n                // eslint:disable-next-line\n                var element = args.originalEvent.target;\n                _this.pdfViewer.toolbarModule.selectItem(element.parentElement);\n            }\n            switch (args.originalEvent.target.id) {\n                case elementId + '_shape_line':\n                case elementId + '_shape_lineIcon':\n                    shapeAnnotationModule.setAnnotationType('Line');\n                    _this.onShapeDrawSelection(true);\n                    _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.lineFillColor);\n                    _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.lineStrokeColor);\n                    _this.handleShapeTool(elementId + '_shape_line');\n                    break;\n                case elementId + '_shape_arrow':\n                case elementId + '_shape_arrowIcon':\n                    shapeAnnotationModule.setAnnotationType('Arrow');\n                    _this.onShapeDrawSelection(true);\n                    _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.arrowFillColor);\n                    _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.arrowStrokeColor);\n                    _this.handleShapeTool(elementId + '_shape_arrow');\n                    break;\n                case elementId + '_shape_rectangle':\n                case elementId + '_shape_rectangleIcon':\n                    shapeAnnotationModule.setAnnotationType('Rectangle');\n                    _this.onShapeDrawSelection(true);\n                    _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.rectangleFillColor);\n                    _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.rectangleStrokeColor);\n                    _this.handleShapeTool(elementId + '_shape_rectangle');\n                    break;\n                case elementId + '_shape_circle':\n                case elementId + '_shape_circleIcon':\n                    shapeAnnotationModule.setAnnotationType('Circle');\n                    _this.onShapeDrawSelection(true);\n                    _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.circleFillColor);\n                    _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.circleStrokeColor);\n                    _this.handleShapeTool(elementId + '_shape_circle');\n                    break;\n                case elementId + '_shape_pentagon':\n                case elementId + '_shape_pentagonIcon':\n                    shapeAnnotationModule.setAnnotationType('Polygon');\n                    _this.onShapeDrawSelection(true);\n                    _this.updateColorInIcon(_this.colorDropDownElement, shapeAnnotationModule.polygonFillColor);\n                    _this.updateColorInIcon(_this.strokeDropDownElement, shapeAnnotationModule.polygonStrokeColor);\n                    _this.handleShapeTool(elementId + '_shape_pentagon');\n                    break;\n            }\n            // this.pdfViewer.clearSelection();\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n        this.primaryToolbar = toolbar;\n    }\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.initializeAnnotationToolbar = function () {\n        var _this = this;\n        // eslint-disable-next-line max-len\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.toolbar = new Tool({\n            width: '', height: '', overflowMode: 'Popup', cssClass: 'e-pv-toolbar-scroll',\n            items: this.createToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n            created: function () {\n                _this.createDropDowns();\n            }\n        });\n        this.toolbar.isStringTemplate = true;\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        this.afterToolbarCreation();\n        this.createStampContainer();\n        this.createSignContainer();\n        this.applyAnnotationToolbarSettings();\n        this.updateToolbarItems();\n        this.showAnnotationToolbar(null, true);\n    };\n    AnnotationToolbar.prototype.createMobileAnnotationToolbar = function (isEnable, isPath) {\n        var _this = this;\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            if (this.toolbarElement == null && isEnable) {\n                this.isMobileAnnotEnabled = true;\n                // eslint-disable-next-line max-len\n                this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n                this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n                this.toolbar = new Tool({\n                    width: '', height: '', overflowMode: 'Popup',\n                    items: this.createMobileToolbarItems(isPath), clicked: this.onToolbarClicked.bind(this),\n                    created: function () {\n                        _this.createDropDowns(isPath);\n                    }\n                });\n                this.toolbar.isStringTemplate = true;\n                if (this.pdfViewer.enableRtl) {\n                    this.toolbar.enableRtl = true;\n                }\n                this.pdfViewerBase.navigationPane.goBackToToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(false);\n                this.toolbar.appendTo(this.toolbarElement);\n                this.deleteItem = this.pdfViewerBase.getElement('_annotation_delete');\n                this.deleteItem.firstElementChild.id = this.pdfViewer.element.id + '_annotation_delete';\n            }\n            else if (this.toolbarElement != null) {\n                if (isEnable) {\n                    this.isMobileAnnotEnabled = true;\n                    this.pdfViewerBase.navigationPane.goBackToToolbar();\n                    this.pdfViewer.toolbarModule.showToolbar(false);\n                    this.toolbarElement.style.display = 'block';\n                }\n                else if (!isEnable) {\n                    this.isMobileAnnotEnabled = false;\n                    this.pdfViewer.toolbarModule.showToolbar(true);\n                    this.hideMobileAnnotationToolbar();\n                }\n            }\n        }\n        else {\n            this.isMobileAnnotEnabled = true;\n        }\n    };\n    AnnotationToolbar.prototype.hideMobileAnnotationToolbar = function () {\n        if (this.toolbarElement != null) {\n            if (this.pdfViewer.selectedItems.annotations.length > 0 || this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n                    this.propertyToolbar.element.style.display = 'block';\n                    this.toolbarCreated = true;\n                }\n            }\n            else {\n                if (this.toolbar.element.children.length > 0) {\n                    this.toolbarCreated = true;\n                }\n                else {\n                    this.toolbarCreated = false;\n                }\n                if (this.propertyToolbar && this.propertyToolbar.element.style.display !== 'none') {\n                    this.propertyToolbar.element.style.display = 'none';\n                    if (!this.toolbarCreated) {\n                        var editIcon = document.getElementById(this.pdfViewer.element.id + '_annotationIcon');\n                        if (editIcon && editIcon.parentElement.classList.contains('e-pv-select')) {\n                            this.createAnnotationToolbarForMobile();\n                        }\n                    }\n                }\n            }\n            if (this.toolbarElement.children.length > 0) {\n                this.toolbarElement.style.display = 'block';\n            }\n            this.adjustMobileViewer();\n        }\n        else if (this.toolbarCreated && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n            this.propertyToolbar.element.style.display = 'none';\n            this.adjustMobileViewer();\n            this.toolbarCreated = false;\n        }\n    };\n    AnnotationToolbar.prototype.FreeTextForMobile = function () {\n        var _this = this;\n        this.hideExistingTool();\n        // eslint-disable-next-line max-len\n        this.freetextToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_freeTextToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.freetextToolbarElement);\n        // eslint-disable-next-line max-len\n        var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        // eslint-disable-next-line max-len\n        var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        var fontFamilyTemplate = this.getTemplate('input', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n        var fontSizeTemplate = this.getTemplate('input', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n        var textColorTemplate = this.getTemplate('span', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n        var alignmentTemplate = this.getTemplate('span', '_annotation_textalign', 'e-pv-annotation-textalign-container');\n        // eslint-disable-next-line max-len\n        var textPropertiesTemplate = this.getTemplate('span', '_annotation_textproperties', 'e-pv-annotation-textprop-container');\n        // eslint:disable-next-line\n        var items;\n        items = [\n            // eslint-disable-next-line max-len\n            { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n            { type: 'Separator', align: 'Left', cssClass: 'e-pv-hightlight-separator-container' },\n            { template: fontFamilyTemplate },\n            { template: fontSizeTemplate },\n            { template: textColorTemplate },\n            { template: alignmentTemplate },\n            { template: textPropertiesTemplate },\n            { template: colorTemplate },\n            { template: strokeTemplate },\n            { template: thicknessTemplate },\n            { template: opacityTemplate },\n        ];\n        this.toolbar = new Tool({\n            items: items, width: '', height: '', overflowMode: 'Scrollable', created: function () {\n                // eslint-disable-next-line max-len\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(_this.pdfViewer.element.id + '_annotation_freeTextEdit');\n            }\n        });\n        this.toolbar.appendTo(this.freetextToolbarElement);\n        this.showFreeTextPropertiesTool();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.createPropertyTools = function (shapeType) {\n        var _this = this;\n        if (shapeType !== \"\") {\n            if (this.propertyToolbar) {\n                this.propertyToolbar.destroy();\n            }\n            if (this.toolbar) {\n                this.toolbar.destroy();\n            }\n            // eslint-disable-next-line max-len\n            var shapeToolbarElement = void 0;\n            shapeToolbarElement = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n            if (shapeToolbarElement) {\n                shapeToolbarElement.parentElement.removeChild(shapeToolbarElement);\n            }\n            // eslint-disable-next-line max-len\n            shapeToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_propertyToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n            this.pdfViewerBase.viewerMainContainer.appendChild(shapeToolbarElement);\n            var id_1;\n            var propertyToolbar = new Tool({\n                // eslint-disable-next-line max-len\n                items: this.createPropertyToolbarForMobile(shapeType), width: '', height: '', overflowMode: 'Scrollable',\n                created: function () {\n                    if (_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                        id_1 = _this.pdfViewer.element.id + '_underlineIcon';\n                    }\n                    else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_freeTextEdit';\n                        // eslint-disable-next-line max-len\n                    }\n                    else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image') {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_stamp';\n                        // eslint-disable-next-line max-len\n                    }\n                    else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText') {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_handwrittenSign';\n                    }\n                    else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage') {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_handwrittenImage';\n                    }\n                    else if (_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink' || _this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Path') {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_inkIcon';\n                    }\n                    else if (shapeType === 'Highlight' || shapeType === 'Underline' || shapeType === 'Strikethrough') {\n                        id_1 = _this.pdfViewer.element.id + '_highlightIcon';\n                    }\n                    else {\n                        id_1 = _this.pdfViewer.element.id + '_annotation_shapesIcon';\n                    }\n                    _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(id_1);\n                }\n            });\n            propertyToolbar.isStringTemplate = true;\n            propertyToolbar.appendTo(shapeToolbarElement);\n            if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n                    this.toolbar.enableItems(this.colorDropDownElement.parentElement, false);\n                }\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature') {\n                    var commentIcon = document.getElementById(this.pdfViewer.element.id + '_annotation_commentPanel');\n                    this.toolbar.enableItems(commentIcon.parentElement, false);\n                }\n            }\n            this.showPropertyTool(propertyToolbar, id_1);\n        }\n    };\n    AnnotationToolbar.prototype.showPropertyTool = function (existingTool, id) {\n        if (this.toolbar) {\n            this.toolbar.destroy();\n        }\n        this.propertyToolbar = existingTool;\n        this.applyProperiesToolSettings(id);\n        //this.propertyToolbar.element.style.display = 'block';\n        if (this.pdfViewer.selectedItems.annotations[0]) {\n            // eslint:disable-next-line\n            var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n            // eslint-disable-next-line max-len\n            if (selectedAnnotation.shapeAnnotationType !== 'SignatureText' && selectedAnnotation.shapeAnnotationType !== 'HandWrittenSignature' && selectedAnnotation.shapeAnnotationType !== 'Stamp' && selectedAnnotation.shapeAnnotationType !== 'Image' && selectedAnnotation.shapeAnnotationType !== 'Ink' && selectedAnnotation.shapeAnnotationType !== 'Path' && selectedAnnotation.shapeAnnotationType !== 'StickyNotes') {\n                this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.selectedItems.annotations[0].fillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.selectedItems.annotations[0].strokeColor);\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                    // eslint:disable-next-line\n                    var fontFamily = this.fontFamilyElement;\n                    fontFamily.ej2_instances[0].value = this.pdfViewer.selectedItems.annotations[0].fontFamily;\n                    // eslint:disable-next-line\n                    var fontColor = this.fontColorElement;\n                    fontColor.children[0].style.borderBottomColor = this.pdfViewer.selectedItems.annotations[0].fontColor;\n                    this.pdfViewer.annotation.modifyTextAlignment(this.pdfViewer.selectedItems.annotations[0].textAlign);\n                    this.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n                }\n            }\n            else {\n                if (this.strokeDropDownElement) {\n                    this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.selectedItems.annotations[0].strokeColor);\n                }\n            }\n        }\n        this.toolbarCreated = true;\n        this.adjustMobileViewer();\n    };\n    AnnotationToolbar.prototype.stampToolMobileForMobile = function (args) {\n        var _this = this;\n        this.hideExistingTool();\n        if (this.stampToolbarElement) {\n            this.stampToolbarElement.parentElement.removeChild(this.stampToolbarElement);\n        }\n        // eslint-disable-next-line max-len\n        this.stampToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_stampToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.stampToolbarElement);\n        // eslint-disable-next-line max-len\n        this.toolbar = new Tool({\n            items: this.createStampToolbarItemsForMobile(), width: '', height: '', overflowMode: 'Scrollable', clicked: this.onShapeToolbarClicked.bind(this),\n            created: function () {\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args);\n            }\n        });\n        this.toolbar.isStringTemplate = true;\n        this.toolbar.appendTo(this.stampToolbarElement);\n        this.showStampPropertiesTool();\n        //this.afterShapeToolbarCreationForMobile();\n    };\n    AnnotationToolbar.prototype.shapeToolMobile = function (args) {\n        var _this = this;\n        this.hideExistingTool();\n        if (this.shapeToolbarElement) {\n            this.shapeToolbarElement.parentElement.removeChild(this.shapeToolbarElement);\n        }\n        // eslint-disable-next-line max-len\n        this.shapeToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_shapeToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.shapeToolbarElement);\n        // eslint-disable-next-line max-len\n        this.toolbar = new Tool({\n            items: this.createShapeToolbarItemsForMobile(), width: '', height: '', overflowMode: 'Scrollable', clicked: this.onShapeToolbarClicked.bind(this),\n            created: function () {\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n            }\n        });\n        this.toolbar.isStringTemplate = true;\n        this.toolbar.appendTo(this.shapeToolbarElement);\n        this.afterShapeToolbarCreationForMobile();\n        this.showShapeTool();\n    };\n    AnnotationToolbar.prototype.calibrateToolMobile = function (args) {\n        var _this = this;\n        this.hideExistingTool();\n        if (this.calibrateToolbarElement) {\n            this.calibrateToolbarElement.parentElement.removeChild(this.calibrateToolbarElement);\n        }\n        // eslint-disable-next-line max-len\n        this.calibrateToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_calibrateToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.calibrateToolbarElement);\n        // eslint-disable-next-line max-len\n        this.toolbar = new Tool({\n            items: this.createCalibrateToolbarItemsForMobile(), width: '', height: '', overflowMode: 'Scrollable', clicked: this.onCalibrateToolbarClicked.bind(this),\n            created: function () {\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n            }\n        });\n        this.toolbar.isStringTemplate = true;\n        this.toolbar.appendTo(this.calibrateToolbarElement);\n        this.afterCalibrateToolbarCreationForMobile();\n        this.showShapeTool();\n    };\n    AnnotationToolbar.prototype.textMarkupForMobile = function (args) {\n        var _this = this;\n        this.hideExistingTool();\n        if (this.textMarkupToolbarElement) {\n            this.textMarkupToolbarElement.parentElement.removeChild(this.textMarkupToolbarElement);\n        }\n        // eslint-disable-next-line max-len\n        this.textMarkupToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_mobileAnnotationToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.textMarkupToolbarElement);\n        // eslint-disable-next-line max-len\n        var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint:disable-next-line\n        var items;\n        items = [\n            // eslint-disable-next-line max-len\n            { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n            { type: 'Separator', align: 'Left', cssClass: 'e-pv-hightlight-separator-container' },\n            { template: colorTemplate, align: 'left' },\n            { template: opacityTemplate, align: 'left' }\n        ];\n        this.propertyToolbar = new Tool({\n            items: items, width: '', height: '', overflowMode: 'Scrollable',\n            created: function () {\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);\n            }\n        });\n        this.propertyToolbar.isStringTemplate = true;\n        this.propertyToolbar.appendTo(this.textMarkupToolbarElement);\n        this.showTextMarkupPropertiesTool();\n    };\n    AnnotationToolbar.prototype.showShapeTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n                this.showColorEditTool(true, 7, 7);\n            }\n            else {\n                this.showColorEditTool(false, 7, 7);\n            }\n            if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n                this.showStrokeColorEditTool(true, 8, 8);\n            }\n            else {\n                this.showStrokeColorEditTool(false, 8, 8);\n            }\n            if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n                this.showThicknessEditTool(true, 9, 9);\n            }\n            else {\n                this.showThicknessEditTool(false, 9, 9);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 10, 10);\n            }\n            else {\n                this.showOpacityEditTool(false, 10, 10);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.signatureInkForMobile = function () {\n        var _this = this;\n        this.hideExistingTool();\n        if (this.signatureInkToolbarElement) {\n            this.signatureInkToolbarElement.parentElement.removeChild(this.signatureInkToolbarElement);\n        }\n        // eslint-disable-next-line max-len\n        this.signatureInkToolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_mobileAnnotationToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.signatureInkToolbarElement);\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint-disable-next-line max-len\n        var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        // eslint:disable-next-line\n        var items;\n        items = [\n            // eslint-disable-next-line max-len\n            { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n            { template: opacityTemplate, align: 'left' },\n            { template: strokeTemplate, aign: 'left' },\n            { template: thicknessTemplate, align: 'left' }\n        ];\n        this.toolbar = new Tool({\n            items: items, width: '', height: '', overflowMode: 'Scrollable',\n            created: function () {\n                _this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(_this.pdfViewer.element.id + '_annotation_inkIcon');\n            }\n        });\n        this.toolbar.isStringTemplate = true;\n        this.toolbar.appendTo(this.signatureInkToolbarElement);\n    };\n    AnnotationToolbar.prototype.hideExistingTool = function () {\n        if (this.toolbar && !this.pdfViewer.enableDesktopMode) {\n            this.toolbar.destroy();\n        }\n        if (this.propertyToolbar && !this.pdfViewer.enableDesktopMode) {\n            this.propertyToolbar.destroy();\n        }\n        var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_mobileAnnotationToolbar');\n        if (mobileAnnotationToolbar) {\n            mobileAnnotationToolbar.style.display = 'none';\n        }\n    };\n    AnnotationToolbar.prototype.applyProperiesToolSettings = function (type) {\n        switch (type) {\n            case this.pdfViewer.element.id + '_highlightIcon':\n                this.showTextMarkupPropertiesTool();\n                break;\n            case this.pdfViewer.element.id + '_annotation_freeTextEdit':\n                this.showFreeTextPropertiesTool();\n                break;\n            case this.pdfViewer.element.id + '_annotation_shapesIcon':\n                this.shapePropertiesTool();\n                break;\n            case 'stampTool':\n            case this.pdfViewer.element.id + '_annotation_stamp':\n                this.showStampPropertiesTool();\n                break;\n            case this.pdfViewer.element.id + '_annotation_handwrittenSign':\n            case this.pdfViewer.element.id + '_annotation_inkIcon':\n                this.showInkPropertiesTool();\n                break;\n        }\n    };\n    AnnotationToolbar.prototype.showFreeTextPropertiesTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('FontFamilyAnnotationTool') !== -1) {\n                this.showFontFamilyAnnotationTool(true, 2, 2);\n            }\n            else {\n                this.showFontFamilyAnnotationTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('FontSizeAnnotationTool') !== -1) {\n                this.showFontSizeAnnotationTool(true, 3, 3);\n            }\n            else {\n                this.showFontSizeAnnotationTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('FontColorAnnotationTool') !== -1) {\n                this.showFontColorAnnotationTool(true, 4, 4);\n            }\n            else {\n                this.showFontColorAnnotationTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('FontAlignAnnotationTool') !== -1) {\n                this.showFontAlignAnnotationTool(true, 5, 5);\n            }\n            else {\n                this.showFontAlignAnnotationTool(false, 5, 5);\n            }\n            if (annotationToolbarItems.indexOf('FontStylesAnnotationTool') !== -1) {\n                this.showFontStylesAnnotationTool(true, 6, 6);\n            }\n            else {\n                this.showFontStylesAnnotationTool(false, 6, 6);\n            }\n            if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n                this.showColorEditTool(true, 7, 7);\n            }\n            else {\n                this.showColorEditTool(false, 7, 7);\n            }\n            if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n                this.showStrokeColorEditTool(true, 8, 8);\n            }\n            else {\n                this.showStrokeColorEditTool(false, 8, 8);\n            }\n            if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n                this.showThicknessEditTool(true, 9, 9);\n            }\n            else {\n                this.showThicknessEditTool(false, 9, 9);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 10, 10);\n            }\n            else {\n                this.showOpacityEditTool(false, 10, 10);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 11, 11);\n            }\n            else {\n                this.showCommentPanelTool(false, 11, 11);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 12, 12);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 12, 12);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.shapePropertiesTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n                this.showColorEditTool(true, 2, 2);\n            }\n            else {\n                this.showColorEditTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n                this.showStrokeColorEditTool(true, 3, 3);\n            }\n            else {\n                this.showStrokeColorEditTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n                this.showThicknessEditTool(true, 4, 4);\n            }\n            else {\n                this.showThicknessEditTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 5, 5);\n            }\n            else {\n                this.showOpacityEditTool(false, 5, 5);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 6, 6);\n            }\n            else {\n                this.showCommentPanelTool(false, 6, 6);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 7, 7);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 7, 7);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.showStampPropertiesTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 2, 2);\n            }\n            else {\n                this.showOpacityEditTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 3, 3);\n            }\n            else {\n                this.showCommentPanelTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 4, 4);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 4, 4);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.showTextMarkupPropertiesTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n                this.showColorEditTool(true, 2, 2);\n            }\n            else {\n                this.showColorEditTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 3, 3);\n            }\n            else {\n                this.showOpacityEditTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 4, 4);\n            }\n            else {\n                this.showCommentPanelTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 5, 5);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 5, 5);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.showInkPropertiesTool = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n                this.showStrokeColorEditTool(true, 2, 2);\n            }\n            else {\n                this.showStrokeColorEditTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n                this.showThicknessEditTool(true, 3, 3);\n            }\n            else {\n                this.showThicknessEditTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 4, 4);\n            }\n            else {\n                this.showOpacityEditTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 5, 5);\n            }\n            else {\n                this.showCommentPanelTool(false, 5, 5);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 6, 6);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 6, 6);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint:disable-next-line\n    AnnotationToolbar.prototype.createAnnotationToolbarForMobile = function (id) {\n        var hideToolbar;\n        if (id) {\n            var editIcon = document.getElementById(id);\n            if (editIcon.parentElement.classList.contains('e-pv-select')) {\n                hideToolbar = true;\n                editIcon.parentElement.classList.remove('e-pv-select');\n            }\n            else {\n                hideToolbar = false;\n                this.pdfViewer.toolbarModule.selectItem(editIcon.parentElement);\n            }\n        }\n        if (hideToolbar) {\n            this.toolbarCreated = false;\n            this.adjustMobileViewer();\n            if (this.toolbar) {\n                this.toolbar.destroy();\n            }\n            if (this.propertyToolbar) {\n                this.propertyToolbar.destroy();\n            }\n            var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_mobileAnnotationToolbar');\n            if (mobileAnnotationToolbar) {\n                mobileAnnotationToolbar.style.display = 'none';\n            }\n            return [];\n        }\n        else {\n            this.isToolbarCreated = true;\n            if (this.propertyToolbar) {\n                this.propertyToolbar.destroy();\n            }\n            if (this.toolbarElement) {\n                this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n            }\n            // eslint-disable-next-line max-len\n            this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_mobileAnnotationToolbar', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left;' });\n            //this.toolbarElement.append(this.pdfViewerBase.viewerContainer);\n            this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n            var stampTemplate = this.getTemplate('span', '_annotation_stamp', 'e-pv-annotation-stamp-container');\n            var signTemplate = this.getTemplate('span', '_annotation_signature', 'e-pv-annotation-handwritten-container');\n            // eslint:disable-next-line\n            var items = void 0;\n            items = [\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-comment-icon e-pv-icon', className: 'e-pv-comment-container', id: this.pdfViewer.element.id + '_comment' },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-highlight-icon e-pv-icon', className: 'e-pv-highlight-container', id: this.pdfViewer.element.id + '_highlight' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-underline-icon e-pv-icon', className: 'e-pv-underline-container', id: this.pdfViewer.element.id + '_underline' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-strikethrough-icon e-pv-icon', className: 'e-pv-strikethrough-container', id: this.pdfViewer.element.id + '_strikethrough' },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-annotation-shape-icon e-pv-icon', className: 'e-pv-annotation-shapes-container', id: this.pdfViewer.element.id + '_annotation_shapes' },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-annotation-calibrate-icon e-pv-icon', className: 'e-pv-annotation-calibrate-container', id: this.pdfViewer.element.id + '_annotation_calibrate' },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-freetext-icon e-pv-icon', className: 'e-pv-annotation-freetextedit-container', id: this.pdfViewer.element.id + '_annotation_freeTextEdit' },\n                { type: 'Separator', align: 'Left' },\n                { template: stampTemplate },\n                { type: 'Separator', align: 'Left' },\n                { template: signTemplate, align: 'Left', },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-inkannotation-icon e-pv-icon', className: 'e-pv-annotation-ink-container', id: this.pdfViewer.element.id + '_annotation_ink', align: 'Left', },\n                { type: 'Separator', align: 'Left' },\n                // eslint-disable-next-line max-len\n                { prefixIcon: 'e-pv-comment-panel-icon e-pv-icon', className: 'e-pv-comment-panel-icon-container', id: this.pdfViewer.element.id + '_annotation_commentPanel', align: 'Right' }\n            ];\n            if (this.toolbarCreated && this.toolbar) {\n                this.toolbar.destroy();\n                this.toolbarCreated = false;\n                this.adjustMobileViewer();\n            }\n            else {\n                // eslint-disable-next-line max-len\n                this.toolbar = new Tool({ items: items, width: '', height: '', overflowMode: 'Scrollable', clicked: this.onToolbarClicked.bind(this) });\n                if (this.pdfViewer.enableRtl) {\n                    this.toolbar.enableRtl = true;\n                }\n                this.toolbar.isStringTemplate = true;\n                this.toolbar.appendTo(this.toolbarElement);\n                this.afterMobileToolbarCreation();\n                this.createStampContainer();\n                this.createSignContainer();\n                this.applyMobileAnnotationToolbarSettings();\n                this.toolbarCreated = true;\n                this.adjustMobileViewer();\n            }\n            return items;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.adjustMobileViewer = function () {\n        var toolbarHeight;\n        if (this.toolbarElement) {\n            toolbarHeight = this.toolbarElement.clientHeight;\n        }\n        var isPrimaryTool = false;\n        if (this.toolbarElement && this.toolbarElement.children.length === 0 && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n            toolbarHeight = this.propertyToolbar.element.clientHeight;\n            if (this.pdfViewer.toolbarModule.toolbarElement.style.display === 'none') {\n                this.pdfViewer.toolbarModule.toolbarElement.style.display = 'block';\n            }\n        }\n        else if (this.freetextToolbarElement && this.freetextToolbarElement.children.length > 0) {\n            toolbarHeight = this.freetextToolbarElement.clientHeight;\n        }\n        else if (toolbarHeight === 0 && this.pdfViewer.toolbarModule.toolbar) {\n            toolbarHeight = this.pdfViewer.toolbarModule.toolbarElement.clientHeight;\n            isPrimaryTool = true;\n        }\n        else if (!toolbarHeight && this.propertyToolbar && this.propertyToolbar.element.children.length > 0) {\n            toolbarHeight = this.propertyToolbar.element.clientHeight;\n        }\n        if (this.pdfViewer.enableToolbar && this.toolbarCreated) {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (toolbarHeight + toolbarHeight)) + 'px';\n        }\n        else {\n            if (!isPrimaryTool) {\n                if (this.pdfViewerBase.viewerContainer.style.height.split('%').length > 1) {\n                    this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (-toolbarHeight)) + 'px';\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (toolbarHeight)) + 'px';\n                }\n            }\n        }\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar - If set true , its show the Toolbar\n     * @returns void\n     */\n    AnnotationToolbar.prototype.showToolbar = function (enable) {\n        var toolbar = this.toolbarElement;\n        if (enable) {\n            toolbar.style.display = 'block';\n            if (Browser.isDevice && this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n            }\n        }\n        else {\n            toolbar.style.display = 'none';\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.createMobileToolbarItems = function (isPath) {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint-disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        // eslint-disable-next-line max-len\n        if (!isPath) {\n            items.push({ template: colorTemplate, align: 'right' });\n            items.push({ template: opacityTemplate, align: 'right' });\n            items.push({ type: 'Separator', align: 'right' });\n        }\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.goBackToToolbar = function () {\n        this.isMobileAnnotEnabled = false;\n        if (this.toolbarElement.children.length > 0) {\n            this.toolbarElement.style.display = 'block';\n        }\n        else {\n            this.toolbarCreated = false;\n            this.toolbar.destroy();\n            this.createAnnotationToolbarForMobile();\n        }\n        var page = this.pdfViewerBase.getSelectTextMarkupCurrentPage();\n        if (page) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.createToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var strokeTemplate = this.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        var shapesTemplate = this.getTemplate('span', '_annotation_shapes', 'e-pv-annotation-shapes-container');\n        var calibrateTemplate = this.getTemplate('span', '_annotation_calibrate', 'e-pv-annotation-calibrate-container');\n        var stampTemplate = this.getTemplate('span', '_annotation_stamp', 'e-pv-annotation-stamp-container');\n        var fontFamilyTemplate = this.getTemplate('input', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n        var fontSizeTemplate = this.getTemplate('input', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n        var textColorTemplate = this.getTemplate('span', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n        var alignmentTemplate = this.getTemplate('span', '_annotation_textalign', 'e-pv-annotation-textalign-container');\n        var textPropertiesTemplate = this.getTemplate('span', '_annotation_textproperties', 'e-pv-annotation-textprop-container');\n        var signTemplate = this.getTemplate('span', '_annotation_signature', 'e-pv-annotation-handwritten-container');\n        // eslint-disable-next-line\n        var items = [];\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-highlight-icon e-pv-icon', className: 'e-pv-highlight-container', id: this.pdfViewer.element.id + '_highlight', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-underline-icon e-pv-icon', className: 'e-pv-underline-container', id: this.pdfViewer.element.id + '_underline', align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-strikethrough-icon e-pv-icon', className: 'e-pv-strikethrough-container', id: this.pdfViewer.element.id + '_strikethrough', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-hightlight-separator-container' });\n        items.push({ template: shapesTemplate, align: 'Left', cssClass: 'e-pv-shape-template-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-shape-separator-container' });\n        items.push({ template: calibrateTemplate, align: 'Left', cssClass: 'e-pv-calibrate-template-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-calibrate-separator-container' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-freetext-icon e-pv-icon', className: 'e-pv-annotation-freetextedit-container', id: this.pdfViewer.element.id + '_annotation_freeTextEdit', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-freetext-separator-container' });\n        items.push({ template: stampTemplate, align: 'Left', cssClass: 'e-pv-stamp-template-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-stamp-separator-container' });\n        // eslint-disable-next-line max-len\n        items.push({ template: signTemplate, align: 'Left', cssClass: 'e-pv-sign-template-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-sign-separator-container' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-inkannotation-icon e-pv-icon', className: 'e-pv-annotation-ink-container', id: this.pdfViewer.element.id + '_annotation_ink', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-ink-separator-container' });\n        items.push({ template: fontFamilyTemplate, align: 'Left', cssClass: 'e-pv-fontfamily-container' });\n        items.push({ template: fontSizeTemplate, align: 'Left', cssClass: 'e-pv-fontsize-container' });\n        items.push({ template: textColorTemplate, align: 'Left', cssClass: 'e-pv-text-color-container' });\n        items.push({ template: alignmentTemplate, align: 'Left', cssClass: 'e-pv-alignment-container' });\n        items.push({ template: textPropertiesTemplate, align: 'Left', cssClass: 'e-pv-text-properties-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-text-separator-container' });\n        items.push({ template: colorTemplate, align: 'Left', cssClass: 'e-pv-color-template-container' });\n        items.push({ template: strokeTemplate, align: 'Left', cssClass: 'e-pv-stroke-template-container' });\n        items.push({ template: thicknessTemplate, align: 'Left', cssClass: 'e-pv-thickness-template-container' });\n        items.push({ template: opacityTemplate, align: 'Left', cssClass: 'e-pv-opacity-template-container' });\n        items.push({ type: 'Separator', align: 'Left', cssClass: 'e-pv-opacity-separator-container' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-comment-panel-icon e-pv-icon', className: 'e-pv-comment-panel-icon-container', id: this.pdfViewer.element.id + '_annotation_commentPanel', align: 'Right' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-annotation-tools-close-icon e-pv-icon', className: 'e-pv-annotation-tools-close-container', id: this.pdfViewer.element.id + '_annotation_close', align: 'Right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.createSignContainer = function () {\n        var _this = this;\n        this.handWrittenSignatureItem = this.pdfViewerBase.getElement('_annotation_signature');\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_annotation_signature'), this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText'));\n        // eslint-disable-next-line\n        var proxy = this;\n        var items = [];\n        if (this.pdfViewer.handWrittenSignatureSettings.signatureItem.length === 0 || this.pdfViewer.handWrittenSignatureSettings.signatureItem.length == 2) {\n            items = [\n                {\n                    text: 'ADD SIGNATURE'\n                },\n                {\n                    separator: true\n                },\n                {\n                    text: 'ADD INITIAL'\n                }\n            ];\n        }\n        else {\n            if (this.pdfViewer.handWrittenSignatureSettings.signatureItem[0] === 'Signature') {\n                items = [\n                    {\n                        text: 'ADD SIGNATURE'\n                    }\n                ];\n            }\n            else {\n                items = [\n                    {\n                        text: 'ADD INITIAL'\n                    }\n                ];\n            }\n        }\n        var saveOptions = {\n            items: items,\n            iconCss: 'e-pv-handwritten-icon e-pv-icon',\n            cssClass: 'e-pv-handwritten-popup',\n            open: function (args) {\n                proxy.openSignature();\n            },\n            beforeItemRender: function (args) {\n                _this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber - 1);\n                if (args.element && args.element.className.indexOf(\"e-separator\") !== -1) {\n                    args.element.style.margin = \"8px 0\";\n                }\n                if (args.item.text === 'ADD SIGNATURE') {\n                    args.element.innerHTML = '';\n                    _this.saveSignatureCount = 0;\n                    for (var collection = _this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n                        if (_this.saveSignatureCount < _this.pdfViewerBase.signatureModule.getSaveLimit(_this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)) {\n                            args.element.style.display = 'block';\n                            // eslint-disable-next-line\n                            var signatureCollection = _this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n                            // eslint-disable-next-line\n                            var collectionKey = signatureCollection.image[0].imageData;\n                            var signatureID = signatureCollection.image[0].id.split('_')[1];\n                            if (!signatureCollection.isInitial && collectionKey !== '') {\n                                // eslint-disable-next-line max-len\n                                var signatureContainer = createElement('div');\n                                signatureContainer.id = 's' + signatureID;\n                                signatureContainer.style.display = 'block';\n                                signatureContainer.style.paddingBottom = '10px';\n                                var signatureSpan = createElement('span');\n                                signatureSpan.id = 'sign_border_' + signatureID;\n                                signatureSpan.classList.add('e-pv-align-border');\n                                var signatureImage = void 0;\n                                if (signatureCollection.image[0].signatureType === 'SignatureText') {\n                                    signatureImage = createElement('div');\n                                    signatureImage.classList.add('e-pv-align-border-div');\n                                    signatureImage.innerText = collectionKey;\n                                    signatureImage.style.fontFamily = signatureCollection.image[0].fontFamily;\n                                    signatureImage.style.fontSize = '15px';\n                                    signatureImage.style.display = 'inline-flex';\n                                    signatureImage.style.alignItems = 'center';\n                                    signatureImage.style.position = 'relative';\n                                    signatureImage.id = 'sign_' + signatureID;\n                                    signatureImage.style.width = '80px';\n                                    signatureImage.style.height = '53px';\n                                    signatureImage.style.overflow = 'hidden';\n                                    signatureImage.style.textOverflow = 'ellipsis';\n                                    signatureImage.style.paddingLeft = '11px';\n                                }\n                                else {\n                                    signatureImage = createElement('img');\n                                    signatureImage.id = 'sign_' + signatureID;\n                                    signatureImage.src = collectionKey;\n                                    signatureImage.width = 80;\n                                    signatureImage.height = 32;\n                                    signatureImage.classList.add('e-pv-signatureimage');\n                                    signatureImage.style.paddingLeft = '20px';\n                                    signatureImage.style.paddingRight = '18px';\n                                    signatureImage.style.paddingTop = '12px';\n                                    signatureImage.style.paddingBottom = '12px';\n                                    signatureImage.style.boxSizing = 'content-box';\n                                }\n                                signatureImage.addEventListener('mouseover', _this.hoverSignatureImage.bind(_this));\n                                signatureImage.addEventListener('mouseleave', _this.leaveSignatureImage.bind(_this));\n                                var signatureDeleteSpan = createElement('span');\n                                signatureDeleteSpan.id = 'delete_' + signatureID;\n                                signatureDeleteSpan.classList.add('e-pv-delete');\n                                signatureDeleteSpan.classList.add('e-pv-align');\n                                signatureSpan.append(signatureImage);\n                                signatureSpan.append(signatureDeleteSpan);\n                                signatureContainer.append(signatureSpan);\n                                args.element.appendChild(signatureContainer);\n                                args.element.style.pointerEvents = 'auto';\n                                args.element.style.background = 'none';\n                                _this.pdfViewerBase.getElement('_annotation_signature-popup').style.width = '206px';\n                                _this.saveSignatureCount++;\n                            }\n                        }\n                    }\n                    var addInitialSpan = createElement('button');\n                    addInitialSpan.classList.add(\"e-control\", \"e-btn\", \"e-lib\", \"e-outline\", \"e-primary\");\n                    addInitialSpan.textContent = _this.pdfViewer.localeObj.getConstant('HandwrittenSignatureDialogHeaderText');\n                    _this.pdfViewer.locale === 'en-US' ? addInitialSpan.style.width = \"130px\" : addInitialSpan.style.width = \"auto\";\n                    addInitialSpan.style.height = \"36px\";\n                    addInitialSpan.addEventListener('click', _this.clickSignature.bind(_this));\n                    args.element.appendChild(addInitialSpan);\n                    args.element.addEventListener('mouseover', _this.hoverInitialBtn.bind(_this));\n                    args.element.style.width = '206px';\n                    args.element.style.display = 'flex';\n                    args.element.style.flexDirection = 'column';\n                    args.element.style.height = 'auto';\n                    args.element.style.alignItems = 'center';\n                }\n                if (args.item.text === 'ADD INITIAL') {\n                    _this.saveInitialCount = 0;\n                    args.element.innerHTML = '';\n                    for (var collection = _this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n                        if (_this.saveInitialCount < _this.pdfViewerBase.signatureModule.getSaveLimit(_this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)) {\n                            // eslint-disable-next-line\n                            var signatureCollection = _this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n                            // eslint-disable-next-line\n                            var collectionKey = signatureCollection.image[0].imageData;\n                            var signatureID = signatureCollection.image[0].id.split('_')[1];\n                            if (signatureCollection.isInitial && collectionKey !== '') {\n                                var signatureContainer = createElement('div');\n                                signatureContainer.id = 's' + signatureID;\n                                signatureContainer.style.display = 'block';\n                                signatureContainer.style.paddingBottom = '10px';\n                                var signatureSpan = createElement('span');\n                                signatureSpan.id = 'sign_border_' + signatureID;\n                                signatureSpan.classList.add('e-pv-align-border');\n                                var signatureImage = void 0;\n                                if (signatureCollection.image[0].signatureType === 'SignatureText') {\n                                    signatureImage = createElement('div');\n                                    signatureImage.classList.add('e-pv-align-border-div');\n                                    signatureImage.innerText = collectionKey;\n                                    signatureImage.style.fontFamily = signatureCollection.image[0].fontFamily;\n                                    signatureImage.style.fontSize = '15px';\n                                    signatureImage.style.display = 'inline-flex';\n                                    signatureImage.style.alignItems = 'center';\n                                    signatureImage.style.position = 'relative';\n                                    signatureImage.id = 'sign_' + signatureID;\n                                    signatureImage.style.width = '80px';\n                                    signatureImage.style.height = '53px';\n                                    signatureImage.style.overflow = 'hidden';\n                                    signatureImage.style.textOverflow = 'ellipsis';\n                                    signatureImage.style.paddingLeft = '11px';\n                                }\n                                else {\n                                    signatureImage = createElement('img');\n                                    signatureImage.id = 'sign_' + signatureID;\n                                    signatureImage.src = collectionKey;\n                                    signatureImage.width = 80;\n                                    signatureImage.height = 32;\n                                    signatureImage.classList.add('e-pv-signatureimage');\n                                    signatureImage.style.paddingLeft = '20px';\n                                    signatureImage.style.paddingRight = '18px';\n                                    signatureImage.style.paddingTop = '12px';\n                                    signatureImage.style.paddingBottom = '12px';\n                                    signatureImage.style.boxSizing = 'content-box';\n                                }\n                                signatureImage.addEventListener('mouseover', _this.hoverSignatureImage.bind(_this));\n                                signatureImage.addEventListener('mouseleave', _this.leaveSignatureImage.bind(_this));\n                                signatureImage.width = 80;\n                                signatureImage.height = 32;\n                                var signatureDeleteSpan = createElement('span');\n                                signatureDeleteSpan.id = 'delete_' + signatureID;\n                                signatureDeleteSpan.classList.add('e-pv-delete');\n                                signatureDeleteSpan.classList.add('e-pv-align');\n                                signatureSpan.append(signatureImage);\n                                signatureSpan.append(signatureDeleteSpan);\n                                signatureContainer.append(signatureSpan);\n                                args.element.appendChild(signatureContainer);\n                                // eslint-disable-next-line max-len\n                                args.element.style.pointerEvents = 'auto';\n                                args.element.style.background = 'none';\n                                _this.pdfViewerBase.getElement('_annotation_signature-popup').style.width = '206px';\n                                _this.saveInitialCount++;\n                            }\n                        }\n                    }\n                    _this.isSignatureIteam = false;\n                    var addInitialSpan = createElement('button');\n                    addInitialSpan.classList.add(\"e-control\", \"e-btn\", \"e-lib\", \"e-outline\", \"e-primary\");\n                    addInitialSpan.textContent = _this.pdfViewer.localeObj.getConstant('HandwrittenInitialDialogHeaderText');\n                    _this.pdfViewer.locale === 'en-US' ? addInitialSpan.style.width = \"130px\" : addInitialSpan.style.width = \"auto\";\n                    addInitialSpan.style.height = \"36px\";\n                    addInitialSpan.addEventListener('click', _this.clickInitial.bind(_this));\n                    args.element.appendChild(addInitialSpan);\n                    args.element.addEventListener('mouseover', _this.hoverInitialBtn.bind(_this));\n                    args.element.style.width = '206px';\n                    args.element.style.display = 'flex';\n                    args.element.style.flexDirection = 'column';\n                    args.element.style.height = 'auto';\n                    args.element.style.alignItems = 'center';\n                }\n            },\n            select: function (args) {\n                _this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber - 1);\n            }\n        };\n        var drpDownBtn = new DropDownButton(saveOptions);\n        if (this.pdfViewer.enableRtl) {\n            drpDownBtn.enableRtl = this.pdfViewer.enableRtl;\n        }\n        drpDownBtn.appendTo(this.handWrittenSignatureItem);\n    };\n    AnnotationToolbar.prototype.updateSignatureCount = function () {\n        var count = 0;\n        this.openSignaturePopup = false;\n        // eslint-disable-next-line\n        var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection;\n        for (var collection = 0; collection < signatureCollection.length; collection++) {\n            // eslint-disable-next-line\n            var colletionList = signatureCollection[collection];\n            if (colletionList.image[0].imageData === '') {\n                count++;\n            }\n        }\n    };\n    AnnotationToolbar.prototype.openSignature = function () {\n        this.saveInitialCount = 0;\n        this.saveSignatureCount = 0;\n        for (var collection = this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n            if (this.saveSignatureCount < this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)) {\n                // eslint-disable-next-line\n                var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n                if (signatureCollection.image[0].imageData !== '') {\n                    if (!signatureCollection.isInitial) {\n                        this.saveSignatureCount++;\n                        // eslint-disable-next-line\n                        var addedSignature = document.getElementById('sign_border_' + signatureCollection.image[0].id.split('_')[1] + '');\n                        // eslint-disable-next-line\n                        var deleteSignature = document.getElementById('delete_' + signatureCollection.image[0].id.split('_')[1] + '');\n                        deleteSignature.style.backgroundClip = 'content-box';\n                        addedSignature.addEventListener('click', this.renderAddedSignature.bind(this));\n                        deleteSignature.addEventListener('click', this.deleteSavedSign.bind(this));\n                        deleteSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n                        deleteSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n                        addedSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n                        addedSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n                    }\n                }\n            }\n        }\n        for (var collection = this.pdfViewerBase.signatureModule.signaturecollection.length; collection > 0; collection--) {\n            if (this.saveInitialCount < this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)) {\n                // eslint-disable-next-line\n                var signatureCollection = this.pdfViewerBase.signatureModule.signaturecollection[collection - 1];\n                if (signatureCollection.image[0].imageData !== '') {\n                    if (signatureCollection.isInitial) {\n                        this.saveInitialCount++;\n                        // eslint-disable-next-line\n                        var addedSignature = document.getElementById('sign_border_' + signatureCollection.image[0].id.split('_')[1] + '');\n                        // eslint-disable-next-line\n                        var deleteSignature = document.getElementById('delete_' + signatureCollection.image[0].id.split('_')[1] + '');\n                        deleteSignature.style.backgroundClip = 'content-box';\n                        addedSignature.addEventListener('click', this.renderAddedSignature.bind(this));\n                        deleteSignature.addEventListener('click', this.deleteSavedSign.bind(this));\n                        deleteSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n                        deleteSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n                        addedSignature.addEventListener('mouseover', this.hoverSignatureDelete.bind(this));\n                        addedSignature.addEventListener('mouseleave', this.leaveSignatureDelete.bind(this));\n                    }\n                }\n            }\n        }\n    };\n    AnnotationToolbar.prototype.hoverSignatureDelete = function () {\n        var eventTarget = event.target;\n        if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n            eventTarget.classList.add('e-pv-signaturehover');\n            eventTarget.style.cursor = 'pointer';\n        }\n    };\n    AnnotationToolbar.prototype.hoverInitialBtn = function (event) {\n        var eventTarget = event.target;\n        var currentFieldID = '';\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            currentFieldID = eventTarget.id;\n        }\n        else {\n            currentFieldID = isNullOrUndefined(event.path) ? event.composedPath()[0].id : event.path[0].id;\n        }\n        if (currentFieldID !== 'sign_' + currentFieldID.split(\"_\")[1] && currentFieldID !== 'delete_' + currentFieldID.split(\"_\")[1]) {\n            var liElement = document.getElementById(eventTarget.id);\n            if (isNullOrUndefined(liElement)) {\n                liElement = document.getElementById(eventTarget.parentElement.id);\n            }\n            if (liElement != null && (eventTarget.id !== 'sign_' + eventTarget.id.split('_')[1] || eventTarget.id !== 'sign_border_' + eventTarget.id.split('_')[2])) {\n                liElement.style.background = 'transparent';\n                liElement.style.cursor = 'default';\n            }\n            else if (liElement.parentElement != null && (eventTarget.id !== 'sign_' + eventTarget.id.split('_')[1] || eventTarget.id !== 'sign_border_' + eventTarget.id.split('_')[2])) {\n                liElement.parentElement.style.background = 'transparent';\n                liElement.parentElement.style.cursor = 'default';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.hoverSignatureImage = function () {\n        var eventTarget = event.target;\n        if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n            eventTarget.classList.add('e-pv-signaturehover');\n            eventTarget.classList.remove('e-pv-signatureimage');\n            eventTarget.style.cursor = 'pointer';\n        }\n    };\n    AnnotationToolbar.prototype.leaveSignatureDelete = function () {\n        var eventTarget = event.target;\n        if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n            eventTarget.classList.remove('e-pv-signaturehover');\n            if (eventTarget.children[0] && eventTarget.children[0].tagName === 'IMG') {\n                eventTarget.children[0].classList.remove('e-pv-signaturehover');\n            }\n            eventTarget.style.cursor = 'default';\n        }\n    };\n    AnnotationToolbar.prototype.clickSignature = function () {\n        this.pdfViewerBase.isInitialField = false;\n        this.addSignature();\n    };\n    AnnotationToolbar.prototype.clickInitial = function () {\n        this.pdfViewerBase.isInitialField = true;\n        this.addSignature();\n    };\n    AnnotationToolbar.prototype.leaveSignatureImage = function () {\n        var eventTarget = event.target;\n        if (eventTarget.id === 'sign_' + eventTarget.id.split('_')[1] || eventTarget.classList.contains('e-pv-delete')) {\n            eventTarget.classList.remove('e-pv-signaturehover');\n            if (eventTarget.tagName === 'IMG')\n                eventTarget.classList.add('e-pv-signatureimage');\n            if (eventTarget.children[0] && eventTarget.children[0].tagName === 'IMG') {\n                eventTarget.children[0].classList.remove('e-pv-signaturehover');\n                eventTarget.children[0].classList.add('e-pv-signatureimage');\n            }\n            eventTarget.style.cursor = 'default';\n        }\n    };\n    AnnotationToolbar.prototype.addSignature = function () {\n        this.deselectAllItems();\n        this.showSignaturepanel();\n    };\n    AnnotationToolbar.prototype.renderAddedSignature = function () {\n        this.pdfViewerBase.isAddedSignClicked = true;\n        this.isSavedSignatureClicked = true;\n        this.pdfViewerBase.signatureModule.RenderSavedSignature();\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.deleteSavedSign = function (event) {\n        event.stopPropagation();\n        // eslint-disable-next-line\n        var signaturecollection = this.pdfViewerBase.signatureModule.signaturecollection;\n        for (var collection = signaturecollection.length; collection > 0; collection--) {\n            if (event.target.parentElement.children[0].id === 'sign_' + signaturecollection[collection - 1].image[0].id.split('_')[1]) {\n                // eslint-disable-next-line\n                var RemoveSignature = signaturecollection[collection - 1];\n                RemoveSignature.image[0].imageData = '';\n                this.pdfViewerBase.signatureModule.signaturecollection.splice(collection - 1, 1);\n                break;\n            }\n        }\n        event.target.parentElement.remove();\n    };\n    AnnotationToolbar.prototype.getTemplate = function (elementName, id, className) {\n        var element = createElement(elementName, { id: this.pdfViewer.element.id + id });\n        if (className) {\n            element.className = className;\n        }\n        return element.outerHTML;\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.createStampContainer = function () {\n        var _this = this;\n        this.stampElement = this.pdfViewerBase.getElement('_annotation_stamp');\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_annotation_stamp'), this.pdfViewer.localeObj.getConstant('Add Stamp'));\n        var contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + 'contextMenuElement' });\n        this.pdfViewerBase.getElement('_annotation_stamp').appendChild(contextMenuElement);\n        var items = [];\n        if (this.pdfViewer.stampSettings.dynamicStamps && this.pdfViewer.stampSettings.dynamicStamps.length > 0) {\n            var dynamicStamps_1 = [];\n            items.push({ text: this.pdfViewer.localeObj.getConstant('Dynamic'), label: 'Dynamic', items: dynamicStamps_1 });\n            this.pdfViewer.stampSettings.dynamicStamps.forEach(function (stampItem, index) {\n                var name = DynamicStampItem[stampItem];\n                switch (name) {\n                    case 'NotApproved':\n                        name = 'Not Approved';\n                        break;\n                }\n                dynamicStamps_1.push({ text: _this.pdfViewer.localeObj.getConstant(name), label: name });\n            });\n        }\n        if (this.pdfViewer.stampSettings.signStamps && this.pdfViewer.stampSettings.signStamps.length > 0) {\n            var signStamps_1 = [];\n            items.push({ text: this.pdfViewer.localeObj.getConstant('Sign Here'), label: 'Sign Here', items: signStamps_1 });\n            this.pdfViewer.stampSettings.signStamps.forEach(function (stampItem, index) {\n                var name = SignStampItem[stampItem];\n                switch (name) {\n                    case 'InitialHere':\n                        name = 'Initial Here';\n                        break;\n                    case 'SignHere':\n                        name = 'Sign Here';\n                        break;\n                }\n                signStamps_1.push({ text: _this.pdfViewer.localeObj.getConstant(name), label: name });\n            });\n        }\n        if (this.pdfViewer.stampSettings.standardBusinessStamps && this.pdfViewer.stampSettings.standardBusinessStamps.length > 0) {\n            var standardsBusinessStamps_1 = [];\n            items.push({ text: this.pdfViewer.localeObj.getConstant('Standard Business'), label: 'Standard Business', items: standardsBusinessStamps_1 });\n            this.pdfViewer.stampSettings.standardBusinessStamps.forEach(function (stampItem, index) {\n                var name = StandardBusinessStampItem[stampItem];\n                switch (name) {\n                    case 'NotApproved':\n                        name = 'Not Approved';\n                        break;\n                    case 'ForPublicRelease':\n                        name = 'For Public Release';\n                        break;\n                    case 'NotForPublicRelease':\n                        name = 'Not For Public Release';\n                        break;\n                    case 'ForComment':\n                        name = 'For Comment';\n                        break;\n                    case 'PreliminaryResults':\n                        name = 'Preliminary Results';\n                        break;\n                    case 'InformationOnly':\n                        name = 'Information Only';\n                        break;\n                }\n                standardsBusinessStamps_1.push({ text: _this.pdfViewer.localeObj.getConstant(name), label: name });\n            });\n        }\n        if (this.pdfViewer.customStampSettings.enableCustomStamp && !Browser.isDevice) {\n            if (items.length > 0) {\n                items.push({ separator: true });\n            }\n            items.push({ text: this.pdfViewer.localeObj.getConstant('Custom Stamp'), label: 'Custom Stamp', items: [] });\n        }\n        this.stampMenu = [\n            {\n                iconCss: 'e-pv-stamp-icon e-pv-icon',\n                items: items\n            }\n        ];\n        var menuOptions = {\n            items: this.stampMenu,\n            cssClass: 'e-custom-scroll',\n            showItemOnClick: true,\n            enableScrolling: true,\n            beforeOpen: function (args) {\n                _this.resetFreeTextAnnot();\n                if (args.parentItem.text === '' && _this.pdfViewer.customStampSettings.isAddToMenu && args.items.length > 0) {\n                    // eslint-disable-next-line\n                    var currentElements = null;\n                    for (var i = 0; i < args.items.length; i++) {\n                        if (args.items[i].text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n                            args.items[i].items = [];\n                            currentElements = args.items[i];\n                            break;\n                        }\n                    }\n                    // eslint-disable-next-line\n                    var elements = _this.pdfViewerBase.customStampCollection;\n                    // eslint-disable-next-line\n                    var stampElements = _this.pdfViewer.customStampSettings.customStamps;\n                    if (elements.length === 0 && stampElements && stampElements.length > 0) {\n                        for (var n = 0; n < stampElements.length; n++) {\n                            // eslint-disable-next-line max-len\n                            elements.push({ customStampName: stampElements[n].customStampName, customStampImageSource: stampElements[n].customStampImageSource });\n                        }\n                    }\n                    for (var m = 0; m < elements.length; m++) {\n                        if (currentElements != null) {\n                            currentElements.items.push({ text: elements[m].customStampName });\n                            for (var i = 0; i < args.items.length; i++) {\n                                if (args.items[i].text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n                                    var liElem = args.element.children[i];\n                                    if (liElem && !liElem.childElementCount) {\n                                        var span = document.createElement('span');\n                                        span.className = 'e-icons e-caret e-menu-caret-icon';\n                                        liElem.appendChild(span);\n                                        liElem.setAttribute('aria-haspopup', 'true');\n                                        liElem.setAttribute('aria-expanded', 'false');\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                if (args.parentItem.text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n                    // eslint-disable-next-line\n                    var stampElements = _this.pdfViewer.customStampSettings.customStamps;\n                    if (stampElements && stampElements.length > 10) {\n                        closest(args.element, '.e-menu-wrapper').style.height = '350px';\n                    }\n                }\n                _this.stampParentID = args.parentItem.text;\n                _this.menuItems.showItemOnClick = false;\n            },\n            beforeClose: function (args) {\n                // eslint-disable-next-line max-len\n                if ((args.parentItem && args.parentItem.text !== _this.pdfViewer.localeObj.getConstant('Custom Stamp') && args.parentItem.text !== 'Standard Business' && args.parentItem.text !== 'Dynamic' && args.parentItem.text !== 'Sign Here') || !args.parentItem) {\n                    _this.menuItems.showItemOnClick = true;\n                }\n            },\n            select: function (args) {\n                _this.pdfViewerBase.isAlreadyAdded = false;\n                if (args.item.text === _this.pdfViewer.localeObj.getConstant('Custom Stamp')) {\n                    _this.updateInteractionTools();\n                    _this.checkStampAnnotations();\n                    _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n                    // eslint-disable-next-line\n                    var stampImage = document.getElementById(_this.pdfViewer.element.id + '_stampElement');\n                    if (stampImage) {\n                        stampImage.click();\n                    }\n                    _this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                    // eslint-disable-next-line max-len\n                }\n                else if (_this.stampParentID === _this.pdfViewer.localeObj.getConstant('Custom Stamp') && args.item.text !== '') {\n                    // eslint-disable-next-line\n                    var elements = _this.pdfViewerBase.customStampCollection;\n                    for (var n = 0; n < elements.length; n++) {\n                        if (elements[n].customStampName === args.item.text) {\n                            _this.pdfViewer.annotationModule.stampAnnotationModule.customStampName = args.item.text;\n                            _this.checkStampAnnotations();\n                            _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n                            _this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n                            _this.pdfViewerBase.stampAdded = true;\n                            _this.pdfViewerBase.isAlreadyAdded = true;\n                            // eslint-disable-next-line max-len\n                            _this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(elements[n].customStampImageSource);\n                            _this.pdfViewerBase.stampAdded = false;\n                        }\n                    }\n                    // eslint-disable-next-line max-len\n                }\n                else if (args.item.text !== _this.pdfViewer.localeObj.getConstant('Dynamic') && args.item.text !== '' && args.item.text !== 'Standard Business' && (_this.stampParentID === 'Sign Here' || args.item.text !== 'Sign Here')) {\n                    _this.updateInteractionTools();\n                    _this.checkStampAnnotations();\n                    _this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n                    _this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n                    _this.pdfViewerBase.stampAdded = true;\n                    _this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                    if (_this.stampParentID === _this.pdfViewer.localeObj.getConstant('Dynamic')) {\n                        _this.pdfViewerBase.isDynamicStamp = true;\n                        _this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(args.item.label);\n                    }\n                    else {\n                        _this.pdfViewerBase.isDynamicStamp = false;\n                        _this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(args.item.label);\n                    }\n                    if (Browser.isDevice) {\n                        _this.stampToolMobileForMobile(_this.pdfViewer.element.id + '_annotation_stamp');\n                    }\n                }\n            }\n        };\n        this.menuItems = new Menu(menuOptions, '#' + this.pdfViewer.element.id + 'contextMenuElement');\n        contextMenuElement.parentElement.classList.add('e-pv-stamp');\n        if (this.pdfViewer.enableRtl) {\n            this.menuItems.enableRtl = true;\n        }\n        return contextMenuElement;\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.createCustomStampElement = function () {\n        // eslint-disable-next-line\n        var stampImage = createElement('input', { id: this.pdfViewer.element.id + '_stampElement', attrs: { 'type': 'file' } });\n        stampImage.setAttribute('accept', '.jpg,.jpeg,.png');\n        stampImage.style.position = 'absolute';\n        stampImage.style.left = '0px';\n        stampImage.style.top = '0px';\n        stampImage.style.visibility = 'hidden';\n        document.body.appendChild(stampImage);\n        stampImage.addEventListener('change', this.addStampImage);\n    };\n    AnnotationToolbar.prototype.checkStampAnnotations = function () {\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode && this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.annotations) {\n            for (var i = 0; i < this.pdfViewer.selectedItems.annotations.length; i++) {\n                // eslint-disable-next-line\n                var annotation = this.pdfViewer.selectedItems.annotations[i];\n                // eslint-disable-next-line\n                if (annotation && !annotation.annotName && !annotation.author && (annotation.shapeAnnotationType !== 'Shape' || annotation.shapeAnnotationType !== 'Image')) {\n                    this.pdfViewer.remove(annotation);\n                    this.pdfViewer.annotation.renderAnnotations(annotation.pageIndex, null, null, null);\n                    this.pdfViewer.clearSelection(annotation.pageIndex);\n                }\n            }\n        }\n    };\n    AnnotationToolbar.prototype.createDropDowns = function (isPath) {\n        var _this = this;\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.shapeElement = this.pdfViewerBase.getElement('_annotation_shapes');\n            var shapeToolbar = this.createShapeOptions(this.shapeElement.id, true);\n            // eslint-disable-next-line max-len\n            this.shapeDropDown = this.createDropDownButton(this.shapeElement, 'e-pv-annotation-shape-icon', shapeToolbar.element, this.pdfViewer.localeObj.getConstant('Add Shapes'));\n            this.calibrateElement = this.pdfViewerBase.getElement('_annotation_calibrate');\n            var calibrateToolbar = this.createShapeOptions(this.calibrateElement.id, false);\n            // eslint-disable-next-line max-len\n            this.calibrateDropDown = this.createDropDownButton(this.calibrateElement, 'e-pv-annotation-calibrate-icon', calibrateToolbar.element, this.pdfViewer.localeObj.getConstant('Calibrate'));\n        }\n        if (!isPath) {\n            this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n            this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n            this.colorPalette.change = this.onColorPickerChange.bind(this);\n            // eslint-disable-next-line max-len\n            this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n            this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n            this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n            this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n        }\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.strokeDropDownElement = this.pdfViewerBase.getElement('_annotation_stroke');\n            this.strokeColorPicker = this.createColorPicker(this.strokeDropDownElement.id);\n            this.strokeColorPicker.change = this.onStrokePickerChange.bind(this);\n            // eslint-disable-next-line max-len\n            this.strokeDropDown = this.createDropDownButton(this.strokeDropDownElement, 'e-pv-annotation-stroke-icon', this.strokeColorPicker.element.parentElement, this.pdfViewer.localeObj.getConstant('Stroke edit'));\n            this.strokeDropDown.beforeOpen = this.strokeDropDownBeforeOpen.bind(this);\n            this.strokeDropDown.open = this.strokeDropDownOpen.bind(this);\n            this.pdfViewerBase.getElement('_annotation_stroke-popup').addEventListener('click', this.onStrokePickerCancelClick.bind(this));\n            this.thicknessElement = this.pdfViewerBase.getElement('_annotation_thickness');\n            var thicknessContainer = this.createThicknessSlider(this.thicknessElement.id);\n            // eslint-disable-next-line max-len\n            this.thicknessDropDown = this.createDropDownButton(this.thicknessElement, 'e-pv-annotation-thickness-icon', thicknessContainer, this.pdfViewer.localeObj.getConstant('Change thickness'));\n            this.thicknessDropDown.beforeOpen = this.thicknessDropDownBeforeOpen.bind(this);\n            this.thicknessSlider.change = this.thicknessChange.bind(this);\n            this.thicknessSlider.changed = this.thicknessChange.bind(this);\n            this.thicknessDropDown.open = this.thicknessDropDownOpen.bind(this);\n        }\n        if (!isPath) {\n            this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n            var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n            // eslint-disable-next-line max-len\n            this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n            this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n            this.opacitySlider.change = this.opacityChange.bind(this);\n            this.opacitySlider.changed = this.opacityChange.bind(this);\n            this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n        }\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.fontFamilyElement = this.pdfViewerBase.getElement('_annotation_fontname');\n            this.createDropDownListForFamily(this.fontFamilyElement);\n            //this.fontFamilyElement.style.textAlign = 'left';\n            this.fontFamilyElement.addEventListener('change', function () {\n                _this.onFontFamilyChange.bind(_this);\n            });\n            this.fontSizeElement = this.pdfViewerBase.getElement('_annotation_fontsize');\n            this.createDropDownListForSize(this.fontSizeElement);\n            this.fontColorElement = this.pdfViewerBase.getElement('_annotation_textcolor');\n            this.fontColorPalette = this.createColorPicker(this.fontColorElement.id);\n            this.fontColorPalette.change = this.onFontColorChange.bind(this);\n            // eslint-disable-next-line max-len\n            this.fontColorDropDown = this.createDropDownButton(this.fontColorElement, 'e-pv-annotation-textcolor-icon', this.fontColorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Font color'));\n            this.textAlignElement = this.pdfViewerBase.getElement('_annotation_textalign');\n            this.alignmentToolbar = this.createShapeOptions(this.textAlignElement.id, undefined, true);\n            // eslint-disable-next-line max-len\n            this.textAlignDropDown = this.createDropDownButton(this.textAlignElement, 'e-pv-annotation-textalign-icon', this.alignmentToolbar.element, this.pdfViewer.localeObj.getConstant('Text Align'));\n            this.textAlignDropDown.beforeOpen = this.textAlignDropDownBeforeOpen.bind(this);\n            this.textPropElement = this.pdfViewerBase.getElement('_annotation_textproperties');\n            this.propertiesToolbar = this.createShapeOptions(this.textPropElement.id, undefined, false, true);\n            // eslint-disable-next-line max-len\n            this.textPropertiesDropDown = this.createPropDropDownButton(this.textPropElement, 'e-pv-annotation-textprop-icon', this.propertiesToolbar.element, this.pdfViewer.localeObj.getConstant('Text Properties'));\n            this.textPropertiesDropDown.beforeOpen = this.textPropertiesDropDownBeforeOpen.bind(this);\n        }\n    };\n    AnnotationToolbar.prototype.mobileColorpicker = function (id) {\n        var _this = this;\n        this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n        var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n        // eslint-disable-next-line max-len\n        this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n        this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n        this.opacitySlider.change = this.opacityChange.bind(this);\n        this.opacitySlider.changed = this.opacityChange.bind(this);\n        this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n        if (id === this.pdfViewer.element.id + '_annotation_shapes') {\n            id = this.pdfViewer.element.id + '_annotation_shapesIcon';\n        }\n        else if (id === this.pdfViewer.element.id + '_annotation_calibrate') {\n            id = this.pdfViewer.element.id + '_annotation_calibrateIcon';\n        }\n        else if (id === this.pdfViewer.element.id + '_highlight') {\n            id = this.pdfViewer.element.id + '_highlightIcon';\n        }\n        else if (id === this.pdfViewer.element.id + '_underline') {\n            id = this.pdfViewer.element.id + '_underlineIcon';\n        }\n        else if (id === this.pdfViewer.element.id + '_strikethrough') {\n            id = this.pdfViewer.element.id + '_strikethroughIcon';\n        }\n        // eslint-disable-next-line max-len\n        if (id === this.pdfViewer.element.id + '_annotation_shapesIcon' || id === this.pdfViewer.element.id + '_annotation_calibrateIcon' || id === this.pdfViewer.element.id + '_annotation_freeTextEdit' ||\n            // eslint-disable-next-line max-len\n            id === this.pdfViewer.element.id + '_highlightIcon' || id === this.pdfViewer.element.id + '_underlineIcon' || id === this.pdfViewer.element.id + '_strikethroughIcon' || id === this.pdfViewer.element.id + '_annotation_inkIcon' || id === this.pdfViewer.element.id + '_annotation_handwrittenSign') {\n            if (id !== this.pdfViewer.element.id + '_annotation_handwrittenSign' && id !== this.pdfViewer.element.id + '_annotation_inkIcon') {\n                this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n                this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n                this.colorPalette.change = this.onColorPickerChange.bind(this);\n                // eslint-disable-next-line max-len\n                this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n                this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n                this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n            }\n            if (id === this.pdfViewer.element.id + '_annotation_freeTextEdit') {\n                this.fontFamilyElement = this.pdfViewerBase.getElement('_annotation_fontname');\n                this.createDropDownListForFamily(this.fontFamilyElement);\n                this.fontFamilyElement.style.textAlign = 'left';\n                this.fontFamilyElement.addEventListener('change', function () { _this.onFontFamilyChange.bind(_this); });\n                this.fontSizeElement = this.pdfViewerBase.getElement('_annotation_fontsize');\n                this.createDropDownListForSize(this.fontSizeElement);\n                this.fontColorElement = this.pdfViewerBase.getElement('_annotation_textcolor');\n                this.fontColorPalette = this.createColorPicker(this.fontColorElement.id);\n                this.fontColorPalette.change = this.onFontColorChange.bind(this);\n                // eslint-disable-next-line max-len\n                this.fontColorDropDown = this.createDropDownButton(this.fontColorElement, 'e-pv-annotation-textcolor-icon', this.fontColorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Font color'));\n                this.textAlignElement = this.pdfViewerBase.getElement('_annotation_textalign');\n                this.alignmentToolbar = this.createShapeOptions(this.textAlignElement.id, undefined, true);\n                // eslint-disable-next-line max-len\n                this.textAlignDropDown = this.createDropDownButton(this.textAlignElement, 'e-pv-annotation-textalign-icon', this.alignmentToolbar.element, this.pdfViewer.localeObj.getConstant('Text Align'));\n                this.textAlignDropDown.beforeOpen = this.textAlignDropDownBeforeOpen.bind(this);\n                this.textPropElement = this.pdfViewerBase.getElement('_annotation_textproperties');\n                this.propertiesToolbar = this.createShapeOptions(this.textPropElement.id, undefined, false, true);\n                // eslint-disable-next-line max-len\n                this.textPropertiesDropDown = this.createPropDropDownButton(this.textPropElement, 'e-pv-annotation-textprop-icon', this.propertiesToolbar.element, this.pdfViewer.localeObj.getConstant('Text Properties'));\n                this.textPropertiesDropDown.beforeOpen = this.textPropertiesDropDownBeforeOpen.bind(this);\n            }\n            // eslint-disable-next-line max-len\n            if (id === this.pdfViewer.element.id + '_annotation_shapesIcon' || id === this.pdfViewer.element.id + '_annotation_calibrateIcon' || id === this.pdfViewer.element.id + '_annotation_freeTextEdit' ||\n                id === this.pdfViewer.element.id + '_annotation_inkIcon' || id === this.pdfViewer.element.id + '_annotation_handwrittenSign') {\n                this.thicknessElement = this.pdfViewerBase.getElement('_annotation_thickness');\n                var thicknessContainer = this.createThicknessSlider(this.thicknessElement.id);\n                // eslint-disable-next-line max-len\n                this.thicknessDropDown = this.createDropDownButton(this.thicknessElement, 'e-pv-annotation-thickness-icon', thicknessContainer, this.pdfViewer.localeObj.getConstant('Change thickness'));\n                this.thicknessDropDown.beforeOpen = this.thicknessDropDownBeforeOpen.bind(this);\n                this.thicknessSlider.change = this.thicknessChange.bind(this);\n                this.thicknessSlider.changed = this.thicknessChange.bind(this);\n                this.thicknessDropDown.open = this.thicknessDropDownOpen.bind(this);\n                this.strokeDropDownElement = this.pdfViewerBase.getElement('_annotation_stroke');\n                this.strokeColorPicker = this.createColorPicker(this.strokeDropDownElement.id);\n                this.strokeColorPicker.change = this.onStrokePickerChange.bind(this);\n                // eslint-disable-next-line max-len\n                this.strokeDropDown = this.createDropDownButton(this.strokeDropDownElement, 'e-pv-annotation-stroke-icon', this.strokeColorPicker.element.parentElement, this.pdfViewer.localeObj.getConstant('Stroke edit'));\n                this.strokeDropDown.beforeOpen = this.strokeDropDownBeforeOpen.bind(this);\n                this.strokeDropDown.open = this.strokeDropDownOpen.bind(this);\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.getElement('_annotation_stroke-popup').addEventListener('click', this.onStrokePickerCancelClick.bind(this));\n            }\n        }\n    };\n    AnnotationToolbar.prototype.opacityDropDownOpen = function (args) {\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            args.element.parentElement.style.left = '0px';\n            args.element.parentElement.style.top = (this.pdfViewerBase.viewerContainer.clientHeight) + 'px';\n        }\n        else {\n            this.calculateToolbarPosition(args);\n        }\n    };\n    AnnotationToolbar.prototype.onColorPickerCancelClick = function (event) {\n        if (event.target.classList.contains('e-cancel')) {\n            this.colorDropDown.toggle();\n        }\n    };\n    AnnotationToolbar.prototype.onStrokePickerCancelClick = function (event) {\n        if (event.target.classList.contains('e-cancel')) {\n            this.strokeDropDown.toggle();\n        }\n    };\n    AnnotationToolbar.prototype.colorDropDownBeforeOpen = function (args) {\n        this.colorPalette.noColor = false;\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;\n            }\n            else {\n                this.setCurrentColorInPicker();\n            }\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.colorPalette.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n            this.colorPalette.noColor = true;\n        }\n        else {\n            this.setCurrentColorInPicker();\n        }\n        this.colorPalette.refresh();\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.setCurrentColorInPicker = function () {\n        if (!isBlazor()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n                        break;\n                    case 'Underline':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n                        break;\n                    case 'Strikethrough':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n                        break;\n                }\n            }\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.lineFillColor);\n                        break;\n                    case 'Arrow':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.arrowFillColor);\n                        break;\n                    case 'Rectangle':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleFillColor);\n                        break;\n                    case 'Circle':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.circleFillColor);\n                        break;\n                    case 'Polygon':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.colorPalette, this.pdfViewer.annotationModule.shapeAnnotationModule.polygonFillColor);\n                        break;\n                }\n            }\n            if (this.colorDropDownElement) {\n                this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.colorDropDownOpen = function (args) {\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            // eslint-disable-next-line max-len\n            args.element.parentElement.style.top = (this.pdfViewerBase.viewerContainer.clientHeight / 2) + 'px';\n        }\n        this.colorPalette.refresh();\n    };\n    AnnotationToolbar.prototype.strokeDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n        }\n        else {\n            this.setCurrentStrokeColorInPicker();\n        }\n        this.strokeColorPicker.refresh();\n        this.updateColorInIcon(this.strokeDropDownElement, this.strokeColorPicker.value);\n        this.updateInkannotationItems();\n    };\n    AnnotationToolbar.prototype.setCurrentStrokeColorInPicker = function () {\n        if (!isBlazor()) {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.lineStrokeColor);\n                        break;\n                    case 'Arrow':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.arrowStrokeColor);\n                        break;\n                    case 'Rectangle':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleStrokeColor);\n                        break;\n                    case 'Circle':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.circleStrokeColor);\n                        break;\n                    case 'Polygon':\n                        // eslint-disable-next-line max-len\n                        this.setColorInPicker(this.strokeColorPicker, this.pdfViewer.annotationModule.shapeAnnotationModule.polygonStrokeColor);\n                        break;\n                }\n            }\n        }\n    };\n    AnnotationToolbar.prototype.strokeDropDownOpen = function (args) {\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            args.element.parentElement.style.top = (this.pdfViewerBase.viewerContainer.clientHeight / 2) + 'px';\n        }\n        this.strokeColorPicker.refresh();\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onFontColorChange = function (args) {\n        // eslint-disable-next-line\n        var currentColor;\n        if (!isBlazor()) {\n            currentColor = (args.currentValue.hex === '') ? '#ffffff00' : args.currentValue.hex;\n        }\n        else {\n            currentColor = args[0];\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.pdfViewer.annotation.modifyFontColor(currentColor);\n        }\n        else {\n            this.pdfViewer.freeTextSettings.fontColor = currentColor;\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n        if (isBlazor()) {\n            this.fontColorElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');\n            this.updateColorInIcon(this.fontColorElementInBlazor, currentColor);\n        }\n        else {\n            this.updateColorInIcon(this.fontColorElement, currentColor);\n            this.fontColorDropDown.toggle();\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onFontFamilyChange = function (args) {\n        var currentValue;\n        if (!isBlazor()) {\n            currentValue = (args && args.fontFamily && args.fontFamily.value) ? args.fontFamily.value : '';\n        }\n        else {\n            currentValue = args;\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n            this.pdfViewer.annotation.modifyFontFamily(currentValue);\n        }\n        else {\n            this.pdfViewer.freeTextSettings.fontFamily = currentValue;\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onFontSizeChange = function (args) {\n        var currentValue;\n        if (!isBlazor()) {\n            currentValue = (args && args.fontSize && args.fontSize.value) ? args.fontSize.value : '';\n        }\n        else {\n            currentValue = args;\n        }\n        var fontSize = parseFloat(currentValue);\n        if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n            this.pdfViewer.annotation.modifyFontSize(fontSize);\n        }\n        else {\n            this.pdfViewer.freeTextSettings.fontSize = fontSize;\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n    };\n    AnnotationToolbar.prototype.textAlignDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            if (args.element.getElementsByTagName('button') && args.element.getElementsByTagName('button').length > 0) {\n                // eslint-disable-next-line\n                var dropDownOptions = args.element.getElementsByTagName('button');\n                // eslint-disable-next-line\n                var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                for (var n = 0; n < dropDownOptions.length; n++) {\n                    if (dropDownOptions[n]) {\n                        dropDownOptions[n].classList.remove('textprop-option-active');\n                        // eslint-disable-next-line max-len\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_left_align') && selectedAnnotation.textAlign === 'Left') {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        // eslint-disable-next-line max-len\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_right_align') && selectedAnnotation.textAlign === 'Right') {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        // eslint-disable-next-line max-len\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_center_align') && selectedAnnotation.textAlign === 'Center') {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        // eslint-disable-next-line max-len\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_justify_align') && selectedAnnotation.textAlign === 'Justify') {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    AnnotationToolbar.prototype.textPropertiesDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            if (args.element.getElementsByTagName('button') && args.element.getElementsByTagName('button').length > 0) {\n                // eslint-disable-next-line\n                var dropDownOptions = args.element.getElementsByTagName('button');\n                // eslint-disable-next-line\n                var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                for (var n = 0; n < dropDownOptions.length; n++) {\n                    if (dropDownOptions[n]) {\n                        dropDownOptions[n].classList.remove('textprop-option-active');\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_bold') && selectedAnnotation.font.isBold) {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_italic') && selectedAnnotation.font.isItalic) {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_strikeout') && selectedAnnotation.font.isStrikeout) {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                        // eslint-disable-next-line max-len\n                        if (dropDownOptions[n].id === (this.pdfViewer.element.id + '_underline_textinput') && selectedAnnotation.font.isUnderline) {\n                            dropDownOptions[n].classList.add('textprop-option-active');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onClickTextAlignment = function (args) {\n        var currentValue;\n        if (isBlazor()) {\n            currentValue = args[0];\n        }\n        else {\n            currentValue = (args && args.item && args.item.value) ? args.item.value : '';\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n            this.pdfViewer.annotation.modifyTextAlignment(currentValue);\n        }\n        else {\n            this.pdfViewer.freeTextSettings.textAlignment = args.item.value;\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n        this.updateTextAlignInIcon(currentValue);\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onClickTextProperties = function (args) {\n        var currentValue;\n        if (isBlazor()) {\n            currentValue = args[0];\n        }\n        else {\n            currentValue = (args && args.item && args.item.value) ? args.item.value : '';\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1 && currentValue) {\n            var fontInfo = { isBold: undefined, isItalic: undefined, isStrikeout: undefined, isUnderline: undefined };\n            if (currentValue === 'bold') {\n                fontInfo.isBold = !(this.pdfViewer.selectedItems.annotations[0].font.isBold);\n            }\n            else if (currentValue === 'italic') {\n                fontInfo.isItalic = !(this.pdfViewer.selectedItems.annotations[0].font.isItalic);\n            }\n            else if (currentValue === 'underline') {\n                fontInfo.isUnderline = !(this.pdfViewer.selectedItems.annotations[0].font.isUnderline);\n            }\n            else if (currentValue === 'strikeout') {\n                fontInfo.isStrikeout = !(this.pdfViewer.selectedItems.annotations[0].font.isStrikeout);\n            }\n            this.pdfViewer.annotation.modifyTextProperties(fontInfo, currentValue);\n        }\n        else {\n            if (currentValue === 'bold') {\n                if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold) {\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold = false;\n                }\n                else {\n                    this.pdfViewer.freeTextSettings.fontStyle = 1;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n                }\n            }\n            else if (currentValue === 'italic') {\n                if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic) {\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic = false;\n                }\n                else {\n                    this.pdfViewer.freeTextSettings.fontStyle = 2;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n                }\n            }\n            else if (currentValue === 'underline') {\n                if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline) {\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline = false;\n                }\n                else {\n                    this.pdfViewer.freeTextSettings.fontStyle = 4;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough = false;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n                }\n            }\n            else if (currentValue === 'strikeout') {\n                if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough) {\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough = false;\n                }\n                else {\n                    this.pdfViewer.freeTextSettings.fontStyle = 8;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline = false;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n                }\n            }\n        }\n        this.updateTextPropertySelection(currentValue);\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.opacityChange = function (args) {\n        var opacityValue = 1;\n        if (args && args.length === 1) {\n            opacityValue = args[0];\n        }\n        else {\n            opacityValue = args.value;\n        }\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (!isBlazor()) {\n                    if (this.isCurrentAnnotationOpacitySet && args.name === 'changed') {\n                        this.isCurrentAnnotationOpacitySet = false;\n                    }\n                    else {\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(args);\n                    }\n                }\n                else {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null, opacityValue);\n                }\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity = opacityValue / 100;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity = opacityValue / 100;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity = opacityValue / 100;\n                        break;\n                }\n            }\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            // eslint-disable-next-line\n            var currentAnnotations = this.pdfViewer.selectedItems.annotations[0];\n            // eslint-disable-next-line max-len\n            if (currentAnnotations != null && (currentAnnotations.shapeAnnotationType === 'Stamp' || currentAnnotations.shapeAnnotationType === 'Image')) {\n                var clonedObject = cloneObject(currentAnnotations);\n                var redoClonedObject = cloneObject(currentAnnotations);\n                redoClonedObject.opacity = opacityValue / 100;\n                this.pdfViewer.nodePropertyChange(currentAnnotations, { opacity: opacityValue / 100 });\n                this.pdfViewer.annotation.triggerAnnotationPropChange(currentAnnotations, false, false, false, true);\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex, null, this.pdfViewer.selectedItems.annotations[0], 'stampOpacity', '', clonedObject, redoClonedObject);\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0], null, 'opacity');\n            }\n            else {\n                if (isBlazor()) {\n                    this.pdfViewer.annotation.modifyOpacity(opacityValue, true);\n                }\n                else {\n                    if (args.name === 'changed') {\n                        if (args.value !== args.previousValue) {\n                            this.pdfViewer.annotation.modifyOpacity(args);\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity = opacityValue / 100;\n                        break;\n                    case 'Arrow':\n                        this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity = opacityValue / 100;\n                        break;\n                    case 'Rectangle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity = opacityValue / 100;\n                        break;\n                    case 'Circle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity = opacityValue / 100;\n                        break;\n                    case 'Polygon':\n                        this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity = opacityValue / 100;\n                        break;\n                }\n            }\n            // eslint-disable-next-line\n            var annotationModule = this.pdfViewer.annotation;\n            if (annotationModule && annotationModule.inkAnnotationModule) {\n                this.pdfViewer.inkAnnotationSettings.opacity = opacityValue / 100;\n            }\n            if (this.pdfViewer.drawingObject) {\n                this.pdfViewer.drawingObject.opacity = opacityValue / 100;\n                if (this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n                    this.pdfViewer.freeTextSettings.opacity = opacityValue / 100;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n                }\n            }\n        }\n        if (!isBlazor()) {\n            this.updateOpacityIndicator();\n        }\n    };\n    AnnotationToolbar.prototype.opacityDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.isCurrentAnnotationOpacitySet = true;\n                // eslint-disable-next-line max-len\n                this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity * 100;\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity * 100;\n                        break;\n                    case 'Underline':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity * 100;\n                        break;\n                    case 'Strikethrough':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity * 100;\n                        break;\n                }\n            }\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.opacitySlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n        }\n        else {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity * 100;\n                        break;\n                    case 'Arrow':\n                        this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity * 100;\n                        break;\n                    case 'Rectangle':\n                        this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity * 100;\n                        break;\n                    case 'Circle':\n                        this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity * 100;\n                        break;\n                    case 'Polygon':\n                        this.opacitySlider.value = this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity * 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n        this.updateInkannotationItems();\n    };\n    AnnotationToolbar.prototype.thicknessDropDownBeforeOpen = function () {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.thicknessSlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n        }\n        else {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.lineThickness;\n                        break;\n                    case 'Arrow':\n                        this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness;\n                        break;\n                    case 'Rectangle':\n                        this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness;\n                        break;\n                    case 'Circle':\n                        this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.circleThickness;\n                        break;\n                    case 'Polygon':\n                        this.thicknessSlider.value = this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness;\n                        break;\n                }\n            }\n        }\n        this.updateThicknessIndicator();\n        this.updateInkannotationItems();\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.thicknessDropDownOpen = function (args) {\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            args.element.parentElement.style.left = '0px';\n            args.element.parentElement.style.top = (this.pdfViewerBase.viewerContainer.clientHeight) + 'px';\n        }\n        else {\n            this.calculateToolbarPosition(args);\n        }\n    };\n    AnnotationToolbar.prototype.calculateToolbarPosition = function (args) {\n        if (args.element && args.element.parentElement) {\n            var leftValue = parseFloat(args.element.parentElement.style.left);\n            var width = args.element.parentElement.offsetWidth;\n            if ((leftValue + width) < (this.pdfViewer.element.offsetWidth + 10)) {\n                args.element.parentElement.style.left = (leftValue - width) + 'px';\n            }\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.thicknessChangeInBlazor = function (args) {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.pdfViewer.annotation.modifyThickness(args[0]);\n        }\n        else {\n            this.ShapeThickness(args[0]);\n        }\n    };\n    AnnotationToolbar.prototype.thicknessChange = function (args) {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            if (args.name === 'changed') {\n                this.pdfViewer.annotation.modifyThickness(args.value);\n                if (!isBlazor()) {\n                    this.updateThicknessIndicator();\n                }\n                var annotationModule = this.pdfViewer.annotation;\n                if (annotationModule && annotationModule.inkAnnotationModule) {\n                    this.pdfViewer.inkAnnotationSettings.thickness = args.value;\n                }\n            }\n        }\n        else {\n            this.ShapeThickness(args.value);\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.ShapeThickness = function (args) {\n        if (this.pdfViewer.annotation.shapeAnnotationModule) {\n            switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                case 'Line':\n                    this.pdfViewer.annotation.shapeAnnotationModule.lineThickness = args;\n                    break;\n                case 'Arrow':\n                    this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness = args;\n                    break;\n                case 'Rectangle':\n                    this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness = args;\n                    break;\n                case 'Circle':\n                    this.pdfViewer.annotation.shapeAnnotationModule.circleThickness = args;\n                    break;\n                case 'Polygon':\n                    this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness = args;\n                    break;\n            }\n            // eslint-disable-next-line\n            var annotationModule_1 = this.pdfViewer.annotation;\n            if (annotationModule_1 && annotationModule_1.inkAnnotationModule) {\n                this.pdfViewer.inkAnnotationSettings.thickness = args.value;\n            }\n            if (this.pdfViewer.drawingObject) {\n                this.pdfViewer.drawingObject.thickness = args.value;\n            }\n            if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n                this.pdfViewer.freeTextSettings.borderWidth = args.value;\n                this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n            }\n        }\n        // eslint-disable-next-line\n        var annotationModule = this.pdfViewer.annotation;\n        if (annotationModule && annotationModule.inkAnnotationModule) {\n            this.pdfViewer.inkAnnotationSettings.thickness = args;\n        }\n        if (this.pdfViewer.drawingObject) {\n            this.pdfViewer.drawingObject.thickness = args;\n        }\n        if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n            this.pdfViewer.freeTextSettings.borderWidth = args;\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n        }\n        if (!isBlazor()) {\n            this.updateThicknessIndicator();\n        }\n    };\n    AnnotationToolbar.prototype.createDropDownButton = function (element, iconClass, target, tooltipText) {\n        // eslint-disable-next-line max-len\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        this.primaryToolbar.createTooltip(element, tooltipText);\n        return dropDownButton;\n    };\n    AnnotationToolbar.prototype.createShapeOptions = function (idString, isShape, isAlign, isTextProp) {\n        var toolbarElement = createElement('div', { id: idString + '_target', className: 'e-pv-shapes-toolbar' });\n        document.body.appendChild(toolbarElement);\n        var toolbar;\n        if (isAlign) {\n            toolbar = new Tool({ items: this.textAlignmentToolbarItems(), overflowMode: 'MultiRow' }, toolbarElement);\n            toolbar.isStringTemplate = true;\n            this.afterAlignmentToolbarCreation();\n        }\n        else if (isTextProp) {\n            toolbar = new Tool({ items: this.textPropertiesToolbarItems(), overflowMode: 'MultiRow' }, toolbarElement);\n            toolbar.isStringTemplate = true;\n            this.afterPropertiesToolbarCreation();\n        }\n        else {\n            if (isShape) {\n                if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n                    // eslint-disable-next-line max-len\n                    toolbar = new Tool({ items: this.createShapeToolbarItems(), overflowMode: 'MultiRow', clicked: this.onShapeToolbarClicked.bind(this) }, toolbarElement);\n                    toolbar.isStringTemplate = true;\n                    this.afterShapeToolbarCreation();\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    this.toolbarElement = createElement('div', { id: idString + '_target', className: 'e-pv-mobile-annotation-toolbar', styles: 'bottom: 0px; position: absolute; width: 100%; float: left' });\n                    this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n                    // eslint-disable-next-line max-len\n                    toolbar = new Tool({ items: this.createShapeToolbarItemsForMobile(), overflowMode: 'Scrollable', clicked: this.onShapeToolbarClicked.bind(this) }, this.toolbarElement);\n                    toolbar.isStringTemplate = true;\n                    this.afterShapeToolbarCreationForMobile();\n                }\n            }\n            else {\n                // eslint-disable-next-line max-len\n                toolbar = new Tool({ items: this.createCalibrateToolbarItems(), overflowMode: 'MultiRow', clicked: this.onCalibrateToolbarClicked.bind(this) }, toolbarElement);\n                toolbar.isStringTemplate = true;\n                this.afterCalibrateToolbarCreation();\n            }\n        }\n        return toolbar;\n    };\n    // eslint:disable-next-line\n    AnnotationToolbar.prototype.createPropertyToolbarForMobile = function (shapeType) {\n        var _this = this;\n        var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        // eslint-disable-next-line max-len\n        var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        var fontFamilyTemplate = this.getTemplate('input', '_annotation_fontname', 'e-pv-annotation-fontname-container');\n        var fontSizeTemplate = this.getTemplate('input', '_annotation_fontsize', 'e-pv-annotation-fontsize-container');\n        var textColorTemplate = this.getTemplate('span', '_annotation_textcolor', 'e-pv-annotation-textcolor-container');\n        var alignmentTemplate = this.getTemplate('span', '_annotation_textalign', 'e-pv-annotation-textalign-container');\n        // eslint-disable-next-line max-len\n        var textPropertiesTemplate = this.getTemplate('span', '_annotation_textproperties', 'e-pv-annotation-textprop-container');\n        // eslint:disable-next-line\n        var items = [];\n        // eslint-disable-next-line max-len\n        if (shapeType === 'Polygon' || shapeType === 'Rectangle' || shapeType === 'Ellipse' || shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Distance' || shapeType === 'Perimeter' || shapeType === 'Radius' || shapeType === 'FreeText') {\n            if (shapeType === 'FreeText') {\n                // eslint-disable-next-line max-len\n                items.push({ prefixIcon: 'e-pv-freetext-icon e-pv-icon', className: 'e-pv-annotation-freetextedit-container' });\n                items.push({ type: 'Separator', align: 'Left' });\n                items.push({ template: fontFamilyTemplate });\n                items.push({ template: fontSizeTemplate });\n                items.push({ template: textColorTemplate });\n                items.push({ template: alignmentTemplate });\n                items.push({ template: textPropertiesTemplate });\n            }\n            if (shapeType === 'Polygon') {\n                if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Area') {\n                    items.push({ prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon' });\n                    items.push({ type: 'Separator', align: 'Left' });\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Volume') {\n                    items.push({ prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon' });\n                    items.push({ type: 'Separator', align: 'Left' });\n                }\n                else {\n                    items.push({ prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon' });\n                    items.push({ type: 'Separator', align: 'Left' });\n                }\n            }\n            else if (shapeType === 'Rectangle') {\n                items.push({ prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Ellipse') {\n                items.push({ prefixIcon: 'e-pv-shape-circle-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Line') {\n                if (this.pdfViewer.selectedItems.annotations[0].measureType === 'Perimeter') {\n                    items.push({ prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon' });\n                    items.push({ type: 'Separator', align: 'Left' });\n                }\n                else {\n                    items.push({ prefixIcon: 'e-pv-shape-line-icon e-pv-icon' });\n                    items.push({ type: 'Separator', align: 'Left' });\n                }\n            }\n            else if (shapeType === 'LineWidthArrowHead') {\n                items.push({ prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Distance') {\n                items.push({ prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Perimeter') {\n                items.push({ prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Radius') {\n                items.push({ prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            items.push({ template: colorTemplate });\n            items.push({ template: strokeTemplate });\n            items.push({ template: thicknessTemplate });\n        }\n        else if (shapeType === 'Path' || shapeType === 'Ink' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText') {\n            if (shapeType === 'Path' || shapeType === 'Ink') {\n                items.push({ prefixIcon: 'e-pv-inkannotation-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText') {\n                items.push({ prefixIcon: 'e-pv-handwritten-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            items.push({ template: strokeTemplate });\n            items.push({ template: thicknessTemplate });\n        }\n        else if (shapeType === 'Underline' || shapeType === 'Highlight' || shapeType === 'Strikethrough') {\n            if (shapeType === 'Highlight') {\n                items.push({ prefixIcon: 'e-pv-highlight-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Underline') {\n                items.push({ prefixIcon: 'e-pv-underline-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            else if (shapeType === 'Strikethrough') {\n                items.push({ prefixIcon: 'e-pv-strikethrough-icon e-pv-icon' });\n                items.push({ type: 'Separator', align: 'Left' });\n            }\n            items.push({ template: colorTemplate });\n        }\n        else if (shapeType === 'Stamp' || shapeType === 'Image') {\n            items.push({ prefixIcon: 'e-pv-stamp-icon e-pv-icon' });\n            items.push({ type: 'Separator', align: 'Left' });\n        }\n        else if (shapeType === 'StickyNotes') {\n            items.push({ prefixIcon: 'e-pv-comment-icon e-pv-icon' });\n            items.push({ type: 'Separator', align: 'Left' });\n        }\n        items.push({ template: opacityTemplate });\n        // eslint-disable-next-line max-len\n        items.push({\n            prefixIcon: 'e-pv-comment-panel-icon e-pv-icon', className: 'e-pv-comment-panel-icon-container', id: this.pdfViewer.element.id + '_annotation_commentPanel', align: 'Right', click: function (args) {\n                _this.pdfViewer.annotationModule.showCommentsPanel();\n            }\n        });\n        // eslint-disable-next-line max-len\n        items.push({\n            prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'Right', click: function (args) {\n                _this.pdfViewer.annotationModule.deleteAnnotation();\n                _this.propertyToolbar.destroy();\n                _this.toolbarCreated = false;\n                _this.createAnnotationToolbarForMobile();\n                _this.adjustMobileViewer();\n            }\n        });\n        return items;\n    };\n    // eslint:disable-next-line\n    AnnotationToolbar.prototype.createStampToolbarItemsForMobile = function () {\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint:disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: opacityTemplate });\n        return items;\n    };\n    // eslint:disable-next-line\n    AnnotationToolbar.prototype.createShapeToolbarItemsForMobile = function () {\n        var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        // eslint-disable-next-line max-len\n        var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint:disable-next-line\n        var items = [];\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        items.push({ prefixIcon: 'e-pv-shape-line-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_line', text: this.pdfViewer.localeObj.getConstant('Line Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_arrow', text: this.pdfViewer.localeObj.getConstant('Arrow Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_rectangle', text: this.pdfViewer.localeObj.getConstant('Rectangle Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-circle-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_circle', text: this.pdfViewer.localeObj.getConstant('Circle Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_pentagon', text: this.pdfViewer.localeObj.getConstant('Pentagon Shape'), align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: colorTemplate });\n        items.push({ template: strokeTemplate });\n        items.push({ template: thicknessTemplate });\n        items.push({ template: opacityTemplate });\n        return items;\n    };\n    // eslint:disable-next-line\n    AnnotationToolbar.prototype.createCalibrateToolbarItemsForMobile = function () {\n        var colorTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        // eslint-disable-next-line max-len\n        var strokeTemplate = this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span', '_annotation_stroke', 'e-pv-annotation-stroke-container');\n        var thicknessTemplate = this.getTemplate('span', '_annotation_thickness', 'e-pv-annotation-thickness-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // eslint:disable-next-line\n        var items = [];\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        items.push({ prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_distance', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_perimeter', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_area', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_radius', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_volume', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: colorTemplate });\n        items.push({ template: strokeTemplate });\n        items.push({ template: thicknessTemplate });\n        items.push({ template: opacityTemplate });\n        return items;\n    };\n    AnnotationToolbar.prototype.handleShapeTool = function (type) {\n        if (!isBlazor() && Browser.isDevice) {\n            // eslint:disable-next-line\n            var selectedItems = document.querySelectorAll('.e-pv-select');\n            for (var i = 0; i < selectedItems.length; i++) {\n                if (selectedItems[i].id !== type && selectedItems[i].id !== this.pdfViewer.element.id + '_annotation') {\n                    selectedItems[i].classList.remove('e-pv-select');\n                }\n            }\n        }\n    };\n    AnnotationToolbar.prototype.createPropDropDownButton = function (element, iconClass, target, tooltipText) {\n        // eslint-disable-next-line max-len\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target, cssClass: 'e-caret-hide' });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        this.primaryToolbar.createTooltip(element, tooltipText);\n        return dropDownButton;\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.textAlignmentToolbarItems = function () {\n        // eslint-disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-left-align-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_left_align', align: 'Left', value: 'Left', click: this.onClickTextAlignment.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-center-align-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_center_align', align: 'Left', value: 'Center', click: this.onClickTextAlignment.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-right-align-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_right_align', align: 'Left', value: 'Right', click: this.onClickTextAlignment.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-justfiy-align-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_justify_align', align: 'Left', value: 'Justify', click: this.onClickTextAlignment.bind(this) });\n        // eslint-disable-next-line max-len\n        return items;\n    };\n    AnnotationToolbar.prototype.afterAlignmentToolbarCreation = function () {\n        // eslint-disable-next-line max-len\n        this.alignLeftElement = this.primaryToolbar.addClassToolbarItem('_left_align', 'e-pv-left-align', this.pdfViewer.localeObj.getConstant('Align left'));\n        this.alignRightElement = this.primaryToolbar.addClassToolbarItem('_right_align', 'e-pv-right-align', this.pdfViewer.localeObj.getConstant('Align right'));\n        // eslint-disable-next-line max-len\n        this.alignCenterElement = this.primaryToolbar.addClassToolbarItem('_center_align', 'e-pv-center-align', this.pdfViewer.localeObj.getConstant('Center'));\n        this.alignJustifyElement = this.primaryToolbar.addClassToolbarItem('_justify_align', 'e-pv-justfiy-align', this.pdfViewer.localeObj.getConstant('Justify'));\n    };\n    AnnotationToolbar.prototype.afterPropertiesToolbarCreation = function () {\n        // eslint-disable-next-line max-len\n        this.boldElement = this.primaryToolbar.addClassToolbarItem('_bold', 'e-pv-bold', this.pdfViewer.localeObj.getConstant('Bold'));\n        this.italicElement = this.primaryToolbar.addClassToolbarItem('_italic', 'e-pv-italic', this.pdfViewer.localeObj.getConstant('Italic'));\n        // eslint-disable-next-line max-len\n        this.fontStyleStrikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikeout', 'e-pv-strikeout', this.pdfViewer.localeObj.getConstant('Strikethroughs'));\n        this.fontStyleUnderlineItem = this.primaryToolbar.addClassToolbarItem('_underline_textinput', 'e-pv-underlinetext', this.pdfViewer.localeObj.getConstant('Underlines'));\n    };\n    AnnotationToolbar.prototype.createDropDownListForSize = function (fontSelectElement) {\n        var _this = this;\n        // eslint-disable-next-line max-len\n        var fontSize = ['8px', '9px', '10px', '11px', '12px', '14px', '16px', '18px', '20px', '22px', '24px', '26px', '28px', '36px', '48px', '72px', '96px'];\n        if (!this.pdfViewer.enableRtl) {\n            this.fontSize = new ComboBox({\n                dataSource: fontSize,\n                cssClass: 'e-pv-prop-dropdown',\n                allowCustom: true,\n                showClearButton: false,\n                width: '80px',\n                popupWidth: '100px'\n            });\n        }\n        else {\n            this.fontSize = new ComboBox({\n                dataSource: fontSize,\n                cssClass: 'e-pv-prop-dropdown-rtl',\n                allowCustom: true,\n                showClearButton: false,\n                width: '80px',\n                popupWidth: '100px',\n                enableRtl: true\n            });\n        }\n        this.fontSize.value = '16px';\n        this.fontSize.appendTo(fontSelectElement);\n        this.primaryToolbar.createTooltip(fontSelectElement, this.pdfViewer.localeObj.getConstant('Font size'));\n        this.fontSize.addEventListener('change', function () {\n            _this.onFontSizeChange(_this);\n        });\n    };\n    AnnotationToolbar.prototype.createDropDownListForFamily = function (fontSelectElement) {\n        var _this = this;\n        var fontStyle = [{ FontName: 'Helvetica' },\n            { FontName: 'Courier' }, { FontName: 'Symbol' }, { FontName: 'Times New Roman' }];\n        if (!this.pdfViewer.enableRtl) {\n            this.fontFamily = new ComboBox({\n                dataSource: fontStyle,\n                query: new Query().select(['FontName']),\n                fields: { text: 'FontName', value: 'FontName' },\n                cssClass: 'e-pv-prop-dropdown',\n                itemTemplate: '<span style=\"font-family: ${FontName};\">${FontName}</span>',\n                allowCustom: true,\n                showClearButton: false,\n                width: '110px',\n                popupWidth: '190px'\n            });\n        }\n        else {\n            this.fontFamily = new ComboBox({\n                dataSource: fontStyle,\n                query: new Query().select(['FontName']),\n                fields: { text: 'FontName', value: 'FontName' },\n                cssClass: 'e-pv-prop-dropdown-rtl',\n                itemTemplate: '<span style=\"font-family: ${FontName};\">${FontName}</span>',\n                allowCustom: true,\n                showClearButton: false,\n                width: '110px',\n                popupWidth: '190px',\n                enableRtl: true\n            });\n        }\n        this.fontFamily.isStringTemplate = true;\n        this.fontFamily.value = 'Helvetica';\n        this.fontFamily.appendTo(fontSelectElement);\n        this.primaryToolbar.createTooltip(fontSelectElement, this.pdfViewer.localeObj.getConstant('Font family'));\n        this.fontFamily.addEventListener('change', function () {\n            _this.onFontFamilyChange(_this);\n        });\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.textPropertiesToolbarItems = function () {\n        // eslint-disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-bold-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_bold', align: 'Left', value: 'bold', click: this.onClickTextProperties.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-italic-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_italic', align: 'Left', value: 'italic', click: this.onClickTextProperties.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-strikeout-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_strikeout', align: 'Left', value: 'strikeout', click: this.onClickTextProperties.bind(this) });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-underlinetext-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_underline_textinput', align: 'Left', value: 'underline', click: this.onClickTextProperties.bind(this) });\n        return items;\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.createShapeToolbarItems = function () {\n        // eslint-disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-shape-line-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_line', text: this.pdfViewer.localeObj.getConstant('Line Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-arrow-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_arrow', text: this.pdfViewer.localeObj.getConstant('Arrow Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-rectangle-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_rectangle', text: this.pdfViewer.localeObj.getConstant('Rectangle Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-circle-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_circle', text: this.pdfViewer.localeObj.getConstant('Circle Shape'), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-shape-pentagon-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_shape_pentagon', text: this.pdfViewer.localeObj.getConstant('Pentagon Shape'), align: 'Left' });\n        return items;\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.createCalibrateToolbarItems = function () {\n        // eslint-disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-calibrate-distance-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_distance', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-perimeter-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_perimeter', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-area-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_area', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-radius-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_radius', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        // eslint-disable-next-line max-len\n        items.push({ prefixIcon: 'e-pv-calibrate-volume-icon e-pv-icon', cssClass: '', id: this.pdfViewer.element.id + '_calibrate_volume', text: this.pdfViewer.localeObj.getConstant(''), align: 'Left' });\n        return items;\n    };\n    AnnotationToolbar.prototype.onCalibrateToolbarClicked = function (args) {\n        var elementId = this.pdfViewer.element.id;\n        var measureModule = this.pdfViewer.annotation.measureAnnotationModule;\n        this.deselectAllItems();\n        this.resetFreeTextAnnot();\n        if (Browser.isDevice && !isBlazor()) {\n            // tslint:disable-next-line\n            var element = args.originalEvent.target;\n            this.pdfViewer.toolbarModule.selectItem(element.parentElement);\n        }\n        switch (args.originalEvent.target.id) {\n            case elementId + '_calibrate_distance':\n            case elementId + '_calibrate_distanceIcon':\n                measureModule.setAnnotationType('Distance');\n                this.onShapeDrawSelection(false);\n                this.updateColorInIcon(this.colorDropDownElement, measureModule.distanceFillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, measureModule.distanceStrokeColor);\n                this.handleShapeTool(elementId + '_calibrate_distance');\n                break;\n            case elementId + '_calibrate_perimeter':\n            case elementId + '_calibrate_perimeterIcon':\n                measureModule.setAnnotationType('Perimeter');\n                this.onShapeDrawSelection(false);\n                this.updateColorInIcon(this.colorDropDownElement, measureModule.perimeterFillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, measureModule.perimeterStrokeColor);\n                this.handleShapeTool(elementId + '_calibrate_perimeter');\n                break;\n            case elementId + '_calibrate_area':\n            case elementId + '_calibrate_areaIcon':\n                measureModule.setAnnotationType('Area');\n                this.onShapeDrawSelection(false);\n                this.updateColorInIcon(this.colorDropDownElement, measureModule.areaFillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, measureModule.areaStrokeColor);\n                this.handleShapeTool(elementId + '_calibrate_area');\n                break;\n            case elementId + '_calibrate_radius':\n            case elementId + '_calibrate_radiusIcon':\n                measureModule.setAnnotationType('Radius');\n                this.onShapeDrawSelection(false);\n                this.updateColorInIcon(this.colorDropDownElement, measureModule.radiusFillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, measureModule.radiusStrokeColor);\n                this.handleShapeTool(elementId + '_calibrate_radius');\n                break;\n            case elementId + '_calibrate_volume':\n            case elementId + '_calibrate_volumeIcon':\n                measureModule.setAnnotationType('Volume');\n                this.onShapeDrawSelection(false);\n                this.updateColorInIcon(this.colorDropDownElement, measureModule.volumeFillColor);\n                this.updateColorInIcon(this.strokeDropDownElement, measureModule.volumeStrokeColor);\n                this.handleShapeTool(elementId + '_calibrate_volume');\n                break;\n        }\n    };\n    AnnotationToolbar.prototype.onShapeDrawSelection = function (isShape) {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        if (!Browser.isDevice) {\n            this.updateInteractionTools();\n            this.enableAnnotationPropertiesTools(true);\n            if (isShape) {\n                this.shapeDropDown.toggle();\n            }\n            else {\n                this.calibrateDropDown.toggle();\n            }\n        }\n        this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n    };\n    AnnotationToolbar.prototype.afterCalibrateToolbarCreationForMobile = function () {\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_calibrate_distance', 'e-pv-calibrate-distance', this.pdfViewer.localeObj.getConstant('Calibrate Distance'));\n        this.primaryToolbar.addClassToolbarItem('_calibrate_perimeter', 'e-pv-calibrate-perimeter', this.pdfViewer.localeObj.getConstant('Calibrate Perimeter'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_calibrate_area', 'e-pv-calibrate-area', this.pdfViewer.localeObj.getConstant('Calibrate Area'));\n        this.primaryToolbar.addClassToolbarItem('_calibrate_radius', 'e-pv-calibrate-radius', this.pdfViewer.localeObj.getConstant('Calibrate Radius'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_calibrate_volume', 'e-pv-calibrate-volume', this.pdfViewer.localeObj.getConstant('Calibrate Volume'));\n    };\n    AnnotationToolbar.prototype.afterShapeToolbarCreationForMobile = function () {\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_annotation_color', 'e-pv-annotation-color-container', this.pdfViewer.localeObj.getConstant('Change Color'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_annotation_stroke', 'e-pv-annotation-stroke-container', this.pdfViewer.localeObj.getConstant('Change Stroke Color'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_annotation_thickness', 'e-pv-annotation-thickness-container', this.pdfViewer.localeObj.getConstant('Chnage Border Thickness'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_annotation_opacity', 'e-annotation-opacity-container', this.pdfViewer.localeObj.getConstant('Change Opacity'));\n        this.primaryToolbar.addClassToolbarItem('_shape_line', 'e-pv-shape-line', this.pdfViewer.localeObj.getConstant('Add line'));\n        this.primaryToolbar.addClassToolbarItem('_shape_arrow', 'e-pv-shape-arrow', this.pdfViewer.localeObj.getConstant('Add arrow'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_shape_rectangle', 'e-pv-shape-rectangle', this.pdfViewer.localeObj.getConstant('Add rectangle'));\n        // eslint-disable-next-line max-len\n        this.primaryToolbar.addClassToolbarItem('_shape_circle', 'e-pv-shape-circle', this.pdfViewer.localeObj.getConstant('Add circle'));\n        this.primaryToolbar.addClassToolbarItem('_shape_pentagon', 'e-pv-shape-pentagon', this.pdfViewer.localeObj.getConstant('Add polygon'));\n    };\n    AnnotationToolbar.prototype.afterShapeToolbarCreation = function () {\n        this.lineElement = this.primaryToolbar.addClassToolbarItem('_shape_line', 'e-pv-shape-line', this.pdfViewer.localeObj.getConstant('Add line'));\n        this.arrowElement = this.primaryToolbar.addClassToolbarItem('_shape_arrow', 'e-pv-shape-arrow', this.pdfViewer.localeObj.getConstant('Add arrow'));\n        // eslint-disable-next-line max-len\n        this.rectangleElement = this.primaryToolbar.addClassToolbarItem('_shape_rectangle', 'e-pv-shape-rectangle', this.pdfViewer.localeObj.getConstant('Add rectangle'));\n        // eslint-disable-next-line max-len\n        this.circleElement = this.primaryToolbar.addClassToolbarItem('_shape_circle', 'e-pv-shape-circle', this.pdfViewer.localeObj.getConstant('Add circle'));\n        this.polygonElement = this.primaryToolbar.addClassToolbarItem('_shape_pentagon', 'e-pv-shape-pentagon', this.pdfViewer.localeObj.getConstant('Add polygon'));\n    };\n    AnnotationToolbar.prototype.afterCalibrateToolbarCreation = function () {\n        // eslint-disable-next-line max-len\n        this.calibrateDistance = this.primaryToolbar.addClassToolbarItem('_calibrate_distance', 'e-pv-calibrate-distance', this.pdfViewer.localeObj.getConstant('Calibrate Distance'));\n        this.calibratePerimeter = this.primaryToolbar.addClassToolbarItem('_calibrate_perimeter', 'e-pv-calibrate-perimeter', this.pdfViewer.localeObj.getConstant('Calibrate Perimeter'));\n        // eslint-disable-next-line max-len\n        this.calibrateArea = this.primaryToolbar.addClassToolbarItem('_calibrate_area', 'e-pv-calibrate-area', this.pdfViewer.localeObj.getConstant('Calibrate Area'));\n        this.calibrateRadius = this.primaryToolbar.addClassToolbarItem('_calibrate_radius', 'e-pv-calibrate-radius', this.pdfViewer.localeObj.getConstant('Calibrate Radius'));\n        // eslint-disable-next-line max-len\n        this.calibrateVolume = this.primaryToolbar.addClassToolbarItem('_calibrate_volume', 'e-pv-calibrate-volume', this.pdfViewer.localeObj.getConstant('Calibrate Volume'));\n    };\n    AnnotationToolbar.prototype.afterMobileToolbarCreation = function () {\n        // eslint-disable-next-line max-len\n        this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n        this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n        // eslint-disable-next-line max-len\n        this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n        // eslint-disable-next-line max-len\n        this.shapesItem = this.primaryToolbar.addClassToolbarItem('_annotation_shapes', 'e-pv-annotation-shapes', this.pdfViewer.localeObj.getConstant('Add Shapes'));\n        this.calibrateItem = this.primaryToolbar.addClassToolbarItem('_annotation_calibrate', 'e-pv-annotation-calibrate', this.pdfViewer.localeObj.getConstant('Calibrate'));\n        // eslint-disable-next-line max-len\n        this.freeTextEditItem = this.primaryToolbar.addClassToolbarItem('_annotation_freeTextEdit', 'e-pv-annotation-freeTextEdit', this.pdfViewer.localeObj.getConstant('Free Text'));\n        // eslint-disable-next-line max-len\n        this.commentItem = this.primaryToolbar.addClassToolbarItem('_comment', 'e-pv-comment', this.pdfViewer.localeObj.getConstant('Add Comments'));\n        // eslint-disable-next-line max-len\n        this.commentItem = this.primaryToolbar.addClassToolbarItem('_annotation_commentPanel', 'e-pv-annotation-comment-panel', this.pdfViewer.localeObj.getConstant('Comment Panel'));\n        // eslint-disable-next-line max-len\n        this.inkAnnotationItem = this.primaryToolbar.addClassToolbarItem('_annotation_ink', 'e-pv-annotation-ink', this.pdfViewer.localeObj.getConstant('Draw Ink'));\n        this.selectAnnotationDeleteItem(false);\n        this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel);\n    };\n    AnnotationToolbar.prototype.createColorPicker = function (idString) {\n        var inputElement;\n        var existingInput = document.getElementById(idString + '_target');\n        if (existingInput) {\n            inputElement = existingInput;\n        }\n        else {\n            inputElement = createElement('input', { id: idString + '_target' });\n        }\n        document.body.appendChild(inputElement);\n        var colorPicker = new ColorPicker({\n            inline: true, mode: 'Palette', cssClass: 'e-show-value', enableOpacity: false,\n            value: '#000000', showButtons: false, modeSwitcher: false\n        });\n        if (this.pdfViewer.enableRtl) {\n            colorPicker.enableRtl = true;\n        }\n        colorPicker.appendTo(inputElement);\n        return colorPicker;\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onColorPickerChange = function (args) {\n        // eslint-disable-next-line\n        var currentColor;\n        if (!isBlazor()) {\n            currentColor = (args.currentValue.hex === '') ? '#ffffff00' : args.currentValue.hex;\n        }\n        else {\n            currentColor = args[0];\n        }\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(currentColor);\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = currentColor;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = currentColor;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = currentColor;\n                        break;\n                }\n            }\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            if (isBlazor()) {\n                if (args[0] !== args[1]) {\n                    this.pdfViewer.annotation.modifyFillColor(currentColor);\n                }\n            }\n            else {\n                if (args.currentValue.hex !== args.previousValue.hex) {\n                    this.pdfViewer.annotation.modifyFillColor(currentColor);\n                }\n            }\n        }\n        else {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor = currentColor;\n                        break;\n                    case 'Arrow':\n                        this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor = currentColor;\n                        break;\n                    case 'Rectangle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor = currentColor;\n                        break;\n                    case 'Circle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor = currentColor;\n                        break;\n                    case 'Polygon':\n                        this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor = currentColor;\n                        break;\n                }\n            }\n            if (this.pdfViewer.drawingObject) {\n                this.pdfViewer.drawingObject.fillColor = currentColor;\n                if (this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n                    this.pdfViewer.freeTextSettings.fillColor = currentColor;\n                    this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n                }\n            }\n        }\n        if (isBlazor()) {\n            this.colorDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');\n            this.updateColorInIcon(this.colorDropDownElementInBlazor, currentColor);\n        }\n        else {\n            this.updateColorInIcon(this.colorDropDownElement, currentColor);\n            this.colorDropDown.toggle();\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.onStrokePickerChange = function (args) {\n        // eslint-disable-next-line\n        var currentColor;\n        if (!isBlazor()) {\n            currentColor = (args.currentValue.hex === '') ? '#ffffff00' : args.currentValue.hex;\n        }\n        else {\n            currentColor = args[0];\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            if (isBlazor()) {\n                if (args[0] !== args[1]) {\n                    this.pdfViewer.annotation.modifyStrokeColor(currentColor);\n                }\n            }\n            else {\n                if (args.currentValue.hex !== args.previousValue.hex) {\n                    this.pdfViewer.annotation.modifyStrokeColor(currentColor);\n                }\n            }\n        }\n        else {\n            if (this.pdfViewer.annotation.shapeAnnotationModule) {\n                switch (this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode) {\n                    case 'Line':\n                        this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor = currentColor;\n                        break;\n                    case 'Arrow':\n                        this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor = currentColor;\n                        break;\n                    case 'Rectangle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor = currentColor;\n                        break;\n                    case 'Circle':\n                        this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor = currentColor;\n                        break;\n                    case 'Polygon':\n                        this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor = currentColor;\n                        break;\n                }\n            }\n            // eslint-disable-next-line\n            var annotationModule = this.pdfViewer.annotation;\n            if (annotationModule && annotationModule.inkAnnotationModule) {\n                this.pdfViewer.inkAnnotationSettings.strokeColor = currentColor;\n            }\n            if (this.pdfViewer.drawingObject) {\n                this.pdfViewer.drawingObject.strokeColor = currentColor;\n            }\n            if (this.pdfViewer.drawingObject && this.pdfViewer.drawingObject.shapeAnnotationType === 'FreeText') {\n                this.pdfViewer.freeTextSettings.borderColor = currentColor;\n                this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();\n            }\n        }\n        if (isBlazor()) {\n            this.strokeDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');\n            this.updateColorInIcon(this.strokeDropDownElementInBlazor, currentColor);\n        }\n        else {\n            this.updateColorInIcon(this.strokeDropDownElement, currentColor);\n            this.strokeDropDown.toggle();\n        }\n    };\n    /**\n     * @param element\n     * @param color\n     * @param element\n     * @param color\n     * @private\n     */\n    AnnotationToolbar.prototype.updateColorInIcon = function (element, color) {\n        if (isBlazor()) {\n            if (element) {\n                element.children[0].style.borderBottomColor = color;\n            }\n        }\n        else {\n            if (element) {\n                element.childNodes[0] ? element.childNodes[0].style.borderBottomColor = color : element.childNodes[0];\n            }\n        }\n    };\n    /**\n     * @param currentOption\n     * @private\n     */\n    AnnotationToolbar.prototype.updateTextPropertySelection = function (currentOption) {\n        if (currentOption === 'bold') {\n            document.getElementById(this.pdfViewer.element.id + '_bold').classList.toggle('textprop-option-active');\n        }\n        else if (currentOption === 'italic') {\n            document.getElementById(this.pdfViewer.element.id + '_italic').classList.toggle('textprop-option-active');\n        }\n        else if (currentOption === 'underline') {\n            document.getElementById(this.pdfViewer.element.id + '_underline_textinput').classList.toggle('textprop-option-active');\n            document.getElementById(this.pdfViewer.element.id + '_strikeout').classList.remove('textprop-option-active');\n        }\n        else if (currentOption === 'strikeout') {\n            document.getElementById(this.pdfViewer.element.id + '_strikeout').classList.toggle('textprop-option-active');\n            document.getElementById(this.pdfViewer.element.id + '_underline_textinput').classList.remove('textprop-option-active');\n        }\n    };\n    /**\n     * @param family\n     * @private\n     */\n    AnnotationToolbar.prototype.updateFontFamilyInIcon = function (family) {\n        this.fontFamily.value = family;\n    };\n    /**\n     * @param align\n     * @private\n     */\n    AnnotationToolbar.prototype.updateTextAlignInIcon = function (align) {\n        var className = 'e-btn-icon e-pv-left-align-icon e-pv-icon';\n        var leftAlign = document.getElementById(this.pdfViewer.element.id + '_left_align');\n        var rightAlign = document.getElementById(this.pdfViewer.element.id + '_right_align');\n        var centerAlign = document.getElementById(this.pdfViewer.element.id + '_center_align');\n        var justifyAlign = document.getElementById(this.pdfViewer.element.id + '_justify_align');\n        if (!isBlazor()) {\n            leftAlign.classList.remove('textprop-option-active');\n            rightAlign.classList.remove('textprop-option-active');\n            centerAlign.classList.remove('textprop-option-active');\n            justifyAlign.classList.remove('textprop-option-active');\n        }\n        if (align === 'Left') {\n            leftAlign.classList.add('textprop-option-active');\n        }\n        else if (align === 'Right') {\n            className = 'e-btn-icon e-pv-right-align-icon e-pv-icon';\n            rightAlign.classList.add('textprop-option-active');\n        }\n        else if (align === 'Center') {\n            className = 'e-btn-icon e-pv-center-align-icon e-pv-icon';\n            centerAlign.classList.add('textprop-option-active');\n        }\n        else if (align === 'Justify') {\n            className = 'e-btn-icon e-pv-justfiy-align-icon e-pv-icon';\n            justifyAlign.classList.add('textprop-option-active');\n        }\n        document.getElementById(this.pdfViewer.element.id + '_annotation_textalign').children[0].className = className;\n    };\n    /**\n     * @param size\n     * @private\n     */\n    AnnotationToolbar.prototype.updateFontSizeInIcon = function (size) {\n        this.fontSize.value = size + 'px';\n    };\n    AnnotationToolbar.prototype.updateOpacityIndicator = function () {\n        // eslint-disable-next-line\n        this.opacityIndicator.textContent = parseInt(Math.round(this.opacitySlider.value).toString()) + '%';\n    };\n    AnnotationToolbar.prototype.updateThicknessIndicator = function () {\n        this.thicknessIndicator.textContent = this.thicknessSlider.value + ' pt';\n    };\n    AnnotationToolbar.prototype.createSlider = function (idString) {\n        var outerContainer = createElement('div', { className: 'e-pv-annotation-opacity-popup-container' });\n        document.body.appendChild(outerContainer);\n        var label = createElement('span', { id: idString + '_label', className: 'e-pv-annotation-opacity-label' });\n        label.textContent = this.pdfViewer.localeObj.getConstant('Opacity');\n        var sliderElement = createElement('div', { id: idString + '_slider' });\n        this.opacitySlider = new Slider({ type: 'MinRange', cssClass: 'e-pv-annotation-opacity-slider', max: 100, min: 0 });\n        // eslint-disable-next-line max-len\n        this.opacityIndicator = createElement('div', { id: idString + '_opacity_indicator', className: 'e-pv-annotation-opacity-indicator' });\n        this.opacityIndicator.textContent = '100%';\n        if (!this.pdfViewer.enableRtl) {\n            outerContainer.appendChild(label);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(this.opacityIndicator);\n        }\n        else {\n            outerContainer.appendChild(this.opacityIndicator);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.enableRtl = true;\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(label);\n        }\n        return outerContainer;\n    };\n    AnnotationToolbar.prototype.createThicknessSlider = function (idString) {\n        var outerContainer = createElement('div', { className: 'e-pv-annotation-thickness-popup-container' });\n        document.body.appendChild(outerContainer);\n        var label = createElement('span', { id: idString + '_label', className: 'e-pv-annotation-thickness-label' });\n        label.textContent = this.pdfViewer.localeObj.getConstant('Line Thickness');\n        var sliderElement = createElement('div', { id: idString + '_slider' });\n        this.thicknessSlider = new Slider({ type: 'MinRange', cssClass: 'e-pv-annotation-thickness-slider', max: 12, min: 0 });\n        // eslint-disable-next-line max-len\n        this.thicknessIndicator = createElement('div', { id: idString + '_thickness_indicator', className: 'e-pv-annotation-thickness-indicator' });\n        this.thicknessIndicator.textContent = '0 pt';\n        if (!this.pdfViewer.enableRtl) {\n            outerContainer.appendChild(label);\n            outerContainer.appendChild(sliderElement);\n            this.thicknessSlider.appendTo(sliderElement);\n            outerContainer.appendChild(this.thicknessIndicator);\n        }\n        else {\n            outerContainer.appendChild(this.thicknessIndicator);\n            outerContainer.appendChild(sliderElement);\n            this.thicknessSlider.enableRtl = true;\n            this.thicknessSlider.appendTo(sliderElement);\n            outerContainer.appendChild(label);\n        }\n        this.thicknessSlider.element.parentElement.classList.add('e-pv-annotation-thickness-slider-container');\n        return outerContainer;\n    };\n    AnnotationToolbar.prototype.afterToolbarCreation = function () {\n        // eslint-disable-next-line max-len\n        this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n        this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n        // eslint-disable-next-line max-len\n        this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n        this.deleteItem = this.primaryToolbar.addClassToolbarItem('_annotation_delete', 'e-pv-annotation-delete', this.pdfViewer.localeObj.getConstant('Delete'));\n        // eslint-disable-next-line max-len\n        this.freeTextEditItem = this.primaryToolbar.addClassToolbarItem('_annotation_freeTextEdit', 'e-pv-annotation-freeTextEdit', this.pdfViewer.localeObj.getConstant('Free Text'));\n        // eslint-disable-next-line max-len\n        this.inkAnnotationItem = this.primaryToolbar.addClassToolbarItem('_annotation_ink', 'e-pv-annotation-ink', this.pdfViewer.localeObj.getConstant('Draw Ink'));\n        // eslint-disable-next-line max-len\n        this.commentItem = this.primaryToolbar.addClassToolbarItem('_annotation_commentPanel', 'e-pv-annotation-comment-panel', this.pdfViewer.localeObj.getConstant('Comment Panel'));\n        this.closeItem = this.primaryToolbar.addClassToolbarItem('_annotation_close', 'e-pv-annotation-tools-close', null);\n        this.selectAnnotationDeleteItem(false);\n        this.enableTextMarkupAnnotationPropertiesTools(false);\n        this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel);\n    };\n    AnnotationToolbar.prototype.onToolbarClicked = function (args) {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        if (args.originalEvent.target.id) {\n            this.pdfViewer.toolbarModule.updateStampItems();\n        }\n        this.pdfViewer.toolbarModule.deSelectCommentAnnotation();\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_highlight':\n            case this.pdfViewer.element.id + '_highlightIcon':\n                this.pdfViewer.tool = '';\n                if (!Browser.isDevice) {\n                    this.pdfViewer.tool = '';\n                    this.resetFreeTextAnnot();\n                    this.handleHighlight();\n                }\n                else {\n                    this.pdfViewer.annotationModule.setAnnotationMode('Highlight');\n                    this.textMarkupForMobile(args);\n                }\n                this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                break;\n            case this.pdfViewer.element.id + '_underline':\n            case this.pdfViewer.element.id + '_underlineIcon':\n                this.pdfViewer.tool = '';\n                if (!Browser.isDevice) {\n                    this.pdfViewer.tool = '';\n                    this.resetFreeTextAnnot();\n                    this.handleUnderline();\n                }\n                else {\n                    this.pdfViewer.annotationModule.setAnnotationMode('Underline');\n                    this.textMarkupForMobile(args);\n                }\n                this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                break;\n            case this.pdfViewer.element.id + '_strikethrough':\n            case this.pdfViewer.element.id + '_strikethroughIcon':\n                this.pdfViewer.tool = '';\n                if (!Browser.isDevice) {\n                    this.pdfViewer.tool = '';\n                    this.resetFreeTextAnnot();\n                    this.handleStrikethrough();\n                }\n                else {\n                    this.pdfViewer.annotationModule.setAnnotationMode('Strikethrough');\n                    this.textMarkupForMobile(args);\n                }\n                this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                break;\n            case this.pdfViewer.element.id + '_annotation_delete':\n            case this.pdfViewer.element.id + '_annotation_deleteIcon':\n                this.pdfViewer.annotationModule.deleteAnnotation();\n                this.resetFreeTextAnnot();\n                break;\n            case this.pdfViewer.element.id + '_annotation_commentPanel':\n            case this.pdfViewer.element.id + '_annotation_commentPanelIcon':\n                this.inkAnnotationSelected = false;\n                var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n                if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);\n                }\n                if (commentPanel.style.display === 'block') {\n                    this.pdfViewerBase.navigationPane.closeCommentPanelContainer();\n                }\n                else {\n                    this.pdfViewer.annotationModule.showCommentsPanel();\n                }\n                break;\n            case this.pdfViewer.element.id + '_annotation_close':\n            case this.pdfViewer.element.id + '_annotation_closeIcon':\n                this.inkAnnotationSelected = false;\n                var commentsPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n                if (commentsPanel.style.display === 'block') {\n                    this.pdfViewerBase.navigationPane.closeCommentPanelContainer();\n                }\n                this.showAnnotationToolbar(this.primaryToolbar.annotationItem);\n                break;\n            case this.pdfViewer.element.id + '_annotation_freeTextEdit':\n            case this.pdfViewer.element.id + '_annotation_freeTextEditIcon':\n                if (!Browser.isDevice) {\n                    this.resetFreeTextAnnot();\n                    this.handleFreeTextEditor();\n                }\n                else {\n                    this.pdfViewer.annotationModule.setAnnotationMode('FreeText');\n                    this.FreeTextForMobile();\n                }\n                break;\n            case this.pdfViewer.element.id + '_annotation_signature':\n            case this.pdfViewer.element.id + '_annotation_signatureIcon':\n                this.inkAnnotationSelected = false;\n                this.updateSignatureCount();\n                break;\n            case this.pdfViewer.element.id + '_annotation_ink':\n            case this.pdfViewer.element.id + '_annotation_inkIcon':\n                if (annotation) {\n                    this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n                }\n                this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n                if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n                    // eslint-disable-next-line\n                    var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n                    if (currentPageNumber && currentPageNumber !== '') {\n                        // eslint-disable-next-line\n                        this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n                        this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n                    }\n                }\n                if (!this.inkAnnotationSelected) {\n                    this.deselectAllItems();\n                    this.drawInkAnnotation();\n                }\n                else {\n                    this.inkAnnotationSelected = false;\n                }\n                break;\n            case this.pdfViewer.element.id + '_annotation_shapesIcon':\n            case this.pdfViewer.element.id + '_annotation_shapes':\n                if (Browser.isDevice) {\n                    this.shapeToolMobile(args);\n                }\n                break;\n            case this.pdfViewer.element.id + '_annotation_calibrateIcon':\n            case this.pdfViewer.element.id + '_annotation_calibrate':\n                if (Browser.isDevice) {\n                    this.calibrateToolMobile(args);\n                }\n                break;\n            case this.pdfViewer.element.id + '_commentIcon':\n            case this.pdfViewer.element.id + '_comment':\n                this.pdfViewerBase.isAddComment = true;\n                this.pdfViewerBase.isCommentIconAdded = true;\n                var commentsButton = document.getElementById(this.pdfViewer.element.id + '_comment');\n                commentsButton.classList.add('e-pv-select');\n                this.pdfViewer.toolbarModule.addComments(args);\n                break;\n        }\n    };\n    AnnotationToolbar.prototype.addInkAnnotation = function () {\n        this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n        if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n            // eslint-disable-next-line\n            var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n            if (currentPageNumber && currentPageNumber !== '') {\n                // eslint-disable-next-line\n                this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n                if (!isBlazor()) {\n                    this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n                }\n                else {\n                    this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n                    this.pdfViewerBase.focusViewerContainer();\n                }\n            }\n        }\n        if (!this.inkAnnotationSelected) {\n            this.deselectAllItemsInBlazor();\n            this.drawInkAnnotation();\n        }\n        else {\n            this.inkAnnotationSelected = false;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.deselectInkAnnotation = function () {\n        if (!isBlazor()) {\n            this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n        }\n        else {\n            this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    AnnotationToolbar.prototype.drawInkAnnotation = function () {\n        this.inkAnnotationSelected = true;\n        if (!isBlazor()) {\n            this.primaryToolbar.selectItem(this.inkAnnotationItem);\n        }\n        else {\n            this.primaryToolbar.selectItem(this.InkAnnotationElement);\n        }\n        this.enableSignaturePropertiesTools(true);\n        this.pdfViewerBase.isToolbarInkClicked = true;\n        this.pdfViewer.annotationModule.inkAnnotationModule.drawInk();\n    };\n    AnnotationToolbar.prototype.resetFreeTextAnnot = function () {\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.freeTextAnnotationModule) {\n            this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n            this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot = false;\n            if (!Browser.isDevice) {\n                if (this.freeTextEditItem && !isBlazor()) {\n                    this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n                }\n                else if (isBlazor()) {\n                    this.primaryToolbar.deSelectItem(this.FreeTextElement);\n                }\n                this.enableFreeTextAnnotationPropertiesTools(false);\n            }\n        }\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule) { // eslint-disable-next-line\n            var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n            if (currentPageNumber && currentPageNumber !== '') {\n                // eslint-disable-next-line\n                this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n                if (!isBlazor()) {\n                    this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n                }\n                else {\n                    this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n                }\n            }\n        }\n        this.inkAnnotationSelected = false;\n    };\n    AnnotationToolbar.prototype.updateInkannotationItems = function () {\n        if (this.pdfViewer.annotationModule && this.pdfViewer.annotationModule.inkAnnotationModule && this.inkAnnotationSelected) {\n            // eslint-disable-next-line\n            var currentPageNumber = this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;\n            if (currentPageNumber && currentPageNumber !== '') {\n                // eslint-disable-next-line\n                this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));\n                this.pdfViewerBase.isToolbarInkClicked = true;\n                this.pdfViewer.tool = 'Ink';\n                this.pdfViewer.clearSelection(currentPageNumber);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.showSignaturepanel = function () {\n        this.pdfViewerBase.isToolbarSignClicked = true;\n        this.pdfViewerBase.signatureModule.showSignatureDialog(true);\n    };\n    AnnotationToolbar.prototype.handleFreeTextEditor = function () {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        this.enableFreeTextAnnotationPropertiesTools(true);\n        if (annotation) {\n            this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n        }\n        this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.isStrikethroughEnabled = false;\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        var freeTextAnnotationModule = this.pdfViewer.annotation.freeTextAnnotationModule;\n        freeTextAnnotationModule.setAnnotationType('FreeText');\n        freeTextAnnotationModule.isNewFreeTextAnnot = true;\n        freeTextAnnotationModule.isNewAddedAnnot = true;\n        this.updateInteractionTools();\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.primaryToolbar.selectItem(this.freeTextEditItem);\n        this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.fillColor);\n        this.updateColorInIcon(this.strokeDropDownElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.borderColor);\n        this.updateColorInIcon(this.fontColorElement, this.pdfViewer.annotationModule.freeTextAnnotationModule.fontColor);\n        this.updateFontFamilyInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontFamily);\n        this.updateFontSizeInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontSize);\n        this.updateTextAlignInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.textAlign);\n        this.updateFontFamily();\n    };\n    AnnotationToolbar.prototype.updateFontFamily = function () {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold ? this.updateFontFamilyIcon('_bold', true) : this.updateFontFamilyIcon('_bold', false);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic ? this.updateFontFamilyIcon('_italic', true) : this.updateFontFamilyIcon('_italic', false);\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline) {\n            this.updateFontFamilyIcon('_underline_textinput', true);\n            this.updateFontFamilyIcon('_strikeout', false);\n        }\n        else {\n            this.updateFontFamilyIcon('_underline_textinput', false);\n        }\n        if (this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough) {\n            this.updateFontFamilyIcon('_strikeout', true);\n            this.updateFontFamilyIcon('_underline_textinput', false);\n        }\n        else {\n            this.updateFontFamilyIcon('_strikeout', false);\n        }\n    };\n    AnnotationToolbar.prototype.updateFontFamilyIcon = function (fontFamily, isActive) {\n        var fontFamilyElement = document.getElementById(this.pdfViewer.element.id + fontFamily);\n        isActive ? fontFamilyElement.classList.add('textprop-option-active') : fontFamilyElement.classList.remove('textprop-option-active');\n    };\n    /**\n     * @param element\n     * @param isInitialLoading\n     * @param element\n     * @param isInitialLoading\n     * @private\n     */\n    AnnotationToolbar.prototype.showAnnotationToolbar = function (element, isInitialLoading) {\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            if (!this.isToolbarHidden) {\n                // eslint-disable-next-line\n                var annotationModule = this.pdfViewer.annotationModule;\n                if (element) {\n                    this.primaryToolbar.deSelectItem(element);\n                }\n                else {\n                    if (this.pdfViewer.enableToolbar) {\n                        this.primaryToolbar.deSelectItem(this.primaryToolbar.annotationItem);\n                    }\n                }\n                this.adjustViewer(false);\n                // eslint-disable-next-line max-len\n                if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                    this.enablePropertiesTool(annotationModule);\n                }\n                else {\n                    this.deselectAllItems();\n                }\n                this.toolbarElement.style.display = 'none';\n                if (!isInitialLoading) {\n                    this.pdfViewer.isAnnotationToolbarVisible = false;\n                }\n                if (this.pdfViewerBase.isPanMode) {\n                    this.primaryToolbar.updateInteractionTools(false);\n                }\n                else {\n                    this.primaryToolbar.updateInteractionTools(true);\n                }\n            }\n            else {\n                var toolBarInitialStatus = void 0;\n                if (this.toolbarElement) {\n                    toolBarInitialStatus = this.toolbarElement.style.display;\n                    this.toolbarElement.style.display = 'block';\n                }\n                if (!isInitialLoading) {\n                    this.pdfViewer.isAnnotationToolbarVisible = true;\n                }\n                if (element) {\n                    this.primaryToolbar.selectItem(element);\n                }\n                else {\n                    if (this.pdfViewer.enableToolbar) {\n                        this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem);\n                    }\n                }\n                if (toolBarInitialStatus === 'none') {\n                    this.adjustViewer(true);\n                }\n            }\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.magnification && this.pdfViewer.magnification.fitType === 'fitToPage') {\n                this.pdfViewer.magnification.fitToPage();\n            }\n            this.enableAnnotationAddTools(true);\n            this.isToolbarHidden = !this.isToolbarHidden;\n        }\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.enablePropertiesTool = function (annotationModule) {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableTextMarkupAnnotationPropertiesTools(true);\n        // eslint-disable-next-line max-len\n        this.updateColorInIcon(this.colorDropDownElement, annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);\n        this.selectAnnotationDeleteItem(true);\n    };\n    AnnotationToolbar.prototype.applyAnnotationToolbarSettings = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('HighlightTool') !== -1) {\n                this.showHighlightTool(true, 0, 0);\n            }\n            else {\n                this.showHighlightTool(false, 0, 0);\n            }\n            if (annotationToolbarItems.indexOf('UnderlineTool') !== -1) {\n                this.showUnderlineTool(true, 1, 1);\n            }\n            else {\n                this.showUnderlineTool(false, 1, 1);\n            }\n            if (annotationToolbarItems.indexOf('StrikethroughTool') !== -1) {\n                this.showStrikethroughTool(true, 2, 2);\n            }\n            else {\n                this.showStrikethroughTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('ShapeTool') !== -1) {\n                this.showShapeAnnotationTool(true, 4, 4);\n            }\n            else {\n                this.showShapeAnnotationTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('CalibrateTool') !== -1) {\n                this.showCalibrateAnnotationTool(true, 6, 6);\n            }\n            else {\n                this.showCalibrateAnnotationTool(false, 6, 6);\n            }\n            if (annotationToolbarItems.indexOf('ColorEditTool') !== -1) {\n                this.showColorEditTool(true, 22, 22);\n            }\n            else {\n                this.showColorEditTool(false, 22, 22);\n            }\n            if (annotationToolbarItems.indexOf('StrokeColorEditTool') !== -1) {\n                this.showStrokeColorEditTool(true, 23, 23);\n            }\n            else {\n                this.showStrokeColorEditTool(false, 23, 23);\n            }\n            if (annotationToolbarItems.indexOf('ThicknessEditTool') !== -1) {\n                this.showThicknessEditTool(true, 24, 24);\n            }\n            else {\n                this.showThicknessEditTool(false, 24, 24);\n            }\n            if (annotationToolbarItems.indexOf('OpacityEditTool') !== -1) {\n                this.showOpacityEditTool(true, 25, 25);\n            }\n            else {\n                this.showOpacityEditTool(false, 25, 25);\n            }\n            if (annotationToolbarItems.indexOf('AnnotationDeleteTool') !== -1) {\n                this.showAnnotationDeleteTool(true, 27, 27);\n            }\n            else {\n                this.showAnnotationDeleteTool(false, 27, 27);\n            }\n            if (annotationToolbarItems.indexOf('StampAnnotationTool') !== -1) {\n                this.showStampAnnotationTool(true, 10, 10);\n            }\n            else {\n                this.showStampAnnotationTool(false, 10, 10);\n            }\n            if (annotationToolbarItems.indexOf('HandWrittenSignatureTool') !== -1) {\n                this.showSignatureTool(true, 12, 12);\n            }\n            else {\n                this.showSignatureTool(false, 12, 12);\n            }\n            if (annotationToolbarItems.indexOf('FreeTextAnnotationTool') !== -1) {\n                this.showFreeTextAnnotationTool(true, 8, 8);\n            }\n            else {\n                this.showFreeTextAnnotationTool(false, 8, 8);\n            }\n            if (annotationToolbarItems.indexOf('FontFamilyAnnotationTool') !== -1) {\n                this.showFontFamilyAnnotationTool(true, 16, 16);\n            }\n            else {\n                this.showFontFamilyAnnotationTool(false, 16, 16);\n            }\n            if (annotationToolbarItems.indexOf('FontSizeAnnotationTool') !== -1) {\n                this.showFontSizeAnnotationTool(true, 17, 17);\n            }\n            else {\n                this.showFontSizeAnnotationTool(false, 17, 17);\n            }\n            if (annotationToolbarItems.indexOf('FontStylesAnnotationTool') !== -1) {\n                this.showFontStylesAnnotationTool(true, 20, 20);\n            }\n            else {\n                this.showFontStylesAnnotationTool(false, 20, 20);\n            }\n            if (annotationToolbarItems.indexOf('FontAlignAnnotationTool') !== -1) {\n                this.showFontAlignAnnotationTool(true, 18, 18);\n            }\n            else {\n                this.showFontAlignAnnotationTool(false, 18, 18);\n            }\n            if (annotationToolbarItems.indexOf('FontColorAnnotationTool') !== -1) {\n                this.showFontColorAnnotationTool(true, 19, 19);\n            }\n            else {\n                this.showFontColorAnnotationTool(false, 19, 19);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 28, 28);\n            }\n            else {\n                this.showCommentPanelTool(false, 28, 28);\n            }\n            this.showInkAnnotationTool();\n            this.showSeparator();\n        }\n    };\n    AnnotationToolbar.prototype.applyMobileAnnotationToolbarSettings = function () {\n        // eslint-disable-next-line\n        var annotationToolbarItems = this.pdfViewer.toolbarSettings.annotationToolbarItems;\n        if (annotationToolbarItems) {\n            if (annotationToolbarItems.indexOf('HighlightTool') !== -1) {\n                this.showHighlightTool(true, 2, 2);\n            }\n            else {\n                this.showHighlightTool(false, 2, 2);\n            }\n            if (annotationToolbarItems.indexOf('UnderlineTool') !== -1) {\n                this.showUnderlineTool(true, 3, 3);\n            }\n            else {\n                this.showUnderlineTool(false, 3, 3);\n            }\n            if (annotationToolbarItems.indexOf('StrikethroughTool') !== -1) {\n                this.showStrikethroughTool(true, 4, 4);\n            }\n            else {\n                this.showStrikethroughTool(false, 4, 4);\n            }\n            if (annotationToolbarItems.indexOf('ShapeTool') !== -1) {\n                this.showShapeAnnotationTool(true, 6, 6);\n            }\n            else {\n                this.showShapeAnnotationTool(false, 6, 6);\n            }\n            if (annotationToolbarItems.indexOf('CalibrateTool') !== -1) {\n                this.showCalibrateAnnotationTool(true, 8, 8);\n            }\n            else {\n                this.showCalibrateAnnotationTool(false, 8, 8);\n            }\n            var toolbarItems = this.pdfViewer.toolbarSettings.toolbarItems;\n            if (toolbarItems && toolbarItems.indexOf('CommentTool') !== -1) {\n                this.showStickyNoteToolInMobile(true);\n            }\n            else {\n                this.showStickyNoteToolInMobile(false);\n            }\n            if (annotationToolbarItems.indexOf('StampAnnotationTool') !== -1) {\n                this.showStampAnnotationTool(true, 12, 12);\n            }\n            else {\n                this.showStampAnnotationTool(false, 12, 12);\n            }\n            if (annotationToolbarItems.indexOf('HandWrittenSignatureTool') !== -1) {\n                this.showSignatureTool(true, 14, 14);\n            }\n            else {\n                this.showSignatureTool(false, 14, 14);\n            }\n            if (annotationToolbarItems.indexOf('FreeTextAnnotationTool') !== -1) {\n                this.showFreeTextAnnotationTool(true, 10, 10);\n            }\n            else {\n                this.showFreeTextAnnotationTool(false, 10, 10);\n            }\n            if (annotationToolbarItems.indexOf('CommentPanelTool') !== -1) {\n                this.showCommentPanelTool(true, 18, 18);\n            }\n            else {\n                this.showCommentPanelTool(false, 18, 18);\n            }\n            if (annotationToolbarItems.indexOf('InkAnnotationTool') !== -1) {\n                this.showInkTool(true, 16, 16);\n            }\n            else {\n                this.showInkTool(false, 16, 16);\n            }\n            this.showSeparatorInMobile();\n        }\n    };\n    AnnotationToolbar.prototype.showStickyNoteToolInMobile = function (isShow) {\n        this.isCommentBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 0, 0);\n    };\n    AnnotationToolbar.prototype.showSeparatorInMobile = function () {\n        if (!this.isCommentBtnVisible) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if ((!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible)) {\n            this.applyHideToToolbar(false, 5, 5);\n        }\n        if (!this.isShapeBtnVisible) {\n            this.applyHideToToolbar(false, 7, 7);\n        }\n        if (!this.isCalibrateBtnVisible) {\n            this.applyHideToToolbar(false, 9, 9);\n        }\n        if (!this.isFreeTextBtnVisible) {\n            this.applyHideToToolbar(false, 11, 11);\n        }\n        if (!this.isStampBtnVisible) {\n            this.applyHideToToolbar(false, 13, 13);\n        }\n        if (!this.isSignatureBtnVisible) {\n            this.applyHideToToolbar(false, 15, 15);\n        }\n        if (!this.isInkBtnVisible) {\n            this.applyHideToToolbar(false, 17, 17);\n        }\n    };\n    AnnotationToolbar.prototype.showInkAnnotationTool = function () {\n        if (this.pdfViewer.toolbarSettings.annotationToolbarItems.indexOf('InkAnnotationTool') !== -1) {\n            this.showInkTool(true, 14, 14);\n        }\n        else {\n            this.showInkTool(false, 14, 14);\n        }\n    };\n    AnnotationToolbar.prototype.showSeparator = function () {\n        if ((!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible)) {\n            this.applyHideToToolbar(false, 3, 3);\n        }\n        if (!this.isShapeBtnVisible) {\n            this.applyHideToToolbar(false, 5, 5);\n        }\n        if (!this.isCalibrateBtnVisible) {\n            this.applyHideToToolbar(false, 7, 7);\n        }\n        if (!this.isFreeTextBtnVisible) {\n            this.applyHideToToolbar(false, 9, 9);\n        }\n        if (!this.isStampBtnVisible) {\n            this.applyHideToToolbar(false, 11, 11);\n        }\n        if (!this.isSignatureBtnVisible) {\n            this.applyHideToToolbar(false, 13, 13);\n        }\n        if (!this.isInkBtnVisible) {\n            this.applyHideToToolbar(false, 15, 15);\n        }\n        // eslint-disable-next-line max-len\n        if (!this.isFontFamilyToolVisible && !this.isFontSizeToolVisible && !this.isFontColorToolVisible && !this.isFontAlignToolVisible && !this.isFontStylesToolVisible) {\n            this.applyHideToToolbar(false, 21, 21);\n        }\n        // eslint-disable-next-line max-len\n        if ((!this.isColorToolVisible && !this.isStrokeColorToolVisible && !this.isThicknessToolVisible && !this.isOpacityToolVisible) || !this.isDeleteAnnotationToolVisible) {\n            this.applyHideToToolbar(false, 26, 26);\n        }\n    };\n    AnnotationToolbar.prototype.showHighlightTool = function (isShow, startIndex, endIndex) {\n        this.isHighlightBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showUnderlineTool = function (isShow, startIndex, endIndex) {\n        this.isUnderlineBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showStrikethroughTool = function (isShow, startIndex, endIndex) {\n        this.isStrikethroughBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showShapeAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isShapeBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showCalibrateAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isCalibrateBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFreeTextAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFreeTextBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showStampAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isStampBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showSignatureTool = function (isShow, startIndex, endIndex) {\n        this.isSignatureBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showInkTool = function (isShow, startIndex, endIndex) {\n        this.isInkBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFontFamilyAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFontFamilyToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFontSizeAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFontSizeToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFontAlignAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFontAlignToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFontColorAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFontColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showFontStylesAnnotationTool = function (isShow, startIndex, endIndex) {\n        this.isFontStylesToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showColorEditTool = function (isShow, startIndex, endIndex) {\n        this.isColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showStrokeColorEditTool = function (isShow, startIndex, endIndex) {\n        this.isStrokeColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showThicknessEditTool = function (isShow, startIndex, endIndex) {\n        this.isThicknessToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showOpacityEditTool = function (isShow, startIndex, endIndex) {\n        this.isOpacityToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showAnnotationDeleteTool = function (isShow, startIndex, endIndex) {\n        this.isDeleteAnnotationToolVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.showCommentPanelTool = function (isShow, startIndex, endIndex) {\n        this.isCommentPanelBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, startIndex, endIndex);\n    };\n    AnnotationToolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            var toolbar_1 = void 0;\n            var propertyToolbarElement = (this.propertyToolbar && this.propertyToolbar.element) ? this.propertyToolbar.element : null;\n            var toolbarElement = (this.toolbar && this.toolbar.element) ? this.toolbar.element : null;\n            if (toolbarElement && toolbarElement.children && toolbarElement.children.length > 0) {\n                toolbar_1 = this.toolbar;\n            }\n            else if (Browser.isDevice && propertyToolbarElement && propertyToolbarElement.children && propertyToolbarElement.children.length > 0) {\n                toolbar_1 = this.propertyToolbar;\n            }\n            if (toolbar_1.items[index]) {\n                var className = toolbar_1.items[index].cssClass;\n                if (className && className !== '') {\n                    // Querying the toolbar item\n                    var element = toolbar_1.element.querySelector('.' + className);\n                    if (element) {\n                        this.toolbar.hideItem(element, isHide);\n                    }\n                }\n                else {\n                    toolbar_1.hideItem(index, isHide);\n                }\n            }\n        }\n    };\n    /**\n     * @param isAdjust\n     * @private\n     */\n    AnnotationToolbar.prototype.adjustViewer = function (isAdjust) {\n        var splitterElement;\n        var toolbarContainer;\n        var annotationToolbarHeight;\n        if (isBlazor()) {\n            splitterElement = this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');\n            toolbarContainer = this.pdfViewer.element.querySelector('.e-pv-toolbar');\n            var annotationToolbarContainer = this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');\n            annotationToolbarHeight = this.getToolbarHeight(annotationToolbarContainer);\n        }\n        else {\n            splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n            toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n            annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        }\n        var toolbarHeight = this.getToolbarHeight(toolbarContainer);\n        var sideBarToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n        var sideBarContentContainer = this.pdfViewerBase.navigationPane.sideBarContentContainer;\n        var commentsContainer = this.pdfViewerBase.navigationPane.commentPanelContainer;\n        var commentPanelResizer = this.pdfViewerBase.navigationPane.commentPanelResizer;\n        if (isAdjust) {\n            if (this.pdfViewer.enableToolbar) {\n                sideBarToolbar.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                sideBarContentContainer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                splitterElement.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                commentsContainer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                commentPanelResizer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            }\n            else {\n                sideBarToolbar.style.top = (annotationToolbarHeight) + 'px';\n                sideBarContentContainer.style.top = (annotationToolbarHeight) + 'px';\n                splitterElement.style.top = (annotationToolbarHeight) + 'px';\n                commentsContainer.style.top = (annotationToolbarHeight) + 'px';\n                commentPanelResizer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            }\n            if (!this.pdfViewer.enableToolbar) {\n                toolbarHeight = 0;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (annotationToolbarHeight + toolbarHeight)) + 'px';\n            sideBarToolbar.style.height = this.getNavigationToolbarHeight(annotationToolbarHeight + toolbarHeight) + 'px';\n            splitterElement.style.height = this.getNavigationToolbarHeight(annotationToolbarHeight + toolbarHeight) + 'px';\n        }\n        else {\n            if (this.pdfViewer.enableToolbar) {\n                // eslint-disable-next-line max-len\n                sideBarToolbar.style.top = toolbarHeight + 'px';\n                sideBarContentContainer.style.top = toolbarHeight + 'px';\n                splitterElement.style.top = toolbarHeight + 'px';\n                commentsContainer.style.top = toolbarHeight + 'px';\n                commentPanelResizer.style.top = toolbarHeight + 'px';\n            }\n            else {\n                sideBarToolbar.style.top = 1 + 'px';\n                sideBarToolbar.style.height = '100%';\n                sideBarContentContainer.style.top = 1 + 'px';\n                sideBarContentContainer.style.height = '100%';\n                splitterElement.style.top = 1 + 'px';\n                splitterElement.style.height = '100%';\n                commentsContainer.style.top = 1 + 'px';\n                commentsContainer.style.height = '100%';\n                commentPanelResizer.style.top = 1 + 'px';\n                commentPanelResizer.style.height = '100%';\n            }\n            if (!this.pdfViewer.enableToolbar) {\n                toolbarHeight = 0;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight) + 'px';\n            sideBarToolbar.style.height = this.getNavigationToolbarHeight(toolbarHeight);\n            splitterElement.style.height = this.getNavigationToolbarHeight(toolbarHeight);\n            if (this.pdfViewerBase.viewerContainer.style.height === '0px') {\n                // eslint-disable-next-line\n                this.pdfViewerBase.viewerContainer.style.height = (parseInt(this.pdfViewer.element.style.height) - parseInt(sideBarToolbar.style.top)) + 'px';\n            }\n        }\n        if (isBlazor()) {\n            this.updateContentContainerHeight(isAdjust, true);\n        }\n        else {\n            this.updateContentContainerHeight(isAdjust);\n        }\n    };\n    AnnotationToolbar.prototype.updateContentContainerHeight = function (isAdjust, isBlazor) {\n        var annotationToolbarHeight;\n        if (isBlazor) {\n            var annotationToolbarContainer = this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');\n            annotationToolbarHeight = this.getToolbarHeight(annotationToolbarContainer);\n        }\n        else {\n            annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        }\n        var sideBarClientRect = this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();\n        if (sideBarClientRect.height !== 0) {\n            if (isAdjust) {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height - annotationToolbarHeight + 'px';\n            }\n            else {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height + annotationToolbarHeight + 'px';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getToolbarHeight = function (element) {\n        var toolbarHeight = element.getBoundingClientRect().height;\n        if (toolbarHeight === 0 && element === this.pdfViewerBase.getElement('_toolbarContainer')) {\n            // getComputedStyle gets the value from style and toolbar border height is added to it.\n            // eslint-disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(element)['height']) + this.toolbarBorderHeight;\n        }\n        return toolbarHeight;\n    };\n    AnnotationToolbar.prototype.getNavigationToolbarHeight = function (toolbarHeight) {\n        var height = this.pdfViewer.element.getBoundingClientRect().height;\n        return (height !== 0) ? height - toolbarHeight + 'px' : '';\n    };\n    AnnotationToolbar.prototype.handleHighlight = function () {\n        if (!this.isHighlightEnabled) {\n            this.updateInteractionTools();\n            this.clearShapeMode();\n            this.clearMeasureMode();\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n            this.primaryToolbar.selectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n            this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n            this.enableTextMarkupAnnotationPropertiesTools(true);\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = null;\n            this.setCurrentColorInPicker();\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n            this.isHighlightEnabled = true;\n            this.isUnderlineEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleUnderline = function () {\n        if (!this.isUnderlineEnabled) {\n            this.updateInteractionTools();\n            this.clearShapeMode();\n            this.clearMeasureMode();\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n            this.primaryToolbar.selectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n            this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n            this.enableTextMarkupAnnotationPropertiesTools(true);\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = null;\n            this.setCurrentColorInPicker();\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n            this.isUnderlineEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleStrikethrough = function () {\n        if (!this.isStrikethroughEnabled) {\n            this.updateInteractionTools();\n            this.clearShapeMode();\n            this.clearMeasureMode();\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n            this.primaryToolbar.selectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n            this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n            this.enableTextMarkupAnnotationPropertiesTools(true);\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = null;\n            this.setCurrentColorInPicker();\n            // eslint-disable-next-line max-len\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n            this.isStrikethroughEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isUnderlineEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.deselectAllItemsInBlazor = function () {\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);\n        }\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.primaryToolbar.deSelectItem(this.HighlightElement);\n            this.primaryToolbar.deSelectItem(this.UnderlineElement);\n            this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n            this.primaryToolbar.deSelectItem(this.FreeTextElement);\n            this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateTextMarkupButtons', false, false, false);\n        }\n        this.resetFreeTextAnnot();\n        this.clearTextMarkupMode();\n        this.clearShapeMode();\n        this.clearMeasureMode();\n        this.pdfViewer.tool = '';\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.enableTextMarkupAnnotationPropertiesTools(false);\n            this.enableFreeTextAnnotationPropertiesTools(false);\n            this.updateColorInIcon(this.colorDropDownElement, '#000000');\n            this.updateColorInIcon(this.strokeDropDownElement, '#000000');\n            this.updateColorInIcon(this.fontColorElement, '#000000');\n            this.selectAnnotationDeleteItem(false);\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.deselectAllItems = function () {\n        var isBlazorPlatform = isBlazor();\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);\n        }\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            if (isBlazorPlatform) {\n                this.primaryToolbar.deSelectItem(this.pdfViewer.toolbar.SelectToolElement);\n                this.primaryToolbar.selectItem(this.pdfViewer.toolbar.PanElement);\n                this.primaryToolbar.deSelectItem(this.HighlightElement);\n                this.primaryToolbar.deSelectItem(this.UnderlineElement);\n                this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n                this.primaryToolbar.deSelectItem(this.FreeTextElement);\n                this.primaryToolbar.deSelectItem(this.InkAnnotationElement);\n            }\n            else {\n                this.primaryToolbar.deSelectItem(this.highlightItem);\n                this.primaryToolbar.deSelectItem(this.underlineItem);\n                this.primaryToolbar.deSelectItem(this.strikethroughItem);\n                this.primaryToolbar.deSelectItem(this.freeTextEditItem);\n                this.primaryToolbar.deSelectItem(this.inkAnnotationItem);\n            }\n        }\n        this.resetFreeTextAnnot();\n        this.clearTextMarkupMode();\n        this.clearShapeMode();\n        this.clearMeasureMode();\n        this.pdfViewer.tool = '';\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            this.enableTextMarkupAnnotationPropertiesTools(false);\n            this.enableFreeTextAnnotationPropertiesTools(false);\n            this.updateColorInIcon(this.colorDropDownElement, '#000000');\n            this.updateColorInIcon(this.strokeDropDownElement, '#000000');\n            this.updateColorInIcon(this.fontColorElement, '#000000');\n            this.selectAnnotationDeleteItem(false);\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n        }\n    };\n    AnnotationToolbar.prototype.updateInteractionTools = function () {\n        if (this.pdfViewer.enableTextSelection) {\n            this.pdfViewerBase.initiateTextSelectMode();\n            if (!Browser.isDevice) {\n                this.pdfViewer.toolbar.updateInteractionTools(true);\n            }\n        }\n        else if (!Browser.isDevice) {\n            this.pdfViewer.toolbar.updateInteractionTools(false);\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.selectAnnotationDeleteItem = function (isEnable, deleteIconCicked) {\n        if (!isBlazor() && !Browser.isDevice) {\n            if (this.toolbar) {\n                if (isEnable) {\n                    // eslint-disable-next-line\n                    var annotation = this.pdfViewer.annotationModule.findCurrentAnnotation();\n                    if (annotation) {\n                        // eslint-disable-next-line\n                        if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n                            if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n                                this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n                            }\n                            else {\n                                this.toolbar.enableItems(this.deleteItem.parentElement, false);\n                            }\n                        }\n                        else {\n                            this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n                        }\n                    }\n                }\n                else {\n                    this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n                }\n            }\n        }\n        else {\n            if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n                if (isEnable) {\n                    // eslint-disable-next-line\n                    var annotation = this.pdfViewer.annotationModule.findCurrentAnnotation();\n                    if (annotation) {\n                        // eslint-disable-next-line\n                        if (annotation.annotationSettings && annotation.annotationSettings.isLock) {\n                            if (this.pdfViewer.annotationModule.checkAllowedInteractions('Delete', annotation)) {\n                                this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n                            }\n                            else {\n                                this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(false);\n                            }\n                        }\n                        else if (this.pdfViewerBase.blazorUIAdaptor) {\n                            this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n                        }\n                    }\n                }\n                else if (this.pdfViewerBase.blazorUIAdaptor) {\n                    this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);\n                }\n                if (deleteIconCicked) {\n                    this.pdfViewerBase.focusViewerContainer();\n                }\n            }\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableTextMarkupAnnotationPropertiesTools = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (!isBlazor()) {\n                this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n                this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n                if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n                    this.toolbar.enableItems(this.strokeDropDownElement.parentElement, false);\n                    this.toolbar.enableItems(this.thicknessElement.parentElement, false);\n                    this.toolbar.enableItems(this.fontFamilyElement.parentElement, false);\n                    this.toolbar.enableItems(this.fontSizeElement.parentElement, false);\n                    this.toolbar.enableItems(this.fontColorElement.parentElement, false);\n                    this.toolbar.enableItems(this.textAlignElement.parentElement, false);\n                    this.toolbar.enableItems(this.textPropElement.parentElement, false);\n                }\n            }\n            else {\n                // this.pdfViewer._dotnetInstance.invokeMethodAsync('AnnotationSelect', 'TextMarkup');\n                this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(isEnable);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.checkAnnotationPropertiesChange = function () {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        if (annotation && annotation.annotationSettings) {\n            // eslint-disable-next-line\n            var isLock = annotation.annotationSettings.isLock;\n            if (isLock) {\n                if (this.pdfViewer.annotationModule.checkAllowedInteractions('PropertyChange', annotation)) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationPropertiesTools = function (isEnable) {\n        if (!Browser.isDevice) {\n            var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n            if (!isEnable) {\n                isPropertiesChanges = true;\n            }\n            if (!isBlazor()) {\n                if (isPropertiesChanges) {\n                    // eslint-disable-next-line max-len\n                    if (this.pdfViewer.selectedItems.annotations[0] && (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line')) {\n                        this.toolbar.enableItems(this.colorDropDownElement.parentElement, false);\n                    }\n                    else {\n                        this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n                    }\n                    this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n                    this.toolbar.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n                    this.toolbar.enableItems(this.thicknessElement.parentElement, isEnable);\n                    if (this.pdfViewer.enableShapeLabel) {\n                        this.toolbar.enableItems(this.fontFamilyElement.parentElement, isEnable);\n                        this.toolbar.enableItems(this.fontSizeElement.parentElement, isEnable);\n                        this.toolbar.enableItems(this.fontColorElement.parentElement, isEnable);\n                    }\n                    this.toolbar.enableItems(this.textAlignElement.parentElement, false);\n                    this.toolbar.enableItems(this.textPropElement.parentElement, false);\n                }\n            }\n            else {\n                // this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n                this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(isEnable, isPropertiesChanges);\n            }\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableSignaturePropertiesTools = function (isEnable) {\n        if (!Browser.isDevice) {\n            var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n            if (!isEnable) {\n                isPropertiesChanges = true;\n            }\n            if (!isBlazor()) {\n                if (isPropertiesChanges) {\n                    this.toolbar.enableItems(this.colorDropDownElement.parentElement, false);\n                    this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n                    this.toolbar.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n                    this.toolbar.enableItems(this.thicknessElement.parentElement, isEnable);\n                    this.toolbar.enableItems(this.textAlignElement.parentElement, false);\n                    this.toolbar.enableItems(this.textPropElement.parentElement, false);\n                    this.toolbar.enableItems(this.fontFamilyElement.parentElement, false);\n                    this.toolbar.enableItems(this.fontSizeElement.parentElement, false);\n                    this.toolbar.enableItems(this.fontColorElement.parentElement, false);\n                    this.toolbar.enableItems(this.textAlignElement.parentElement, false);\n                }\n            }\n            else {\n                //this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableSignaturePropertiesTools', isEnable, isPropertiesChanges);\n                this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(isEnable, isPropertiesChanges);\n            }\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableStampAnnotationPropertiesTools = function (isEnable) {\n        var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n        if (!isEnable) {\n            isPropertiesChanges = true;\n        }\n        if (!isBlazor()) {\n            if (isPropertiesChanges) {\n                this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n                this.toolbar.enableItems(this.colorDropDownElement.parentElement, false);\n                this.toolbar.enableItems(this.strokeDropDownElement.parentElement, false);\n                this.toolbar.enableItems(this.thicknessElement.parentElement, false);\n                this.toolbar.enableItems(this.fontFamilyElement.parentElement, false);\n                this.toolbar.enableItems(this.fontSizeElement.parentElement, false);\n                this.toolbar.enableItems(this.fontColorElement.parentElement, false);\n                this.toolbar.enableItems(this.textAlignElement.parentElement, false);\n                this.toolbar.enableItems(this.textPropElement.parentElement, false);\n            }\n        }\n        else {\n            // this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableStampAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n            this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(isEnable, isPropertiesChanges);\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableFreeTextAnnotationPropertiesTools = function (isEnable) {\n        var isPropertiesChanges = this.checkAnnotationPropertiesChange();\n        if (!isEnable) {\n            isPropertiesChanges = true;\n        }\n        if (!isBlazor()) {\n            if (isPropertiesChanges) {\n                this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n                this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n                this.toolbar.enableItems(this.strokeDropDownElement.parentElement, isEnable);\n                this.toolbar.enableItems(this.thicknessElement.parentElement, isEnable);\n                this.toolbar.enableItems(this.fontFamilyElement.parentElement, isEnable);\n                this.toolbar.enableItems(this.fontSizeElement.parentElement, isEnable);\n                this.toolbar.enableItems(this.fontColorElement.parentElement, isEnable);\n                this.toolbar.enableItems(this.textAlignElement.parentElement, isEnable);\n                this.toolbar.enableItems(this.textPropElement.parentElement, isEnable);\n            }\n        }\n        else {\n            //this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableFreeTextAnnotationPropertiesTools', isEnable, isPropertiesChanges);\n            this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(isEnable, isPropertiesChanges);\n        }\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationAddTools = function (isEnable) {\n        if (this.toolbar && !Browser.isDevice) {\n            if (this.pdfViewer.enableTextMarkupAnnotation) {\n                this.toolbar.enableItems(this.highlightItem.parentElement, isEnable);\n                this.toolbar.enableItems(this.underlineItem.parentElement, isEnable);\n                this.toolbar.enableItems(this.strikethroughItem.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableShapeAnnotation) {\n                this.toolbar.enableItems(this.shapeElement.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableStampAnnotations) {\n                this.toolbar.enableItems(this.stampElement.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableMeasureAnnotation && this.pdfViewerBase.isCalibrateAnnotationModule()) {\n                this.toolbar.enableItems(this.calibrateElement.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableFreeText) {\n                this.toolbar.enableItems(this.freeTextEditItem.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableHandwrittenSignature) {\n                this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableInkAnnotation) {\n                this.toolbar.enableItems(this.inkAnnotationItem.parentElement, isEnable);\n            }\n            if (this.pdfViewer.enableCommentPanel) {\n                this.enableCommentPanelTool(isEnable);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.isAnnotationButtonsEnabled = function () {\n        var isButtonsEnabled = false;\n        if (this.isHighlightEnabled || this.isUnderlineEnabled || this.isStrikethroughEnabled) {\n            isButtonsEnabled = true;\n        }\n        return isButtonsEnabled;\n    };\n    /**\n     * @param isEnable\n     * @private\n     */\n    AnnotationToolbar.prototype.enableCommentPanelTool = function (isEnable) {\n        if (this.toolbar) {\n            this.toolbar.enableItems(this.commentItem.parentElement, isEnable);\n        }\n    };\n    AnnotationToolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.enableTextMarkupAddTools(true);\n        }\n        else {\n            this.enableTextMarkupAddTools(false);\n        }\n        this.toolbar.enableItems(this.shapeElement.parentElement, this.pdfViewer.enableShapeAnnotation);\n        this.toolbar.enableItems(this.stampElement.parentElement, this.pdfViewer.enableStampAnnotations);\n        this.toolbar.enableItems(this.calibrateElement.parentElement, this.pdfViewer.enableMeasureAnnotation);\n        this.toolbar.enableItems(this.freeTextEditItem.parentElement, this.pdfViewer.enableFreeText);\n        this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement, this.pdfViewer.enableHandwrittenSignature);\n        this.toolbar.enableItems(this.inkAnnotationItem.parentElement, this.pdfViewer.enableInkAnnotation);\n    };\n    AnnotationToolbar.prototype.enableTextMarkupAddTools = function (isEnable) {\n        this.toolbar.enableItems(this.highlightItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.underlineItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.strikethroughItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    // for shapes added by drawing package\n    AnnotationToolbar.prototype.updateAnnnotationPropertyItems = function () {\n        if (!isBlazor()) {\n            if (this.pdfViewer.selectedItems.annotations.length === 1) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill, 'fillColor'));\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor, 'strokeColor'));\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                    // eslint-disable-next-line\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor, 'fontColor'));\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize);\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n                }\n            }\n            else {\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement, '#000000');\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement, '#000000');\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement, '#000000');\n            }\n        }\n        else {\n            this.colorDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');\n            this.strokeDropDownElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');\n            this.fontColorElementInBlazor = this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');\n            if (this.pdfViewer.selectedItems.annotations.length === 1) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill, 'fillColor'));\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor, 'strokeColor'));\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                    // eslint-disable-next-line\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor, this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor, 'fontColor'));\n                    //this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontFamilyInIcon', this.pdfViewer.selectedItems.annotations[0].fontFamily);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily);\n                    // this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontSizeInIcon', this.pdfViewer.selectedItems.annotations[0].fontSize);\n                    this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize);\n                    //this.pdfViewer.toolbar.annotationtoolbar.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);\n                }\n            }\n            else {\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor, '#000000');\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor, '#000000');\n                this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor, '#000000');\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getColorHexValue = function (colorString, type) {\n        if (colorString === '#ffffff00') {\n            colorString = '#ffffff';\n        }\n        if (colorString.toLowerCase() === 'red') {\n            colorString = '#FF0000';\n        }\n        if (colorString !== 'transparent') {\n            if (!isBlazor()) {\n                return this.colorPalette.getValue(colorString, 'hex');\n            }\n            else {\n                return colorString;\n            }\n        }\n        else {\n            if (type === 'fontColor' || type === 'strokeColor') {\n                return '#000000';\n            }\n            else {\n                return '#ffffff';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.setColorInPicker = function (colorpick, colorString) {\n        if (colorpick) {\n            colorpick.setProperties({ 'value': colorString }, true);\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.resetToolbar = function () {\n        this.adjustViewer(false);\n        this.updateToolbarItems();\n        // eslint-disable-next-line max-len\n        if ((this.pdfViewer.isAnnotationToolbarOpen || this.pdfViewer.isAnnotationToolbarVisible) && this.pdfViewer.enableAnnotationToolbar) {\n            this.toolbarElement.style.display = '';\n            this.isToolbarHidden = false;\n            this.adjustViewer(true);\n            this.enableAnnotationAddTools(false);\n            this.pdfViewer.isAnnotationToolbarVisible = true;\n        }\n        else {\n            this.toolbarElement.style.display = 'none';\n            this.isToolbarHidden = true;\n            this.pdfViewer.isAnnotationToolbarVisible = false;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clearTextMarkupMode = function () {\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            if (isBlazor()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n            }\n            this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clearShapeMode = function () {\n        if (this.pdfViewerBase.isShapeAnnotationModule()) {\n            this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode = '';\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clearMeasureMode = function () {\n        if (this.pdfViewerBase.isCalibrateAnnotationModule()) {\n            this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode = '';\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clear = function () {\n        this.deselectAllItems();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.destroy = function () {\n        this.destroyComponent();\n        this.shapeDropDown ? this.shapeDropDown.destroy() : null;\n        this.calibrateDropDown ? this.calibrateDropDown.destroy() : null;\n        this.fontColorDropDown ? this.fontColorDropDown.destroy() : null;\n        this.textAlignDropDown ? this.textAlignDropDown.destroy() : null;\n        this.colorDropDown ? this.colorDropDown.destroy() : null;\n        this.strokeDropDown ? this.strokeDropDown.destroy() : null;\n        this.thicknessDropDown ? this.thicknessDropDown.destroy() : null;\n        this.opacityDropDown ? this.opacityDropDown.destroy() : null;\n        this.textPropertiesDropDown ? this.textPropertiesDropDown.destroy() : null;\n        this.toolbar ? this.toolbar.destroy() : null;\n        // eslint-disable-next-line\n        var stampImage = document.getElementById(this.pdfViewer.element.id + '_stampElement');\n        if (stampImage) {\n            stampImage.parentElement.removeChild(stampImage);\n        }\n    };\n    AnnotationToolbar.prototype.destroyComponent = function () {\n        // eslint-disable-next-line\n        var componentElement = [this.highlightItem, this.underlineItem, this.strikethroughItem, this.lineElement, this.arrowElement,\n            this.rectangleElement, this.circleElement, this.polygonElement, this.calibrateDistance, this.calibrateArea, this.calibrateRadius,\n            this.calibrateVolume, this.calibratePerimeter, this.freeTextEditItem, this.stampElement, this.handWrittenSignatureItem, this.inkAnnotationItem,\n            this.fontFamilyElement, this.fontSizeElement, this.alignLeftElement, this.alignRightElement, this.alignCenterElement, this.alignJustifyElement,\n            this.boldElement, this.italicElement, this.fontStyleStrikethroughItem, this.fontStyleUnderlineItem, this.deleteItem, this.commentItem,\n            this.shapeDropDown ? this.shapeDropDown.activeElem[0] : null, this.calibrateDropDown ? this.calibrateDropDown.activeElem[0] : null, this.fontColorDropDown ? this.fontColorDropDown.activeElem[0] : null, this.textAlignDropDown ? this.textAlignDropDown.activeElem[0] : null,\n            this.colorDropDown ? this.colorDropDown.activeElem[0] : null, this.strokeDropDown ? this.strokeDropDown.activeElem[0] : null, this.thicknessDropDown ? this.thicknessDropDown.activeElem[0] : null, this.opacityDropDown ? this.opacityDropDown.activeElem[0] : null, this.textPropertiesDropDown ? this.textPropertiesDropDown.activeElem[0] : null\n        ];\n        for (var i = 0; i < componentElement.length; i++) {\n            if (componentElement[i]) {\n                this.destroyDependentComponent(componentElement[i]);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.destroyDependentComponent = function (component) {\n        if (component.ej2_instances) {\n            for (var i = component.ej2_instances.length - 1; i >= 0; i--) {\n                component.ej2_instances[i].destroy();\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getElementHeight = function (element) {\n        try {\n            return element.getBoundingClientRect().height;\n        }\n        catch (error) {\n            return 0;\n        }\n    };\n    AnnotationToolbar.prototype.updateViewerHeight = function (viewerHeight, toolbarHeight) {\n        return this.getElementHeight(this.pdfViewer.element) - toolbarHeight;\n    };\n    AnnotationToolbar.prototype.resetViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight + toolbarHeight;\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.afterAnnotationToolbarCreationInBlazor = function () {\n        this.HighlightElement = document.getElementById(this.pdfViewer.element.id + '_highLight').children[0];\n        this.UnderlineElement = document.getElementById(this.pdfViewer.element.id + '_underline').children[0];\n        this.StrikethroughElement = document.getElementById(this.pdfViewer.element.id + '_strikethrough').children[0];\n        this.InkAnnotationElement = document.getElementById(this.pdfViewer.element.id + '_annotation_ink').children[0];\n        this.InkAnnotationElement.classList.add('e-pv-tbar-btn');\n        this.FreeTextElement = document.getElementById(this.pdfViewer.element.id + '_annotation_freeTextEdit').children[0];\n        this.HighlightElement = this.addClassToToolbarInBlazor(this.HighlightElement, 'e-pv-highlight', '_highLight');\n        this.UnderlineElement = this.addClassToToolbarInBlazor(this.UnderlineElement, 'e-pv-underline', '_underline');\n        this.StrikethroughElement = this.addClassToToolbarInBlazor(this.StrikethroughElement, 'e-pv-strikethrough', '_strikethrough');\n    };\n    // eslint-disable-next-line\n    AnnotationToolbar.prototype.addClassToToolbarInBlazor = function (element, className, idString) {\n        element.classList.add(className);\n        element.classList.add('e-pv-tbar-btn');\n        if (element.childNodes.length > 0) {\n            var spanElement = element.childNodes[0];\n            if (spanElement && spanElement.classList) {\n                spanElement.id = this.pdfViewer.element.id + idString + 'Icon';\n                spanElement.classList.remove('e-icons');\n                spanElement.classList.remove('e-btn-icon');\n                if (this.pdfViewer.enableRtl) {\n                    spanElement.classList.add('e-right');\n                }\n            }\n        }\n        return element;\n    };\n    AnnotationToolbar.prototype.handleHighlightInBlazor = function () {\n        if (this.HighlightElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.HighlightElement);\n        }\n        else if (!this.HighlightElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.selectItem(this.HighlightElement);\n        }\n        if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n        }\n        if (this.UnderlineElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.UnderlineElement);\n        }\n    };\n    AnnotationToolbar.prototype.handleUnderlineInBlazor = function () {\n        if (this.UnderlineElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.UnderlineElement);\n        }\n        else if (!this.UnderlineElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.selectItem(this.UnderlineElement);\n        }\n        if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n        }\n        if (this.HighlightElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.HighlightElement);\n        }\n    };\n    AnnotationToolbar.prototype.handleStrikethroughInBlazor = function () {\n        if (this.StrikethroughElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.StrikethroughElement);\n        }\n        else if (!this.StrikethroughElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.selectItem(this.StrikethroughElement);\n        }\n        if (this.HighlightElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.HighlightElement);\n        }\n        if (this.UnderlineElement.classList.contains('e-pv-select')) {\n            this.primaryToolbar.deSelectItem(this.UnderlineElement);\n        }\n    };\n    AnnotationToolbar.prototype.AnnotationSliderOpened = function () {\n        if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations.length > 0 && this.pdfViewer.selectedItems.annotations[0]) {\n            if (this.pdfViewer.selectedItems.annotations[0].wrapper && this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]) {\n                var opacity = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n                var thickness = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n                this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateAnnotationSlider', opacity, thickness);\n            }\n        }\n    };\n    AnnotationToolbar.prototype.DropDownOpened = function (colorElement) {\n        if (colorElement && colorElement[0].element) {\n            var colorElementBounds = colorElement[0].element.getBoundingClientRect();\n            var sidebarElement = this.pdfViewerBase.navigationPane.sideBarToolbar;\n            var sideBarElementWidth = (sidebarElement) ? sidebarElement.getBoundingClientRect().width : 0;\n            if (colorElementBounds.left > this.pdfViewerBase.viewerContainer.clientWidth + colorElementBounds.width + sideBarElementWidth) {\n                colorElement[0].element.style.left = (colorElementBounds.left - (this.pdfViewerBase.viewerContainer.clientHeight / 2)) + 'px';\n            }\n        }\n    };\n    return AnnotationToolbar;\n}());\nexport { AnnotationToolbar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}