{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar PdfJsApi = require('pdfjs-dist');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nvar PdfJsApi__namespace = /*#__PURE__*/_interopNamespace(PdfJsApi);\n\nexports.AnnotationType = void 0;\n\n(function (AnnotationType) {\n  AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n  AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n  AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n  AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n  AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n  AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n  AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n  AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n  AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n  AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n  AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n  AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n  AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n  AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n  AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n  AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n  AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(exports.AnnotationType || (exports.AnnotationType = {}));\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nexports.TextDirection = void 0;\n\n(function (TextDirection) {\n  TextDirection[\"RightToLeft\"] = \"RTL\";\n  TextDirection[\"LeftToRight\"] = \"LTR\";\n})(exports.TextDirection || (exports.TextDirection = {}));\n\nvar ThemeContext = React__namespace.createContext({\n  currentTheme: 'light',\n  direction: exports.TextDirection.LeftToRight,\n  setCurrentTheme: function () {}\n});\n\nvar classNames = function (classes) {\n  var result = [];\n  Object.keys(classes).forEach(function (clazz) {\n    if (clazz && classes[clazz]) {\n      result.push(clazz);\n    }\n  });\n  return result.join(' ');\n};\n\nvar Button = function (_a) {\n  var children = _a.children,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__button': true,\n      'rpv-core__button--rtl': isRtl\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__namespace.useLayoutEffect : React__namespace.useEffect;\n\nvar useIntersectionObserver = function (props) {\n  var containerRef = React__namespace.useRef(null);\n  var once = props.once,\n      threshold = props.threshold,\n      onVisibilityChanged = props.onVisibilityChanged;\n  useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var intersectionTracker = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var isVisible = entry.isIntersecting;\n        var ratio = entry.intersectionRatio;\n        onVisibilityChanged({\n          isVisible: isVisible,\n          ratio: ratio\n        });\n\n        if (isVisible && once) {\n          intersectionTracker.unobserve(container);\n          intersectionTracker.disconnect();\n        }\n      });\n    }, {\n      threshold: threshold || 0\n    });\n    intersectionTracker.observe(container);\n    return function () {\n      intersectionTracker.unobserve(container);\n      intersectionTracker.disconnect();\n    };\n  }, []);\n  return containerRef;\n};\n\nvar LazyRender = function (_a) {\n  var attrs = _a.attrs,\n      children = _a.children,\n      testId = _a.testId;\n\n  var _b = React__namespace.useState(false),\n      visible = _b[0],\n      setVisible = _b[1];\n\n  var containerAttrs = testId ? __assign(__assign({}, attrs), {\n    'data-testid': testId\n  }) : attrs;\n\n  var handleVisibilityChanged = function (params) {\n    if (params.isVisible) {\n      setVisible(true);\n    }\n  };\n\n  var containerRef = useIntersectionObserver({\n    once: true,\n    onVisibilityChanged: handleVisibilityChanged\n  });\n  return React__namespace.createElement(\"div\", __assign({\n    ref: containerRef\n  }, containerAttrs), visible && children);\n};\n\nvar Menu = function (_a) {\n  var children = _a.children;\n  var containerRef = React__namespace.useRef();\n  var visibleMenuItemsRef = React__namespace.useRef([]);\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var handleKeyDown = function (e) {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    switch (e.key) {\n      case 'Tab':\n        e.preventDefault();\n        break;\n\n      case 'ArrowDown':\n        e.preventDefault();\n        moveToItem(function (_, currentIndex) {\n          return currentIndex + 1;\n        });\n        break;\n\n      case 'ArrowUp':\n        e.preventDefault();\n        moveToItem(function (_, currentIndex) {\n          return currentIndex - 1;\n        });\n        break;\n\n      case 'End':\n        e.preventDefault();\n        moveToItem(function (items, _) {\n          return items.length - 1;\n        });\n        break;\n\n      case 'Home':\n        e.preventDefault();\n        moveToItem(function (_, __) {\n          return 0;\n        });\n        break;\n    }\n  };\n\n  var moveToItem = function (getNextItem) {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var items = visibleMenuItemsRef.current;\n    var currentIndex = items.findIndex(function (item) {\n      return item.getAttribute('tabindex') === '0';\n    });\n    var targetIndex = Math.min(items.length - 1, Math.max(0, getNextItem(items, currentIndex)));\n\n    if (currentIndex >= 0 && currentIndex <= items.length - 1) {\n      items[currentIndex].setAttribute('tabindex', '-1');\n    }\n\n    items[targetIndex].setAttribute('tabindex', '0');\n    items[targetIndex].focus();\n  };\n\n  var findVisibleItems = function (container) {\n    var visibleItems = [];\n    container.querySelectorAll('.rpv-core__menu-item[role=\"menuitem\"]').forEach(function (item) {\n      if (item instanceof HTMLElement) {\n        var parent_1 = item.parentElement;\n\n        if (parent_1 === container) {\n          visibleItems.push(item);\n        } else {\n          if (window.getComputedStyle(parent_1).display !== 'none') {\n            visibleItems.push(item);\n          }\n        }\n      }\n    });\n    return visibleItems;\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var visibleItems = findVisibleItems(container);\n    visibleMenuItemsRef.current = visibleItems;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    document.addEventListener('keydown', handleKeyDown);\n    return function () {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    \"aria-orientation\": \"vertical\",\n    className: classNames({\n      'rpv-core__menu': true,\n      'rpv-core__menu--rtl': isRtl\n    }),\n    role: \"menu\",\n    tabIndex: 0\n  }, children);\n};\n\nvar MenuDivider = function () {\n  return React__namespace.createElement(\"div\", {\n    \"aria-orientation\": \"horizontal\",\n    className: \"rpv-core__menu-divider\",\n    role: \"separator\"\n  });\n};\n\nvar Icon = function (_a) {\n  var children = _a.children,\n      _b = _a.ignoreDirection,\n      ignoreDirection = _b === void 0 ? false : _b,\n      _c = _a.size,\n      size = _c === void 0 ? 24 : _c;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = !ignoreDirection && direction === exports.TextDirection.RightToLeft;\n  var width = \"\".concat(size || 24, \"px\");\n  return React__namespace.createElement(\"svg\", {\n    \"aria-hidden\": \"true\",\n    className: classNames({\n      'rpv-core__icon': true,\n      'rpv-core__icon--rtl': isRtl\n    }),\n    focusable: \"false\",\n    height: width,\n    viewBox: \"0 0 24 24\",\n    width: width\n  }, children);\n};\n\nvar CheckIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M23.5,0.499l-16.5,23l-6.5-6.5\"\n  }));\n};\n\nvar MenuItem = function (_a) {\n  var _b = _a.checked,\n      checked = _b === void 0 ? false : _b,\n      children = _a.children,\n      _c = _a.icon,\n      icon = _c === void 0 ? null : _c,\n      _d = _a.isDisabled,\n      isDisabled = _d === void 0 ? false : _d,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__menu-item': true,\n      'rpv-core__menu-item--disabled': isDisabled,\n      'rpv-core__menu-item--ltr': !isRtl,\n      'rpv-core__menu-item--rtl': isRtl\n    }),\n    role: \"menuitem\",\n    tabIndex: -1,\n    type: \"button\",\n    onClick: onClick\n  }, attrs), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-icon': true,\n      'rpv-core__menu-item-icon--ltr': !isRtl,\n      'rpv-core__menu-item-icon--rtl': isRtl\n    })\n  }, icon), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-label': true,\n      'rpv-core__menu-item-label--ltr': !isRtl,\n      'rpv-core__menu-item-label--rtl': isRtl\n    })\n  }, children), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-check': true,\n      'rpv-core__menu-item-check--ltr': !isRtl,\n      'rpv-core__menu-item-check--rtl': isRtl\n    })\n  }, checked && React__namespace.createElement(CheckIcon, null)));\n};\n\nvar MinimalButton = function (_a) {\n  var _b = _a.ariaLabel,\n      ariaLabel = _b === void 0 ? '' : _b,\n      _c = _a.ariaKeyShortcuts,\n      ariaKeyShortcuts = _c === void 0 ? '' : _c,\n      children = _a.children,\n      _d = _a.isDisabled,\n      isDisabled = _d === void 0 ? false : _d,\n      _e = _a.isSelected,\n      isSelected = _e === void 0 ? false : _e,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    \"aria-label\": ariaLabel\n  }, ariaKeyShortcuts && {\n    'aria-keyshortcuts': ariaKeyShortcuts\n  }, isDisabled && {\n    'aria-disabled': true\n  }, {\n    className: classNames({\n      'rpv-core__minimal-button': true,\n      'rpv-core__minimal-button--disabled': isDisabled,\n      'rpv-core__minimal-button--rtl': isRtl,\n      'rpv-core__minimal-button--selected': isSelected\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar PrimaryButton = function (_a) {\n  var children = _a.children,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__primary-button': true,\n      'rpv-core__primary-button--rtl': isRtl\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar ProgressBar = function (_a) {\n  var progress = _a.progress;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  return React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__progress-bar': true,\n      'rpv-core__progress-bar--rtl': isRtl\n    })\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__progress-bar-progress\",\n    style: {\n      width: \"\".concat(progress, \"%\")\n    }\n  }, progress, \"%\"));\n};\n\nvar Separator = function () {\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__separator\"\n  });\n};\n\nvar Spinner = function (_a) {\n  var _b = _a.size,\n      size = _b === void 0 ? '4rem' : _b,\n      testId = _a.testId;\n\n  var _c = React__namespace.useState(false),\n      visible = _c[0],\n      setVisible = _c[1];\n\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n\n  var handleVisibilityChanged = function (params) {\n    setVisible(params.isVisible);\n  };\n\n  var containerRef = useIntersectionObserver({\n    onVisibilityChanged: handleVisibilityChanged\n  });\n  return React__namespace.createElement(\"div\", __assign({}, attrs, {\n    className: classNames({\n      'rpv-core__spinner': true,\n      'rpv-core__spinner--animating': visible\n    }),\n    ref: containerRef,\n    style: {\n      height: size,\n      width: size\n    }\n  }));\n};\n\nvar Splitter = function (_a) {\n  var constrain = _a.constrain;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var resizerRef = React__namespace.useRef();\n  var leftSideRef = React__namespace.useRef();\n  var rightSideRef = React__namespace.useRef();\n  var xRef = React__namespace.useRef(0);\n  var yRef = React__namespace.useRef(0);\n  var leftWidthRef = React__namespace.useRef(0);\n  var resizerWidthRef = React__namespace.useRef(0);\n  var eventOptions = {\n    capture: true\n  };\n\n  var handleMouseMove = function (e) {\n    var resizerEle = resizerRef.current;\n    var leftSide = leftSideRef.current;\n    var rightSide = rightSideRef.current;\n\n    if (!resizerEle || !leftSide || !rightSide) {\n      return;\n    }\n\n    var resizerWidth = resizerWidthRef.current;\n    var dx = e.clientX - xRef.current;\n    var firstHalfSize = leftWidthRef.current + (isRtl ? -dx : dx);\n    var containerWidth = resizerEle.parentElement.getBoundingClientRect().width;\n    var firstHalfPercentage = firstHalfSize * 100 / containerWidth;\n    resizerEle.classList.add('rpv-core__splitter--resizing');\n\n    if (constrain) {\n      var secondHalfSize = containerWidth - firstHalfSize - resizerWidth;\n      var secondHalfPercentage = secondHalfSize * 100 / containerWidth;\n\n      if (!constrain({\n        firstHalfPercentage: firstHalfPercentage,\n        firstHalfSize: firstHalfSize,\n        secondHalfPercentage: secondHalfPercentage,\n        secondHalfSize: secondHalfSize\n      })) {\n        return;\n      }\n    }\n\n    leftSide.style.width = \"\".concat(firstHalfPercentage, \"%\");\n    document.body.classList.add('rpv-core__splitter-body--resizing');\n    leftSide.classList.add('rpv-core__splitter-sibling--resizing');\n    rightSide.classList.add('rpv-core__splitter-sibling--resizing');\n  };\n\n  var handleMouseUp = function (e) {\n    var resizerEle = resizerRef.current;\n    var leftSide = leftSideRef.current;\n    var rightSide = rightSideRef.current;\n\n    if (!resizerEle || !leftSide || !rightSide) {\n      return;\n    }\n\n    document.body.classList.remove('rpv-core__splitter-body--resizing');\n    resizerEle.classList.remove('rpv-core__splitter--resizing');\n    leftSide.classList.remove('rpv-core__splitter-sibling--resizing');\n    rightSide.classList.remove('rpv-core__splitter-sibling--resizing');\n    document.removeEventListener('mousemove', handleMouseMove, eventOptions);\n    document.removeEventListener('mouseup', handleMouseUp, eventOptions);\n  };\n\n  var handleMouseDown = function (e) {\n    var leftSide = leftSideRef.current;\n\n    if (!leftSide) {\n      return;\n    }\n\n    xRef.current = e.clientX;\n    yRef.current = e.clientY;\n    leftWidthRef.current = leftSide.getBoundingClientRect().width;\n    document.addEventListener('mousemove', handleMouseMove, eventOptions);\n    document.addEventListener('mouseup', handleMouseUp, eventOptions);\n  };\n\n  React__namespace.useEffect(function () {\n    var resizerEle = resizerRef.current;\n\n    if (!resizerEle) {\n      return;\n    }\n\n    resizerWidthRef.current = resizerEle.getBoundingClientRect().width;\n    leftSideRef.current = resizerEle.previousElementSibling;\n    rightSideRef.current = resizerEle.nextElementSibling;\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: resizerRef,\n    className: \"rpv-core__splitter\",\n    onMouseDown: handleMouseDown\n  });\n};\n\nvar TextBox = function (_a) {\n  var _b = _a.ariaLabel,\n      ariaLabel = _b === void 0 ? '' : _b,\n      _c = _a.autoFocus,\n      autoFocus = _c === void 0 ? false : _c,\n      _d = _a.placeholder,\n      placeholder = _d === void 0 ? '' : _d,\n      testId = _a.testId,\n      _e = _a.type,\n      type = _e === void 0 ? 'text' : _e,\n      _f = _a.value,\n      value = _f === void 0 ? '' : _f,\n      onChange = _a.onChange,\n      _g = _a.onKeyDown,\n      onKeyDown = _g === void 0 ? function () {} : _g;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var textboxRef = React__namespace.useRef();\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = {\n    ref: textboxRef,\n    'data-testid': '',\n    'aria-label': ariaLabel,\n    className: classNames({\n      'rpv-core__textbox': true,\n      'rpv-core__textbox--rtl': isRtl\n    }),\n    placeholder: placeholder,\n    value: value,\n    onChange: function (e) {\n      return onChange(e.target.value);\n    },\n    onKeyDown: onKeyDown\n  };\n\n  if (testId) {\n    attrs['data-testid'] = testId;\n  }\n\n  useIsomorphicLayoutEffect(function () {\n    if (autoFocus) {\n      var textboxEle = textboxRef.current;\n\n      if (textboxEle) {\n        var x = window.scrollX;\n        var y = window.scrollY;\n        textboxEle.focus();\n        window.scrollTo(x, y);\n      }\n    }\n  }, []);\n  return type === 'text' ? React__namespace.createElement(\"input\", __assign({\n    type: \"text\"\n  }, attrs)) : React__namespace.createElement(\"input\", __assign({\n    type: \"password\"\n  }, attrs));\n};\n\nvar useIsMounted = function () {\n  var isMountedRef = React__namespace.useRef(false);\n  React__namespace.useEffect(function () {\n    isMountedRef.current = true;\n    return function () {\n      isMountedRef.current = false;\n    };\n  }, []);\n  return isMountedRef;\n};\n\nvar PageRenderStatus;\n\n(function (PageRenderStatus) {\n  PageRenderStatus[\"NotRenderedYet\"] = \"NotRenderedYet\";\n  PageRenderStatus[\"Rendering\"] = \"Rendering\";\n  PageRenderStatus[\"Rendered\"] = \"Rendered\";\n})(PageRenderStatus || (PageRenderStatus = {}));\n\nvar OUT_OF_RANGE_VISIBILITY = -9999;\n\nvar useRenderQueue = function (_a) {\n  var doc = _a.doc;\n  var numPages = doc.numPages;\n  var docId = doc.loadingTask.docId;\n  var initialPageVisibilities = React__namespace.useMemo(function () {\n    return Array(numPages).fill(null).map(function (_, pageIndex) {\n      return {\n        pageIndex: pageIndex,\n        renderStatus: PageRenderStatus.NotRenderedYet,\n        visibility: OUT_OF_RANGE_VISIBILITY\n      };\n    });\n  }, [docId]);\n  var latestRef = React__namespace.useRef({\n    currentRenderingPage: -1,\n    startRange: 0,\n    endRange: numPages - 1,\n    visibilities: initialPageVisibilities\n  });\n\n  var markNotRendered = function () {\n    for (var i = 0; i < numPages; i++) {\n      latestRef.current.visibilities[i].renderStatus = PageRenderStatus.NotRenderedYet;\n    }\n  };\n\n  var markRendered = function (pageIndex) {\n    latestRef.current.visibilities[pageIndex].renderStatus = PageRenderStatus.Rendered;\n  };\n\n  var markRendering = function (pageIndex) {\n    if (latestRef.current.currentRenderingPage !== -1 && latestRef.current.currentRenderingPage !== pageIndex && latestRef.current.visibilities[latestRef.current.currentRenderingPage].renderStatus === PageRenderStatus.Rendering) {\n      latestRef.current.visibilities[latestRef.current.currentRenderingPage].renderStatus = PageRenderStatus.NotRenderedYet;\n    }\n\n    latestRef.current.visibilities[pageIndex].renderStatus = PageRenderStatus.Rendering;\n    latestRef.current.currentRenderingPage = pageIndex;\n  };\n\n  var setRange = function (startIndex, endIndex) {\n    latestRef.current.startRange = startIndex;\n    latestRef.current.endRange = endIndex;\n\n    for (var i = 0; i < numPages; i++) {\n      if (i < startIndex || i > endIndex) {\n        latestRef.current.visibilities[i].visibility = OUT_OF_RANGE_VISIBILITY;\n        latestRef.current.visibilities[i].renderStatus = PageRenderStatus.NotRenderedYet;\n      }\n    }\n  };\n\n  var setOutOfRange = function (pageIndex) {\n    setVisibility(pageIndex, OUT_OF_RANGE_VISIBILITY);\n  };\n\n  var setVisibility = function (pageIndex, visibility) {\n    latestRef.current.visibilities[pageIndex].visibility = visibility;\n  };\n\n  var getHighestPriorityPage = function () {\n    var visiblePages = latestRef.current.visibilities.slice(latestRef.current.startRange, latestRef.current.endRange + 1).filter(function (item) {\n      return item.visibility > OUT_OF_RANGE_VISIBILITY;\n    });\n\n    if (!visiblePages.length) {\n      return -1;\n    }\n\n    var firstVisiblePage = visiblePages[0].pageIndex;\n    var lastVisiblePage = visiblePages[visiblePages.length - 1].pageIndex;\n    var numVisiblePages = visiblePages.length;\n\n    for (var i = 0; i < numVisiblePages; i++) {\n      if (visiblePages[i].renderStatus === PageRenderStatus.Rendering) {\n        return -1;\n      }\n\n      if (visiblePages[i].renderStatus === PageRenderStatus.NotRenderedYet) {\n        return visiblePages[i].pageIndex;\n      }\n    }\n\n    if (lastVisiblePage + 1 < numPages && latestRef.current.visibilities[lastVisiblePage + 1].renderStatus !== PageRenderStatus.Rendered) {\n      return lastVisiblePage + 1;\n    } else if (firstVisiblePage - 1 >= 0 && latestRef.current.visibilities[firstVisiblePage - 1].renderStatus !== PageRenderStatus.Rendered) {\n      return firstVisiblePage - 1;\n    }\n\n    return -1;\n  };\n\n  var isInRange = function (pageIndex) {\n    return pageIndex >= latestRef.current.startRange && pageIndex <= latestRef.current.endRange;\n  };\n\n  return {\n    getHighestPriorityPage: getHighestPriorityPage,\n    isInRange: isInRange,\n    markNotRendered: markNotRendered,\n    markRendered: markRendered,\n    markRendering: markRendering,\n    setOutOfRange: setOutOfRange,\n    setRange: setRange,\n    setVisibility: setVisibility\n  };\n};\n\nvar core = {\n  askingPassword: {\n    requirePasswordToOpen: \"This document requires a password to open\",\n    submit: \"Submit\"\n  },\n  wrongPassword: {\n    tryAgain: \"The password is wrong. Please try again\"\n  },\n  pageLabel: \"Page {{pageIndex}}\"\n};\nvar enUs = {\n  core: core\n};\nvar DefaultLocalization = enUs;\nvar LocalizationContext = React__namespace.createContext({\n  l10n: DefaultLocalization,\n  setL10n: function () {}\n});\nvar id = 0;\n\nvar uniqueId = function () {\n  return id++;\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n  var clickHandler = function (e) {\n    var target = targetRef.current;\n\n    if (target && !target.contains(e.target)) {\n      onClickOutside();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    if (!closeOnClickOutside) {\n      return;\n    }\n\n    var eventOptions = {\n      capture: true\n    };\n    document.addEventListener('click', clickHandler, eventOptions);\n    return function () {\n      document.removeEventListener('click', clickHandler, eventOptions);\n    };\n  }, []);\n};\n\nvar useEscape = function (handler) {\n  var keyUpHandler = function (e) {\n    if (e.key === 'Escape') {\n      handler();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    document.addEventListener('keyup', keyUpHandler);\n    return function () {\n      document.removeEventListener('keyup', keyUpHandler);\n    };\n  }, []);\n};\n\nvar useLockScroll = function () {\n  React__namespace.useEffect(function () {\n    var originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = 'hidden';\n    return function () {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n};\n\nvar ModalBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      onToggle = _a.onToggle;\n  var contentRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  useLockScroll();\n  useEscape(function () {\n    if (contentRef.current && closeOnEscape) {\n      onToggle();\n    }\n  });\n  useClickOutside(closeOnClickOutside, contentRef, onToggle);\n  useIsomorphicLayoutEffect(function () {\n    var contentEle = contentRef.current;\n\n    if (!contentEle) {\n      return;\n    }\n\n    var maxHeight = document.body.clientHeight * 0.75;\n\n    if (contentEle.getBoundingClientRect().height >= maxHeight) {\n      contentEle.style.overflow = 'auto';\n      contentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    \"aria-modal\": \"true\",\n    className: classNames({\n      'rpv-core__modal-body': true,\n      'rpv-core__modal-body--rtl': isRtl\n    }),\n    id: \"rpv-core__modal-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"dialog\",\n    tabIndex: -1\n  }, children);\n};\n\nvar ModalOverlay = function (_a) {\n  var children = _a.children;\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__modal-overlay\"\n  }, children);\n};\n\nexports.ToggleStatus = void 0;\n\n(function (ToggleStatus) {\n  ToggleStatus[\"Close\"] = \"Close\";\n  ToggleStatus[\"Open\"] = \"Open\";\n  ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(exports.ToggleStatus || (exports.ToggleStatus = {}));\n\nvar useToggle = function (isOpened) {\n  var _a = React__namespace.useState(isOpened),\n      opened = _a[0],\n      setOpened = _a[1];\n\n  var toggle = function (status) {\n    switch (status) {\n      case exports.ToggleStatus.Close:\n        setOpened(false);\n        break;\n\n      case exports.ToggleStatus.Open:\n        setOpened(true);\n        break;\n\n      case exports.ToggleStatus.Toggle:\n      default:\n        setOpened(function (isOpened) {\n          return !isOpened;\n        });\n        break;\n    }\n  };\n\n  return {\n    opened: opened,\n    toggle: toggle\n  };\n};\n\nvar Portal = function (_a) {\n  var content = _a.content,\n      _b = _a.isOpened,\n      isOpened = _b === void 0 ? false : _b,\n      target = _a.target;\n\n  var _c = useToggle(isOpened),\n      opened = _c.opened,\n      toggle = _c.toggle;\n\n  return React__namespace.createElement(React__namespace.Fragment, null, target && target(toggle, opened), opened && content(toggle));\n};\n\nvar Modal = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      _b = _a.isOpened,\n      isOpened = _b === void 0 ? false : _b,\n      target = _a.target;\n  var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n\n  var renderTarget = function (toggle, opened) {\n    return React__namespace.createElement(\"div\", {\n      \"aria-expanded\": opened ? 'true' : 'false',\n      \"aria-haspopup\": \"dialog\",\n      \"aria-controls\": \"rpv-core__modal-body-\".concat(controlsSuffix)\n    }, target(toggle, opened));\n  };\n\n  var renderContent = function (toggle) {\n    return React__namespace.createElement(ModalOverlay, null, React__namespace.createElement(ModalBody, {\n      ariaControlsSuffix: controlsSuffix,\n      closeOnClickOutside: closeOnClickOutside,\n      closeOnEscape: closeOnEscape,\n      onToggle: toggle\n    }, content(toggle)));\n  };\n\n  return React__namespace.createElement(Portal, {\n    target: target ? renderTarget : null,\n    content: renderContent,\n    isOpened: isOpened\n  });\n};\n\nexports.Position = void 0;\n\n(function (Position) {\n  Position[\"TopLeft\"] = \"TOP_LEFT\";\n  Position[\"TopCenter\"] = \"TOP_CENTER\";\n  Position[\"TopRight\"] = \"TOP_RIGHT\";\n  Position[\"RightTop\"] = \"RIGHT_TOP\";\n  Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n  Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n  Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n  Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n  Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n  Position[\"LeftTop\"] = \"LEFT_TOP\";\n  Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n  Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(exports.Position || (exports.Position = {}));\n\nvar calculatePosition = function (content, target, position, offset) {\n  var targetRect = target.getBoundingClientRect();\n  var contentRect = content.getBoundingClientRect();\n  var height = contentRect.height,\n      width = contentRect.width;\n  var top = 0;\n  var left = 0;\n\n  switch (position) {\n    case exports.Position.TopLeft:\n      top = targetRect.top - height;\n      left = targetRect.left;\n      break;\n\n    case exports.Position.TopCenter:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case exports.Position.TopRight:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case exports.Position.RightTop:\n      top = targetRect.top;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.RightCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.RightBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.BottomLeft:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left;\n      break;\n\n    case exports.Position.BottomCenter:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case exports.Position.BottomRight:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case exports.Position.LeftTop:\n      top = targetRect.top;\n      left = targetRect.left - width;\n      break;\n\n    case exports.Position.LeftCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left - width;\n      break;\n\n    case exports.Position.LeftBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left - width;\n      break;\n  }\n\n  return {\n    left: left + (offset.left || 0),\n    top: top + (offset.top || 0)\n  };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n  useIsomorphicLayoutEffect(function () {\n    var targetEle = targetRef.current;\n    var contentEle = contentRef.current;\n    var anchorEle = anchorRef.current;\n\n    if (!contentEle || !targetEle || !anchorEle) {\n      return;\n    }\n\n    var anchorRect = anchorEle.getBoundingClientRect();\n\n    var _a = calculatePosition(contentEle, targetEle, position, offset),\n        top = _a.top,\n        left = _a.left;\n\n    contentEle.style.top = \"\".concat(top - anchorRect.top, \"px\");\n    contentEle.style.left = \"\".concat(left - anchorRect.left, \"px\");\n  }, []);\n};\n\nvar Arrow = function (_a) {\n  var _b;\n\n  var customClassName = _a.customClassName,\n      position = _a.position;\n  return React__namespace.createElement(\"div\", {\n    className: classNames((_b = {\n      'rpv-core__arrow': true,\n      'rpv-core__arrow--tl': position === exports.Position.TopLeft,\n      'rpv-core__arrow--tc': position === exports.Position.TopCenter,\n      'rpv-core__arrow--tr': position === exports.Position.TopRight,\n      'rpv-core__arrow--rt': position === exports.Position.RightTop,\n      'rpv-core__arrow--rc': position === exports.Position.RightCenter,\n      'rpv-core__arrow--rb': position === exports.Position.RightBottom,\n      'rpv-core__arrow--bl': position === exports.Position.BottomLeft,\n      'rpv-core__arrow--bc': position === exports.Position.BottomCenter,\n      'rpv-core__arrow--br': position === exports.Position.BottomRight,\n      'rpv-core__arrow--lt': position === exports.Position.LeftTop,\n      'rpv-core__arrow--lc': position === exports.Position.LeftCenter,\n      'rpv-core__arrow--lb': position === exports.Position.LeftBottom\n    }, _b[\"\".concat(customClassName)] = customClassName !== '', _b))\n  });\n};\n\nvar PopoverBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef,\n      onClose = _a.onClose;\n  var contentRef = React__namespace.useRef();\n  var innerRef = React__namespace.useRef();\n  var anchorRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  useClickOutside(closeOnClickOutside, contentRef, onClose);\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  useIsomorphicLayoutEffect(function () {\n    var innerContentEle = innerRef.current;\n\n    if (!innerContentEle) {\n      return;\n    }\n\n    var maxHeight = document.body.clientHeight * 0.75;\n\n    if (innerContentEle.getBoundingClientRect().height >= maxHeight) {\n      innerContentEle.style.overflow = 'auto';\n      innerContentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n    }\n  }, []);\n  var innerId = \"rpv-core__popover-body-inner-\".concat(ariaControlsSuffix);\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__namespace.createElement(\"div\", {\n    \"aria-describedby\": innerId,\n    className: classNames({\n      'rpv-core__popover-body': true,\n      'rpv-core__popover-body--rtl': isRtl\n    }),\n    id: \"rpv-core__popover-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"dialog\",\n    tabIndex: -1\n  }, React__namespace.createElement(Arrow, {\n    customClassName: \"rpv-core__popover-body-arrow\",\n    position: position\n  }), React__namespace.createElement(\"div\", {\n    id: innerId,\n    ref: innerRef\n  }, children)));\n};\n\nvar PopoverOverlay = function (_a) {\n  var closeOnEscape = _a.closeOnEscape,\n      onClose = _a.onClose;\n  var containerRef = React__namespace.useRef();\n  useEscape(function () {\n    if (containerRef.current && closeOnEscape) {\n      onClose();\n    }\n  });\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__popover-overlay\",\n    ref: containerRef\n  });\n};\n\nvar Popover = function (_a) {\n  var _b = _a.ariaHasPopup,\n      ariaHasPopup = _b === void 0 ? 'dialog' : _b,\n      ariaControlsSuffix = _a.ariaControlsSuffix,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      _c = _a.lockScroll,\n      lockScroll = _c === void 0 ? true : _c,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n\n  var _d = useToggle(false),\n      opened = _d.opened,\n      toggle = _d.toggle;\n\n  var targetRef = React__namespace.useRef();\n  var controlsSuffix = React__namespace.useMemo(function () {\n    return ariaControlsSuffix || \"\".concat(uniqueId());\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: targetRef,\n    \"aria-expanded\": opened ? 'true' : 'false',\n    \"aria-haspopup\": ariaHasPopup,\n    \"aria-controls\": \"rpv-core__popver-body-\".concat(controlsSuffix)\n  }, target(toggle, opened), opened && React__namespace.createElement(React__namespace.Fragment, null, lockScroll && React__namespace.createElement(PopoverOverlay, {\n    closeOnEscape: closeOnEscape,\n    onClose: toggle\n  }), React__namespace.createElement(PopoverBody, {\n    ariaControlsSuffix: controlsSuffix,\n    closeOnClickOutside: closeOnClickOutside,\n    offset: offset,\n    position: position,\n    targetRef: targetRef,\n    onClose: toggle\n  }, content(toggle))));\n};\n\nvar TooltipBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      contentRef = _a.contentRef,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef;\n  var anchorRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__tooltip-body': true,\n      'rpv-core__tooltip-body--rtl': isRtl\n    }),\n    id: \"rpv-core__tooltip-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"tooltip\"\n  }, React__namespace.createElement(Arrow, {\n    customClassName: \"rpv-core__tooltip-body-arrow\",\n    position: position\n  }), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__tooltip-body-content\"\n  }, children)));\n};\n\nvar Tooltip = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n\n  var _b = useToggle(false),\n      opened = _b.opened,\n      toggle = _b.toggle;\n\n  var targetRef = React__namespace.useRef();\n  var contentRef = React__namespace.useRef();\n  var controlsSuffix = React__namespace.useMemo(function () {\n    return ariaControlsSuffix || \"\".concat(uniqueId());\n  }, []);\n  useEscape(function () {\n    if (targetRef.current && document.activeElement && targetRef.current.contains(document.activeElement)) {\n      close();\n    }\n  });\n\n  var open = function () {\n    toggle(exports.ToggleStatus.Open);\n  };\n\n  var close = function () {\n    toggle(exports.ToggleStatus.Close);\n  };\n\n  var onBlur = function (e) {\n    var shouldHideTooltip = e.relatedTarget instanceof HTMLElement && e.currentTarget.parentElement && e.currentTarget.parentElement.contains(e.relatedTarget);\n\n    if (shouldHideTooltip) {\n      if (contentRef.current) {\n        contentRef.current.style.display = 'none';\n      }\n    } else {\n      close();\n    }\n  };\n\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: targetRef,\n    \"aria-describedby\": \"rpv-core__tooltip-body-\".concat(controlsSuffix),\n    onBlur: onBlur,\n    onFocus: open,\n    onMouseEnter: open,\n    onMouseLeave: close\n  }, target), opened && React__namespace.createElement(TooltipBody, {\n    ariaControlsSuffix: controlsSuffix,\n    contentRef: contentRef,\n    offset: offset,\n    position: position,\n    targetRef: targetRef\n  }, content()));\n};\n\nfunction createStore(initialState) {\n  var state = initialState || {};\n  var listeners = {};\n  return {\n    subscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).concat(handler);\n    },\n    unsubscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).filter(function (f) {\n        return f !== handler;\n      });\n    },\n    update: function (key, data) {\n      var _a;\n\n      state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n      (listeners[key] || []).forEach(function (handler) {\n        return handler(state[key]);\n      });\n    },\n    get: function (key) {\n      return state[key];\n    }\n  };\n}\n\nexports.LayerRenderStatus = void 0;\n\n(function (LayerRenderStatus) {\n  LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n  LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(exports.LayerRenderStatus || (exports.LayerRenderStatus = {}));\n\nexports.PageMode = void 0;\n\n(function (PageMode) {\n  PageMode[\"Attachments\"] = \"UseAttachments\";\n  PageMode[\"Bookmarks\"] = \"UseOutlines\";\n  PageMode[\"ContentGroup\"] = \"UseOC\";\n  PageMode[\"Default\"] = \"UserNone\";\n  PageMode[\"FullScreen\"] = \"FullScreen\";\n  PageMode[\"Thumbnails\"] = \"UseThumbs\";\n})(exports.PageMode || (exports.PageMode = {}));\n\nexports.RotateDirection = void 0;\n\n(function (RotateDirection) {\n  RotateDirection[\"Backward\"] = \"Backward\";\n  RotateDirection[\"Forward\"] = \"Forward\";\n})(exports.RotateDirection || (exports.RotateDirection = {}));\n\nexports.ScrollMode = void 0;\n\n(function (ScrollMode) {\n  ScrollMode[\"Horizontal\"] = \"Horizontal\";\n  ScrollMode[\"Vertical\"] = \"Vertical\";\n  ScrollMode[\"Wrapped\"] = \"Wrapped\";\n})(exports.ScrollMode || (exports.ScrollMode = {}));\n\nexports.SpecialZoomLevel = void 0;\n\n(function (SpecialZoomLevel) {\n  SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n  SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n  SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(exports.SpecialZoomLevel || (exports.SpecialZoomLevel = {}));\n\nvar isMac = function () {\n  return typeof window !== 'undefined' ? /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) : false;\n};\n\nvar normalizeDestination = function (pageIndex, destArray) {\n  switch (destArray[1].name) {\n    case 'XYZ':\n      return {\n        bottomOffset: destArray[3],\n        leftOffset: destArray[2] || 0,\n        pageIndex: pageIndex,\n        scaleTo: destArray[4]\n      };\n\n    case 'Fit':\n    case 'FitB':\n      return {\n        bottomOffset: 0,\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: exports.SpecialZoomLevel.PageFit\n      };\n\n    case 'FitH':\n    case 'FitBH':\n      return {\n        bottomOffset: destArray[2],\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: exports.SpecialZoomLevel.PageWidth\n      };\n\n    default:\n      return {\n        bottomOffset: 0,\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: 1\n      };\n  }\n};\n\nvar pageOutlinesMap = new Map();\nvar pagesMap = new Map();\n\nvar generateRefKey = function (doc, outline) {\n  return \"\".concat(doc.loadingTask.docId, \"___\").concat(outline.num, \"R\").concat(outline.gen === 0 ? '' : outline.gen);\n};\n\nvar getPageIndex = function (doc, outline) {\n  return pageOutlinesMap.get(generateRefKey(doc, outline)) || null;\n};\n\nvar cacheOutlineRef = function (doc, outline, pageIndex) {\n  pageOutlinesMap.set(generateRefKey(doc, outline), pageIndex);\n};\n\nvar clearPagesCache = function () {\n  pageOutlinesMap.clear();\n  pagesMap.clear();\n};\n\nvar getPage = function (doc, pageIndex) {\n  if (!doc) {\n    return Promise.reject('The document is not loaded yet');\n  }\n\n  var pageKey = \"\".concat(doc.loadingTask.docId, \"___\").concat(pageIndex);\n  var page = pagesMap.get(pageKey);\n\n  if (page) {\n    return Promise.resolve(page);\n  }\n\n  return new Promise(function (resolve, _) {\n    doc.getPage(pageIndex + 1).then(function (page) {\n      pagesMap.set(pageKey, page);\n\n      if (page.ref) {\n        cacheOutlineRef(doc, page.ref, pageIndex);\n      }\n\n      resolve(page);\n    });\n  });\n};\n\nvar getDestination = function (doc, dest) {\n  return new Promise(function (res) {\n    new Promise(function (resolve) {\n      if (typeof dest === 'string') {\n        doc.getDestination(dest).then(function (destArray) {\n          resolve(destArray);\n        });\n      } else {\n        resolve(dest);\n      }\n    }).then(function (destArray) {\n      if ('object' === typeof destArray[0] && destArray[0] !== null) {\n        var outlineRef_1 = destArray[0];\n        var pageIndex = getPageIndex(doc, outlineRef_1);\n\n        if (pageIndex === null) {\n          doc.getPageIndex(outlineRef_1).then(function (pageIndex) {\n            cacheOutlineRef(doc, outlineRef_1, pageIndex);\n            getDestination(doc, dest).then(function (result) {\n              return res(result);\n            });\n          });\n        } else {\n          res(normalizeDestination(pageIndex, destArray));\n        }\n      } else {\n        var target = normalizeDestination(destArray[0], destArray);\n        res(target);\n      }\n    });\n  });\n};\n\nfunction usePrevious(value) {\n  var ref = React__namespace.useRef(value);\n  React__namespace.useEffect(function () {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\nvar useDebounceCallback = function (callback, wait) {\n  var timeout = React__namespace.useRef();\n\n  var cleanup = function () {\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    return function () {\n      return cleanup();\n    };\n  }, []);\n  return React__namespace.useCallback(function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    cleanup();\n    timeout.current = setTimeout(function () {\n      callback.apply(void 0, args);\n    }, wait);\n  }, [callback, wait]);\n};\n\nvar useTrackResize = function (_a) {\n  var targetRef = _a.targetRef,\n      onResize = _a.onResize;\n  useIsomorphicLayoutEffect(function () {\n    var io = new ResizeObserver(function (entries) {\n      entries.forEach(function (entry) {\n        onResize(entry.target);\n      });\n    });\n    var container = targetRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    io.observe(container);\n    return function () {\n      io.unobserve(container);\n    };\n  }, []);\n};\n\nvar clamp = function (min, max, value) {\n  return Math.max(min, Math.min(value, max));\n};\n\nvar findNearest = function (low, high, value, getItemValue) {\n  while (low <= high) {\n    var middle = (low + high) / 2 | 0;\n    var currentValue = getItemValue(middle);\n\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n\n  return low > 0 ? low - 1 : 0;\n};\n\nvar rectReducer = function (state, action) {\n  var rect = action.rect;\n  return state.height !== rect.height || state.width !== rect.width ? rect : state;\n};\n\nvar useMeasureRect = function (_a) {\n  var elementRef = _a.elementRef;\n\n  var _b = React__namespace.useState(elementRef.current),\n      element = _b[0],\n      setElement = _b[1];\n\n  var initializedRectRef = React__namespace.useRef(false);\n\n  var _c = React__namespace.useReducer(rectReducer, {\n    height: 0,\n    width: 0\n  }),\n      rect = _c[0],\n      dispatch = _c[1];\n\n  useIsomorphicLayoutEffect(function () {\n    if (elementRef.current !== element) {\n      setElement(elementRef.current);\n    }\n  });\n  useIsomorphicLayoutEffect(function () {\n    if (element && !initializedRectRef.current) {\n      initializedRectRef.current = true;\n\n      var _a = element.getBoundingClientRect(),\n          height = _a.height,\n          width = _a.width;\n\n      dispatch({\n        rect: {\n          height: height,\n          width: width\n        }\n      });\n    }\n  }, [element]);\n  React__namespace.useEffect(function () {\n    if (!element) {\n      return;\n    }\n\n    var tracker = new ResizeObserver(function (entries, __) {\n      entries.forEach(function (entry) {\n        if (entry.target === element) {\n          var _a = entry.contentRect,\n              height = _a.height,\n              width = _a.width;\n          dispatch({\n            rect: {\n              height: height,\n              width: width\n            }\n          });\n        }\n      });\n    });\n    tracker.observe(element);\n    return function () {\n      tracker.unobserve(element);\n    };\n  }, [element]);\n  return rect;\n};\n\nvar easeOutQuart = function (t) {\n  return 1 - Math.pow(1 - t, 4);\n};\n\nvar smoothScroll = function (ele, scrollMode, targetPosition, duration, easing, onReachTarget) {\n  if (easing === void 0) {\n    easing = function (t) {\n      return t;\n    };\n  }\n\n  if (onReachTarget === void 0) {\n    onReachTarget = function () {};\n  }\n\n  var start = 0;\n\n  switch (scrollMode) {\n    case exports.ScrollMode.Horizontal:\n      start = ele.scrollLeft;\n\n    case exports.ScrollMode.Vertical:\n    default:\n      start = ele.scrollTop;\n      break;\n  }\n\n  var startTime = -1;\n  var requestId;\n  var offset = start - targetPosition;\n\n  if (offset === 0) {\n    return;\n  }\n\n  var loop = function (currentTime) {\n    if (startTime === -1) {\n      startTime = currentTime;\n    }\n\n    var time = currentTime - startTime;\n    var percent = Math.min(time / duration, 1);\n    var easedPercent = easing(percent);\n    var updatePosition = start - offset * easedPercent;\n\n    switch (scrollMode) {\n      case exports.ScrollMode.Horizontal:\n        ele.scrollLeft = updatePosition;\n\n      case exports.ScrollMode.Vertical:\n      default:\n        ele.scrollTop = updatePosition;\n        break;\n    }\n\n    if (updatePosition === targetPosition) {\n      onReachTarget();\n    }\n\n    if (time < duration) {\n      requestId = window.requestAnimationFrame(loop);\n    } else {\n      window.cancelAnimationFrame(requestId);\n    }\n  };\n\n  requestId = window.requestAnimationFrame(loop);\n};\n\nvar useRafState = function (initialState) {\n  var isMounted = useIsMounted();\n  var rafRef = React__namespace.useRef(0);\n\n  var _a = React__namespace.useState(initialState),\n      state = _a[0],\n      setState = _a[1];\n\n  var setRafState = React__namespace.useCallback(function (value) {\n    cancelAnimationFrame(rafRef.current);\n    rafRef.current = requestAnimationFrame(function () {\n      isMounted.current && setState(value);\n    });\n  }, []);\n  React__namespace.useEffect(function () {\n    return function () {\n      cancelAnimationFrame(rafRef.current);\n    };\n  }, []);\n  return [state, setRafState];\n};\n\nvar ZERO_OFFSET$1 = {\n  left: 0,\n  top: 0\n};\nvar SCROLL_EVENT_OPTIONS = {\n  capture: false,\n  passive: true\n};\nvar SCROLL_DURATION = 400;\n\nvar useScroll = function (_a) {\n  var elementRef = _a.elementRef,\n      isRtl = _a.isRtl,\n      scrollMode = _a.scrollMode,\n      onSmoothScroll = _a.onSmoothScroll;\n\n  var _b = useRafState(ZERO_OFFSET$1),\n      scrollOffset = _b[0],\n      setScrollOffset = _b[1];\n\n  var _c = React__namespace.useState(elementRef.current),\n      element = _c[0],\n      setElement = _c[1];\n\n  var factor = isRtl ? -1 : 1;\n  var latestRef = React__namespace.useRef(scrollMode);\n  latestRef.current = scrollMode;\n  var handleSmoothScrollingComplete = React__namespace.useCallback(function () {\n    return onSmoothScroll(false);\n  }, []);\n  var handleScroll = React__namespace.useCallback(function () {\n    if (!element) {\n      return;\n    }\n\n    switch (latestRef.current) {\n      case exports.ScrollMode.Horizontal:\n        setScrollOffset({\n          left: factor * element.scrollLeft,\n          top: 0\n        });\n        break;\n\n      case exports.ScrollMode.Vertical:\n      default:\n        setScrollOffset({\n          left: 0,\n          top: element.scrollTop\n        });\n        break;\n    }\n  }, [element]);\n  useIsomorphicLayoutEffect(function () {\n    setElement(elementRef.current);\n  });\n  useIsomorphicLayoutEffect(function () {\n    if (!element) {\n      return;\n    }\n\n    element.addEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\n    return function () {\n      element.removeEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\n    };\n  }, [element]);\n  var scrollTo = React__namespace.useCallback(function (targetPosition, withSmoothScroll) {\n    var ele = elementRef.current;\n\n    if (!ele) {\n      return;\n    }\n\n    var updatePosition = 0;\n    var currentScrollMode = exports.ScrollMode.Vertical;\n\n    switch (latestRef.current) {\n      case exports.ScrollMode.Horizontal:\n        updatePosition = factor * targetPosition.left;\n        currentScrollMode = exports.ScrollMode.Horizontal;\n        break;\n\n      case exports.ScrollMode.Vertical:\n      default:\n        updatePosition = targetPosition.top;\n        currentScrollMode = exports.ScrollMode.Vertical;\n        break;\n    }\n\n    if (withSmoothScroll) {\n      onSmoothScroll(true);\n      smoothScroll(ele, currentScrollMode, updatePosition, SCROLL_DURATION, easeOutQuart, handleSmoothScrollingComplete);\n    } else {\n      switch (latestRef.current) {\n        case exports.ScrollMode.Horizontal:\n          ele.scrollLeft = updatePosition;\n          break;\n\n        case exports.ScrollMode.Vertical:\n        default:\n          ele.scrollTop = updatePosition;\n          break;\n      }\n    }\n  }, [elementRef]);\n  return {\n    scrollOffset: scrollOffset,\n    scrollTo: scrollTo\n  };\n};\n\nvar ZERO_RECT = {\n  height: 0,\n  width: 0\n};\nvar ZERO_OFFSET = {\n  left: 0,\n  top: 0\n};\n\nvar calculateRange = function (scrollMode, measurements, outerSize, scrollOffset) {\n  var currentOffset = 0;\n\n  switch (scrollMode) {\n    case exports.ScrollMode.Horizontal:\n      currentOffset = scrollOffset.left;\n      break;\n\n    case exports.ScrollMode.Vertical:\n    default:\n      currentOffset = scrollOffset.top;\n      break;\n  }\n\n  var size = measurements.length - 1;\n\n  var getOffset = function (index) {\n    switch (scrollMode) {\n      case exports.ScrollMode.Horizontal:\n        return measurements[index].start.left;\n\n      case exports.ScrollMode.Wrapped:\n      case exports.ScrollMode.Vertical:\n      default:\n        return measurements[index].start.top;\n    }\n  };\n\n  var start = findNearest(0, size, currentOffset, getOffset);\n\n  if (scrollMode === exports.ScrollMode.Wrapped) {\n    var startTop = measurements[start].start.top;\n\n    while (start - 1 >= 0 && measurements[start - 1].start.top === startTop && measurements[start - 1].start.left >= scrollOffset.left) {\n      start--;\n    }\n  }\n\n  var end = start;\n  var visibilities = {};\n  var maxVisbilityIndex = start;\n  var maxVisbility = -1;\n\n  while (end <= size) {\n    var itemRect = measurements[end].size;\n    var visibility = ZERO_RECT;\n    var topLeftCorner = {\n      top: measurements[end].start.top - scrollOffset.top,\n      left: measurements[end].start.left - scrollOffset.left\n    };\n    var visibleSize = {\n      height: outerSize.height - topLeftCorner.top,\n      width: outerSize.width - topLeftCorner.left\n    };\n\n    if (scrollMode === exports.ScrollMode.Horizontal && visibleSize.width < 0) {\n      end--;\n      break;\n    }\n\n    if (scrollMode === exports.ScrollMode.Vertical && visibleSize.height < 0) {\n      end--;\n      break;\n    }\n\n    if (scrollMode === exports.ScrollMode.Wrapped && (visibleSize.width < 0 || visibleSize.height < 0)) {\n      end--;\n      break;\n    }\n\n    if (scrollMode === exports.ScrollMode.Vertical) {\n      visibility.width = 1;\n    } else if (topLeftCorner.left < 0) {\n      var visibleWidth = itemRect.width - -topLeftCorner.left;\n      visibility.width = visibleWidth <= outerSize.width ? visibleWidth / outerSize.width : 1;\n    } else {\n      visibility.width = itemRect.width <= visibleSize.width ? 1 : visibleSize.width / itemRect.width;\n    }\n\n    if (scrollMode === exports.ScrollMode.Horizontal) {\n      visibility.height = 1;\n    } else if (topLeftCorner.top < 0) {\n      var visibleHeight = itemRect.height - -topLeftCorner.top;\n      visibility.height = visibleHeight <= outerSize.height ? visibleHeight / outerSize.height : 1;\n    } else {\n      visibility.height = itemRect.height <= visibleSize.height ? 1 : visibleSize.height / itemRect.height;\n    }\n\n    visibilities[end] = visibility.width * visibility.height;\n\n    if (maxVisbility < visibilities[end]) {\n      maxVisbility = visibilities[end];\n      maxVisbilityIndex = end;\n    }\n\n    end++;\n  }\n\n  return {\n    start: start,\n    end: end,\n    maxVisbilityIndex: maxVisbilityIndex,\n    visibilities: visibilities\n  };\n};\n\nvar useVirtual = function (_a) {\n  var estimateSize = _a.estimateSize,\n      isRtl = _a.isRtl,\n      numberOfItems = _a.numberOfItems,\n      setStartRange = _a.setStartRange,\n      setEndRange = _a.setEndRange,\n      parentRef = _a.parentRef,\n      scrollMode = _a.scrollMode,\n      transformSize = _a.transformSize;\n\n  var _b = React__namespace.useState(false),\n      isSmoothScrolling = _b[0],\n      setSmoothScrolling = _b[1];\n\n  var onSmoothScroll = React__namespace.useCallback(function (isSmoothScrolling) {\n    return setSmoothScrolling(isSmoothScrolling);\n  }, []);\n\n  var _c = useScroll({\n    elementRef: parentRef,\n    isRtl: isRtl,\n    scrollMode: scrollMode,\n    onSmoothScroll: onSmoothScroll\n  }),\n      scrollOffset = _c.scrollOffset,\n      scrollTo = _c.scrollTo;\n\n  var parentRect = useMeasureRect({\n    elementRef: parentRef\n  });\n  var latestRef = React__namespace.useRef({\n    scrollOffset: ZERO_OFFSET,\n    measurements: [],\n    parentRect: ZERO_RECT,\n    totalSize: ZERO_RECT\n  });\n  latestRef.current.scrollOffset = scrollOffset;\n  latestRef.current.parentRect = parentRect;\n\n  var _d = React__namespace.useState({}),\n      cacheMeasure = _d[0],\n      setCacheMeasure = _d[1];\n\n  var measurements = React__namespace.useMemo(function () {\n    var measurements = [];\n    var totalWidth = 0;\n    var firstOfRow = {\n      left: 0,\n      top: 0\n    };\n    var maxHeight = 0;\n\n    for (var i = 0; i < numberOfItems; i++) {\n      var size = cacheMeasure[i] || transformSize(estimateSize(i));\n      var start_1 = ZERO_OFFSET;\n\n      if (i === 0) {\n        totalWidth = size.width;\n        firstOfRow = {\n          left: 0,\n          top: 0\n        };\n        maxHeight = size.height;\n      } else {\n        switch (scrollMode) {\n          case exports.ScrollMode.Wrapped:\n            totalWidth += size.width;\n\n            if (totalWidth < parentRect.width) {\n              start_1 = {\n                left: measurements[i - 1].end.left,\n                top: firstOfRow.top\n              };\n              maxHeight = Math.max(maxHeight, size.height);\n            } else {\n              totalWidth = size.width;\n              start_1 = {\n                left: firstOfRow.left,\n                top: firstOfRow.top + maxHeight\n              };\n              firstOfRow = {\n                left: start_1.left,\n                top: start_1.top\n              };\n              maxHeight = size.height;\n            }\n\n            break;\n\n          case exports.ScrollMode.Horizontal:\n          case exports.ScrollMode.Vertical:\n          default:\n            start_1 = measurements[i - 1].end;\n            break;\n        }\n      }\n\n      var end_1 = {\n        left: start_1.left + size.width,\n        top: start_1.top + size.height\n      };\n      measurements[i] = {\n        index: i,\n        start: start_1,\n        size: size,\n        end: end_1,\n        visibility: -1\n      };\n    }\n\n    return measurements;\n  }, [estimateSize, scrollMode, parentRect, cacheMeasure, transformSize]);\n  var totalSize = measurements[numberOfItems - 1] ? {\n    height: measurements[numberOfItems - 1].end.top,\n    width: measurements[numberOfItems - 1].end.left\n  } : ZERO_RECT;\n  latestRef.current.measurements = measurements;\n  latestRef.current.totalSize = totalSize;\n\n  var _e = calculateRange(scrollMode, latestRef.current.measurements, latestRef.current.parentRect, latestRef.current.scrollOffset),\n      maxVisbilityIndex = _e.maxVisbilityIndex,\n      visibilities = _e.visibilities,\n      start = _e.start,\n      end = _e.end;\n\n  var startRange = setStartRange(start);\n  var endRange = setEndRange(end);\n  var virtualItems = React__namespace.useMemo(function () {\n    var virtualItems = [];\n\n    var _loop_1 = function (i) {\n      var item = measurements[i];\n\n      var virtualItem = __assign(__assign({}, item), {\n        visibility: visibilities[i] !== undefined ? visibilities[i] : -1,\n        measureRef: function (ele) {\n          if (!ele) {\n            return;\n          }\n\n          var rect = ele.getBoundingClientRect();\n\n          if (rect.height === 0 && rect.width === 0) {\n            return;\n          }\n\n          var measuredSize = transformSize({\n            height: rect.height,\n            width: rect.width\n          });\n\n          if (measuredSize.height !== item.size.height || measuredSize.width !== item.size.width) {\n            setCacheMeasure(function (old) {\n              var _a;\n\n              return __assign(__assign({}, old), (_a = {}, _a[i] = measuredSize, _a));\n            });\n          }\n        }\n      });\n\n      virtualItems.push(virtualItem);\n    };\n\n    for (var i = startRange; i <= endRange; i++) {\n      _loop_1(i);\n    }\n\n    return virtualItems;\n  }, [transformSize, visibilities, measurements]);\n  var scrollToItem = React__namespace.useCallback(function (index, offset) {\n    var measurements = latestRef.current.measurements;\n    var normalizedIndex = clamp(0, numberOfItems - 1, index);\n    var measurement = measurements[normalizedIndex];\n\n    if (measurement) {\n      scrollTo({\n        left: offset.left + measurement.start.left,\n        top: offset.top + measurement.start.top\n      }, true);\n    }\n  }, [scrollTo]);\n  var getContainerStyles = React__namespace.useCallback(function () {\n    switch (scrollMode) {\n      case exports.ScrollMode.Horizontal:\n        return {\n          position: 'relative',\n          height: '100%',\n          width: \"\".concat(totalSize.width, \"px\")\n        };\n\n      case exports.ScrollMode.Vertical:\n      default:\n        return {\n          position: 'relative',\n          height: \"\".concat(totalSize.height, \"px\"),\n          width: '100%'\n        };\n    }\n  }, [scrollMode, totalSize]);\n  var getItemStyles = React__namespace.useCallback(function (item) {\n    var _a, _b, _c;\n\n    var sideProperty = isRtl ? 'right' : 'left';\n    var factor = isRtl ? -1 : 1;\n\n    switch (scrollMode) {\n      case exports.ScrollMode.Horizontal:\n        return _a = {\n          height: '100%',\n          width: \"\".concat(item.size.width, \"px\")\n        }, _a[sideProperty] = 0, _a.position = 'absolute', _a.top = 0, _a.transform = \"translateX(\".concat(item.start.left * factor, \"px)\"), _a;\n\n      case exports.ScrollMode.Wrapped:\n        return _b = {\n          height: \"\".concat(item.size.height, \"px\"),\n          width: \"\".concat(item.size.width, \"px\")\n        }, _b[sideProperty] = 0, _b.position = 'absolute', _b.top = 0, _b.transform = \"translate(\".concat(item.start.left * factor, \"px, \").concat(item.start.top, \"px)\"), _b;\n\n      case exports.ScrollMode.Vertical:\n      default:\n        return _c = {\n          height: \"\".concat(item.size.height, \"px\"),\n          width: '100%'\n        }, _c[sideProperty] = 0, _c.position = 'absolute', _c.top = 0, _c.transform = \"translateY(\".concat(item.start.top, \"px)\"), _c;\n    }\n  }, [isRtl, scrollMode]);\n  var zoom = React__namespace.useCallback(function (scale) {\n    setCacheMeasure({});\n    var scrollOffset = latestRef.current.scrollOffset;\n    var updateOffset = {\n      left: scrollOffset.left * scale,\n      top: scrollOffset.top * scale\n    };\n    scrollTo(updateOffset, false);\n  }, []);\n  return {\n    isSmoothScrolling: isSmoothScrolling,\n    startIndex: start,\n    startRange: startRange,\n    endIndex: end,\n    endRange: endRange,\n    maxVisbilityIndex: maxVisbilityIndex,\n    virtualItems: virtualItems,\n    getContainerStyles: getContainerStyles,\n    getItemStyles: getItemStyles,\n    scrollToItem: scrollToItem,\n    zoom: zoom\n  };\n};\n\nvar AnnotationBorderStyleType;\n\n(function (AnnotationBorderStyleType) {\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\n\nvar dateRegex = new RegExp('^D:' + '(\\\\d{4})' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '([Z|+|-])?' + '(\\\\d{2})?' + \"'?\" + '(\\\\d{2})?' + \"'?\");\n\nvar parse = function (value, min, max, defaultValue) {\n  var parsed = parseInt(value, 10);\n  return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\n\nvar convertDate = function (input) {\n  var matches = dateRegex.exec(input);\n\n  if (!matches) {\n    return null;\n  }\n\n  var year = parseInt(matches[1], 10);\n  var month = parse(matches[2], 1, 12, 1) - 1;\n  var day = parse(matches[3], 1, 31, 1);\n  var hour = parse(matches[4], 0, 23, 0);\n  var minute = parse(matches[5], 0, 59, 0);\n  var second = parse(matches[6], 0, 59, 0);\n  var universalTimeRelation = matches[7] || 'Z';\n  var offsetHour = parse(matches[8], 0, 23, 0);\n  var offsetMinute = parse(matches[9], 0, 59, 0);\n\n  switch (universalTimeRelation) {\n    case '-':\n      hour += offsetHour;\n      minute += offsetMinute;\n      break;\n\n    case '+':\n      hour -= offsetHour;\n      minute -= offsetMinute;\n      break;\n  }\n\n  return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n  var annotation = _a.annotation;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var containerRef = React__namespace.useRef();\n  var dateStr = '';\n\n  if (annotation.modificationDate) {\n    var date = convertDate(annotation.modificationDate);\n    dateStr = date ? \"\".concat(date.toLocaleDateString(), \", \").concat(date.toLocaleTimeString()) : '';\n  }\n\n  React__namespace.useLayoutEffect(function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var annotationEle = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n\n    if (!annotationEle) {\n      return;\n    }\n\n    var ele = annotationEle;\n    ele.style.zIndex += 1;\n    return function () {\n      ele.style.zIndex = \"\".concat(parseInt(ele.style.zIndex, 10) - 1);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: classNames({\n      'rpv-core__annotation-popup-wrapper': true,\n      'rpv-core__annotation-popup-wrapper--rtl': isRtl\n    }),\n    style: {\n      top: annotation.annotationType === exports.AnnotationType.Popup ? '' : '100%'\n    }\n  }, annotation.title && React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__annotation-popup-title': true,\n      'rpv-core__annotation-popup-title--ltr': !isRtl,\n      'rpv-core__annotation-popup-title--rtl': isRtl\n    })\n  }, annotation.title), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-date\"\n  }, dateStr)), annotation.contents && React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-content\"\n  }, annotation.contents.split('\\n').map(function (item, index) {\n    return React__namespace.createElement(React__namespace.Fragment, {\n      key: index\n    }, item, React__namespace.createElement(\"br\", null));\n  })));\n};\n\nvar TogglePopupBy;\n\n(function (TogglePopupBy) {\n  TogglePopupBy[\"Click\"] = \"Click\";\n  TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\n\nvar useTogglePopup = function () {\n  var _a = useToggle(false),\n      opened = _a.opened,\n      toggle = _a.toggle;\n\n  var _b = React__namespace.useState(TogglePopupBy.Hover),\n      togglePopupBy = _b[0],\n      setTooglePopupBy = _b[1];\n\n  var toggleOnClick = function () {\n    switch (togglePopupBy) {\n      case TogglePopupBy.Click:\n        opened && setTooglePopupBy(TogglePopupBy.Hover);\n        toggle(exports.ToggleStatus.Toggle);\n        break;\n\n      case TogglePopupBy.Hover:\n        setTooglePopupBy(TogglePopupBy.Click);\n        toggle(exports.ToggleStatus.Open);\n        break;\n    }\n  };\n\n  var openOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Open);\n  };\n\n  var closeOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Close);\n  };\n\n  return {\n    opened: opened,\n    closeOnHover: closeOnHover,\n    openOnHover: openOnHover,\n    toggleOnClick: toggleOnClick\n  };\n};\n\nvar Annotation = function (_a) {\n  var annotation = _a.annotation,\n      children = _a.children,\n      ignoreBorder = _a.ignoreBorder,\n      hasPopup = _a.hasPopup,\n      isRenderable = _a.isRenderable,\n      page = _a.page,\n      viewport = _a.viewport;\n  var rect = annotation.rect;\n\n  var _b = useTogglePopup(),\n      closeOnHover = _b.closeOnHover,\n      opened = _b.opened,\n      openOnHover = _b.openOnHover,\n      toggleOnClick = _b.toggleOnClick;\n\n  var normalizeRect = function (r) {\n    return [Math.min(r[0], r[2]), Math.min(r[1], r[3]), Math.max(r[0], r[2]), Math.max(r[1], r[3])];\n  };\n\n  var bound = normalizeRect([rect[0], page.view[3] + page.view[1] - rect[1], rect[2], page.view[3] + page.view[1] - rect[3]]);\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var styles = {\n    borderColor: '',\n    borderRadius: '',\n    borderStyle: '',\n    borderWidth: ''\n  };\n\n  if (!ignoreBorder && annotation.borderStyle.width > 0) {\n    switch (annotation.borderStyle.style) {\n      case AnnotationBorderStyleType.Dashed:\n        styles.borderStyle = 'dashed';\n        break;\n\n      case AnnotationBorderStyleType.Solid:\n        styles.borderStyle = 'solid';\n        break;\n\n      case AnnotationBorderStyleType.Underline:\n        styles = Object.assign({\n          borderBottomStyle: 'solid'\n        }, styles);\n        break;\n\n      case AnnotationBorderStyleType.Beveled:\n      case AnnotationBorderStyleType.Inset:\n    }\n\n    var borderWidth = annotation.borderStyle.width;\n    styles.borderWidth = \"\".concat(borderWidth, \"px\");\n\n    if (annotation.borderStyle.style !== AnnotationBorderStyleType.Underline) {\n      width = width - 2 * borderWidth;\n      height = height - 2 * borderWidth;\n    }\n\n    var _c = annotation.borderStyle,\n        horizontalCornerRadius = _c.horizontalCornerRadius,\n        verticalCornerRadius = _c.verticalCornerRadius;\n\n    if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n      styles.borderRadius = \"\".concat(horizontalCornerRadius, \"px / \").concat(verticalCornerRadius, \"px\");\n    }\n\n    annotation.color ? styles.borderColor = \"rgb(\".concat(annotation.color[0] | 0, \", \").concat(annotation.color[1] | 0, \", \").concat(annotation.color[2] | 0, \")\") : styles.borderWidth = '0';\n  }\n\n  return React__namespace.createElement(React__namespace.Fragment, null, isRenderable && children({\n    popup: {\n      opened: opened,\n      closeOnHover: closeOnHover,\n      openOnHover: openOnHover,\n      toggleOnClick: toggleOnClick\n    },\n    slot: {\n      attrs: {\n        style: Object.assign({\n          height: \"\".concat(height, \"px\"),\n          left: \"\".concat(bound[0], \"px\"),\n          top: \"\".concat(bound[1], \"px\"),\n          transform: \"matrix(\".concat(viewport.transform.join(','), \")\"),\n          transformOrigin: \"-\".concat(bound[0], \"px -\").concat(bound[1], \"px\"),\n          width: \"\".concat(width, \"px\")\n        }, styles)\n      },\n      children: React__namespace.createElement(React__namespace.Fragment, null, hasPopup && opened && React__namespace.createElement(PopupWrapper, {\n        annotation: annotation\n      }))\n    }\n  }));\n};\n\nvar Caret = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--caret\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Circle = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--circle\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"circle\", {\n      cy: height / 2,\n      fill: \"none\",\n      rx: width / 2 - borderWidth / 2,\n      ry: height / 2 - borderWidth / 2,\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1\n    })), props.slot.children);\n  });\n};\n\nvar getFileName = function (url) {\n  var str = url.split('/').pop();\n  return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n  var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], {\n    type: ''\n  }));\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = blobUrl || url;\n  link.setAttribute('download', getFileName(url));\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  if (blobUrl) {\n    URL.revokeObjectURL(blobUrl);\n  }\n};\n\nvar FileAttachment = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n\n  var doubleClick = function () {\n    var file = annotation.file;\n    file && downloadFile(file.filename, file.content);\n  };\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: true,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--file-attachment\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onDoubleClick: doubleClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar FreeText = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--free-text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Popup = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var isRenderable = !!(annotation.title || annotation.contents);\n  var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n  var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n  useIsomorphicLayoutEffect(function () {\n    if (!annotation.parentId) {\n      return;\n    }\n\n    var parent = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.parentId, \"\\\"]\"));\n    var container = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n\n    if (!parent || !container) {\n      return;\n    }\n\n    var left = parseFloat(parent.style.left);\n    var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n    container.style.left = \"\".concat(left, \"px\");\n    container.style.top = \"\".concat(top, \"px\");\n    container.style.transformOrigin = \"-\".concat(left, \"px -\").concat(top, \"px\");\n  }, []);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--popup\",\n      \"data-annotation-id\": annotation.id\n    }), React__namespace.createElement(PopupWrapper, {\n      annotation: annotation\n    }));\n  });\n};\n\nvar Highlight = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var hasQuadPoints = annotation.quadPoints && annotation.quadPoints.length > 0;\n\n  if (hasQuadPoints) {\n    var annotations = annotation.quadPoints.map(function (quadPoint) {\n      return Object.assign({}, annotation, {\n        rect: [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y],\n        quadPoints: []\n      });\n    });\n    return React__namespace.createElement(React__namespace.Fragment, null, annotations.map(function (ann, index) {\n      return React__namespace.createElement(Highlight, {\n        key: index,\n        annotation: ann,\n        childAnnotation: childAnnotation,\n        page: page,\n        viewport: viewport\n      });\n    }));\n  }\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--highlight\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children), childAnnotation && childAnnotation.annotationType === exports.AnnotationType.Popup && props.popup.opened && React__namespace.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Ink = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--ink\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.inkLists && annotation.inkLists.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, annotation.inkLists.map(function (inkList, index) {\n      return React__namespace.createElement(\"polyline\", {\n        key: index,\n        fill: \"none\",\n        stroke: \"transparent\",\n        strokeWidth: borderWidth || 1,\n        points: inkList.map(function (item) {\n          return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n        }).join(' ')\n      });\n    })), props.slot.children);\n  });\n};\n\nvar Line = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--line\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"line\", {\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      x1: rect[2] - annotation.lineCoordinates[0],\n      x2: rect[2] - annotation.lineCoordinates[2],\n      y1: rect[3] - annotation.lineCoordinates[1],\n      y2: rect[3] - annotation.lineCoordinates[3]\n    })), props.slot.children);\n  });\n};\n\nvar Link = function (_a) {\n  var annotation = _a.annotation,\n      doc = _a.doc,\n      page = _a.page,\n      viewport = _a.viewport,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n\n  var link = function (e) {\n    e.preventDefault();\n    annotation.action ? onExecuteNamedAction(annotation.action) : getDestination(doc, annotation.dest).then(function (target) {\n      var pageIndex = target.pageIndex,\n          bottomOffset = target.bottomOffset,\n          leftOffset = target.leftOffset,\n          scaleTo = target.scaleTo;\n      onJumpToDest(pageIndex, bottomOffset, leftOffset, scaleTo);\n    });\n  };\n\n  var isRenderable = !!(annotation.url || annotation.dest || annotation.action || annotation.unsafeUrl);\n  var externalUrl = annotation.url || annotation.unsafeUrl;\n  var attrs = externalUrl ? {\n    'data-target': 'external',\n    href: externalUrl,\n    rel: 'noopener noreferrer nofollow',\n    target: annotation.newWindow ? '_blank' : '',\n    title: externalUrl\n  } : {\n    href: '',\n    'data-annotation-link-dest': annotation.dest,\n    onClick: link\n  };\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: false,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--link\",\n      \"data-annotation-id\": annotation.id,\n      \"data-testid\": \"core__annotation--link-\".concat(annotation.id)\n    }), React__namespace.createElement(\"a\", __assign({}, attrs)));\n  });\n};\n\nvar Polygon = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--polygon\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"polygon\", {\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Polyline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--polyline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"polyline\", {\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Square = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--square\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"rect\", {\n      height: height - borderWidth,\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      x: borderWidth / 2,\n      y: borderWidth / 2,\n      width: width - borderWidth\n    })), props.slot.children);\n  });\n};\n\nvar Squiggly = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--squiggly\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Stamp = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--stamp\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar StrikeOut = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--strike-out\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar CommentIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25\"\n  }));\n};\n\nvar HelpIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M21.423 5.406L17.415 9.414\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M14.587 6.585L18.607 2.565\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M5.405 21.424L9.413 17.416\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6.585 14.588L2.577 18.596\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M18.602 21.419L14.595 17.412\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M17.419 14.58L21.428 18.589\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M2.582 5.399L6.588 9.406\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M9.421 6.581L5.412 2.572\"\n  }));\n};\n\nvar KeyIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z\"\n  }));\n};\n\nvar NoteIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6 4.5L6 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M18 4.5L18 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M10 4.5L10 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M14 4.5L14 0.5\"\n  }));\n};\n\nvar ParagraphIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M17.5 0.498L17.5 23.498\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M10.5 0.498L10.5 23.498\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M23.5.5H6.5a6,6,0,0,0,0,12h4\"\n  }));\n};\n\nvar TriangleIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z\"\n  }));\n};\n\nvar Text = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var name = annotation.name ? annotation.name.toLowerCase() : '';\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), name && React__namespace.createElement(\"div\", {\n      className: \"rpv-core__annotation-text-icon\"\n    }, name === 'check' && React__namespace.createElement(CheckIcon, null), name === 'comment' && React__namespace.createElement(CommentIcon, null), name === 'help' && React__namespace.createElement(HelpIcon, null), name === 'insert' && React__namespace.createElement(TriangleIcon, null), name === 'key' && React__namespace.createElement(KeyIcon, null), name === 'note' && React__namespace.createElement(NoteIcon, null), (name === 'newparagraph' || name === 'paragraph') && React__namespace.createElement(ParagraphIcon, null)), props.slot.children), childAnnotation && childAnnotation.annotationType === exports.AnnotationType.Popup && props.popup.opened && React__namespace.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Underline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--underline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar AnnotationLayerBody = function (_a) {\n  var annotations = _a.annotations,\n      doc = _a.doc,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var containerRef = React__namespace.useRef();\n  var viewport = page.getViewport({\n    rotation: rotation,\n    scale: scale\n  });\n  var clonedViewPort = viewport.clone({\n    dontFlip: true\n  });\n  var filterAnnotations = annotations.filter(function (annotation) {\n    return !annotation.parentId;\n  });\n  React__namespace.useEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    plugins.forEach(function (plugin) {\n      if (plugin.onAnnotationLayerRender) {\n        plugin.onAnnotationLayerRender({\n          annotations: filterAnnotations,\n          container: container,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale\n        });\n      }\n    });\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__annotation-layer\",\n    \"data-testid\": \"core__annotation-layer-\".concat(pageIndex)\n  }, filterAnnotations.map(function (annotation) {\n    var childAnnotation = annotations.find(function (item) {\n      return item.parentId === annotation.id;\n    });\n\n    switch (annotation.annotationType) {\n      case exports.AnnotationType.Caret:\n        return React__namespace.createElement(Caret, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Circle:\n        return React__namespace.createElement(Circle, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.FileAttachment:\n        return React__namespace.createElement(FileAttachment, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.FreeText:\n        return React__namespace.createElement(FreeText, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Highlight:\n        return React__namespace.createElement(Highlight, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Ink:\n        return React__namespace.createElement(Ink, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Line:\n        return React__namespace.createElement(Line, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Link:\n        return React__namespace.createElement(Link, {\n          key: annotation.id,\n          annotation: annotation,\n          doc: doc,\n          page: page,\n          viewport: clonedViewPort,\n          onExecuteNamedAction: onExecuteNamedAction,\n          onJumpToDest: onJumpToDest\n        });\n\n      case exports.AnnotationType.Polygon:\n        return React__namespace.createElement(Polygon, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Polyline:\n        return React__namespace.createElement(Polyline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Popup:\n        return React__namespace.createElement(Popup, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Square:\n        return React__namespace.createElement(Square, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Squiggly:\n        return React__namespace.createElement(Squiggly, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Stamp:\n        return React__namespace.createElement(Stamp, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.StrikeOut:\n        return React__namespace.createElement(StrikeOut, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Text:\n        return React__namespace.createElement(Text, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Underline:\n        return React__namespace.createElement(Underline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      default:\n        return React__namespace.createElement(React__namespace.Fragment, {\n          key: annotation.id\n        });\n    }\n  }));\n};\n\nvar AnnotationLoader = function (_a) {\n  var page = _a.page,\n      renderAnnotations = _a.renderAnnotations;\n  var isMounted = useIsMounted();\n\n  var _b = React__namespace.useState({\n    loading: true,\n    annotations: []\n  }),\n      status = _b[0],\n      setStatus = _b[1];\n\n  React__namespace.useEffect(function () {\n    page.getAnnotations({\n      intent: 'display'\n    }).then(function (result) {\n      if (isMounted.current) {\n        setStatus({\n          loading: false,\n          annotations: result\n        });\n      }\n    });\n  }, []);\n  return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : renderAnnotations(status.annotations);\n};\n\nvar AnnotationLayer = function (_a) {\n  var doc = _a.doc,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n\n  var renderAnnotations = function (annotations) {\n    return React__namespace.createElement(AnnotationLayerBody, {\n      annotations: annotations,\n      doc: doc,\n      page: page,\n      pageIndex: pageIndex,\n      plugins: plugins,\n      rotation: rotation,\n      scale: scale,\n      onExecuteNamedAction: onExecuteNamedAction,\n      onJumpToDest: onJumpToDest\n    });\n  };\n\n  return React__namespace.createElement(AnnotationLoader, {\n    page: page,\n    renderAnnotations: renderAnnotations\n  });\n};\n\nvar floatToRatio = function (x, limit) {\n  var _a, _b;\n\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n\n  var y = 1 / x;\n\n  if (y > limit) {\n    return [1, limit];\n  }\n\n  if (Math.floor(y) === y) {\n    return [1, y];\n  }\n\n  var value = x > 1 ? y : x;\n  var a = 0;\n  var b = 1;\n  var c = 1;\n  var d = 1;\n\n  while (true) {\n    var numerator = a + c;\n    var denominator = b + d;\n\n    if (denominator > limit) {\n      break;\n    }\n\n    value <= numerator / denominator ? (_a = [numerator, denominator], c = _a[0], d = _a[1], _a) : (_b = [numerator, denominator], a = _b[0], b = _b[1], _b);\n  }\n\n  var middle = (a / b + c / d) / 2;\n  return value < middle ? value === x ? [a, b] : [b, a] : value === x ? [c, d] : [d, c];\n};\n\nvar roundToDivide = function (a, b) {\n  var remainder = a % b;\n  return remainder === 0 ? a : Math.floor(a - remainder);\n};\n\nvar MAX_CANVAS_SIZE = 4096 * 4096;\n\nvar CanvasLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width,\n      onRenderCanvasCompleted = _a.onRenderCanvasCompleted;\n  var canvasRef = React__namespace.useRef();\n  var renderTask = React__namespace.useRef();\n  useIsomorphicLayoutEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvasEle = canvasRef.current;\n    plugins.forEach(function (plugin) {\n      if (plugin.onCanvasLayerRender) {\n        plugin.onCanvasLayerRender({\n          ele: canvasEle,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale,\n          status: exports.LayerRenderStatus.PreRender\n        });\n      }\n    });\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    var outputScale = window.devicePixelRatio || 1;\n    var maxScale = Math.sqrt(MAX_CANVAS_SIZE / (viewport.width * viewport.height));\n    var shouldScaleByCSS = outputScale > maxScale;\n    shouldScaleByCSS ? canvasEle.style.transform = \"scale(1, 1)\" : canvasEle.style.removeProperty('transform');\n    var possibleScale = Math.min(maxScale, outputScale);\n\n    var _a = floatToRatio(possibleScale, 8),\n        x = _a[0],\n        y = _a[1];\n\n    canvasEle.width = roundToDivide(viewport.width * possibleScale, x);\n    canvasEle.height = roundToDivide(viewport.height * possibleScale, x);\n    canvasEle.style.width = \"\".concat(roundToDivide(viewport.width, y), \"px\");\n    canvasEle.style.height = \"\".concat(roundToDivide(viewport.height, y), \"px\");\n    canvasEle.hidden = true;\n    var canvasContext = canvasEle.getContext('2d', {\n      alpha: false\n    });\n    var transform = shouldScaleByCSS || outputScale !== 1 ? [possibleScale, 0, 0, possibleScale, 0, 0] : null;\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      transform: transform,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      canvasEle.hidden = false;\n      plugins.forEach(function (plugin) {\n        if (plugin.onCanvasLayerRender) {\n          plugin.onCanvasLayerRender({\n            ele: canvasEle,\n            pageIndex: pageIndex,\n            rotation: rotation,\n            scale: scale,\n            status: exports.LayerRenderStatus.DidRender\n          });\n        }\n      });\n      onRenderCanvasCompleted();\n    }, function () {\n      onRenderCanvasCompleted();\n    });\n    return function () {\n      if (canvasEle) {\n        canvasEle.width = 0;\n        canvasEle.height = 0;\n      }\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__canvas-layer\",\n    style: {\n      height: \"\".concat(height, \"px\"),\n      width: \"\".concat(width, \"px\")\n    }\n  }, React__namespace.createElement(\"canvas\", {\n    ref: canvasRef\n  }));\n};\n\nvar SvgLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var containerRef = React__namespace.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.innerHTML = '';\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    var containerEle = containerRef.current;\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    page.getOperatorList().then(function (operatorList) {\n      empty();\n      var graphic = new PdfJsApi__namespace.SVGGraphics(page.commonObjs, page.objs);\n      graphic.getSVG(operatorList, viewport).then(function (svg) {\n        svg.style.height = \"\".concat(height, \"px\");\n        svg.style.width = \"\".concat(width, \"px\");\n        containerEle.appendChild(svg);\n      });\n    });\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__svg-layer\",\n    ref: containerRef\n  });\n};\n\nvar TextLayer = function (_a) {\n  var page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onRenderTextCompleted = _a.onRenderTextCompleted;\n  var containerRef = React__namespace.useRef();\n  var renderTask = React__namespace.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var spans = [].slice.call(containerEle.querySelectorAll('.rpv-core__text-layer-text'));\n    spans.forEach(function (span) {\n      return containerEle.removeChild(span);\n    });\n    var breaks = [].slice.call(containerEle.querySelectorAll('br[role=\"presentation\"]'));\n    breaks.forEach(function (br) {\n      return containerEle.removeChild(br);\n    });\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.removeAttribute('data-testid');\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    plugins.forEach(function (plugin) {\n      if (plugin.onTextLayerRender) {\n        plugin.onTextLayerRender({\n          ele: containerEle,\n          pageIndex: pageIndex,\n          scale: scale,\n          status: exports.LayerRenderStatus.PreRender\n        });\n      }\n    });\n    page.getTextContent().then(function (textContent) {\n      empty();\n      renderTask.current = PdfJsApi__namespace.renderTextLayer({\n        container: containerEle,\n        textContent: textContent,\n        viewport: viewport,\n        enhanceTextSelection: true\n      });\n      renderTask.current.promise.then(function () {\n        containerEle.setAttribute('data-testid', \"core__text-layer-\".concat(pageIndex));\n        var spans = [].slice.call(containerEle.children);\n        spans.forEach(function (span) {\n          if (!span.classList.contains('rpv-core__text-layer-text--not')) {\n            span.classList.add('rpv-core__text-layer-text');\n          }\n        });\n        plugins.forEach(function (plugin) {\n          if (plugin.onTextLayerRender) {\n            plugin.onTextLayerRender({\n              ele: containerEle,\n              pageIndex: pageIndex,\n              scale: scale,\n              status: exports.LayerRenderStatus.DidRender\n            });\n          }\n        });\n        onRenderTextCompleted();\n      }, function () {\n        containerEle.removeAttribute('data-testid');\n        onRenderTextCompleted();\n      });\n    });\n    return function () {\n      var _a;\n\n      empty();\n      (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__text-layer\",\n    ref: containerRef\n  });\n};\n\nvar PageLayer = function (_a) {\n  var doc = _a.doc,\n      height = _a.height,\n      measureRef = _a.measureRef,\n      pageIndex = _a.pageIndex,\n      pageRotation = _a.pageRotation,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      renderQueueKey = _a.renderQueueKey,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      shouldRender = _a.shouldRender,\n      width = _a.width,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest,\n      onRenderCompleted = _a.onRenderCompleted,\n      onRotatePage = _a.onRotatePage;\n  var isMounted = useIsMounted();\n\n  var _b = React__namespace.useState({\n    page: null,\n    pageHeight: height,\n    pageWidth: width,\n    viewportRotation: 0\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var _c = React__namespace.useState(false),\n      canvasLayerRendered = _c[0],\n      setCanvasLayerRendered = _c[1];\n\n  var _d = React__namespace.useState(false),\n      textLayerRendered = _d[0],\n      setTextLayerRendered = _d[1];\n\n  var page = pageSize.page,\n      pageHeight = pageSize.pageHeight,\n      pageWidth = pageSize.pageWidth;\n  var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n  var scaledWidth = pageWidth * scale;\n  var scaledHeight = pageHeight * scale;\n  var w = isVertical ? scaledWidth : scaledHeight;\n  var h = isVertical ? scaledHeight : scaledWidth;\n  var rotationValue = (pageSize.viewportRotation + rotation + pageRotation) % 360;\n  var renderQueueKeyRef = React__namespace.useRef(0);\n\n  var determinePageSize = function () {\n    getPage(doc, pageIndex).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n\n      if (isMounted.current) {\n        renderQueueKeyRef.current = renderQueueKey;\n        setPageSize({\n          page: pdfPage,\n          pageHeight: viewport.height,\n          pageWidth: viewport.width,\n          viewportRotation: viewport.rotation\n        });\n      }\n    });\n  };\n\n  var defaultPageRenderer = function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, props.canvasLayer.children, props.textLayer.children, props.annotationLayer.children);\n  };\n\n  var renderPageLayer = renderPage || defaultPageRenderer;\n\n  var handleRenderCanvasCompleted = function () {\n    if (isMounted.current) {\n      setCanvasLayerRendered(true);\n    }\n  };\n\n  var handleRenderTextCompleted = function () {\n    if (isMounted.current) {\n      setTextLayerRendered(true);\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    setPageSize({\n      page: null,\n      pageHeight: height,\n      pageWidth: width,\n      viewportRotation: 0\n    });\n    setCanvasLayerRendered(false);\n    setTextLayerRendered(false);\n  }, [pageRotation, rotation, scale]);\n  React__namespace.useEffect(function () {\n    if (shouldRender && isMounted.current && !page) {\n      determinePageSize();\n    }\n  }, [shouldRender, page]);\n  React__namespace.useEffect(function () {\n    if (canvasLayerRendered && textLayerRendered) {\n      if (renderQueueKey !== renderQueueKeyRef.current) {\n        setPageSize({\n          page: null,\n          pageHeight: height,\n          pageWidth: width,\n          viewportRotation: 0\n        });\n        setCanvasLayerRendered(false);\n        setTextLayerRendered(false);\n      } else {\n        onRenderCompleted(pageIndex);\n      }\n    }\n  }, [canvasLayerRendered, textLayerRendered]);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__page-layer\",\n    \"data-testid\": \"core__page-layer-\".concat(pageIndex),\n    ref: measureRef,\n    style: {\n      height: \"\".concat(h, \"px\"),\n      width: \"\".concat(w, \"px\")\n    }\n  }, !page ? React__namespace.createElement(Spinner, {\n    testId: \"core__page-layer-loading-\".concat(pageIndex)\n  }) : React__namespace.createElement(React__namespace.Fragment, null, renderPageLayer({\n    annotationLayer: {\n      attrs: {},\n      children: React__namespace.createElement(AnnotationLayer, {\n        doc: doc,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationValue,\n        scale: scale,\n        onExecuteNamedAction: onExecuteNamedAction,\n        onJumpToDest: onJumpToDest\n      })\n    },\n    canvasLayer: {\n      attrs: {},\n      children: React__namespace.createElement(CanvasLayer, {\n        height: h,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationValue,\n        scale: scale,\n        width: w,\n        onRenderCanvasCompleted: handleRenderCanvasCompleted\n      })\n    },\n    canvasLayerRendered: canvasLayerRendered,\n    doc: doc,\n    height: h,\n    pageIndex: pageIndex,\n    rotation: rotationValue,\n    scale: scale,\n    svgLayer: {\n      attrs: {},\n      children: React__namespace.createElement(SvgLayer, {\n        height: h,\n        page: page,\n        rotation: rotationValue,\n        scale: scale,\n        width: w\n      })\n    },\n    textLayer: {\n      attrs: {},\n      children: React__namespace.createElement(TextLayer, {\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationValue,\n        scale: scale,\n        onRenderTextCompleted: handleRenderTextCompleted\n      })\n    },\n    textLayerRendered: textLayerRendered,\n    width: w,\n    markRendered: onRenderCompleted,\n    onRotatePage: function (direction) {\n      return onRotatePage(pageIndex, direction);\n    }\n  }), plugins.map(function (plugin, idx) {\n    return plugin.renderPageLayer ? React__namespace.createElement(React__namespace.Fragment, {\n      key: idx\n    }, plugin.renderPageLayer({\n      doc: doc,\n      height: h,\n      pageIndex: pageIndex,\n      rotation: rotationValue,\n      scale: scale,\n      width: w\n    })) : React__namespace.createElement(React__namespace.Fragment, {\n      key: idx\n    });\n  })));\n};\n\nvar getFileExt = function (url) {\n  var str = url.split(/\\./).pop();\n  return str ? str.toLowerCase() : '';\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\n\nvar calculateScale = function (container, pageHeight, pageWidth, scale) {\n  switch (scale) {\n    case exports.SpecialZoomLevel.ActualSize:\n      return 1;\n\n    case exports.SpecialZoomLevel.PageFit:\n      return Math.min((container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth, (container.clientHeight - 2 * PAGE_PADDING) / pageHeight);\n\n    case exports.SpecialZoomLevel.PageWidth:\n      return (container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth;\n  }\n};\n\nvar NUM_OVERSCAN_PAGES = 3;\n\nvar Inner = function (_a) {\n  var currentFile = _a.currentFile,\n      defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      initialPage = _a.initialPage,\n      pageSize = _a.pageSize,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      scrollMode = _a.scrollMode,\n      viewerState = _a.viewerState,\n      onDocumentLoad = _a.onDocumentLoad,\n      onOpenFile = _a.onOpenFile,\n      onPageChange = _a.onPageChange,\n      onRotate = _a.onRotate,\n      onRotatePage = _a.onRotatePage,\n      onZoom = _a.onZoom;\n  var numPages = doc.numPages;\n  var docId = doc.loadingTask.docId;\n  var l10n = React__namespace.useContext(LocalizationContext).l10n;\n  var themeContext = React__namespace.useContext(ThemeContext);\n  var isRtl = themeContext.direction === exports.TextDirection.RightToLeft;\n  var containerRef = React__namespace.useRef();\n  var pagesRef = React__namespace.useRef();\n\n  var _b = React__namespace.useState(initialPage),\n      currentPage = _b[0],\n      setCurrentPage = _b[1];\n\n  var _c = React__namespace.useState(0),\n      rotation = _c[0],\n      setRotation = _c[1];\n\n  var _d = React__namespace.useState(false),\n      pagesRotationChanged = _d[0],\n      setPagesRotationChanged = _d[1];\n\n  var _e = React__namespace.useState(new Map()),\n      pagesRotation = _e[0],\n      setPagesRotation = _e[1];\n\n  var _f = React__namespace.useState(scrollMode),\n      currentScrollMode = _f[0],\n      setCurrentScrollMode = _f[1];\n\n  var previousScrollMode = usePrevious(currentScrollMode);\n\n  var _g = React__namespace.useState(pageSize.scale),\n      scale = _g[0],\n      setScale = _g[1];\n\n  var stateRef = React__namespace.useRef(viewerState);\n  var keepSpecialZoomLevelRef = React__namespace.useRef(typeof defaultScale === 'string' ? defaultScale : null);\n\n  var _h = React__namespace.useState(-1),\n      renderPageIndex = _h[0],\n      setRenderPageIndex = _h[1];\n\n  var _j = React__namespace.useState(0),\n      renderQueueKey = _j[0],\n      setRenderQueueKey = _j[1];\n\n  var renderQueue = useRenderQueue({\n    doc: doc\n  });\n  React__namespace.useEffect(function () {\n    return function () {\n      clearPagesCache();\n    };\n  }, [docId]);\n  var estimateSize = React__namespace.useCallback(function () {\n    var sizes = [pageSize.pageHeight, pageSize.pageWidth];\n    var rect = Math.abs(rotation) % 180 === 0 ? {\n      height: sizes[0],\n      width: sizes[1]\n    } : {\n      height: sizes[1],\n      width: sizes[0]\n    };\n    return {\n      height: rect.height * scale,\n      width: rect.width * scale\n    };\n  }, [rotation, scale]);\n  var setStartRange = React__namespace.useCallback(function (startIndex) {\n    return Math.max(startIndex - NUM_OVERSCAN_PAGES, 0);\n  }, []);\n  var setEndRange = React__namespace.useCallback(function (endIndex) {\n    return Math.min(endIndex + NUM_OVERSCAN_PAGES, numPages - 1);\n  }, [numPages]);\n  var transformSize = React__namespace.useCallback(function (size) {\n    return size;\n  }, []);\n  var virtualizer = useVirtual({\n    estimateSize: estimateSize,\n    isRtl: isRtl,\n    numberOfItems: numPages,\n    parentRef: pagesRef,\n    scrollMode: currentScrollMode,\n    setStartRange: setStartRange,\n    setEndRange: setEndRange,\n    transformSize: transformSize\n  });\n  var handlePagesResize = useDebounceCallback(function (_) {\n    if (keepSpecialZoomLevelRef.current) {\n      setRenderPageIndex(-1);\n      zoom(keepSpecialZoomLevelRef.current);\n    }\n  }, 200);\n  useTrackResize({\n    targetRef: pagesRef,\n    onResize: handlePagesResize\n  });\n  var pageWidth = pageSize.pageWidth,\n      pageHeight = pageSize.pageHeight;\n\n  var setViewerState = function (viewerState) {\n    var newState = viewerState;\n    plugins.forEach(function (plugin) {\n      if (plugin.onViewerStateChange) {\n        newState = plugin.onViewerStateChange(newState);\n      }\n    });\n    stateRef.current = newState;\n  };\n\n  var getPagesContainer = function () {\n    return pagesRef.current;\n  };\n\n  var getViewerState = function () {\n    return stateRef.current;\n  };\n\n  var jumpToDestination = React__namespace.useCallback(function (pageIndex, bottomOffset, leftOffset, scaleTo) {\n    var pagesContainer = pagesRef.current;\n    var currentState = stateRef.current;\n\n    if (!pagesContainer || !currentState) {\n      return;\n    }\n\n    getPage(doc, pageIndex).then(function (page) {\n      var viewport = page.getViewport({\n        scale: 1\n      });\n      var top = 0;\n      var bottom = (typeof bottomOffset === 'function' ? bottomOffset(viewport.width, viewport.height) : bottomOffset) || 0;\n      var left = (typeof leftOffset === 'function' ? leftOffset(viewport.width, viewport.height) : leftOffset) || 0;\n      var updateScale = currentState.scale;\n\n      switch (scaleTo) {\n        case exports.SpecialZoomLevel.PageFit:\n          top = 0;\n          left = 0;\n          zoom(exports.SpecialZoomLevel.PageFit);\n          break;\n\n        case exports.SpecialZoomLevel.PageWidth:\n          updateScale = calculateScale(pagesContainer, pageHeight, pageWidth, exports.SpecialZoomLevel.PageWidth);\n          top = (viewport.height - bottom) * updateScale;\n          left = left * updateScale;\n          zoom(updateScale);\n          break;\n\n        default:\n          var boundingRect = viewport.convertToViewportPoint(left, bottom);\n          left = Math.max(boundingRect[0] * currentState.scale, 0);\n          top = Math.max(boundingRect[1] * currentState.scale, 0);\n          break;\n      }\n\n      switch (currentState.scrollMode) {\n        case exports.ScrollMode.Horizontal:\n          virtualizer.scrollToItem(pageIndex, {\n            left: left,\n            top: 0\n          });\n          break;\n\n        case exports.ScrollMode.Vertical:\n        default:\n          virtualizer.scrollToItem(pageIndex, {\n            left: 0,\n            top: top\n          });\n          break;\n      }\n    });\n  }, []);\n  var jumpToPage = React__namespace.useCallback(function (pageIndex) {\n    if (0 <= pageIndex && pageIndex < numPages) {\n      virtualizer.scrollToItem(pageIndex, {\n        left: 0,\n        top: 0\n      });\n    }\n  }, []);\n  var openFile = React__namespace.useCallback(function (file) {\n    if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n      return;\n    }\n\n    new Promise(function (resolve) {\n      var reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onload = function () {\n        var bytes = new Uint8Array(reader.result);\n        resolve(bytes);\n      };\n    }).then(function (data) {\n      onOpenFile(file.name, data);\n    });\n  }, [onOpenFile]);\n  var rotate = React__namespace.useCallback(function (direction) {\n    var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\n    var currentRotation = stateRef.current.rotation;\n    var updateRotation = currentRotation === 360 || currentRotation === -360 ? degrees : currentRotation + degrees;\n    renderQueue.markNotRendered();\n    setRotation(updateRotation);\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      rotation: updateRotation\n    }));\n    onRotate({\n      direction: direction,\n      doc: doc,\n      rotation: updateRotation\n    });\n  }, []);\n  var rotatePage = React__namespace.useCallback(function (pageIndex, direction) {\n    var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\n    var rotations = stateRef.current.pagesRotation;\n    var currentPageRotation = rotations.has(pageIndex) ? rotations.get(pageIndex) : 0;\n    var finalRotation = currentPageRotation + degrees;\n    var updateRotations = rotations.set(pageIndex, finalRotation);\n    setPagesRotation(updateRotations);\n    setPagesRotationChanged(function (value) {\n      return !value;\n    });\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      pagesRotation: updateRotations,\n      rotatedPage: pageIndex\n    }));\n    onRotatePage({\n      direction: direction,\n      doc: doc,\n      pageIndex: pageIndex,\n      rotation: finalRotation\n    });\n    renderQueue.markRendering(pageIndex);\n    setRenderPageIndex(pageIndex);\n  }, []);\n  var switchScrollMode = React__namespace.useCallback(function (scrollMode) {\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      scrollMode: scrollMode\n    }));\n    setCurrentScrollMode(scrollMode);\n  }, []);\n  var zoom = React__namespace.useCallback(function (newScale) {\n    var pagesEle = pagesRef.current;\n    var updateScale = pagesEle ? typeof newScale === 'string' ? calculateScale(pagesEle, pageHeight, pageWidth, newScale) : newScale : 1;\n    keepSpecialZoomLevelRef.current = typeof newScale === 'string' ? newScale : null;\n\n    if (updateScale === stateRef.current.scale) {\n      return;\n    }\n\n    virtualizer.zoom(updateScale / stateRef.current.scale);\n    setRenderQueueKey(function (key) {\n      return key + 1;\n    });\n    renderQueue.markNotRendered();\n    setScale(updateScale);\n    onZoom({\n      doc: doc,\n      scale: updateScale\n    });\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      scale: updateScale\n    }));\n  }, []);\n  React__namespace.useEffect(function () {\n    var pluginMethods = {\n      getPagesContainer: getPagesContainer,\n      getViewerState: getViewerState,\n      jumpToDestination: jumpToDestination,\n      jumpToPage: jumpToPage,\n      openFile: openFile,\n      rotate: rotate,\n      rotatePage: rotatePage,\n      setViewerState: setViewerState,\n      switchScrollMode: switchScrollMode,\n      zoom: zoom\n    };\n    plugins.forEach(function (plugin) {\n      if (plugin.install) {\n        plugin.install(pluginMethods);\n      }\n    });\n    return function () {\n      plugins.forEach(function (plugin) {\n        if (plugin.uninstall) {\n          plugin.uninstall(pluginMethods);\n        }\n      });\n    };\n  }, [docId]);\n  React__namespace.useEffect(function () {\n    onDocumentLoad({\n      doc: doc,\n      file: currentFile\n    });\n    plugins.forEach(function (plugin) {\n      plugin.onDocumentLoad && plugin.onDocumentLoad({\n        doc: doc,\n        file: currentFile\n      });\n    });\n\n    if (initialPage) {\n      jumpToPage(initialPage);\n    }\n  }, [docId]);\n  useIsomorphicLayoutEffect(function () {\n    var latestPage = stateRef.current.pageIndex;\n\n    if (latestPage > -1 && previousScrollMode !== currentScrollMode) {\n      virtualizer.scrollToItem(latestPage, {\n        left: 0,\n        top: 0\n      });\n    }\n  }, [currentScrollMode]);\n  React__namespace.useEffect(function () {\n    var isSmoothScrolling = virtualizer.isSmoothScrolling;\n\n    if (isSmoothScrolling) {\n      return;\n    }\n\n    if (stateRef.current.pageIndex === -1 && currentPage === initialPage || currentPage === stateRef.current.pageIndex && currentPage !== initialPage) {\n      onPageChange({\n        currentPage: currentPage,\n        doc: doc\n      });\n    }\n  }, [currentPage, virtualizer.isSmoothScrolling]);\n  React__namespace.useEffect(function () {\n    var startRange = virtualizer.startRange,\n        endRange = virtualizer.endRange,\n        maxVisbilityIndex = virtualizer.maxVisbilityIndex,\n        virtualItems = virtualizer.virtualItems;\n    var currentPage = maxVisbilityIndex;\n    setCurrentPage(currentPage);\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      pageIndex: currentPage\n    }));\n    renderQueue.setRange(startRange, endRange);\n\n    var _loop_1 = function (i) {\n      var item = virtualItems.find(function (item) {\n        return item.index === i;\n      });\n\n      if (item) {\n        renderQueue.setVisibility(i, item.visibility);\n      }\n    };\n\n    for (var i = startRange; i <= endRange; i++) {\n      _loop_1(i);\n    }\n\n    renderNextPage();\n  }, [virtualizer.startRange, virtualizer.endRange, virtualizer.maxVisbilityIndex, pagesRotationChanged, rotation, scale]);\n  var handlePageRenderCompleted = React__namespace.useCallback(function (pageIndex) {\n    renderQueue.markRendered(pageIndex);\n    renderNextPage();\n  }, [renderQueueKey]);\n\n  var renderNextPage = function () {\n    var nextPage = renderQueue.getHighestPriorityPage();\n\n    if (nextPage > -1 && renderQueue.isInRange(nextPage)) {\n      renderQueue.markRendering(nextPage);\n      setRenderPageIndex(nextPage);\n    }\n  };\n\n  var executeNamedAction = function (action) {\n    var previousPage = currentPage - 1;\n    var nextPage = currentPage + 1;\n\n    switch (action) {\n      case 'FirstPage':\n        jumpToPage(0);\n        break;\n\n      case 'LastPage':\n        jumpToPage(numPages - 1);\n        break;\n\n      case 'NextPage':\n        nextPage < numPages && jumpToPage(nextPage);\n        break;\n\n      case 'PrevPage':\n        previousPage >= 0 && jumpToPage(previousPage);\n        break;\n    }\n  };\n\n  var renderViewer = React__namespace.useCallback(function () {\n    var pageLabel = l10n && l10n.core ? l10n.core.pageLabel : 'Page {{pageIndex}}';\n    var slot = {\n      attrs: {\n        'data-testid': 'core__inner-container',\n        ref: containerRef,\n        style: {\n          height: '100%'\n        }\n      },\n      children: React__namespace.createElement(React__namespace.Fragment, null),\n      subSlot: {\n        attrs: {\n          'data-testid': 'core__inner-pages',\n          className: classNames({\n            'rpv-core__inner-pages': true,\n            'rpv-core__inner-pages--horizontal': currentScrollMode === exports.ScrollMode.Horizontal,\n            'rpv-core__inner-pages--rtl': isRtl,\n            'rpv-core__inner-pages--vertical': currentScrollMode === exports.ScrollMode.Vertical,\n            'rpv-core__inner-pages--wrapped': currentScrollMode === exports.ScrollMode.Wrapped\n          }),\n          ref: pagesRef,\n          style: {\n            height: '100%',\n            overflow: 'auto',\n            position: 'relative'\n          }\n        },\n        children: React__namespace.createElement(\"div\", {\n          style: virtualizer.getContainerStyles()\n        }, virtualizer.virtualItems.map(function (item) {\n          return React__namespace.createElement(\"div\", {\n            \"aria-label\": pageLabel.replace('{{pageIndex}}', \"\".concat(item.index + 1)),\n            className: \"rpv-core__inner-page\",\n            key: item.index,\n            role: \"region\",\n            style: virtualizer.getItemStyles(item)\n          }, React__namespace.createElement(PageLayer, {\n            doc: doc,\n            height: pageHeight,\n            measureRef: item.measureRef,\n            pageIndex: item.index,\n            pageRotation: pagesRotation.has(item.index) ? pagesRotation.get(item.index) : 0,\n            plugins: plugins,\n            renderPage: renderPage,\n            renderQueueKey: renderQueueKey,\n            rotation: rotation,\n            scale: scale,\n            shouldRender: renderPageIndex === item.index,\n            width: pageWidth,\n            onExecuteNamedAction: executeNamedAction,\n            onJumpToDest: jumpToDestination,\n            onRenderCompleted: handlePageRenderCompleted,\n            onRotatePage: rotatePage\n          }));\n        }))\n      }\n    };\n    plugins.forEach(function (plugin) {\n      if (plugin.renderViewer) {\n        slot = plugin.renderViewer({\n          containerRef: containerRef,\n          doc: doc,\n          pageHeight: pageHeight,\n          pageWidth: pageWidth,\n          pagesRotation: pagesRotation,\n          rotation: rotation,\n          slot: slot,\n          themeContext: themeContext,\n          jumpToPage: jumpToPage,\n          openFile: openFile,\n          rotate: rotate,\n          rotatePage: rotatePage,\n          switchScrollMode: switchScrollMode,\n          zoom: zoom\n        });\n      }\n    });\n    return slot;\n  }, [plugins, virtualizer]);\n  var renderSlot = React__namespace.useCallback(function (slot) {\n    return React__namespace.createElement(\"div\", __assign({}, slot.attrs, {\n      style: slot.attrs && slot.attrs.style ? slot.attrs.style : {}\n    }), slot.children, slot.subSlot && renderSlot(slot.subSlot));\n  }, []);\n  return renderSlot(renderViewer());\n};\n\nvar LEVELS = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6, 5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10];\n\nvar decrease = function (currentLevel) {\n  var found = LEVELS.findIndex(function (item) {\n    return item >= currentLevel;\n  });\n  return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar RESERVE_HEIGHT = 45;\nvar RESERVE_WIDTH = 45;\n\nvar PageSizeCalculator = function (_a) {\n  var defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      render = _a.render,\n      scrollMode = _a.scrollMode;\n  var pagesRef = React__namespace.useRef();\n\n  var _b = React__namespace.useState({\n    pageHeight: 0,\n    pageWidth: 0,\n    scale: 1\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  React__namespace.useLayoutEffect(function () {\n    getPage(doc, 0).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      var w = viewport.width;\n      var h = viewport.height;\n      var pagesEle = pagesRef.current;\n\n      if (!pagesEle) {\n        return;\n      }\n\n      var parentEle = pagesEle.parentElement;\n      var scaleWidth = (parentEle.clientWidth - RESERVE_WIDTH) / w;\n      var scaleHeight = (parentEle.clientHeight - RESERVE_HEIGHT) / h;\n      var scaled = scaleWidth;\n\n      switch (scrollMode) {\n        case exports.ScrollMode.Horizontal:\n          scaled = Math.min(scaleWidth, scaleHeight);\n          break;\n\n        case exports.ScrollMode.Vertical:\n        default:\n          scaled = scaleWidth;\n          break;\n      }\n\n      var scale = defaultScale ? typeof defaultScale === 'string' ? calculateScale(parentEle, h, w, defaultScale) : defaultScale : decrease(scaled);\n      setPageSize({\n        pageHeight: h,\n        pageWidth: w,\n        scale: scale\n      });\n    });\n  }, [doc]);\n  var pageWidth = pageSize.pageWidth;\n  return pageWidth === 0 ? React__namespace.createElement(\"div\", {\n    className: \"rpv-core__page-size-calculator\",\n    \"data-testid\": \"core__page-size-calculating\",\n    ref: pagesRef\n  }, React__namespace.createElement(Spinner, null)) : render(pageSize);\n};\n\nvar LoadingStatus = function () {\n  function LoadingStatus() {}\n\n  return LoadingStatus;\n}();\n\nvar SubmitPassword;\n\n(function (SubmitPassword) {\n  SubmitPassword[SubmitPassword[\"REQUIRE_PASSWORD\"] = 0] = \"REQUIRE_PASSWORD\";\n  SubmitPassword[SubmitPassword[\"WRONG_PASSWORD\"] = 1] = \"WRONG_PASSWORD\";\n})(SubmitPassword || (SubmitPassword = {}));\n\nvar AskForPasswordState = function (_super) {\n  __extends(AskForPasswordState, _super);\n\n  function AskForPasswordState(verifyPassword, submitPassword) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPassword = verifyPassword;\n    _this.submitPassword = submitPassword;\n    return _this;\n  }\n\n  return AskForPasswordState;\n}(LoadingStatus);\n\nvar AskingPassword = function (_a) {\n  var submitPassword = _a.submitPassword,\n      verifyPassword = _a.verifyPassword,\n      onDocumentAskPassword = _a.onDocumentAskPassword;\n  var l10n = React__namespace.useContext(LocalizationContext).l10n;\n\n  var _b = React__namespace.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var submit = function () {\n    return verifyPassword(password);\n  };\n\n  var handleKeyDown = function (e) {\n    if (e.key === 'Enter') {\n      submit();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    if (onDocumentAskPassword) {\n      onDocumentAskPassword({\n        verifyPassword: verifyPassword\n      });\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-wrapper\"\n  }, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__asking-password': true,\n      'rpv-core__asking-password--rtl': isRtl\n    })\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-message\"\n  }, submitPassword === SubmitPassword.REQUIRE_PASSWORD && l10n.core.askingPassword.requirePasswordToOpen, submitPassword === SubmitPassword.WRONG_PASSWORD && l10n.core.wrongPassword.tryAgain), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-body\"\n  }, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__asking-password-input': true,\n      'rpv-core__asking-password-input--ltr': !isRtl,\n      'rpv-core__asking-password-input--rtl': isRtl\n    })\n  }, React__namespace.createElement(TextBox, {\n    testId: \"core__asking-password-input\",\n    type: \"password\",\n    value: password,\n    onChange: setPassword,\n    onKeyDown: handleKeyDown\n  })), React__namespace.createElement(PrimaryButton, {\n    onClick: submit\n  }, l10n.core.askingPassword.submit))));\n};\n\nvar CompletedState = function (_super) {\n  __extends(CompletedState, _super);\n\n  function CompletedState(doc) {\n    var _this = _super.call(this) || this;\n\n    _this.doc = doc;\n    return _this;\n  }\n\n  return CompletedState;\n}(LoadingStatus);\n\nvar FailureState = function (_super) {\n  __extends(FailureState, _super);\n\n  function FailureState(error) {\n    var _this = _super.call(this) || this;\n\n    _this.error = error;\n    return _this;\n  }\n\n  return FailureState;\n}(LoadingStatus);\n\nvar LoadingState = function (_super) {\n  __extends(LoadingState, _super);\n\n  function LoadingState(percentages) {\n    var _this = _super.call(this) || this;\n\n    _this.percentages = percentages;\n    return _this;\n  }\n\n  return LoadingState;\n}(LoadingStatus);\n\nvar DocumentLoader = function (_a) {\n  var characterMap = _a.characterMap,\n      file = _a.file,\n      httpHeaders = _a.httpHeaders,\n      render = _a.render,\n      renderError = _a.renderError,\n      renderLoader = _a.renderLoader,\n      transformGetDocumentParams = _a.transformGetDocumentParams,\n      withCredentials = _a.withCredentials,\n      onDocumentAskPassword = _a.onDocumentAskPassword;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var _b = React__namespace.useState(new LoadingState(0)),\n      status = _b[0],\n      setStatus = _b[1];\n\n  var _c = React__namespace.useState(0);\n\n  _c[0];\n  _c[1];\n  var docRef = React__namespace.useRef('');\n\n  var _d = React__namespace.useState(null);\n\n  _d[0];\n  _d[1];\n  var isMounted = useIsMounted();\n  React__namespace.useEffect(function () {\n    docRef.current = '';\n    setStatus(new LoadingState(0));\n    var worker = new PdfJsApi__namespace.PDFWorker({\n      name: \"PDFWorker_\".concat(Date.now())\n    });\n    var params = Object.assign({\n      httpHeaders: httpHeaders,\n      withCredentials: withCredentials,\n      worker: worker\n    }, 'string' === typeof file ? {\n      url: file\n    } : {\n      data: file\n    }, characterMap ? {\n      cMapUrl: characterMap.url,\n      cMapPacked: characterMap.isCompressed\n    } : {});\n    var transformParams = transformGetDocumentParams ? transformGetDocumentParams(params) : params;\n    var loadingTask = PdfJsApi__namespace.getDocument(transformParams);\n\n    loadingTask.onPassword = function (verifyPassword, reason) {\n      switch (reason) {\n        case PdfJsApi__namespace.PasswordResponses.NEED_PASSWORD:\n          isMounted.current && setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.REQUIRE_PASSWORD));\n          break;\n\n        case PdfJsApi__namespace.PasswordResponses.INCORRECT_PASSWORD:\n          isMounted.current && setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.WRONG_PASSWORD));\n          break;\n      }\n    };\n\n    loadingTask.onProgress = function (progress) {\n      var loaded = progress.total > 0 ? Math.min(100, 100 * progress.loaded / progress.total) : 100;\n\n      if (isMounted.current && docRef.current === '') {\n        setStatus(new LoadingState(loaded));\n      }\n    };\n\n    loadingTask.promise.then(function (doc) {\n      docRef.current = doc.loadingTask.docId;\n      isMounted.current && setStatus(new CompletedState(doc));\n    }, function (err) {\n      return isMounted.current && !worker.destroyed && setStatus(new FailureState({\n        message: err.message || 'Cannot load document',\n        name: err.name\n      }));\n    });\n    return function () {\n      loadingTask.destroy();\n      worker.destroy();\n    };\n  }, [file]);\n\n  if (status instanceof AskForPasswordState) {\n    return React__namespace.createElement(AskingPassword, {\n      submitPassword: status.submitPassword,\n      verifyPassword: status.verifyPassword,\n      onDocumentAskPassword: onDocumentAskPassword\n    });\n  }\n\n  if (status instanceof CompletedState) {\n    return render(status.doc);\n  }\n\n  if (status instanceof FailureState) {\n    return renderError ? renderError(status.error) : React__namespace.createElement(\"div\", {\n      className: classNames({\n        'rpv-core__doc-error': true,\n        'rpv-core__doc-error--rtl': isRtl\n      })\n    }, React__namespace.createElement(\"div\", {\n      className: \"rpv-core__doc-error-text\"\n    }, status.error.message));\n  }\n\n  return React__namespace.createElement(\"div\", {\n    \"data-testid\": \"core__doc-loading\",\n    className: classNames({\n      'rpv-core__doc-loading': true,\n      'rpv-core__doc-loading--rtl': isRtl\n    })\n  }, renderLoader ? renderLoader(status.percentages) : React__namespace.createElement(Spinner, null));\n};\n\nvar isDarkMode = function () {\n  return typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n};\n\nvar withTheme = function (theme, onSwitchTheme) {\n  var initialTheme = React__namespace.useMemo(function () {\n    return theme === 'auto' ? isDarkMode() ? 'dark' : 'light' : theme;\n  }, []);\n\n  var _a = React__namespace.useState(initialTheme),\n      currentTheme = _a[0],\n      setCurrentTheme = _a[1];\n\n  var prevTheme = usePrevious(currentTheme);\n  React__namespace.useEffect(function () {\n    if (theme !== 'auto') {\n      return;\n    }\n\n    var media = window.matchMedia('(prefers-color-scheme: dark)');\n\n    var handler = function (e) {\n      setCurrentTheme(e.matches ? 'dark' : 'light');\n    };\n\n    media.addEventListener('change', handler);\n    return function () {\n      return media.removeEventListener('change', handler);\n    };\n  }, []);\n  React__namespace.useEffect(function () {\n    if (currentTheme !== prevTheme && onSwitchTheme) {\n      onSwitchTheme(currentTheme);\n    }\n  }, [currentTheme]);\n  React__namespace.useEffect(function () {\n    if (theme !== currentTheme) {\n      setCurrentTheme(theme);\n    }\n  }, [theme]);\n  return {\n    currentTheme: currentTheme,\n    setCurrentTheme: setCurrentTheme\n  };\n};\n\nvar isSameUrl = function (a, b) {\n  var typeA = typeof a;\n  var typeB = typeof b;\n\n  if (typeA === 'string' && typeB === 'string' && a === b) {\n    return true;\n  }\n\n  if (typeA === 'object' && typeB === 'object') {\n    return a.length === b.length && a.every(function (v, i) {\n      return v === b[i];\n    });\n  }\n\n  return false;\n};\n\nvar Viewer = function (_a) {\n  var characterMap = _a.characterMap,\n      defaultScale = _a.defaultScale,\n      fileUrl = _a.fileUrl,\n      _b = _a.httpHeaders,\n      httpHeaders = _b === void 0 ? {} : _b,\n      _c = _a.initialPage,\n      initialPage = _c === void 0 ? 0 : _c,\n      localization = _a.localization,\n      _d = _a.plugins,\n      plugins = _d === void 0 ? [] : _d,\n      renderError = _a.renderError,\n      renderPage = _a.renderPage,\n      renderLoader = _a.renderLoader,\n      _e = _a.scrollMode,\n      scrollMode = _e === void 0 ? exports.ScrollMode.Vertical : _e,\n      transformGetDocumentParams = _a.transformGetDocumentParams,\n      _f = _a.theme,\n      theme = _f === void 0 ? {\n    direction: exports.TextDirection.LeftToRight,\n    theme: 'light'\n  } : _f,\n      _g = _a.withCredentials,\n      withCredentials = _g === void 0 ? false : _g,\n      onDocumentAskPassword = _a.onDocumentAskPassword,\n      _h = _a.onDocumentLoad,\n      onDocumentLoad = _h === void 0 ? function () {} : _h,\n      _j = _a.onPageChange,\n      onPageChange = _j === void 0 ? function () {} : _j,\n      _k = _a.onRotate,\n      onRotate = _k === void 0 ? function () {} : _k,\n      _l = _a.onRotatePage,\n      onRotatePage = _l === void 0 ? function () {} : _l,\n      _m = _a.onSwitchTheme,\n      onSwitchTheme = _m === void 0 ? function () {} : _m,\n      _o = _a.onZoom,\n      onZoom = _o === void 0 ? function () {} : _o;\n\n  var _p = React__namespace.useState({\n    data: fileUrl,\n    name: typeof fileUrl === 'string' ? fileUrl : '',\n    shouldLoad: false\n  }),\n      file = _p[0],\n      setFile = _p[1];\n\n  var openFile = function (fileName, data) {\n    setFile({\n      data: data,\n      name: fileName,\n      shouldLoad: true\n    });\n  };\n\n  var _q = React__namespace.useState(false),\n      visible = _q[0],\n      setVisible = _q[1];\n\n  var prevFile = usePrevious(file);\n  React__namespace.useEffect(function () {\n    if (!isSameUrl(prevFile.data, fileUrl)) {\n      setFile({\n        data: fileUrl,\n        name: typeof fileUrl === 'string' ? fileUrl : '',\n        shouldLoad: visible\n      });\n    }\n  }, [fileUrl, visible]);\n\n  var visibilityChanged = function (params) {\n    setVisible(params.isVisible);\n\n    if (params.isVisible) {\n      setFile(function (currentFile) {\n        return Object.assign({}, currentFile, {\n          shouldLoad: true\n        });\n      });\n    }\n  };\n\n  var containerRef = useIntersectionObserver({\n    onVisibilityChanged: visibilityChanged\n  });\n  var themeProps = typeof theme === 'string' ? {\n    direction: exports.TextDirection.LeftToRight,\n    theme: theme\n  } : theme;\n\n  var _r = React__namespace.useState(localization || DefaultLocalization),\n      l10n = _r[0],\n      setL10n = _r[1];\n\n  var localizationContext = {\n    l10n: l10n,\n    setL10n: setL10n\n  };\n  var themeContext = Object.assign({}, {\n    direction: themeProps.direction\n  }, withTheme(themeProps.theme || 'light', onSwitchTheme));\n  React__namespace.useEffect(function () {\n    if (localization) {\n      setL10n(localization);\n    }\n  }, [localization]);\n  return React__namespace.createElement(LocalizationContext.Provider, {\n    value: localizationContext\n  }, React__namespace.createElement(ThemeContext.Provider, {\n    value: themeContext\n  }, React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__viewer rpv-core__viewer--\".concat(themeContext.currentTheme),\n    \"data-testid\": \"core__viewer\",\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, file.shouldLoad && React__namespace.createElement(DocumentLoader, {\n    characterMap: characterMap,\n    file: file.data,\n    httpHeaders: httpHeaders,\n    render: function (doc) {\n      return React__namespace.createElement(PageSizeCalculator, {\n        defaultScale: defaultScale,\n        doc: doc,\n        render: function (ps) {\n          return React__namespace.createElement(Inner, {\n            currentFile: {\n              data: file.data,\n              name: file.name\n            },\n            defaultScale: defaultScale,\n            doc: doc,\n            initialPage: initialPage,\n            pageSize: ps,\n            plugins: plugins,\n            renderPage: renderPage,\n            scrollMode: scrollMode,\n            viewerState: {\n              file: file,\n              pageIndex: -1,\n              pageHeight: ps.pageHeight,\n              pageWidth: ps.pageWidth,\n              pagesRotation: new Map(),\n              rotation: 0,\n              scale: ps.scale,\n              scrollMode: scrollMode\n            },\n            onDocumentLoad: onDocumentLoad,\n            onOpenFile: openFile,\n            onPageChange: onPageChange,\n            onRotate: onRotate,\n            onRotatePage: onRotatePage,\n            onZoom: onZoom\n          });\n        },\n        scrollMode: scrollMode\n      });\n    },\n    renderError: renderError,\n    renderLoader: renderLoader,\n    transformGetDocumentParams: transformGetDocumentParams,\n    withCredentials: withCredentials,\n    onDocumentAskPassword: onDocumentAskPassword\n  }))));\n};\n\nvar Worker = function (_a) {\n  var children = _a.children,\n      workerUrl = _a.workerUrl;\n  PdfJsApi__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n  return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LazyRender = LazyRender;\nexports.LocalizationContext = LocalizationContext;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.MinimalButton = MinimalButton;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.Spinner = Spinner;\nexports.Splitter = Splitter;\nexports.TextBox = TextBox;\nexports.ThemeContext = ThemeContext;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.classNames = classNames;\nexports.createStore = createStore;\nexports.getDestination = getDestination;\nexports.getPage = getPage;\nexports.isMac = isMac;\nexports.useIntersectionObserver = useIntersectionObserver;\nexports.useIsMounted = useIsMounted;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;\nexports.useRenderQueue = useRenderQueue;","map":{"version":3,"names":["Object","defineProperty","exports","value","React","require","PdfJsApi","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","PdfJsApi__namespace","AnnotationType","extendStatics","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","__assign","assign","t","s","i","arguments","length","call","apply","TextDirection","ThemeContext","createContext","currentTheme","direction","LeftToRight","setCurrentTheme","classNames","classes","result","clazz","push","join","Button","_a","children","testId","onClick","useContext","isRtl","RightToLeft","attrs","createElement","className","type","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","useIntersectionObserver","props","containerRef","useRef","once","threshold","onVisibilityChanged","container","current","intersectionTracker","IntersectionObserver","entries","entry","isVisible","isIntersecting","ratio","intersectionRatio","unobserve","disconnect","observe","LazyRender","_b","useState","visible","setVisible","containerAttrs","handleVisibilityChanged","params","ref","Menu","visibleMenuItemsRef","handleKeyDown","key","preventDefault","moveToItem","_","currentIndex","items","getNextItem","findIndex","item","getAttribute","targetIndex","Math","min","max","setAttribute","focus","findVisibleItems","visibleItems","querySelectorAll","HTMLElement","parent_1","parentElement","getComputedStyle","display","document","addEventListener","removeEventListener","role","tabIndex","MenuDivider","Icon","ignoreDirection","_c","size","width","concat","focusable","height","viewBox","CheckIcon","MenuItem","checked","icon","_d","isDisabled","MinimalButton","ariaLabel","ariaKeyShortcuts","_e","isSelected","PrimaryButton","ProgressBar","progress","style","Separator","Spinner","Splitter","constrain","resizerRef","leftSideRef","rightSideRef","xRef","yRef","leftWidthRef","resizerWidthRef","eventOptions","capture","handleMouseMove","resizerEle","leftSide","rightSide","resizerWidth","dx","clientX","firstHalfSize","containerWidth","getBoundingClientRect","firstHalfPercentage","classList","add","secondHalfSize","secondHalfPercentage","body","handleMouseUp","remove","handleMouseDown","clientY","previousElementSibling","nextElementSibling","onMouseDown","TextBox","autoFocus","placeholder","_f","onChange","_g","onKeyDown","textboxRef","target","textboxEle","x","scrollX","y","scrollY","scrollTo","useIsMounted","isMountedRef","PageRenderStatus","OUT_OF_RANGE_VISIBILITY","useRenderQueue","doc","numPages","docId","loadingTask","initialPageVisibilities","useMemo","fill","map","pageIndex","renderStatus","NotRenderedYet","visibility","latestRef","currentRenderingPage","startRange","endRange","visibilities","markNotRendered","markRendered","Rendered","markRendering","Rendering","setRange","startIndex","endIndex","setOutOfRange","setVisibility","getHighestPriorityPage","visiblePages","slice","filter","firstVisiblePage","lastVisiblePage","numVisiblePages","isInRange","core","askingPassword","requirePasswordToOpen","submit","wrongPassword","tryAgain","pageLabel","enUs","DefaultLocalization","LocalizationContext","l10n","setL10n","id","uniqueId","useClickOutside","closeOnClickOutside","targetRef","onClickOutside","clickHandler","contains","useEscape","handler","keyUpHandler","useLockScroll","originalStyle","overflow","ModalBody","ariaControlsSuffix","closeOnEscape","onToggle","contentRef","contentEle","maxHeight","clientHeight","ModalOverlay","ToggleStatus","useToggle","isOpened","opened","setOpened","toggle","status","Close","Open","Toggle","Portal","content","Fragment","Modal","controlsSuffix","renderTarget","renderContent","Position","calculatePosition","position","offset","targetRect","contentRect","top","left","TopLeft","TopCenter","TopRight","RightTop","RightCenter","RightBottom","BottomLeft","BottomCenter","BottomRight","LeftTop","LeftCenter","LeftBottom","usePosition","anchorRef","targetEle","anchorEle","anchorRect","Arrow","customClassName","PopoverBody","onClose","innerRef","innerContentEle","innerId","PopoverOverlay","Popover","ariaHasPopup","lockScroll","TooltipBody","Tooltip","activeElement","close","open","onBlur","shouldHideTooltip","relatedTarget","currentTarget","onFocus","onMouseEnter","onMouseLeave","createStore","initialState","state","listeners","subscribe","unsubscribe","f","update","data","LayerRenderStatus","PageMode","RotateDirection","ScrollMode","SpecialZoomLevel","isMac","test","navigator","platform","normalizeDestination","destArray","name","bottomOffset","leftOffset","scaleTo","PageFit","PageWidth","pageOutlinesMap","Map","pagesMap","generateRefKey","outline","num","gen","getPageIndex","cacheOutlineRef","set","clearPagesCache","clear","getPage","Promise","reject","pageKey","page","resolve","then","getDestination","dest","res","outlineRef_1","usePrevious","useDebounceCallback","callback","wait","timeout","cleanup","clearTimeout","useCallback","args","_i","setTimeout","useTrackResize","onResize","io","ResizeObserver","clamp","findNearest","low","high","getItemValue","middle","currentValue","rectReducer","action","rect","useMeasureRect","elementRef","element","setElement","initializedRectRef","useReducer","dispatch","tracker","easeOutQuart","pow","smoothScroll","ele","scrollMode","targetPosition","duration","easing","onReachTarget","start","Horizontal","scrollLeft","Vertical","scrollTop","startTime","requestId","loop","currentTime","time","percent","easedPercent","updatePosition","requestAnimationFrame","cancelAnimationFrame","useRafState","isMounted","rafRef","setState","setRafState","ZERO_OFFSET$1","SCROLL_EVENT_OPTIONS","passive","SCROLL_DURATION","useScroll","onSmoothScroll","scrollOffset","setScrollOffset","factor","handleSmoothScrollingComplete","handleScroll","withSmoothScroll","currentScrollMode","ZERO_RECT","ZERO_OFFSET","calculateRange","measurements","outerSize","currentOffset","getOffset","index","Wrapped","startTop","end","maxVisbilityIndex","maxVisbility","itemRect","topLeftCorner","visibleSize","visibleWidth","visibleHeight","useVirtual","estimateSize","numberOfItems","setStartRange","setEndRange","parentRef","transformSize","isSmoothScrolling","setSmoothScrolling","parentRect","totalSize","cacheMeasure","setCacheMeasure","totalWidth","firstOfRow","start_1","end_1","virtualItems","_loop_1","virtualItem","undefined","measureRef","measuredSize","old","scrollToItem","normalizedIndex","measurement","getContainerStyles","getItemStyles","sideProperty","transform","zoom","scale","updateOffset","AnnotationBorderStyleType","dateRegex","RegExp","parse","defaultValue","parsed","parseInt","convertDate","input","matches","exec","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","Date","UTC","PopupWrapper","annotation","dateStr","modificationDate","date","toLocaleDateString","toLocaleTimeString","containerEle","annotationEle","querySelector","zIndex","annotationType","Popup","title","contents","split","TogglePopupBy","useTogglePopup","Hover","togglePopupBy","setTooglePopupBy","toggleOnClick","Click","openOnHover","closeOnHover","Annotation","ignoreBorder","hasPopup","isRenderable","viewport","normalizeRect","r","bound","view","styles","borderColor","borderRadius","borderStyle","borderWidth","Dashed","Solid","Underline","borderBottomStyle","Beveled","Inset","horizontalCornerRadius","verticalCornerRadius","color","popup","slot","transformOrigin","Caret","Circle","preserveAspectRatio","version","cy","rx","ry","stroke","strokeWidth","getFileName","url","str","pop","downloadFile","blobUrl","URL","createObjectURL","Blob","link","href","appendChild","click","removeChild","revokeObjectURL","FileAttachment","doubleClick","file","filename","onDoubleClick","FreeText","ignoredParents","parentType","indexOf","parentId","parent","parseFloat","Highlight","childAnnotation","hasQuadPoints","quadPoints","annotations","quadPoint","ann","Ink","inkLists","inkList","points","Line","x1","lineCoordinates","x2","y1","y2","Link","onExecuteNamedAction","onJumpToDest","unsafeUrl","externalUrl","rel","newWindow","Polygon","vertices","Polyline","Square","Squiggly","Stamp","StrikeOut","CommentIcon","HelpIcon","KeyIcon","NoteIcon","ParagraphIcon","TriangleIcon","Text","toLowerCase","AnnotationLayerBody","plugins","rotation","getViewport","clonedViewPort","clone","dontFlip","filterAnnotations","plugin","onAnnotationLayerRender","find","AnnotationLoader","renderAnnotations","loading","setStatus","getAnnotations","intent","AnnotationLayer","floatToRatio","limit","floor","a","c","numerator","denominator","roundToDivide","remainder","MAX_CANVAS_SIZE","CanvasLayer","onRenderCanvasCompleted","canvasRef","renderTask","task","cancel","canvasEle","onCanvasLayerRender","PreRender","outputScale","devicePixelRatio","maxScale","sqrt","shouldScaleByCSS","removeProperty","possibleScale","hidden","canvasContext","getContext","alpha","render","promise","DidRender","SvgLayer","empty","innerHTML","getOperatorList","operatorList","graphic","SVGGraphics","commonObjs","objs","getSVG","svg","TextLayer","onRenderTextCompleted","spans","span","breaks","br","removeAttribute","onTextLayerRender","getTextContent","textContent","renderTextLayer","enhanceTextSelection","PageLayer","pageRotation","renderPage","renderQueueKey","shouldRender","onRenderCompleted","onRotatePage","pageHeight","pageWidth","viewportRotation","pageSize","setPageSize","canvasLayerRendered","setCanvasLayerRendered","textLayerRendered","setTextLayerRendered","isVertical","abs","scaledWidth","scaledHeight","w","h","rotationValue","renderQueueKeyRef","determinePageSize","pdfPage","defaultPageRenderer","canvasLayer","textLayer","annotationLayer","renderPageLayer","handleRenderCanvasCompleted","handleRenderTextCompleted","svgLayer","idx","getFileExt","SCROLL_BAR_WIDTH","PAGE_PADDING","calculateScale","ActualSize","clientWidth","NUM_OVERSCAN_PAGES","Inner","currentFile","defaultScale","initialPage","viewerState","onDocumentLoad","onOpenFile","onPageChange","onRotate","onZoom","themeContext","pagesRef","currentPage","setCurrentPage","setRotation","pagesRotationChanged","setPagesRotationChanged","pagesRotation","setPagesRotation","setCurrentScrollMode","previousScrollMode","setScale","stateRef","keepSpecialZoomLevelRef","_h","renderPageIndex","setRenderPageIndex","_j","setRenderQueueKey","renderQueue","sizes","virtualizer","handlePagesResize","setViewerState","newState","onViewerStateChange","getPagesContainer","getViewerState","jumpToDestination","pagesContainer","currentState","bottom","updateScale","boundingRect","convertToViewportPoint","jumpToPage","openFile","reader","FileReader","readAsArrayBuffer","onload","bytes","Uint8Array","rotate","degrees","Backward","currentRotation","updateRotation","rotatePage","rotations","currentPageRotation","has","finalRotation","updateRotations","rotatedPage","switchScrollMode","newScale","pagesEle","pluginMethods","install","uninstall","latestPage","renderNextPage","handlePageRenderCompleted","nextPage","executeNamedAction","previousPage","renderViewer","subSlot","replace","renderSlot","LEVELS","decrease","currentLevel","found","RESERVE_HEIGHT","RESERVE_WIDTH","PageSizeCalculator","parentEle","scaleWidth","scaleHeight","scaled","LoadingStatus","SubmitPassword","AskForPasswordState","_super","verifyPassword","submitPassword","_this","AskingPassword","onDocumentAskPassword","password","setPassword","REQUIRE_PASSWORD","WRONG_PASSWORD","CompletedState","FailureState","error","LoadingState","percentages","DocumentLoader","characterMap","httpHeaders","renderError","renderLoader","transformGetDocumentParams","withCredentials","docRef","worker","PDFWorker","now","cMapUrl","cMapPacked","isCompressed","transformParams","getDocument","onPassword","reason","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","onProgress","loaded","total","err","destroyed","message","destroy","isDarkMode","matchMedia","withTheme","theme","onSwitchTheme","initialTheme","prevTheme","media","isSameUrl","typeA","typeB","every","v","Viewer","fileUrl","localization","_k","_l","_m","_o","_p","shouldLoad","setFile","fileName","_q","prevFile","visibilityChanged","themeProps","_r","localizationContext","Provider","ps","Worker","workerUrl","GlobalWorkerOptions","workerSrc"],"sources":["/app/client/node_modules/@react-pdf-viewer/core/lib/cjs/core.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar PdfJsApi = require('pdfjs-dist');\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n[\"default\"] = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\nvar PdfJsApi__namespace = /*#__PURE__*/_interopNamespace(PdfJsApi);\n\nexports.AnnotationType = void 0;\n(function (AnnotationType) {\n    AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n    AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n    AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n    AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n    AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n    AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n    AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n    AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n    AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n    AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n    AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n    AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n    AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n    AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n    AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n    AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n    AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(exports.AnnotationType || (exports.AnnotationType = {}));\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nexports.TextDirection = void 0;\n(function (TextDirection) {\n    TextDirection[\"RightToLeft\"] = \"RTL\";\n    TextDirection[\"LeftToRight\"] = \"LTR\";\n})(exports.TextDirection || (exports.TextDirection = {}));\nvar ThemeContext = React__namespace.createContext({\n    currentTheme: 'light',\n    direction: exports.TextDirection.LeftToRight,\n    setCurrentTheme: function () { },\n});\n\nvar classNames = function (classes) {\n    var result = [];\n    Object.keys(classes).forEach(function (clazz) {\n        if (clazz && classes[clazz]) {\n            result.push(clazz);\n        }\n    });\n    return result.join(' ');\n};\n\nvar Button = function (_a) {\n    var children = _a.children, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\n            'rpv-core__button': true,\n            'rpv-core__button--rtl': isRtl,\n        }), type: \"button\", onClick: onClick }, attrs), children));\n};\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__namespace.useLayoutEffect : React__namespace.useEffect;\n\nvar useIntersectionObserver = function (props) {\n    var containerRef = React__namespace.useRef(null);\n    var once = props.once, threshold = props.threshold, onVisibilityChanged = props.onVisibilityChanged;\n    useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var intersectionTracker = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entry) {\n                var isVisible = entry.isIntersecting;\n                var ratio = entry.intersectionRatio;\n                onVisibilityChanged({ isVisible: isVisible, ratio: ratio });\n                if (isVisible && once) {\n                    intersectionTracker.unobserve(container);\n                    intersectionTracker.disconnect();\n                }\n            });\n        }, {\n            threshold: threshold || 0,\n        });\n        intersectionTracker.observe(container);\n        return function () {\n            intersectionTracker.unobserve(container);\n            intersectionTracker.disconnect();\n        };\n    }, []);\n    return containerRef;\n};\n\nvar LazyRender = function (_a) {\n    var attrs = _a.attrs, children = _a.children, testId = _a.testId;\n    var _b = React__namespace.useState(false), visible = _b[0], setVisible = _b[1];\n    var containerAttrs = testId ? __assign(__assign({}, attrs), { 'data-testid': testId }) : attrs;\n    var handleVisibilityChanged = function (params) {\n        if (params.isVisible) {\n            setVisible(true);\n        }\n    };\n    var containerRef = useIntersectionObserver({\n        once: true,\n        onVisibilityChanged: handleVisibilityChanged,\n    });\n    return (React__namespace.createElement(\"div\", __assign({ ref: containerRef }, containerAttrs), visible && children));\n};\n\nvar Menu = function (_a) {\n    var children = _a.children;\n    var containerRef = React__namespace.useRef();\n    var visibleMenuItemsRef = React__namespace.useRef([]);\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var handleKeyDown = function (e) {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        switch (e.key) {\n            case 'Tab':\n                e.preventDefault();\n                break;\n            case 'ArrowDown':\n                e.preventDefault();\n                moveToItem(function (_, currentIndex) { return currentIndex + 1; });\n                break;\n            case 'ArrowUp':\n                e.preventDefault();\n                moveToItem(function (_, currentIndex) { return currentIndex - 1; });\n                break;\n            case 'End':\n                e.preventDefault();\n                moveToItem(function (items, _) { return items.length - 1; });\n                break;\n            case 'Home':\n                e.preventDefault();\n                moveToItem(function (_, __) { return 0; });\n                break;\n        }\n    };\n    var moveToItem = function (getNextItem) {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var items = visibleMenuItemsRef.current;\n        var currentIndex = items.findIndex(function (item) { return item.getAttribute('tabindex') === '0'; });\n        var targetIndex = Math.min(items.length - 1, Math.max(0, getNextItem(items, currentIndex)));\n        if (currentIndex >= 0 && currentIndex <= items.length - 1) {\n            items[currentIndex].setAttribute('tabindex', '-1');\n        }\n        items[targetIndex].setAttribute('tabindex', '0');\n        items[targetIndex].focus();\n    };\n    var findVisibleItems = function (container) {\n        var visibleItems = [];\n        container.querySelectorAll('.rpv-core__menu-item[role=\"menuitem\"]').forEach(function (item) {\n            if (item instanceof HTMLElement) {\n                var parent_1 = item.parentElement;\n                if (parent_1 === container) {\n                    visibleItems.push(item);\n                }\n                else {\n                    if (window.getComputedStyle(parent_1).display !== 'none') {\n                        visibleItems.push(item);\n                    }\n                }\n            }\n        });\n        return visibleItems;\n    };\n    useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var visibleItems = findVisibleItems(container);\n        visibleMenuItemsRef.current = visibleItems;\n    }, []);\n    useIsomorphicLayoutEffect(function () {\n        document.addEventListener('keydown', handleKeyDown);\n        return function () {\n            document.removeEventListener('keydown', handleKeyDown);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, \"aria-orientation\": \"vertical\", className: classNames({\n            'rpv-core__menu': true,\n            'rpv-core__menu--rtl': isRtl,\n        }), role: \"menu\", tabIndex: 0 }, children));\n};\n\nvar MenuDivider = function () { return (React__namespace.createElement(\"div\", { \"aria-orientation\": \"horizontal\", className: \"rpv-core__menu-divider\", role: \"separator\" })); };\n\nvar Icon = function (_a) {\n    var children = _a.children, _b = _a.ignoreDirection, ignoreDirection = _b === void 0 ? false : _b, _c = _a.size, size = _c === void 0 ? 24 : _c;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = !ignoreDirection && direction === exports.TextDirection.RightToLeft;\n    var width = \"\".concat(size || 24, \"px\");\n    return (React__namespace.createElement(\"svg\", { \"aria-hidden\": \"true\", className: classNames({\n            'rpv-core__icon': true,\n            'rpv-core__icon--rtl': isRtl,\n        }), focusable: \"false\", height: width, viewBox: \"0 0 24 24\", width: width }, children));\n};\n\nvar CheckIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M23.5,0.499l-16.5,23l-6.5-6.5\" }))); };\n\nvar MenuItem = function (_a) {\n    var _b = _a.checked, checked = _b === void 0 ? false : _b, children = _a.children, _c = _a.icon, icon = _c === void 0 ? null : _c, _d = _a.isDisabled, isDisabled = _d === void 0 ? false : _d, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\n            'rpv-core__menu-item': true,\n            'rpv-core__menu-item--disabled': isDisabled,\n            'rpv-core__menu-item--ltr': !isRtl,\n            'rpv-core__menu-item--rtl': isRtl,\n        }), role: \"menuitem\", tabIndex: -1, type: \"button\", onClick: onClick }, attrs),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__menu-item-icon': true,\n                'rpv-core__menu-item-icon--ltr': !isRtl,\n                'rpv-core__menu-item-icon--rtl': isRtl,\n            }) }, icon),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__menu-item-label': true,\n                'rpv-core__menu-item-label--ltr': !isRtl,\n                'rpv-core__menu-item-label--rtl': isRtl,\n            }) }, children),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__menu-item-check': true,\n                'rpv-core__menu-item-check--ltr': !isRtl,\n                'rpv-core__menu-item-check--rtl': isRtl,\n            }) }, checked && React__namespace.createElement(CheckIcon, null))));\n};\n\nvar MinimalButton = function (_a) {\n    var _b = _a.ariaLabel, ariaLabel = _b === void 0 ? '' : _b, _c = _a.ariaKeyShortcuts, ariaKeyShortcuts = _c === void 0 ? '' : _c, children = _a.children, _d = _a.isDisabled, isDisabled = _d === void 0 ? false : _d, _e = _a.isSelected, isSelected = _e === void 0 ? false : _e, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ \"aria-label\": ariaLabel }, (ariaKeyShortcuts && { 'aria-keyshortcuts': ariaKeyShortcuts }), (isDisabled && { 'aria-disabled': true }), { className: classNames({\n            'rpv-core__minimal-button': true,\n            'rpv-core__minimal-button--disabled': isDisabled,\n            'rpv-core__minimal-button--rtl': isRtl,\n            'rpv-core__minimal-button--selected': isSelected,\n        }), type: \"button\", onClick: onClick }, attrs), children));\n};\n\nvar PrimaryButton = function (_a) {\n    var children = _a.children, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\n            'rpv-core__primary-button': true,\n            'rpv-core__primary-button--rtl': isRtl,\n        }), type: \"button\", onClick: onClick }, attrs), children));\n};\n\nvar ProgressBar = function (_a) {\n    var progress = _a.progress;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    return (React__namespace.createElement(\"div\", { className: classNames({\n            'rpv-core__progress-bar': true,\n            'rpv-core__progress-bar--rtl': isRtl,\n        }) },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__progress-bar-progress\", style: { width: \"\".concat(progress, \"%\") } },\n            progress,\n            \"%\")));\n};\n\nvar Separator = function () { return React__namespace.createElement(\"div\", { className: \"rpv-core__separator\" }); };\n\nvar Spinner = function (_a) {\n    var _b = _a.size, size = _b === void 0 ? '4rem' : _b, testId = _a.testId;\n    var _c = React__namespace.useState(false), visible = _c[0], setVisible = _c[1];\n    var attrs = testId ? { 'data-testid': testId } : {};\n    var handleVisibilityChanged = function (params) {\n        setVisible(params.isVisible);\n    };\n    var containerRef = useIntersectionObserver({\n        onVisibilityChanged: handleVisibilityChanged,\n    });\n    return (React__namespace.createElement(\"div\", __assign({}, attrs, { className: classNames({\n            'rpv-core__spinner': true,\n            'rpv-core__spinner--animating': visible,\n        }), ref: containerRef, style: { height: size, width: size } })));\n};\n\nvar Splitter = function (_a) {\n    var constrain = _a.constrain;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var resizerRef = React__namespace.useRef();\n    var leftSideRef = React__namespace.useRef();\n    var rightSideRef = React__namespace.useRef();\n    var xRef = React__namespace.useRef(0);\n    var yRef = React__namespace.useRef(0);\n    var leftWidthRef = React__namespace.useRef(0);\n    var resizerWidthRef = React__namespace.useRef(0);\n    var eventOptions = {\n        capture: true,\n    };\n    var handleMouseMove = function (e) {\n        var resizerEle = resizerRef.current;\n        var leftSide = leftSideRef.current;\n        var rightSide = rightSideRef.current;\n        if (!resizerEle || !leftSide || !rightSide) {\n            return;\n        }\n        var resizerWidth = resizerWidthRef.current;\n        var dx = e.clientX - xRef.current;\n        var firstHalfSize = leftWidthRef.current + (isRtl ? -dx : dx);\n        var containerWidth = resizerEle.parentElement.getBoundingClientRect().width;\n        var firstHalfPercentage = (firstHalfSize * 100) / containerWidth;\n        resizerEle.classList.add('rpv-core__splitter--resizing');\n        if (constrain) {\n            var secondHalfSize = containerWidth - firstHalfSize - resizerWidth;\n            var secondHalfPercentage = (secondHalfSize * 100) / containerWidth;\n            if (!constrain({ firstHalfPercentage: firstHalfPercentage, firstHalfSize: firstHalfSize, secondHalfPercentage: secondHalfPercentage, secondHalfSize: secondHalfSize })) {\n                return;\n            }\n        }\n        leftSide.style.width = \"\".concat(firstHalfPercentage, \"%\");\n        document.body.classList.add('rpv-core__splitter-body--resizing');\n        leftSide.classList.add('rpv-core__splitter-sibling--resizing');\n        rightSide.classList.add('rpv-core__splitter-sibling--resizing');\n    };\n    var handleMouseUp = function (e) {\n        var resizerEle = resizerRef.current;\n        var leftSide = leftSideRef.current;\n        var rightSide = rightSideRef.current;\n        if (!resizerEle || !leftSide || !rightSide) {\n            return;\n        }\n        document.body.classList.remove('rpv-core__splitter-body--resizing');\n        resizerEle.classList.remove('rpv-core__splitter--resizing');\n        leftSide.classList.remove('rpv-core__splitter-sibling--resizing');\n        rightSide.classList.remove('rpv-core__splitter-sibling--resizing');\n        document.removeEventListener('mousemove', handleMouseMove, eventOptions);\n        document.removeEventListener('mouseup', handleMouseUp, eventOptions);\n    };\n    var handleMouseDown = function (e) {\n        var leftSide = leftSideRef.current;\n        if (!leftSide) {\n            return;\n        }\n        xRef.current = e.clientX;\n        yRef.current = e.clientY;\n        leftWidthRef.current = leftSide.getBoundingClientRect().width;\n        document.addEventListener('mousemove', handleMouseMove, eventOptions);\n        document.addEventListener('mouseup', handleMouseUp, eventOptions);\n    };\n    React__namespace.useEffect(function () {\n        var resizerEle = resizerRef.current;\n        if (!resizerEle) {\n            return;\n        }\n        resizerWidthRef.current = resizerEle.getBoundingClientRect().width;\n        leftSideRef.current = resizerEle.previousElementSibling;\n        rightSideRef.current = resizerEle.nextElementSibling;\n    }, []);\n    return React__namespace.createElement(\"div\", { ref: resizerRef, className: \"rpv-core__splitter\", onMouseDown: handleMouseDown });\n};\n\nvar TextBox = function (_a) {\n    var _b = _a.ariaLabel, ariaLabel = _b === void 0 ? '' : _b, _c = _a.autoFocus, autoFocus = _c === void 0 ? false : _c, _d = _a.placeholder, placeholder = _d === void 0 ? '' : _d, testId = _a.testId, _e = _a.type, type = _e === void 0 ? 'text' : _e, _f = _a.value, value = _f === void 0 ? '' : _f, onChange = _a.onChange, _g = _a.onKeyDown, onKeyDown = _g === void 0 ? function () { } : _g;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var textboxRef = React__namespace.useRef();\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = {\n        ref: textboxRef,\n        'data-testid': '',\n        'aria-label': ariaLabel,\n        className: classNames({\n            'rpv-core__textbox': true,\n            'rpv-core__textbox--rtl': isRtl,\n        }),\n        placeholder: placeholder,\n        value: value,\n        onChange: function (e) { return onChange(e.target.value); },\n        onKeyDown: onKeyDown,\n    };\n    if (testId) {\n        attrs['data-testid'] = testId;\n    }\n    useIsomorphicLayoutEffect(function () {\n        if (autoFocus) {\n            var textboxEle = textboxRef.current;\n            if (textboxEle) {\n                var x = window.scrollX;\n                var y = window.scrollY;\n                textboxEle.focus();\n                window.scrollTo(x, y);\n            }\n        }\n    }, []);\n    return type === 'text' ? React__namespace.createElement(\"input\", __assign({ type: \"text\" }, attrs)) : React__namespace.createElement(\"input\", __assign({ type: \"password\" }, attrs));\n};\n\nvar useIsMounted = function () {\n    var isMountedRef = React__namespace.useRef(false);\n    React__namespace.useEffect(function () {\n        isMountedRef.current = true;\n        return function () {\n            isMountedRef.current = false;\n        };\n    }, []);\n    return isMountedRef;\n};\n\nvar PageRenderStatus;\n(function (PageRenderStatus) {\n    PageRenderStatus[\"NotRenderedYet\"] = \"NotRenderedYet\";\n    PageRenderStatus[\"Rendering\"] = \"Rendering\";\n    PageRenderStatus[\"Rendered\"] = \"Rendered\";\n})(PageRenderStatus || (PageRenderStatus = {}));\nvar OUT_OF_RANGE_VISIBILITY = -9999;\nvar useRenderQueue = function (_a) {\n    var doc = _a.doc;\n    var numPages = doc.numPages;\n    var docId = doc.loadingTask.docId;\n    var initialPageVisibilities = React__namespace.useMemo(function () {\n        return Array(numPages)\n            .fill(null)\n            .map(function (_, pageIndex) { return ({\n            pageIndex: pageIndex,\n            renderStatus: PageRenderStatus.NotRenderedYet,\n            visibility: OUT_OF_RANGE_VISIBILITY,\n        }); });\n    }, [docId]);\n    var latestRef = React__namespace.useRef({\n        currentRenderingPage: -1,\n        startRange: 0,\n        endRange: numPages - 1,\n        visibilities: initialPageVisibilities,\n    });\n    var markNotRendered = function () {\n        for (var i = 0; i < numPages; i++) {\n            latestRef.current.visibilities[i].renderStatus = PageRenderStatus.NotRenderedYet;\n        }\n    };\n    var markRendered = function (pageIndex) {\n        latestRef.current.visibilities[pageIndex].renderStatus = PageRenderStatus.Rendered;\n    };\n    var markRendering = function (pageIndex) {\n        if (latestRef.current.currentRenderingPage !== -1 &&\n            latestRef.current.currentRenderingPage !== pageIndex &&\n            latestRef.current.visibilities[latestRef.current.currentRenderingPage].renderStatus ===\n                PageRenderStatus.Rendering) {\n            latestRef.current.visibilities[latestRef.current.currentRenderingPage].renderStatus =\n                PageRenderStatus.NotRenderedYet;\n        }\n        latestRef.current.visibilities[pageIndex].renderStatus = PageRenderStatus.Rendering;\n        latestRef.current.currentRenderingPage = pageIndex;\n    };\n    var setRange = function (startIndex, endIndex) {\n        latestRef.current.startRange = startIndex;\n        latestRef.current.endRange = endIndex;\n        for (var i = 0; i < numPages; i++) {\n            if (i < startIndex || i > endIndex) {\n                latestRef.current.visibilities[i].visibility = OUT_OF_RANGE_VISIBILITY;\n                latestRef.current.visibilities[i].renderStatus = PageRenderStatus.NotRenderedYet;\n            }\n        }\n    };\n    var setOutOfRange = function (pageIndex) {\n        setVisibility(pageIndex, OUT_OF_RANGE_VISIBILITY);\n    };\n    var setVisibility = function (pageIndex, visibility) {\n        latestRef.current.visibilities[pageIndex].visibility = visibility;\n    };\n    var getHighestPriorityPage = function () {\n        var visiblePages = latestRef.current.visibilities\n            .slice(latestRef.current.startRange, latestRef.current.endRange + 1)\n            .filter(function (item) { return item.visibility > OUT_OF_RANGE_VISIBILITY; });\n        if (!visiblePages.length) {\n            return -1;\n        }\n        var firstVisiblePage = visiblePages[0].pageIndex;\n        var lastVisiblePage = visiblePages[visiblePages.length - 1].pageIndex;\n        var numVisiblePages = visiblePages.length;\n        for (var i = 0; i < numVisiblePages; i++) {\n            if (visiblePages[i].renderStatus === PageRenderStatus.Rendering) {\n                return -1;\n            }\n            if (visiblePages[i].renderStatus === PageRenderStatus.NotRenderedYet) {\n                return visiblePages[i].pageIndex;\n            }\n        }\n        if (lastVisiblePage + 1 < numPages &&\n            latestRef.current.visibilities[lastVisiblePage + 1].renderStatus !== PageRenderStatus.Rendered) {\n            return lastVisiblePage + 1;\n        }\n        else if (firstVisiblePage - 1 >= 0 &&\n            latestRef.current.visibilities[firstVisiblePage - 1].renderStatus !== PageRenderStatus.Rendered) {\n            return firstVisiblePage - 1;\n        }\n        return -1;\n    };\n    var isInRange = function (pageIndex) {\n        return pageIndex >= latestRef.current.startRange && pageIndex <= latestRef.current.endRange;\n    };\n    return {\n        getHighestPriorityPage: getHighestPriorityPage,\n        isInRange: isInRange,\n        markNotRendered: markNotRendered,\n        markRendered: markRendered,\n        markRendering: markRendering,\n        setOutOfRange: setOutOfRange,\n        setRange: setRange,\n        setVisibility: setVisibility,\n    };\n};\n\nvar core = {\n\taskingPassword: {\n\t\trequirePasswordToOpen: \"This document requires a password to open\",\n\t\tsubmit: \"Submit\"\n\t},\n\twrongPassword: {\n\t\ttryAgain: \"The password is wrong. Please try again\"\n\t},\n\tpageLabel: \"Page {{pageIndex}}\"\n};\nvar enUs = {\n\tcore: core\n};\n\nvar DefaultLocalization = enUs;\nvar LocalizationContext = React__namespace.createContext({\n    l10n: DefaultLocalization,\n    setL10n: function () { },\n});\n\nvar id = 0;\nvar uniqueId = function () { return id++; };\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n    var clickHandler = function (e) {\n        var target = targetRef.current;\n        if (target && !target.contains(e.target)) {\n            onClickOutside();\n        }\n    };\n    React__namespace.useEffect(function () {\n        if (!closeOnClickOutside) {\n            return;\n        }\n        var eventOptions = {\n            capture: true,\n        };\n        document.addEventListener('click', clickHandler, eventOptions);\n        return function () {\n            document.removeEventListener('click', clickHandler, eventOptions);\n        };\n    }, []);\n};\n\nvar useEscape = function (handler) {\n    var keyUpHandler = function (e) {\n        if (e.key === 'Escape') {\n            handler();\n        }\n    };\n    React__namespace.useEffect(function () {\n        document.addEventListener('keyup', keyUpHandler);\n        return function () {\n            document.removeEventListener('keyup', keyUpHandler);\n        };\n    }, []);\n};\n\nvar useLockScroll = function () {\n    React__namespace.useEffect(function () {\n        var originalStyle = window.getComputedStyle(document.body).overflow;\n        document.body.style.overflow = 'hidden';\n        return function () {\n            document.body.style.overflow = originalStyle;\n        };\n    }, []);\n};\n\nvar ModalBody = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, onToggle = _a.onToggle;\n    var contentRef = React__namespace.useRef();\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    useLockScroll();\n    useEscape(function () {\n        if (contentRef.current && closeOnEscape) {\n            onToggle();\n        }\n    });\n    useClickOutside(closeOnClickOutside, contentRef, onToggle);\n    useIsomorphicLayoutEffect(function () {\n        var contentEle = contentRef.current;\n        if (!contentEle) {\n            return;\n        }\n        var maxHeight = document.body.clientHeight * 0.75;\n        if (contentEle.getBoundingClientRect().height >= maxHeight) {\n            contentEle.style.overflow = 'auto';\n            contentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n        }\n    }, []);\n    return (React__namespace.createElement(\"div\", { \"aria-modal\": \"true\", className: classNames({\n            'rpv-core__modal-body': true,\n            'rpv-core__modal-body--rtl': isRtl,\n        }), id: \"rpv-core__modal-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"dialog\", tabIndex: -1 }, children));\n};\n\nvar ModalOverlay = function (_a) {\n    var children = _a.children;\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__modal-overlay\" }, children);\n};\n\nexports.ToggleStatus = void 0;\n(function (ToggleStatus) {\n    ToggleStatus[\"Close\"] = \"Close\";\n    ToggleStatus[\"Open\"] = \"Open\";\n    ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(exports.ToggleStatus || (exports.ToggleStatus = {}));\n\nvar useToggle = function (isOpened) {\n    var _a = React__namespace.useState(isOpened), opened = _a[0], setOpened = _a[1];\n    var toggle = function (status) {\n        switch (status) {\n            case exports.ToggleStatus.Close:\n                setOpened(false);\n                break;\n            case exports.ToggleStatus.Open:\n                setOpened(true);\n                break;\n            case exports.ToggleStatus.Toggle:\n            default:\n                setOpened(function (isOpened) { return !isOpened; });\n                break;\n        }\n    };\n    return { opened: opened, toggle: toggle };\n};\n\nvar Portal = function (_a) {\n    var content = _a.content, _b = _a.isOpened, isOpened = _b === void 0 ? false : _b, target = _a.target;\n    var _c = useToggle(isOpened), opened = _c.opened, toggle = _c.toggle;\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        target && target(toggle, opened),\n        opened && content(toggle)));\n};\n\nvar Modal = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, _b = _a.isOpened, isOpened = _b === void 0 ? false : _b, target = _a.target;\n    var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n    var renderTarget = function (toggle, opened) { return (React__namespace.createElement(\"div\", { \"aria-expanded\": opened ? 'true' : 'false', \"aria-haspopup\": \"dialog\", \"aria-controls\": \"rpv-core__modal-body-\".concat(controlsSuffix) }, target(toggle, opened))); };\n    var renderContent = function (toggle) { return (React__namespace.createElement(ModalOverlay, null,\n        React__namespace.createElement(ModalBody, { ariaControlsSuffix: controlsSuffix, closeOnClickOutside: closeOnClickOutside, closeOnEscape: closeOnEscape, onToggle: toggle }, content(toggle)))); };\n    return React__namespace.createElement(Portal, { target: target ? renderTarget : null, content: renderContent, isOpened: isOpened });\n};\n\nexports.Position = void 0;\n(function (Position) {\n    Position[\"TopLeft\"] = \"TOP_LEFT\";\n    Position[\"TopCenter\"] = \"TOP_CENTER\";\n    Position[\"TopRight\"] = \"TOP_RIGHT\";\n    Position[\"RightTop\"] = \"RIGHT_TOP\";\n    Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n    Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n    Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n    Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n    Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n    Position[\"LeftTop\"] = \"LEFT_TOP\";\n    Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n    Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(exports.Position || (exports.Position = {}));\n\nvar calculatePosition = function (content, target, position, offset) {\n    var targetRect = target.getBoundingClientRect();\n    var contentRect = content.getBoundingClientRect();\n    var height = contentRect.height, width = contentRect.width;\n    var top = 0;\n    var left = 0;\n    switch (position) {\n        case exports.Position.TopLeft:\n            top = targetRect.top - height;\n            left = targetRect.left;\n            break;\n        case exports.Position.TopCenter:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case exports.Position.TopRight:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case exports.Position.RightTop:\n            top = targetRect.top;\n            left = targetRect.left + targetRect.width;\n            break;\n        case exports.Position.RightCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left + targetRect.width;\n            break;\n        case exports.Position.RightBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left + targetRect.width;\n            break;\n        case exports.Position.BottomLeft:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left;\n            break;\n        case exports.Position.BottomCenter:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case exports.Position.BottomRight:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case exports.Position.LeftTop:\n            top = targetRect.top;\n            left = targetRect.left - width;\n            break;\n        case exports.Position.LeftCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left - width;\n            break;\n        case exports.Position.LeftBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left - width;\n            break;\n    }\n    return {\n        left: left + (offset.left || 0),\n        top: top + (offset.top || 0),\n    };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n    useIsomorphicLayoutEffect(function () {\n        var targetEle = targetRef.current;\n        var contentEle = contentRef.current;\n        var anchorEle = anchorRef.current;\n        if (!contentEle || !targetEle || !anchorEle) {\n            return;\n        }\n        var anchorRect = anchorEle.getBoundingClientRect();\n        var _a = calculatePosition(contentEle, targetEle, position, offset), top = _a.top, left = _a.left;\n        contentEle.style.top = \"\".concat(top - anchorRect.top, \"px\");\n        contentEle.style.left = \"\".concat(left - anchorRect.left, \"px\");\n    }, []);\n};\n\nvar Arrow = function (_a) {\n    var _b;\n    var customClassName = _a.customClassName, position = _a.position;\n    return (React__namespace.createElement(\"div\", { className: classNames((_b = {\n                'rpv-core__arrow': true,\n                'rpv-core__arrow--tl': position === exports.Position.TopLeft,\n                'rpv-core__arrow--tc': position === exports.Position.TopCenter,\n                'rpv-core__arrow--tr': position === exports.Position.TopRight,\n                'rpv-core__arrow--rt': position === exports.Position.RightTop,\n                'rpv-core__arrow--rc': position === exports.Position.RightCenter,\n                'rpv-core__arrow--rb': position === exports.Position.RightBottom,\n                'rpv-core__arrow--bl': position === exports.Position.BottomLeft,\n                'rpv-core__arrow--bc': position === exports.Position.BottomCenter,\n                'rpv-core__arrow--br': position === exports.Position.BottomRight,\n                'rpv-core__arrow--lt': position === exports.Position.LeftTop,\n                'rpv-core__arrow--lc': position === exports.Position.LeftCenter,\n                'rpv-core__arrow--lb': position === exports.Position.LeftBottom\n            },\n            _b[\"\".concat(customClassName)] = customClassName !== '',\n            _b)) }));\n};\n\nvar PopoverBody = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, offset = _a.offset, position = _a.position, targetRef = _a.targetRef, onClose = _a.onClose;\n    var contentRef = React__namespace.useRef();\n    var innerRef = React__namespace.useRef();\n    var anchorRef = React__namespace.useRef();\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    useClickOutside(closeOnClickOutside, contentRef, onClose);\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    useIsomorphicLayoutEffect(function () {\n        var innerContentEle = innerRef.current;\n        if (!innerContentEle) {\n            return;\n        }\n        var maxHeight = document.body.clientHeight * 0.75;\n        if (innerContentEle.getBoundingClientRect().height >= maxHeight) {\n            innerContentEle.style.overflow = 'auto';\n            innerContentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n        }\n    }, []);\n    var innerId = \"rpv-core__popover-body-inner-\".concat(ariaControlsSuffix);\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__namespace.createElement(\"div\", { \"aria-describedby\": innerId, className: classNames({\n                'rpv-core__popover-body': true,\n                'rpv-core__popover-body--rtl': isRtl,\n            }), id: \"rpv-core__popover-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"dialog\", tabIndex: -1 },\n            React__namespace.createElement(Arrow, { customClassName: \"rpv-core__popover-body-arrow\", position: position }),\n            React__namespace.createElement(\"div\", { id: innerId, ref: innerRef }, children))));\n};\n\nvar PopoverOverlay = function (_a) {\n    var closeOnEscape = _a.closeOnEscape, onClose = _a.onClose;\n    var containerRef = React__namespace.useRef();\n    useEscape(function () {\n        if (containerRef.current && closeOnEscape) {\n            onClose();\n        }\n    });\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__popover-overlay\", ref: containerRef });\n};\n\nvar Popover = function (_a) {\n    var _b = _a.ariaHasPopup, ariaHasPopup = _b === void 0 ? 'dialog' : _b, ariaControlsSuffix = _a.ariaControlsSuffix, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, _c = _a.lockScroll, lockScroll = _c === void 0 ? true : _c, offset = _a.offset, position = _a.position, target = _a.target;\n    var _d = useToggle(false), opened = _d.opened, toggle = _d.toggle;\n    var targetRef = React__namespace.useRef();\n    var controlsSuffix = React__namespace.useMemo(function () { return ariaControlsSuffix || \"\".concat(uniqueId()); }, []);\n    return (React__namespace.createElement(\"div\", { ref: targetRef, \"aria-expanded\": opened ? 'true' : 'false', \"aria-haspopup\": ariaHasPopup, \"aria-controls\": \"rpv-core__popver-body-\".concat(controlsSuffix) },\n        target(toggle, opened),\n        opened && (React__namespace.createElement(React__namespace.Fragment, null,\n            lockScroll && React__namespace.createElement(PopoverOverlay, { closeOnEscape: closeOnEscape, onClose: toggle }),\n            React__namespace.createElement(PopoverBody, { ariaControlsSuffix: controlsSuffix, closeOnClickOutside: closeOnClickOutside, offset: offset, position: position, targetRef: targetRef, onClose: toggle }, content(toggle))))));\n};\n\nvar TooltipBody = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, contentRef = _a.contentRef, offset = _a.offset, position = _a.position, targetRef = _a.targetRef;\n    var anchorRef = React__namespace.useRef();\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__tooltip-body': true,\n                'rpv-core__tooltip-body--rtl': isRtl,\n            }), id: \"rpv-core__tooltip-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"tooltip\" },\n            React__namespace.createElement(Arrow, { customClassName: \"rpv-core__tooltip-body-arrow\", position: position }),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__tooltip-body-content\" }, children))));\n};\n\nvar Tooltip = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var _b = useToggle(false), opened = _b.opened, toggle = _b.toggle;\n    var targetRef = React__namespace.useRef();\n    var contentRef = React__namespace.useRef();\n    var controlsSuffix = React__namespace.useMemo(function () { return ariaControlsSuffix || \"\".concat(uniqueId()); }, []);\n    useEscape(function () {\n        if (targetRef.current && document.activeElement && targetRef.current.contains(document.activeElement)) {\n            close();\n        }\n    });\n    var open = function () {\n        toggle(exports.ToggleStatus.Open);\n    };\n    var close = function () {\n        toggle(exports.ToggleStatus.Close);\n    };\n    var onBlur = function (e) {\n        var shouldHideTooltip = e.relatedTarget instanceof HTMLElement &&\n            e.currentTarget.parentElement &&\n            e.currentTarget.parentElement.contains(e.relatedTarget);\n        if (shouldHideTooltip) {\n            if (contentRef.current) {\n                contentRef.current.style.display = 'none';\n            }\n        }\n        else {\n            close();\n        }\n    };\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: targetRef, \"aria-describedby\": \"rpv-core__tooltip-body-\".concat(controlsSuffix), onBlur: onBlur, onFocus: open, onMouseEnter: open, onMouseLeave: close }, target),\n        opened && (React__namespace.createElement(TooltipBody, { ariaControlsSuffix: controlsSuffix, contentRef: contentRef, offset: offset, position: position, targetRef: targetRef }, content()))));\n};\n\nfunction createStore(initialState) {\n    var state = initialState || {};\n    var listeners = {};\n    return {\n        subscribe: function (key, handler) {\n            listeners[key] = (listeners[key] || []).concat(handler);\n        },\n        unsubscribe: function (key, handler) {\n            listeners[key] = (listeners[key] || []).filter(function (f) { return f !== handler; });\n        },\n        update: function (key, data) {\n            var _a;\n            state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n            (listeners[key] || []).forEach(function (handler) { return handler(state[key]); });\n        },\n        get: function (key) {\n            return state[key];\n        },\n    };\n}\n\nexports.LayerRenderStatus = void 0;\n(function (LayerRenderStatus) {\n    LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n    LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(exports.LayerRenderStatus || (exports.LayerRenderStatus = {}));\n\nexports.PageMode = void 0;\n(function (PageMode) {\n    PageMode[\"Attachments\"] = \"UseAttachments\";\n    PageMode[\"Bookmarks\"] = \"UseOutlines\";\n    PageMode[\"ContentGroup\"] = \"UseOC\";\n    PageMode[\"Default\"] = \"UserNone\";\n    PageMode[\"FullScreen\"] = \"FullScreen\";\n    PageMode[\"Thumbnails\"] = \"UseThumbs\";\n})(exports.PageMode || (exports.PageMode = {}));\n\nexports.RotateDirection = void 0;\n(function (RotateDirection) {\n    RotateDirection[\"Backward\"] = \"Backward\";\n    RotateDirection[\"Forward\"] = \"Forward\";\n})(exports.RotateDirection || (exports.RotateDirection = {}));\n\nexports.ScrollMode = void 0;\n(function (ScrollMode) {\n    ScrollMode[\"Horizontal\"] = \"Horizontal\";\n    ScrollMode[\"Vertical\"] = \"Vertical\";\n    ScrollMode[\"Wrapped\"] = \"Wrapped\";\n})(exports.ScrollMode || (exports.ScrollMode = {}));\n\nexports.SpecialZoomLevel = void 0;\n(function (SpecialZoomLevel) {\n    SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n    SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n    SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(exports.SpecialZoomLevel || (exports.SpecialZoomLevel = {}));\n\nvar isMac = function () { return (typeof window !== 'undefined' ? /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) : false); };\n\nvar normalizeDestination = function (pageIndex, destArray) {\n    switch (destArray[1].name) {\n        case 'XYZ':\n            return {\n                bottomOffset: destArray[3],\n                leftOffset: destArray[2] || 0,\n                pageIndex: pageIndex,\n                scaleTo: destArray[4],\n            };\n        case 'Fit':\n        case 'FitB':\n            return {\n                bottomOffset: 0,\n                leftOffset: 0,\n                pageIndex: pageIndex,\n                scaleTo: exports.SpecialZoomLevel.PageFit,\n            };\n        case 'FitH':\n        case 'FitBH':\n            return {\n                bottomOffset: destArray[2],\n                leftOffset: 0,\n                pageIndex: pageIndex,\n                scaleTo: exports.SpecialZoomLevel.PageWidth,\n            };\n        default:\n            return {\n                bottomOffset: 0,\n                leftOffset: 0,\n                pageIndex: pageIndex,\n                scaleTo: 1,\n            };\n    }\n};\nvar pageOutlinesMap = new Map();\nvar pagesMap = new Map();\nvar generateRefKey = function (doc, outline) {\n    return \"\".concat(doc.loadingTask.docId, \"___\").concat(outline.num, \"R\").concat(outline.gen === 0 ? '' : outline.gen);\n};\nvar getPageIndex = function (doc, outline) {\n    return pageOutlinesMap.get(generateRefKey(doc, outline)) || null;\n};\nvar cacheOutlineRef = function (doc, outline, pageIndex) {\n    pageOutlinesMap.set(generateRefKey(doc, outline), pageIndex);\n};\nvar clearPagesCache = function () {\n    pageOutlinesMap.clear();\n    pagesMap.clear();\n};\nvar getPage = function (doc, pageIndex) {\n    if (!doc) {\n        return Promise.reject('The document is not loaded yet');\n    }\n    var pageKey = \"\".concat(doc.loadingTask.docId, \"___\").concat(pageIndex);\n    var page = pagesMap.get(pageKey);\n    if (page) {\n        return Promise.resolve(page);\n    }\n    return new Promise(function (resolve, _) {\n        doc.getPage(pageIndex + 1).then(function (page) {\n            pagesMap.set(pageKey, page);\n            if (page.ref) {\n                cacheOutlineRef(doc, page.ref, pageIndex);\n            }\n            resolve(page);\n        });\n    });\n};\nvar getDestination = function (doc, dest) {\n    return new Promise(function (res) {\n        new Promise(function (resolve) {\n            if (typeof dest === 'string') {\n                doc.getDestination(dest).then(function (destArray) {\n                    resolve(destArray);\n                });\n            }\n            else {\n                resolve(dest);\n            }\n        }).then(function (destArray) {\n            if ('object' === typeof destArray[0] && destArray[0] !== null) {\n                var outlineRef_1 = destArray[0];\n                var pageIndex = getPageIndex(doc, outlineRef_1);\n                if (pageIndex === null) {\n                    doc.getPageIndex(outlineRef_1).then(function (pageIndex) {\n                        cacheOutlineRef(doc, outlineRef_1, pageIndex);\n                        getDestination(doc, dest).then(function (result) { return res(result); });\n                    });\n                }\n                else {\n                    res(normalizeDestination(pageIndex, destArray));\n                }\n            }\n            else {\n                var target = normalizeDestination(destArray[0], destArray);\n                res(target);\n            }\n        });\n    });\n};\n\nfunction usePrevious(value) {\n    var ref = React__namespace.useRef(value);\n    React__namespace.useEffect(function () {\n        ref.current = value;\n    }, [value]);\n    return ref.current;\n}\n\nvar useDebounceCallback = function (callback, wait) {\n    var timeout = React__namespace.useRef();\n    var cleanup = function () {\n        if (timeout.current) {\n            clearTimeout(timeout.current);\n        }\n    };\n    React__namespace.useEffect(function () {\n        return function () { return cleanup(); };\n    }, []);\n    return React__namespace.useCallback(function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        cleanup();\n        timeout.current = setTimeout(function () {\n            callback.apply(void 0, args);\n        }, wait);\n    }, [callback, wait]);\n};\n\nvar useTrackResize = function (_a) {\n    var targetRef = _a.targetRef, onResize = _a.onResize;\n    useIsomorphicLayoutEffect(function () {\n        var io = new ResizeObserver(function (entries) {\n            entries.forEach(function (entry) {\n                onResize(entry.target);\n            });\n        });\n        var container = targetRef.current;\n        if (!container) {\n            return;\n        }\n        io.observe(container);\n        return function () {\n            io.unobserve(container);\n        };\n    }, []);\n};\n\nvar clamp = function (min, max, value) { return Math.max(min, Math.min(value, max)); };\n\nvar findNearest = function (low, high, value, getItemValue) {\n    while (low <= high) {\n        var middle = ((low + high) / 2) | 0;\n        var currentValue = getItemValue(middle);\n        if (currentValue < value) {\n            low = middle + 1;\n        }\n        else if (currentValue > value) {\n            high = middle - 1;\n        }\n        else {\n            return middle;\n        }\n    }\n    return low > 0 ? low - 1 : 0;\n};\n\nvar rectReducer = function (state, action) {\n    var rect = action.rect;\n    return state.height !== rect.height || state.width !== rect.width ? rect : state;\n};\nvar useMeasureRect = function (_a) {\n    var elementRef = _a.elementRef;\n    var _b = React__namespace.useState(elementRef.current), element = _b[0], setElement = _b[1];\n    var initializedRectRef = React__namespace.useRef(false);\n    var _c = React__namespace.useReducer(rectReducer, { height: 0, width: 0 }), rect = _c[0], dispatch = _c[1];\n    useIsomorphicLayoutEffect(function () {\n        if (elementRef.current !== element) {\n            setElement(elementRef.current);\n        }\n    });\n    useIsomorphicLayoutEffect(function () {\n        if (element && !initializedRectRef.current) {\n            initializedRectRef.current = true;\n            var _a = element.getBoundingClientRect(), height = _a.height, width = _a.width;\n            dispatch({\n                rect: { height: height, width: width },\n            });\n        }\n    }, [element]);\n    React__namespace.useEffect(function () {\n        if (!element) {\n            return;\n        }\n        var tracker = new ResizeObserver(function (entries, __) {\n            entries.forEach(function (entry) {\n                if (entry.target === element) {\n                    var _a = entry.contentRect, height = _a.height, width = _a.width;\n                    dispatch({\n                        rect: { height: height, width: width },\n                    });\n                }\n            });\n        });\n        tracker.observe(element);\n        return function () {\n            tracker.unobserve(element);\n        };\n    }, [element]);\n    return rect;\n};\n\nvar easeOutQuart = function (t) { return 1 - Math.pow(1 - t, 4); };\n\nvar smoothScroll = function (ele, scrollMode, targetPosition, duration, easing, onReachTarget) {\n    if (easing === void 0) { easing = function (t) { return t; }; }\n    if (onReachTarget === void 0) { onReachTarget = function () { }; }\n    var start = 0;\n    switch (scrollMode) {\n        case exports.ScrollMode.Horizontal:\n            start = ele.scrollLeft;\n        case exports.ScrollMode.Vertical:\n        default:\n            start = ele.scrollTop;\n            break;\n    }\n    var startTime = -1;\n    var requestId;\n    var offset = start - targetPosition;\n    if (offset === 0) {\n        return;\n    }\n    var loop = function (currentTime) {\n        if (startTime === -1) {\n            startTime = currentTime;\n        }\n        var time = currentTime - startTime;\n        var percent = Math.min(time / duration, 1);\n        var easedPercent = easing(percent);\n        var updatePosition = start - offset * easedPercent;\n        switch (scrollMode) {\n            case exports.ScrollMode.Horizontal:\n                ele.scrollLeft = updatePosition;\n            case exports.ScrollMode.Vertical:\n            default:\n                ele.scrollTop = updatePosition;\n                break;\n        }\n        if (updatePosition === targetPosition) {\n            onReachTarget();\n        }\n        if (time < duration) {\n            requestId = window.requestAnimationFrame(loop);\n        }\n        else {\n            window.cancelAnimationFrame(requestId);\n        }\n    };\n    requestId = window.requestAnimationFrame(loop);\n};\n\nvar useRafState = function (initialState) {\n    var isMounted = useIsMounted();\n    var rafRef = React__namespace.useRef(0);\n    var _a = React__namespace.useState(initialState), state = _a[0], setState = _a[1];\n    var setRafState = React__namespace.useCallback(function (value) {\n        cancelAnimationFrame(rafRef.current);\n        rafRef.current = requestAnimationFrame(function () {\n            isMounted.current && setState(value);\n        });\n    }, []);\n    React__namespace.useEffect(function () {\n        return function () {\n            cancelAnimationFrame(rafRef.current);\n        };\n    }, []);\n    return [state, setRafState];\n};\n\nvar ZERO_OFFSET$1 = {\n    left: 0,\n    top: 0,\n};\nvar SCROLL_EVENT_OPTIONS = {\n    capture: false,\n    passive: true,\n};\nvar SCROLL_DURATION = 400;\nvar useScroll = function (_a) {\n    var elementRef = _a.elementRef, isRtl = _a.isRtl, scrollMode = _a.scrollMode, onSmoothScroll = _a.onSmoothScroll;\n    var _b = useRafState(ZERO_OFFSET$1), scrollOffset = _b[0], setScrollOffset = _b[1];\n    var _c = React__namespace.useState(elementRef.current), element = _c[0], setElement = _c[1];\n    var factor = isRtl ? -1 : 1;\n    var latestRef = React__namespace.useRef(scrollMode);\n    latestRef.current = scrollMode;\n    var handleSmoothScrollingComplete = React__namespace.useCallback(function () { return onSmoothScroll(false); }, []);\n    var handleScroll = React__namespace.useCallback(function () {\n        if (!element) {\n            return;\n        }\n        switch (latestRef.current) {\n            case exports.ScrollMode.Horizontal:\n                setScrollOffset({\n                    left: factor * element.scrollLeft,\n                    top: 0,\n                });\n                break;\n            case exports.ScrollMode.Vertical:\n            default:\n                setScrollOffset({\n                    left: 0,\n                    top: element.scrollTop,\n                });\n                break;\n        }\n    }, [element]);\n    useIsomorphicLayoutEffect(function () {\n        setElement(elementRef.current);\n    });\n    useIsomorphicLayoutEffect(function () {\n        if (!element) {\n            return;\n        }\n        element.addEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\n        return function () {\n            element.removeEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\n        };\n    }, [element]);\n    var scrollTo = React__namespace.useCallback(function (targetPosition, withSmoothScroll) {\n        var ele = elementRef.current;\n        if (!ele) {\n            return;\n        }\n        var updatePosition = 0;\n        var currentScrollMode = exports.ScrollMode.Vertical;\n        switch (latestRef.current) {\n            case exports.ScrollMode.Horizontal:\n                updatePosition = factor * targetPosition.left;\n                currentScrollMode = exports.ScrollMode.Horizontal;\n                break;\n            case exports.ScrollMode.Vertical:\n            default:\n                updatePosition = targetPosition.top;\n                currentScrollMode = exports.ScrollMode.Vertical;\n                break;\n        }\n        if (withSmoothScroll) {\n            onSmoothScroll(true);\n            smoothScroll(ele, currentScrollMode, updatePosition, SCROLL_DURATION, easeOutQuart, handleSmoothScrollingComplete);\n        }\n        else {\n            switch (latestRef.current) {\n                case exports.ScrollMode.Horizontal:\n                    ele.scrollLeft = updatePosition;\n                    break;\n                case exports.ScrollMode.Vertical:\n                default:\n                    ele.scrollTop = updatePosition;\n                    break;\n            }\n        }\n    }, [elementRef]);\n    return {\n        scrollOffset: scrollOffset,\n        scrollTo: scrollTo,\n    };\n};\n\nvar ZERO_RECT = {\n    height: 0,\n    width: 0,\n};\nvar ZERO_OFFSET = {\n    left: 0,\n    top: 0,\n};\nvar calculateRange = function (scrollMode, measurements, outerSize, scrollOffset) {\n    var currentOffset = 0;\n    switch (scrollMode) {\n        case exports.ScrollMode.Horizontal:\n            currentOffset = scrollOffset.left;\n            break;\n        case exports.ScrollMode.Vertical:\n        default:\n            currentOffset = scrollOffset.top;\n            break;\n    }\n    var size = measurements.length - 1;\n    var getOffset = function (index) {\n        switch (scrollMode) {\n            case exports.ScrollMode.Horizontal:\n                return measurements[index].start.left;\n            case exports.ScrollMode.Wrapped:\n            case exports.ScrollMode.Vertical:\n            default:\n                return measurements[index].start.top;\n        }\n    };\n    var start = findNearest(0, size, currentOffset, getOffset);\n    if (scrollMode === exports.ScrollMode.Wrapped) {\n        var startTop = measurements[start].start.top;\n        while (start - 1 >= 0 &&\n            measurements[start - 1].start.top === startTop &&\n            measurements[start - 1].start.left >= scrollOffset.left) {\n            start--;\n        }\n    }\n    var end = start;\n    var visibilities = {};\n    var maxVisbilityIndex = start;\n    var maxVisbility = -1;\n    while (end <= size) {\n        var itemRect = measurements[end].size;\n        var visibility = ZERO_RECT;\n        var topLeftCorner = {\n            top: measurements[end].start.top - scrollOffset.top,\n            left: measurements[end].start.left - scrollOffset.left,\n        };\n        var visibleSize = {\n            height: outerSize.height - topLeftCorner.top,\n            width: outerSize.width - topLeftCorner.left,\n        };\n        if (scrollMode === exports.ScrollMode.Horizontal && visibleSize.width < 0) {\n            end--;\n            break;\n        }\n        if (scrollMode === exports.ScrollMode.Vertical && visibleSize.height < 0) {\n            end--;\n            break;\n        }\n        if (scrollMode === exports.ScrollMode.Wrapped && (visibleSize.width < 0 || visibleSize.height < 0)) {\n            end--;\n            break;\n        }\n        if (scrollMode === exports.ScrollMode.Vertical) {\n            visibility.width = 1;\n        }\n        else if (topLeftCorner.left < 0) {\n            var visibleWidth = itemRect.width - -topLeftCorner.left;\n            visibility.width = visibleWidth <= outerSize.width ? visibleWidth / outerSize.width : 1;\n        }\n        else {\n            visibility.width = itemRect.width <= visibleSize.width ? 1 : visibleSize.width / itemRect.width;\n        }\n        if (scrollMode === exports.ScrollMode.Horizontal) {\n            visibility.height = 1;\n        }\n        else if (topLeftCorner.top < 0) {\n            var visibleHeight = itemRect.height - -topLeftCorner.top;\n            visibility.height = visibleHeight <= outerSize.height ? visibleHeight / outerSize.height : 1;\n        }\n        else {\n            visibility.height = itemRect.height <= visibleSize.height ? 1 : visibleSize.height / itemRect.height;\n        }\n        visibilities[end] = visibility.width * visibility.height;\n        if (maxVisbility < visibilities[end]) {\n            maxVisbility = visibilities[end];\n            maxVisbilityIndex = end;\n        }\n        end++;\n    }\n    return {\n        start: start,\n        end: end,\n        maxVisbilityIndex: maxVisbilityIndex,\n        visibilities: visibilities,\n    };\n};\nvar useVirtual = function (_a) {\n    var estimateSize = _a.estimateSize, isRtl = _a.isRtl, numberOfItems = _a.numberOfItems, setStartRange = _a.setStartRange, setEndRange = _a.setEndRange, parentRef = _a.parentRef, scrollMode = _a.scrollMode, transformSize = _a.transformSize;\n    var _b = React__namespace.useState(false), isSmoothScrolling = _b[0], setSmoothScrolling = _b[1];\n    var onSmoothScroll = React__namespace.useCallback(function (isSmoothScrolling) { return setSmoothScrolling(isSmoothScrolling); }, []);\n    var _c = useScroll({\n        elementRef: parentRef,\n        isRtl: isRtl,\n        scrollMode: scrollMode,\n        onSmoothScroll: onSmoothScroll,\n    }), scrollOffset = _c.scrollOffset, scrollTo = _c.scrollTo;\n    var parentRect = useMeasureRect({\n        elementRef: parentRef,\n    });\n    var latestRef = React__namespace.useRef({\n        scrollOffset: ZERO_OFFSET,\n        measurements: [],\n        parentRect: ZERO_RECT,\n        totalSize: ZERO_RECT,\n    });\n    latestRef.current.scrollOffset = scrollOffset;\n    latestRef.current.parentRect = parentRect;\n    var _d = React__namespace.useState({}), cacheMeasure = _d[0], setCacheMeasure = _d[1];\n    var measurements = React__namespace.useMemo(function () {\n        var measurements = [];\n        var totalWidth = 0;\n        var firstOfRow = {\n            left: 0,\n            top: 0,\n        };\n        var maxHeight = 0;\n        for (var i = 0; i < numberOfItems; i++) {\n            var size = cacheMeasure[i] || transformSize(estimateSize(i));\n            var start_1 = ZERO_OFFSET;\n            if (i === 0) {\n                totalWidth = size.width;\n                firstOfRow = {\n                    left: 0,\n                    top: 0,\n                };\n                maxHeight = size.height;\n            }\n            else {\n                switch (scrollMode) {\n                    case exports.ScrollMode.Wrapped:\n                        totalWidth += size.width;\n                        if (totalWidth < parentRect.width) {\n                            start_1 = {\n                                left: measurements[i - 1].end.left,\n                                top: firstOfRow.top,\n                            };\n                            maxHeight = Math.max(maxHeight, size.height);\n                        }\n                        else {\n                            totalWidth = size.width;\n                            start_1 = {\n                                left: firstOfRow.left,\n                                top: firstOfRow.top + maxHeight,\n                            };\n                            firstOfRow = {\n                                left: start_1.left,\n                                top: start_1.top,\n                            };\n                            maxHeight = size.height;\n                        }\n                        break;\n                    case exports.ScrollMode.Horizontal:\n                    case exports.ScrollMode.Vertical:\n                    default:\n                        start_1 = measurements[i - 1].end;\n                        break;\n                }\n            }\n            var end_1 = {\n                left: start_1.left + size.width,\n                top: start_1.top + size.height,\n            };\n            measurements[i] = {\n                index: i,\n                start: start_1,\n                size: size,\n                end: end_1,\n                visibility: -1,\n            };\n        }\n        return measurements;\n    }, [estimateSize, scrollMode, parentRect, cacheMeasure, transformSize]);\n    var totalSize = measurements[numberOfItems - 1]\n        ? {\n            height: measurements[numberOfItems - 1].end.top,\n            width: measurements[numberOfItems - 1].end.left,\n        }\n        : ZERO_RECT;\n    latestRef.current.measurements = measurements;\n    latestRef.current.totalSize = totalSize;\n    var _e = calculateRange(scrollMode, latestRef.current.measurements, latestRef.current.parentRect, latestRef.current.scrollOffset), maxVisbilityIndex = _e.maxVisbilityIndex, visibilities = _e.visibilities, start = _e.start, end = _e.end;\n    var startRange = setStartRange(start);\n    var endRange = setEndRange(end);\n    var virtualItems = React__namespace.useMemo(function () {\n        var virtualItems = [];\n        var _loop_1 = function (i) {\n            var item = measurements[i];\n            var virtualItem = __assign(__assign({}, item), { visibility: visibilities[i] !== undefined ? visibilities[i] : -1, measureRef: function (ele) {\n                    if (!ele) {\n                        return;\n                    }\n                    var rect = ele.getBoundingClientRect();\n                    if (rect.height === 0 && rect.width === 0) {\n                        return;\n                    }\n                    var measuredSize = transformSize({\n                        height: rect.height,\n                        width: rect.width,\n                    });\n                    if (measuredSize.height !== item.size.height || measuredSize.width !== item.size.width) {\n                        setCacheMeasure(function (old) {\n                            var _a;\n                            return (__assign(__assign({}, old), (_a = {}, _a[i] = measuredSize, _a)));\n                        });\n                    }\n                } });\n            virtualItems.push(virtualItem);\n        };\n        for (var i = startRange; i <= endRange; i++) {\n            _loop_1(i);\n        }\n        return virtualItems;\n    }, [transformSize, visibilities, measurements]);\n    var scrollToItem = React__namespace.useCallback(function (index, offset) {\n        var measurements = latestRef.current.measurements;\n        var normalizedIndex = clamp(0, numberOfItems - 1, index);\n        var measurement = measurements[normalizedIndex];\n        if (measurement) {\n            scrollTo({\n                left: offset.left + measurement.start.left,\n                top: offset.top + measurement.start.top,\n            }, true);\n        }\n    }, [scrollTo]);\n    var getContainerStyles = React__namespace.useCallback(function () {\n        switch (scrollMode) {\n            case exports.ScrollMode.Horizontal:\n                return {\n                    position: 'relative',\n                    height: '100%',\n                    width: \"\".concat(totalSize.width, \"px\"),\n                };\n            case exports.ScrollMode.Vertical:\n            default:\n                return {\n                    position: 'relative',\n                    height: \"\".concat(totalSize.height, \"px\"),\n                    width: '100%',\n                };\n        }\n    }, [scrollMode, totalSize]);\n    var getItemStyles = React__namespace.useCallback(function (item) {\n        var _a, _b, _c;\n        var sideProperty = isRtl ? 'right' : 'left';\n        var factor = isRtl ? -1 : 1;\n        switch (scrollMode) {\n            case exports.ScrollMode.Horizontal:\n                return _a = {\n                        height: '100%',\n                        width: \"\".concat(item.size.width, \"px\")\n                    },\n                    _a[sideProperty] = 0,\n                    _a.position = 'absolute',\n                    _a.top = 0,\n                    _a.transform = \"translateX(\".concat(item.start.left * factor, \"px)\"),\n                    _a;\n            case exports.ScrollMode.Wrapped:\n                return _b = {\n                        height: \"\".concat(item.size.height, \"px\"),\n                        width: \"\".concat(item.size.width, \"px\")\n                    },\n                    _b[sideProperty] = 0,\n                    _b.position = 'absolute',\n                    _b.top = 0,\n                    _b.transform = \"translate(\".concat(item.start.left * factor, \"px, \").concat(item.start.top, \"px)\"),\n                    _b;\n            case exports.ScrollMode.Vertical:\n            default:\n                return _c = {\n                        height: \"\".concat(item.size.height, \"px\"),\n                        width: '100%'\n                    },\n                    _c[sideProperty] = 0,\n                    _c.position = 'absolute',\n                    _c.top = 0,\n                    _c.transform = \"translateY(\".concat(item.start.top, \"px)\"),\n                    _c;\n        }\n    }, [isRtl, scrollMode]);\n    var zoom = React__namespace.useCallback(function (scale) {\n        setCacheMeasure({});\n        var scrollOffset = latestRef.current.scrollOffset;\n        var updateOffset = {\n            left: scrollOffset.left * scale,\n            top: scrollOffset.top * scale,\n        };\n        scrollTo(updateOffset, false);\n    }, []);\n    return {\n        isSmoothScrolling: isSmoothScrolling,\n        startIndex: start,\n        startRange: startRange,\n        endIndex: end,\n        endRange: endRange,\n        maxVisbilityIndex: maxVisbilityIndex,\n        virtualItems: virtualItems,\n        getContainerStyles: getContainerStyles,\n        getItemStyles: getItemStyles,\n        scrollToItem: scrollToItem,\n        zoom: zoom,\n    };\n};\n\nvar AnnotationBorderStyleType;\n(function (AnnotationBorderStyleType) {\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\n\nvar dateRegex = new RegExp('^D:' +\n    '(\\\\d{4})' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '([Z|+|-])?' +\n    '(\\\\d{2})?' +\n    \"'?\" +\n    '(\\\\d{2})?' +\n    \"'?\");\nvar parse = function (value, min, max, defaultValue) {\n    var parsed = parseInt(value, 10);\n    return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\nvar convertDate = function (input) {\n    var matches = dateRegex.exec(input);\n    if (!matches) {\n        return null;\n    }\n    var year = parseInt(matches[1], 10);\n    var month = parse(matches[2], 1, 12, 1) - 1;\n    var day = parse(matches[3], 1, 31, 1);\n    var hour = parse(matches[4], 0, 23, 0);\n    var minute = parse(matches[5], 0, 59, 0);\n    var second = parse(matches[6], 0, 59, 0);\n    var universalTimeRelation = matches[7] || 'Z';\n    var offsetHour = parse(matches[8], 0, 23, 0);\n    var offsetMinute = parse(matches[9], 0, 59, 0);\n    switch (universalTimeRelation) {\n        case '-':\n            hour += offsetHour;\n            minute += offsetMinute;\n            break;\n        case '+':\n            hour -= offsetHour;\n            minute -= offsetMinute;\n            break;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n    var annotation = _a.annotation;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var containerRef = React__namespace.useRef();\n    var dateStr = '';\n    if (annotation.modificationDate) {\n        var date = convertDate(annotation.modificationDate);\n        dateStr = date ? \"\".concat(date.toLocaleDateString(), \", \").concat(date.toLocaleTimeString()) : '';\n    }\n    React__namespace.useLayoutEffect(function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var annotationEle = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n        if (!annotationEle) {\n            return;\n        }\n        var ele = annotationEle;\n        ele.style.zIndex += 1;\n        return function () {\n            ele.style.zIndex = \"\".concat(parseInt(ele.style.zIndex, 10) - 1);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: classNames({\n            'rpv-core__annotation-popup-wrapper': true,\n            'rpv-core__annotation-popup-wrapper--rtl': isRtl,\n        }), style: {\n            top: annotation.annotationType === exports.AnnotationType.Popup ? '' : '100%',\n        } },\n        annotation.title && (React__namespace.createElement(React__namespace.Fragment, null,\n            React__namespace.createElement(\"div\", { className: classNames({\n                    'rpv-core__annotation-popup-title': true,\n                    'rpv-core__annotation-popup-title--ltr': !isRtl,\n                    'rpv-core__annotation-popup-title--rtl': isRtl,\n                }) }, annotation.title),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-date\" }, dateStr))),\n        annotation.contents && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-content\" }, annotation.contents.split('\\n').map(function (item, index) { return (React__namespace.createElement(React__namespace.Fragment, { key: index },\n            item,\n            React__namespace.createElement(\"br\", null))); })))));\n};\n\nvar TogglePopupBy;\n(function (TogglePopupBy) {\n    TogglePopupBy[\"Click\"] = \"Click\";\n    TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\nvar useTogglePopup = function () {\n    var _a = useToggle(false), opened = _a.opened, toggle = _a.toggle;\n    var _b = React__namespace.useState(TogglePopupBy.Hover), togglePopupBy = _b[0], setTooglePopupBy = _b[1];\n    var toggleOnClick = function () {\n        switch (togglePopupBy) {\n            case TogglePopupBy.Click:\n                opened && setTooglePopupBy(TogglePopupBy.Hover);\n                toggle(exports.ToggleStatus.Toggle);\n                break;\n            case TogglePopupBy.Hover:\n                setTooglePopupBy(TogglePopupBy.Click);\n                toggle(exports.ToggleStatus.Open);\n                break;\n        }\n    };\n    var openOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Open);\n    };\n    var closeOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Close);\n    };\n    return {\n        opened: opened,\n        closeOnHover: closeOnHover,\n        openOnHover: openOnHover,\n        toggleOnClick: toggleOnClick,\n    };\n};\n\nvar Annotation = function (_a) {\n    var annotation = _a.annotation, children = _a.children, ignoreBorder = _a.ignoreBorder, hasPopup = _a.hasPopup, isRenderable = _a.isRenderable, page = _a.page, viewport = _a.viewport;\n    var rect = annotation.rect;\n    var _b = useTogglePopup(), closeOnHover = _b.closeOnHover, opened = _b.opened, openOnHover = _b.openOnHover, toggleOnClick = _b.toggleOnClick;\n    var normalizeRect = function (r) { return [\n        Math.min(r[0], r[2]),\n        Math.min(r[1], r[3]),\n        Math.max(r[0], r[2]),\n        Math.max(r[1], r[3]),\n    ]; };\n    var bound = normalizeRect([\n        rect[0],\n        page.view[3] + page.view[1] - rect[1],\n        rect[2],\n        page.view[3] + page.view[1] - rect[3],\n    ]);\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var styles = {\n        borderColor: '',\n        borderRadius: '',\n        borderStyle: '',\n        borderWidth: '',\n    };\n    if (!ignoreBorder && annotation.borderStyle.width > 0) {\n        switch (annotation.borderStyle.style) {\n            case AnnotationBorderStyleType.Dashed:\n                styles.borderStyle = 'dashed';\n                break;\n            case AnnotationBorderStyleType.Solid:\n                styles.borderStyle = 'solid';\n                break;\n            case AnnotationBorderStyleType.Underline:\n                styles = Object.assign({\n                    borderBottomStyle: 'solid',\n                }, styles);\n                break;\n            case AnnotationBorderStyleType.Beveled:\n            case AnnotationBorderStyleType.Inset:\n        }\n        var borderWidth = annotation.borderStyle.width;\n        styles.borderWidth = \"\".concat(borderWidth, \"px\");\n        if (annotation.borderStyle.style !== AnnotationBorderStyleType.Underline) {\n            width = width - 2 * borderWidth;\n            height = height - 2 * borderWidth;\n        }\n        var _c = annotation.borderStyle, horizontalCornerRadius = _c.horizontalCornerRadius, verticalCornerRadius = _c.verticalCornerRadius;\n        if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n            styles.borderRadius = \"\".concat(horizontalCornerRadius, \"px / \").concat(verticalCornerRadius, \"px\");\n        }\n        annotation.color\n            ? (styles.borderColor = \"rgb(\".concat(annotation.color[0] | 0, \", \").concat(annotation.color[1] | 0, \", \").concat(annotation.color[2] | 0, \")\"))\n            :\n                (styles.borderWidth = '0');\n    }\n    return (React__namespace.createElement(React__namespace.Fragment, null, isRenderable &&\n        children({\n            popup: {\n                opened: opened,\n                closeOnHover: closeOnHover,\n                openOnHover: openOnHover,\n                toggleOnClick: toggleOnClick,\n            },\n            slot: {\n                attrs: {\n                    style: Object.assign({\n                        height: \"\".concat(height, \"px\"),\n                        left: \"\".concat(bound[0], \"px\"),\n                        top: \"\".concat(bound[1], \"px\"),\n                        transform: \"matrix(\".concat(viewport.transform.join(','), \")\"),\n                        transformOrigin: \"-\".concat(bound[0], \"px -\").concat(bound[1], \"px\"),\n                        width: \"\".concat(width, \"px\"),\n                    }, styles),\n                },\n                children: React__namespace.createElement(React__namespace.Fragment, null, hasPopup && opened && React__namespace.createElement(PopupWrapper, { annotation: annotation })),\n            },\n        })));\n};\n\nvar Caret = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--caret\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Circle = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--circle\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"circle\", { cy: height / 2, fill: \"none\", rx: width / 2 - borderWidth / 2, ry: height / 2 - borderWidth / 2, stroke: \"transparent\", strokeWidth: borderWidth || 1 })),\n        props.slot.children)); }));\n};\n\nvar getFileName = function (url) {\n    var str = url.split('/').pop();\n    return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n    var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], { type: '' }));\n    var link = document.createElement('a');\n    link.style.display = 'none';\n    link.href = blobUrl || url;\n    link.setAttribute('download', getFileName(url));\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    if (blobUrl) {\n        URL.revokeObjectURL(blobUrl);\n    }\n};\n\nvar FileAttachment = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n    var doubleClick = function () {\n        var file = annotation.file;\n        file && downloadFile(file.filename, file.content);\n    };\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: true, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--file-attachment\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onDoubleClick: doubleClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar FreeText = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--free-text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Popup = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var isRenderable = !!(annotation.title || annotation.contents);\n    var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n    var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n    useIsomorphicLayoutEffect(function () {\n        if (!annotation.parentId) {\n            return;\n        }\n        var parent = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.parentId, \"\\\"]\"));\n        var container = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n        if (!parent || !container) {\n            return;\n        }\n        var left = parseFloat(parent.style.left);\n        var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n        container.style.left = \"\".concat(left, \"px\");\n        container.style.top = \"\".concat(top, \"px\");\n        container.style.transformOrigin = \"-\".concat(left, \"px -\").concat(top, \"px\");\n    }, []);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--popup\", \"data-annotation-id\": annotation.id }),\n        React__namespace.createElement(PopupWrapper, { annotation: annotation }))); }));\n};\n\nvar Highlight = function (_a) {\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var hasQuadPoints = annotation.quadPoints && annotation.quadPoints.length > 0;\n    if (hasQuadPoints) {\n        var annotations = annotation.quadPoints.map(function (quadPoint) {\n            return Object.assign({}, annotation, {\n                rect: [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y],\n                quadPoints: [],\n            });\n        });\n        return (React__namespace.createElement(React__namespace.Fragment, null, annotations.map(function (ann, index) { return (React__namespace.createElement(Highlight, { key: index, annotation: ann, childAnnotation: childAnnotation, page: page, viewport: viewport })); })));\n    }\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--highlight\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children),\n        childAnnotation &&\n            childAnnotation.annotationType === exports.AnnotationType.Popup &&\n            props.popup.opened && React__namespace.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport }))); }));\n};\n\nvar Ink = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--ink\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.inkLists && annotation.inkLists.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") }, annotation.inkLists.map(function (inkList, index) { return (React__namespace.createElement(\"polyline\", { key: index, fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: inkList.map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); }).join(' ') })); }))),\n        props.slot.children)); }));\n};\n\nvar Line = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--line\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"line\", { stroke: \"transparent\", strokeWidth: borderWidth || 1, x1: rect[2] - annotation.lineCoordinates[0], x2: rect[2] - annotation.lineCoordinates[2], y1: rect[3] - annotation.lineCoordinates[1], y2: rect[3] - annotation.lineCoordinates[3] })),\n        props.slot.children)); }));\n};\n\nvar Link = function (_a) {\n    var annotation = _a.annotation, doc = _a.doc, page = _a.page, viewport = _a.viewport, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var link = function (e) {\n        e.preventDefault();\n        annotation.action\n            ? onExecuteNamedAction(annotation.action)\n            : getDestination(doc, annotation.dest).then(function (target) {\n                var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, leftOffset = target.leftOffset, scaleTo = target.scaleTo;\n                onJumpToDest(pageIndex, bottomOffset, leftOffset, scaleTo);\n            });\n    };\n    var isRenderable = !!(annotation.url || annotation.dest || annotation.action || annotation.unsafeUrl);\n    var externalUrl = annotation.url || annotation.unsafeUrl;\n    var attrs = externalUrl\n        ? {\n            'data-target': 'external',\n            href: externalUrl,\n            rel: 'noopener noreferrer nofollow',\n            target: annotation.newWindow ? '_blank' : '',\n            title: externalUrl,\n        }\n        : {\n            href: '',\n            'data-annotation-link-dest': annotation.dest,\n            onClick: link,\n        };\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: false, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--link\", \"data-annotation-id\": annotation.id, \"data-testid\": \"core__annotation--link-\".concat(annotation.id) }),\n        React__namespace.createElement(\"a\", __assign({}, attrs)))); }));\n};\n\nvar Polygon = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--polygon\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"polygon\", { fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: annotation.vertices\n                    .map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); })\n                    .join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Polyline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--polyline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"polyline\", { fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: annotation.vertices\n                    .map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); })\n                    .join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Square = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--square\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"rect\", { height: height - borderWidth, fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, x: borderWidth / 2, y: borderWidth / 2, width: width - borderWidth })),\n        props.slot.children)); }));\n};\n\nvar Squiggly = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--squiggly\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Stamp = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--stamp\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar StrikeOut = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--strike-out\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar CommentIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25\" }),\n    React__namespace.createElement(\"path\", { d: \"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75\" }),\n    React__namespace.createElement(\"path\", { d: \"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25\" }))); };\n\nvar HelpIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M21.423 5.406L17.415 9.414\" }),\n    React__namespace.createElement(\"path\", { d: \"M14.587 6.585L18.607 2.565\" }),\n    React__namespace.createElement(\"path\", { d: \"M5.405 21.424L9.413 17.416\" }),\n    React__namespace.createElement(\"path\", { d: \"M6.585 14.588L2.577 18.596\" }),\n    React__namespace.createElement(\"path\", { d: \"M18.602 21.419L14.595 17.412\" }),\n    React__namespace.createElement(\"path\", { d: \"M17.419 14.58L21.428 18.589\" }),\n    React__namespace.createElement(\"path\", { d: \"M2.582 5.399L6.588 9.406\" }),\n    React__namespace.createElement(\"path\", { d: \"M9.421 6.581L5.412 2.572\" }))); };\n\nvar KeyIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z\" }))); };\n\nvar NoteIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M6 4.5L6 0.5\" }),\n    React__namespace.createElement(\"path\", { d: \"M18 4.5L18 0.5\" }),\n    React__namespace.createElement(\"path\", { d: \"M10 4.5L10 0.5\" }),\n    React__namespace.createElement(\"path\", { d: \"M14 4.5L14 0.5\" }))); };\n\nvar ParagraphIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M17.5 0.498L17.5 23.498\" }),\n    React__namespace.createElement(\"path\", { d: \"M10.5 0.498L10.5 23.498\" }),\n    React__namespace.createElement(\"path\", { d: \"M23.5.5H6.5a6,6,0,0,0,0,12h4\" }))); };\n\nvar TriangleIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z\" }))); };\n\nvar Text = function (_a) {\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var name = annotation.name ? annotation.name.toLowerCase() : '';\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n            name && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-text-icon\" },\n                name === 'check' && React__namespace.createElement(CheckIcon, null),\n                name === 'comment' && React__namespace.createElement(CommentIcon, null),\n                name === 'help' && React__namespace.createElement(HelpIcon, null),\n                name === 'insert' && React__namespace.createElement(TriangleIcon, null),\n                name === 'key' && React__namespace.createElement(KeyIcon, null),\n                name === 'note' && React__namespace.createElement(NoteIcon, null),\n                (name === 'newparagraph' || name === 'paragraph') && React__namespace.createElement(ParagraphIcon, null))),\n            props.slot.children),\n        childAnnotation &&\n            childAnnotation.annotationType === exports.AnnotationType.Popup &&\n            props.popup.opened && React__namespace.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport }))); }));\n};\n\nvar Underline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--underline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar AnnotationLayerBody = function (_a) {\n    var annotations = _a.annotations, doc = _a.doc, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var containerRef = React__namespace.useRef();\n    var viewport = page.getViewport({ rotation: rotation, scale: scale });\n    var clonedViewPort = viewport.clone({ dontFlip: true });\n    var filterAnnotations = annotations.filter(function (annotation) { return !annotation.parentId; });\n    React__namespace.useEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        plugins.forEach(function (plugin) {\n            if (plugin.onAnnotationLayerRender) {\n                plugin.onAnnotationLayerRender({\n                    annotations: filterAnnotations,\n                    container: container,\n                    pageIndex: pageIndex,\n                    rotation: rotation,\n                    scale: scale,\n                });\n            }\n        });\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__annotation-layer\", \"data-testid\": \"core__annotation-layer-\".concat(pageIndex) }, filterAnnotations.map(function (annotation) {\n        var childAnnotation = annotations.find(function (item) { return item.parentId === annotation.id; });\n        switch (annotation.annotationType) {\n            case exports.AnnotationType.Caret:\n                return (React__namespace.createElement(Caret, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Circle:\n                return (React__namespace.createElement(Circle, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.FileAttachment:\n                return (React__namespace.createElement(FileAttachment, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.FreeText:\n                return (React__namespace.createElement(FreeText, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Highlight:\n                return (React__namespace.createElement(Highlight, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Ink:\n                return (React__namespace.createElement(Ink, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Line:\n                return (React__namespace.createElement(Line, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Link:\n                return (React__namespace.createElement(Link, { key: annotation.id, annotation: annotation, doc: doc, page: page, viewport: clonedViewPort, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }));\n            case exports.AnnotationType.Polygon:\n                return (React__namespace.createElement(Polygon, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Polyline:\n                return (React__namespace.createElement(Polyline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Popup:\n                return (React__namespace.createElement(Popup, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Square:\n                return (React__namespace.createElement(Square, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Squiggly:\n                return (React__namespace.createElement(Squiggly, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Stamp:\n                return (React__namespace.createElement(Stamp, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.StrikeOut:\n                return (React__namespace.createElement(StrikeOut, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Text:\n                return (React__namespace.createElement(Text, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Underline:\n                return (React__namespace.createElement(Underline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            default:\n                return React__namespace.createElement(React__namespace.Fragment, { key: annotation.id });\n        }\n    })));\n};\n\nvar AnnotationLoader = function (_a) {\n    var page = _a.page, renderAnnotations = _a.renderAnnotations;\n    var isMounted = useIsMounted();\n    var _b = React__namespace.useState({\n        loading: true,\n        annotations: [],\n    }), status = _b[0], setStatus = _b[1];\n    React__namespace.useEffect(function () {\n        page.getAnnotations({ intent: 'display' }).then(function (result) {\n            if (isMounted.current) {\n                setStatus({\n                    loading: false,\n                    annotations: result,\n                });\n            }\n        });\n    }, []);\n    return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : renderAnnotations(status.annotations);\n};\n\nvar AnnotationLayer = function (_a) {\n    var doc = _a.doc, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var renderAnnotations = function (annotations) { return (React__namespace.createElement(AnnotationLayerBody, { annotations: annotations, doc: doc, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotation, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest })); };\n    return React__namespace.createElement(AnnotationLoader, { page: page, renderAnnotations: renderAnnotations });\n};\n\nvar floatToRatio = function (x, limit) {\n    var _a, _b;\n    if (Math.floor(x) === x) {\n        return [x, 1];\n    }\n    var y = 1 / x;\n    if (y > limit) {\n        return [1, limit];\n    }\n    if (Math.floor(y) === y) {\n        return [1, y];\n    }\n    var value = x > 1 ? y : x;\n    var a = 0;\n    var b = 1;\n    var c = 1;\n    var d = 1;\n    while (true) {\n        var numerator = a + c;\n        var denominator = b + d;\n        if (denominator > limit) {\n            break;\n        }\n        value <= numerator / denominator ? (_a = [numerator, denominator], c = _a[0], d = _a[1], _a) : (_b = [numerator, denominator], a = _b[0], b = _b[1], _b);\n    }\n    var middle = (a / b + c / d) / 2;\n    return value < middle ? (value === x ? [a, b] : [b, a]) : value === x ? [c, d] : [d, c];\n};\n\nvar roundToDivide = function (a, b) {\n    var remainder = a % b;\n    return remainder === 0 ? a : Math.floor(a - remainder);\n};\n\nvar MAX_CANVAS_SIZE = 4096 * 4096;\nvar CanvasLayer = function (_a) {\n    var height = _a.height, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, width = _a.width, onRenderCanvasCompleted = _a.onRenderCanvasCompleted;\n    var canvasRef = React__namespace.useRef();\n    var renderTask = React__namespace.useRef();\n    useIsomorphicLayoutEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvasEle = canvasRef.current;\n        plugins.forEach(function (plugin) {\n            if (plugin.onCanvasLayerRender) {\n                plugin.onCanvasLayerRender({\n                    ele: canvasEle,\n                    pageIndex: pageIndex,\n                    rotation: rotation,\n                    scale: scale,\n                    status: exports.LayerRenderStatus.PreRender,\n                });\n            }\n        });\n        var viewport = page.getViewport({\n            rotation: rotation,\n            scale: scale,\n        });\n        var outputScale = window.devicePixelRatio || 1;\n        var maxScale = Math.sqrt(MAX_CANVAS_SIZE / (viewport.width * viewport.height));\n        var shouldScaleByCSS = outputScale > maxScale;\n        shouldScaleByCSS ? (canvasEle.style.transform = \"scale(1, 1)\") : canvasEle.style.removeProperty('transform');\n        var possibleScale = Math.min(maxScale, outputScale);\n        var _a = floatToRatio(possibleScale, 8), x = _a[0], y = _a[1];\n        canvasEle.width = roundToDivide(viewport.width * possibleScale, x);\n        canvasEle.height = roundToDivide(viewport.height * possibleScale, x);\n        canvasEle.style.width = \"\".concat(roundToDivide(viewport.width, y), \"px\");\n        canvasEle.style.height = \"\".concat(roundToDivide(viewport.height, y), \"px\");\n        canvasEle.hidden = true;\n        var canvasContext = canvasEle.getContext('2d', { alpha: false });\n        var transform = shouldScaleByCSS || outputScale !== 1 ? [possibleScale, 0, 0, possibleScale, 0, 0] : null;\n        renderTask.current = page.render({ canvasContext: canvasContext, transform: transform, viewport: viewport });\n        renderTask.current.promise.then(function () {\n            canvasEle.hidden = false;\n            plugins.forEach(function (plugin) {\n                if (plugin.onCanvasLayerRender) {\n                    plugin.onCanvasLayerRender({\n                        ele: canvasEle,\n                        pageIndex: pageIndex,\n                        rotation: rotation,\n                        scale: scale,\n                        status: exports.LayerRenderStatus.DidRender,\n                    });\n                }\n            });\n            onRenderCanvasCompleted();\n        }, function () {\n            onRenderCanvasCompleted();\n        });\n        return function () {\n            if (canvasEle) {\n                canvasEle.width = 0;\n                canvasEle.height = 0;\n            }\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__canvas-layer\", style: {\n            height: \"\".concat(height, \"px\"),\n            width: \"\".concat(width, \"px\"),\n        } },\n        React__namespace.createElement(\"canvas\", { ref: canvasRef })));\n};\n\nvar SvgLayer = function (_a) {\n    var height = _a.height, page = _a.page, rotation = _a.rotation, scale = _a.scale, width = _a.width;\n    var containerRef = React__namespace.useRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        containerEle.innerHTML = '';\n    };\n    useIsomorphicLayoutEffect(function () {\n        var containerEle = containerRef.current;\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        page.getOperatorList().then(function (operatorList) {\n            empty();\n            var graphic = new PdfJsApi__namespace.SVGGraphics(page.commonObjs, page.objs);\n            graphic.getSVG(operatorList, viewport).then(function (svg) {\n                svg.style.height = \"\".concat(height, \"px\");\n                svg.style.width = \"\".concat(width, \"px\");\n                containerEle.appendChild(svg);\n            });\n        });\n    }, []);\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__svg-layer\", ref: containerRef });\n};\n\nvar TextLayer = function (_a) {\n    var page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onRenderTextCompleted = _a.onRenderTextCompleted;\n    var containerRef = React__namespace.useRef();\n    var renderTask = React__namespace.useRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var spans = [].slice.call(containerEle.querySelectorAll('.rpv-core__text-layer-text'));\n        spans.forEach(function (span) { return containerEle.removeChild(span); });\n        var breaks = [].slice.call(containerEle.querySelectorAll('br[role=\"presentation\"]'));\n        breaks.forEach(function (br) { return containerEle.removeChild(br); });\n    };\n    useIsomorphicLayoutEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        containerEle.removeAttribute('data-testid');\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        plugins.forEach(function (plugin) {\n            if (plugin.onTextLayerRender) {\n                plugin.onTextLayerRender({\n                    ele: containerEle,\n                    pageIndex: pageIndex,\n                    scale: scale,\n                    status: exports.LayerRenderStatus.PreRender,\n                });\n            }\n        });\n        page.getTextContent().then(function (textContent) {\n            empty();\n            renderTask.current = PdfJsApi__namespace.renderTextLayer({\n                container: containerEle,\n                textContent: textContent,\n                viewport: viewport,\n                enhanceTextSelection: true,\n            });\n            renderTask.current.promise.then(function () {\n                containerEle.setAttribute('data-testid', \"core__text-layer-\".concat(pageIndex));\n                var spans = [].slice.call(containerEle.children);\n                spans.forEach(function (span) {\n                    if (!span.classList.contains('rpv-core__text-layer-text--not')) {\n                        span.classList.add('rpv-core__text-layer-text');\n                    }\n                });\n                plugins.forEach(function (plugin) {\n                    if (plugin.onTextLayerRender) {\n                        plugin.onTextLayerRender({\n                            ele: containerEle,\n                            pageIndex: pageIndex,\n                            scale: scale,\n                            status: exports.LayerRenderStatus.DidRender,\n                        });\n                    }\n                });\n                onRenderTextCompleted();\n            }, function () {\n                containerEle.removeAttribute('data-testid');\n                onRenderTextCompleted();\n            });\n        });\n        return function () {\n            var _a;\n            empty();\n            (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        };\n    }, []);\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__text-layer\", ref: containerRef });\n};\n\nvar PageLayer = function (_a) {\n    var doc = _a.doc, height = _a.height, measureRef = _a.measureRef, pageIndex = _a.pageIndex, pageRotation = _a.pageRotation, plugins = _a.plugins, renderPage = _a.renderPage, renderQueueKey = _a.renderQueueKey, rotation = _a.rotation, scale = _a.scale, shouldRender = _a.shouldRender, width = _a.width, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest, onRenderCompleted = _a.onRenderCompleted, onRotatePage = _a.onRotatePage;\n    var isMounted = useIsMounted();\n    var _b = React__namespace.useState({\n        page: null,\n        pageHeight: height,\n        pageWidth: width,\n        viewportRotation: 0,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var _c = React__namespace.useState(false), canvasLayerRendered = _c[0], setCanvasLayerRendered = _c[1];\n    var _d = React__namespace.useState(false), textLayerRendered = _d[0], setTextLayerRendered = _d[1];\n    var page = pageSize.page, pageHeight = pageSize.pageHeight, pageWidth = pageSize.pageWidth;\n    var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n    var scaledWidth = pageWidth * scale;\n    var scaledHeight = pageHeight * scale;\n    var w = isVertical ? scaledWidth : scaledHeight;\n    var h = isVertical ? scaledHeight : scaledWidth;\n    var rotationValue = (pageSize.viewportRotation + rotation + pageRotation) % 360;\n    var renderQueueKeyRef = React__namespace.useRef(0);\n    var determinePageSize = function () {\n        getPage(doc, pageIndex).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            if (isMounted.current) {\n                renderQueueKeyRef.current = renderQueueKey;\n                setPageSize({\n                    page: pdfPage,\n                    pageHeight: viewport.height,\n                    pageWidth: viewport.width,\n                    viewportRotation: viewport.rotation,\n                });\n            }\n        });\n    };\n    var defaultPageRenderer = function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        props.canvasLayer.children,\n        props.textLayer.children,\n        props.annotationLayer.children)); };\n    var renderPageLayer = renderPage || defaultPageRenderer;\n    var handleRenderCanvasCompleted = function () {\n        if (isMounted.current) {\n            setCanvasLayerRendered(true);\n        }\n    };\n    var handleRenderTextCompleted = function () {\n        if (isMounted.current) {\n            setTextLayerRendered(true);\n        }\n    };\n    React__namespace.useEffect(function () {\n        setPageSize({\n            page: null,\n            pageHeight: height,\n            pageWidth: width,\n            viewportRotation: 0,\n        });\n        setCanvasLayerRendered(false);\n        setTextLayerRendered(false);\n    }, [pageRotation, rotation, scale]);\n    React__namespace.useEffect(function () {\n        if (shouldRender && isMounted.current && !page) {\n            determinePageSize();\n        }\n    }, [shouldRender, page]);\n    React__namespace.useEffect(function () {\n        if (canvasLayerRendered && textLayerRendered) {\n            if (renderQueueKey !== renderQueueKeyRef.current) {\n                setPageSize({\n                    page: null,\n                    pageHeight: height,\n                    pageWidth: width,\n                    viewportRotation: 0,\n                });\n                setCanvasLayerRendered(false);\n                setTextLayerRendered(false);\n            }\n            else {\n                onRenderCompleted(pageIndex);\n            }\n        }\n    }, [canvasLayerRendered, textLayerRendered]);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__page-layer\", \"data-testid\": \"core__page-layer-\".concat(pageIndex), ref: measureRef, style: {\n            height: \"\".concat(h, \"px\"),\n            width: \"\".concat(w, \"px\"),\n        } }, !page ? (React__namespace.createElement(Spinner, { testId: \"core__page-layer-loading-\".concat(pageIndex) })) : (React__namespace.createElement(React__namespace.Fragment, null,\n        renderPageLayer({\n            annotationLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(AnnotationLayer, { doc: doc, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationValue, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest })),\n            },\n            canvasLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(CanvasLayer, { height: h, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationValue, scale: scale, width: w, onRenderCanvasCompleted: handleRenderCanvasCompleted })),\n            },\n            canvasLayerRendered: canvasLayerRendered,\n            doc: doc,\n            height: h,\n            pageIndex: pageIndex,\n            rotation: rotationValue,\n            scale: scale,\n            svgLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(SvgLayer, { height: h, page: page, rotation: rotationValue, scale: scale, width: w })),\n            },\n            textLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(TextLayer, { page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationValue, scale: scale, onRenderTextCompleted: handleRenderTextCompleted })),\n            },\n            textLayerRendered: textLayerRendered,\n            width: w,\n            markRendered: onRenderCompleted,\n            onRotatePage: function (direction) { return onRotatePage(pageIndex, direction); },\n        }),\n        plugins.map(function (plugin, idx) {\n            return plugin.renderPageLayer ? (React__namespace.createElement(React__namespace.Fragment, { key: idx }, plugin.renderPageLayer({\n                doc: doc,\n                height: h,\n                pageIndex: pageIndex,\n                rotation: rotationValue,\n                scale: scale,\n                width: w,\n            }))) : (React__namespace.createElement(React__namespace.Fragment, { key: idx }));\n        })))));\n};\n\nvar getFileExt = function (url) {\n    var str = url.split(/\\./).pop();\n    return str ? str.toLowerCase() : '';\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\nvar calculateScale = function (container, pageHeight, pageWidth, scale) {\n    switch (scale) {\n        case exports.SpecialZoomLevel.ActualSize:\n            return 1;\n        case exports.SpecialZoomLevel.PageFit:\n            return Math.min((container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth, (container.clientHeight - 2 * PAGE_PADDING) / pageHeight);\n        case exports.SpecialZoomLevel.PageWidth:\n            return (container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth;\n    }\n};\n\nvar NUM_OVERSCAN_PAGES = 3;\nvar Inner = function (_a) {\n    var currentFile = _a.currentFile, defaultScale = _a.defaultScale, doc = _a.doc, initialPage = _a.initialPage, pageSize = _a.pageSize, plugins = _a.plugins, renderPage = _a.renderPage, scrollMode = _a.scrollMode, viewerState = _a.viewerState, onDocumentLoad = _a.onDocumentLoad, onOpenFile = _a.onOpenFile, onPageChange = _a.onPageChange, onRotate = _a.onRotate, onRotatePage = _a.onRotatePage, onZoom = _a.onZoom;\n    var numPages = doc.numPages;\n    var docId = doc.loadingTask.docId;\n    var l10n = React__namespace.useContext(LocalizationContext).l10n;\n    var themeContext = React__namespace.useContext(ThemeContext);\n    var isRtl = themeContext.direction === exports.TextDirection.RightToLeft;\n    var containerRef = React__namespace.useRef();\n    var pagesRef = React__namespace.useRef();\n    var _b = React__namespace.useState(initialPage), currentPage = _b[0], setCurrentPage = _b[1];\n    var _c = React__namespace.useState(0), rotation = _c[0], setRotation = _c[1];\n    var _d = React__namespace.useState(false), pagesRotationChanged = _d[0], setPagesRotationChanged = _d[1];\n    var _e = React__namespace.useState(new Map()), pagesRotation = _e[0], setPagesRotation = _e[1];\n    var _f = React__namespace.useState(scrollMode), currentScrollMode = _f[0], setCurrentScrollMode = _f[1];\n    var previousScrollMode = usePrevious(currentScrollMode);\n    var _g = React__namespace.useState(pageSize.scale), scale = _g[0], setScale = _g[1];\n    var stateRef = React__namespace.useRef(viewerState);\n    var keepSpecialZoomLevelRef = React__namespace.useRef(typeof defaultScale === 'string' ? defaultScale : null);\n    var _h = React__namespace.useState(-1), renderPageIndex = _h[0], setRenderPageIndex = _h[1];\n    var _j = React__namespace.useState(0), renderQueueKey = _j[0], setRenderQueueKey = _j[1];\n    var renderQueue = useRenderQueue({ doc: doc });\n    React__namespace.useEffect(function () {\n        return function () {\n            clearPagesCache();\n        };\n    }, [docId]);\n    var estimateSize = React__namespace.useCallback(function () {\n        var sizes = [pageSize.pageHeight, pageSize.pageWidth];\n        var rect = Math.abs(rotation) % 180 === 0\n            ? {\n                height: sizes[0],\n                width: sizes[1],\n            }\n            : {\n                height: sizes[1],\n                width: sizes[0],\n            };\n        return {\n            height: rect.height * scale,\n            width: rect.width * scale,\n        };\n    }, [rotation, scale]);\n    var setStartRange = React__namespace.useCallback(function (startIndex) { return Math.max(startIndex - NUM_OVERSCAN_PAGES, 0); }, []);\n    var setEndRange = React__namespace.useCallback(function (endIndex) { return Math.min(endIndex + NUM_OVERSCAN_PAGES, numPages - 1); }, [numPages]);\n    var transformSize = React__namespace.useCallback(function (size) { return size; }, []);\n    var virtualizer = useVirtual({\n        estimateSize: estimateSize,\n        isRtl: isRtl,\n        numberOfItems: numPages,\n        parentRef: pagesRef,\n        scrollMode: currentScrollMode,\n        setStartRange: setStartRange,\n        setEndRange: setEndRange,\n        transformSize: transformSize,\n    });\n    var handlePagesResize = useDebounceCallback(function (_) {\n        if (keepSpecialZoomLevelRef.current) {\n            setRenderPageIndex(-1);\n            zoom(keepSpecialZoomLevelRef.current);\n        }\n    }, 200);\n    useTrackResize({\n        targetRef: pagesRef,\n        onResize: handlePagesResize,\n    });\n    var pageWidth = pageSize.pageWidth, pageHeight = pageSize.pageHeight;\n    var setViewerState = function (viewerState) {\n        var newState = viewerState;\n        plugins.forEach(function (plugin) {\n            if (plugin.onViewerStateChange) {\n                newState = plugin.onViewerStateChange(newState);\n            }\n        });\n        stateRef.current = newState;\n    };\n    var getPagesContainer = function () { return pagesRef.current; };\n    var getViewerState = function () { return stateRef.current; };\n    var jumpToDestination = React__namespace.useCallback(function (pageIndex, bottomOffset, leftOffset, scaleTo) {\n        var pagesContainer = pagesRef.current;\n        var currentState = stateRef.current;\n        if (!pagesContainer || !currentState) {\n            return;\n        }\n        getPage(doc, pageIndex).then(function (page) {\n            var viewport = page.getViewport({ scale: 1 });\n            var top = 0;\n            var bottom = (typeof bottomOffset === 'function'\n                ? bottomOffset(viewport.width, viewport.height)\n                : bottomOffset) || 0;\n            var left = (typeof leftOffset === 'function' ? leftOffset(viewport.width, viewport.height) : leftOffset) || 0;\n            var updateScale = currentState.scale;\n            switch (scaleTo) {\n                case exports.SpecialZoomLevel.PageFit:\n                    top = 0;\n                    left = 0;\n                    zoom(exports.SpecialZoomLevel.PageFit);\n                    break;\n                case exports.SpecialZoomLevel.PageWidth:\n                    updateScale = calculateScale(pagesContainer, pageHeight, pageWidth, exports.SpecialZoomLevel.PageWidth);\n                    top = (viewport.height - bottom) * updateScale;\n                    left = left * updateScale;\n                    zoom(updateScale);\n                    break;\n                default:\n                    var boundingRect = viewport.convertToViewportPoint(left, bottom);\n                    left = Math.max(boundingRect[0] * currentState.scale, 0);\n                    top = Math.max(boundingRect[1] * currentState.scale, 0);\n                    break;\n            }\n            switch (currentState.scrollMode) {\n                case exports.ScrollMode.Horizontal:\n                    virtualizer.scrollToItem(pageIndex, { left: left, top: 0 });\n                    break;\n                case exports.ScrollMode.Vertical:\n                default:\n                    virtualizer.scrollToItem(pageIndex, { left: 0, top: top });\n                    break;\n            }\n        });\n    }, []);\n    var jumpToPage = React__namespace.useCallback(function (pageIndex) {\n        if (0 <= pageIndex && pageIndex < numPages) {\n            virtualizer.scrollToItem(pageIndex, { left: 0, top: 0 });\n        }\n    }, []);\n    var openFile = React__namespace.useCallback(function (file) {\n        if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n            return;\n        }\n        new Promise(function (resolve) {\n            var reader = new FileReader();\n            reader.readAsArrayBuffer(file);\n            reader.onload = function () {\n                var bytes = new Uint8Array(reader.result);\n                resolve(bytes);\n            };\n        }).then(function (data) {\n            onOpenFile(file.name, data);\n        });\n    }, [onOpenFile]);\n    var rotate = React__namespace.useCallback(function (direction) {\n        var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\n        var currentRotation = stateRef.current.rotation;\n        var updateRotation = currentRotation === 360 || currentRotation === -360 ? degrees : currentRotation + degrees;\n        renderQueue.markNotRendered();\n        setRotation(updateRotation);\n        setViewerState(__assign(__assign({}, stateRef.current), { rotation: updateRotation }));\n        onRotate({ direction: direction, doc: doc, rotation: updateRotation });\n    }, []);\n    var rotatePage = React__namespace.useCallback(function (pageIndex, direction) {\n        var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\n        var rotations = stateRef.current.pagesRotation;\n        var currentPageRotation = rotations.has(pageIndex) ? rotations.get(pageIndex) : 0;\n        var finalRotation = currentPageRotation + degrees;\n        var updateRotations = rotations.set(pageIndex, finalRotation);\n        setPagesRotation(updateRotations);\n        setPagesRotationChanged(function (value) { return !value; });\n        setViewerState(__assign(__assign({}, stateRef.current), { pagesRotation: updateRotations, rotatedPage: pageIndex }));\n        onRotatePage({ direction: direction, doc: doc, pageIndex: pageIndex, rotation: finalRotation });\n        renderQueue.markRendering(pageIndex);\n        setRenderPageIndex(pageIndex);\n    }, []);\n    var switchScrollMode = React__namespace.useCallback(function (scrollMode) {\n        setViewerState(__assign(__assign({}, stateRef.current), { scrollMode: scrollMode }));\n        setCurrentScrollMode(scrollMode);\n    }, []);\n    var zoom = React__namespace.useCallback(function (newScale) {\n        var pagesEle = pagesRef.current;\n        var updateScale = pagesEle\n            ? typeof newScale === 'string'\n                ? calculateScale(pagesEle, pageHeight, pageWidth, newScale)\n                : newScale\n            : 1;\n        keepSpecialZoomLevelRef.current = typeof newScale === 'string' ? newScale : null;\n        if (updateScale === stateRef.current.scale) {\n            return;\n        }\n        virtualizer.zoom(updateScale / stateRef.current.scale);\n        setRenderQueueKey(function (key) { return key + 1; });\n        renderQueue.markNotRendered();\n        setScale(updateScale);\n        onZoom({ doc: doc, scale: updateScale });\n        setViewerState(__assign(__assign({}, stateRef.current), { scale: updateScale }));\n    }, []);\n    React__namespace.useEffect(function () {\n        var pluginMethods = {\n            getPagesContainer: getPagesContainer,\n            getViewerState: getViewerState,\n            jumpToDestination: jumpToDestination,\n            jumpToPage: jumpToPage,\n            openFile: openFile,\n            rotate: rotate,\n            rotatePage: rotatePage,\n            setViewerState: setViewerState,\n            switchScrollMode: switchScrollMode,\n            zoom: zoom,\n        };\n        plugins.forEach(function (plugin) {\n            if (plugin.install) {\n                plugin.install(pluginMethods);\n            }\n        });\n        return function () {\n            plugins.forEach(function (plugin) {\n                if (plugin.uninstall) {\n                    plugin.uninstall(pluginMethods);\n                }\n            });\n        };\n    }, [docId]);\n    React__namespace.useEffect(function () {\n        onDocumentLoad({ doc: doc, file: currentFile });\n        plugins.forEach(function (plugin) {\n            plugin.onDocumentLoad && plugin.onDocumentLoad({ doc: doc, file: currentFile });\n        });\n        if (initialPage) {\n            jumpToPage(initialPage);\n        }\n    }, [docId]);\n    useIsomorphicLayoutEffect(function () {\n        var latestPage = stateRef.current.pageIndex;\n        if (latestPage > -1 && previousScrollMode !== currentScrollMode) {\n            virtualizer.scrollToItem(latestPage, { left: 0, top: 0 });\n        }\n    }, [currentScrollMode]);\n    React__namespace.useEffect(function () {\n        var isSmoothScrolling = virtualizer.isSmoothScrolling;\n        if (isSmoothScrolling) {\n            return;\n        }\n        if ((stateRef.current.pageIndex === -1 && currentPage === initialPage) ||\n            (currentPage === stateRef.current.pageIndex && currentPage !== initialPage)) {\n            onPageChange({ currentPage: currentPage, doc: doc });\n        }\n    }, [currentPage, virtualizer.isSmoothScrolling]);\n    React__namespace.useEffect(function () {\n        var startRange = virtualizer.startRange, endRange = virtualizer.endRange, maxVisbilityIndex = virtualizer.maxVisbilityIndex, virtualItems = virtualizer.virtualItems;\n        var currentPage = maxVisbilityIndex;\n        setCurrentPage(currentPage);\n        setViewerState(__assign(__assign({}, stateRef.current), { pageIndex: currentPage }));\n        renderQueue.setRange(startRange, endRange);\n        var _loop_1 = function (i) {\n            var item = virtualItems.find(function (item) { return item.index === i; });\n            if (item) {\n                renderQueue.setVisibility(i, item.visibility);\n            }\n        };\n        for (var i = startRange; i <= endRange; i++) {\n            _loop_1(i);\n        }\n        renderNextPage();\n    }, [\n        virtualizer.startRange,\n        virtualizer.endRange,\n        virtualizer.maxVisbilityIndex,\n        pagesRotationChanged,\n        rotation,\n        scale,\n    ]);\n    var handlePageRenderCompleted = React__namespace.useCallback(function (pageIndex) {\n        renderQueue.markRendered(pageIndex);\n        renderNextPage();\n    }, [renderQueueKey]);\n    var renderNextPage = function () {\n        var nextPage = renderQueue.getHighestPriorityPage();\n        if (nextPage > -1 && renderQueue.isInRange(nextPage)) {\n            renderQueue.markRendering(nextPage);\n            setRenderPageIndex(nextPage);\n        }\n    };\n    var executeNamedAction = function (action) {\n        var previousPage = currentPage - 1;\n        var nextPage = currentPage + 1;\n        switch (action) {\n            case 'FirstPage':\n                jumpToPage(0);\n                break;\n            case 'LastPage':\n                jumpToPage(numPages - 1);\n                break;\n            case 'NextPage':\n                nextPage < numPages && jumpToPage(nextPage);\n                break;\n            case 'PrevPage':\n                previousPage >= 0 && jumpToPage(previousPage);\n                break;\n        }\n    };\n    var renderViewer = React__namespace.useCallback(function () {\n        var pageLabel = l10n && l10n.core ? l10n.core.pageLabel : 'Page {{pageIndex}}';\n        var slot = {\n            attrs: {\n                'data-testid': 'core__inner-container',\n                ref: containerRef,\n                style: {\n                    height: '100%',\n                },\n            },\n            children: React__namespace.createElement(React__namespace.Fragment, null),\n            subSlot: {\n                attrs: {\n                    'data-testid': 'core__inner-pages',\n                    className: classNames({\n                        'rpv-core__inner-pages': true,\n                        'rpv-core__inner-pages--horizontal': currentScrollMode === exports.ScrollMode.Horizontal,\n                        'rpv-core__inner-pages--rtl': isRtl,\n                        'rpv-core__inner-pages--vertical': currentScrollMode === exports.ScrollMode.Vertical,\n                        'rpv-core__inner-pages--wrapped': currentScrollMode === exports.ScrollMode.Wrapped,\n                    }),\n                    ref: pagesRef,\n                    style: {\n                        height: '100%',\n                        overflow: 'auto',\n                        position: 'relative',\n                    },\n                },\n                children: (React__namespace.createElement(\"div\", { style: virtualizer.getContainerStyles() }, virtualizer.virtualItems.map(function (item) { return (React__namespace.createElement(\"div\", { \"aria-label\": pageLabel.replace('{{pageIndex}}', \"\".concat(item.index + 1)), className: \"rpv-core__inner-page\", key: item.index, role: \"region\", style: virtualizer.getItemStyles(item) },\n                    React__namespace.createElement(PageLayer, { doc: doc, height: pageHeight, measureRef: item.measureRef, pageIndex: item.index, pageRotation: pagesRotation.has(item.index) ? pagesRotation.get(item.index) : 0, plugins: plugins, renderPage: renderPage, renderQueueKey: renderQueueKey, rotation: rotation, scale: scale, shouldRender: renderPageIndex === item.index, width: pageWidth, onExecuteNamedAction: executeNamedAction, onJumpToDest: jumpToDestination, onRenderCompleted: handlePageRenderCompleted, onRotatePage: rotatePage }))); }))),\n            },\n        };\n        plugins.forEach(function (plugin) {\n            if (plugin.renderViewer) {\n                slot = plugin.renderViewer({\n                    containerRef: containerRef,\n                    doc: doc,\n                    pageHeight: pageHeight,\n                    pageWidth: pageWidth,\n                    pagesRotation: pagesRotation,\n                    rotation: rotation,\n                    slot: slot,\n                    themeContext: themeContext,\n                    jumpToPage: jumpToPage,\n                    openFile: openFile,\n                    rotate: rotate,\n                    rotatePage: rotatePage,\n                    switchScrollMode: switchScrollMode,\n                    zoom: zoom,\n                });\n            }\n        });\n        return slot;\n    }, [plugins, virtualizer]);\n    var renderSlot = React__namespace.useCallback(function (slot) { return (React__namespace.createElement(\"div\", __assign({}, slot.attrs, { style: slot.attrs && slot.attrs.style ? slot.attrs.style : {} }),\n        slot.children,\n        slot.subSlot && renderSlot(slot.subSlot))); }, []);\n    return renderSlot(renderViewer());\n};\n\nvar LEVELS = [\n    0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6,\n    5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10,\n];\nvar decrease = function (currentLevel) {\n    var found = LEVELS.findIndex(function (item) { return item >= currentLevel; });\n    return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar RESERVE_HEIGHT = 45;\nvar RESERVE_WIDTH = 45;\nvar PageSizeCalculator = function (_a) {\n    var defaultScale = _a.defaultScale, doc = _a.doc, render = _a.render, scrollMode = _a.scrollMode;\n    var pagesRef = React__namespace.useRef();\n    var _b = React__namespace.useState({\n        pageHeight: 0,\n        pageWidth: 0,\n        scale: 1,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    React__namespace.useLayoutEffect(function () {\n        getPage(doc, 0).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            var w = viewport.width;\n            var h = viewport.height;\n            var pagesEle = pagesRef.current;\n            if (!pagesEle) {\n                return;\n            }\n            var parentEle = pagesEle.parentElement;\n            var scaleWidth = (parentEle.clientWidth - RESERVE_WIDTH) / w;\n            var scaleHeight = (parentEle.clientHeight - RESERVE_HEIGHT) / h;\n            var scaled = scaleWidth;\n            switch (scrollMode) {\n                case exports.ScrollMode.Horizontal:\n                    scaled = Math.min(scaleWidth, scaleHeight);\n                    break;\n                case exports.ScrollMode.Vertical:\n                default:\n                    scaled = scaleWidth;\n                    break;\n            }\n            var scale = defaultScale\n                ? typeof defaultScale === 'string'\n                    ? calculateScale(parentEle, h, w, defaultScale)\n                    : defaultScale\n                : decrease(scaled);\n            setPageSize({\n                pageHeight: h,\n                pageWidth: w,\n                scale: scale,\n            });\n        });\n    }, [doc]);\n    var pageWidth = pageSize.pageWidth;\n    return pageWidth === 0 ? (React__namespace.createElement(\"div\", { className: \"rpv-core__page-size-calculator\", \"data-testid\": \"core__page-size-calculating\", ref: pagesRef },\n        React__namespace.createElement(Spinner, null))) : (render(pageSize));\n};\n\nvar LoadingStatus = (function () {\n    function LoadingStatus() {\n    }\n    return LoadingStatus;\n}());\n\nvar SubmitPassword;\n(function (SubmitPassword) {\n    SubmitPassword[SubmitPassword[\"REQUIRE_PASSWORD\"] = 0] = \"REQUIRE_PASSWORD\";\n    SubmitPassword[SubmitPassword[\"WRONG_PASSWORD\"] = 1] = \"WRONG_PASSWORD\";\n})(SubmitPassword || (SubmitPassword = {}));\nvar AskForPasswordState = (function (_super) {\n    __extends(AskForPasswordState, _super);\n    function AskForPasswordState(verifyPassword, submitPassword) {\n        var _this = _super.call(this) || this;\n        _this.verifyPassword = verifyPassword;\n        _this.submitPassword = submitPassword;\n        return _this;\n    }\n    return AskForPasswordState;\n}(LoadingStatus));\n\nvar AskingPassword = function (_a) {\n    var submitPassword = _a.submitPassword, verifyPassword = _a.verifyPassword, onDocumentAskPassword = _a.onDocumentAskPassword;\n    var l10n = React__namespace.useContext(LocalizationContext).l10n;\n    var _b = React__namespace.useState(''), password = _b[0], setPassword = _b[1];\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var submit = function () { return verifyPassword(password); };\n    var handleKeyDown = function (e) {\n        if (e.key === 'Enter') {\n            submit();\n        }\n    };\n    React__namespace.useEffect(function () {\n        if (onDocumentAskPassword) {\n            onDocumentAskPassword({\n                verifyPassword: verifyPassword,\n            });\n        }\n    }, []);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-wrapper\" },\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__asking-password': true,\n                'rpv-core__asking-password--rtl': isRtl,\n            }) },\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-message\" },\n                submitPassword === SubmitPassword.REQUIRE_PASSWORD &&\n                    l10n.core.askingPassword\n                        .requirePasswordToOpen,\n                submitPassword === SubmitPassword.WRONG_PASSWORD &&\n                    l10n.core.wrongPassword.tryAgain),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-body\" },\n                React__namespace.createElement(\"div\", { className: classNames({\n                        'rpv-core__asking-password-input': true,\n                        'rpv-core__asking-password-input--ltr': !isRtl,\n                        'rpv-core__asking-password-input--rtl': isRtl,\n                    }) },\n                    React__namespace.createElement(TextBox, { testId: \"core__asking-password-input\", type: \"password\", value: password, onChange: setPassword, onKeyDown: handleKeyDown })),\n                React__namespace.createElement(PrimaryButton, { onClick: submit }, l10n.core.askingPassword.submit)))));\n};\n\nvar CompletedState = (function (_super) {\n    __extends(CompletedState, _super);\n    function CompletedState(doc) {\n        var _this = _super.call(this) || this;\n        _this.doc = doc;\n        return _this;\n    }\n    return CompletedState;\n}(LoadingStatus));\n\nvar FailureState = (function (_super) {\n    __extends(FailureState, _super);\n    function FailureState(error) {\n        var _this = _super.call(this) || this;\n        _this.error = error;\n        return _this;\n    }\n    return FailureState;\n}(LoadingStatus));\n\nvar LoadingState = (function (_super) {\n    __extends(LoadingState, _super);\n    function LoadingState(percentages) {\n        var _this = _super.call(this) || this;\n        _this.percentages = percentages;\n        return _this;\n    }\n    return LoadingState;\n}(LoadingStatus));\n\nvar DocumentLoader = function (_a) {\n    var characterMap = _a.characterMap, file = _a.file, httpHeaders = _a.httpHeaders, render = _a.render, renderError = _a.renderError, renderLoader = _a.renderLoader, transformGetDocumentParams = _a.transformGetDocumentParams, withCredentials = _a.withCredentials, onDocumentAskPassword = _a.onDocumentAskPassword;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var _b = React__namespace.useState(new LoadingState(0)), status = _b[0], setStatus = _b[1];\n    var _c = React__namespace.useState(0); _c[0]; _c[1];\n    var docRef = React__namespace.useRef('');\n    var _d = React__namespace.useState(null); _d[0]; _d[1];\n    var isMounted = useIsMounted();\n    React__namespace.useEffect(function () {\n        docRef.current = '';\n        setStatus(new LoadingState(0));\n        var worker = new PdfJsApi__namespace.PDFWorker({ name: \"PDFWorker_\".concat(Date.now()) });\n        var params = Object.assign({\n            httpHeaders: httpHeaders,\n            withCredentials: withCredentials,\n            worker: worker,\n        }, 'string' === typeof file ? { url: file } : { data: file }, characterMap\n            ? {\n                cMapUrl: characterMap.url,\n                cMapPacked: characterMap.isCompressed,\n            }\n            : {});\n        var transformParams = transformGetDocumentParams ? transformGetDocumentParams(params) : params;\n        var loadingTask = PdfJsApi__namespace.getDocument(transformParams);\n        loadingTask.onPassword = function (verifyPassword, reason) {\n            switch (reason) {\n                case PdfJsApi__namespace.PasswordResponses.NEED_PASSWORD:\n                    isMounted.current &&\n                        setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.REQUIRE_PASSWORD));\n                    break;\n                case PdfJsApi__namespace.PasswordResponses.INCORRECT_PASSWORD:\n                    isMounted.current &&\n                        setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.WRONG_PASSWORD));\n                    break;\n            }\n        };\n        loadingTask.onProgress = function (progress) {\n            var loaded = progress.total > 0\n                ?\n                    Math.min(100, (100 * progress.loaded) / progress.total)\n                : 100;\n            if (isMounted.current && docRef.current === '') {\n                setStatus(new LoadingState(loaded));\n            }\n        };\n        loadingTask.promise.then(function (doc) {\n            docRef.current = doc.loadingTask.docId;\n            isMounted.current && setStatus(new CompletedState(doc));\n        }, function (err) {\n            return isMounted.current &&\n                !worker.destroyed &&\n                setStatus(new FailureState({\n                    message: err.message || 'Cannot load document',\n                    name: err.name,\n                }));\n        });\n        return function () {\n            loadingTask.destroy();\n            worker.destroy();\n        };\n    }, [file]);\n    if (status instanceof AskForPasswordState) {\n        return (React__namespace.createElement(AskingPassword, { submitPassword: status.submitPassword, verifyPassword: status.verifyPassword, onDocumentAskPassword: onDocumentAskPassword }));\n    }\n    if (status instanceof CompletedState) {\n        return render(status.doc);\n    }\n    if (status instanceof FailureState) {\n        return renderError ? (renderError(status.error)) : (React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__doc-error': true,\n                'rpv-core__doc-error--rtl': isRtl,\n            }) },\n            React__namespace.createElement(\"div\", { className: \"rpv-core__doc-error-text\" }, status.error.message)));\n    }\n    return (React__namespace.createElement(\"div\", { \"data-testid\": \"core__doc-loading\", className: classNames({\n            'rpv-core__doc-loading': true,\n            'rpv-core__doc-loading--rtl': isRtl,\n        }) }, renderLoader ? renderLoader(status.percentages) : React__namespace.createElement(Spinner, null)));\n};\n\nvar isDarkMode = function () {\n    return typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n};\n\nvar withTheme = function (theme, onSwitchTheme) {\n    var initialTheme = React__namespace.useMemo(function () { return (theme === 'auto' ? (isDarkMode() ? 'dark' : 'light') : theme); }, []);\n    var _a = React__namespace.useState(initialTheme), currentTheme = _a[0], setCurrentTheme = _a[1];\n    var prevTheme = usePrevious(currentTheme);\n    React__namespace.useEffect(function () {\n        if (theme !== 'auto') {\n            return;\n        }\n        var media = window.matchMedia('(prefers-color-scheme: dark)');\n        var handler = function (e) {\n            setCurrentTheme(e.matches ? 'dark' : 'light');\n        };\n        media.addEventListener('change', handler);\n        return function () { return media.removeEventListener('change', handler); };\n    }, []);\n    React__namespace.useEffect(function () {\n        if (currentTheme !== prevTheme && onSwitchTheme) {\n            onSwitchTheme(currentTheme);\n        }\n    }, [currentTheme]);\n    React__namespace.useEffect(function () {\n        if (theme !== currentTheme) {\n            setCurrentTheme(theme);\n        }\n    }, [theme]);\n    return {\n        currentTheme: currentTheme,\n        setCurrentTheme: setCurrentTheme,\n    };\n};\n\nvar isSameUrl = function (a, b) {\n    var typeA = typeof a;\n    var typeB = typeof b;\n    if (typeA === 'string' && typeB === 'string' && a === b) {\n        return true;\n    }\n    if (typeA === 'object' && typeB === 'object') {\n        return a.length === b.length && a.every(function (v, i) { return v === b[i]; });\n    }\n    return false;\n};\n\nvar Viewer = function (_a) {\n    var characterMap = _a.characterMap, defaultScale = _a.defaultScale, fileUrl = _a.fileUrl, _b = _a.httpHeaders, httpHeaders = _b === void 0 ? {} : _b, _c = _a.initialPage, initialPage = _c === void 0 ? 0 : _c, localization = _a.localization, _d = _a.plugins, plugins = _d === void 0 ? [] : _d, renderError = _a.renderError, renderPage = _a.renderPage, renderLoader = _a.renderLoader, _e = _a.scrollMode, scrollMode = _e === void 0 ? exports.ScrollMode.Vertical : _e, transformGetDocumentParams = _a.transformGetDocumentParams, _f = _a.theme, theme = _f === void 0 ? {\n        direction: exports.TextDirection.LeftToRight,\n        theme: 'light',\n    } : _f, _g = _a.withCredentials, withCredentials = _g === void 0 ? false : _g, onDocumentAskPassword = _a.onDocumentAskPassword, _h = _a.onDocumentLoad, onDocumentLoad = _h === void 0 ? function () {\n    } : _h, _j = _a.onPageChange, onPageChange = _j === void 0 ? function () {\n    } : _j, _k = _a.onRotate, onRotate = _k === void 0 ? function () {\n    } : _k, _l = _a.onRotatePage, onRotatePage = _l === void 0 ? function () {\n    } : _l, _m = _a.onSwitchTheme, onSwitchTheme = _m === void 0 ? function () {\n    } : _m, _o = _a.onZoom, onZoom = _o === void 0 ? function () {\n    } : _o;\n    var _p = React__namespace.useState({\n        data: fileUrl,\n        name: typeof fileUrl === 'string' ? fileUrl : '',\n        shouldLoad: false,\n    }), file = _p[0], setFile = _p[1];\n    var openFile = function (fileName, data) {\n        setFile({\n            data: data,\n            name: fileName,\n            shouldLoad: true,\n        });\n    };\n    var _q = React__namespace.useState(false), visible = _q[0], setVisible = _q[1];\n    var prevFile = usePrevious(file);\n    React__namespace.useEffect(function () {\n        if (!isSameUrl(prevFile.data, fileUrl)) {\n            setFile({\n                data: fileUrl,\n                name: typeof fileUrl === 'string' ? fileUrl : '',\n                shouldLoad: visible,\n            });\n        }\n    }, [fileUrl, visible]);\n    var visibilityChanged = function (params) {\n        setVisible(params.isVisible);\n        if (params.isVisible) {\n            setFile(function (currentFile) { return Object.assign({}, currentFile, { shouldLoad: true }); });\n        }\n    };\n    var containerRef = useIntersectionObserver({\n        onVisibilityChanged: visibilityChanged,\n    });\n    var themeProps = typeof theme === 'string' ? { direction: exports.TextDirection.LeftToRight, theme: theme } : theme;\n    var _r = React__namespace.useState(localization || DefaultLocalization), l10n = _r[0], setL10n = _r[1];\n    var localizationContext = { l10n: l10n, setL10n: setL10n };\n    var themeContext = Object.assign({}, { direction: themeProps.direction }, withTheme(themeProps.theme || 'light', onSwitchTheme));\n    React__namespace.useEffect(function () {\n        if (localization) {\n            setL10n(localization);\n        }\n    }, [localization]);\n    return (React__namespace.createElement(LocalizationContext.Provider, { value: localizationContext },\n        React__namespace.createElement(ThemeContext.Provider, { value: themeContext },\n            React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__viewer rpv-core__viewer--\".concat(themeContext.currentTheme), \"data-testid\": \"core__viewer\", style: {\n                    height: '100%',\n                    width: '100%',\n                } }, file.shouldLoad && (React__namespace.createElement(DocumentLoader, { characterMap: characterMap, file: file.data, httpHeaders: httpHeaders, render: function (doc) { return (React__namespace.createElement(PageSizeCalculator, { defaultScale: defaultScale, doc: doc, render: function (ps) { return (React__namespace.createElement(Inner, { currentFile: {\n                            data: file.data,\n                            name: file.name,\n                        }, defaultScale: defaultScale, doc: doc, initialPage: initialPage, pageSize: ps, plugins: plugins, renderPage: renderPage, scrollMode: scrollMode, viewerState: {\n                            file: file,\n                            pageIndex: -1,\n                            pageHeight: ps.pageHeight,\n                            pageWidth: ps.pageWidth,\n                            pagesRotation: new Map(),\n                            rotation: 0,\n                            scale: ps.scale,\n                            scrollMode: scrollMode,\n                        }, onDocumentLoad: onDocumentLoad, onOpenFile: openFile, onPageChange: onPageChange, onRotate: onRotate, onRotatePage: onRotatePage, onZoom: onZoom })); }, scrollMode: scrollMode })); }, renderError: renderError, renderLoader: renderLoader, transformGetDocumentParams: transformGetDocumentParams, withCredentials: withCredentials, onDocumentAskPassword: onDocumentAskPassword }))))));\n};\n\nvar Worker = function (_a) {\n    var children = _a.children, workerUrl = _a.workerUrl;\n    PdfJsApi__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n    return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LazyRender = LazyRender;\nexports.LocalizationContext = LocalizationContext;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.MinimalButton = MinimalButton;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.Spinner = Spinner;\nexports.Splitter = Splitter;\nexports.TextBox = TextBox;\nexports.ThemeContext = ThemeContext;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.classNames = classNames;\nexports.createStore = createStore;\nexports.getDestination = getDestination;\nexports.getPage = getPage;\nexports.isMac = isMac;\nexports.useIntersectionObserver = useIntersectionObserver;\nexports.useIsMounted = useIsMounted;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;\nexports.useRenderQueue = useRenderQueue;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}