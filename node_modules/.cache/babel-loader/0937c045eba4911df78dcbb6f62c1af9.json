{"ast":null,"code":"import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * @hidden\n */\n\nvar ShapeAnnotation =\n/** @class */\nfunction () {\n  function ShapeAnnotation(pdfviewer, pdfViewerBase) {\n    /**\n     * @private\n     */\n    this.shapeCount = 0;\n    /**\n     * @private\n     */\n\n    this.isAddAnnotationProgramatically = false;\n    this.pdfViewer = pdfviewer;\n    this.pdfViewerBase = pdfViewerBase;\n  }\n  /**\n   * @param shapeAnnotations\n   * @param pageNumber\n   * @param isImportAcion\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  ShapeAnnotation.prototype.renderShapeAnnotations = function (shapeAnnotations, pageNumber, isImportAcion) {\n    if (shapeAnnotations) {\n      if (shapeAnnotations.length >= 1) {\n        // eslint-disable-next-line\n        var shapeAnnots = this.pdfViewer.annotation.getStoredAnnotations(pageNumber, shapeAnnotations, '_annotations_shape');\n\n        if (!shapeAnnots || isImportAcion) {\n          for (var i = 0; i < shapeAnnotations.length; i++) {\n            // eslint-disable-next-line\n            var annotation = shapeAnnotations[i];\n            annotation.annotationAddMode = this.pdfViewer.annotationModule.findAnnotationMode(annotation, pageNumber, annotation.AnnotType);\n            var annotationObject = null;\n            this.shapeCount = this.shapeCount + 1;\n            var isAnnotationRotated = void 0;\n\n            if (annotation.ShapeAnnotationType) {\n              if (isImportAcion) {\n                if (this.pdfViewerBase.isJsonImported) {\n                  annotation.Bounds = this.pdfViewerBase.importJsonForRotatedDocuments(annotation.Rotate, pageNumber, annotation.Bounds, annotation.AnnotationRotation);\n                  isAnnotationRotated = this.pdfViewerBase.isPageRotated;\n                }\n              }\n\n              var vertexPoints = null;\n\n              if (annotation.VertexPoints) {\n                vertexPoints = [];\n\n                if (isImportAcion && this.pdfViewerBase.isJsonImported) {\n                  vertexPoints = this.pdfViewerBase.calculateVertexPoints(annotation.Rotate, pageNumber, annotation.VertexPoints, annotation.AnnotationRotation);\n                } else {\n                  for (var j = 0; j < annotation.VertexPoints.length; j++) {\n                    var x = annotation.VertexPoints[j].X ? annotation.VertexPoints[j].X : annotation.VertexPoints[j].x;\n                    var y = annotation.VertexPoints[j].Y ? annotation.VertexPoints[j].Y : annotation.VertexPoints[j].y;\n                    var point = {\n                      x: x,\n                      y: y\n                    };\n                    vertexPoints.push(point);\n                  }\n                }\n              } // eslint-disable-next-line\n\n\n              if (annotation.Bounds && annotation.EnableShapeLabel === true) {\n                // eslint-disable-next-line max-len\n                annotation.LabelBounds = this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds); // eslint-disable-next-line max-len\n\n                annotation.LabelBorderColor = annotation.LabelBorderColor ? annotation.LabelBorderColor : annotation.StrokeColor;\n                annotation.FontColor = annotation.FontColor ? annotation.FontColor : annotation.StrokeColor;\n                annotation.LabelFillColor = annotation.LabelFillColor ? annotation.LabelFillColor : annotation.FillColor;\n                annotation.FontSize = annotation.FontSize ? annotation.FontSize : 16; // eslint-disable-next-line max-len\n\n                annotation.LabelSettings = annotation.LabelSettings ? annotation.LabelSettings : this.pdfViewer.shapeLabelSettings;\n              } // eslint-disable-next-line max-len\n\n\n              annotation.AnnotationSelectorSettings = annotation.AnnotationSelectorSettings ? annotation.AnnotationSelectorSettings : this.pdfViewer.annotationSelectorSettings; // eslint-disable-next-line max-len\n\n              annotation.AnnotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation); // eslint-disable-next-line max-len\n\n              annotation.allowedInteractions = annotation.AllowedInteractions ? annotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n              var isPrint = true;\n\n              if (annotation.annotationAddMode === 'Imported Annotation') {\n                isPrint = annotation.IsPrint;\n              } else {\n                isPrint = annotation.AnnotationSettings.isPrint;\n              }\n\n              var left = annotation.Bounds.X ? annotation.Bounds.X : annotation.Bounds.x;\n              var top_1 = annotation.Bounds.Y ? annotation.Bounds.Y : annotation.Bounds.y;\n              var width = annotation.Bounds.Width ? annotation.Bounds.Width : annotation.Bounds.width;\n              var height = annotation.Bounds.Height ? annotation.Bounds.Height : annotation.Bounds.height; // eslint-disable-next-line max-len\n\n              annotationObject = {\n                id: 'shape' + this.shapeCount,\n                shapeAnnotationType: annotation.ShapeAnnotationType,\n                author: annotation.Author,\n                allowedInteractions: annotation.allowedInteractions,\n                modifiedDate: annotation.ModifiedDate,\n                subject: annotation.Subject,\n                // eslint-disable-next-line max-len\n                note: annotation.Note,\n                strokeColor: annotation.StrokeColor,\n                fillColor: annotation.FillColor,\n                opacity: annotation.Opacity,\n                thickness: annotation.Thickness,\n                rectangleDifference: annotation.RectangleDifference,\n                borderStyle: annotation.BorderStyle,\n                borderDashArray: annotation.BorderDashArray,\n                rotateAngle: annotation.RotateAngle,\n                isCloudShape: annotation.IsCloudShape,\n                // eslint-disable-next-line max-len\n                cloudIntensity: annotation.CloudIntensity,\n                vertexPoints: vertexPoints,\n                lineHeadStart: annotation.LineHeadStart,\n                lineHeadEnd: annotation.LineHeadEnd,\n                isLocked: annotation.IsLocked,\n                comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author),\n                review: {\n                  state: annotation.State,\n                  stateModel: annotation.StateModel,\n                  modifiedDate: annotation.ModifiedDate,\n                  author: annotation.Author\n                },\n                annotName: annotation.AnnotName,\n                bounds: {\n                  left: left,\n                  top: top_1,\n                  width: width,\n                  height: height,\n                  right: annotation.Bounds.Right,\n                  bottom: annotation.Bounds.Bottom\n                },\n                // eslint-disable-next-line max-len\n                labelContent: annotation.LabelContent,\n                enableShapeLabel: annotation.EnableShapeLabel,\n                labelFillColor: annotation.LabelFillColor,\n                fontColor: annotation.FontColor,\n                labelBorderColor: annotation.LabelBorderColor,\n                fontSize: annotation.FontSize,\n                // eslint-disable-next-line max-len\n                labelBounds: annotation.LabelBounds,\n                annotationSelectorSettings: this.getSettings(annotation),\n                labelSettings: annotation.LabelSettings,\n                annotationSettings: annotation.AnnotationSettings,\n                customData: this.pdfViewer.annotation.getCustomData(annotation),\n                isPrint: isPrint,\n                isCommentLock: annotation.IsCommentLock,\n                isAnnotationRotated: isAnnotationRotated\n              };\n              var annot = void 0; // eslint-disable-next-line\n\n              var vPoints = annotationObject.vertexPoints;\n\n              if (vertexPoints == null) {\n                vPoints = [];\n              } // eslint-disable-next-line max-len\n\n\n              annotation.AnnotationSelectorSettings = annotation.AnnotationSelectorSettings ? annotation.AnnotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n              annot = {\n                // eslint-disable-next-line max-len\n                id: 'shape' + this.shapeCount,\n                shapeAnnotationType: this.getShapeType(annotationObject),\n                author: annotationObject.author,\n                allowedInteractions: annotationObject.allowedInteractions,\n                modifiedDate: annotationObject.modifiedDate,\n                annotName: annotationObject.annotName,\n                subject: annotationObject.subject,\n                notes: annotationObject.note,\n                fillColor: annotationObject.fillColor,\n                strokeColor: annotationObject.strokeColor,\n                opacity: annotationObject.opacity,\n                // eslint-disable-next-line max-len\n                thickness: annotationObject.thickness,\n                borderStyle: annotationObject.borderStyle,\n                borderDashArray: annotationObject.borderDashArray ? annotationObject.borderDashArray.toString() : '0',\n                rotateAngle: parseFloat(annotationObject.rotateAngle.split('Angle')[1]),\n                comments: annotationObject.comments,\n                review: annotationObject.review,\n                isCloudShape: annotationObject.isCloudShape,\n                cloudIntensity: annotationObject.cloudIntensity,\n                taregetDecoraterShapes: this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadEnd),\n                // eslint-disable-next-line max-len\n                sourceDecoraterShapes: this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadStart),\n                vertexPoints: vPoints,\n                bounds: {\n                  x: annotationObject.bounds.left,\n                  y: annotationObject.bounds.top,\n                  width: annotationObject.bounds.width,\n                  height: annotationObject.bounds.height\n                },\n                pageIndex: pageNumber,\n                // eslint-disable-next-line max-len\n                labelContent: annotation.LabelContent,\n                enableShapeLabel: annotation.EnableShapeLabel,\n                labelFillColor: annotation.LabelFillColor,\n                fontColor: annotation.FontColor,\n                labelBorderColor: annotation.LabelBorderColor,\n                fontSize: annotation.FontSize,\n                labelBounds: annotation.LabelBounds,\n                annotationSelectorSettings: annotation.AnnotationSelectorSettings,\n                annotationSettings: annotationObject.annotationSettings,\n                annotationAddMode: annotation.annotationAddMode,\n                isPrint: isPrint,\n                isCommentLock: annotationObject.isCommentLock\n              };\n              var addedAnnot = this.pdfViewer.add(annot);\n              this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_shape');\n\n              if (this.isAddAnnotationProgramatically) {\n                var settings = {\n                  opacity: annot.opacity,\n                  strokeColor: annot.strokeColor,\n                  thickness: annot.thickness,\n                  modifiedDate: annot.modifiedDate,\n                  width: annot.bounds.width,\n                  height: annot.bounds.height\n                };\n                this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, annotation.ShapeAnnotationType, annot.bounds, settings);\n              }\n            }\n          }\n        }\n      } else if (shapeAnnotations.shapeAnnotationType) {\n        var annotationObject = this.createAnnotationObject(shapeAnnotations);\n        if (!isNullOrUndefined(shapeAnnotations.formFieldAnnotationType) && shapeAnnotations.formFieldAnnotationType !== \"\") this.pdfViewer.annotationModule.isFormFieldShape = true;else this.pdfViewer.annotationModule.isFormFieldShape = false;\n        this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_shape');\n        this.pdfViewer.annotationModule.triggerAnnotationAdd(shapeAnnotations);\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  ShapeAnnotation.prototype.getSettings = function (annotation) {\n    var selector = this.pdfViewer.annotationSelectorSettings;\n\n    if (annotation.AnnotationSelectorSettings) {\n      selector = annotation.AnnotationSelectorSettings;\n    } else {\n      selector = this.getSelector(annotation.ShapeAnnotationType, annotation.Subject);\n    }\n\n    return selector;\n  };\n  /**\n   * @param type\n   * @private\n   */\n\n\n  ShapeAnnotation.prototype.setAnnotationType = function (type) {\n    this.updateShapeProperties();\n    this.pdfViewerBase.disableTextSelectionMode();\n    var author = 'Guest';\n\n    switch (type) {\n      case 'Line':\n        this.currentAnnotationMode = 'Line'; // eslint-disable-next-line max-len\n\n        var modifiedDateLine = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(); // eslint-disable-next-line max-len\n\n        author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.lineSettings.author ? this.pdfViewer.lineSettings.author : 'Guest';\n        this.pdfViewer.drawingObject = {\n          // eslint-disable-next-line max-len\n          shapeAnnotationType: this.setShapeType('Line'),\n          fillColor: this.lineFillColor,\n          notes: '',\n          strokeColor: this.lineStrokeColor,\n          opacity: this.lineOpacity,\n          thickness: this.lineThickness,\n          modifiedDate: modifiedDateLine,\n          borderDashArray: this.lineDashArray.toString(),\n          // eslint-disable-next-line max-len\n          sourceDecoraterShapes: this.pdfViewer.annotation.getArrowType(this.lineStartHead.toString()),\n          taregetDecoraterShapes: this.pdfViewer.annotation.getArrowType(this.lineEndHead.toString()),\n          author: author,\n          subject: 'Line',\n          lineHeadStart: this.lineStartHead,\n          lineHeadEnd: this.lineEndHead,\n          isCommentLock: false\n        };\n        this.pdfViewer.tool = 'Line';\n        break;\n\n      case 'Arrow':\n        this.currentAnnotationMode = 'Arrow'; // eslint-disable-next-line max-len\n\n        var modifiedDateArrow = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n        author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.arrowSettings.author ? this.pdfViewer.arrowSettings.author : 'Guest';\n        this.pdfViewer.drawingObject = {\n          shapeAnnotationType: this.setShapeType('Arrow'),\n          opacity: this.arrowOpacity,\n          // eslint-disable-next-line max-len\n          sourceDecoraterShapes: this.pdfViewer.annotation.getArrowType(this.arrowStartHead.toString()),\n          taregetDecoraterShapes: this.pdfViewer.annotation.getArrowType(this.arrowEndHead.toString()),\n          // eslint-disable-next-line max-len\n          fillColor: this.arrowFillColor,\n          strokeColor: this.arrowStrokeColor,\n          notes: '',\n          thickness: this.arrowThickness,\n          borderDashArray: this.arrowDashArray.toString(),\n          author: author,\n          subject: 'Arrow',\n          // eslint-disable-next-line max-len\n          modifiedDate: modifiedDateArrow,\n          lineHeadStart: this.arrowStartHead,\n          lineHeadEnd: this.arrowEndHead,\n          isCommentLock: false\n        };\n        this.pdfViewer.tool = 'Line';\n        break;\n\n      case 'Rectangle':\n        this.currentAnnotationMode = 'Rectangle'; // eslint-disable-next-line max-len\n\n        var modifiedDateRect = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(); // eslint-disable-next-line max-len\n\n        author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.rectangleSettings.author ? this.pdfViewer.rectangleSettings.author : 'Guest';\n        this.pdfViewer.drawingObject = {\n          shapeAnnotationType: this.setShapeType('Rectangle'),\n          strokeColor: this.rectangleStrokeColor,\n          fillColor: this.rectangleFillColor,\n          opacity: this.rectangleOpacity,\n          notes: '',\n          thickness: this.rectangleThickness,\n          borderDashArray: '0',\n          modifiedDate: modifiedDateRect,\n          author: author,\n          subject: 'Rectangle',\n          isCommentLock: false\n        };\n        this.pdfViewer.tool = 'DrawTool';\n        break;\n\n      case 'Circle':\n        this.currentAnnotationMode = 'Circle'; // eslint-disable-next-line max-len\n\n        var modifiedDateCir = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(); // eslint-disable-next-line max-len\n\n        author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.circleSettings.author ? this.pdfViewer.circleSettings.author : 'Guest';\n        this.pdfViewer.drawingObject = {\n          shapeAnnotationType: this.setShapeType('Circle'),\n          strokeColor: this.circleStrokeColor,\n          fillColor: this.circleFillColor,\n          opacity: this.circleOpacity,\n          notes: '',\n          thickness: this.circleThickness,\n          borderDashArray: '0',\n          modifiedDate: modifiedDateCir,\n          author: author,\n          subject: 'Circle',\n          isCommentLock: false\n        };\n        this.pdfViewer.tool = 'DrawTool';\n        break;\n\n      case 'Polygon':\n        this.currentAnnotationMode = 'Polygon'; // eslint-disable-next-line max-len\n\n        var modifiedDatePolygon = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(); // eslint-disable-next-line max-len\n\n        author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.polygonSettings.author ? this.pdfViewer.polygonSettings.author : 'Guest';\n        this.pdfViewer.drawingObject = {\n          strokeColor: this.polygonStrokeColor,\n          fillColor: this.polygonFillColor,\n          opacity: this.polygonOpacity,\n          thickness: this.polygonThickness,\n          borderDashArray: '0',\n          notes: '',\n          author: author,\n          subject: 'Polygon',\n          modifiedDate: modifiedDatePolygon,\n          borderStyle: '',\n          isCommentLock: false\n        };\n        this.pdfViewer.tool = 'Polygon';\n        break;\n    }\n  };\n\n  ShapeAnnotation.prototype.updateShapeProperties = function () {\n    this.lineFillColor = this.pdfViewer.lineSettings.fillColor ? this.pdfViewer.lineSettings.fillColor : '#ffffff00';\n    this.lineStrokeColor = this.pdfViewer.lineSettings.strokeColor ? this.pdfViewer.lineSettings.strokeColor : '#ff0000';\n    this.lineThickness = this.pdfViewer.lineSettings.thickness ? this.pdfViewer.lineSettings.thickness : 1;\n    this.lineOpacity = this.pdfViewer.lineSettings.opacity ? this.pdfViewer.lineSettings.opacity : 1;\n    this.lineDashArray = this.pdfViewer.lineSettings.borderDashArray ? this.pdfViewer.lineSettings.borderDashArray : 0;\n    this.lineStartHead = this.pdfViewer.lineSettings.lineHeadStartStyle ? this.pdfViewer.lineSettings.lineHeadStartStyle : 'None';\n    this.lineEndHead = this.pdfViewer.lineSettings.lineHeadEndStyle ? this.pdfViewer.lineSettings.lineHeadEndStyle : 'None';\n    this.arrowFillColor = this.pdfViewer.arrowSettings.fillColor ? this.pdfViewer.arrowSettings.fillColor : '#ffffff00';\n    this.arrowStrokeColor = this.pdfViewer.arrowSettings.strokeColor ? this.pdfViewer.arrowSettings.strokeColor : '#ff0000';\n    this.arrowThickness = this.pdfViewer.arrowSettings.thickness ? this.pdfViewer.arrowSettings.thickness : 1;\n    this.arrowOpacity = this.pdfViewer.arrowSettings.opacity ? this.pdfViewer.arrowSettings.opacity : 1;\n    this.arrowDashArray = this.pdfViewer.arrowSettings.borderDashArray ? this.pdfViewer.arrowSettings.borderDashArray : 0;\n    this.arrowStartHead = this.pdfViewer.arrowSettings.lineHeadStartStyle ? this.pdfViewer.arrowSettings.lineHeadStartStyle : 'Closed';\n    this.arrowEndHead = this.pdfViewer.arrowSettings.lineHeadEndStyle ? this.pdfViewer.arrowSettings.lineHeadEndStyle : 'Closed';\n    this.rectangleFillColor = this.pdfViewer.rectangleSettings.fillColor ? this.pdfViewer.rectangleSettings.fillColor : '#ffffff00';\n    this.rectangleStrokeColor = this.pdfViewer.rectangleSettings.strokeColor ? this.pdfViewer.rectangleSettings.strokeColor : '#ff0000';\n    this.rectangleThickness = this.pdfViewer.rectangleSettings.thickness ? this.pdfViewer.rectangleSettings.thickness : 1;\n    this.rectangleOpacity = this.pdfViewer.rectangleSettings.opacity ? this.pdfViewer.rectangleSettings.opacity : 1;\n    this.circleFillColor = this.pdfViewer.circleSettings.fillColor ? this.pdfViewer.circleSettings.fillColor : '#ffffff00';\n    this.circleStrokeColor = this.pdfViewer.circleSettings.strokeColor ? this.pdfViewer.circleSettings.strokeColor : '#ff0000';\n    this.circleThickness = this.pdfViewer.circleSettings.thickness ? this.pdfViewer.circleSettings.thickness : 1;\n    this.circleOpacity = this.pdfViewer.circleSettings.opacity ? this.pdfViewer.circleSettings.opacity : 1;\n    this.polygonFillColor = this.pdfViewer.polygonSettings.fillColor ? this.pdfViewer.polygonSettings.fillColor : '#ffffff00';\n    this.polygonStrokeColor = this.pdfViewer.polygonSettings.strokeColor ? this.pdfViewer.polygonSettings.strokeColor : '#ff0000';\n    this.polygonThickness = this.pdfViewer.polygonSettings.thickness ? this.pdfViewer.polygonSettings.thickness : 1;\n    this.polygonOpacity = this.pdfViewer.polygonSettings.opacity ? this.pdfViewer.polygonSettings.opacity : 1;\n  };\n\n  ShapeAnnotation.prototype.setShapeType = function (shape) {\n    var shapeType;\n\n    switch (shape) {\n      case 'Line':\n        shapeType = 'Line';\n        break;\n\n      case 'Circle':\n        shapeType = 'Ellipse';\n        break;\n\n      case 'Square':\n        shapeType = 'Rectangle';\n        break;\n\n      case 'Polyline':\n        shapeType = 'Line';\n        break;\n\n      case 'Arrow':\n        shapeType = 'LineWidthArrowHead';\n        break;\n    }\n\n    return shapeType;\n  };\n\n  ShapeAnnotation.prototype.getShapeType = function (shape) {\n    var shapeType;\n\n    switch (shape.shapeAnnotationType) {\n      case 'Line':\n        shapeType = 'Line';\n        break;\n\n      case 'Circle':\n        shapeType = 'Ellipse';\n        break;\n\n      case 'Square':\n        shapeType = 'Rectangle';\n        break;\n\n      case 'Polyline':\n        shapeType = 'Line';\n        break;\n\n      case 'Polygon':\n        shapeType = 'Polygon';\n        break;\n    } // eslint-disable-next-line max-len\n\n\n    if ((shape.shapeAnnotationType === 'Line' || shape.shapeAnnotationType === 'Polyline') && (shape.lineHeadStart !== 'None' || shape.lineHeadEnd !== 'None')) {\n      shapeType = 'LineWidthArrowHead';\n    }\n\n    return shapeType;\n  };\n\n  ShapeAnnotation.prototype.getShapeAnnotType = function (shape) {\n    var shapeType;\n\n    switch (shape) {\n      case 'Line':\n      case 'LineWidthArrowHead':\n        shapeType = 'Line';\n        break;\n\n      case 'Rectangle':\n        shapeType = 'Square';\n        break;\n\n      case 'Ellipse':\n        shapeType = 'Circle';\n        break;\n\n      case 'Polygon':\n        shapeType = 'Polygon';\n        break;\n    }\n\n    return shapeType;\n  };\n  /**\n   * @param property\n   * @param pageNumber\n   * @param annotationBase\n   * @param property\n   * @param pageNumber\n   * @param annotationBase\n   * @param property\n   * @param pageNumber\n   * @param annotationBase\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  ShapeAnnotation.prototype.modifyInCollection = function (property, pageNumber, annotationBase) {\n    if (!isNullOrUndefined(annotationBase.formFieldAnnotationType) && annotationBase.formFieldAnnotationType !== \"\") this.pdfViewer.annotationModule.isFormFieldShape = true;else this.pdfViewer.annotationModule.isFormFieldShape = false;\n    this.pdfViewerBase.updateDocumentEditedProperty(true);\n    var currentAnnotObject = null;\n\n    if (annotationBase) {\n      if (property === 'bounds') {\n        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase, true);\n      }\n    }\n\n    var pageAnnotations = this.getAnnotations(pageNumber, null);\n\n    if (pageAnnotations != null && annotationBase) {\n      for (var i = 0; i < pageAnnotations.length; i++) {\n        if (annotationBase.id === pageAnnotations[i].id) {\n          if (property === 'bounds') {\n            if (pageAnnotations[i].shapeAnnotationType === 'Line') {\n              pageAnnotations[i].vertexPoints = annotationBase.vertexPoints; // eslint-disable-next-line max-len\n\n              pageAnnotations[i].bounds = {\n                left: annotationBase.bounds.x,\n                top: annotationBase.bounds.y,\n                width: annotationBase.bounds.width,\n                height: annotationBase.bounds.height,\n                right: annotationBase.bounds.right,\n                bottom: annotationBase.bounds.bottom\n              };\n            } else if (pageAnnotations[i].shapeAnnotationType === 'Polygon') {\n              pageAnnotations[i].vertexPoints = annotationBase.vertexPoints; // eslint-disable-next-line max-len\n\n              pageAnnotations[i].bounds = {\n                left: annotationBase.bounds.x,\n                top: annotationBase.bounds.y,\n                width: annotationBase.bounds.width,\n                height: annotationBase.bounds.height,\n                right: annotationBase.bounds.right,\n                bottom: annotationBase.bounds.bottom\n              };\n            } else {\n              // eslint-disable-next-line max-len\n              pageAnnotations[i].bounds = {\n                left: annotationBase.bounds.x,\n                top: annotationBase.bounds.y,\n                width: annotationBase.bounds.width,\n                height: annotationBase.bounds.height,\n                right: annotationBase.bounds.right,\n                bottom: annotationBase.bounds.bottom\n              };\n            }\n\n            if (pageAnnotations[i].enableShapeLabel === true && annotationBase.wrapper) {\n              var labelTop = 0;\n              var labelLeft = 0;\n              var labelWidth = 0;\n              var labelHeight = 24.6;\n              var labelMaxWidth = 151;\n\n              if (annotationBase.wrapper.bounds.width) {\n                // eslint-disable-next-line max-len\n                labelWidth = annotationBase.wrapper.bounds.width / 2;\n                labelWidth = labelWidth > 0 && labelWidth < labelMaxWidth ? labelWidth : labelMaxWidth;\n              }\n\n              if (annotationBase.wrapper.bounds.left) {\n                // eslint-disable-next-line max-len\n                labelLeft = annotationBase.wrapper.bounds.left + annotationBase.wrapper.bounds.width / 2 - labelWidth / 2;\n              }\n\n              if (annotationBase.wrapper.bounds.top) {\n                // eslint-disable-next-line max-len\n                labelTop = annotationBase.wrapper.bounds.top + annotationBase.wrapper.bounds.height / 2 - 12.3;\n              } // eslint-disable-next-line max-len\n\n\n              pageAnnotations[i].labelBounds = {\n                left: labelLeft,\n                top: labelTop,\n                width: labelWidth,\n                height: labelHeight,\n                right: 0,\n                bottom: 0\n              };\n            }\n          } else if (property === 'fill') {\n            pageAnnotations[i].fillColor = annotationBase.wrapper.children[0].style.fill;\n          } else if (property === 'stroke') {\n            pageAnnotations[i].strokeColor = annotationBase.wrapper.children[0].style.strokeColor;\n          } else if (property === 'opacity') {\n            pageAnnotations[i].opacity = annotationBase.wrapper.children[0].style.opacity;\n          } else if (property === 'thickness') {\n            pageAnnotations[i].thickness = annotationBase.wrapper.children[0].style.strokeWidth;\n          } else if (property === 'dashArray') {\n            pageAnnotations[i].borderDashArray = annotationBase.wrapper.children[0].style.strokeDashArray;\n            pageAnnotations[i].borderStyle = annotationBase.borderStyle;\n          } else if (property === 'startArrow') {\n            // eslint-disable-next-line max-len\n            pageAnnotations[i].lineHeadStart = this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.sourceDecoraterShapes);\n          } else if (property === 'endArrow') {\n            // eslint-disable-next-line max-len\n            pageAnnotations[i].lineHeadEnd = this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.taregetDecoraterShapes);\n          } else if (property === 'notes') {\n            pageAnnotations[i].note = annotationBase.notes;\n          } else if (property === 'delete') {\n            currentAnnotObject = pageAnnotations.splice(i, 1)[0];\n            break;\n          } else if (property === 'labelContent') {\n            pageAnnotations[i].note = annotationBase.labelContent;\n            pageAnnotations[i].labelContent = annotationBase.labelContent;\n            break;\n          } else if (property === 'fontColor') {\n            pageAnnotations[i].fontColor = annotationBase.fontColor;\n          } else if (property === 'fontSize') {\n            pageAnnotations[i].fontSize = annotationBase.fontSize;\n          }\n\n          pageAnnotations[i].modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n          this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], pageNumber);\n        }\n      }\n\n      this.manageAnnotations(pageAnnotations, pageNumber);\n    }\n\n    return currentAnnotObject;\n  };\n  /**\n   * @param pageNumber\n   * @param annotationBase\n   * @param pageNumber\n   * @param annotationBase\n   * @private\n   */\n\n\n  ShapeAnnotation.prototype.addInCollection = function (pageNumber, annotationBase) {\n    var pageAnnotations = this.getAnnotations(pageNumber, null);\n\n    if (pageAnnotations) {\n      pageAnnotations.push(annotationBase);\n    }\n\n    this.manageAnnotations(pageAnnotations, pageNumber);\n  };\n  /**\n   * @private\n   */\n\n\n  ShapeAnnotation.prototype.saveShapeAnnotations = function () {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape');\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_shape'];\n    } // eslint-disable-next-line\n\n\n    var annotations = new Array();\n\n    for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n      annotations[j] = [];\n    }\n\n    if (storeObject && !this.pdfViewer.annotationSettings.skipDownload) {\n      var annotationCollection = JSON.parse(storeObject);\n\n      for (var i = 0; i < annotationCollection.length; i++) {\n        var newArray = [];\n        var pageAnnotationObject = annotationCollection[i];\n\n        if (pageAnnotationObject) {\n          for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n            if (!this.pdfViewerBase.checkFormFieldCollection(pageAnnotationObject.annotations[z].id)) {\n              this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);\n\n              if (this.pdfViewerBase.isJsonExported) {\n                if (pageAnnotationObject.annotations[z].isAnnotationRotated) {\n                  pageAnnotationObject.annotations[z].bounds = this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex);\n                  pageAnnotationObject.annotations[z].vertexPoints = this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints, pageAnnotationObject.pageIndex);\n                } else {\n                  var pageDetails = this.pdfViewerBase.pageSize[pageAnnotationObject.pageIndex];\n\n                  if (pageDetails) {\n                    pageAnnotationObject.annotations[z].annotationRotation = pageDetails.rotation;\n                    ;\n                  }\n                }\n              } // eslint-disable-next-line max-len\n\n\n              pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex));\n              var strokeColorString = pageAnnotationObject.annotations[z].strokeColor;\n              pageAnnotationObject.annotations[z].strokeColor = JSON.stringify(this.getRgbCode(strokeColorString));\n              var fillColorString = pageAnnotationObject.annotations[z].fillColor;\n              pageAnnotationObject.annotations[z].fillColor = JSON.stringify(this.getRgbCode(fillColorString)); // eslint-disable-next-line max-len\n\n              pageAnnotationObject.annotations[z].vertexPoints = JSON.stringify(this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints, pageAnnotationObject.pageIndex));\n\n              if (pageAnnotationObject.annotations[z].rectangleDifference !== null) {\n                // eslint-disable-next-line max-len\n                pageAnnotationObject.annotations[z].rectangleDifference = JSON.stringify(pageAnnotationObject.annotations[z].rectangleDifference);\n              }\n\n              if (pageAnnotationObject.annotations[z].enableShapeLabel === true) {\n                // eslint-disable-next-line max-len\n                pageAnnotationObject.annotations[z].labelBounds = JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(pageAnnotationObject.annotations[z].bounds)));\n                var labelFillColorString = pageAnnotationObject.annotations[z].labelFillColor;\n                pageAnnotationObject.annotations[z].labelFillColor = JSON.stringify(this.getRgbCode(labelFillColorString));\n                var labelBorderColorString = pageAnnotationObject.annotations[z].labelBorderColor;\n                pageAnnotationObject.annotations[z].labelBorderColor = JSON.stringify(this.getRgbCode(labelBorderColorString));\n                pageAnnotationObject.annotations[z].labelSettings.fillColor = labelFillColorString;\n                var fontColorString = pageAnnotationObject.annotations[z].labelSettings.fontColor;\n                pageAnnotationObject.annotations[z].fontColor = JSON.stringify(this.getRgbCode(fontColorString));\n              }\n            } else {\n              pageAnnotationObject.annotations[z] = \"\";\n            }\n          }\n\n          pageAnnotationObject.annotations = pageAnnotationObject.annotations.filter(function (item) {\n            return item;\n          });\n          newArray = pageAnnotationObject.annotations;\n        }\n\n        annotations[pageAnnotationObject.pageIndex] = newArray;\n      }\n    }\n\n    return JSON.stringify(annotations);\n  };\n\n  ShapeAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber) {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape');\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_shape'];\n    }\n\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n\n      if (!this.pdfViewerBase.isStorageExceed) {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_shape');\n      }\n\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n\n      if (annotObject[index]) {\n        annotObject[index].annotations = pageAnnotations;\n      }\n\n      var annotationStringified = JSON.stringify(annotObject);\n\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_shape'] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_shape', annotationStringified);\n      }\n    }\n  };\n\n  ShapeAnnotation.prototype.createAnnotationObject = function (annotationModel) {\n    var bound;\n    var labelBound;\n    var annotationName = this.pdfViewer.annotation.createGUID();\n\n    if (!annotationModel.formFieldAnnotationType) {\n      // eslint-disable-next-line max-len\n      var commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('shape', annotationModel.pageIndex + 1, annotationModel.shapeAnnotationType);\n\n      if (commentsDivid) {\n        document.getElementById(commentsDivid).id = annotationName;\n      }\n    }\n\n    annotationModel.annotName = annotationName;\n\n    if (annotationModel.wrapper.bounds) {\n      bound = {\n        // eslint-disable-next-line max-len\n        left: annotationModel.wrapper.bounds.x,\n        top: annotationModel.wrapper.bounds.y,\n        height: annotationModel.wrapper.bounds.height,\n        width: annotationModel.wrapper.bounds.width,\n        right: annotationModel.wrapper.bounds.right,\n        bottom: annotationModel.wrapper.bounds.bottom\n      };\n      labelBound = this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(annotationModel.wrapper.bounds);\n    } else {\n      bound = {\n        left: 0,\n        top: 0,\n        height: 0,\n        width: 0,\n        right: 0,\n        bottom: 0\n      };\n      labelBound = {\n        left: 0,\n        top: 0,\n        height: 0,\n        width: 0,\n        right: 0,\n        bottom: 0\n      };\n    }\n\n    if (annotationModel.subject === 'Line' && annotationModel.shapeAnnotationType === 'Polygon') {\n      annotationModel.author = this.pdfViewer.annotationModule.updateAnnotationAuthor('shape', 'Polygon');\n    } else {\n      annotationModel.author = this.pdfViewer.annotationModule.updateAnnotationAuthor('shape', annotationModel.subject);\n    }\n\n    this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(annotationName, annotationModel.notes); // eslint-disable-next-line radix\n\n    var borderDashArray = parseInt(annotationModel.borderDashArray);\n    borderDashArray = isNaN(borderDashArray) ? 0 : borderDashArray; // eslint-disable-next-line\n\n    var annotationSettings = this.pdfViewer.annotationModule.findAnnotationSettings(annotationModel, true);\n    annotationModel.isPrint = annotationSettings.isPrint;\n    var setting = this.pdfViewer.shapeLabelSettings;\n    var labelSettings = {\n      borderColor: annotationModel.strokeColor,\n      fillColor: annotationModel.fillColor,\n      fontColor: annotationModel.fontColor,\n      fontSize: annotationModel.fontSize,\n      labelContent: annotationModel.labelContent,\n      labelHeight: setting.labelHeight,\n      labelWidth: setting.labelMaxWidth,\n      opacity: annotationModel.opacity\n    };\n    return {\n      // eslint-disable-next-line max-len\n      id: annotationModel.id,\n      shapeAnnotationType: this.getShapeAnnotType(annotationModel.shapeAnnotationType),\n      author: annotationModel.author,\n      allowedInteractions: this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotationModel),\n      subject: annotationModel.subject,\n      note: annotationModel.notes,\n      strokeColor: annotationModel.strokeColor,\n      annotName: annotationName,\n      comments: [],\n      review: {\n        state: '',\n        stateModel: '',\n        modifiedDate: this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),\n        author: annotationModel.author\n      },\n      fillColor: annotationModel.fillColor,\n      opacity: annotationModel.opacity,\n      thickness: annotationModel.thickness,\n      // eslint-disable-next-line max-len\n      borderStyle: annotationModel.borderStyle,\n      borderDashArray: borderDashArray,\n      bounds: bound,\n      modifiedDate: this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),\n      rotateAngle: 'RotateAngle' + annotationModel.rotateAngle,\n      isCloudShape: annotationModel.isCloudShape,\n      cloudIntensity: annotationModel.cloudIntensity,\n      // eslint-disable-next-line max-len\n      vertexPoints: annotationModel.vertexPoints,\n      lineHeadStart: this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.sourceDecoraterShapes),\n      lineHeadEnd: this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.taregetDecoraterShapes),\n      rectangleDifference: [],\n      isLocked: annotationSettings.isLock,\n      // eslint-disable-next-line max-len\n      labelContent: annotationModel.labelContent,\n      enableShapeLabel: annotationModel.enableShapeLabel,\n      labelFillColor: annotationModel.labelFillColor,\n      fontColor: annotationModel.fontColor,\n      labelBorderColor: annotationModel.labelBorderColor,\n      fontSize: annotationModel.fontSize,\n      // eslint-disable-next-line max-len\n      labelBounds: labelBound,\n      annotationSelectorSettings: this.getSelector(annotationModel.shapeAnnotationType, annotationModel.subject),\n      labelSettings: labelSettings,\n      annotationSettings: annotationSettings,\n      customData: this.pdfViewer.annotation.getShapeData(annotationModel.shapeAnnotationType, annotationModel.subject),\n      isPrint: annotationModel.isPrint,\n      isCommentLock: annotationModel.isCommentLock,\n      isAnnotationRotated: false\n    };\n  };\n\n  ShapeAnnotation.prototype.getSelector = function (type, subject) {\n    var selector = this.pdfViewer.annotationSelectorSettings;\n\n    if (type === 'Line' && subject !== 'Arrow' && this.pdfViewer.lineSettings.annotationSelectorSettings) {\n      selector = this.pdfViewer.lineSettings.annotationSelectorSettings;\n    } else if ((type === 'LineWidthArrowHead' || subject === 'Arrow') && this.pdfViewer.lineSettings.annotationSelectorSettings) {\n      selector = this.pdfViewer.arrowSettings.annotationSelectorSettings;\n    } else if ((type === 'Rectangle' || type === 'Square') && this.pdfViewer.rectangleSettings.annotationSelectorSettings) {\n      selector = this.pdfViewer.rectangleSettings.annotationSelectorSettings;\n    } else if ((type === 'Ellipse' || type === 'Circle') && this.pdfViewer.circleSettings.annotationSelectorSettings) {\n      selector = this.pdfViewer.circleSettings.annotationSelectorSettings;\n    } else if (type === 'Polygon' && this.pdfViewer.polygonSettings.annotationSelectorSettings) {\n      selector = this.pdfViewer.polygonSettings.annotationSelectorSettings;\n    }\n\n    return selector;\n  }; // eslint-disable-next-line\n\n\n  ShapeAnnotation.prototype.getAnnotations = function (pageIndex, shapeAnnotations) {\n    // eslint-disable-next-line\n    var annotationCollection; // eslint-disable-next-line\n\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape');\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_shape'];\n    }\n\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n\n      if (annotObject[index]) {\n        annotationCollection = annotObject[index].annotations;\n      } else {\n        annotationCollection = shapeAnnotations;\n      }\n    } else {\n      annotationCollection = shapeAnnotations;\n    }\n\n    return annotationCollection;\n  }; // eslint-disable-next-line\n\n\n  ShapeAnnotation.prototype.getRgbCode = function (colorString) {\n    if (!colorString.match(/#([a-z0-9]+)/gi) && !colorString.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/)) {\n      colorString = this.pdfViewer.annotationModule.nameToHash(colorString);\n    }\n\n    var stringArray = colorString.split(',');\n\n    if (isNullOrUndefined(stringArray[1])) {\n      colorString = this.pdfViewer.annotationModule.getValue(colorString, 'rgba');\n      stringArray = colorString.split(',');\n    } // eslint-disable-next-line radix\n\n\n    var r = parseInt(stringArray[0].split('(')[1]); // eslint-disable-next-line radix\n\n    var g = parseInt(stringArray[1]); // eslint-disable-next-line radix\n\n    var b = parseInt(stringArray[2]); // eslint-disable-next-line radix\n\n    var a = parseFloat(stringArray[3]);\n    return {\n      r: r,\n      g: g,\n      b: b,\n      a: a\n    };\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param annotation\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  ShapeAnnotation.prototype.saveImportedShapeAnnotations = function (annotation, pageNumber) {\n    var annotationObject = null;\n    var vertexPoints = null;\n    annotation.Author = this.pdfViewer.annotationModule.updateAnnotationAuthor('shape', annotation.Subject);\n\n    if (annotation.VertexPoints) {\n      vertexPoints = [];\n\n      for (var j = 0; j < annotation.VertexPoints.length; j++) {\n        var point = {\n          x: annotation.VertexPoints[j].X,\n          y: annotation.VertexPoints[j].Y\n        };\n        vertexPoints.push(point);\n      }\n    }\n\n    if (annotation.Bounds && annotation.EnableShapeLabel === true) {\n      // eslint-disable-next-line max-len\n      annotation.LabelBounds = this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds); // eslint-disable-next-line max-len\n\n      annotation.LabelBorderColor = annotation.LabelBorderColor ? annotation.LabelBorderColor : annotation.StrokeColor;\n      annotation.FontColor = annotation.FontColor ? annotation.FontColor : annotation.StrokeColor;\n      annotation.LabelFillColor = annotation.LabelFillColor ? annotation.LabelFillColor : annotation.FillColor;\n      annotation.FontSize = annotation.FontSize ? annotation.FontSize : 16;\n      annotation.LabelSettings = annotation.LabelSettings ? annotation.LabelSettings : this.pdfViewer.shapeLabelSettings;\n    } // eslint-disable-next-line max-len\n\n\n    annotation.AnnotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation); // eslint-disable-next-line max-len\n\n    annotation.allowedInteractions = this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation); // eslint-disable-next-line max-len\n\n    annotationObject = {\n      id: 'shape',\n      shapeAnnotationType: annotation.ShapeAnnotationType,\n      author: annotation.Author,\n      allowedInteractions: annotation.allowedInteractions,\n      modifiedDate: annotation.ModifiedDate,\n      subject: annotation.Subject,\n      // eslint-disable-next-line max-len\n      note: annotation.Note,\n      strokeColor: annotation.StrokeColor,\n      fillColor: annotation.FillColor,\n      opacity: annotation.Opacity,\n      thickness: annotation.Thickness,\n      rectangleDifference: annotation.RectangleDifference,\n      borderStyle: annotation.BorderStyle,\n      borderDashArray: annotation.BorderDashArray,\n      rotateAngle: annotation.RotateAngle,\n      isCloudShape: annotation.IsCloudShape,\n      // eslint-disable-next-line max-len\n      cloudIntensity: annotation.CloudIntensity,\n      vertexPoints: vertexPoints,\n      lineHeadStart: annotation.LineHeadStart,\n      lineHeadEnd: annotation.LineHeadEnd,\n      isLocked: annotation.IsLocked,\n      comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author),\n      review: {\n        state: annotation.State,\n        stateModel: annotation.StateModel,\n        modifiedDate: annotation.ModifiedDate,\n        author: annotation.Author\n      },\n      annotName: annotation.AnnotName,\n      bounds: {\n        left: annotation.Bounds.X,\n        top: annotation.Bounds.Y,\n        width: annotation.Bounds.Width,\n        height: annotation.Bounds.Height,\n        right: annotation.Bounds.Right,\n        bottom: annotation.Bounds.Bottom\n      },\n      labelContent: annotation.LabelContent,\n      enableShapeLabel: annotation.EnableShapeLabel,\n      labelFillColor: annotation.LabelFillColor,\n      labelBorderColor: annotation.LabelBorderColor,\n      fontColor: annotation.FontColor,\n      fontSize: annotation.FontSize,\n      // eslint-disable-next-line max-len\n      labelBounds: annotation.LabelBounds,\n      annotationSelectorSettings: this.getSettings(annotation),\n      labelSettings: annotation.LabelSettings,\n      annotationSettings: annotation.AnnotationSettings,\n      customData: this.pdfViewer.annotation.getCustomData(annotation),\n      isPrint: annotation.IsPrint,\n      isCommentLock: annotation.IsCommentLock,\n      isAnnotationRotated: false\n    };\n    this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_shape');\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param annotation\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  ShapeAnnotation.prototype.updateShapeAnnotationCollections = function (annotation, pageNumber) {\n    // eslint-disable-next-line\n    var annotationObject = null;\n    var vertexPoints = null;\n\n    if (annotation.VertexPoints) {\n      vertexPoints = [];\n\n      for (var j = 0; j < annotation.VertexPoints.length; j++) {\n        var point = {\n          x: annotation.VertexPoints[j].X,\n          y: annotation.VertexPoints[j].Y\n        };\n        vertexPoints.push(point);\n      }\n    }\n\n    if (annotation.Bounds && annotation.EnableShapeLabel === true) {\n      // eslint-disable-next-line max-len\n      annotation.LabelBounds = this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds); // eslint-disable-next-line max-len\n\n      annotation.LabelBorderColor = annotation.LabelBorderColor ? annotation.LabelBorderColor : annotation.StrokeColor;\n      annotation.FontColor = annotation.FontColor ? annotation.FontColor : annotation.StrokeColor;\n      annotation.LabelFillColor = annotation.LabelFillColor ? annotation.LabelFillColor : annotation.FillColor;\n      annotation.FontSize = annotation.FontSize ? annotation.FontSize : 16;\n      var settings = this.pdfViewer.shapeLabelSettings;\n      var labelSettings = {\n        borderColor: annotation.StrokeColor,\n        fillColor: annotation.FillColor,\n        fontColor: annotation.FontColor,\n        fontSize: annotation.FontSize,\n        labelContent: annotation.LabelContent,\n        labelHeight: settings.labelHeight,\n        labelWidth: settings.labelWidth,\n        opacity: annotation.Opacity\n      };\n      annotation.LabelSettings = annotation.LabelSettings ? annotation.LabelSettings : labelSettings;\n    } // eslint-disable-next-line max-len\n\n\n    annotation.AnnotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);\n\n    if (annotation.IsLocked) {\n      annotation.AnnotationSettings.isLock = annotation.IsLocked;\n    } // eslint-disable-next-line max-len\n\n\n    annotation.allowedInteractions = annotation.AllowedInteractions ? annotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation); // eslint-disable-next-line max-len\n\n    annotationObject = {\n      id: 'shape',\n      shapeAnnotationType: annotation.ShapeAnnotationType,\n      author: annotation.Author,\n      allowedInteractions: annotation.allowedInteractions,\n      modifiedDate: annotation.ModifiedDate,\n      subject: annotation.Subject,\n      // eslint-disable-next-line max-len\n      note: annotation.Note,\n      strokeColor: annotation.StrokeColor,\n      fillColor: annotation.FillColor,\n      opacity: annotation.Opacity,\n      thickness: annotation.Thickness,\n      rectangleDifference: annotation.RectangleDifference,\n      borderStyle: annotation.BorderStyle,\n      borderDashArray: annotation.BorderDashArray,\n      rotateAngle: annotation.RotateAngle,\n      isCloudShape: annotation.IsCloudShape,\n      // eslint-disable-next-line max-len\n      cloudIntensity: annotation.CloudIntensity,\n      vertexPoints: vertexPoints,\n      lineHeadStart: annotation.LineHeadStart,\n      lineHeadEnd: annotation.LineHeadEnd,\n      isLocked: annotation.IsLocked,\n      comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author),\n      review: {\n        state: annotation.State,\n        stateModel: annotation.StateModel,\n        modifiedDate: annotation.ModifiedDate,\n        author: annotation.Author\n      },\n      annotationId: annotation.AnnotName,\n      bounds: {\n        left: annotation.Bounds.X,\n        top: annotation.Bounds.Y,\n        width: annotation.Bounds.Width,\n        height: annotation.Bounds.Height,\n        right: annotation.Bounds.Right,\n        bottom: annotation.Bounds.Bottom\n      },\n      labelContent: annotation.LabelContent,\n      enableShapeLabel: annotation.EnableShapeLabel,\n      labelFillColor: annotation.LabelFillColor,\n      labelBorderColor: annotation.LabelBorderColor,\n      fontColor: annotation.FontColor,\n      fontSize: annotation.FontSize,\n      // eslint-disable-next-line max-len\n      labelBounds: annotation.LabelBounds,\n      pageNumber: pageNumber,\n      labelSettings: annotation.LabelSettings,\n      annotationSettings: annotation.AnnotationSettings,\n      customData: this.pdfViewer.annotation.getCustomData(annotation),\n      isPrint: annotation.IsPrint\n    };\n    return annotationObject;\n  };\n  /**\n   * This method used to add annotations with using program.\n   *\n   * @param annotationType - It describes the annotation type\n   * @param annotationObject - It describes type of annotation object\n   * @param offset - It describes about the annotation bounds or location\n   * @returns Object\n   * @private\n   */\n\n\n  ShapeAnnotation.prototype.updateAddAnnotationDetails = function (annotationType, annotationObject, offset) {\n    //Creating new object if annotationObject is null\n    if (!annotationObject) {\n      annotationObject = {\n        offset: {\n          x: 10,\n          y: 10\n        },\n        pageNumber: 0,\n        width: undefined,\n        height: undefined\n      };\n      offset = annotationObject.offset;\n    } else if (!annotationObject.offset) offset = {\n      x: 10,\n      y: 10\n    };else offset = annotationObject.offset; //Initialize the annotation settings\n\n\n    var annotationSelectorSettings = null;\n    var allowedInteractions = null;\n    var annotationSettings = null;\n    var shapeAnnotationType = '';\n    var isArrow = false;\n    var vertexPoints = null; //Creating the CurrentDate and Annotation name\n\n    var currentDateString = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n    var annotationName = this.pdfViewer.annotation.createGUID();\n\n    if (annotationType == 'Line') {\n      //Creating annotation settings\n      annotationSelectorSettings = this.pdfViewer.lineSettings.annotationSelectorSettings ? this.pdfViewer.lineSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n      annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings);\n      allowedInteractions = this.pdfViewer.lineSettings.allowedInteractions ? this.pdfViewer.lineSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n      shapeAnnotationType = 'Line';\n      if (annotationObject.vertexPoints) vertexPoints = annotationObject.vertexPoints;else vertexPoints = [{\n        x: offset.x,\n        y: offset.y\n      }, {\n        x: offset.x + 100,\n        y: offset.y\n      }];\n      annotationObject.width = annotationObject.width ? annotationObject.width : 1;\n      annotationObject.height = annotationObject.height ? annotationObject.height : 1;\n    } else if (annotationType == 'Arrow') {\n      //Creating annotation settings\n      annotationSelectorSettings = this.pdfViewer.arrowSettings.annotationSelectorSettings ? this.pdfViewer.arrowSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n      annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings);\n      allowedInteractions = this.pdfViewer.arrowSettings.allowedInteractions ? this.pdfViewer.arrowSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n      shapeAnnotationType = 'Line';\n      isArrow = true;\n      if (annotationObject.vertexPoints) vertexPoints = annotationObject.vertexPoints;else vertexPoints = [{\n        x: offset.x,\n        y: offset.y\n      }, {\n        x: offset.x + 100,\n        y: offset.y\n      }];\n      annotationObject.width = annotationObject.width ? annotationObject.width : 1;\n      annotationObject.height = annotationObject.height ? annotationObject.height : 1;\n    } else if (annotationType == 'Rectangle') {\n      //Creating annotation settings\n      annotationSelectorSettings = this.pdfViewer.rectangleSettings.annotationSelectorSettings ? this.pdfViewer.rectangleSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n      annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings);\n      allowedInteractions = this.pdfViewer.rectangleSettings.allowedInteractions ? this.pdfViewer.rectangleSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n      shapeAnnotationType = 'Square';\n      annotationObject.width = annotationObject.width ? annotationObject.width : 150;\n      annotationObject.height = annotationObject.height ? annotationObject.height : 75;\n    } else if (annotationType == 'Circle') {\n      //Creating annotation settings\n      annotationSelectorSettings = this.pdfViewer.circleSettings.annotationSelectorSettings ? this.pdfViewer.circleSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n      annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings);\n      allowedInteractions = this.pdfViewer.circleSettings.allowedInteractions ? this.pdfViewer.circleSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n      shapeAnnotationType = 'Circle';\n      annotationObject.width = annotationObject.width ? annotationObject.width : 100;\n      annotationObject.height = annotationObject.height ? annotationObject.height : 90;\n    } else if (annotationType == 'Polygon') {\n      //Creating annotation settings\n      annotationSelectorSettings = this.pdfViewer.polygonSettings.annotationSelectorSettings ? this.pdfViewer.polygonSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n      annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings);\n      allowedInteractions = this.pdfViewer.polygonSettings.allowedInteractions ? this.pdfViewer.polygonSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n      shapeAnnotationType = 'Polygon';\n      if (annotationObject.vertexPoints) vertexPoints = annotationObject.vertexPoints;else vertexPoints = [{\n        x: offset.x,\n        y: offset.y\n      }, {\n        x: offset.x + 42,\n        y: offset.y - 29\n      }, {\n        x: offset.x + 89,\n        y: offset.y - 1\n      }, {\n        x: offset.x + 78,\n        y: offset.y + 42\n      }, {\n        x: offset.x + 11,\n        y: offset.y + 42\n      }, {\n        x: offset.x,\n        y: offset.y\n      }];\n      annotationObject.width = annotationObject.width ? annotationObject.width : 1;\n      annotationObject.height = annotationObject.height ? annotationObject.height : 1;\n    }\n\n    annotationSettings.isLock = annotationObject.isLock ? annotationObject.isLock : false;\n    annotationSettings.minHeight = annotationObject.minHeight ? annotationObject.minHeight : 0;\n    annotationSettings.minWidth = annotationObject.minWidth ? annotationObject.minWidth : 0;\n    annotationSettings.maxWidth = annotationObject.maxWidth ? annotationObject.maxWidth : 0;\n    annotationSettings.maxHeight = annotationObject.maxHeight ? annotationObject.maxHeight : 0; //Converting points model into vertex property\n\n    if (vertexPoints) vertexPoints = this.pdfViewer.annotation.getVertexPointsXY(vertexPoints); //Creating Annotation objects with it's proper properties\n\n    var shapeAnnotation = [];\n    var shape = {\n      AllowedInteractions: annotationObject.allowedInteractions ? annotationObject.allowedInteractions : allowedInteractions,\n      AnnotName: annotationName,\n      AnnotType: 'shape',\n      AnnotationSelectorSettings: annotationObject.annotationSelectorSettings ? annotationObject.annotationSelectorSettings : annotationSelectorSettings,\n      AnnotationSettings: annotationSettings,\n      Author: annotationObject.author ? annotationObject.author : 'Guest',\n      BorderDashArray: annotationObject.borderDashArray ? annotationObject.borderDashArray : 0,\n      BorderStyle: 'Solid',\n      Bounds: {\n        X: offset.x,\n        Y: offset.y,\n        Width: annotationObject.width,\n        Height: annotationObject.height,\n        Left: offset.x,\n        Top: offset.y,\n        Location: {\n          X: offset.x,\n          Y: offset.y\n        },\n        Size: {\n          Height: annotationObject.height,\n          IsEmpty: false,\n          Width: annotationObject.width\n        }\n      },\n      CloudIntensity: 0,\n      Comments: null,\n      CustomData: annotationObject.customData ? annotationObject.customData : null,\n      CreatedDate: currentDateString,\n      EnableShapeLabel: false,\n      ExistingCustomData: null,\n      FillColor: annotationObject.fillColor ? annotationObject.fillColor : '#ffffff00',\n      FontColor: null,\n      FontSize: 0,\n      IsCloudShape: false,\n      IsCommentLock: false,\n      IsLocked: annotationObject.isLock ? annotationObject.isLock : false,\n      IsPrint: annotationObject.isPrint ? annotationObject.isPrint : true,\n      LabelBorderColor: null,\n      LabelBounds: {\n        X: 0,\n        Y: 0,\n        Width: 0,\n        Height: 0\n      },\n      LabelContent: null,\n      LabelFillColor: null,\n      LabelSettings: null,\n      LineHeadEnd: annotationObject.lineHeadStartStyle ? annotationObject.lineHeadStartStyle : isArrow ? 'ClosedArrow' : 'None',\n      LineHeadStart: annotationObject.lineHeadEndStyle ? annotationObject.lineHeadEndStyle : isArrow ? 'ClosedArrow' : 'None',\n      ModifiedDate: '',\n      Note: '',\n      Opacity: annotationObject.opacity ? annotationObject.opacity : 1,\n      RectangleDifference: null,\n      RotateAngle: 'RotateAngle0',\n      ShapeAnnotationType: shapeAnnotationType,\n      State: '',\n      StateModel: '',\n      StrokeColor: annotationObject.strokeColor ? annotationObject.strokeColor : '#ff0000',\n      Subject: annotationType.toString(),\n      Thickness: annotationObject.thickness ? annotationObject.thickness : 1,\n      VertexPoints: vertexPoints\n    }; //Adding the annotation object to an array and return it\n\n    shapeAnnotation[0] = shape;\n    return {\n      shapeAnnotation: shapeAnnotation\n    };\n  };\n\n  return ShapeAnnotation;\n}();\n\nexport { ShapeAnnotation };","map":{"version":3,"names":["isNullOrUndefined","ShapeAnnotation","pdfviewer","pdfViewerBase","shapeCount","isAddAnnotationProgramatically","pdfViewer","prototype","renderShapeAnnotations","shapeAnnotations","pageNumber","isImportAcion","length","shapeAnnots","annotation","getStoredAnnotations","i","annotationAddMode","annotationModule","findAnnotationMode","AnnotType","annotationObject","isAnnotationRotated","ShapeAnnotationType","isJsonImported","Bounds","importJsonForRotatedDocuments","Rotate","AnnotationRotation","isPageRotated","vertexPoints","VertexPoints","calculateVertexPoints","j","x","X","y","Y","point","push","EnableShapeLabel","LabelBounds","inputElementModule","calculateLabelBoundsFromLoadedDocument","LabelBorderColor","StrokeColor","FontColor","LabelFillColor","FillColor","FontSize","LabelSettings","shapeLabelSettings","AnnotationSelectorSettings","annotationSelectorSettings","AnnotationSettings","updateAnnotationSettings","allowedInteractions","AllowedInteractions","updateAnnotationAllowedInteractions","isPrint","IsPrint","left","top_1","width","Width","height","Height","id","shapeAnnotationType","author","Author","modifiedDate","ModifiedDate","subject","Subject","note","Note","strokeColor","fillColor","opacity","Opacity","thickness","Thickness","rectangleDifference","RectangleDifference","borderStyle","BorderStyle","borderDashArray","BorderDashArray","rotateAngle","RotateAngle","isCloudShape","IsCloudShape","cloudIntensity","CloudIntensity","lineHeadStart","LineHeadStart","lineHeadEnd","LineHeadEnd","isLocked","IsLocked","comments","getAnnotationComments","Comments","review","state","State","stateModel","StateModel","annotName","AnnotName","bounds","top","right","Right","bottom","Bottom","labelContent","LabelContent","enableShapeLabel","labelFillColor","fontColor","labelBorderColor","fontSize","labelBounds","getSettings","labelSettings","annotationSettings","customData","getCustomData","isCommentLock","IsCommentLock","annot","vPoints","getShapeType","notes","toString","parseFloat","split","taregetDecoraterShapes","getArrowType","sourceDecoraterShapes","pageIndex","addedAnnot","add","storeAnnotations","settings","fireAnnotationAdd","createAnnotationObject","formFieldAnnotationType","isFormFieldShape","triggerAnnotationAdd","selector","getSelector","setAnnotationType","type","updateShapeProperties","disableTextSelectionMode","currentAnnotationMode","modifiedDateLine","stickyNotesAnnotationModule","getDateAndTime","lineSettings","drawingObject","setShapeType","lineFillColor","lineStrokeColor","lineOpacity","lineThickness","lineDashArray","lineStartHead","lineEndHead","tool","modifiedDateArrow","arrowSettings","arrowOpacity","arrowStartHead","arrowEndHead","arrowFillColor","arrowStrokeColor","arrowThickness","arrowDashArray","modifiedDateRect","rectangleSettings","rectangleStrokeColor","rectangleFillColor","rectangleOpacity","rectangleThickness","modifiedDateCir","circleSettings","circleStrokeColor","circleFillColor","circleOpacity","circleThickness","modifiedDatePolygon","polygonSettings","polygonStrokeColor","polygonFillColor","polygonOpacity","polygonThickness","lineHeadStartStyle","lineHeadEndStyle","shape","shapeType","getShapeAnnotType","modifyInCollection","property","annotationBase","updateDocumentEditedProperty","currentAnnotObject","updateAnnotationModifiedDate","pageAnnotations","getAnnotations","wrapper","labelTop","labelLeft","labelWidth","labelHeight","labelMaxWidth","children","style","fill","strokeWidth","strokeDashArray","getArrowTypeForCollection","splice","storeAnnotationCollections","manageAnnotations","addInCollection","saveShapeAnnotations","storeObject","window","sessionStorage","getItem","documentId","isStorageExceed","annotationStorage","annotations","Array","pageCount","skipDownload","annotationCollection","JSON","parse","newArray","pageAnnotationObject","z","checkFormFieldCollection","updateModifiedDate","isJsonExported","getBounds","getVertexPoints","pageDetails","pageSize","annotationRotation","rotation","stringify","strokeColorString","getRgbCode","fillColorString","calculateLabelBounds","labelFillColorString","labelBorderColorString","fontColorString","filter","item","annotObject","removeItem","index","getPageCollection","annotationStringified","setItem","annotationModel","bound","labelBound","annotationName","createGUID","commentsDivid","addComments","document","getElementById","updateAnnotationAuthor","addTextToComments","parseInt","isNaN","findAnnotationSettings","setting","borderColor","isLock","getShapeData","colorString","match","nameToHash","stringArray","getValue","r","g","b","a","saveImportedShapeAnnotations","updateShapeAnnotationCollections","annotationId","updateAddAnnotationDetails","annotationType","offset","undefined","isArrow","currentDateString","updateSettings","minHeight","minWidth","maxWidth","maxHeight","getVertexPointsXY","shapeAnnotation","Left","Top","Location","Size","IsEmpty","CustomData","CreatedDate","ExistingCustomData"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/annotation/shape-annotation.js"],"sourcesContent":["import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * @hidden\n */\nvar ShapeAnnotation = /** @class */ (function () {\n    function ShapeAnnotation(pdfviewer, pdfViewerBase) {\n        /**\n         * @private\n         */\n        this.shapeCount = 0;\n        /**\n         * @private\n         */\n        this.isAddAnnotationProgramatically = false;\n        this.pdfViewer = pdfviewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @param shapeAnnotations\n     * @param pageNumber\n     * @param isImportAcion\n     * @private\n     */\n    // eslint-disable-next-line\n    ShapeAnnotation.prototype.renderShapeAnnotations = function (shapeAnnotations, pageNumber, isImportAcion) {\n        if (shapeAnnotations) {\n            if (shapeAnnotations.length >= 1) {\n                // eslint-disable-next-line\n                var shapeAnnots = this.pdfViewer.annotation.getStoredAnnotations(pageNumber, shapeAnnotations, '_annotations_shape');\n                if (!shapeAnnots || isImportAcion) {\n                    for (var i = 0; i < shapeAnnotations.length; i++) {\n                        // eslint-disable-next-line\n                        var annotation = shapeAnnotations[i];\n                        annotation.annotationAddMode = this.pdfViewer.annotationModule.findAnnotationMode(annotation, pageNumber, annotation.AnnotType);\n                        var annotationObject = null;\n                        this.shapeCount = this.shapeCount + 1;\n                        var isAnnotationRotated = void 0;\n                        if (annotation.ShapeAnnotationType) {\n                            if (isImportAcion) {\n                                if (this.pdfViewerBase.isJsonImported) {\n                                    annotation.Bounds = this.pdfViewerBase.importJsonForRotatedDocuments(annotation.Rotate, pageNumber, annotation.Bounds, annotation.AnnotationRotation);\n                                    isAnnotationRotated = this.pdfViewerBase.isPageRotated;\n                                }\n                            }\n                            var vertexPoints = null;\n                            if (annotation.VertexPoints) {\n                                vertexPoints = [];\n                                if (isImportAcion && this.pdfViewerBase.isJsonImported) {\n                                    vertexPoints = this.pdfViewerBase.calculateVertexPoints(annotation.Rotate, pageNumber, annotation.VertexPoints, annotation.AnnotationRotation);\n                                }\n                                else {\n                                    for (var j = 0; j < annotation.VertexPoints.length; j++) {\n                                        var x = annotation.VertexPoints[j].X ? annotation.VertexPoints[j].X : annotation.VertexPoints[j].x;\n                                        var y = annotation.VertexPoints[j].Y ? annotation.VertexPoints[j].Y : annotation.VertexPoints[j].y;\n                                        var point = { x: x, y: y };\n                                        vertexPoints.push(point);\n                                    }\n                                }\n                            }\n                            // eslint-disable-next-line\n                            if (annotation.Bounds && annotation.EnableShapeLabel === true) {\n                                // eslint-disable-next-line max-len\n                                annotation.LabelBounds = this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);\n                                // eslint-disable-next-line max-len\n                                annotation.LabelBorderColor = annotation.LabelBorderColor ? annotation.LabelBorderColor : annotation.StrokeColor;\n                                annotation.FontColor = annotation.FontColor ? annotation.FontColor : annotation.StrokeColor;\n                                annotation.LabelFillColor = annotation.LabelFillColor ? annotation.LabelFillColor : annotation.FillColor;\n                                annotation.FontSize = annotation.FontSize ? annotation.FontSize : 16;\n                                // eslint-disable-next-line max-len\n                                annotation.LabelSettings = annotation.LabelSettings ? annotation.LabelSettings : this.pdfViewer.shapeLabelSettings;\n                            }\n                            // eslint-disable-next-line max-len\n                            annotation.AnnotationSelectorSettings = annotation.AnnotationSelectorSettings ? annotation.AnnotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n                            // eslint-disable-next-line max-len\n                            annotation.AnnotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);\n                            // eslint-disable-next-line max-len\n                            annotation.allowedInteractions = annotation.AllowedInteractions ? annotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n                            var isPrint = true;\n                            if (annotation.annotationAddMode === 'Imported Annotation') {\n                                isPrint = annotation.IsPrint;\n                            }\n                            else {\n                                isPrint = annotation.AnnotationSettings.isPrint;\n                            }\n                            var left = annotation.Bounds.X ? annotation.Bounds.X : annotation.Bounds.x;\n                            var top_1 = annotation.Bounds.Y ? annotation.Bounds.Y : annotation.Bounds.y;\n                            var width = annotation.Bounds.Width ? annotation.Bounds.Width : annotation.Bounds.width;\n                            var height = annotation.Bounds.Height ? annotation.Bounds.Height : annotation.Bounds.height; // eslint-disable-next-line max-len\n                            annotationObject = {\n                                id: 'shape' + this.shapeCount, shapeAnnotationType: annotation.ShapeAnnotationType, author: annotation.Author, allowedInteractions: annotation.allowedInteractions, modifiedDate: annotation.ModifiedDate, subject: annotation.Subject,\n                                // eslint-disable-next-line max-len\n                                note: annotation.Note, strokeColor: annotation.StrokeColor, fillColor: annotation.FillColor, opacity: annotation.Opacity, thickness: annotation.Thickness, rectangleDifference: annotation.RectangleDifference,\n                                borderStyle: annotation.BorderStyle, borderDashArray: annotation.BorderDashArray, rotateAngle: annotation.RotateAngle, isCloudShape: annotation.IsCloudShape,\n                                // eslint-disable-next-line max-len\n                                cloudIntensity: annotation.CloudIntensity, vertexPoints: vertexPoints, lineHeadStart: annotation.LineHeadStart, lineHeadEnd: annotation.LineHeadEnd, isLocked: annotation.IsLocked, comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author), review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: annotation.Author }, annotName: annotation.AnnotName,\n                                bounds: { left: left, top: top_1, width: width, height: height, right: annotation.Bounds.Right, bottom: annotation.Bounds.Bottom },\n                                // eslint-disable-next-line max-len\n                                labelContent: annotation.LabelContent, enableShapeLabel: annotation.EnableShapeLabel, labelFillColor: annotation.LabelFillColor,\n                                fontColor: annotation.FontColor, labelBorderColor: annotation.LabelBorderColor, fontSize: annotation.FontSize,\n                                // eslint-disable-next-line max-len\n                                labelBounds: annotation.LabelBounds, annotationSelectorSettings: this.getSettings(annotation), labelSettings: annotation.LabelSettings, annotationSettings: annotation.AnnotationSettings,\n                                customData: this.pdfViewer.annotation.getCustomData(annotation), isPrint: isPrint, isCommentLock: annotation.IsCommentLock, isAnnotationRotated: isAnnotationRotated\n                            };\n                            var annot = void 0;\n                            // eslint-disable-next-line\n                            var vPoints = annotationObject.vertexPoints;\n                            if (vertexPoints == null) {\n                                vPoints = [];\n                            }\n                            // eslint-disable-next-line max-len\n                            annotation.AnnotationSelectorSettings = annotation.AnnotationSelectorSettings ? annotation.AnnotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n                            annot = {\n                                // eslint-disable-next-line max-len\n                                id: 'shape' + this.shapeCount, shapeAnnotationType: this.getShapeType(annotationObject), author: annotationObject.author, allowedInteractions: annotationObject.allowedInteractions, modifiedDate: annotationObject.modifiedDate, annotName: annotationObject.annotName,\n                                subject: annotationObject.subject, notes: annotationObject.note, fillColor: annotationObject.fillColor, strokeColor: annotationObject.strokeColor, opacity: annotationObject.opacity,\n                                // eslint-disable-next-line max-len\n                                thickness: annotationObject.thickness, borderStyle: annotationObject.borderStyle, borderDashArray: annotationObject.borderDashArray ? annotationObject.borderDashArray.toString() : '0', rotateAngle: parseFloat(annotationObject.rotateAngle.split('Angle')[1]), comments: annotationObject.comments, review: annotationObject.review, isCloudShape: annotationObject.isCloudShape, cloudIntensity: annotationObject.cloudIntensity, taregetDecoraterShapes: this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadEnd),\n                                // eslint-disable-next-line max-len\n                                sourceDecoraterShapes: this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadStart), vertexPoints: vPoints, bounds: { x: annotationObject.bounds.left, y: annotationObject.bounds.top, width: annotationObject.bounds.width, height: annotationObject.bounds.height },\n                                pageIndex: pageNumber,\n                                // eslint-disable-next-line max-len\n                                labelContent: annotation.LabelContent, enableShapeLabel: annotation.EnableShapeLabel, labelFillColor: annotation.LabelFillColor,\n                                fontColor: annotation.FontColor, labelBorderColor: annotation.LabelBorderColor, fontSize: annotation.FontSize,\n                                labelBounds: annotation.LabelBounds, annotationSelectorSettings: annotation.AnnotationSelectorSettings,\n                                annotationSettings: annotationObject.annotationSettings, annotationAddMode: annotation.annotationAddMode,\n                                isPrint: isPrint, isCommentLock: annotationObject.isCommentLock\n                            };\n                            var addedAnnot = this.pdfViewer.add(annot);\n                            this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_shape');\n                            if (this.isAddAnnotationProgramatically) {\n                                var settings = {\n                                    opacity: annot.opacity, strokeColor: annot.strokeColor, thickness: annot.thickness, modifiedDate: annot.modifiedDate,\n                                    width: annot.bounds.width, height: annot.bounds.height\n                                };\n                                this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, annotation.ShapeAnnotationType, annot.bounds, settings);\n                            }\n                        }\n                    }\n                }\n            }\n            else if (shapeAnnotations.shapeAnnotationType) {\n                var annotationObject = this.createAnnotationObject(shapeAnnotations);\n                if (!isNullOrUndefined(shapeAnnotations.formFieldAnnotationType) && shapeAnnotations.formFieldAnnotationType !== \"\")\n                    this.pdfViewer.annotationModule.isFormFieldShape = true;\n                else\n                    this.pdfViewer.annotationModule.isFormFieldShape = false;\n                this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_shape');\n                this.pdfViewer.annotationModule.triggerAnnotationAdd(shapeAnnotations);\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    ShapeAnnotation.prototype.getSettings = function (annotation) {\n        var selector = this.pdfViewer.annotationSelectorSettings;\n        if (annotation.AnnotationSelectorSettings) {\n            selector = annotation.AnnotationSelectorSettings;\n        }\n        else {\n            selector = this.getSelector(annotation.ShapeAnnotationType, annotation.Subject);\n        }\n        return selector;\n    };\n    /**\n     * @param type\n     * @private\n     */\n    ShapeAnnotation.prototype.setAnnotationType = function (type) {\n        this.updateShapeProperties();\n        this.pdfViewerBase.disableTextSelectionMode();\n        var author = 'Guest';\n        switch (type) {\n            case 'Line':\n                this.currentAnnotationMode = 'Line';\n                // eslint-disable-next-line max-len\n                var modifiedDateLine = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                // eslint-disable-next-line max-len\n                author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.lineSettings.author ? this.pdfViewer.lineSettings.author : 'Guest';\n                this.pdfViewer.drawingObject = {\n                    // eslint-disable-next-line max-len\n                    shapeAnnotationType: this.setShapeType('Line'), fillColor: this.lineFillColor, notes: '', strokeColor: this.lineStrokeColor, opacity: this.lineOpacity,\n                    thickness: this.lineThickness, modifiedDate: modifiedDateLine, borderDashArray: this.lineDashArray.toString(),\n                    // eslint-disable-next-line max-len\n                    sourceDecoraterShapes: this.pdfViewer.annotation.getArrowType(this.lineStartHead.toString()), taregetDecoraterShapes: this.pdfViewer.annotation.getArrowType(this.lineEndHead.toString()),\n                    author: author, subject: 'Line', lineHeadStart: this.lineStartHead, lineHeadEnd: this.lineEndHead, isCommentLock: false\n                };\n                this.pdfViewer.tool = 'Line';\n                break;\n            case 'Arrow':\n                this.currentAnnotationMode = 'Arrow';\n                // eslint-disable-next-line max-len\n                var modifiedDateArrow = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.arrowSettings.author ? this.pdfViewer.arrowSettings.author : 'Guest';\n                this.pdfViewer.drawingObject = {\n                    shapeAnnotationType: this.setShapeType('Arrow'), opacity: this.arrowOpacity,\n                    // eslint-disable-next-line max-len\n                    sourceDecoraterShapes: this.pdfViewer.annotation.getArrowType(this.arrowStartHead.toString()),\n                    taregetDecoraterShapes: this.pdfViewer.annotation.getArrowType(this.arrowEndHead.toString()),\n                    // eslint-disable-next-line max-len\n                    fillColor: this.arrowFillColor, strokeColor: this.arrowStrokeColor, notes: '', thickness: this.arrowThickness,\n                    borderDashArray: this.arrowDashArray.toString(), author: author, subject: 'Arrow',\n                    // eslint-disable-next-line max-len\n                    modifiedDate: modifiedDateArrow, lineHeadStart: this.arrowStartHead, lineHeadEnd: this.arrowEndHead, isCommentLock: false\n                };\n                this.pdfViewer.tool = 'Line';\n                break;\n            case 'Rectangle':\n                this.currentAnnotationMode = 'Rectangle';\n                // eslint-disable-next-line max-len\n                var modifiedDateRect = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                // eslint-disable-next-line max-len\n                author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.rectangleSettings.author ? this.pdfViewer.rectangleSettings.author : 'Guest';\n                this.pdfViewer.drawingObject = {\n                    shapeAnnotationType: this.setShapeType('Rectangle'), strokeColor: this.rectangleStrokeColor,\n                    fillColor: this.rectangleFillColor, opacity: this.rectangleOpacity, notes: '',\n                    thickness: this.rectangleThickness, borderDashArray: '0', modifiedDate: modifiedDateRect,\n                    author: author, subject: 'Rectangle', isCommentLock: false\n                };\n                this.pdfViewer.tool = 'DrawTool';\n                break;\n            case 'Circle':\n                this.currentAnnotationMode = 'Circle';\n                // eslint-disable-next-line max-len\n                var modifiedDateCir = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                // eslint-disable-next-line max-len\n                author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.circleSettings.author ? this.pdfViewer.circleSettings.author : 'Guest';\n                this.pdfViewer.drawingObject = {\n                    shapeAnnotationType: this.setShapeType('Circle'), strokeColor: this.circleStrokeColor,\n                    fillColor: this.circleFillColor, opacity: this.circleOpacity, notes: '',\n                    thickness: this.circleThickness, borderDashArray: '0', modifiedDate: modifiedDateCir,\n                    author: author, subject: 'Circle', isCommentLock: false\n                };\n                this.pdfViewer.tool = 'DrawTool';\n                break;\n            case 'Polygon':\n                this.currentAnnotationMode = 'Polygon';\n                // eslint-disable-next-line max-len\n                var modifiedDatePolygon = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                // eslint-disable-next-line max-len\n                author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.polygonSettings.author ? this.pdfViewer.polygonSettings.author : 'Guest';\n                this.pdfViewer.drawingObject = {\n                    strokeColor: this.polygonStrokeColor, fillColor: this.polygonFillColor,\n                    opacity: this.polygonOpacity, thickness: this.polygonThickness, borderDashArray: '0',\n                    notes: '', author: author, subject: 'Polygon',\n                    modifiedDate: modifiedDatePolygon, borderStyle: '', isCommentLock: false\n                };\n                this.pdfViewer.tool = 'Polygon';\n                break;\n        }\n    };\n    ShapeAnnotation.prototype.updateShapeProperties = function () {\n        this.lineFillColor = this.pdfViewer.lineSettings.fillColor ? this.pdfViewer.lineSettings.fillColor : '#ffffff00';\n        this.lineStrokeColor = this.pdfViewer.lineSettings.strokeColor ? this.pdfViewer.lineSettings.strokeColor : '#ff0000';\n        this.lineThickness = this.pdfViewer.lineSettings.thickness ? this.pdfViewer.lineSettings.thickness : 1;\n        this.lineOpacity = this.pdfViewer.lineSettings.opacity ? this.pdfViewer.lineSettings.opacity : 1;\n        this.lineDashArray = this.pdfViewer.lineSettings.borderDashArray ? this.pdfViewer.lineSettings.borderDashArray : 0;\n        this.lineStartHead = this.pdfViewer.lineSettings.lineHeadStartStyle ? this.pdfViewer.lineSettings.lineHeadStartStyle : 'None';\n        this.lineEndHead = this.pdfViewer.lineSettings.lineHeadEndStyle ? this.pdfViewer.lineSettings.lineHeadEndStyle : 'None';\n        this.arrowFillColor = this.pdfViewer.arrowSettings.fillColor ? this.pdfViewer.arrowSettings.fillColor : '#ffffff00';\n        this.arrowStrokeColor = this.pdfViewer.arrowSettings.strokeColor ? this.pdfViewer.arrowSettings.strokeColor : '#ff0000';\n        this.arrowThickness = this.pdfViewer.arrowSettings.thickness ? this.pdfViewer.arrowSettings.thickness : 1;\n        this.arrowOpacity = this.pdfViewer.arrowSettings.opacity ? this.pdfViewer.arrowSettings.opacity : 1;\n        this.arrowDashArray = this.pdfViewer.arrowSettings.borderDashArray ? this.pdfViewer.arrowSettings.borderDashArray : 0;\n        this.arrowStartHead = this.pdfViewer.arrowSettings.lineHeadStartStyle ? this.pdfViewer.arrowSettings.lineHeadStartStyle : 'Closed';\n        this.arrowEndHead = this.pdfViewer.arrowSettings.lineHeadEndStyle ? this.pdfViewer.arrowSettings.lineHeadEndStyle : 'Closed';\n        this.rectangleFillColor = this.pdfViewer.rectangleSettings.fillColor ? this.pdfViewer.rectangleSettings.fillColor : '#ffffff00';\n        this.rectangleStrokeColor = this.pdfViewer.rectangleSettings.strokeColor ? this.pdfViewer.rectangleSettings.strokeColor : '#ff0000';\n        this.rectangleThickness = this.pdfViewer.rectangleSettings.thickness ? this.pdfViewer.rectangleSettings.thickness : 1;\n        this.rectangleOpacity = this.pdfViewer.rectangleSettings.opacity ? this.pdfViewer.rectangleSettings.opacity : 1;\n        this.circleFillColor = this.pdfViewer.circleSettings.fillColor ? this.pdfViewer.circleSettings.fillColor : '#ffffff00';\n        this.circleStrokeColor = this.pdfViewer.circleSettings.strokeColor ? this.pdfViewer.circleSettings.strokeColor : '#ff0000';\n        this.circleThickness = this.pdfViewer.circleSettings.thickness ? this.pdfViewer.circleSettings.thickness : 1;\n        this.circleOpacity = this.pdfViewer.circleSettings.opacity ? this.pdfViewer.circleSettings.opacity : 1;\n        this.polygonFillColor = this.pdfViewer.polygonSettings.fillColor ? this.pdfViewer.polygonSettings.fillColor : '#ffffff00';\n        this.polygonStrokeColor = this.pdfViewer.polygonSettings.strokeColor ? this.pdfViewer.polygonSettings.strokeColor : '#ff0000';\n        this.polygonThickness = this.pdfViewer.polygonSettings.thickness ? this.pdfViewer.polygonSettings.thickness : 1;\n        this.polygonOpacity = this.pdfViewer.polygonSettings.opacity ? this.pdfViewer.polygonSettings.opacity : 1;\n    };\n    ShapeAnnotation.prototype.setShapeType = function (shape) {\n        var shapeType;\n        switch (shape) {\n            case 'Line':\n                shapeType = 'Line';\n                break;\n            case 'Circle':\n                shapeType = 'Ellipse';\n                break;\n            case 'Square':\n                shapeType = 'Rectangle';\n                break;\n            case 'Polyline':\n                shapeType = 'Line';\n                break;\n            case 'Arrow':\n                shapeType = 'LineWidthArrowHead';\n                break;\n        }\n        return shapeType;\n    };\n    ShapeAnnotation.prototype.getShapeType = function (shape) {\n        var shapeType;\n        switch (shape.shapeAnnotationType) {\n            case 'Line':\n                shapeType = 'Line';\n                break;\n            case 'Circle':\n                shapeType = 'Ellipse';\n                break;\n            case 'Square':\n                shapeType = 'Rectangle';\n                break;\n            case 'Polyline':\n                shapeType = 'Line';\n                break;\n            case 'Polygon':\n                shapeType = 'Polygon';\n                break;\n        }\n        // eslint-disable-next-line max-len\n        if ((shape.shapeAnnotationType === 'Line' || shape.shapeAnnotationType === 'Polyline') && (shape.lineHeadStart !== 'None' || shape.lineHeadEnd !== 'None')) {\n            shapeType = 'LineWidthArrowHead';\n        }\n        return shapeType;\n    };\n    ShapeAnnotation.prototype.getShapeAnnotType = function (shape) {\n        var shapeType;\n        switch (shape) {\n            case 'Line':\n            case 'LineWidthArrowHead':\n                shapeType = 'Line';\n                break;\n            case 'Rectangle':\n                shapeType = 'Square';\n                break;\n            case 'Ellipse':\n                shapeType = 'Circle';\n                break;\n            case 'Polygon':\n                shapeType = 'Polygon';\n                break;\n        }\n        return shapeType;\n    };\n    /**\n     * @param property\n     * @param pageNumber\n     * @param annotationBase\n     * @param property\n     * @param pageNumber\n     * @param annotationBase\n     * @param property\n     * @param pageNumber\n     * @param annotationBase\n     * @private\n     */\n    // eslint-disable-next-line\n    ShapeAnnotation.prototype.modifyInCollection = function (property, pageNumber, annotationBase) {\n        if (!isNullOrUndefined(annotationBase.formFieldAnnotationType) && annotationBase.formFieldAnnotationType !== \"\")\n            this.pdfViewer.annotationModule.isFormFieldShape = true;\n        else\n            this.pdfViewer.annotationModule.isFormFieldShape = false;\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n        var currentAnnotObject = null;\n        if (annotationBase) {\n            if (property === 'bounds') {\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase, true);\n            }\n        }\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations != null && annotationBase) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (annotationBase.id === pageAnnotations[i].id) {\n                    if (property === 'bounds') {\n                        if (pageAnnotations[i].shapeAnnotationType === 'Line') {\n                            pageAnnotations[i].vertexPoints = annotationBase.vertexPoints;\n                            // eslint-disable-next-line max-len\n                            pageAnnotations[i].bounds = { left: annotationBase.bounds.x, top: annotationBase.bounds.y, width: annotationBase.bounds.width, height: annotationBase.bounds.height, right: annotationBase.bounds.right, bottom: annotationBase.bounds.bottom };\n                        }\n                        else if (pageAnnotations[i].shapeAnnotationType === 'Polygon') {\n                            pageAnnotations[i].vertexPoints = annotationBase.vertexPoints;\n                            // eslint-disable-next-line max-len\n                            pageAnnotations[i].bounds = { left: annotationBase.bounds.x, top: annotationBase.bounds.y, width: annotationBase.bounds.width, height: annotationBase.bounds.height, right: annotationBase.bounds.right, bottom: annotationBase.bounds.bottom };\n                        }\n                        else {\n                            // eslint-disable-next-line max-len\n                            pageAnnotations[i].bounds = { left: annotationBase.bounds.x, top: annotationBase.bounds.y, width: annotationBase.bounds.width, height: annotationBase.bounds.height, right: annotationBase.bounds.right, bottom: annotationBase.bounds.bottom };\n                        }\n                        if (pageAnnotations[i].enableShapeLabel === true && annotationBase.wrapper) {\n                            var labelTop = 0;\n                            var labelLeft = 0;\n                            var labelWidth = 0;\n                            var labelHeight = 24.6;\n                            var labelMaxWidth = 151;\n                            if (annotationBase.wrapper.bounds.width) {\n                                // eslint-disable-next-line max-len\n                                labelWidth = (annotationBase.wrapper.bounds.width / 2);\n                                labelWidth = (labelWidth > 0 && labelWidth < labelMaxWidth) ? labelWidth : labelMaxWidth;\n                            }\n                            if (annotationBase.wrapper.bounds.left) {\n                                // eslint-disable-next-line max-len\n                                labelLeft = (annotationBase.wrapper.bounds.left + (annotationBase.wrapper.bounds.width / 2) - (labelWidth / 2));\n                            }\n                            if (annotationBase.wrapper.bounds.top) {\n                                // eslint-disable-next-line max-len\n                                labelTop = (annotationBase.wrapper.bounds.top + (annotationBase.wrapper.bounds.height / 2) - 12.3);\n                            }\n                            // eslint-disable-next-line max-len\n                            pageAnnotations[i].labelBounds = { left: labelLeft, top: labelTop, width: labelWidth, height: labelHeight, right: 0, bottom: 0 };\n                        }\n                    }\n                    else if (property === 'fill') {\n                        pageAnnotations[i].fillColor = annotationBase.wrapper.children[0].style.fill;\n                    }\n                    else if (property === 'stroke') {\n                        pageAnnotations[i].strokeColor = annotationBase.wrapper.children[0].style.strokeColor;\n                    }\n                    else if (property === 'opacity') {\n                        pageAnnotations[i].opacity = annotationBase.wrapper.children[0].style.opacity;\n                    }\n                    else if (property === 'thickness') {\n                        pageAnnotations[i].thickness = annotationBase.wrapper.children[0].style.strokeWidth;\n                    }\n                    else if (property === 'dashArray') {\n                        pageAnnotations[i].borderDashArray = annotationBase.wrapper.children[0].style.strokeDashArray;\n                        pageAnnotations[i].borderStyle = annotationBase.borderStyle;\n                    }\n                    else if (property === 'startArrow') {\n                        // eslint-disable-next-line max-len\n                        pageAnnotations[i].lineHeadStart = this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.sourceDecoraterShapes);\n                    }\n                    else if (property === 'endArrow') {\n                        // eslint-disable-next-line max-len\n                        pageAnnotations[i].lineHeadEnd = this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.taregetDecoraterShapes);\n                    }\n                    else if (property === 'notes') {\n                        pageAnnotations[i].note = annotationBase.notes;\n                    }\n                    else if (property === 'delete') {\n                        currentAnnotObject = pageAnnotations.splice(i, 1)[0];\n                        break;\n                    }\n                    else if (property === 'labelContent') {\n                        pageAnnotations[i].note = annotationBase.labelContent;\n                        pageAnnotations[i].labelContent = annotationBase.labelContent;\n                        break;\n                    }\n                    else if (property === 'fontColor') {\n                        pageAnnotations[i].fontColor = annotationBase.fontColor;\n                    }\n                    else if (property === 'fontSize') {\n                        pageAnnotations[i].fontSize = annotationBase.fontSize;\n                    }\n                    pageAnnotations[i].modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                    this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], pageNumber);\n                }\n            }\n            this.manageAnnotations(pageAnnotations, pageNumber);\n        }\n        return currentAnnotObject;\n    };\n    /**\n     * @param pageNumber\n     * @param annotationBase\n     * @param pageNumber\n     * @param annotationBase\n     * @private\n     */\n    ShapeAnnotation.prototype.addInCollection = function (pageNumber, annotationBase) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            pageAnnotations.push(annotationBase);\n        }\n        this.manageAnnotations(pageAnnotations, pageNumber);\n    };\n    /**\n     * @private\n     */\n    ShapeAnnotation.prototype.saveShapeAnnotations = function () {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_shape'];\n        }\n        // eslint-disable-next-line\n        var annotations = new Array();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject && !this.pdfViewer.annotationSettings.skipDownload) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        if (!this.pdfViewerBase.checkFormFieldCollection(pageAnnotationObject.annotations[z].id)) {\n                            this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);\n                            if (this.pdfViewerBase.isJsonExported) {\n                                if (pageAnnotationObject.annotations[z].isAnnotationRotated) {\n                                    pageAnnotationObject.annotations[z].bounds = this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex);\n                                    pageAnnotationObject.annotations[z].vertexPoints = this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints, pageAnnotationObject.pageIndex);\n                                }\n                                else {\n                                    var pageDetails = this.pdfViewerBase.pageSize[pageAnnotationObject.pageIndex];\n                                    if (pageDetails) {\n                                        pageAnnotationObject.annotations[z].annotationRotation = pageDetails.rotation;\n                                        ;\n                                    }\n                                }\n                            }\n                            // eslint-disable-next-line max-len\n                            pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex));\n                            var strokeColorString = pageAnnotationObject.annotations[z].strokeColor;\n                            pageAnnotationObject.annotations[z].strokeColor = JSON.stringify(this.getRgbCode(strokeColorString));\n                            var fillColorString = pageAnnotationObject.annotations[z].fillColor;\n                            pageAnnotationObject.annotations[z].fillColor = JSON.stringify(this.getRgbCode(fillColorString));\n                            // eslint-disable-next-line max-len\n                            pageAnnotationObject.annotations[z].vertexPoints = JSON.stringify(this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints, pageAnnotationObject.pageIndex));\n                            if (pageAnnotationObject.annotations[z].rectangleDifference !== null) {\n                                // eslint-disable-next-line max-len\n                                pageAnnotationObject.annotations[z].rectangleDifference = JSON.stringify(pageAnnotationObject.annotations[z].rectangleDifference);\n                            }\n                            if (pageAnnotationObject.annotations[z].enableShapeLabel === true) {\n                                // eslint-disable-next-line max-len\n                                pageAnnotationObject.annotations[z].labelBounds = JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(pageAnnotationObject.annotations[z].bounds)));\n                                var labelFillColorString = pageAnnotationObject.annotations[z].labelFillColor;\n                                pageAnnotationObject.annotations[z].labelFillColor = JSON.stringify(this.getRgbCode(labelFillColorString));\n                                var labelBorderColorString = pageAnnotationObject.annotations[z].labelBorderColor;\n                                pageAnnotationObject.annotations[z].labelBorderColor = JSON.stringify(this.getRgbCode(labelBorderColorString));\n                                pageAnnotationObject.annotations[z].labelSettings.fillColor = labelFillColorString;\n                                var fontColorString = pageAnnotationObject.annotations[z].labelSettings.fontColor;\n                                pageAnnotationObject.annotations[z].fontColor = JSON.stringify(this.getRgbCode(fontColorString));\n                            }\n                        }\n                        else {\n                            pageAnnotationObject.annotations[z] = \"\";\n                        }\n                    }\n                    pageAnnotationObject.annotations = pageAnnotationObject.annotations.filter(function (item) { return item; });\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    ShapeAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_shape'];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            if (!this.pdfViewerBase.isStorageExceed) {\n                window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_shape');\n            }\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_shape'] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_shape', annotationStringified);\n            }\n        }\n    };\n    ShapeAnnotation.prototype.createAnnotationObject = function (annotationModel) {\n        var bound;\n        var labelBound;\n        var annotationName = this.pdfViewer.annotation.createGUID();\n        if (!annotationModel.formFieldAnnotationType) {\n            // eslint-disable-next-line max-len\n            var commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('shape', (annotationModel.pageIndex + 1), annotationModel.shapeAnnotationType);\n            if (commentsDivid) {\n                document.getElementById(commentsDivid).id = annotationName;\n            }\n        }\n        annotationModel.annotName = annotationName;\n        if (annotationModel.wrapper.bounds) {\n            bound = {\n                // eslint-disable-next-line max-len\n                left: annotationModel.wrapper.bounds.x, top: annotationModel.wrapper.bounds.y, height: annotationModel.wrapper.bounds.height, width: annotationModel.wrapper.bounds.width,\n                right: annotationModel.wrapper.bounds.right, bottom: annotationModel.wrapper.bounds.bottom\n            };\n            labelBound = this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(annotationModel.wrapper.bounds);\n        }\n        else {\n            bound = { left: 0, top: 0, height: 0, width: 0, right: 0, bottom: 0 };\n            labelBound = { left: 0, top: 0, height: 0, width: 0, right: 0, bottom: 0 };\n        }\n        if (annotationModel.subject === 'Line' && annotationModel.shapeAnnotationType === 'Polygon') {\n            annotationModel.author = this.pdfViewer.annotationModule.updateAnnotationAuthor('shape', 'Polygon');\n        }\n        else {\n            annotationModel.author = this.pdfViewer.annotationModule.updateAnnotationAuthor('shape', annotationModel.subject);\n        }\n        this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(annotationName, annotationModel.notes);\n        // eslint-disable-next-line radix\n        var borderDashArray = parseInt(annotationModel.borderDashArray);\n        borderDashArray = isNaN(borderDashArray) ? 0 : borderDashArray;\n        // eslint-disable-next-line\n        var annotationSettings = this.pdfViewer.annotationModule.findAnnotationSettings(annotationModel, true);\n        annotationModel.isPrint = annotationSettings.isPrint;\n        var setting = this.pdfViewer.shapeLabelSettings;\n        var labelSettings = { borderColor: annotationModel.strokeColor, fillColor: annotationModel.fillColor, fontColor: annotationModel.fontColor,\n            fontSize: annotationModel.fontSize, labelContent: annotationModel.labelContent, labelHeight: setting.labelHeight, labelWidth: setting.labelMaxWidth, opacity: annotationModel.opacity\n        };\n        return {\n            // eslint-disable-next-line max-len\n            id: annotationModel.id, shapeAnnotationType: this.getShapeAnnotType(annotationModel.shapeAnnotationType), author: annotationModel.author, allowedInteractions: this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotationModel), subject: annotationModel.subject, note: annotationModel.notes,\n            strokeColor: annotationModel.strokeColor, annotName: annotationName, comments: [], review: { state: '', stateModel: '', modifiedDate: this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(), author: annotationModel.author },\n            fillColor: annotationModel.fillColor, opacity: annotationModel.opacity, thickness: annotationModel.thickness,\n            // eslint-disable-next-line max-len\n            borderStyle: annotationModel.borderStyle, borderDashArray: borderDashArray, bounds: bound, modifiedDate: this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),\n            rotateAngle: 'RotateAngle' + annotationModel.rotateAngle, isCloudShape: annotationModel.isCloudShape, cloudIntensity: annotationModel.cloudIntensity,\n            // eslint-disable-next-line max-len\n            vertexPoints: annotationModel.vertexPoints, lineHeadStart: this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.sourceDecoraterShapes),\n            lineHeadEnd: this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.taregetDecoraterShapes), rectangleDifference: [], isLocked: annotationSettings.isLock,\n            // eslint-disable-next-line max-len\n            labelContent: annotationModel.labelContent, enableShapeLabel: annotationModel.enableShapeLabel, labelFillColor: annotationModel.labelFillColor,\n            fontColor: annotationModel.fontColor, labelBorderColor: annotationModel.labelBorderColor, fontSize: annotationModel.fontSize,\n            // eslint-disable-next-line max-len\n            labelBounds: labelBound, annotationSelectorSettings: this.getSelector(annotationModel.shapeAnnotationType, annotationModel.subject), labelSettings: labelSettings, annotationSettings: annotationSettings,\n            customData: this.pdfViewer.annotation.getShapeData(annotationModel.shapeAnnotationType, annotationModel.subject), isPrint: annotationModel.isPrint, isCommentLock: annotationModel.isCommentLock, isAnnotationRotated: false\n        };\n    };\n    ShapeAnnotation.prototype.getSelector = function (type, subject) {\n        var selector = this.pdfViewer.annotationSelectorSettings;\n        if (type === 'Line' && subject !== 'Arrow' && this.pdfViewer.lineSettings.annotationSelectorSettings) {\n            selector = this.pdfViewer.lineSettings.annotationSelectorSettings;\n        }\n        else if ((type === 'LineWidthArrowHead' || subject === 'Arrow') && this.pdfViewer.lineSettings.annotationSelectorSettings) {\n            selector = this.pdfViewer.arrowSettings.annotationSelectorSettings;\n        }\n        else if ((type === 'Rectangle' || type === 'Square') && this.pdfViewer.rectangleSettings.annotationSelectorSettings) {\n            selector = this.pdfViewer.rectangleSettings.annotationSelectorSettings;\n        }\n        else if ((type === 'Ellipse' || type === 'Circle') && this.pdfViewer.circleSettings.annotationSelectorSettings) {\n            selector = this.pdfViewer.circleSettings.annotationSelectorSettings;\n        }\n        else if (type === 'Polygon' && this.pdfViewer.polygonSettings.annotationSelectorSettings) {\n            selector = this.pdfViewer.polygonSettings.annotationSelectorSettings;\n        }\n        return selector;\n    };\n    // eslint-disable-next-line\n    ShapeAnnotation.prototype.getAnnotations = function (pageIndex, shapeAnnotations) {\n        // eslint-disable-next-line\n        var annotationCollection;\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_shape'];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = shapeAnnotations;\n            }\n        }\n        else {\n            annotationCollection = shapeAnnotations;\n        }\n        return annotationCollection;\n    };\n    // eslint-disable-next-line\n    ShapeAnnotation.prototype.getRgbCode = function (colorString) {\n        if (!colorString.match(/#([a-z0-9]+)/gi) && !colorString.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/)) {\n            colorString = this.pdfViewer.annotationModule.nameToHash(colorString);\n        }\n        var stringArray = colorString.split(',');\n        if (isNullOrUndefined(stringArray[1])) {\n            colorString = this.pdfViewer.annotationModule.getValue(colorString, 'rgba');\n            stringArray = colorString.split(',');\n        }\n        // eslint-disable-next-line radix\n        var r = parseInt(stringArray[0].split('(')[1]);\n        // eslint-disable-next-line radix\n        var g = parseInt(stringArray[1]);\n        // eslint-disable-next-line radix\n        var b = parseInt(stringArray[2]);\n        // eslint-disable-next-line radix\n        var a = parseFloat(stringArray[3]);\n        return { r: r, g: g, b: b, a: a };\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param annotation\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    ShapeAnnotation.prototype.saveImportedShapeAnnotations = function (annotation, pageNumber) {\n        var annotationObject = null;\n        var vertexPoints = null;\n        annotation.Author = this.pdfViewer.annotationModule.updateAnnotationAuthor('shape', annotation.Subject);\n        if (annotation.VertexPoints) {\n            vertexPoints = [];\n            for (var j = 0; j < annotation.VertexPoints.length; j++) {\n                var point = { x: annotation.VertexPoints[j].X, y: annotation.VertexPoints[j].Y };\n                vertexPoints.push(point);\n            }\n        }\n        if (annotation.Bounds && annotation.EnableShapeLabel === true) {\n            // eslint-disable-next-line max-len\n            annotation.LabelBounds = this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);\n            // eslint-disable-next-line max-len\n            annotation.LabelBorderColor = annotation.LabelBorderColor ? annotation.LabelBorderColor : annotation.StrokeColor;\n            annotation.FontColor = annotation.FontColor ? annotation.FontColor : annotation.StrokeColor;\n            annotation.LabelFillColor = annotation.LabelFillColor ? annotation.LabelFillColor : annotation.FillColor;\n            annotation.FontSize = annotation.FontSize ? annotation.FontSize : 16;\n            annotation.LabelSettings = annotation.LabelSettings ? annotation.LabelSettings : this.pdfViewer.shapeLabelSettings;\n        }\n        // eslint-disable-next-line max-len\n        annotation.AnnotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);\n        // eslint-disable-next-line max-len\n        annotation.allowedInteractions = this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n        // eslint-disable-next-line max-len\n        annotationObject = {\n            id: 'shape', shapeAnnotationType: annotation.ShapeAnnotationType, author: annotation.Author, allowedInteractions: annotation.allowedInteractions, modifiedDate: annotation.ModifiedDate, subject: annotation.Subject,\n            // eslint-disable-next-line max-len\n            note: annotation.Note, strokeColor: annotation.StrokeColor, fillColor: annotation.FillColor, opacity: annotation.Opacity, thickness: annotation.Thickness, rectangleDifference: annotation.RectangleDifference,\n            borderStyle: annotation.BorderStyle, borderDashArray: annotation.BorderDashArray, rotateAngle: annotation.RotateAngle, isCloudShape: annotation.IsCloudShape,\n            // eslint-disable-next-line max-len\n            cloudIntensity: annotation.CloudIntensity, vertexPoints: vertexPoints, lineHeadStart: annotation.LineHeadStart, lineHeadEnd: annotation.LineHeadEnd, isLocked: annotation.IsLocked, comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author), review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: annotation.Author }, annotName: annotation.AnnotName,\n            bounds: { left: annotation.Bounds.X, top: annotation.Bounds.Y, width: annotation.Bounds.Width, height: annotation.Bounds.Height, right: annotation.Bounds.Right, bottom: annotation.Bounds.Bottom },\n            labelContent: annotation.LabelContent, enableShapeLabel: annotation.EnableShapeLabel, labelFillColor: annotation.LabelFillColor,\n            labelBorderColor: annotation.LabelBorderColor, fontColor: annotation.FontColor, fontSize: annotation.FontSize,\n            // eslint-disable-next-line max-len\n            labelBounds: annotation.LabelBounds, annotationSelectorSettings: this.getSettings(annotation), labelSettings: annotation.LabelSettings, annotationSettings: annotation.AnnotationSettings,\n            customData: this.pdfViewer.annotation.getCustomData(annotation), isPrint: annotation.IsPrint, isCommentLock: annotation.IsCommentLock, isAnnotationRotated: false\n        };\n        this.pdfViewer.annotationModule.storeAnnotations(pageNumber, annotationObject, '_annotations_shape');\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param annotation\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    ShapeAnnotation.prototype.updateShapeAnnotationCollections = function (annotation, pageNumber) {\n        // eslint-disable-next-line\n        var annotationObject = null;\n        var vertexPoints = null;\n        if (annotation.VertexPoints) {\n            vertexPoints = [];\n            for (var j = 0; j < annotation.VertexPoints.length; j++) {\n                var point = { x: annotation.VertexPoints[j].X, y: annotation.VertexPoints[j].Y };\n                vertexPoints.push(point);\n            }\n        }\n        if (annotation.Bounds && annotation.EnableShapeLabel === true) {\n            // eslint-disable-next-line max-len\n            annotation.LabelBounds = this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);\n            // eslint-disable-next-line max-len\n            annotation.LabelBorderColor = annotation.LabelBorderColor ? annotation.LabelBorderColor : annotation.StrokeColor;\n            annotation.FontColor = annotation.FontColor ? annotation.FontColor : annotation.StrokeColor;\n            annotation.LabelFillColor = annotation.LabelFillColor ? annotation.LabelFillColor : annotation.FillColor;\n            annotation.FontSize = annotation.FontSize ? annotation.FontSize : 16;\n            var settings = this.pdfViewer.shapeLabelSettings;\n            var labelSettings = { borderColor: annotation.StrokeColor, fillColor: annotation.FillColor, fontColor: annotation.FontColor,\n                fontSize: annotation.FontSize, labelContent: annotation.LabelContent, labelHeight: settings.labelHeight, labelWidth: settings.labelWidth, opacity: annotation.Opacity\n            };\n            annotation.LabelSettings = annotation.LabelSettings ? annotation.LabelSettings : labelSettings;\n        }\n        // eslint-disable-next-line max-len\n        annotation.AnnotationSettings = annotation.AnnotationSettings ? annotation.AnnotationSettings : this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);\n        if (annotation.IsLocked) {\n            annotation.AnnotationSettings.isLock = annotation.IsLocked;\n        }\n        // eslint-disable-next-line max-len\n        annotation.allowedInteractions = annotation.AllowedInteractions ? annotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);\n        // eslint-disable-next-line max-len\n        annotationObject = {\n            id: 'shape', shapeAnnotationType: annotation.ShapeAnnotationType, author: annotation.Author, allowedInteractions: annotation.allowedInteractions, modifiedDate: annotation.ModifiedDate, subject: annotation.Subject,\n            // eslint-disable-next-line max-len\n            note: annotation.Note, strokeColor: annotation.StrokeColor, fillColor: annotation.FillColor, opacity: annotation.Opacity, thickness: annotation.Thickness, rectangleDifference: annotation.RectangleDifference,\n            borderStyle: annotation.BorderStyle, borderDashArray: annotation.BorderDashArray, rotateAngle: annotation.RotateAngle, isCloudShape: annotation.IsCloudShape,\n            // eslint-disable-next-line max-len\n            cloudIntensity: annotation.CloudIntensity, vertexPoints: vertexPoints, lineHeadStart: annotation.LineHeadStart, lineHeadEnd: annotation.LineHeadEnd, isLocked: annotation.IsLocked, comments: this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments, annotation, annotation.Author), review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: annotation.Author }, annotationId: annotation.AnnotName,\n            bounds: { left: annotation.Bounds.X, top: annotation.Bounds.Y, width: annotation.Bounds.Width, height: annotation.Bounds.Height, right: annotation.Bounds.Right, bottom: annotation.Bounds.Bottom },\n            labelContent: annotation.LabelContent, enableShapeLabel: annotation.EnableShapeLabel, labelFillColor: annotation.LabelFillColor,\n            labelBorderColor: annotation.LabelBorderColor, fontColor: annotation.FontColor, fontSize: annotation.FontSize,\n            // eslint-disable-next-line max-len\n            labelBounds: annotation.LabelBounds, pageNumber: pageNumber, labelSettings: annotation.LabelSettings, annotationSettings: annotation.AnnotationSettings,\n            customData: this.pdfViewer.annotation.getCustomData(annotation), isPrint: annotation.IsPrint\n        };\n        return annotationObject;\n    };\n    /**\n     * This method used to add annotations with using program.\n     *\n     * @param annotationType - It describes the annotation type\n     * @param annotationObject - It describes type of annotation object\n     * @param offset - It describes about the annotation bounds or location\n     * @returns Object\n     * @private\n     */\n    ShapeAnnotation.prototype.updateAddAnnotationDetails = function (annotationType, annotationObject, offset) {\n        //Creating new object if annotationObject is null\n        if (!annotationObject) {\n            annotationObject = { offset: { x: 10, y: 10 }, pageNumber: 0, width: undefined, height: undefined };\n            offset = annotationObject.offset;\n        }\n        else if (!annotationObject.offset)\n            offset = { x: 10, y: 10 };\n        else\n            offset = annotationObject.offset;\n        //Initialize the annotation settings\n        var annotationSelectorSettings = null;\n        var allowedInteractions = null;\n        var annotationSettings = null;\n        var shapeAnnotationType = '';\n        var isArrow = false;\n        var vertexPoints = null;\n        //Creating the CurrentDate and Annotation name\n        var currentDateString = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n        var annotationName = this.pdfViewer.annotation.createGUID();\n        if (annotationType == 'Line') {\n            //Creating annotation settings\n            annotationSelectorSettings = this.pdfViewer.lineSettings.annotationSelectorSettings ? this.pdfViewer.lineSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n            annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings);\n            allowedInteractions = this.pdfViewer.lineSettings.allowedInteractions ? this.pdfViewer.lineSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n            shapeAnnotationType = 'Line';\n            if (annotationObject.vertexPoints)\n                vertexPoints = annotationObject.vertexPoints;\n            else\n                vertexPoints = [{ x: offset.x, y: offset.y }, { x: offset.x + 100, y: offset.y }];\n            annotationObject.width = annotationObject.width ? annotationObject.width : 1;\n            annotationObject.height = annotationObject.height ? annotationObject.height : 1;\n        }\n        else if (annotationType == 'Arrow') {\n            //Creating annotation settings\n            annotationSelectorSettings = this.pdfViewer.arrowSettings.annotationSelectorSettings ? this.pdfViewer.arrowSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n            annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings);\n            allowedInteractions = this.pdfViewer.arrowSettings.allowedInteractions ? this.pdfViewer.arrowSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n            shapeAnnotationType = 'Line';\n            isArrow = true;\n            if (annotationObject.vertexPoints)\n                vertexPoints = annotationObject.vertexPoints;\n            else\n                vertexPoints = [{ x: offset.x, y: offset.y }, { x: offset.x + 100, y: offset.y }];\n            annotationObject.width = annotationObject.width ? annotationObject.width : 1;\n            annotationObject.height = annotationObject.height ? annotationObject.height : 1;\n        }\n        else if (annotationType == 'Rectangle') {\n            //Creating annotation settings\n            annotationSelectorSettings = this.pdfViewer.rectangleSettings.annotationSelectorSettings ? this.pdfViewer.rectangleSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n            annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings);\n            allowedInteractions = this.pdfViewer.rectangleSettings.allowedInteractions ? this.pdfViewer.rectangleSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n            shapeAnnotationType = 'Square';\n            annotationObject.width = annotationObject.width ? annotationObject.width : 150;\n            annotationObject.height = annotationObject.height ? annotationObject.height : 75;\n        }\n        else if (annotationType == 'Circle') {\n            //Creating annotation settings\n            annotationSelectorSettings = this.pdfViewer.circleSettings.annotationSelectorSettings ? this.pdfViewer.circleSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n            annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings);\n            allowedInteractions = this.pdfViewer.circleSettings.allowedInteractions ? this.pdfViewer.circleSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n            shapeAnnotationType = 'Circle';\n            annotationObject.width = annotationObject.width ? annotationObject.width : 100;\n            annotationObject.height = annotationObject.height ? annotationObject.height : 90;\n        }\n        else if (annotationType == 'Polygon') {\n            //Creating annotation settings\n            annotationSelectorSettings = this.pdfViewer.polygonSettings.annotationSelectorSettings ? this.pdfViewer.polygonSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n            annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings);\n            allowedInteractions = this.pdfViewer.polygonSettings.allowedInteractions ? this.pdfViewer.polygonSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n            shapeAnnotationType = 'Polygon';\n            if (annotationObject.vertexPoints)\n                vertexPoints = annotationObject.vertexPoints;\n            else\n                vertexPoints = [{ x: offset.x, y: offset.y }, { x: offset.x + 42, y: offset.y - 29 }, { x: offset.x + 89, y: offset.y - 1 }, { x: offset.x + 78, y: offset.y + 42 }, { x: offset.x + 11, y: offset.y + 42 }, { x: offset.x, y: offset.y }];\n            annotationObject.width = annotationObject.width ? annotationObject.width : 1;\n            annotationObject.height = annotationObject.height ? annotationObject.height : 1;\n        }\n        annotationSettings.isLock = annotationObject.isLock ? annotationObject.isLock : false;\n        annotationSettings.minHeight = annotationObject.minHeight ? annotationObject.minHeight : 0;\n        annotationSettings.minWidth = annotationObject.minWidth ? annotationObject.minWidth : 0;\n        annotationSettings.maxWidth = annotationObject.maxWidth ? annotationObject.maxWidth : 0;\n        annotationSettings.maxHeight = annotationObject.maxHeight ? annotationObject.maxHeight : 0;\n        //Converting points model into vertex property\n        if (vertexPoints)\n            vertexPoints = this.pdfViewer.annotation.getVertexPointsXY(vertexPoints);\n        //Creating Annotation objects with it's proper properties\n        var shapeAnnotation = [];\n        var shape = {\n            AllowedInteractions: annotationObject.allowedInteractions ? annotationObject.allowedInteractions : allowedInteractions,\n            AnnotName: annotationName,\n            AnnotType: 'shape',\n            AnnotationSelectorSettings: annotationObject.annotationSelectorSettings ? annotationObject.annotationSelectorSettings : annotationSelectorSettings,\n            AnnotationSettings: annotationSettings,\n            Author: annotationObject.author ? annotationObject.author : 'Guest',\n            BorderDashArray: annotationObject.borderDashArray ? annotationObject.borderDashArray : 0,\n            BorderStyle: 'Solid',\n            Bounds: { X: offset.x, Y: offset.y, Width: annotationObject.width, Height: annotationObject.height, Left: offset.x, Top: offset.y, Location: { X: offset.x, Y: offset.y }, Size: { Height: annotationObject.height, IsEmpty: false, Width: annotationObject.width } },\n            CloudIntensity: 0,\n            Comments: null,\n            CustomData: annotationObject.customData ? annotationObject.customData : null,\n            CreatedDate: currentDateString,\n            EnableShapeLabel: false,\n            ExistingCustomData: null,\n            FillColor: annotationObject.fillColor ? annotationObject.fillColor : '#ffffff00',\n            FontColor: null,\n            FontSize: 0,\n            IsCloudShape: false,\n            IsCommentLock: false,\n            IsLocked: annotationObject.isLock ? annotationObject.isLock : false,\n            IsPrint: annotationObject.isPrint ? annotationObject.isPrint : true,\n            LabelBorderColor: null,\n            LabelBounds: { X: 0, Y: 0, Width: 0, Height: 0 },\n            LabelContent: null,\n            LabelFillColor: null,\n            LabelSettings: null,\n            LineHeadEnd: annotationObject.lineHeadStartStyle ? annotationObject.lineHeadStartStyle : isArrow ? 'ClosedArrow' : 'None',\n            LineHeadStart: annotationObject.lineHeadEndStyle ? annotationObject.lineHeadEndStyle : isArrow ? 'ClosedArrow' : 'None',\n            ModifiedDate: '',\n            Note: '',\n            Opacity: annotationObject.opacity ? annotationObject.opacity : 1,\n            RectangleDifference: null,\n            RotateAngle: 'RotateAngle0',\n            ShapeAnnotationType: shapeAnnotationType,\n            State: '',\n            StateModel: '',\n            StrokeColor: annotationObject.strokeColor ? annotationObject.strokeColor : '#ff0000',\n            Subject: annotationType.toString(),\n            Thickness: annotationObject.thickness ? annotationObject.thickness : 1,\n            VertexPoints: vertexPoints\n        };\n        //Adding the annotation object to an array and return it\n        shapeAnnotation[0] = shape;\n        return { shapeAnnotation: shapeAnnotation };\n    };\n    return ShapeAnnotation;\n}());\nexport { ShapeAnnotation };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}