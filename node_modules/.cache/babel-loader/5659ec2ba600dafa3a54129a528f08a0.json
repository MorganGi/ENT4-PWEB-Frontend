{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue, generateExpandPredicates, getPredicates, getGroupKeysAndFields } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\n\nvar GroupLazyLoadRenderer =\n/** @class */\nfunction (_super) {\n  __extends(GroupLazyLoadRenderer, _super);\n\n  function GroupLazyLoadRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n\n    _this.childCount = 0;\n    _this.scrollData = [];\n    _this.isFirstChildRow = false;\n    _this.isScrollDown = false;\n    _this.isScrollUp = false;\n    _this.groupCache = {};\n    _this.startIndexes = {};\n    _this.captionCounts = {};\n    _this.rowsByUid = {};\n    _this.objIdxByUid = {};\n    _this.initialGroupCaptions = {};\n    _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete', 'filterbeforeopen', 'filterchoicerequest'];\n    /** @hidden */\n\n    _this.refRowsObj = {};\n    /** @hidden */\n\n    _this.cacheMode = false;\n    /** @hidden */\n\n    _this.cacheBlockSize = 5;\n    /** @hidden */\n\n    _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n    /** @hidden */\n\n    _this.allowCaseSensitive = false;\n    _this.locator = locator;\n    _this.groupGenerator = new GroupModelGenerator(_this.parent);\n    _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n    _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n    _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n\n    _this.eventListener();\n\n    return _this;\n  }\n\n  GroupLazyLoadRenderer.prototype.eventListener = function () {\n    this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n    this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n    this.parent.on(events.setGroupCache, this.setCache, this);\n    this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n    this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n  };\n  /**\n   * @param {HTMLTableRowElement} tr - specifies the table row element\n   * @returns {void}\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n    var _this = this;\n\n    var page = this.parent.pageSettings.currentPage;\n    var rowsObject = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var oriIndex = this.getRowObjectIndexByUid(uid);\n    var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[oriIndex].indent < rowsObject[oriIndex + 1].indent : false;\n    var data = rowsObject[oriIndex];\n    var key = getGroupKeysAndFields(oriIndex, rowsObject);\n    var e = {\n      captionRowElement: tr,\n      groupInfo: data,\n      enableCaching: true,\n      cancel: false\n    };\n    this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n      if (args.cancel) {\n        return;\n      }\n\n      args.keys = key.keys;\n      args.fields = key.fields;\n      args.rowIndex = tr.rowIndex;\n      args.makeRequest = !args.enableCaching || !isRowExist;\n\n      if (!args.enableCaching && isRowExist) {\n        _this.clearCache([uid]);\n      }\n\n      args.skip = 0;\n      args.take = _this.pageSize;\n      data.isExpand = _this.rowsByUid[page][data.uid].isExpand = true;\n\n      _this.captionRowExpand(args);\n    });\n  };\n  /**\n   * @param {HTMLTableRowElement} tr - specifies the table row element\n   * @returns {void}\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n    var _this = this;\n\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    var rowIdx = tr.rowIndex;\n    var uid = tr.getAttribute('data-uid');\n    var captionIndex = this.getRowObjectIndexByUid(uid);\n    var e = {\n      captionRowElement: tr,\n      groupInfo: cache[captionIndex],\n      cancel: false\n    };\n    this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n      if (args.cancel) {\n        return;\n      }\n\n      args.isExpand = false;\n\n      _this.removeRows(captionIndex, rowIdx);\n    });\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n    this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n    this.blockSize = Math.ceil(this.pageSize / 2);\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n    this.clearCache();\n  };\n\n  GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n    uids = uids ? uids : this.getInitialCaptionIndexes();\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n\n    if (uids.length) {\n      for (var i = 0; i < uids.length; i++) {\n        var capIdx = this.getRowObjectIndexByUid(uids[i]);\n        var capRow = cache[capIdx];\n\n        if (!capRow) {\n          continue;\n        }\n\n        if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n          for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n            if (cache[i_1].indent === capRow.indent || cache[i_1].indent < capRow.indent) {\n              delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n              break;\n            }\n\n            if (cache[i_1].isCaptionRow) {\n              delete this.captionCounts[this.parent.pageSettings.currentPage][cache[i_1].uid];\n            }\n          }\n        }\n\n        if (capRow.isExpand) {\n          var tr = this.parent.getRowElementByUID(capRow.uid);\n\n          if (!tr) {\n            return;\n          }\n\n          this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n        }\n\n        var child = this.getNextChilds(capIdx);\n\n        if (!child.length) {\n          continue;\n        }\n\n        var subChild = [];\n\n        if (child[child.length - 1].isCaptionRow) {\n          subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n        }\n\n        var start = cache.indexOf(child[0]);\n        var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n        cache.splice(start, end - (start - 1));\n        this.refreshCaches();\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[page];\n    this.rowsByUid = {};\n    this.objIdxByUid = {};\n\n    for (var i = 0; i < cache.length; i++) {\n      this.maintainRows(cache[i], i);\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n    var page = this.parent.pageSettings.currentPage;\n    var uids = [];\n\n    for (var i = 0; i < this.initialGroupCaptions[page].length; i++) {\n      uids.push(this.initialGroupCaptions[page][i].uid);\n    }\n\n    return uids;\n  };\n  /**\n   * @param {string} uid - specifies the uid\n   * @returns {number} returns the row object uid\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n    return this.objIdxByUid[this.parent.pageSettings.currentPage][uid];\n  };\n\n  GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n    if (this.parent.groupSettings.columns.length && args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n      if (!args.collapse && parentsUntil(args.target, literals.row)) {\n        return;\n      }\n\n      var row = args.target.parentElement;\n      var uid = row.getAttribute('data-uid');\n\n      if (args.collapse) {\n        var rowObj = this.getRowByUid(uid);\n        var capRow = this.getRowByUid(rowObj.parentUid);\n\n        if (capRow.isCaptionRow && capRow.isExpand) {\n          var capEle = this.getRowElementByUid(rowObj.parentUid);\n          this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n        }\n      } else {\n        var capRow = this.getRowByUid(uid);\n\n        if (capRow.isCaptionRow && !capRow.isExpand) {\n          var capEle = this.getRowElementByUid(uid);\n          this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n        }\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n    return this.rowsByUid[this.parent.pageSettings.currentPage][uid];\n  };\n\n  GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n    if (!args.cancel) {\n      if (!this.requestType.some(function (value) {\n        return value === args.requestType;\n      })) {\n        this.groupCache = {};\n        this.resetRowMaintenance();\n      }\n\n      if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n        var keys = Object.keys(this.groupCache);\n\n        for (var j = 0; j < keys.length; j++) {\n          var cache = this.groupCache[keys[j]];\n\n          for (var i = 0; i < cache.length; i++) {\n            if (cache[i].isCaptionRow && !this.captionModelGen.isEmpty()) {\n              this.changeCaptionRow(cache[i], null, keys[j]);\n            }\n\n            if (cache[i].isDataRow) {\n              var from = args.fromIndex + cache[i].indent;\n              var to = args.toIndex + cache[i].indent;\n              this.moveCells(cache[i].cells, from, to);\n            }\n          }\n        }\n      }\n\n      if (args.requestType === 'delete' || args.action === 'add' && args.requestType === 'save') {\n        this.groupCache = {};\n        this.resetRowMaintenance();\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n    if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit' && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n      this.scrollReset();\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n    this.startIndexes = {};\n    this.captionCounts = {};\n    this.rowsByUid = {};\n    this.objIdxByUid = {};\n    this.initialGroupCaptions = {};\n  };\n\n  GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n    if (from >= arr.length) {\n      var k = from - arr.length;\n\n      while (k-- + 1) {\n        arr.push(undefined);\n      }\n    }\n\n    arr.splice(from, 0, arr.splice(to, 1)[0]);\n  };\n\n  GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var aggUid;\n\n    if (this.parent.aggregates.length) {\n      var agg = this.getAggregateByCaptionIndex(idx);\n      aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n    }\n\n    var indent = rows[idx].indent;\n    this.addClass(this.getNextChilds(idx));\n    rows[idx].isExpand = this.rowsByUid[page][rows[idx].uid].isExpand = false;\n    var capUid;\n\n    for (var i = idx + 1; i < rows.length; i++) {\n      if (rows[i].indent === indent || rows[i].indent < indent) {\n        capUid = rows[i].uid;\n        break;\n      }\n\n      if (rows[i].isCaptionRow && rows[i].isExpand) {\n        this.addClass(this.getNextChilds(i));\n      }\n    }\n\n    for (var i = trIdx + 1; i < trs.length; i++) {\n      if (trs[i].getAttribute('data-uid') === capUid) {\n        break;\n      } else if (trs[i].getAttribute('data-uid') === aggUid) {\n        remove(trs[i]);\n        break;\n      } else {\n        remove(trs[i]);\n        this.refRowsObj[page].splice(trIdx + 1, 1);\n      }\n    }\n\n    this.parent.notify(events.refreshExpandandCollapse, {\n      rows: this.refRowsObj[page]\n    });\n  };\n\n  GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n    var last = rows[this.blockSize];\n\n    if (last) {\n      last.lazyLoadCssClass = 'e-lazyload-middle-down';\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n    var group = this.groupCache[this.parent.pageSettings.currentPage];\n    var rows = rowObjects ? rowObjects : group;\n    var indent = group[index].indent + 1;\n    var childRows = [];\n\n    for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n      if (rows[i].indent < indent) {\n        break;\n      }\n\n      if (rows[i].indent === indent) {\n        childRows.push(rows[i]);\n      }\n    }\n\n    return childRows;\n  };\n\n  GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n    this.setStartIndexes();\n    var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n    var uid = tr.getAttribute('data-uid');\n    var captionIndex = this.getRowObjectIndexByUid(uid);\n    var captionRow = this.groupCache[this.parent.pageSettings.currentPage][captionIndex];\n    var rows = args.isRowExist ? args.isScroll ? this.scrollData : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n    this.scrollData = [];\n\n    if (!args.isRowExist) {\n      this.setRowIndexes(captionIndex, captionRow);\n      this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][captionIndex], args.count);\n\n      if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n        for (var i = 0; i < args.data.length; i++) {\n          var data = this.groupGenerator.generateCaptionRow(args.data[i], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n          rows.push(data);\n\n          if (this.parent.aggregates.length) {\n            rows = rows.concat(this.summaryModelGen.generateRows(args.data[i], {\n              level: args.level + 1,\n              parentUid: data.uid\n            }));\n          }\n        }\n      } else {\n        this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n        rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n      }\n    }\n\n    var trIdx = args.isScroll ? this.rowIndex : args.index;\n    var nxtChild = this.getNextChilds(captionIndex, rows);\n    var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n\n    if (!args.isRowExist && !lastRow) {\n      nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n    }\n\n    if (!lastRow) {\n      nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n    }\n\n    var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n\n    if (!args.up) {\n      if (!args.isRowExist) {\n        this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n      }\n    }\n\n    this.render(trIdx, rows, lastRow, aggregates);\n\n    if (this.isFirstChildRow && !args.up) {\n      this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n    }\n\n    this.isFirstChildRow = false;\n    this.rowIndex = undefined;\n    this.rowObjectIndex = undefined;\n    this.childCount = 0;\n\n    for (var i = 0; i < rows.length; i++) {\n      this.refRowsObj[this.parent.pageSettings.currentPage].splice(captionIndex + i + 1, 0, rows[i]);\n    }\n\n    this.parent.notify(events.refreshExpandandCollapse, {\n      rows: this.refRowsObj[this.parent.pageSettings.currentPage]\n    });\n  };\n\n  GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n    if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n      this.captionCounts[this.parent.pageSettings.currentPage] = {};\n    }\n\n    if (row.isCaptionRow) {\n      this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[page];\n\n    if (isScroll) {\n      return cache[this.rowObjectIndex].index + 1;\n    }\n\n    var count = 0;\n    var idx = 0;\n    var prevCapRow = this.getRowByUid(cache[capIdx].parentUid);\n\n    if (prevCapRow) {\n      idx = this.prevCaptionCount(prevCapRow);\n    }\n\n    if (cache[capIdx].indent > 0) {\n      for (var i = capIdx - 1; i >= 0; i--) {\n        if (cache[i].indent < cache[capIdx].indent) {\n          break;\n        }\n\n        if (cache[i].isCaptionRow && cache[i].indent === cache[capIdx].indent) {\n          count = count + cache[i].data.count;\n        }\n      }\n    }\n\n    var index = count + idx + this.startIndexes[page][cache[capIdx].parentGid];\n    return index;\n  };\n\n  GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[page];\n    var idx = 0;\n\n    for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n      if (cache[i].indent === 0) {\n        break;\n      }\n\n      if (cache[i].indent < prevCapRow.indent) {\n        break;\n      }\n\n      if (cache[i].isCaptionRow && cache[i].indent === prevCapRow.indent) {\n        var count = this.captionCounts[page][cache[i].uid];\n        idx = idx + (count ? count : cache[i].data.count);\n      }\n    }\n\n    var capRow = this.getRowByUid(prevCapRow.parentUid);\n\n    if (capRow) {\n      idx = idx + this.prevCaptionCount(capRow);\n    }\n\n    return idx;\n  };\n\n  GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n\n    if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n      var indexes = [];\n      var idx = void 0;\n\n      for (var i = 0; i < cache.length; i++) {\n        if (cache[i].isCaptionRow) {\n          if (!indexes.length) {\n            indexes.push(0);\n          } else {\n            indexes.push(cache[idx].data.count + indexes[indexes.length - 1]);\n          }\n\n          idx = i;\n        }\n      }\n\n      this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n    return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n  };\n\n  GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n    row.data.count = count;\n  };\n\n  GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n    var tr = this.parent.getContent().querySelectorAll('tr')[trIdx];\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var rowHeight = this.parent.getRowHeight();\n\n    if (tr && aggregates.length) {\n      for (var i = aggregates.length - 1; i >= 0; i--) {\n        tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[i], this.parent.getColumns()));\n      }\n    }\n\n    if (tr && rows.length) {\n      for (var i = rows.length - 1; i >= 0; i--) {\n        if (this.confirmRowRendering(rows[i])) {\n          tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[i], this.parent.getColumns()));\n\n          if (this.isScrollDown) {\n            scrollEle.scrollTop = scrollEle.scrollTop - rowHeight;\n          }\n\n          if (this.isScrollUp) {\n            scrollEle.scrollTop = scrollEle.scrollTop + rowHeight;\n          }\n        }\n      }\n    }\n\n    this.isScrollDown = false;\n    this.isScrollUp = false;\n  };\n  /**\n   * @param {Row<Column>} row - specifies the row\n   * @param {number} index - specifies the index\n   * @returns {void}\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n    var page = this.parent.pageSettings.currentPage;\n\n    if (!this.rowsByUid[page]) {\n      this.rowsByUid[page] = {};\n      this.objIdxByUid[page] = {};\n    }\n\n    if (row.uid) {\n      this.rowsByUid[page][row.uid] = row;\n    }\n\n    this.objIdxByUid[page][row.uid] = index;\n  };\n\n  GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n    var check = true;\n\n    if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n      var cap = this.getRowByUid(row.parentUid);\n\n      if (cap.isCaptionRow && !cap.isExpand) {\n        check = false;\n      }\n    }\n\n    return check;\n  };\n\n  GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n    var page = this.parent.pageSettings.currentPage;\n    var rowsObject = this.groupCache[page];\n    this.rowsByUid[page] = {};\n    this.objIdxByUid[page] = {};\n    var newRowsObject = [];\n    var k = 0;\n\n    for (var i = 0; i < rowsObject.length; i++) {\n      if (i === index) {\n        this.maintainRows(rowsObject[i], k);\n        newRowsObject.push(rowsObject[i]);\n        k++;\n\n        for (var j = 0; j < newRows.length; j++) {\n          this.maintainRows(newRows[j], k);\n          newRowsObject.push(newRows[j]);\n          k++;\n        }\n      } else {\n        this.maintainRows(rowsObject[i], k);\n        newRowsObject.push(rowsObject[i]);\n        k++;\n      }\n    }\n\n    this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n    this.updateCurrentViewData();\n  };\n\n  GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    var parent = cache[index];\n    var indent = parent.indent;\n    var uid = parent.uid;\n    var agg = [];\n\n    for (var i = index + 1; i < cache.length; i++) {\n      if (cache[i].indent === indent) {\n        break;\n      }\n\n      if (isNullOrUndefined(cache[i].indent) && cache[i].parentUid === uid) {\n        agg.push(cache[i]);\n      }\n    }\n\n    return agg;\n  };\n\n  GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n    var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n    var parentRow = cache[index];\n    var agg = [];\n\n    if (!parentRow.isCaptionRow || parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg) {\n      return [];\n    }\n\n    if (includeAgg && this.parent.aggregates.length) {\n      agg = this.getAggregateByCaptionIndex(index);\n    }\n\n    var indent = parentRow.indent;\n    var uid = parentRow.uid;\n    var rows = [];\n    var count = 0;\n\n    for (var i = index + 1; i < cache.length; i++) {\n      if (cache[i].parentUid === uid) {\n        if (isNullOrUndefined(cache[i].indent)) {\n          continue;\n        }\n\n        count++;\n        rows.push(cache[i]);\n\n        if (deep && cache[i].isCaptionRow) {\n          rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n        }\n\n        if (block && count === this.pageSize) {\n          break;\n        }\n      }\n\n      if (cache[i].indent === indent) {\n        break;\n      }\n    }\n\n    return rows.concat(agg);\n  };\n  /**\n   * @param {boolean} isReorder - specifies the isreorder\n   * @returns {Row<Column>[]} returns the row\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n    var rows = [];\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n\n    if (isReorder) {\n      return this.getRenderedRowsObject();\n    }\n\n    for (var i = 0; i < cache.length; i++) {\n      if (cache[i].indent === 0) {\n        rows.push(cache[i]);\n        rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n      }\n    }\n\n    return rows;\n  };\n  /**\n   * @returns {Row<Column>[]} retruns the row\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n    var rows = [];\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n\n    for (var i = 0; i < trs.length; i++) {\n      rows.push(this.getRowByUid(trs[i].getAttribute('data-uid')));\n    }\n\n    return rows;\n  };\n\n  GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n    var rows = [];\n    var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n    var k = index;\n\n    for (var i = 0; i < this.pageSize; i++) {\n      if (!rowsObject[k] || rowsObject[k].indent < rowsObject[index].indent) {\n        break;\n      }\n\n      if (rowsObject[k].indent === rowsObject[index].indent) {\n        rows.push(rowsObject[k]);\n\n        if (rowsObject[k].isCaptionRow && rowsObject[k].isExpand) {\n          rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n        }\n      }\n\n      if (rowsObject[k].indent > rowsObject[index].indent || isNullOrUndefined(rowsObject[k].indent)) {\n        i--;\n      }\n\n      k++;\n    }\n\n    return rows;\n  };\n\n  GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n    var rows = [];\n    var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n    var str = false;\n\n    for (var i = 0; i < rowsObject.length; i++) {\n      if (str && (!rowsObject[i] || rowsObject[i].indent < rowsObject[index].indent || rowsObject[i].uid === end)) {\n        break;\n      }\n\n      if (!str && rowsObject[i].uid === start) {\n        str = true;\n      }\n\n      if (str && rowsObject[i].indent === rowsObject[index].indent) {\n        rows.push(rowsObject[i]);\n\n        if (rowsObject[i].isCaptionRow && rowsObject[i].isExpand) {\n          rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n        }\n      }\n    }\n\n    return rows;\n  };\n\n  GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n    if (this.parent.isDestroyed || this.childCount) {\n      return;\n    }\n\n    var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n    var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n    var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n    var tr;\n    var lazyLoadDown = false;\n    var lazyLoadUp = false;\n    var lazyLoadEnd = false;\n\n    if (e.scrollDown && downTrs.length) {\n      var result = this.findRowElements(downTrs);\n      tr = result.tr;\n      lazyLoadDown = result.entered;\n    }\n\n    if (!e.scrollDown && endTrs) {\n      for (var i = 0; i < endTrs.length; i++) {\n        var top_1 = endTrs[i].getBoundingClientRect().top;\n        var scrollHeight = this.parent.getContent().scrollHeight;\n\n        if (top_1 > 0 && top_1 < scrollHeight) {\n          tr = endTrs[i];\n          lazyLoadEnd = true;\n          this.rowIndex = tr.rowIndex;\n          break;\n        }\n      }\n    }\n\n    if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n      var result = this.findRowElements(upTrs);\n      tr = result.tr;\n      lazyLoadUp = result.entered;\n    }\n\n    if (tr) {\n      if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n        this.scrollDownHandler(tr);\n      }\n\n      if (!e.scrollDown && lazyLoadEnd && tr) {\n        this.scrollUpEndRowHandler(tr);\n      }\n\n      if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n        this.scrollUpHandler(tr);\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n    var idx = index;\n    var childRow = rows[index];\n    var parentCapRow = this.getRowByUid(childRow.parentUid);\n    var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(childRow);\n    var currentPage = Math.ceil(childIdx / this.pageSize);\n\n    if (currentPage === 1) {\n      return;\n    }\n\n    this.childCount = currentPage * this.pageSize;\n    index = this.getCurrentBlockEndIndex(childRow, index);\n\n    if (this.childCount < parentCapRow.data.count) {\n      tr.classList.remove('e-not-lazyload-end');\n      childRow.lazyLoadCssClass = '';\n      var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n      this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n      var key = getGroupKeysAndFields(capRowObjIdx, rows);\n      var args = {\n        rowIndex: capRowEleIndex,\n        makeRequest: !isRowExist,\n        groupInfo: parentCapRow,\n        fields: key.fields,\n        keys: key.keys,\n        skip: this.childCount,\n        take: this.pageSize,\n        isScroll: true\n      };\n\n      if (this.cacheMode && this.childCount >= this.pageSize * this.cacheBlockSize) {\n        var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n        var currenBlock = Math.ceil(child_1.indexOf(rows[idx]) / this.pageSize);\n        var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n        this.removeBlock(uid, isRowExist, removeBlock, child_1);\n        args.cachedRowIndex = removeBlock * this.pageSize;\n      }\n\n      this.captionRowExpand(args);\n    } else {\n      this.childCount = 0;\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var index = this.getRowObjectIndexByUid(uid);\n    var idx = index;\n    var childRow = rows[index];\n    var parentCapRow = this.getRowByUid(childRow.parentUid);\n    var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(childRow);\n    var currentPage = Math.ceil(childIdx / this.pageSize);\n    this.childCount = currentPage * this.pageSize;\n    index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n    var lastchild = rows[index];\n    var lastRow = this.getRowElementByUid(lastchild.uid);\n    this.rowIndex = lastRow.rowIndex;\n    index = this.getCurrentBlockEndIndex(lastchild, index);\n\n    if (this.childCount < parentCapRow.data.count) {\n      var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n\n      if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n        this.childCount = 0;\n        return;\n      }\n\n      if (currentPage > 1 || !this.cacheMode) {\n        tr.classList.remove('e-lazyload-middle-down');\n        lastRow.classList.remove('e-not-lazyload-end');\n        lastchild.lazyLoadCssClass = '';\n      }\n\n      this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n      var query = getGroupKeysAndFields(capRowObjIdx, rows);\n      var args = {\n        rowIndex: capRowEleIndex,\n        makeRequest: !isRowExist,\n        groupInfo: parentCapRow,\n        fields: query.fields,\n        keys: query.keys,\n        skip: this.childCount,\n        take: this.pageSize,\n        isScroll: true\n      };\n\n      if (this.cacheMode && this.childCount - this.pageSize >= this.pageSize * this.cacheBlockSize) {\n        this.isScrollDown = true;\n        var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n        var currenBlock = Math.ceil(child_2.indexOf(rows[idx]) / this.pageSize) - 1;\n        var removeBlock = currenBlock - (this.cacheBlockSize - 1) + 1;\n        this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n        args.cachedRowIndex = removeBlock * this.pageSize;\n      }\n\n      this.captionRowExpand(args);\n    } else {\n      this.childCount = 0;\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n\n    if (row.isCaptionRow) {\n      if (row.isExpand) {\n        var childCount = this.getChildRowsByParentIndex(index, true).length;\n        this.rowIndex = this.rowIndex + childCount;\n      }\n\n      var agg = this.getAggregateByCaptionIndex(index);\n      this.rowObjectIndex = this.rowObjectIndex + agg.length;\n      var idx = index;\n\n      for (var i = idx + 1; i < rows.length; i++) {\n        if (rows[i].indent === rows[index].indent || rows[i].indent < rows[index].indent) {\n          index = idx;\n          break;\n        } else {\n          idx++;\n        }\n      }\n    }\n\n    return index;\n  };\n\n  GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid1 = child[(removeBlock + 1) * this.pageSize - 1 - this.blockSize].uid;\n    var uid2 = child[removeBlock * this.pageSize - this.pageSize].uid;\n    var uid3 = child[removeBlock * this.pageSize].uid;\n    var firstIdx = this.getRowObjectIndexByUid(uid1);\n    rows[firstIdx].lazyLoadCssClass = 'e-lazyload-middle-up';\n    this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n\n    if (lastchild) {\n      this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n      this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n      this.getRowByUid(uid2).lazyLoadCssClass = '';\n    }\n\n    if (isRowExist) {\n      this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n    } else {\n      this.uid1 = uid2;\n      this.uid2 = uid3;\n      this.uid3 = lastchild ? lastchild.uid : uid;\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var row = this.getRowByUid(uid);\n    var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n    var parentCapRow = this.getRowByUid(row.parentUid);\n    var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(rows[index]);\n    var currenBlock = Math.floor(childIdx / this.pageSize);\n    var idx = this.blockSize;\n\n    if (this.blockSize * 2 > this.pageSize) {\n      idx = this.blockSize * 2 - this.pageSize;\n      idx = this.blockSize - idx;\n    }\n\n    var start = child[childIdx - (idx - 1) - this.pageSize].uid;\n    var end = child[childIdx - (idx - 1)].uid;\n    this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n    this.isFirstChildRow = currenBlock > 1;\n\n    if (this.isFirstChildRow) {\n      this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n    }\n\n    this.getRowByUid(end).lazyLoadCssClass = '';\n    this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n    var removeBlock = currenBlock + this.cacheBlockSize;\n\n    if (child.length !== parentCapRow.data.count && removeBlock * this.pageSize > child.length) {\n      this.isFirstChildRow = false;\n      this.scrollData[0].lazyLoadCssClass = '';\n      this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n      return;\n    }\n\n    var count = removeBlock * this.pageSize > parentCapRow.data.count ? parentCapRow.data.count : removeBlock * this.pageSize;\n    var size = removeBlock * this.pageSize > parentCapRow.data.count ? this.pageSize - (this.pageSize * removeBlock - parentCapRow.data.count) : this.pageSize;\n    var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n    var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[count - 1].uid;\n    var uid2 = child[count - size].uid;\n    var uid3 = child[count - size - 1].uid;\n    var lastIdx = this.objIdxByUid[page][uid2] - idx;\n\n    if (rows[lastIdx].lazyLoadCssClass === 'e-lazyload-middle-down') {\n      var trEle = this.getRowElementByUid(rows[lastIdx].uid);\n\n      if (trEle) {\n        trEle.classList.add('e-lazyload-middle-down');\n      }\n    }\n\n    this.getRowByUid(uid1).lazyLoadCssClass = '';\n    this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n    this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n    this.removeBottomRows(uid1, uid2, uid3);\n    this.rowIndex = tr.rowIndex - idx;\n\n    if (tr.classList.length > 1) {\n      tr.classList.remove('e-lazyload-middle-up');\n    } else {\n      tr.removeAttribute('class');\n    }\n\n    if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n      this.childCount = 0;\n      this.scrollData = [];\n      return;\n    }\n\n    var key = getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n    var args = {\n      rowIndex: capRowEleIndex,\n      makeRequest: false,\n      groupInfo: parentCapRow,\n      fields: key.fields,\n      keys: key.keys,\n      skip: this.childCount,\n      take: this.pageSize,\n      isScroll: true,\n      scrollUp: true\n    };\n    this.isScrollUp = true;\n    this.captionRowExpand(args);\n  };\n\n  GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n    var entered = false;\n    var tr;\n\n    for (var i = 0; i < rows.length; i++) {\n      var rowIdx = rows[i].rowIndex;\n\n      if (isRowEnteredInGrid(rowIdx, this.parent)) {\n        entered = true;\n        this.rowIndex = rowIdx;\n        tr = rows[i];\n        break;\n      }\n    }\n\n    return {\n      entered: entered,\n      tr: tr\n    };\n  };\n\n  GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n    return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n  };\n\n  GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var start = false;\n\n    for (var i = 0; i < trs.length; i++) {\n      if (trs[i].getAttribute('data-uid') === uid3) {\n        var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n\n        if (tr) {\n          this.rowIndex = tr.rowIndex;\n        }\n\n        break;\n      }\n\n      if (trs[i].getAttribute('data-uid') === uid2) {\n        start = true;\n      }\n\n      if (start) {\n        remove(trs[i]);\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var trigger = false;\n\n    for (var i = 0; i < trs.length; i++) {\n      if (trs[i].getAttribute('data-uid') === uid2) {\n        trigger = true;\n      }\n\n      if (trigger) {\n        remove(trs[i]);\n\n        if (trs[i].getAttribute('data-uid') === uid1) {\n          break;\n        }\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.setCache = function (e) {\n    var page = this.parent.pageSettings.currentPage;\n    this.groupCache[page] = this.initialGroupCaptions[page] = extend([], e.data);\n  };\n\n  GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n    var _this = this;\n\n    var captionRow = args.groupInfo;\n    var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n    var pred = generateExpandPredicates(args.fields, args.keys, this);\n    var predicateList = getPredicates(pred);\n    var lazyLoad = {\n      level: level,\n      skip: args.skip,\n      take: args.take,\n      where: predicateList\n    };\n\n    if (args.makeRequest) {\n      var query = this.parent.renderModule.data.generateQuery(true);\n\n      if (!query.isCountRequired) {\n        query.isCountRequired = true;\n      }\n\n      query.lazyLoad.push({\n        key: 'onDemandGroupInfo',\n        value: lazyLoad\n      });\n      this.parent.showSpinner();\n      this.parent.renderModule.data.getData({}, query).then(function (e) {\n        _this.parent.hideSpinner();\n\n        if (e.result.length === 0) {\n          return;\n        }\n\n        if (_this.cacheMode && _this.uid1 && _this.uid2) {\n          _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n\n          _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n        }\n\n        _this.lazyLoadHandler({\n          data: e.result,\n          count: e.count,\n          level: level,\n          index: args.rowIndex,\n          isRowExist: false,\n          isScroll: args.isScroll,\n          up: false,\n          rowIndex: args.cachedRowIndex\n        });\n      }).catch(function (e) {\n        return _this.parent.renderModule.dataManagerFailure(e, {\n          requestType: 'grouping'\n        });\n      });\n    } else {\n      this.lazyLoadHandler({\n        data: null,\n        count: args.groupInfo.data.count,\n        level: level,\n        index: args.rowIndex,\n        isRowExist: true,\n        isScroll: args.isScroll,\n        up: args.scrollUp,\n        rowIndex: args.cachedRowIndex\n      });\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n    this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n  };\n\n  GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n    var records = [];\n    this.getRows().filter(function (row) {\n      if (row.isDataRow) {\n        records[row.index] = row.data;\n      }\n    });\n    this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n  };\n  /**\n   * @returns {Row<Column>[]} returns the row\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n    return this.groupCache;\n  };\n  /**\n   * @returns {Row<Column>[]} returns the row\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.getRows = function () {\n    return this.groupCache[this.parent.pageSettings.currentPage] || [];\n  };\n  /**\n   * @returns {Element} returns the element\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.getRowElements = function () {\n    return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n  };\n  /**\n   * @param {number} index - specifies the index\n   * @returns {Element} returns the element\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n    var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    var row;\n\n    for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n      if (tr[i].getAttribute(literals.ariaRowIndex) === index.toString()) {\n        row = tr[i];\n        break;\n      }\n    }\n\n    return row;\n  };\n  /**\n   * Tucntion to set the column visibility\n   *\n   * @param {Column[]} columns - specifies the column\n   * @returns {void}\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var rows = this.getRows();\n    var testRow;\n    rows.some(function (r) {\n      if (r.isDataRow) {\n        testRow = r;\n      }\n\n      return r.isDataRow;\n    });\n    var contentrows = this.getRows().filter(function (row) {\n      return !row.isDetailRow;\n    });\n\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[i];\n      var idx = this.parent.getNormalizedColumnIndex(column.uid);\n      var colIdx = this.parent.getColumnIndexByUid(column.uid);\n      var displayVal = column.visible === true ? '' : 'none';\n\n      if (idx !== -1 && testRow && idx < testRow.cells.length) {\n        setStyleAttribute(this.getColGroup().childNodes[idx], {\n          'display': displayVal\n        });\n      }\n\n      this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n\n      if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n        this.parent.updateMediaColumns(column);\n      }\n\n      this.parent.invokedFromMedia = false;\n    }\n  };\n  /**\n   * Function to set display.\n   *\n   * @param {Object} tr - specifies the row object\n   * @param {number} idx - specifies the index\n   * @param {string} displayVal - specifies the display value\n   * @param {Row<Column>[]} rows - specifies the array of rows\n   * @param {number} oriIdx - specifies the index\n   * @returns {void}\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n    if (!this.parent.groupSettings.columns.length) {\n      setDisplayValue(tr, idx, displayVal, rows);\n    } else {\n      var keys = Object.keys(this.groupCache);\n\n      for (var j = 0; j < keys.length; j++) {\n        var uids = this.rowsByUid[keys[j]];\n        var idxs = Object.keys(uids);\n\n        for (var i = 0; i < idxs.length; i++) {\n          var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[i] + ']');\n          var row = uids[idxs[i]];\n\n          if (row.isCaptionRow) {\n            if (!this.captionModelGen.isEmpty()) {\n              this.changeCaptionRow(row, tr_1, keys[j]);\n            } else {\n              row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1 : row.cells[row.indent + 1].colSpan - 1;\n\n              if (tr_1) {\n                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n              }\n            }\n          }\n\n          if (row.isDataRow) {\n            this.showAndHideCells(tr_1, idx, displayVal, false);\n            row.cells[oriIdx].visible = displayVal === '' ? true : false;\n          }\n\n          if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n            row.cells[oriIdx].visible = displayVal === '' ? true : false;\n            row.visible = row.cells.some(function (cell) {\n              return cell.isDataCell && cell.visible;\n            });\n            this.showAndHideCells(tr_1, idx, displayVal, true, row);\n          }\n        }\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n    var capRow = row;\n    var captionData = row.data;\n    var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n    data.uid = row.uid;\n    data.isExpand = row.isExpand;\n    data.lazyLoadCssClass = row.lazyLoadCssClass;\n    this.rowsByUid[index][row.uid] = data;\n    this.groupCache[index][this.objIdxByUid[index][row.uid]] = data;\n\n    if (tr) {\n      var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n      tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n    if (tr) {\n      var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n      setStyleAttribute(tr.querySelectorAll(cls)[idx], {\n        'display': displayVal\n      });\n\n      if (tr.querySelectorAll(cls)[idx].classList.contains('e-hide')) {\n        removeClass([tr.querySelectorAll(cls)[idx]], ['e-hide']);\n      }\n\n      if (isSummary) {\n        if (row.visible && tr.classList.contains('e-hide')) {\n          removeClass([tr], ['e-hide']);\n        } else if (!row.visible) {\n          addClass([tr], ['e-hide']);\n        }\n      }\n    }\n  };\n\n  return GroupLazyLoadRenderer;\n}(ContentRender);\n\nexport { GroupLazyLoadRenderer };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","remove","isNullOrUndefined","setStyleAttribute","removeClass","addClass","ContentRender","events","isRowEnteredInGrid","parentsUntil","setDisplayValue","generateExpandPredicates","getPredicates","getGroupKeysAndFields","RowRenderer","GroupModelGenerator","GroupSummaryModelGenerator","CaptionSummaryModelGenerator","literals","GroupLazyLoadRenderer","_super","parent","locator","_this","call","childCount","scrollData","isFirstChildRow","isScrollDown","isScrollUp","groupCache","startIndexes","captionCounts","rowsByUid","objIdxByUid","initialGroupCaptions","requestType","refRowsObj","cacheMode","cacheBlockSize","ignoreAccent","allowFiltering","filterSettings","allowCaseSensitive","groupGenerator","summaryModelGen","captionModelGen","rowRenderer","eventListener","addEventListener","actionBegin","bind","actionComplete","on","initialEnd","setLazyLoadPageSize","setGroupCache","setCache","lazyLoadScrollHandler","scrollHandler","columnVisibilityChanged","setVisible","groupCollapse","collapseShortcut","captionExpand","tr","page","pageSettings","currentPage","rowsObject","uid","getAttribute","oriIndex","getRowObjectIndexByUid","isRowExist","indent","data","key","e","captionRowElement","groupInfo","enableCaching","cancel","trigger","lazyLoadGroupExpand","args","keys","fields","rowIndex","makeRequest","clearCache","skip","take","pageSize","isExpand","captionRowExpand","captionCollapse","cache","rowIdx","captionIndex","lazyLoadGroupCollapse","removeRows","scrollEle","getContent","firstElementChild","blockSize","Math","floor","offsetHeight","getRowHeight","ceil","clearLazyGroupCache","uids","getInitialCaptionIndexes","length","i","capIdx","capRow","i_1","isCaptionRow","getRowElementByUID","groupModule","expandCollapseRows","querySelector","child","getNextChilds","subChild","getChildRowsByParentIndex","indexOf","start","end","splice","refreshCaches","maintainRows","push","groupSettings","columns","target","content","parentElement","tagName","collapse","row","rowObj","getRowByUid","parentUid","capEle","getRowElementByUid","cells","some","value","resetRowMaintenance","j","isEmpty","changeCaptionRow","isDataRow","from","fromIndex","to","toIndex","moveCells","action","scrollReset","arr","k","undefined","idx","trIdx","rows","trs","slice","querySelectorAll","aggUid","aggregates","agg","getAggregateByCaptionIndex","capUid","notify","refreshExpandandCollapse","last","lazyLoadCssClass","index","rowObjects","group","childRows","lazyLoadHandler","setStartIndexes","captionRow","isScroll","setRowIndexes","refreshCaptionRowCount","count","generateCaptionRow","level","parentGid","concat","generateRows","getStartIndex","generateDataRows","nxtChild","lastRow","up","hasLastChildRow","refreshRowObjects","rowObjectIndex","render","scrollTop","prevCapRow","prevCaptionCount","indexes","captionCount","rowCount","rowHeight","insertAdjacentElement","getColumns","confirmRowRendering","check","cap","newRows","newRowsObject","updateCurrentViewData","deep","block","includeAgg","includeCollapseAgg","parentRow","initialGroupRows","isReorder","getRenderedRowsObject","getCacheRowsOnDownScroll","getCacheRowsOnUpScroll","str","isDestroyed","downTrs","getElementsByClassName","upTrs","endTrs","lazyLoadDown","lazyLoadUp","lazyLoadEnd","scrollDown","result","findRowElements","entered","top_1","getBoundingClientRect","top","scrollHeight","scrollDownHandler","scrollUpEndRowHandler","scrollUpHandler","childRow","parentCapRow","capRowObjIdx","captionRowEle","capRowEleIndex","childIdx","getCurrentBlockEndIndex","classList","child_1","currenBlock","removeBlock","cachedRowIndex","lastchild","query","child_2","uid1","uid2","uid3","firstIdx","add","removeTopRows","size","lastIdx","trEle","removeBottomRows","removeAttribute","scrollUp","field","pred","predicateList","lazyLoad","where","renderModule","generateQuery","isCountRequired","showSpinner","getData","then","hideSpinner","catch","dataManagerFailure","records","getRows","filter","currentViewData","getGroupCache","getRowElements","getRowByIndex","ariaRowIndex","toString","gObj","testRow","r","contentrows","isDetailRow","column","getNormalizedColumnIndex","colIdx","getColumnIndexByUid","displayVal","visible","getColGroup","childNodes","setDisplayNone","getDataRows","invokedFromMedia","hideAtMedia","updateMediaColumns","oriIdx","idxs","tr_1","colSpan","showAndHideCells","cell","isDataCell","captionData","tIndex","tbody","getContentTable","replaceChild","isSummary","cls","contains"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-grids/src/grid/renderer/group-lazy-load-renderer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue, generateExpandPredicates, getPredicates, getGroupKeysAndFields } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */ (function (_super) {\n    __extends(GroupLazyLoadRenderer, _super);\n    function GroupLazyLoadRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.childCount = 0;\n        _this.scrollData = [];\n        _this.isFirstChildRow = false;\n        _this.isScrollDown = false;\n        _this.isScrollUp = false;\n        _this.groupCache = {};\n        _this.startIndexes = {};\n        _this.captionCounts = {};\n        _this.rowsByUid = {};\n        _this.objIdxByUid = {};\n        _this.initialGroupCaptions = {};\n        _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete',\n            'filterbeforeopen', 'filterchoicerequest'];\n        /** @hidden */\n        _this.refRowsObj = {};\n        /** @hidden */\n        _this.cacheMode = false;\n        /** @hidden */\n        _this.cacheBlockSize = 5;\n        /** @hidden */\n        _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n        /** @hidden */\n        _this.allowCaseSensitive = false;\n        _this.locator = locator;\n        _this.groupGenerator = new GroupModelGenerator(_this.parent);\n        _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n        _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n        _this.eventListener();\n        return _this;\n    }\n    GroupLazyLoadRenderer.prototype.eventListener = function () {\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n        this.parent.on(events.setGroupCache, this.setCache, this);\n        this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n        var _this = this;\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var oriIndex = this.getRowObjectIndexByUid(uid);\n        var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[oriIndex].indent < rowsObject[oriIndex + 1].indent : false;\n        var data = rowsObject[oriIndex];\n        var key = getGroupKeysAndFields(oriIndex, rowsObject);\n        var e = { captionRowElement: tr, groupInfo: data, enableCaching: true, cancel: false };\n        this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.keys = key.keys;\n            args.fields = key.fields;\n            args.rowIndex = tr.rowIndex;\n            args.makeRequest = !args.enableCaching || !isRowExist;\n            if (!args.enableCaching && isRowExist) {\n                _this.clearCache([uid]);\n            }\n            args.skip = 0;\n            args.take = _this.pageSize;\n            data.isExpand = _this.rowsByUid[page][data.uid].isExpand = true;\n            _this.captionRowExpand(args);\n        });\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n        var _this = this;\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var rowIdx = tr.rowIndex;\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var e = {\n            captionRowElement: tr, groupInfo: cache[captionIndex], cancel: false\n        };\n        this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.isExpand = false;\n            _this.removeRows(captionIndex, rowIdx);\n        });\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n        this.blockSize = Math.ceil(this.pageSize / 2);\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n        this.clearCache();\n    };\n    GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n        uids = uids ? uids : this.getInitialCaptionIndexes();\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (uids.length) {\n            for (var i = 0; i < uids.length; i++) {\n                var capIdx = this.getRowObjectIndexByUid(uids[i]);\n                var capRow = cache[capIdx];\n                if (!capRow) {\n                    continue;\n                }\n                if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n                    for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n                        if (cache[i_1].indent === capRow.indent || cache[i_1].indent < capRow.indent) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n                            break;\n                        }\n                        if (cache[i_1].isCaptionRow) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][cache[i_1].uid];\n                        }\n                    }\n                }\n                if (capRow.isExpand) {\n                    var tr = this.parent.getRowElementByUID(capRow.uid);\n                    if (!tr) {\n                        return;\n                    }\n                    this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n                }\n                var child = this.getNextChilds(capIdx);\n                if (!child.length) {\n                    continue;\n                }\n                var subChild = [];\n                if (child[child.length - 1].isCaptionRow) {\n                    subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n                }\n                var start = cache.indexOf(child[0]);\n                var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n                cache.splice(start, end - (start - 1));\n                this.refreshCaches();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        for (var i = 0; i < cache.length; i++) {\n            this.maintainRows(cache[i], i);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var uids = [];\n        for (var i = 0; i < this.initialGroupCaptions[page].length; i++) {\n            uids.push(this.initialGroupCaptions[page][i].uid);\n        }\n        return uids;\n    };\n    /**\n     * @param {string} uid - specifies the uid\n     * @returns {number} returns the row object uid\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n        return this.objIdxByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n        if (this.parent.groupSettings.columns.length &&\n            args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n            if (!args.collapse && parentsUntil(args.target, literals.row)) {\n                return;\n            }\n            var row = args.target.parentElement;\n            var uid = row.getAttribute('data-uid');\n            if (args.collapse) {\n                var rowObj = this.getRowByUid(uid);\n                var capRow = this.getRowByUid(rowObj.parentUid);\n                if (capRow.isCaptionRow && capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(rowObj.parentUid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n                }\n            }\n            else {\n                var capRow = this.getRowByUid(uid);\n                if (capRow.isCaptionRow && !capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(uid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n        return this.rowsByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n        if (!args.cancel) {\n            if (!this.requestType.some(function (value) { return value === args.requestType; })) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n            if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n                var keys = Object.keys(this.groupCache);\n                for (var j = 0; j < keys.length; j++) {\n                    var cache = this.groupCache[keys[j]];\n                    for (var i = 0; i < cache.length; i++) {\n                        if (cache[i].isCaptionRow && !this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(cache[i], null, keys[j]);\n                        }\n                        if (cache[i].isDataRow) {\n                            var from = args.fromIndex + cache[i].indent;\n                            var to = args.toIndex + cache[i].indent;\n                            this.moveCells(cache[i].cells, from, to);\n                        }\n                    }\n                }\n            }\n            if (args.requestType === 'delete'\n                || (args.action === 'add' && args.requestType === 'save')) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n        if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit'\n            && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n            this.scrollReset();\n        }\n    };\n    GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n        this.startIndexes = {};\n        this.captionCounts = {};\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        this.initialGroupCaptions = {};\n    };\n    GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n        if (from >= arr.length) {\n            var k = from - arr.length;\n            while ((k--) + 1) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(from, 0, arr.splice(to, 1)[0]);\n    };\n    GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var aggUid;\n        if (this.parent.aggregates.length) {\n            var agg = this.getAggregateByCaptionIndex(idx);\n            aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n        }\n        var indent = rows[idx].indent;\n        this.addClass(this.getNextChilds(idx));\n        rows[idx].isExpand = this.rowsByUid[page][rows[idx].uid].isExpand = false;\n        var capUid;\n        for (var i = idx + 1; i < rows.length; i++) {\n            if (rows[i].indent === indent || rows[i].indent < indent) {\n                capUid = rows[i].uid;\n                break;\n            }\n            if (rows[i].isCaptionRow && rows[i].isExpand) {\n                this.addClass(this.getNextChilds(i));\n            }\n        }\n        for (var i = trIdx + 1; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === capUid) {\n                break;\n            }\n            else if (trs[i].getAttribute('data-uid') === aggUid) {\n                remove(trs[i]);\n                break;\n            }\n            else {\n                remove(trs[i]);\n                this.refRowsObj[page].splice(trIdx + 1, 1);\n            }\n        }\n        this.parent.notify(events.refreshExpandandCollapse, { rows: this.refRowsObj[page] });\n    };\n    GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n        var last = rows[this.blockSize];\n        if (last) {\n            last.lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n        var group = this.groupCache[this.parent.pageSettings.currentPage];\n        var rows = rowObjects ? rowObjects : group;\n        var indent = group[index].indent + 1;\n        var childRows = [];\n        for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n            if (rows[i].indent < indent) {\n                break;\n            }\n            if (rows[i].indent === indent) {\n                childRows.push(rows[i]);\n            }\n        }\n        return childRows;\n    };\n    GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n        this.setStartIndexes();\n        var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var captionRow = this.groupCache[this.parent.pageSettings.currentPage][captionIndex];\n        var rows = args.isRowExist ? args.isScroll ? this.scrollData\n            : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n        this.scrollData = [];\n        if (!args.isRowExist) {\n            this.setRowIndexes(captionIndex, captionRow);\n            this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][captionIndex], args.count);\n            if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n                for (var i = 0; i < args.data.length; i++) {\n                    var data = this.groupGenerator.generateCaptionRow(args.data[i], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n                    rows.push(data);\n                    if (this.parent.aggregates.length) {\n                        rows = rows.concat((this.summaryModelGen.generateRows(args.data[i], { level: args.level + 1, parentUid: data.uid })));\n                    }\n                }\n            }\n            else {\n                this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n                rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n            }\n        }\n        var trIdx = args.isScroll ? this.rowIndex : args.index;\n        var nxtChild = this.getNextChilds(captionIndex, rows);\n        var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n        if (!args.isRowExist && !lastRow) {\n            nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n        if (!lastRow) {\n            nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n        }\n        var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n        if (!args.up) {\n            if (!args.isRowExist) {\n                this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n            }\n        }\n        this.render(trIdx, rows, lastRow, aggregates);\n        if (this.isFirstChildRow && !args.up) {\n            this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n        }\n        this.isFirstChildRow = false;\n        this.rowIndex = undefined;\n        this.rowObjectIndex = undefined;\n        this.childCount = 0;\n        for (var i = 0; i < rows.length; i++) {\n            this.refRowsObj[this.parent.pageSettings.currentPage].splice(captionIndex + i + 1, 0, rows[i]);\n        }\n        this.parent.notify(events.refreshExpandandCollapse, { rows: this.refRowsObj[this.parent.pageSettings.currentPage] });\n    };\n    GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n        if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n            this.captionCounts[this.parent.pageSettings.currentPage] = {};\n        }\n        if (row.isCaptionRow) {\n            this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        if (isScroll) {\n            return cache[this.rowObjectIndex].index + 1;\n        }\n        var count = 0;\n        var idx = 0;\n        var prevCapRow = this.getRowByUid(cache[capIdx].parentUid);\n        if (prevCapRow) {\n            idx = this.prevCaptionCount(prevCapRow);\n        }\n        if (cache[capIdx].indent > 0) {\n            for (var i = capIdx - 1; i >= 0; i--) {\n                if (cache[i].indent < cache[capIdx].indent) {\n                    break;\n                }\n                if (cache[i].isCaptionRow && cache[i].indent === cache[capIdx].indent) {\n                    count = count + cache[i].data.count;\n                }\n            }\n        }\n        var index = count + idx + this.startIndexes[page][cache[capIdx].parentGid];\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        var idx = 0;\n        for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n            if (cache[i].indent === 0) {\n                break;\n            }\n            if (cache[i].indent < prevCapRow.indent) {\n                break;\n            }\n            if (cache[i].isCaptionRow && cache[i].indent === prevCapRow.indent) {\n                var count = this.captionCounts[page][cache[i].uid];\n                idx = idx + (count ? count : cache[i].data.count);\n            }\n        }\n        var capRow = this.getRowByUid(prevCapRow.parentUid);\n        if (capRow) {\n            idx = idx + this.prevCaptionCount(capRow);\n        }\n        return idx;\n    };\n    GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n            var indexes = [];\n            var idx = void 0;\n            for (var i = 0; i < cache.length; i++) {\n                if (cache[i].isCaptionRow) {\n                    if (!indexes.length) {\n                        indexes.push(0);\n                    }\n                    else {\n                        indexes.push(cache[idx].data.count + indexes[indexes.length - 1]);\n                    }\n                    idx = i;\n                }\n            }\n            this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n        return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n        row.data.count = count;\n    };\n    GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n        var tr = this.parent.getContent().querySelectorAll('tr')[trIdx];\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var rowHeight = this.parent.getRowHeight();\n        if (tr && aggregates.length) {\n            for (var i = aggregates.length - 1; i >= 0; i--) {\n                tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[i], this.parent.getColumns()));\n            }\n        }\n        if (tr && rows.length) {\n            for (var i = rows.length - 1; i >= 0; i--) {\n                if (this.confirmRowRendering(rows[i])) {\n                    tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[i], this.parent.getColumns()));\n                    if (this.isScrollDown) {\n                        scrollEle.scrollTop = scrollEle.scrollTop - rowHeight;\n                    }\n                    if (this.isScrollUp) {\n                        scrollEle.scrollTop = scrollEle.scrollTop + rowHeight;\n                    }\n                }\n            }\n        }\n        this.isScrollDown = false;\n        this.isScrollUp = false;\n    };\n    /**\n     * @param {Row<Column>} row - specifies the row\n     * @param {number} index - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        if (!this.rowsByUid[page]) {\n            this.rowsByUid[page] = {};\n            this.objIdxByUid[page] = {};\n        }\n        if (row.uid) {\n            this.rowsByUid[page][row.uid] = row;\n        }\n        this.objIdxByUid[page][row.uid] = index;\n    };\n    GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n        var check = true;\n        if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n            var cap = this.getRowByUid(row.parentUid);\n            if (cap.isCaptionRow && !cap.isExpand) {\n                check = false;\n            }\n        }\n        return check;\n    };\n    GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        this.rowsByUid[page] = {};\n        this.objIdxByUid[page] = {};\n        var newRowsObject = [];\n        var k = 0;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (i === index) {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n                for (var j = 0; j < newRows.length; j++) {\n                    this.maintainRows(newRows[j], k);\n                    newRowsObject.push(newRows[j]);\n                    k++;\n                }\n            }\n            else {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n            }\n        }\n        this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n        this.updateCurrentViewData();\n    };\n    GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var parent = cache[index];\n        var indent = parent.indent;\n        var uid = parent.uid;\n        var agg = [];\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].indent === indent) {\n                break;\n            }\n            if (isNullOrUndefined(cache[i].indent) && cache[i].parentUid === uid) {\n                agg.push(cache[i]);\n            }\n        }\n        return agg;\n    };\n    GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n        var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n        var parentRow = cache[index];\n        var agg = [];\n        if (!parentRow.isCaptionRow || (parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg)) {\n            return [];\n        }\n        if (includeAgg && this.parent.aggregates.length) {\n            agg = this.getAggregateByCaptionIndex(index);\n        }\n        var indent = parentRow.indent;\n        var uid = parentRow.uid;\n        var rows = [];\n        var count = 0;\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].parentUid === uid) {\n                if (isNullOrUndefined(cache[i].indent)) {\n                    continue;\n                }\n                count++;\n                rows.push(cache[i]);\n                if (deep && cache[i].isCaptionRow) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n                }\n                if (block && count === this.pageSize) {\n                    break;\n                }\n            }\n            if (cache[i].indent === indent) {\n                break;\n            }\n        }\n        return rows.concat(agg);\n    };\n    /**\n     * @param {boolean} isReorder - specifies the isreorder\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n        var rows = [];\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (isReorder) {\n            return this.getRenderedRowsObject();\n        }\n        for (var i = 0; i < cache.length; i++) {\n            if (cache[i].indent === 0) {\n                rows.push(cache[i]);\n                rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n            }\n        }\n        return rows;\n    };\n    /**\n     * @returns {Row<Column>[]} retruns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n        var rows = [];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        for (var i = 0; i < trs.length; i++) {\n            rows.push(this.getRowByUid(trs[i].getAttribute('data-uid')));\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var k = index;\n        for (var i = 0; i < this.pageSize; i++) {\n            if (!rowsObject[k] || rowsObject[k].indent < rowsObject[index].indent) {\n                break;\n            }\n            if (rowsObject[k].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[k]);\n                if (rowsObject[k].isCaptionRow && rowsObject[k].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n                }\n            }\n            if (rowsObject[k].indent > rowsObject[index].indent || isNullOrUndefined(rowsObject[k].indent)) {\n                i--;\n            }\n            k++;\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var str = false;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (str && (!rowsObject[i] || rowsObject[i].indent < rowsObject[index].indent || rowsObject[i].uid === end)) {\n                break;\n            }\n            if (!str && rowsObject[i].uid === start) {\n                str = true;\n            }\n            if (str && rowsObject[i].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[i]);\n                if (rowsObject[i].isCaptionRow && rowsObject[i].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n                }\n            }\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n        if (this.parent.isDestroyed || this.childCount) {\n            return;\n        }\n        var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n        var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n        var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n        var tr;\n        var lazyLoadDown = false;\n        var lazyLoadUp = false;\n        var lazyLoadEnd = false;\n        if (e.scrollDown && downTrs.length) {\n            var result = this.findRowElements(downTrs);\n            tr = result.tr;\n            lazyLoadDown = result.entered;\n        }\n        if (!e.scrollDown && endTrs) {\n            for (var i = 0; i < endTrs.length; i++) {\n                var top_1 = endTrs[i].getBoundingClientRect().top;\n                var scrollHeight = this.parent.getContent().scrollHeight;\n                if (top_1 > 0 && top_1 < scrollHeight) {\n                    tr = endTrs[i];\n                    lazyLoadEnd = true;\n                    this.rowIndex = tr.rowIndex;\n                    break;\n                }\n            }\n        }\n        if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n            var result = this.findRowElements(upTrs);\n            tr = result.tr;\n            lazyLoadUp = result.entered;\n        }\n        if (tr) {\n            if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n                this.scrollDownHandler(tr);\n            }\n            if (!e.scrollDown && lazyLoadEnd && tr) {\n                this.scrollUpEndRowHandler(tr);\n            }\n            if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n                this.scrollUpHandler(tr);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        if (currentPage === 1) {\n            return;\n        }\n        this.childCount = currentPage * this.pageSize;\n        index = this.getCurrentBlockEndIndex(childRow, index);\n        if (this.childCount < parentCapRow.data.count) {\n            tr.classList.remove('e-not-lazyload-end');\n            childRow.lazyLoadCssClass = '';\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n            var key = getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: key.fields,\n                keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && this.childCount >= (this.pageSize * this.cacheBlockSize)) {\n                var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_1.indexOf(rows[idx]) / this.pageSize));\n                var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n                this.removeBlock(uid, isRowExist, removeBlock, child_1);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        this.childCount = currentPage * this.pageSize;\n        index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n        var lastchild = rows[index];\n        var lastRow = this.getRowElementByUid(lastchild.uid);\n        this.rowIndex = lastRow.rowIndex;\n        index = this.getCurrentBlockEndIndex(lastchild, index);\n        if (this.childCount < parentCapRow.data.count) {\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n                this.childCount = 0;\n                return;\n            }\n            if (currentPage > 1 || !this.cacheMode) {\n                tr.classList.remove('e-lazyload-middle-down');\n                lastRow.classList.remove('e-not-lazyload-end');\n                lastchild.lazyLoadCssClass = '';\n            }\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n            var query = getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: query.fields,\n                keys: query.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && (this.childCount - this.pageSize) >= (this.pageSize * this.cacheBlockSize)) {\n                this.isScrollDown = true;\n                var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_2.indexOf(rows[idx]) / this.pageSize)) - 1;\n                var removeBlock = (currenBlock - (this.cacheBlockSize - 1)) + 1;\n                this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        if (row.isCaptionRow) {\n            if (row.isExpand) {\n                var childCount = this.getChildRowsByParentIndex(index, true).length;\n                this.rowIndex = this.rowIndex + childCount;\n            }\n            var agg = this.getAggregateByCaptionIndex(index);\n            this.rowObjectIndex = this.rowObjectIndex + agg.length;\n            var idx = index;\n            for (var i = idx + 1; i < rows.length; i++) {\n                if (rows[i].indent === rows[index].indent || rows[i].indent < rows[index].indent) {\n                    index = idx;\n                    break;\n                }\n                else {\n                    idx++;\n                }\n            }\n        }\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid1 = child[(((removeBlock + 1) * this.pageSize) - 1) - this.blockSize].uid;\n        var uid2 = child[(removeBlock * this.pageSize) - this.pageSize].uid;\n        var uid3 = child[(removeBlock * this.pageSize)].uid;\n        var firstIdx = this.getRowObjectIndexByUid(uid1);\n        rows[firstIdx].lazyLoadCssClass = 'e-lazyload-middle-up';\n        this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n        if (lastchild) {\n            this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n            this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n            this.getRowByUid(uid2).lazyLoadCssClass = '';\n        }\n        if (isRowExist) {\n            this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n        }\n        else {\n            this.uid1 = uid2;\n            this.uid2 = uid3;\n            this.uid3 = lastchild ? lastchild.uid : uid;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var row = this.getRowByUid(uid);\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var parentCapRow = this.getRowByUid(row.parentUid);\n        var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(rows[index]);\n        var currenBlock = Math.floor((childIdx / this.pageSize));\n        var idx = this.blockSize;\n        if ((this.blockSize * 2) > this.pageSize) {\n            idx = (this.blockSize * 2) - this.pageSize;\n            idx = this.blockSize - idx;\n        }\n        var start = child[(childIdx - (idx - 1)) - this.pageSize].uid;\n        var end = child[childIdx - (idx - 1)].uid;\n        this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n        this.isFirstChildRow = currenBlock > 1;\n        if (this.isFirstChildRow) {\n            this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n        }\n        this.getRowByUid(end).lazyLoadCssClass = '';\n        this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n        var removeBlock = currenBlock + this.cacheBlockSize;\n        if (child.length !== parentCapRow.data.count && (removeBlock * this.pageSize > child.length)) {\n            this.isFirstChildRow = false;\n            this.scrollData[0].lazyLoadCssClass = '';\n            this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n            return;\n        }\n        var count = removeBlock * this.pageSize > parentCapRow.data.count\n            ? parentCapRow.data.count : removeBlock * this.pageSize;\n        var size = removeBlock * this.pageSize > parentCapRow.data.count\n            ? (this.pageSize - ((this.pageSize * removeBlock) - parentCapRow.data.count)) : this.pageSize;\n        var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n        var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[(count - 1)].uid;\n        var uid2 = child[count - size].uid;\n        var uid3 = child[(count - size) - 1].uid;\n        var lastIdx = this.objIdxByUid[page][uid2] - idx;\n        if (rows[lastIdx].lazyLoadCssClass === 'e-lazyload-middle-down') {\n            var trEle = this.getRowElementByUid(rows[lastIdx].uid);\n            if (trEle) {\n                trEle.classList.add('e-lazyload-middle-down');\n            }\n        }\n        this.getRowByUid(uid1).lazyLoadCssClass = '';\n        this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n        this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n        this.removeBottomRows(uid1, uid2, uid3);\n        this.rowIndex = tr.rowIndex - idx;\n        if (tr.classList.length > 1) {\n            tr.classList.remove('e-lazyload-middle-up');\n        }\n        else {\n            tr.removeAttribute('class');\n        }\n        if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n            this.childCount = 0;\n            this.scrollData = [];\n            return;\n        }\n        var key = getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n        var args = {\n            rowIndex: capRowEleIndex, makeRequest: false, groupInfo: parentCapRow, fields: key.fields,\n            keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true, scrollUp: true\n        };\n        this.isScrollUp = true;\n        this.captionRowExpand(args);\n    };\n    GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n        var entered = false;\n        var tr;\n        for (var i = 0; i < rows.length; i++) {\n            var rowIdx = rows[i].rowIndex;\n            if (isRowEnteredInGrid(rowIdx, this.parent)) {\n                entered = true;\n                this.rowIndex = rowIdx;\n                tr = rows[i];\n                break;\n            }\n        }\n        return { entered: entered, tr: tr };\n    };\n    GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n        return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n    };\n    GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var start = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid3) {\n                var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n                if (tr) {\n                    this.rowIndex = tr.rowIndex;\n                }\n                break;\n            }\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                start = true;\n            }\n            if (start) {\n                remove(trs[i]);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var trigger = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                trigger = true;\n            }\n            if (trigger) {\n                remove(trs[i]);\n                if (trs[i].getAttribute('data-uid') === uid1) {\n                    break;\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.setCache = function (e) {\n        var page = this.parent.pageSettings.currentPage;\n        this.groupCache[page] = this.initialGroupCaptions[page] = extend([], e.data);\n    };\n    GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n        var _this = this;\n        var captionRow = args.groupInfo;\n        var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n        var pred = generateExpandPredicates(args.fields, args.keys, this);\n        var predicateList = getPredicates(pred);\n        var lazyLoad = { level: level, skip: args.skip, take: args.take, where: predicateList };\n        if (args.makeRequest) {\n            var query = this.parent.renderModule.data.generateQuery(true);\n            if (!query.isCountRequired) {\n                query.isCountRequired = true;\n            }\n            query.lazyLoad.push({ key: 'onDemandGroupInfo', value: lazyLoad });\n            this.parent.showSpinner();\n            this.parent.renderModule.data.getData({}, query).then(function (e) {\n                _this.parent.hideSpinner();\n                if (e.result.length === 0) {\n                    return;\n                }\n                if (_this.cacheMode && _this.uid1 && _this.uid2) {\n                    _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n                    _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n                }\n                _this.lazyLoadHandler({\n                    data: e.result, count: e.count, level: level, index: args.rowIndex,\n                    isRowExist: false, isScroll: args.isScroll, up: false, rowIndex: args.cachedRowIndex\n                });\n            })\n                .catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e, { requestType: 'grouping' }); });\n        }\n        else {\n            this.lazyLoadHandler({\n                data: null, count: args.groupInfo.data.count, level: level, index: args.rowIndex,\n                isRowExist: true, isScroll: args.isScroll, up: args.scrollUp, rowIndex: args.cachedRowIndex\n            });\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n        this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n    };\n    GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n        var records = [];\n        this.getRows().filter(function (row) {\n            if (row.isDataRow) {\n                records[row.index] = row.data;\n            }\n        });\n        this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n        return this.groupCache;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRows = function () {\n        return this.groupCache[this.parent.pageSettings.currentPage] || [];\n    };\n    /**\n     * @returns {Element} returns the element\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRowElements = function () {\n        return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n        var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n        var row;\n        for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n            if (tr[i].getAttribute(literals.ariaRowIndex) === index.toString()) {\n                row = tr[i];\n                break;\n            }\n        }\n        return row;\n    };\n    /**\n     * Tucntion to set the column visibility\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var contentrows = this.getRows().filter(function (row) { return !row.isDetailRow; });\n        for (var i = 0; i < columns.length; i++) {\n            var column = columns[i];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n            this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n    };\n    /**\n     * Function to set display.\n     *\n     * @param {Object} tr - specifies the row object\n     * @param {number} idx - specifies the index\n     * @param {string} displayVal - specifies the display value\n     * @param {Row<Column>[]} rows - specifies the array of rows\n     * @param {number} oriIdx - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n        if (!this.parent.groupSettings.columns.length) {\n            setDisplayValue(tr, idx, displayVal, rows);\n        }\n        else {\n            var keys = Object.keys(this.groupCache);\n            for (var j = 0; j < keys.length; j++) {\n                var uids = this.rowsByUid[keys[j]];\n                var idxs = Object.keys(uids);\n                for (var i = 0; i < idxs.length; i++) {\n                    var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[i] + ']');\n                    var row = uids[idxs[i]];\n                    if (row.isCaptionRow) {\n                        if (!this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(row, tr_1, keys[j]);\n                        }\n                        else {\n                            row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1\n                                : row.cells[row.indent + 1].colSpan - 1;\n                            if (tr_1) {\n                                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n                            }\n                        }\n                    }\n                    if (row.isDataRow) {\n                        this.showAndHideCells(tr_1, idx, displayVal, false);\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                    }\n                    if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                        row.visible = row.cells.some(function (cell) { return cell.isDataCell && cell.visible; });\n                        this.showAndHideCells(tr_1, idx, displayVal, true, row);\n                    }\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n        var capRow = row;\n        var captionData = row.data;\n        var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n        data.uid = row.uid;\n        data.isExpand = row.isExpand;\n        data.lazyLoadCssClass = row.lazyLoadCssClass;\n        this.rowsByUid[index][row.uid] = data;\n        this.groupCache[index][this.objIdxByUid[index][row.uid]] = data;\n        if (tr) {\n            var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n            tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n        if (tr) {\n            var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n            setStyleAttribute(tr.querySelectorAll(cls)[idx], { 'display': displayVal });\n            if (tr.querySelectorAll(cls)[idx].classList.contains('e-hide')) {\n                removeClass([tr.querySelectorAll(cls)[idx]], ['e-hide']);\n            }\n            if (isSummary) {\n                if (row.visible && tr.classList.contains('e-hide')) {\n                    removeClass([tr], ['e-hide']);\n                }\n                else if (!row.visible) {\n                    addClass([tr], ['e-hide']);\n                }\n            }\n        }\n    };\n    return GroupLazyLoadRenderer;\n}(ContentRender));\nexport { GroupLazyLoadRenderer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}