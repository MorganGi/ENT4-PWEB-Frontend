{"ast":null,"code":"import { extend, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport * as CONSTANT from '../base/constant';\nimport { updateUndoRedoStatus, isIDevice } from '../base/util';\nimport { KEY_DOWN, KEY_UP } from './../../common/constant';\n/**\n * Formatter\n *\n * @hidden\n\n */\n\nvar Formatter =\n/** @class */\nfunction () {\n  function Formatter() {}\n  /**\n   * To execute the command\n   *\n   * @param  {IRichTextEditor} self - specifies the self element.\n   * @param  {ActionBeginEventArgs} args - specifies the event arguments.\n   * @param  {MouseEvent|KeyboardEvent} event - specifies the keyboard event.\n   * @param  {IItemCollectionArgs} value - specifies the collection arguments\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.process = function (self, args, event, value) {\n    var _this = this;\n\n    var selection = self.contentModule.getDocument().getSelection();\n    var range = selection.rangeCount > 0 ? selection.getRangeAt(selection.rangeCount - 1) : null;\n    var saveSelection;\n\n    if (self.editorMode === 'HTML') {\n      saveSelection = this.editorManager.nodeSelection.save(range, self.contentModule.getDocument());\n    }\n\n    if (!isNullOrUndefined(args) && args.item.command && args.item.command !== 'Table' && args.item.command !== 'Actions' && args.item.command !== 'Links' && args.item.command !== 'Images' && args.item.command !== 'Files' && range && !(self.contentModule.getEditPanel().contains(this.getAncestorNode(range.commonAncestorContainer)) || self.contentModule.getEditPanel() === range.commonAncestorContainer || self.contentModule.getPanel() === range.commonAncestorContainer)) {\n      return;\n    }\n\n    if (!isNullOrUndefined(args) && self.maxLength !== -1 && !isNullOrUndefined(args.item.command)) {\n      var currentInsertContentLength = 0;\n\n      if (args.item.command === 'Links') {\n        currentInsertContentLength = value.text.length === 0 ? value.url.length : value.text.length;\n      }\n\n      if (args.item.command === 'Images' || args.item.command === 'Table' || args.item.command === 'Files') {\n        currentInsertContentLength = 1;\n      }\n\n      var currentLength = self.getText().trim().length;\n      var selectionLength = self.getSelection().length;\n      var totalLength = currentLength - selectionLength + currentInsertContentLength;\n\n      if (!(self.maxLength === -1 || totalLength <= self.maxLength)) {\n        return;\n      }\n    }\n\n    if (isNullOrUndefined(args)) {\n      var action_1 = event.action;\n\n      if (action_1 !== 'tab' && action_1 !== 'enter' && action_1 !== 'space' && action_1 !== 'escape') {\n        args = {};\n\n        if (self.editorMode === 'Markdown' && action_1 === 'insert-table') {\n          value = {\n            'headingText': self.localeObj.getConstant('TableHeadingText'),\n            'colText': self.localeObj.getConstant('TableColText')\n          };\n        }\n\n        var items = {\n          originalEvent: event,\n          cancel: false,\n          requestType: action_1 || event.key + 'Key',\n          itemCollection: value\n        };\n        extend(args, args, items, true);\n        self.trigger(CONSTANT.actionBegin, args, function (actionBeginArgs) {\n          if (actionBeginArgs.cancel) {\n            if (action_1 === 'paste' || action_1 === 'cut' || action_1 === 'copy') {\n              event.preventDefault();\n            }\n          }\n        });\n      }\n\n      var isTableModule = isNullOrUndefined(self.tableModule) ? true : self.tableModule ? self.tableModule.ensureInsideTableList : false;\n\n      if (event.which === 9 && isTableModule || event.which !== 9) {\n        if (event.which === 13 && self.editorMode === 'HTML') {\n          value = {\n            'enterAction': self.enterKey\n          };\n        }\n\n        this.editorManager.observer.notify(event.type === 'keydown' ? KEY_DOWN : KEY_UP, {\n          event: event,\n          callBack: this.onSuccess.bind(this, self),\n          value: value,\n          enterAction: self.enterKey\n        });\n      }\n    } else if (!isNullOrUndefined(args) && args.item.command && args.item.subCommand && (args.item.command !== args.item.subCommand && args.item.command !== 'Font' || (args.item.subCommand === 'FontName' || args.item.subCommand === 'FontSize') && args.name === 'dropDownSelect' || (args.item.subCommand === 'BackgroundColor' || args.item.subCommand === 'FontColor') && args.name === 'colorPickerChanged')) {\n      extend(args, args, {\n        requestType: args.item.subCommand,\n        cancel: false,\n        itemCollection: value,\n        selectType: args.name\n      }, true);\n      self.trigger(CONSTANT.actionBegin, args, function (actionBeginArgs) {\n        if (!actionBeginArgs.cancel) {\n          if (_this.getUndoRedoStack().length === 0 && actionBeginArgs.item.command !== 'Links' && actionBeginArgs.item.command !== 'Images') {\n            _this.saveData();\n          }\n\n          self.isBlur = false;\n          self.contentModule.getEditPanel().focus();\n\n          if (self.editorMode === 'HTML') {\n            saveSelection.restore();\n          }\n\n          var command = actionBeginArgs.item.subCommand.toLocaleLowerCase();\n\n          if (command === 'paste' || command === 'cut' || command === 'copy') {\n            self.clipboardAction(command, event);\n          } else {\n            _this.editorManager.observer.notify(CONSTANT.checkUndo, {\n              subCommand: actionBeginArgs.item.subCommand\n            });\n\n            _this.editorManager.execCommand(actionBeginArgs.item.command, actionBeginArgs.item.subCommand, event, _this.onSuccess.bind(_this, self), actionBeginArgs.item.value, actionBeginArgs.item.subCommand === 'Pre' && actionBeginArgs.selectType === 'dropDownSelect' ? {\n              name: actionBeginArgs.selectType\n            } : value, '#' + self.getID() + ' iframe', self.enterKey);\n          }\n        }\n      });\n    }\n\n    if (isNullOrUndefined(event) || event && event.action !== 'copy') {\n      this.enableUndo(self);\n    }\n  };\n\n  Formatter.prototype.getAncestorNode = function (node) {\n    node = node.nodeType === 3 ? node.parentNode : node;\n    return node;\n  };\n  /**\n   * onKeyHandler method\n   *\n   * @param {IRichTextEditor} self - specifies the self element.\n   * @param {KeyboardEvent} e - specifies the keyboard event.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.onKeyHandler = function (self, e) {\n    var _this = this;\n\n    this.editorManager.observer.notify(KEY_UP, {\n      event: e,\n      callBack: function () {\n        self.notify(CONSTANT.contentChanged, {});\n\n        _this.enableUndo(self);\n      }\n    });\n  };\n  /**\n   * onSuccess method\n   *\n   * @param {IRichTextEditor} self - specifies the self element.\n   * @param {IMarkdownFormatterCallBack} events - specifies the event call back\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.onSuccess = function (self, events) {\n    self.notify(CONSTANT.contentChanged, {});\n\n    if (events && (isNullOrUndefined(events.event) || events.event.action !== 'copy')) {\n      this.enableUndo(self);\n      self.notify(CONSTANT.execCommandCallBack, events);\n    }\n\n    self.trigger(CONSTANT.actionComplete, events, function (callbackArgs) {\n      self.setPlaceHolder();\n\n      if ((callbackArgs.requestType === 'Images' || callbackArgs.requestType === 'Links') && self.editorMode === 'HTML') {\n        var args = callbackArgs;\n\n        if (callbackArgs.requestType === 'Links' && callbackArgs.event && callbackArgs.event.type === 'keydown' && callbackArgs.event.keyCode === 32) {\n          return;\n        }\n\n        self.notify(CONSTANT.insertCompleted, {\n          args: args.event,\n          type: callbackArgs.requestType,\n          isNotify: true,\n          elements: args.elements\n        });\n      }\n\n      self.autoResize();\n    });\n  };\n  /**\n   * Save the data for undo and redo action.\n   *\n   * @param {KeyboardEvent} e - specifies the keyboard event.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.saveData = function (e) {\n    this.editorManager.undoRedoManager.saveData(e);\n  };\n  /**\n   * getUndoStatus method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.getUndoStatus = function () {\n    return this.editorManager.undoRedoManager.getUndoStatus();\n  };\n  /* eslint-disable */\n\n  /**\n   * getUndoRedoStack method\n   *\n   * @param {IHtmlUndoRedoData}  - specifies the redo data.\n   * @returns {void}\n   * @hidden\n    */\n\n  /* eslint-enable */\n\n\n  Formatter.prototype.getUndoRedoStack = function () {\n    return this.editorManager.undoRedoManager.undoRedoStack;\n  };\n  /**\n   * enableUndo method\n   *\n   * @param {IRichTextEditor} self - specifies the self element.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.enableUndo = function (self) {\n    var status = this.getUndoStatus();\n\n    if (self.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n      updateUndoRedoStatus(self.quickToolbarModule.inlineQTBar.quickTBarObj, status);\n    } else {\n      if (self.toolbarModule) {\n        updateUndoRedoStatus(self.toolbarModule.baseToolbar, status);\n      }\n    }\n  };\n\n  return Formatter;\n}();\n\nexport { Formatter };","map":{"version":3,"names":["extend","isNullOrUndefined","Browser","CONSTANT","updateUndoRedoStatus","isIDevice","KEY_DOWN","KEY_UP","Formatter","prototype","process","self","args","event","value","_this","selection","contentModule","getDocument","getSelection","range","rangeCount","getRangeAt","saveSelection","editorMode","editorManager","nodeSelection","save","item","command","getEditPanel","contains","getAncestorNode","commonAncestorContainer","getPanel","maxLength","currentInsertContentLength","text","length","url","currentLength","getText","trim","selectionLength","totalLength","action_1","action","localeObj","getConstant","items","originalEvent","cancel","requestType","key","itemCollection","trigger","actionBegin","actionBeginArgs","preventDefault","isTableModule","tableModule","ensureInsideTableList","which","enterKey","observer","notify","type","callBack","onSuccess","bind","enterAction","subCommand","name","selectType","getUndoRedoStack","saveData","isBlur","focus","restore","toLocaleLowerCase","clipboardAction","checkUndo","execCommand","getID","enableUndo","node","nodeType","parentNode","onKeyHandler","e","contentChanged","events","execCommandCallBack","actionComplete","callbackArgs","setPlaceHolder","keyCode","insertCompleted","isNotify","elements","autoResize","undoRedoManager","getUndoStatus","undoRedoStack","status","inlineMode","enable","isDevice","quickToolbarModule","inlineQTBar","quickTBarObj","toolbarModule","baseToolbar"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/formatter/formatter.js"],"sourcesContent":["import { extend, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport * as CONSTANT from '../base/constant';\nimport { updateUndoRedoStatus, isIDevice } from '../base/util';\nimport { KEY_DOWN, KEY_UP } from './../../common/constant';\n/**\n * Formatter\n *\n * @hidden\n\n */\nvar Formatter = /** @class */ (function () {\n    function Formatter() {\n    }\n    /**\n     * To execute the command\n     *\n     * @param  {IRichTextEditor} self - specifies the self element.\n     * @param  {ActionBeginEventArgs} args - specifies the event arguments.\n     * @param  {MouseEvent|KeyboardEvent} event - specifies the keyboard event.\n     * @param  {IItemCollectionArgs} value - specifies the collection arguments\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.process = function (self, args, event, value) {\n        var _this = this;\n        var selection = self.contentModule.getDocument().getSelection();\n        var range = (selection.rangeCount > 0) ? selection.getRangeAt(selection.rangeCount - 1) : null;\n        var saveSelection;\n        if (self.editorMode === 'HTML') {\n            saveSelection = this.editorManager.nodeSelection.save(range, self.contentModule.getDocument());\n        }\n        if (!isNullOrUndefined(args)\n            && args.item.command\n            && args.item.command !== 'Table'\n            && args.item.command !== 'Actions'\n            && args.item.command !== 'Links'\n            && args.item.command !== 'Images'\n            && args.item.command !== 'Files'\n            && range\n            && !(self.contentModule.getEditPanel().contains(this.getAncestorNode(range.commonAncestorContainer))\n                || self.contentModule.getEditPanel() === range.commonAncestorContainer\n                || self.contentModule.getPanel() === range.commonAncestorContainer)) {\n            return;\n        }\n        if (!isNullOrUndefined(args) && self.maxLength !== -1 && !isNullOrUndefined(args.item.command)) {\n            var currentInsertContentLength = 0;\n            if (args.item.command === 'Links') {\n                currentInsertContentLength = value.text.length === 0 ? value.url.length : value.text.length;\n            }\n            if (args.item.command === 'Images' || args.item.command === 'Table' || args.item.command === 'Files') {\n                currentInsertContentLength = 1;\n            }\n            var currentLength = self.getText().trim().length;\n            var selectionLength = self.getSelection().length;\n            var totalLength = (currentLength - selectionLength) + currentInsertContentLength;\n            if (!(self.maxLength === -1 || totalLength <= self.maxLength)) {\n                return;\n            }\n        }\n        if (isNullOrUndefined(args)) {\n            var action_1 = event.action;\n            if (action_1 !== 'tab' && action_1 !== 'enter' && action_1 !== 'space' && action_1 !== 'escape') {\n                args = {};\n                if (self.editorMode === 'Markdown' && action_1 === 'insert-table') {\n                    value = {\n                        'headingText': self.localeObj.getConstant('TableHeadingText'),\n                        'colText': self.localeObj.getConstant('TableColText')\n                    };\n                }\n                var items = {\n                    originalEvent: event, cancel: false,\n                    requestType: action_1 || (event.key + 'Key'),\n                    itemCollection: value\n                };\n                extend(args, args, items, true);\n                self.trigger(CONSTANT.actionBegin, args, function (actionBeginArgs) {\n                    if (actionBeginArgs.cancel) {\n                        if (action_1 === 'paste' || action_1 === 'cut' || action_1 === 'copy') {\n                            event.preventDefault();\n                        }\n                    }\n                });\n            }\n            var isTableModule = isNullOrUndefined(self.tableModule) ? true : self.tableModule ?\n                self.tableModule.ensureInsideTableList : false;\n            if ((event.which === 9 && isTableModule) || event.which !== 9) {\n                if (event.which === 13 && self.editorMode === 'HTML') {\n                    value = {\n                        'enterAction': self.enterKey\n                    };\n                }\n                this.editorManager.observer.notify((event.type === 'keydown' ? KEY_DOWN : KEY_UP), {\n                    event: event,\n                    callBack: this.onSuccess.bind(this, self),\n                    value: value,\n                    enterAction: self.enterKey\n                });\n            }\n        }\n        else if (!isNullOrUndefined(args) && args.item.command && args.item.subCommand && ((args.item.command !== args.item.subCommand\n            && args.item.command !== 'Font')\n            || ((args.item.subCommand === 'FontName' || args.item.subCommand === 'FontSize') && args.name === 'dropDownSelect')\n            || ((args.item.subCommand === 'BackgroundColor' || args.item.subCommand === 'FontColor')\n                && args.name === 'colorPickerChanged'))) {\n            extend(args, args, { requestType: args.item.subCommand, cancel: false, itemCollection: value, selectType: args.name }, true);\n            self.trigger(CONSTANT.actionBegin, args, function (actionBeginArgs) {\n                if (!actionBeginArgs.cancel) {\n                    if (_this.getUndoRedoStack().length === 0 && actionBeginArgs.item.command !== 'Links'\n                        && actionBeginArgs.item.command !== 'Images') {\n                        _this.saveData();\n                    }\n                    self.isBlur = false;\n                    self.contentModule.getEditPanel().focus();\n                    if (self.editorMode === 'HTML') {\n                        saveSelection.restore();\n                    }\n                    var command = actionBeginArgs.item.subCommand.toLocaleLowerCase();\n                    if (command === 'paste' || command === 'cut' || command === 'copy') {\n                        self.clipboardAction(command, event);\n                    }\n                    else {\n                        _this.editorManager.observer.notify(CONSTANT.checkUndo, { subCommand: actionBeginArgs.item.subCommand });\n                        _this.editorManager.execCommand(actionBeginArgs.item.command, actionBeginArgs.item.subCommand, event, _this.onSuccess.bind(_this, self), actionBeginArgs.item.value, actionBeginArgs.item.subCommand === 'Pre' && actionBeginArgs.selectType === 'dropDownSelect' ?\n                            { name: actionBeginArgs.selectType } : value, ('#' + self.getID() + ' iframe'), self.enterKey);\n                    }\n                }\n            });\n        }\n        if (isNullOrUndefined(event) || event && event.action !== 'copy') {\n            this.enableUndo(self);\n        }\n    };\n    Formatter.prototype.getAncestorNode = function (node) {\n        node = node.nodeType === 3 ? node.parentNode : node;\n        return node;\n    };\n    /**\n     * onKeyHandler method\n     *\n     * @param {IRichTextEditor} self - specifies the self element.\n     * @param {KeyboardEvent} e - specifies the keyboard event.\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.onKeyHandler = function (self, e) {\n        var _this = this;\n        this.editorManager.observer.notify(KEY_UP, {\n            event: e, callBack: function () {\n                self.notify(CONSTANT.contentChanged, {});\n                _this.enableUndo(self);\n            }\n        });\n    };\n    /**\n     * onSuccess method\n     *\n     * @param {IRichTextEditor} self - specifies the self element.\n     * @param {IMarkdownFormatterCallBack} events - specifies the event call back\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.onSuccess = function (self, events) {\n        self.notify(CONSTANT.contentChanged, {});\n        if (events && (isNullOrUndefined(events.event) || events.event.action !== 'copy')) {\n            this.enableUndo(self);\n            self.notify(CONSTANT.execCommandCallBack, events);\n        }\n        self.trigger(CONSTANT.actionComplete, events, function (callbackArgs) {\n            self.setPlaceHolder();\n            if ((callbackArgs.requestType === 'Images' || callbackArgs.requestType === 'Links') && self.editorMode === 'HTML') {\n                var args = callbackArgs;\n                if (callbackArgs.requestType === 'Links' && callbackArgs.event &&\n                    callbackArgs.event.type === 'keydown' &&\n                    callbackArgs.event.keyCode === 32) {\n                    return;\n                }\n                self.notify(CONSTANT.insertCompleted, {\n                    args: args.event, type: callbackArgs.requestType, isNotify: true,\n                    elements: args.elements\n                });\n            }\n            self.autoResize();\n        });\n    };\n    /**\n     * Save the data for undo and redo action.\n     *\n     * @param {KeyboardEvent} e - specifies the keyboard event.\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.saveData = function (e) {\n        this.editorManager.undoRedoManager.saveData(e);\n    };\n    /**\n     * getUndoStatus method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.getUndoStatus = function () {\n        return this.editorManager.undoRedoManager.getUndoStatus();\n    };\n    /* eslint-disable */\n    /**\n     * getUndoRedoStack method\n     *\n     * @param {IHtmlUndoRedoData}  - specifies the redo data.\n     * @returns {void}\n     * @hidden\n\n     */\n    /* eslint-enable */\n    Formatter.prototype.getUndoRedoStack = function () {\n        return this.editorManager.undoRedoManager.undoRedoStack;\n    };\n    /**\n     * enableUndo method\n     *\n     * @param {IRichTextEditor} self - specifies the self element.\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.enableUndo = function (self) {\n        var status = this.getUndoStatus();\n        if (self.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            updateUndoRedoStatus(self.quickToolbarModule.inlineQTBar.quickTBarObj, status);\n        }\n        else {\n            if (self.toolbarModule) {\n                updateUndoRedoStatus(self.toolbarModule.baseToolbar, status);\n            }\n        }\n    };\n    return Formatter;\n}());\nexport { Formatter };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}