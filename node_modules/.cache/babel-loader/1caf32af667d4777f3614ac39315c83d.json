{"ast":null,"code":"import { TextMarkupAnnotation, ShapeAnnotation, StampAnnotation, StickyNotesAnnotation, MeasureAnnotation, InkAnnotation, AllowedInteraction, DynamicStampItem, SignStampItem, StandardBusinessStampItem } from '../index';\nimport { createElement, Browser, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { NumericTextBox, Slider, ColorPicker } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { processPathData, splitArrayCollection } from '@syncfusion/ej2-drawings';\nimport { isLineShapes, cloneObject } from '../drawing/drawing-util';\nimport { NodeDrawingTool, LineTool, MoveTool, ResizeTool, ConnectTool } from '../drawing/tools';\nimport { updateDistanceLabel, updateRadiusLabel, updatePerimeterLabel, updateCalibrateLabel } from '../drawing/connector-util';\nimport { FreeTextAnnotation } from './free-text-annotation';\nimport { InputElement } from './input-element';\nimport { InPlaceEditor } from '@syncfusion/ej2-inplace-editor';\n/**\n * The `Annotation` module is used to handle annotation actions of PDF viewer.\n */\n\nvar Annotation =\n/** @class */\nfunction () {\n  /**\n   * @param pdfViewer\n   * @param viewerBase\n   * @param pdfViewer\n   * @param viewerBase\n   * @private\n   */\n  function Annotation(pdfViewer, viewerBase) {\n    this.isUndoRedoAction = false;\n    this.isUndoAction = false;\n    this.annotationSelected = true;\n    /**\n     * @private\n     */\n\n    this.isShapeCopied = false;\n    /**\n     * @private\n     */\n\n    this.actionCollection = [];\n    /**\n     * @private\n     */\n\n    this.redoCollection = [];\n    /**\n     * @private\n     */\n\n    this.isPopupNoteVisible = false;\n    /**\n     * @private\n     */\n\n    this.undoCommentsElement = [];\n    /**\n     * @private\n     */\n\n    this.redoCommentsElement = [];\n    /**\n     * @private\n     */\n\n    this.selectAnnotationId = null;\n    /**\n     * @private\n     */\n\n    this.isAnnotationSelected = false;\n    /**\n     * @private\n     */\n\n    this.annotationPageIndex = null;\n    this.previousIndex = null; // eslint-disable-next-line\n\n    this.overlappedAnnotations = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.overlappedCollections = [];\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.isFormFieldShape = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.removedAnnotationCollection = [];\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = viewerBase;\n\n    if (this.pdfViewer.enableTextMarkupAnnotation) {\n      this.textMarkupAnnotationModule = new TextMarkupAnnotation(this.pdfViewer, this.pdfViewerBase);\n    }\n\n    if (this.pdfViewer.enableShapeAnnotation) {\n      this.shapeAnnotationModule = new ShapeAnnotation(this.pdfViewer, this.pdfViewerBase);\n    }\n\n    if (this.pdfViewer.enableMeasureAnnotation) {\n      this.measureAnnotationModule = new MeasureAnnotation(this.pdfViewer, this.pdfViewerBase);\n    }\n\n    this.stampAnnotationModule = new StampAnnotation(this.pdfViewer, this.pdfViewerBase);\n    this.stickyNotesAnnotationModule = new StickyNotesAnnotation(this.pdfViewer, this.pdfViewerBase);\n    this.freeTextAnnotationModule = new FreeTextAnnotation(this.pdfViewer, this.pdfViewerBase);\n    this.inputElementModule = new InputElement(this.pdfViewer, this.pdfViewerBase);\n    this.inkAnnotationModule = new InkAnnotation(this.pdfViewer, this.pdfViewerBase);\n  }\n  /**\n   * Set annotation type to be added in next user interaction in PDF Document.\n   *\n   * @param type\n   * @param dynamicStampItem\n   * @param signStampItem\n   * @param standardBusinessStampItem\n   * @returns void\n   */\n  // eslint-disable-next-line max-len\n\n\n  Annotation.prototype.setAnnotationMode = function (type, dynamicStampItem, signStampItem, standardBusinessStampItem) {\n    var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n    this.pdfViewer.enableServerDataBinding(false);\n    type !== 'None' ? this.triggerAnnotationUnselectEvent() : null;\n\n    if (type === 'None') {\n      this.clearAnnotationMode();\n    } else if (type === 'Highlight' || type === 'Strikethrough' || type === 'Underline') {\n      if (this.textMarkupAnnotationModule) {\n        this.textMarkupAnnotationModule.isSelectionMaintained = false;\n        this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());\n      }\n    } else if (type === 'Line' || type === 'Arrow' || type === 'Rectangle' || type === 'Circle' || type === 'Polygon') {\n      if (this.shapeAnnotationModule) {\n        this.shapeAnnotationModule.setAnnotationType(type);\n      }\n    } else if (type === 'Distance' || type === 'Perimeter' || type === 'Area' || type === 'Radius' || type === 'Volume') {\n      if (this.measureAnnotationModule) {\n        this.measureAnnotationModule.setAnnotationType(type);\n      }\n    } else if (type === 'FreeText' && this.freeTextAnnotationModule) {\n      this.freeTextAnnotationModule.setAnnotationType('FreeText');\n      this.freeTextAnnotationModule.isNewFreeTextAnnot = true;\n      this.freeTextAnnotationModule.isNewAddedAnnot = true;\n    } else if (type === 'HandWrittenSignature') {\n      this.pdfViewerBase.signatureModule.setAnnotationMode();\n    } else if (type === 'Initial') {\n      this.pdfViewerBase.signatureModule.setInitialMode();\n    } else if (type === 'Ink') {\n      this.inkAnnotationModule.setAnnotationMode();\n    } else if (type === 'StickyNotes') {\n      this.pdfViewerBase.isCommentIconAdded = true;\n      this.pdfViewerBase.isAddComment = true; // eslint-disable-next-line max-len\n\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n\n      if (pageDiv) {\n        pageDiv.addEventListener('mousedown', this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this));\n      }\n    } else if (type === 'Stamp') {\n      this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n      this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n      this.pdfViewerBase.stampAdded = true;\n\n      if (dynamicStampItem) {\n        // eslint-disable-next-line\n        var stampName = DynamicStampItem[dynamicStampItem];\n        this.pdfViewerBase.isDynamicStamp = true;\n        this.stampAnnotationModule.retrieveDynamicStampAnnotation(stampName);\n      } else if (signStampItem) {\n        // eslint-disable-next-line\n        var stampName = SignStampItem[signStampItem];\n        this.pdfViewerBase.isDynamicStamp = false;\n        this.stampAnnotationModule.retrievestampAnnotation(stampName);\n      } else if (standardBusinessStampItem) {\n        // eslint-disable-next-line\n        var stampName = StandardBusinessStampItem[standardBusinessStampItem];\n        this.pdfViewerBase.isDynamicStamp = false;\n        this.stampAnnotationModule.retrievestampAnnotation(stampName);\n      }\n    }\n\n    this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n    this.pdfViewerBase.initiateTextSelection();\n  };\n\n  Annotation.prototype.deleteAnnotationById = function (annotationId) {\n    if (annotationId) {\n      this.annotationSelected = false;\n      this.selectAnnotation(annotationId);\n      this.deleteAnnotation();\n    }\n  };\n\n  Annotation.prototype.clearAnnotationMode = function () {\n    if (this.textMarkupAnnotationModule) {\n      this.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n    }\n\n    if (this.freeTextAnnotationModule) {\n      this.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n      this.freeTextAnnotationModule.isNewAddedAnnot = false;\n    }\n\n    if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n      this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n    }\n\n    if (this.pdfViewerBase.isShapeAnnotationModule()) {\n      this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode = '';\n    }\n\n    if (this.pdfViewerBase.isCalibrateAnnotationModule()) {\n      this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode = '';\n    }\n\n    if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n      // eslint-disable-next-line\n      var currentPageNumber = parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n      this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n    }\n  };\n\n  Annotation.prototype.deleteAnnotation = function () {\n    if (this.textMarkupAnnotationModule) {\n      this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n    }\n\n    var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n\n    if (selectedAnnotation) {\n      var data = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_formfields');\n      var formFieldsData = JSON.parse(data);\n      var newFormFieldsData = [];\n\n      if (formFieldsData) {\n        for (var x = 0; x < formFieldsData.length; x++) {\n          if (formFieldsData[x].uniqueID == selectedAnnotation.id) {\n            formFieldsData[x].Value = '';\n\n            for (var y = 0; y < formFieldsData.length; y++) {\n              if (formFieldsData[x].FieldName === formFieldsData[y].FieldName && formFieldsData[y].Name === 'ink') {\n                formFieldsData.splice(y, 1);\n              }\n            }\n\n            newFormFieldsData.push(formFieldsData[x]);\n          } else {\n            newFormFieldsData.push(formFieldsData[x]);\n          }\n        }\n\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_formfields', JSON.stringify(newFormFieldsData));\n      }\n    }\n\n    var isLock = false;\n    var isReadOnly = false;\n\n    if (this.pdfViewer.selectedItems.annotations.length > 0) {\n      // eslint-disable-next-line\n      var annotation_1 = this.pdfViewer.selectedItems.annotations[0];\n      var type = annotation_1.shapeAnnotationType;\n\n      if (type === 'Path' || annotation_1.formFieldAnnotationType === 'SignatureField' || annotation_1.formFieldAnnotationType === 'InitialField' || type === 'HandWrittenSignature' || type === 'SignatureText' || type === 'SignatureImage') {\n        var inputFields = document.getElementById(annotation_1.id);\n\n        if (inputFields && inputFields.disabled) {\n          isReadOnly = true;\n        }\n      }\n\n      if (annotation_1.annotationSettings) {\n        isLock = annotation_1.annotationSettings.isLock;\n\n        if (isLock && this.checkAllowedInteractions('Delete', annotation_1)) {\n          isLock = false;\n        }\n      }\n\n      if (!isLock && !isReadOnly) {\n        var pageNumber = annotation_1.pageIndex; // eslint-disable-next-line\n\n        var shapeType = annotation_1.shapeAnnotationType; // eslint-disable-next-line\n\n        var undoElement = void 0;\n\n        if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n          // eslint-disable-next-line max-len\n          if (isNullOrUndefined(annotation_1.measureType) || annotation_1.measureType === '') {\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'shape');\n            this.updateImportAnnotationCollection(annotation_1, pageNumber, 'shapeAnnotation');\n          } else {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'measure'); // eslint-disable-next-line max-len\n\n            this.updateImportAnnotationCollection(annotation_1, pageNumber, 'measureShapeAnnotation');\n          }\n\n          undoElement = this.modifyInCollections(annotation_1, 'delete');\n        } else if (shapeType === 'FreeText') {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'FreeText', 'delete');\n          undoElement = this.modifyInCollections(annotation_1, 'delete');\n          this.updateImportAnnotationCollection(annotation_1, pageNumber, 'freeTextAnnotation');\n        } else if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureImage' || shapeType === 'SignatureText') {\n          undoElement = this.modifyInCollections(annotation_1, 'delete');\n        } else if (shapeType === 'Ink') {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'Ink', 'delete');\n          undoElement = this.modifyInCollections(annotation_1, 'delete');\n          this.updateImportAnnotationCollection(annotation_1, pageNumber, 'inkAnnotation');\n        } else {\n          undoElement = this.pdfViewer.selectedItems.annotations[0]; // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(undoElement, undoElement.shapeAnnotationType, 'delete'); // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(annotation_1, null, 'delete');\n        }\n\n        if (shapeType === 'StickyNotes') {\n          this.updateImportAnnotationCollection(annotation_1, pageNumber, 'stickyNotesAnnotation');\n        }\n\n        if (shapeType === 'Stamp' || 'Image') {\n          this.updateImportAnnotationCollection(annotation_1, pageNumber, 'stampAnnotations');\n        } // eslint-disable-next-line max-len\n\n\n        this.pdfViewer.annotation.addAction(pageNumber, null, annotation_1, 'Delete', '', undoElement, annotation_1); // eslint-disable-next-line\n\n        var removeDiv = void 0;\n\n        if (annotation_1.annotName !== '') {\n          removeDiv = document.getElementById(annotation_1.annotName);\n        } else {\n          if (undoElement) {\n            if (undoElement.annotName !== '') {\n              removeDiv = document.getElementById(undoElement.annotName);\n            }\n          }\n        }\n\n        if (removeDiv) {\n          if (removeDiv.parentElement.childElementCount === 1) {\n            this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);\n          } else {\n            removeDiv.remove();\n          }\n        }\n\n        var selectedAnnot = this.pdfViewer.selectedItems.annotations[0];\n        var annotationId = selectedAnnot.annotName;\n        var annotType = this.getAnnotationType(selectedAnnot.shapeAnnotationType, selectedAnnot.measureType);\n\n        if (shapeType === 'Path' || selectedAnnot.formFieldAnnotationType === 'SignatureField' || selectedAnnot.formFieldAnnotationType === 'InitialField' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n          // eslint-disable-next-line\n          var formFieldCollection = this.pdfViewer.retrieveFormFields();\n          var index = formFieldCollection.findIndex(function (el) {\n            return el.id === annotation_1.id;\n          });\n          var formFieldName = void 0;\n\n          if (index > -1) {\n            formFieldName = formFieldCollection[index].name;\n          }\n\n          for (var m = 0; m < formFieldCollection.length; m++) {\n            if (selectedAnnot.id === formFieldCollection[m].id || isNullOrUndefined(formFieldName) && formFieldName === formFieldCollection[m].name) {\n              formFieldCollection[m].value = '';\n              formFieldCollection[m].signatureType = '';\n              var annotation_2 = this.getAnnotationsFromCollections(formFieldCollection[m].id);\n              this.updateInputFieldDivElement(annotation_2);\n              undoElement = this.modifyInCollections(annotation_2, 'delete'); // eslint-disable-next-line max-len\n\n              this.pdfViewer.annotation.addAction(annotation_2.pageIndex, null, annotation_2, 'Delete', '', undoElement, annotation_2);\n              if (this.pdfViewer.formDesignerModule && selectedAnnot.formFieldAnnotationType) this.updateFormFieldCollection(annotation_2);else this.updateAnnotationCollection(annotation_2);\n              this.pdfViewer.remove(annotation_2);\n            }\n          }\n\n          if (this.pdfViewer.formDesignerModule && selectedAnnot.formFieldAnnotationType) this.updateFormFieldCollection(annotation_1);else this.updateAnnotationCollection(annotation_1);\n        }\n\n        var formFieldObj = this.pdfViewer.nameTable[annotation_1.id.split(\"_\")[0]];\n\n        if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n          var index = this.pdfViewer.formFieldCollections.findIndex(function (el) {\n            return el.id === annotation_1.id.split(\"_\")[0];\n          });\n          var formFieldName = void 0;\n\n          if (index > -1) {\n            formFieldName = this.pdfViewer.formFieldCollections[index].name;\n          }\n\n          for (var i = 0; i < this.pdfViewer.formFieldCollections.length; i++) {\n            if (formFieldName === this.pdfViewer.formFieldCollections[i].name) {\n              var formFieldsIndex = this.pdfViewer.formFieldCollections[i];\n              this.pdfViewer.fireFormFieldPropertiesChangeEvent(\"formFieldPropertiesChange\", formFieldsIndex, formFieldsIndex.pageIndex, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, formFieldsIndex.value, \"\");\n              formFieldsIndex.value = \"\";\n              formFieldsIndex.signatureType = \"\";\n              this.pdfViewer.formDesignerModule.updateFormFieldCollections(formFieldsIndex);\n              var annotation_3 = this.getAnnotationsFromCollections(formFieldsIndex.id + '_content');\n              undoElement = this.modifyInCollections(annotation_3, 'delete'); // eslint-disable-next-line max-len\n\n              this.pdfViewer.annotation.addAction(annotation_3.pageIndex, null, annotation_3, 'Delete', '', undoElement, annotation_3);\n              this.updateInputFieldDivElement(annotation_3);\n              var formFieldObject = this.pdfViewer.nameTable[annotation_3.id.split(\"_\")[0]];\n              formFieldObject.wrapper.children.splice(formFieldObject.wrapper.children.indexOf(annotation_3.wrapper.children[0]), 1);\n              this.pdfViewer.remove(annotation_3);\n            }\n          }\n        }\n\n        this.pdfViewer.remove(annotation_1);\n        this.pdfViewer.renderDrawing();\n        this.pdfViewer.clearSelection(pageNumber);\n        this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n        this.pdfViewerBase.tool = null;\n        this.pdfViewer.tool = null;\n\n        if (selectedAnnot.shapeAnnotationType === 'HandWrittenSignature' || selectedAnnot.shapeAnnotationType === 'SignatureText' || selectedAnnot.shapeAnnotationType === 'SignatureImage') {\n          // eslint-disable-next-line max-len\n          var bounds = {\n            left: selectedAnnot.bounds.x,\n            top: selectedAnnot.bounds.y,\n            width: selectedAnnot.bounds.width,\n            height: selectedAnnot.bounds.height\n          }; // eslint-disable-next-line max-len\n\n          this.pdfViewer.fireSignatureRemove(pageNumber, selectedAnnot.signatureName, selectedAnnot.shapeAnnotationType, bounds);\n        } else if (this.pdfViewer.annotationModule) {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.fireAnnotationRemove(pageNumber, annotationId, annotType, selectedAnnot.bounds);\n        }\n\n        if (this.pdfViewer.textSelectionModule) {\n          this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n      }\n    }\n\n    this.updateToolbar(true);\n\n    if (this.pdfViewer.toolbarModule) {\n      if (this.pdfViewer.toolbarModule.annotationToolbarModule && !isLock) {\n        this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false, true);\n        this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(false);\n      }\n    }\n  };\n  /**\n   * @param annotationId\n  */\n  // eslint-disable-next-line max-len\n\n\n  Annotation.prototype.getAnnotationsFromCollections = function (annotationId) {\n    var collections = this.pdfViewer.annotations;\n\n    if (collections && annotationId) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].id === annotationId) {\n          return collections[i];\n        }\n      }\n    }\n  };\n\n  ;\n  /**\n   * @param annotation\n  */\n\n  Annotation.prototype.updateInputFieldDivElement = function (annotation) {\n    var inputFields = document.getElementById(annotation.id);\n    var signatureFieldElement = document.getElementById(annotation.id + \"_html_element\");\n\n    if (inputFields === null && !isNullOrUndefined(signatureFieldElement)) {\n      inputFields = signatureFieldElement.children[0].children[0];\n    }\n\n    if (inputFields && inputFields.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n      inputFields.className = 'e-pdfviewer-signatureformfields';\n      inputFields.style.pointerEvents = '';\n      inputFields.parentElement.style.pointerEvents = '';\n\n      if (this.pdfViewer.formDesignerModule) {\n        this.pdfViewer.formDesignerModule.updateSignatureValue(annotation.id);\n      } else {\n        this.pdfViewer.formFieldsModule.updateDataInSession(inputFields, '');\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param annotation\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.storeAnnotationCollections = function (annotation, pageNumber) {\n    if (this.isFormFieldShape) {\n      var collectionDetails = this.checkFormDesignCollection(annotation);\n      var selectAnnotation = cloneObject(annotation);\n      selectAnnotation.formFieldId = annotation.annotName;\n      selectAnnotation.pageNumber = pageNumber;\n      delete selectAnnotation.annotName;\n\n      if (annotation.id) {\n        selectAnnotation.uniqueKey = annotation.id;\n        delete selectAnnotation.id;\n      }\n\n      if (collectionDetails.isExisting) {\n        this.pdfViewer.formFieldCollection.splice(collectionDetails.position, 0, selectAnnotation);\n      } else {\n        this.pdfViewer.formFieldCollection.push(selectAnnotation);\n      }\n    } else {\n      // eslint-disable-next-line\n      var collectionDetails = this.checkAnnotationCollection(annotation); // eslint-disable-next-line\n\n      var selectAnnotation = cloneObject(annotation);\n      selectAnnotation.annotationId = annotation.annotName;\n      selectAnnotation.pageNumber = pageNumber;\n      delete selectAnnotation.annotName;\n\n      if (annotation.shapeAnnotationType === 'stamp') {\n        selectAnnotation.uniqueKey = annotation.randomId;\n        delete selectAnnotation.randomId;\n      }\n\n      if (annotation.shapeAnnotationType === 'sticky') {\n        selectAnnotation.uniqueKey = annotation.annotName;\n      }\n\n      if (annotation.id) {\n        selectAnnotation.uniqueKey = annotation.id;\n        delete selectAnnotation.id;\n      } // eslint-disable-next-line\n\n\n      if (selectAnnotation.customData && annotation.customData && JSON.stringify(selectAnnotation.customData) !== JSON.stringify(annotation.customData)) {\n        selectAnnotation.customData = annotation.customData;\n      }\n\n      if (collectionDetails.isExisting) {\n        this.pdfViewer.annotationCollection.splice(collectionDetails.position, 0, selectAnnotation);\n      } else {\n        this.pdfViewer.annotationCollection.push(selectAnnotation);\n      }\n    }\n  };\n\n  Annotation.prototype.checkFormDesignCollection = function (annotation) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.formFieldCollection;\n\n    if (collections && annotation) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].formFieldId === annotation.annotName) {\n          this.pdfViewer.formFieldCollection.splice(i, 1);\n          return {\n            isExisting: true,\n            position: i\n          };\n        }\n      }\n    }\n\n    return {\n      isExisting: false,\n      position: null\n    };\n  };\n\n  Annotation.prototype.updateFormFieldCollection = function (annotation) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.formFieldCollection;\n\n    if (collections && annotation) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].formFieldId === annotation.annotName) {\n          this.removedAnnotationCollection.push(collections[i]);\n          this.pdfViewer.formFieldCollection.splice(i, 1);\n          break;\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getCustomData = function (annotation) {\n    var customData;\n\n    if (annotation.ExistingCustomData && !annotation.CustomData) {\n      customData = JSON.parse(annotation.ExistingCustomData);\n    } else if (annotation.CustomData === null) {\n      if (annotation.shapeAnnotationType === 'sticky') {\n        customData = this.pdfViewer.stickyNotesSettings.customData;\n      }\n\n      if (annotation.shapeAnnotationType === 'Stamp') {\n        customData = this.pdfViewer.stampSettings.customData;\n      }\n\n      if (annotation.shapeAnnotationType === 'FreeText') {\n        customData = this.pdfViewer.freeTextSettings.customData;\n      }\n\n      if (annotation.id === 'shape') {\n        customData = this.getShapeData(annotation.ShapeAnnotationType, annotation.subject);\n      }\n\n      if (annotation.id === 'measure') {\n        customData = this.getMeasureData(annotation.Subject);\n      }\n\n      if (annotation.shapeAnnotationType === 'textMarkup') {\n        customData = this.getTextMarkupData(annotation.subject);\n      }\n\n      if (annotation.shapeAnnotationType === 'Ink') {\n        customData = this.pdfViewer.inkAnnotationSettings.customData;\n      }\n    } else {\n      customData = annotation.CustomData;\n    }\n\n    return customData;\n  };\n  /**\n   * @param type\n   * @param subject\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getShapeData = function (type, subject) {\n    var customData;\n\n    if (type === 'Line' && subject !== 'Arrow' && this.pdfViewer.lineSettings.customData) {\n      customData = this.pdfViewer.lineSettings.customData;\n    } else if ((type === 'LineWidthArrowHead' || subject === 'Arrow') && this.pdfViewer.arrowSettings.customData) {\n      customData = this.pdfViewer.arrowSettings.customData;\n    } else if ((type === 'Rectangle' || type === 'Square') && this.pdfViewer.rectangleSettings.customData) {\n      customData = this.pdfViewer.rectangleSettings.customData;\n    } else if ((type === 'Ellipse' || type === 'Circle') && this.pdfViewer.circleSettings.customData) {\n      customData = this.pdfViewer.circleSettings.customData;\n    } else if (type === 'Polygon' && this.pdfViewer.polygonSettings.customData) {\n      customData = this.pdfViewer.polygonSettings.customData;\n    } else if (this.pdfViewer.annotationSettings.customData) {\n      customData = this.pdfViewer.annotationSettings.customData;\n    }\n\n    return customData;\n  };\n  /**\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getMeasureData = function (type) {\n    var customData;\n\n    if ((type === 'Distance' || type === 'Distance calculation') && this.pdfViewer.distanceSettings.customData) {\n      customData = this.pdfViewer.distanceSettings.customData;\n    } else if ((type === 'Line' || type === 'Perimeter calculation') && this.pdfViewer.lineSettings.customData) {\n      customData = this.pdfViewer.lineSettings.customData; // eslint-disable-next-line max-len\n    } else if ((type === 'Polygon' || type === 'Area calculation' || type === 'Volume calculation') && this.pdfViewer.polygonSettings.customData) {\n      customData = this.pdfViewer.polygonSettings.customData;\n    } else if ((type === 'Radius' || type === 'Radius calculation') && this.pdfViewer.radiusSettings.customData) {\n      customData = this.pdfViewer.radiusSettings.customData;\n    } else if (this.pdfViewer.annotationSettings.customData) {\n      customData = this.pdfViewer.annotationSettings.customData;\n    }\n\n    return customData;\n  };\n  /**\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getTextMarkupData = function (type) {\n    var customData;\n\n    if (type === 'Highlight' && this.pdfViewer.highlightSettings.customData) {\n      customData = this.pdfViewer.highlightSettings.customData;\n    } else if (type === 'Underline' && this.pdfViewer.underlineSettings.customData) {\n      customData = this.pdfViewer.underlineSettings.customData;\n    } else if (type === 'Strikethrough' && this.pdfViewer.strikethroughSettings.customData) {\n      customData = this.pdfViewer.strikethroughSettings.customData;\n    } else if (this.pdfViewer.annotationSettings.customData) {\n      customData = this.pdfViewer.annotationSettings.customData;\n    }\n\n    return customData;\n  };\n  /**\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getData = function (type) {\n    var customData;\n\n    if (type === 'FreeText' && this.pdfViewer.freeTextSettings.customData) {\n      customData = this.pdfViewer.freeTextSettings.customData;\n    } else if ((type === 'image' || type === 'Stamp') && this.pdfViewer.stampSettings.customData) {\n      customData = this.pdfViewer.stampSettings.customData;\n    } else if (type === 'sticky' && this.pdfViewer.stickyNotesSettings.customData) {\n      customData = this.pdfViewer.stickyNotesSettings.customData;\n    } else if (this.pdfViewer.annotationSettings.customData) {\n      customData = this.pdfViewer.annotationSettings.customData;\n    }\n\n    return customData;\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.clearAnnotationStorage = function () {\n    // eslint-disable-next-line\n    var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n    var maxSessionSize = 4500;\n\n    if (sessionSize > maxSessionSize) {\n      var storageLength = window.sessionStorage.length; // eslint-disable-next-line\n\n      var annotationList = [];\n\n      for (var i = 0; i < storageLength; i++) {\n        if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n          if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.annotationStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n            annotationList.push(window.sessionStorage.key(i));\n          }\n        }\n      }\n\n      if (annotationList) {\n        for (var i = 0; i < annotationList.length; i++) {\n          window.sessionStorage.removeItem(annotationList[i]);\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.checkAnnotationCollection = function (annotation) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.annotationCollection;\n\n    if (collections && annotation) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].annotationId === annotation.annotName) {\n          this.pdfViewer.annotationCollection.splice(i, 1);\n          return {\n            isExisting: true,\n            position: i\n          };\n        }\n      }\n    }\n\n    return {\n      isExisting: false,\n      position: null\n    };\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.updateAnnotationCollection = function (annotation) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.annotationCollection;\n\n    if (collections && annotation) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].annotationId === annotation.annotName) {\n          this.removedAnnotationCollection.push(collections[i]);\n          this.pdfViewer.annotationCollection.splice(i, 1);\n          break;\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param annotationType\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.updateImportAnnotationCollection = function (annotation, pageNumber, annotationType) {\n    if (this.pdfViewerBase.isImportAction) {\n      if (this.pdfViewerBase.importedAnnotation && this.pdfViewerBase.importedAnnotation[pageNumber]) {\n        // eslint-disable-next-line\n        var currentPageAnnotations = this.pdfViewerBase.importedAnnotation[pageNumber];\n\n        if (currentPageAnnotations[annotationType]) {\n          for (var i = 0; i < currentPageAnnotations[annotationType].length; i++) {\n            // eslint-disable-next-line max-len\n            if (annotation.annotName === currentPageAnnotations[annotationType][i].AnnotName || annotation.annotName === currentPageAnnotations[annotationType][i].annotName) {\n              this.pdfViewerBase.importedAnnotation[pageNumber][annotationType].splice(i, 1);\n              break;\n            }\n          }\n        }\n      }\n    } // eslint-disable-next-line\n\n\n    var documentcollections = this.pdfViewerBase.documentAnnotationCollections;\n\n    if (documentcollections && documentcollections[pageNumber]) {\n      // eslint-disable-next-line\n      var documentPageCollections = documentcollections[pageNumber];\n\n      if (documentPageCollections && documentPageCollections[annotationType]) {\n        for (var i = 0; i < documentPageCollections[annotationType].length; i++) {\n          // eslint-disable-next-line max-len\n          if (annotation.annotName === documentPageCollections[annotationType][i].AnnotName) {\n            this.pdfViewerBase.documentAnnotationCollections[pageNumber][annotationType].splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * Select the annotations using annotation object or annotation Id.\n   *\n   * @param annotationId\n   * @returns void\n   */\n\n\n  Annotation.prototype.selectAnnotation = function (annotationId) {\n    // eslint-disable-next-line\n    var annotation;\n    var id;\n\n    if (typeof annotationId === 'object') {\n      annotation = annotationId;\n      id = annotation.annotationId;\n      annotation = this.getAnnotationsFromAnnotationCollections(id);\n    }\n\n    if (typeof annotationId === 'string') {\n      annotation = this.getAnnotationsFromAnnotationCollections(annotationId);\n      id = annotationId;\n    }\n\n    if (annotation) {\n      var pageIndex = annotation.pageNumber;\n      var isRender = false;\n      isRender = this.findRenderPageList(pageIndex);\n      var currentSelector = this.pdfViewer.annotationSelectorSettings; //let pageIndex: number = this.getPageNumberFromAnnotationCollections(annotation);\n\n      if (annotation && pageIndex >= 0) {\n        if (annotation.shapeAnnotationType === 'textMarkup') {\n          if (annotation.rect || annotation.bounds) {\n            // eslint-disable-next-line max-len\n            var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + this.getAnnotationTop(annotation) * this.pdfViewerBase.getZoomFactor();\n            var scroll_1 = (scrollValue - 20).toString(); // eslint-disable-next-line radix\n\n            this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_1);\n            this.pdfViewerBase.viewerContainer.scrollLeft = this.getAnnotationLeft(annotation) * this.pdfViewerBase.getZoomFactor();\n          } else {\n            if (this.pdfViewer.navigation) {\n              this.pdfViewer.navigation.goToPage(pageIndex + 1);\n            }\n          }\n        } else {\n          if (annotation.bounds) {\n            // eslint-disable-next-line max-len\n            var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + annotation.bounds.top * this.pdfViewerBase.getZoomFactor();\n            var scrollLeft = annotation.bounds.left * this.pdfViewerBase.getZoomFactor();\n\n            if (annotation.shapeAnnotationType === 'Ink') {\n              // eslint-disable-next-line max-len\n              scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + annotation.bounds.y * this.pdfViewerBase.getZoomFactor();\n              scrollLeft = annotation.bounds.x * this.pdfViewerBase.getZoomFactor();\n            }\n\n            var scroll_2 = (scrollValue - 20).toString(); // eslint-disable-next-line radix\n\n            this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_2);\n            this.pdfViewerBase.viewerContainer.scrollLeft = scrollLeft;\n          } else {\n            if (this.pdfViewer.navigation) {\n              this.pdfViewer.navigation.goToPage(pageIndex + 1);\n            }\n          }\n        }\n\n        if (isRender) {\n          if (this.previousIndex) {\n            this.pdfViewer.clearSelection(this.previousIndex);\n          }\n\n          this.pdfViewer.clearSelection(pageIndex);\n          this.previousIndex = pageIndex;\n\n          if (annotation.shapeAnnotationType === 'textMarkup') {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex, true); // eslint-disable-next-line max-len\n\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex); // eslint-disable-next-line\n\n            var textMarkupAnnotation = this.getTextMarkupAnnotations(pageIndex, annotation);\n\n            if (textMarkupAnnotation) {\n              this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n              this.textMarkupAnnotationModule.isSelectedAnnotation = true;\n              this.textMarkupAnnotationModule.showHideDropletDiv(true);\n              this.textMarkupAnnotationModule.annotationClickPosition = null;\n              this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation, canvas, pageIndex, null, true);\n              this.textMarkupAnnotationModule.currentTextMarkupAnnotation = textMarkupAnnotation;\n              this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageIndex;\n              this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n              this.textMarkupAnnotationModule.isSelectedAnnotation = false;\n\n              if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true; // eslint-disable-next-line max-len\n\n                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n              }\n            }\n          } else if (annotation.shapeAnnotationType === 'stamp' || annotation.ShapeAnnotationType === 'stamp') {\n            this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n            this.pdfViewer.annotation.onAnnotationMouseDown();\n          } else if (annotation.shapeAnnotationType === 'sticky' || annotation.ShapeAnnotationType === 'sticky') {\n            this.pdfViewer.select([annotation.annotationId], currentSelector);\n            this.pdfViewer.annotation.onAnnotationMouseDown();\n          } else {\n            this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n            this.pdfViewer.annotation.onAnnotationMouseDown();\n          } // eslint-disable-next-line max-len\n\n\n          var commentElement = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n\n          if (commentElement && commentElement.style.display === 'block') {\n            // eslint-disable-next-line\n            var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n\n            if (accordionExpand) {\n              accordionExpand.ej2_instances[0].expandItem(true);\n            } // eslint-disable-next-line\n\n\n            var commentsDiv = document.getElementById(id);\n\n            if (commentsDiv) {\n              if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                commentsDiv.firstChild.click();\n              }\n            }\n          }\n        } else {\n          this.selectAnnotationId = id;\n          this.isAnnotationSelected = true;\n          this.annotationPageIndex = pageIndex;\n        }\n      }\n    }\n  };\n  /**\n   * Clear the annotation selection.\n   *\n   * @returns void\n   */\n\n\n  Annotation.prototype.clearSelection = function () {\n    if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation();\n      this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);\n    } else {\n      if (this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.annotations[0]) {\n        // eslint-disable-next-line\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        this.pdfViewer.clearSelection(currentAnnotation.pageIndex);\n      } else {\n        this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getAnnotationTop = function (annotation) {\n    if (annotation.rect) {\n      if (annotation.rect.Top) {\n        return annotation.rect.Top;\n      } else {\n        return annotation.rect.top;\n      }\n    } else {\n      if (annotation.bounds[0].Top) {\n        return annotation.bounds[0].Top;\n      } else {\n        return annotation.bounds[0].top;\n      }\n    }\n  };\n  /**\n    * @param annotation\n    */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getAnnotationLeft = function (annotation) {\n    if (annotation.rect) {\n      if (annotation.rect.Left) {\n        return annotation.rect.Left;\n      } else {\n        return annotation.rect.left;\n      }\n    } else {\n      if (annotation.bounds[0].Left) {\n        return annotation.bounds[0].Left;\n      } else {\n        return annotation.bounds[0].left;\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.selectAnnotationFromCodeBehind = function () {\n    if (this.isAnnotationSelected && this.selectAnnotationId) {\n      // eslint-disable-next-line\n      var annotation = this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId);\n      var id = this.selectAnnotationId;\n      var pageIndex = annotation.pageNumber;\n      var currentSelector = this.pdfViewer.annotationSelectorSettings;\n\n      if (annotation && this.annotationPageIndex >= 0 && this.annotationPageIndex === pageIndex) {\n        if (this.previousIndex) {\n          this.pdfViewer.clearSelection(this.previousIndex);\n        }\n\n        this.pdfViewer.clearSelection(pageIndex);\n        this.previousIndex = pageIndex;\n\n        if (annotation.shapeAnnotationType === 'textMarkup') {\n          // eslint-disable-next-line max-len\n          this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex, true); // eslint-disable-next-line max-len\n\n          var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex); // eslint-disable-next-line\n\n          var textMarkupAnnotation = this.getTextMarkupAnnotations(pageIndex, annotation);\n\n          if (textMarkupAnnotation) {\n            this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n            this.textMarkupAnnotationModule.isSelectedAnnotation = true;\n            this.textMarkupAnnotationModule.showHideDropletDiv(true);\n            this.textMarkupAnnotationModule.annotationClickPosition = null;\n            this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation, canvas, pageIndex);\n            this.textMarkupAnnotationModule.currentTextMarkupAnnotation = textMarkupAnnotation;\n            this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageIndex;\n            this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n            this.textMarkupAnnotationModule.isSelectedAnnotation = false;\n\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n              this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true; // eslint-disable-next-line max-len\n\n              this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n            }\n          }\n        } else if (annotation.shapeAnnotationType === 'stamp' || annotation.ShapeAnnotationType === 'stamp') {\n          this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n          this.pdfViewer.annotation.onAnnotationMouseDown();\n        } else if (annotation.shapeAnnotationType === 'sticky' || annotation.ShapeAnnotationType === 'sticky') {\n          this.pdfViewer.select([annotation.annotationId], currentSelector);\n          this.pdfViewer.annotation.onAnnotationMouseDown();\n        } else if (annotation.uniqueKey) {\n          this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n          this.pdfViewer.annotation.onAnnotationMouseDown();\n        } else {\n          this.pdfViewer.select([annotation.annotationId], currentSelector);\n          this.pdfViewer.annotation.onAnnotationMouseDown();\n        } // eslint-disable-next-line max-len\n\n\n        var commentElement = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n\n        if (commentElement && commentElement.style.display === 'block') {\n          // eslint-disable-next-line\n          var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n\n          if (accordionExpand) {\n            accordionExpand.ej2_instances[0].expandItem(true);\n          } // eslint-disable-next-line\n\n\n          var commentsDiv = document.getElementById(id);\n\n          if (commentsDiv) {\n            if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n              commentsDiv.firstChild.click();\n            }\n          }\n        }\n      }\n\n      this.isAnnotationSelected = false;\n      this.selectAnnotationId = null;\n      this.annotationPageIndex = null;\n    }\n  };\n  /**\n   * @param pageIndex\n   * @private\n   */\n\n\n  Annotation.prototype.findRenderPageList = function (pageIndex) {\n    var isRender = false; // eslint-disable-next-line\n\n    var pageList = this.pdfViewerBase.renderedPagesList;\n\n    if (pageList) {\n      for (var i = 0; i < pageList.length; i++) {\n        if (pageList[i] === pageIndex) {\n          isRender = true;\n          return isRender;\n        }\n      }\n    }\n\n    return isRender;\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.getPageNumberFromAnnotationCollections = function (annotation) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.annotations;\n\n    if (annotation) {\n      if (annotation.shapeAnnotationType === 'textMarkup') {\n        return annotation.pageNumber;\n      } else {\n        if (collections) {\n          for (var i = 0; i < collections.length; i++) {\n            if (collections[i].annotName === annotation.annotationId) {\n              return collections[i].pageIndex;\n            }\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.getAnnotationsFromAnnotationCollections = function (annotationId) {\n    // eslint-disable-next-line\n    var collections = this.pdfViewer.annotationCollection;\n\n    if (collections && annotationId) {\n      for (var i = 0; i < collections.length; i++) {\n        if (collections[i].annotationId === annotationId) {\n          return collections[i];\n        }\n      }\n    }\n\n    if (this.pdfViewer.selectedItems.annotations.length === 0) this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[annotationId]);\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.getTextMarkupAnnotations = function (pageIndex, annotation) {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_textMarkup'];\n    }\n\n    if (storeObject) {\n      // eslint-disable-next-line\n      var annotObject = JSON.parse(storeObject);\n      var index = this.getPageCollection(annotObject, pageIndex);\n\n      if (annotObject[index]) {\n        for (var i = 0; i < annotObject[index].annotations.length; i++) {\n          if (annotObject[index].annotations[i].annotName === annotation.annotationId) {\n            return annotObject[index].annotations[i];\n          }\n        }\n\n        return null;\n      }\n    } else {\n      return null;\n    }\n  };\n  /**\n   * @param type\n   * @param measureType\n   * @param type\n   * @param measureType\n   * @private\n   */\n\n\n  Annotation.prototype.getAnnotationType = function (type, measureType) {\n    var annotType;\n\n    if (measureType === '' || isNullOrUndefined(measureType)) {\n      switch (type) {\n        case 'Line':\n          annotType = 'Line';\n          break;\n\n        case 'LineWidthArrowHead':\n          annotType = 'Arrow';\n          break;\n\n        case 'Rectangle':\n          annotType = 'Rectangle';\n          break;\n\n        case 'Ellipse':\n          annotType = 'Circle';\n          break;\n\n        case 'Polygon':\n          annotType = 'Polygon';\n          break;\n\n        case 'Stamp':\n          annotType = 'Stamp';\n          break;\n\n        case 'Image':\n          annotType = 'Image';\n          break;\n\n        case 'FreeText':\n          annotType = 'FreeText';\n          break;\n\n        case 'Ink':\n          annotType = 'Ink';\n          break;\n\n        case 'StickyNotes':\n          annotType = 'StickyNotes';\n          break;\n      }\n    } else {\n      switch (measureType) {\n        case 'Distance':\n          annotType = 'Distance';\n          break;\n\n        case 'Perimeter':\n          annotType = 'Perimeter';\n          break;\n\n        case 'Area':\n          annotType = 'Area';\n          break;\n\n        case 'Radius':\n          annotType = 'Radius';\n          break;\n\n        case 'Volume':\n          annotType = 'Volume';\n          break;\n      }\n    }\n\n    return annotType;\n  };\n  /**\n   * @param pageNumber\n   * @param annotationId\n   * @private\n   */\n\n\n  Annotation.prototype.getAnnotationIndex = function (pageNumber, annotationId) {\n    var pageAnnotationBases = this.pdfViewer.drawing.getPageObjects(pageNumber);\n    var index = null;\n\n    for (var i = 0; i < pageAnnotationBases.length; i++) {\n      if (pageAnnotationBases[i].id === annotationId) {\n        index = i;\n        break;\n      }\n    }\n\n    return index;\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.initializeCollection = function () {\n    this.actionCollection = [];\n    this.redoCollection = [];\n    this.pdfViewerBase.customStampCollection = [];\n\n    if (!this.popupNote) {\n      this.createNote();\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.showCommentsPanel = function () {\n    if (this.pdfViewer.enableCommentPanel) {\n      var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n\n      if (commentPanel) {\n        if (commentPanel.style.display === 'none') {\n          commentPanel.style.display = 'block';\n\n          if (Browser.isDevice && !isBlazor()) {\n            // eslint:disable-next-line\n            var viewer = document.getElementById(this.pdfViewer.element.id + '_viewerMainContainer'); // eslint:disable-next-line\n\n            viewer.insertBefore(this.pdfViewerBase.navigationPane.commentPanelContainer, this.pdfViewer.toolbarModule.toolbarElement);\n          }\n\n          if (this.pdfViewerBase.navigationPane.commentPanelResizer) {\n            this.pdfViewerBase.navigationPane.commentPanelResizer.style.display = 'block';\n          }\n\n          this.pdfViewerBase.navigationPane.setCommentPanelResizeIconTop();\n          this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();\n          var viewerContainer = document.getElementById(this.pdfViewer.element.id + '_viewerContainer');\n          var pageContainer = document.getElementById(this.pdfViewer.element.id + '_pageViewContainer');\n\n          if (viewerContainer) {\n            if (this.pdfViewer.enableRtl) {\n              viewerContainer.style.left = this.pdfViewerBase.navigationPane.getViewerContainerRight() + 'px';\n            } else {\n              viewerContainer.style.right = this.pdfViewerBase.navigationPane.getViewerContainerRight() + 'px';\n            } // eslint-disable-next-line max-len\n\n\n            viewerContainer.style.width = this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - this.pdfViewerBase.navigationPane.getViewerContainerRight() + 'px';\n            pageContainer.style.width = viewerContainer.offsetWidth - this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth() + 'px';\n          }\n\n          this.pdfViewerBase.updateZoomValue();\n\n          if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n            this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);\n          }\n\n          if (Browser.isDevice && !isBlazor()) {\n            commentPanel.style.height = this.pdfViewerBase.viewerMainContainer.clientHeight + 'px';\n\n            if (this.pdfViewer.selectedItems.annotations.length > 0) {\n              // eslint:disable-next-line\n              var commentDiv = document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);\n\n              if (commentDiv && commentDiv.lastElementChild.children[1] && commentDiv.lastElementChild.children[1].ej2_instances) {\n                commentDiv.lastElementChild.children[1].ej2_instances[0].enableEditMode = true;\n              } else if (commentDiv && commentDiv.lastElementChild.ej2_instances) {\n                commentDiv.lastElementChild.ej2_instances[0].enableEditMode = true;\n                commentDiv.lastElementChild.style.display = 'block';\n                commentDiv.lastElementChild.children[1] ? commentDiv.lastElementChild.children[1].style.display = 'block' : null;\n              }\n            }\n\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar) {\n              this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display = 'none';\n\n              if (this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar.element.style.display = 'none';\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param index\n   * @param annotation\n   * @param actionString\n   * @param property\n   * @param node\n   * @param redo\n   * @param pageNumber\n   * @param index\n   * @param annotation\n   * @param actionString\n   * @param property\n   * @param node\n   * @param redo\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.addAction = function ( // eslint-disable-next-line\n  pageNumber, index, annotation, actionString, property, node, redo) {\n    var action = {\n      pageIndex: pageNumber,\n      index: index,\n      annotation: annotation,\n      action: actionString,\n      modifiedProperty: property,\n      undoElement: node,\n      redoElement: redo\n    };\n    this.actionCollection.push(action);\n    this.updateToolbar();\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.undo = function () {\n    var actionObject = this.actionCollection.pop();\n\n    if (actionObject) {\n      // eslint-disable-next-line\n      var shapeType = actionObject.annotation.shapeAnnotationType;\n      this.isUndoRedoAction = true;\n      this.isUndoAction = true;\n\n      switch (actionObject.action) {\n        case 'Text Markup Added':\n        case 'Text Markup Deleted':\n          if (this.textMarkupAnnotationModule) {\n            // eslint-disable-next-line max-len\n            this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n          }\n\n          break;\n\n        case 'Text Markup Property modified':\n          if (this.textMarkupAnnotationModule) {\n            // eslint-disable-next-line max-len\n            actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty, true);\n          }\n\n          break;\n\n        case 'Drag':\n        case 'Resize':\n          if (isLineShapes(actionObject.annotation)) {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n              bounds: actionObject.undoElement.bounds,\n              vertexPoints: actionObject.undoElement.vertexPoints,\n              leaderHeight: actionObject.undoElement.leaderHeight\n            });\n          } else {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n              bounds: actionObject.undoElement.bounds\n            });\n          } // eslint-disable-next-line max-len\n\n\n          if (actionObject.annotation.measureType === 'Distance' || actionObject.annotation.measureType === 'Perimeter' || actionObject.annotation.measureType === 'Area' || actionObject.annotation.measureType === 'Radius' || actionObject.annotation.measureType === 'Volume') {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n              notes: actionObject.undoElement.notes\n            });\n            this.updateCalibrateValues(actionObject.annotation);\n          }\n\n          if (actionObject.annotation.formFieldAnnotationType) {\n            this.pdfViewer.formDesigner.updateHTMLElement(actionObject.annotation);\n          }\n\n          this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n          this.pdfViewer.select([actionObject.annotation.id]); // eslint-disable-next-line max-len\n\n          if (actionObject.annotation.shapeAnnotationType === 'Line' || actionObject.annotation.shapeAnnotationType === 'Rectangle' || actionObject.annotation.shapeAnnotationType === 'Ellipse' || actionObject.annotation.shapeAnnotationType === 'Polygon' || actionObject.annotation.shapeAnnotationType === 'LineWidthArrowHead' || actionObject.annotation.shapeAnnotationType === 'Radius' || actionObject.annotation.shapeAnnotationType === 'FreeText' || actionObject.annotation.shapeAnnotationType === 'HandWrittenSignature' || actionObject.annotation.shapeAnnotationType === 'SignatureText' || actionObject.annotation.shapeAnnotationType === 'SignatureImage' || actionObject.annotation.shapeAnnotationType === 'Ink') {\n            this.modifyInCollections(actionObject.annotation, 'bounds');\n          }\n\n          break;\n\n        case 'Addition':\n          if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n            this.pdfViewer.formDesigner.deleteFormField(actionObject.undoElement.id, false);\n          } else {\n            var isAnnotationUpdate = false; // eslint-disable-next-line max-len\n\n            if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n              if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, 'shape');\n              } else {\n                this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, 'measure');\n              }\n\n              isAnnotationUpdate = true; // eslint-disable-next-line\n\n              var annotationObject = actionObject.annotation; // eslint-disable-next-line\n\n              var wrapper = annotationObject.wrapper ? annotationObject.wrapper : null;\n\n              if (wrapper && wrapper.bounds) {\n                actionObject.annotation.bounds = wrapper.bounds;\n              }\n\n              actionObject.duplicate = this.modifyInCollections(actionObject.annotation, 'delete');\n            }\n\n            if (shapeType === 'Stamp' || shapeType === 'Image') {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete'); // eslint-disable-next-line max-len\n\n              this.stampAnnotationModule.updateSessionStorage(actionObject.annotation, null, 'delete');\n              isAnnotationUpdate = true;\n            }\n\n            if (shapeType === 'FreeText' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureImage' || shapeType === 'SignatureText' || shapeType === 'Ink') {\n              isAnnotationUpdate = true; // eslint-disable-next-line max-len\n\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n              actionObject.duplicate = this.modifyInCollections(actionObject.annotation, 'delete');\n            }\n\n            if (!isAnnotationUpdate) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n            }\n\n            this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n            this.pdfViewer.remove(actionObject.annotation);\n            this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex); // eslint-disable-next-line\n\n            var removeDiv = document.getElementById(actionObject.annotation.annotName);\n\n            if (removeDiv) {\n              if (removeDiv.parentElement.childElementCount === 1) {\n                this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);\n              } else {\n                removeDiv.parentElement.removeChild(removeDiv);\n              }\n            }\n\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n              var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n\n              if (mobileAnnotationToolbar && mobileAnnotationToolbar.children.length > 0) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated = false;\n                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n              }\n            }\n          }\n\n          break;\n\n        case 'Delete':\n          if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n            actionObject.undoElement.bounds.x = actionObject.undoElement.wrapper.bounds.x;\n            actionObject.undoElement.bounds.y = actionObject.undoElement.wrapper.bounds.y;\n            this.pdfViewer.formDesigner.drawFormField(actionObject.undoElement);\n          } else {\n            // eslint-disable-next-line max-len\n            if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n              if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                shapeType = 'shape';\n                this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n              } else {\n                shapeType = 'shape_measure';\n                this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n              }\n            }\n\n            if (shapeType === 'Stamp' || shapeType === 'Image') {\n              this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex, actionObject.annotation);\n            } else if (shapeType === 'FreeText') {\n              this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n            } else if (shapeType === 'Ink') {\n              this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n            }\n\n            var addedAnnot = this.pdfViewer.add(actionObject.annotation);\n\n            if ((shapeType === 'FreeText' || addedAnnot.enableShapeLabel) && addedAnnot) {\n              this.pdfViewer.nodePropertyChange(addedAnnot, {});\n            }\n\n            var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n\n            if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n              formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[0]);\n              if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[1]);\n              var key = actionObject.annotation.id.split('_')[0] + '_content';\n              var data = null;\n\n              if (this.pdfViewer.formDesignerModule) {\n                data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n              }\n\n              if (data) {\n                var formFieldsData = JSON.parse(data);\n\n                for (var i = 0; i < formFieldsData.length; i++) {\n                  if (formFieldsData[i].Key === key) {\n                    if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") {\n                      formFieldsData[i].FormField.signatureType = \"Text\";\n                      formFieldsData[i].FormField.value = actionObject.annotation.data;\n                      this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                      this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                    } else if (actionObject.annotation.shapeAnnotationType === \"SignatureImage\") {\n                      formFieldsData[i].FormField.signatureType = \"Image\";\n                      formFieldsData[i].FormField.value = actionObject.annotation.data;\n                      this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                      this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                    } else {\n                      formFieldsData[i].FormField.signatureType = \"Path\";\n                      this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                      var collectionData = processPathData(actionObject.annotation.data);\n                      var csData = splitArrayCollection(collectionData);\n                      formFieldsData[i].FormField.value = JSON.stringify(csData);\n                      this.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                    }\n                  }\n                }\n\n                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n              }\n            }\n\n            this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex); // eslint-disable-next-line max-len\n\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex, shapeType);\n          }\n\n          break;\n\n        case 'stampOpacity':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            opacity: actionObject.undoElement.opacity\n          });\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n          break;\n\n        case 'Shape Stroke':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            strokeColor: actionObject.undoElement.strokeColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'stroke');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Shape Fill':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fillColor: actionObject.undoElement.fillColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'fill');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Shape Opacity':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            opacity: actionObject.undoElement.opacity\n          });\n\n          if (actionObject.annotation.shapeAnnotationType === 'StickyNotes') {\n            this.stickyNotesAnnotationModule.updateOpacityValue(actionObject.annotation);\n            this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n            actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n          } else {\n            this.modifyInCollections(actionObject.annotation, 'opacity');\n          }\n\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Shape Thickness':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            thickness: actionObject.undoElement.thickness\n          });\n          this.modifyInCollections(actionObject.annotation, 'thickness');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Line properties change':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            // eslint-disable-next-line max-len\n            fillColor: actionObject.undoElement.fillColor,\n            borderDashArray: actionObject.undoElement.borderDashArray,\n            borderStyle: actionObject.undoElement.borderStyle,\n            // eslint-disable-next-line max-len\n            strokeColor: actionObject.undoElement.strokeColor,\n            opacity: actionObject.undoElement.opacity,\n            thickness: actionObject.undoElement.thickness,\n            sourceDecoraterShapes: this.getArrowType(actionObject.undoElement.lineHeadStart),\n            taregetDecoraterShapes: this.getArrowType(actionObject.undoElement.lineHeadEnd)\n          });\n          this.updateCollectionForLineProperty(actionObject.annotation);\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Text Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n          break;\n\n        case 'Comments Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          break;\n\n        case 'Status Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          break;\n\n        case 'Comments Reply Deleted':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          break;\n\n        case 'dynamicText Change':\n          this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = true;\n          actionObject.annotation.dynamicText = actionObject.undoElement.dynamicText;\n\n          if (this.pdfViewer.selectedItems.annotations[0]) {\n            this.pdfViewer.selectedItems.annotations[0].dynamicText = actionObject.undoElement.dynamicText;\n          } // eslint-disable-next-line\n\n\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          this.modifyInCollections(actionObject.annotation, 'dynamicText');\n\n          if (this.pdfViewer.selectedItems.annotations[0]) {\n            this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], {});\n          } else {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {});\n          }\n\n          this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = false;\n          this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n          break;\n\n        case 'fontColor':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fontColor: actionObject.undoElement.fontColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'fontColor');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'fontSize':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fontSize: actionObject.undoElement.fontSize\n          });\n          this.modifyInCollections(actionObject.annotation, 'fontSize');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'fontFamily':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fontFamily: actionObject.undoElement.fontFamily\n          });\n          this.modifyInCollections(actionObject.annotation, 'fontFamily');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'textAlign':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            textAlign: actionObject.undoElement.textAlign\n          });\n          this.modifyInCollections(actionObject.annotation, 'textAlign');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'textPropertiesChange':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            font: actionObject.undoElement.font\n          });\n          this.modifyInCollections(actionObject.annotation, 'textPropertiesChange');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Rotate':\n          // eslint-disable-next-line max-len\n          this.pdfViewer.nodePropertyChange(actionObject.annotation.annotations[0], {\n            bounds: actionObject.undoElement.bounds,\n            rotateAngle: actionObject.undoElement.rotateAngle\n          });\n          this.modifyInCollections(actionObject.annotation.annotations[0], 'bounds');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'FormDesigner Properties Change':\n          if (actionObject.undoElement && actionObject.undoElement.isMultiline !== actionObject.redoElement.isMultiline) {\n            this.undoRedoMultiline(actionObject.undoElement);\n          }\n\n          this.updateFormFieldPropertiesChanges(actionObject.undoElement.formFieldAnnotationType, actionObject.undoElement);\n          break;\n\n        case 'FormField Value Change':\n          if (actionObject.annotation.formFieldAnnotationType) {\n            if (actionObject.annotation.formFieldAnnotationType == \"RadioButton\") {\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.undoElement, false);\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.redoElement, true);\n            } else {\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.annotation, actionObject.undoElement);\n            }\n          } else {\n            var spanElement = document.getElementById(actionObject.annotation.id + \"_html_element\").children[0].children[0];\n            spanElement.className = 'e-pdfviewer-signatureformfields';\n            var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n            var annotationObj = this.pdfViewer.nameTable[actionObject.annotation.id];\n            formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotationObj.wrapper.children[0]), 1);\n            if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotationObj.wrapper.children[1]), 1);\n            var key = actionObject.annotation.id.split('_')[0] + '_content';\n            var data = null;\n\n            if (this.pdfViewer.formDesignerModule) {\n              data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n            }\n\n            if (data) {\n              var formFieldsData = JSON.parse(data);\n\n              for (var i = 0; i < formFieldsData.length; i++) {\n                if (formFieldsData[i].Key === key) {\n                  formFieldsData[i].FormField.value = '';\n                  formFieldsData[i].FormField.signatureType = '';\n                  this.pdfViewerBase.formFieldCollection[i].FormField.value = '';\n                  this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = '';\n                }\n              }\n\n              this.pdfViewer.remove(actionObject.annotation);\n              this.pdfViewer.renderDrawing();\n              this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n            }\n          }\n\n      }\n\n      this.redoCollection.push(actionObject);\n      this.updateToolbar();\n      this.isUndoRedoAction = false;\n      this.isUndoAction = false;\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.redo = function () {\n    var actionObject = this.redoCollection.pop();\n\n    if (actionObject) {\n      // eslint-disable-next-line\n      var shapeType = actionObject.annotation.shapeAnnotationType;\n      this.isUndoRedoAction = true;\n\n      switch (actionObject.action) {\n        case 'Text Markup Property modified':\n          if (this.textMarkupAnnotationModule) {\n            // eslint-disable-next-line max-len\n            actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n          }\n\n          break;\n\n        case 'Text Markup Added':\n        case 'Text Markup Deleted':\n          if (this.textMarkupAnnotationModule) {\n            // eslint-disable-next-line max-len\n            this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n          }\n\n          break;\n\n        case 'Drag':\n        case 'Resize':\n          if (isLineShapes(actionObject.annotation)) {\n            this.pdfViewer.nodePropertyChange( // eslint-disable-next-line max-len\n            actionObject.annotation, {\n              bounds: actionObject.redoElement.bounds,\n              vertexPoints: actionObject.redoElement.vertexPoints,\n              leaderHeight: actionObject.redoElement.leaderHeight\n            });\n          } else {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n              bounds: actionObject.redoElement.bounds\n            });\n          } // eslint-disable-next-line max-len\n\n\n          if (actionObject.annotation.measureType === 'Distance' || actionObject.annotation.measureType === 'Perimeter' || actionObject.annotation.measureType === 'Area' || actionObject.annotation.measureType === 'Radius' || actionObject.annotation.measureType === 'Volume') {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n              notes: actionObject.redoElement.notes\n            });\n            this.updateCalibrateValues(actionObject.annotation);\n          }\n\n          if (actionObject.annotation.formFieldAnnotationType) {\n            this.pdfViewer.formDesigner.updateHTMLElement(actionObject.annotation);\n          }\n\n          this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n          this.pdfViewer.select([actionObject.annotation.id]); // eslint-disable-next-line max-len\n\n          if (actionObject.annotation.shapeAnnotationType === 'Line' || actionObject.annotation.shapeAnnotationType === 'Rectangle' || actionObject.annotation.shapeAnnotationType === 'Ellipse' || actionObject.annotation.shapeAnnotationType === 'Polygon' || actionObject.annotation.shapeAnnotationType === 'LineWidthArrowHead' || actionObject.annotation.shapeAnnotationType === 'Radius' || actionObject.annotation.shapeAnnotationType === 'FreeText' || actionObject.annotation.shapeAnnotationType === 'HandWrittenSignature' || actionObject.annotation.shapeAnnotationType === 'SignatureText' || actionObject.annotation.shapeAnnotationType === 'SignatureImage' || actionObject.annotation.shapeAnnotationType === 'Ink') {\n            this.modifyInCollections(actionObject.annotation, 'bounds');\n          }\n\n          break;\n\n        case 'Addition':\n          if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n            actionObject.redoElement.bounds.x = actionObject.redoElement.wrapper.bounds.x;\n            actionObject.redoElement.bounds.y = actionObject.redoElement.wrapper.bounds.y;\n            this.pdfViewer.formDesigner.drawFormField(actionObject.redoElement);\n          } else {\n            // eslint-disable-next-line max-len\n            if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n              if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                shapeType = 'shape';\n                this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n              } else {\n                shapeType = 'shape_measure';\n                this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n              }\n            }\n\n            if (shapeType === 'FreeText') {\n              this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n            }\n\n            if (shapeType === 'Stamp') {\n              this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex, actionObject.redoElement);\n            }\n\n            if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n              this.pdfViewerBase.signatureModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n            }\n\n            if (shapeType === 'Ink') {\n              this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n            }\n\n            var addedAnnot = this.pdfViewer.add(actionObject.annotation);\n            this.pdfViewer.select([actionObject.annotation.id]);\n\n            if ((shapeType === 'FreeText' || addedAnnot.enableShapeLabel) && addedAnnot) {\n              this.pdfViewer.nodePropertyChange(addedAnnot, {});\n            }\n\n            this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex); // eslint-disable-next-line max-len\n\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex, shapeType);\n\n            if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n              var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n\n              if (mobileAnnotationToolbar && mobileAnnotationToolbar.children.length > 0) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated = false;\n                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n              }\n            }\n          }\n\n          break;\n\n        case 'Delete':\n          if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n            this.pdfViewer.formDesigner.deleteFormField(actionObject.redoElement.id, false);\n          } else {\n            var isUpdate = false;\n            var sType = actionObject.annotation.shapeAnnotationType; // eslint-disable-next-line max-len\n\n            if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n              if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                sType = 'shape';\n              } else {\n                sType = 'measure';\n              } // eslint-disable-next-line max-len\n\n\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n              this.modifyInCollections(actionObject.annotation, 'delete');\n              isUpdate = true;\n            }\n\n            if (shapeType === 'Stamp') {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n              this.stampAnnotationModule.updateSessionStorage(actionObject.annotation, null, 'delete');\n              isUpdate = true;\n            }\n\n            if (shapeType === 'FreeText' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n              this.modifyInCollections(actionObject.annotation, 'delete');\n            }\n\n            if (!isUpdate) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n            }\n\n            var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n\n            if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n              formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[0]), 1);\n              if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[1]), 1);\n              var key = actionObject.annotation.id.split('_')[0] + '_content';\n              var data = null;\n\n              if (this.pdfViewer.formDesignerModule) {\n                data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n              }\n\n              if (data) {\n                var formFieldsData = JSON.parse(data);\n\n                for (var i = 0; i < formFieldsData.length; i++) {\n                  if (formFieldsData[i].Key === key) {\n                    formFieldsData[i].FormField.value = '';\n                    formFieldsData[i].FormField.signatureType = '';\n                    this.pdfViewerBase.formFieldCollection[i].FormField.value = '';\n                    this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = '';\n                  }\n                }\n\n                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n              }\n            }\n\n            this.pdfViewer.clearSelection(actionObject.annotation.pageIndex);\n            this.pdfViewer.remove(actionObject.annotation);\n            this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex); // eslint-disable-next-line\n\n            var removeDiv = document.getElementById(actionObject.annotation.annotName);\n\n            if (removeDiv) {\n              if (removeDiv.parentElement.childElementCount === 1) {\n                this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);\n              } else {\n                removeDiv.remove();\n              }\n            }\n          }\n\n          break;\n\n        case 'stampOpacity':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            opacity: actionObject.redoElement.opacity\n          });\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          break;\n\n        case 'Shape Stroke':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            strokeColor: actionObject.redoElement.strokeColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'stroke');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Shape Fill':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fillColor: actionObject.redoElement.fillColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'fill');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Shape Opacity':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            opacity: actionObject.redoElement.opacity\n          });\n\n          if (actionObject.annotation.shapeAnnotationType === 'StickyNotes') {\n            this.stickyNotesAnnotationModule.updateOpacityValue(actionObject.annotation);\n            this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          } else {\n            this.modifyInCollections(actionObject.annotation, 'opacity');\n          }\n\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Shape Thickness':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            thickness: actionObject.redoElement.thickness\n          });\n          this.modifyInCollections(actionObject.annotation, 'thickness');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Line properties change':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            // eslint-disable-next-line max-len\n            fillColor: actionObject.redoElement.fillColor,\n            strokeColor: actionObject.redoElement.strokeColor,\n            opacity: actionObject.redoElement.opacity,\n            thickness: actionObject.redoElement.thickness,\n            sourceDecoraterShapes: this.getArrowType(actionObject.redoElement.lineHeadStart),\n            taregetDecoraterShapes: this.getArrowType(actionObject.redoElement.lineHeadEnd),\n            borderDashArray: actionObject.redoElement.borderDashArray,\n            borderStyle: actionObject.redoElement.borderStyle\n          });\n          this.updateCollectionForLineProperty(actionObject.annotation);\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Text Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          break;\n\n        case 'Comments Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          break;\n\n        case 'Status Property Added':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action);\n          break;\n\n        case 'Comments Reply Deleted':\n          // eslint-disable-next-line max-len\n          actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action);\n          break;\n\n        case 'dynamicText Change':\n          this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = true;\n          actionObject.annotation.dynamicText = actionObject.redoElement.dynamicText; // eslint-disable-next-line\n\n          var annotation = this.pdfViewer.selectedItems.annotations[0];\n\n          if (annotation) {\n            annotation.dynamicText = actionObject.redoElement.dynamicText;\n            annotation.bounds.height = actionObject.redoElement.bounds.height;\n          } // eslint-disable-next-line max-len\n\n\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n          this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n          this.modifyInCollections(actionObject.annotation, 'dynamicText');\n\n          if (annotation) {\n            this.pdfViewer.nodePropertyChange(annotation, {});\n          } else {\n            this.pdfViewer.nodePropertyChange(actionObject.annotation, {});\n          }\n\n          this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = false;\n          this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n          this.pdfViewer.select([actionObject.annotation.id]);\n          break;\n\n        case 'fontColor':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fontColor: actionObject.redoElement.fontColor\n          });\n          this.modifyInCollections(actionObject.annotation, 'fontColor');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'fontSize':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            fontSize: actionObject.redoElement.fontSize\n          });\n          this.modifyInCollections(actionObject.annotation, 'fontSize');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'textAlign':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            textAlign: actionObject.redoElement.textAlign\n          });\n          this.modifyInCollections(actionObject.annotation, 'textAlign');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'textPropertiesChange':\n          this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n            font: actionObject.redoElement.font\n          });\n          this.modifyInCollections(actionObject.annotation, 'textPropertiesChange');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'Rotate':\n          // eslint-disable-next-line max-len\n          this.pdfViewer.nodePropertyChange(actionObject.annotation.annotations[0], {\n            bounds: actionObject.redoElement.bounds,\n            rotateAngle: actionObject.redoElement.rotateAngle\n          });\n          this.modifyInCollections(actionObject.annotation.annotations[0], 'bounds');\n          this.pdfViewer.renderDrawing();\n          break;\n\n        case 'FormDesigner Properties Change':\n          if (actionObject.redoElement && actionObject.undoElement.isMultiline !== actionObject.redoElement.isMultiline) {\n            this.undoRedoMultiline(actionObject.redoElement);\n          }\n\n          this.updateFormFieldPropertiesChanges(actionObject.redoElement.formFieldAnnotationType, actionObject.redoElement);\n          break;\n\n        case 'FormField Value Change':\n          if (actionObject.annotation.formFieldAnnotationType) {\n            if (actionObject.annotation.formFieldAnnotationType == \"RadioButton\") {\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.undoElement, true);\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.redoElement, false);\n            } else {\n              this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.annotation, actionObject.redoElement);\n            }\n          } else {\n            var spanElement = document.getElementById(actionObject.annotation.id + \"_html_element\").children[0].children[0];\n            spanElement.className = 'e-pdfviewer-signatureformfields-signature';\n            var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n            var annotationObj = this.pdfViewer.nameTable[actionObject.annotation.id];\n            formFieldObj.wrapper.children.push(annotationObj.wrapper.children[0]);\n            if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") formFieldObj.wrapper.children.push(annotationObj.wrapper.children[1]);\n            var key = actionObject.annotation.id.split('_')[0] + '_content';\n            var data = null;\n\n            if (this.pdfViewer.formDesignerModule) {\n              data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n            }\n\n            if (data) {\n              var formFieldsData = JSON.parse(data);\n\n              for (var i = 0; i < formFieldsData.length; i++) {\n                if (formFieldsData[i].Key === key) {\n                  if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") {\n                    formFieldsData[i].FormField.signatureType = \"Text\";\n                    formFieldsData[i].FormField.value = actionObject.annotation.data;\n                    this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                    this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                  } else if (actionObject.annotation.shapeAnnotationType === \"SignatureImage\") {\n                    formFieldsData[i].FormField.signatureType = \"Image\";\n                    formFieldsData[i].FormField.value = actionObject.annotation.data;\n                    this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                    this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                  } else {\n                    formFieldsData[i].FormField.signatureType = \"Path\";\n                    this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                    var collectionData = processPathData(actionObject.annotation.data);\n                    var csData = splitArrayCollection(collectionData);\n                    formFieldsData[i].FormField.value = JSON.stringify(csData);\n                    this.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                  }\n                }\n              }\n\n              this.pdfViewer.add(actionObject.annotation);\n              var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + actionObject.pageIndex);\n              this.pdfViewer.renderDrawing(canvass, actionObject.pageIndex);\n              this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n            }\n          }\n\n      }\n\n      if (actionObject.redoElement && actionObject.redoElement.modifiedDate !== undefined) {\n        actionObject.annotation.modifiedDate = actionObject.redoElement.modifiedDate;\n      }\n\n      this.actionCollection.push(actionObject);\n      this.updateToolbar();\n      this.isUndoRedoAction = false;\n    }\n  };\n\n  Annotation.prototype.undoRedoMultiline = function (element) {\n    if (element.isMultiline && element.formFieldAnnotationType === 'Textbox') {\n      this.pdfViewer.formDesignerModule.renderMultilineText(element, true);\n    } else if (element.formFieldAnnotationType === 'Textbox') {\n      this.pdfViewer.formDesignerModule.renderTextbox(element, true);\n    }\n  };\n\n  Annotation.prototype.updateFormFieldValueChange = function (formFieldAnnotationType, annotation, value) {\n    if (annotation) {\n      var formFieldModel = this.pdfViewer.formDesigner.getFormField(annotation.id.split(\"_\")[0]);\n      var data = null;\n\n      if (this.pdfViewer.formDesignerModule) {\n        data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n      }\n\n      if (data) {\n        var formFieldsData = JSON.parse(data);\n        var index = this.pdfViewer.formDesigner.getFormFiledIndex(annotation.id.split('_')[0]);\n\n        switch (formFieldAnnotationType) {\n          case 'Textbox':\n          case 'PasswordField':\n          case 'RadioButton':\n          case 'DropdownList':\n          case 'ListBox':\n            var inputElement = document.getElementById(annotation.id.split(\"_\")[0] + \"_content_html_element\").firstElementChild.firstElementChild;\n\n            if (formFieldAnnotationType == 'Textbox' || formFieldAnnotationType == 'PasswordField') {\n              formFieldModel.value = value;\n              this.pdfViewer.formDesigner.updateValuePropertyChange(formFieldModel, inputElement, true, index, formFieldsData);\n            } else if (formFieldAnnotationType == 'RadioButton') {\n              formFieldModel.isSelected = value;\n              this.pdfViewer.formDesigner.updateIsSelectedPropertyChange(formFieldModel, inputElement.firstElementChild, true, index, formFieldsData);\n            } else if (formFieldAnnotationType == 'DropdownList' || formFieldAnnotationType == 'ListBox') {\n              formFieldModel.selectedIndex = value;\n              formFieldsData[index].FormField.selectedIndex = value;\n              this.pdfViewerBase.formFieldCollection[index].FormField.selectedIndex = value;\n              this.pdfViewer.nameTable[formFieldsData[index].Key.split(\"_\")[0]].selectedIndex = value;\n\n              if (formFieldAnnotationType == 'ListBox') {\n                for (var k = 0; k < inputElement.options.length; k++) {\n                  inputElement.options[k].selected = value.includes(k) ? true : false;\n                }\n              } else {\n                inputElement.selectedIndex = value;\n              }\n            }\n\n            break;\n\n          case 'Checkbox':\n            var checkboxDivElement = document.getElementById(annotation.id.split(\"_\")[0] + \"_content_html_element\").firstElementChild.firstElementChild.lastElementChild;\n            formFieldModel.isChecked = value;\n            this.pdfViewer.formDesigner.updateIsCheckedPropertyChange(formFieldModel, checkboxDivElement, true, index, formFieldsData);\n            break;\n        }\n\n        this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n      }\n    }\n  };\n\n  Annotation.prototype.updateFormFieldPropertiesChanges = function (formFieldAnnotationType, element) {\n    switch (formFieldAnnotationType) {\n      case 'Textbox':\n      case 'PasswordField':\n        this.pdfViewer.formDesigner.updateTextboxFormDesignerProperties(element, true);\n        break;\n\n      case 'Checkbox':\n        this.pdfViewer.formDesigner.updateCheckboxFormDesignerProperties(element, true);\n        break;\n\n      case 'RadioButton':\n        this.pdfViewer.formDesigner.updateRadioButtonDesignerProperties(element, true);\n        break;\n\n      case 'DropdownList':\n        this.pdfViewer.formDesigner.updateDropdownFormDesignerProperties(element, true);\n        break;\n\n      case 'ListBox':\n        this.pdfViewer.formDesigner.updateListBoxFormDesignerProperties(element, true);\n        break;\n\n      case 'SignatureField':\n      case 'InitialField':\n        this.pdfViewer.formDesigner.updateSignatureTextboxProperties(element, true);\n    }\n  };\n\n  Annotation.prototype.updateCollectionForLineProperty = function (pdfAnnotationBase) {\n    this.modifyInCollections(pdfAnnotationBase, 'fill');\n    this.modifyInCollections(pdfAnnotationBase, 'stroke');\n    this.modifyInCollections(pdfAnnotationBase, 'opacity');\n    this.modifyInCollections(pdfAnnotationBase, 'thickness');\n    this.modifyInCollections(pdfAnnotationBase, 'dashArray');\n    this.modifyInCollections(pdfAnnotationBase, 'startArrow');\n    this.modifyInCollections(pdfAnnotationBase, 'endArrow');\n  };\n\n  Annotation.prototype.updateToolbar = function (isAnnotationDelete) {\n    if (this.pdfViewer.toolbarModule) {\n      this.pdfViewer.toolbarModule.updateUndoRedoButtons();\n    }\n\n    if (this.actionCollection && this.actionCollection.length == 0) {\n      this.pdfViewerBase.updateDocumentEditedProperty(false);\n    } else {\n      this.pdfViewerBase.updateDocumentEditedProperty(true);\n    }\n\n    if (isAnnotationDelete) {\n      //This below lines are commented for the below task -EJ2-61754-IsDocumentEdited API is not Properly working for delete annotations\n      //Also refer EJ2-55205-The isDocumentEdited property is False on adding handwritten signature\n      // let isEdited: boolean = false;\n      // if (this.pdfViewer.annotationCollection && this.pdfViewer.annotationCollection.length > 0 && this.pdfViewer.signatureCollection && this.pdfViewer.signatureCollection.length > 0) {\n      //     isEdited = true;\n      // }\n      // if (!isEdited && this.pdfViewer.isDocumentEdited) {\n      this.pdfViewerBase.updateDocumentEditedProperty(true); // }\n    }\n  };\n\n  Annotation.prototype.createNote = function () {\n    // eslint-disable-next-line max-len\n    this.popupNote = createElement('div', {\n      id: this.pdfViewer.element.id + '_annotation_note',\n      className: 'e-pv-annotation-note',\n      styles: 'display:none'\n    });\n    this.popupNoteAuthor = createElement('div', {\n      id: this.pdfViewer.element.id + '_annotation_note_author',\n      className: 'e-pv-annotation-note-author'\n    });\n    this.popupNote.appendChild(this.popupNoteAuthor); // eslint-disable-next-line max-len\n\n    this.popupNoteContent = createElement('div', {\n      id: this.pdfViewer.element.id + '_annotation_note_content',\n      className: 'e-pv-annotation-note-content'\n    });\n    this.popupNote.appendChild(this.popupNoteContent);\n    this.pdfViewerBase.mainContainer.appendChild(this.popupNote);\n  };\n  /**\n   * @param event\n   * @param color\n   * @param author\n   * @param note\n   * @param type\n   * @param event\n   * @param color\n   * @param author\n   * @param note\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.showPopupNote = function (event, color, author, note, type) {\n    var mainContainerPosition = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n    var popupNoteClientRect = this.popupNote.getBoundingClientRect();\n\n    if (author) {\n      this.popupNoteAuthor.textContent = author;\n    }\n\n    this.popupNoteContent.textContent = note;\n\n    if (type === 'Highlight') {\n      this.popupNote.style.backgroundColor = 'rgb(237, 232, 177)';\n    } else if (type === 'Underline') {\n      this.popupNote.style.backgroundColor = 'rgb(187, 241, 191)';\n    } else if (type === 'Strikethrough') {\n      this.popupNote.style.backgroundColor = 'rgb(242, 188, 207)';\n    }\n\n    this.popupNote.style.display = 'block';\n    var topPosition = event.pageY - mainContainerPosition.top + 5;\n    var leftPosition = event.pageX - mainContainerPosition.left + 5;\n\n    if (leftPosition + popupNoteClientRect.width > mainContainerPosition.width) {\n      leftPosition = leftPosition - popupNoteClientRect.width;\n    }\n\n    if (topPosition + popupNoteClientRect.height > mainContainerPosition.height) {\n      topPosition = topPosition - popupNoteClientRect.height;\n    }\n\n    this.popupNote.style.top = topPosition + 'px';\n    this.popupNote.style.left = leftPosition + 'px';\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.hidePopupNote = function () {\n    if (this.popupNote) {\n      this.popupNote.style.display = 'none';\n    }\n  };\n\n  Annotation.prototype.createTextMarkupPopup = function () {\n    var _this = this;\n\n    var elementId = this.pdfViewer.element.id; // eslint-disable-next-line max-len\n\n    this.popupElement = createElement('div', {\n      id: elementId + '_popup_annotation_note',\n      className: 'e-pv-annotation-popup-menu',\n      styles: 'display:none'\n    });\n    var headerElement = createElement('div', {\n      id: elementId + '_popup_header',\n      className: 'e-pv-annotation-popup-header'\n    }); // eslint-disable-next-line max-len\n\n    this.authorPopupElement = createElement('div', {\n      id: elementId + '_popup_author',\n      className: 'e-pv-annotation-popup-author'\n    });\n    headerElement.appendChild(this.authorPopupElement); // eslint-disable-next-line max-len\n\n    var closeBtn = createElement('span', {\n      id: elementId + '_popup_close',\n      className: 'e-pv-annotation-popup-close e-pv-icon'\n    });\n    headerElement.appendChild(closeBtn);\n    this.popupElement.appendChild(headerElement); // eslint-disable-next-line max-len\n\n    this.modifiedDateElement = createElement('div', {\n      id: elementId + '_popup_modified_time',\n      className: 'e-pv-annotation-modified-time'\n    });\n    this.popupElement.appendChild(this.modifiedDateElement); // eslint-disable-next-line max-len\n\n    var contentContainer = createElement('div', {\n      id: elementId + '_popup_content_container',\n      className: 'e-pv-annotation-popup-note-container'\n    });\n    this.noteContentElement = createElement('div', {\n      id: elementId + '_popup_content',\n      className: 'e-pv-annotation-popup-content'\n    });\n    this.noteContentElement.contentEditable = 'true';\n    contentContainer.appendChild(this.noteContentElement);\n    this.popupElement.appendChild(contentContainer);\n    this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);\n    closeBtn.addEventListener('click', this.saveClosePopupMenu.bind(this));\n    closeBtn.addEventListener('touchend', this.saveClosePopupMenu.bind(this));\n    this.popupElement.addEventListener('mousedown', this.onPopupElementMoveStart.bind(this));\n    this.popupElement.addEventListener('mousemove', this.onPopupElementMove.bind(this));\n    window.addEventListener('mouseup', this.onPopupElementMoveEnd.bind(this));\n    this.popupElement.addEventListener('touchstart', this.onPopupElementMoveStart.bind(this));\n    this.popupElement.addEventListener('touchmove', this.onPopupElementMove.bind(this));\n    window.addEventListener('touchend', this.onPopupElementMoveEnd.bind(this));\n    this.noteContentElement.addEventListener('mousedown', function () {\n      _this.noteContentElement.focus();\n    });\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.onPopupElementMoveStart = function (event) {\n    if (event.type === 'touchstart') {\n      event = event.changedTouches[0];\n    }\n\n    if (event.target.id !== this.noteContentElement.id || !event.target.contains(this.noteContentElement.childNodes[0])) {\n      this.isPopupMenuMoved = true;\n      var popupElementClientRect = this.popupElement.getBoundingClientRect();\n      this.clientX = event.clientX - popupElementClientRect.left; // eslint-disable-next-line max-len\n\n      this.clientY = event.clientY - popupElementClientRect.top + this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top * this.pdfViewerBase.getZoomFactor();\n    }\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.onPopupElementMove = function (event) {\n    if (event.type === 'touchmove') {\n      event = event.changedTouches[0];\n    } // eslint-disable-next-line max-len\n\n\n    if (this.isPopupMenuMoved && (event.target.id !== this.noteContentElement.id || !event.target.contains(this.noteContentElement.childNodes[0]))) {\n      var left = event.clientX - this.clientX + parseFloat(this.popupElement.style.left);\n      var top_1 = event.clientY - this.clientY + parseFloat(this.popupElement.style.top);\n      this.clientX = event.clientX;\n      this.clientY = event.clientY;\n      var clientPosition = this.popupElement.getBoundingClientRect();\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber); // eslint-disable-next-line max-len\n\n      if (left > parseFloat(pageDiv.style.left) && left + clientPosition.width < parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width)) {\n        this.popupElement.style.left = left + 'px';\n      } else {\n        this.popupElement.style.left = parseFloat(this.popupElement.style.left) + 'px';\n      } // eslint-disable-next-line max-len\n\n\n      if (top_1 > parseFloat(pageDiv.style.top) && top_1 + clientPosition.height < parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height)) {\n        this.popupElement.style.top = top_1 + 'px';\n      } else {\n        this.popupElement.style.top = parseFloat(this.popupElement.style.top) + 'px';\n      }\n    }\n  };\n\n  Annotation.prototype.onPopupElementMoveEnd = function () {\n    this.isPopupMenuMoved = false;\n  };\n\n  Annotation.prototype.saveClosePopupMenu = function () {\n    if (this.textMarkupAnnotationModule) {\n      this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber, this.noteContentElement.innerText);\n    }\n\n    this.closePopupMenu();\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.closePopupMenu = function () {\n    if (this.popupElement) {\n      this.popupElement.parentElement.removeChild(this.popupElement);\n      this.popupElement = null;\n      this.isPopupNoteVisible = false;\n    }\n  };\n  /**\n   * @param event\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.showAnnotationPopup = function (event) {\n    if (this.textMarkupAnnotationModule) {\n      this.currentAnnotPageNumber = this.getEventPageNumber(event); // eslint-disable-next-line max-len\n\n      if (this.textMarkupAnnotationModule && (event.target !== this.noteContentElement || event.target.contains(this.noteContentElement.childNodes[0]))) {\n        this.hidePopupNote();\n\n        if (!this.popupElement) {\n          this.createTextMarkupPopup();\n          this.popupElement.style.display = 'block';\n          this.authorPopupElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author; // eslint-disable-next-line max-len\n\n          this.modifiedDateElement.textContent = this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);\n          this.noteContentElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;\n          var clientPosition = this.popupElement.getBoundingClientRect(); // eslint-disable-next-line max-len\n\n          var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n          var canvasPosition = pageDiv.getBoundingClientRect();\n          var topPosition = event.clientY - canvasPosition.top + parseFloat(pageDiv.style.top);\n          var leftPosition = event.clientX;\n\n          if (leftPosition + clientPosition.width > parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width)) {\n            this.popupElement.style.left = leftPosition - clientPosition.width + 'px';\n          } else {\n            this.popupElement.style.left = leftPosition + 'px';\n          }\n\n          if (topPosition + clientPosition.height > parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height)) {\n            this.popupElement.style.top = topPosition - clientPosition.height + 'px';\n          } else {\n            this.popupElement.style.top = topPosition + 'px';\n          }\n\n          this.isPopupNoteVisible = true;\n        }\n      }\n    }\n  };\n  /**\n   * @param args\n   * @param isOpacity\n   * @param args\n   * @param isOpacity\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.modifyOpacity = function (args, isOpacity) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    var opacityValue = 1;\n\n    if (isOpacity) {\n      opacityValue = args / 100;\n    } else {\n      opacityValue = args.value / 100;\n    }\n\n    if (currentAnnotation.opacity !== opacityValue) {\n      redoClonedObject.opacity = opacityValue;\n      this.pdfViewer.nodePropertyChange(currentAnnotation, {\n        opacity: opacityValue\n      });\n\n      if (currentAnnotation.shapeAnnotationType === 'StickyNotes') {\n        this.stickyNotesAnnotationModule.updateOpacityValue(currentAnnotation);\n      } else {\n        this.modifyInCollections(currentAnnotation, 'opacity');\n      }\n\n      if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureImage' || currentAnnotation.shapeAnnotationType === 'SignatureText') {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, true, false, clonedObject.opacity, redoClonedObject.opacity);\n      } else {\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Opacity', '', clonedObject, redoClonedObject);\n      this.pdfViewer.renderDrawing();\n    }\n  };\n  /**\n   * @param currentColor\n   * @private\n   */\n\n\n  Annotation.prototype.modifyFontColor = function (currentColor) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.fontColor = currentColor;\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      fontColor: currentColor\n    });\n    this.modifyInCollections(currentAnnotation, 'fontColor');\n    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true); // eslint-disable-next-line max-len\n\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontColor', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param currentValue\n   * @private\n   */\n\n\n  Annotation.prototype.modifyFontFamily = function (currentValue) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.fontFamily = currentValue;\n\n    if (this.pdfViewer.freeTextSettings.enableAutoFit) {\n      this.updateFontFamilyRenderSize(currentAnnotation, currentValue);\n    } else {\n      this.pdfViewer.nodePropertyChange(currentAnnotation, {\n        fontFamily: currentValue\n      });\n    }\n\n    this.modifyInCollections(currentAnnotation, 'fontFamily');\n    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true); // eslint-disable-next-line max-len\n\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontFamily', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param currentValue\n   * @private\n   */\n\n\n  Annotation.prototype.modifyFontSize = function (currentValue) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.fontSize = currentValue;\n    var freeTextAnnotation = this.freeTextAnnotationModule;\n    var x = currentAnnotation.bounds.x;\n    var y = currentAnnotation.bounds.y;\n    currentAnnotation.fontSize = currentValue;\n\n    if (freeTextAnnotation && !freeTextAnnotation.isNewFreeTextAnnot && currentAnnotation.dynamicText !== '') {\n      freeTextAnnotation.addInuptElemet({\n        x: x,\n        y: y\n      }, currentAnnotation);\n\n      if (currentAnnotation) {\n        if (currentAnnotation.previousFontSize > currentValue) {\n          freeTextAnnotation.inputBoxElement.style.height = 'auto';\n          freeTextAnnotation.inputBoxElement.style.height = freeTextAnnotation.inputBoxElement.scrollHeight + 5 + 'px';\n        }\n\n        var inputEleHeight = parseFloat(freeTextAnnotation.inputBoxElement.style.height);\n        var inputEleWidth = parseFloat(freeTextAnnotation.inputBoxElement.style.width);\n        var zoomFactor = this.pdfViewerBase.getZoomFactor();\n        inputEleWidth = inputEleWidth / zoomFactor;\n        inputEleHeight = inputEleHeight / zoomFactor;\n        var heightDiff = inputEleHeight - currentAnnotation.bounds.height;\n        var y_1 = undefined;\n\n        if (heightDiff > 0) {\n          y_1 = currentAnnotation.wrapper.offsetY + heightDiff / 2;\n          y_1 = y_1 > 0 ? y_1 : undefined;\n        } else {\n          heightDiff = Math.abs(heightDiff);\n          y_1 = currentAnnotation.wrapper.offsetY - heightDiff / 2;\n          y_1 = y_1 > 0 ? y_1 : undefined;\n        }\n\n        var widthDiff = inputEleWidth - currentAnnotation.bounds.width;\n        var x_1 = undefined;\n\n        if (widthDiff > 0) {\n          x_1 = currentAnnotation.wrapper.offsetX + widthDiff / 2;\n          x_1 = x_1 > 0 ? x_1 : undefined;\n        } else {\n          widthDiff = Math.abs(widthDiff);\n          x_1 = currentAnnotation.wrapper.offsetX - widthDiff / 2;\n        }\n\n        currentAnnotation.bounds.width = inputEleWidth;\n        currentAnnotation.bounds.height = inputEleHeight; // eslint-disable-next-line max-len\n\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          fontSize: currentValue,\n          bounds: {\n            width: currentAnnotation.bounds.width,\n            height: currentAnnotation.bounds.height,\n            y: y_1,\n            x: x_1\n          }\n        });\n        this.pdfViewer.renderSelector(currentAnnotation.pageIndex, this.pdfViewer.annotationSelectorSettings);\n        currentAnnotation.previousFontSize = currentValue;\n      }\n\n      this.modifyInCollections(currentAnnotation, 'fontSize');\n      this.modifyInCollections(currentAnnotation, 'bounds');\n      this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true); // eslint-disable-next-line max-len\n\n      this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontSize', '', clonedObject, redoClonedObject);\n      this.pdfViewer.renderDrawing();\n    }\n  };\n  /**\n   * @param currentValue\n   * @private\n   */\n\n\n  Annotation.prototype.modifyTextAlignment = function (currentValue) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.textAlign = currentValue;\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      textAlign: currentValue\n    });\n    this.modifyInCollections(currentAnnotation, 'textAlign');\n    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true); // eslint-disable-next-line max-len\n\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'textAlign', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param fontInfo\n   * @param action\n   * @private\n   */\n\n\n  Annotation.prototype.modifyTextProperties = function (fontInfo, action) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n\n    if (action === 'bold') {\n      redoClonedObject.font.isBold = fontInfo.isBold;\n    } else if (action === 'italic') {\n      redoClonedObject.font.isItalic = fontInfo.isItalic;\n    } else if (action === 'underline') {\n      redoClonedObject.font.isUnderline = fontInfo.isUnderline;\n\n      if (redoClonedObject.font.isUnderline && redoClonedObject.font.isStrikeout) {\n        redoClonedObject.font.isStrikeout = false;\n      }\n    } else if (action === 'strikeout') {\n      redoClonedObject.font.isStrikeout = fontInfo.isStrikeout;\n\n      if (redoClonedObject.font.isUnderline && redoClonedObject.font.isStrikeout) {\n        redoClonedObject.font.isUnderline = false;\n      }\n    }\n\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      font: fontInfo\n    });\n    this.modifyInCollections(currentAnnotation, 'textPropertiesChange');\n    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true); // eslint-disable-next-line max-len\n\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'textPropertiesChange', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param thicknessValue\n   * @private\n   */\n\n\n  Annotation.prototype.modifyThickness = function (thicknessValue) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n\n    if (currentAnnotation.thickness !== thicknessValue) {\n      var clonedObject = cloneObject(currentAnnotation);\n      var redoClonedObject = cloneObject(currentAnnotation);\n      redoClonedObject.thickness = thicknessValue;\n      this.pdfViewer.nodePropertyChange(currentAnnotation, {\n        thickness: thicknessValue\n      });\n      this.modifyInCollections(currentAnnotation, 'thickness');\n\n      if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, false, true, clonedObject.thickness, redoClonedObject.thickness);\n      } else {\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n      this.pdfViewer.renderDrawing();\n    }\n  };\n  /**\n   * @param color\n   * @private\n   */\n\n\n  Annotation.prototype.modifyStrokeColor = function (color) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.strokeColor = color;\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      strokeColor: color\n    });\n    this.modifyInCollections(currentAnnotation, 'stroke');\n\n    if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n      // eslint-disable-next-line max-len\n      this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, true, false, false, clonedObject.strokeColor, redoClonedObject.strokeColor);\n    } else {\n      this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n    } // eslint-disable-next-line max-len\n\n\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param color\n   * @private\n   */\n\n\n  Annotation.prototype.modifyFillColor = function (color) {\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    redoClonedObject.fillColor = color;\n    this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], {\n      fillColor: color\n    });\n    this.modifyInCollections(currentAnnotation, 'fill');\n    this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false); // eslint-disable-next-line max-len\n\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Fill', '', clonedObject, redoClonedObject);\n    this.pdfViewer.renderDrawing();\n  };\n  /**\n   * @param dynamicText\n   * @param annotName\n   * @private\n   */\n\n\n  Annotation.prototype.modifyDynamicTextValue = function (dynamicText, annotName) {\n    var currentAnnotation = null;\n    currentAnnotation = this.pdfViewer.selectedItems.annotations.filter(function (s) {\n      return s.annotName === annotName;\n    })[0];\n\n    if (currentAnnotation) {\n      var clonedObject = cloneObject(currentAnnotation);\n      var redoClonedObject = cloneObject(currentAnnotation);\n      currentAnnotation.dynamicText = dynamicText;\n      redoClonedObject.dynamicText = dynamicText;\n\n      if (clonedObject.dynamicText === '') {\n        clonedObject.dynamicText = this.freeTextAnnotationModule.previousText;\n      }\n\n      this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], {\n        dynamicText: dynamicText\n      }); // eslint-disable-next-line max-len\n\n      this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'dynamicText Change', '', clonedObject, redoClonedObject);\n      this.modifyInCollections(currentAnnotation, 'dynamicText');\n      this.pdfViewer.renderDrawing();\n    }\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.modifyInCollections = function (annotationBase, property) {\n    // eslint-disable-next-line\n    var returnObj;\n\n    if (annotationBase.measureType === '' || isNullOrUndefined(annotationBase.measureType)) {\n      if (annotationBase.shapeAnnotationType === 'FreeText') {\n        returnObj = this.freeTextAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n      } else if (annotationBase.shapeAnnotationType === 'HandWrittenSignature' || annotationBase.shapeAnnotationType === 'SignatureText' || annotationBase.shapeAnnotationType === 'SignatureImage') {\n        // eslint-disable-next-line max-len\n        returnObj = this.pdfViewerBase.signatureModule.modifySignatureCollection(property, annotationBase.pageIndex, annotationBase);\n      } else if (annotationBase.shapeAnnotationType === 'Stamp') {\n        returnObj = this.stampAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n      } else if (annotationBase.shapeAnnotationType === 'Ink') {\n        // eslint-disable-next-line max-len\n        returnObj = this.inkAnnotationModule.modifySignatureInkCollection(property, annotationBase.pageIndex, annotationBase);\n      } else {\n        returnObj = this.shapeAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n      }\n    } else if (annotationBase.measureType === 'Distance' || annotationBase.measureType === 'Perimeter' || annotationBase.measureType === 'Radius' || annotationBase.measureType === 'Area' || annotationBase.measureType === 'Volume') {\n      returnObj = this.measureAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n    }\n\n    if (this.isUndoRedoAction) {\n      this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase, null, true);\n\n      if (this.isUndoAction) {\n        annotationBase.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n      }\n    } else {\n      if (property !== 'bounds') {\n        this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase);\n      }\n    }\n\n    return returnObj;\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.createPropertiesWindow = function () {\n    var _this = this;\n\n    if (!isBlazor()) {\n      var elementID = this.pdfViewer.element.id; // eslint-disable-next-line max-len\n\n      var dialogDiv = createElement('div', {\n        id: elementID + '_properties_window',\n        className: 'e-pv-properties-window'\n      });\n      var appearanceTab = this.createAppearanceTab();\n      this.pdfViewerBase.pageContainer.appendChild(dialogDiv);\n      this.propertiesDialog = new Dialog({\n        showCloseIcon: true,\n        closeOnEscape: false,\n        isModal: true,\n        header: this.pdfViewer.localeObj.getConstant('Line Properties'),\n        target: this.pdfViewer.element,\n        content: appearanceTab,\n        close: function () {\n          _this.destroyPropertiesWindow();\n        }\n      });\n\n      if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n        this.propertiesDialog.buttons = [// eslint-disable-next-line max-len\n        {\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('OK'),\n            isPrimary: true\n          },\n          click: this.onOkClicked.bind(this)\n        }, {\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('Cancel')\n          },\n          click: this.onCancelClicked.bind(this)\n        }];\n      } else {\n        this.propertiesDialog.buttons = [{\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('Cancel')\n          },\n          click: this.onCancelClicked.bind(this)\n        }, // eslint-disable-next-line max-len\n        {\n          buttonModel: {\n            content: this.pdfViewer.localeObj.getConstant('OK'),\n            isPrimary: true\n          },\n          click: this.onOkClicked.bind(this)\n        }];\n      }\n\n      if (this.pdfViewer.enableRtl) {\n        this.propertiesDialog.enableRtl = true;\n      }\n\n      this.propertiesDialog.appendTo(dialogDiv);\n\n      if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n        // eslint-disable-next-line\n        var fillColor = document.getElementById(this.pdfViewer.element.id + '_properties_fill_color');\n        fillColor.disabled = true;\n      } // eslint-disable-next-line max-len\n\n\n      this.startArrowDropDown.content = this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes)).outerHTML;\n      this.endArrowDropDown.content = this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes)).outerHTML;\n      this.thicknessBox.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n      this.fillColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n      this.refreshColorPicker(this.fillColorPicker);\n      this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n      this.refreshColorPicker(this.strokeColorPicker);\n      this.updateColorInIcon(this.fillDropDown.element, this.fillColorPicker.value);\n      this.updateColorInIcon(this.strokeDropDown.element, this.strokeColorPicker.value);\n      this.opacitySlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n      this.updateOpacityIndicator(); // eslint-disable-next-line\n\n      if (parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray) >= 3) {\n        this.lineStyleDropDown.content = this.createDropDownContent('dashed').outerHTML;\n      } else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '2') {\n        this.lineStyleDropDown.content = this.createDropDownContent('dotted').outerHTML;\n      } else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '0') {\n        this.lineStyleDropDown.content = this.createDropDownContent('solid').outerHTML;\n      }\n\n      this.selectedLineStyle = this.pdfViewer.selectedItems.annotations[0].borderStyle;\n      this.selectedLineDashArray = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray;\n\n      if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n        this.leaderLengthBox.value = this.pdfViewer.selectedItems.annotations[0].leaderHeight;\n      }\n    } else {\n      var opacityValue = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n      var lineStartElement = this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes);\n      var lineEndElement = this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes);\n      var lineStyleElement = void 0; // eslint-disable-next-line\n\n      if (parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray) >= 3) {\n        lineStyleElement = 'Dashed';\n      } else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '2') {\n        lineStyleElement = 'Dotted';\n      } else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '0') {\n        lineStyleElement = 'Solid';\n      }\n\n      this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPropertiesDialog', opacityValue, lineStartElement, lineEndElement, lineStyleElement);\n    }\n  };\n\n  Annotation.prototype.updatePropertiesWindowInBlazor = function () {\n    // eslint-disable-next-line\n    var thicknessElement = document.querySelector('#' + this.pdfViewer.element.id + '_line_thickness'); // eslint-disable-next-line\n\n    var fillColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button'); // eslint-disable-next-line\n\n    var strokeColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button'); // eslint-disable-next-line\n\n    var leaderLengthElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_leader_length');\n    thicknessElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n    fillColorElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n    strokeColorElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n    this.onStrokeColorChange(strokeColorElement.value);\n    this.onFillColorChange(fillColorElement.value);\n\n    if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n      // eslint-disable-next-line\n      leaderLengthElement.value = parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString());\n    }\n  };\n\n  Annotation.prototype.destroyPropertiesWindow = function () {\n    if (this.strokeColorPicker) {\n      this.strokeColorPicker.destroy();\n      this.strokeColorPicker = null;\n    }\n\n    if (this.fillColorPicker) {\n      this.fillColorPicker.destroy();\n      this.fillColorPicker = null;\n    }\n\n    if (this.endArrowDropDown) {\n      this.endArrowDropDown.destroy();\n      this.endArrowDropDown = null;\n    }\n\n    if (this.startArrowDropDown) {\n      this.startArrowDropDown.destroy();\n      this.startArrowDropDown = null;\n    }\n\n    if (this.opacitySlider) {\n      this.opacitySlider.destroy();\n      this.opacitySlider = null;\n    }\n\n    if (this.thicknessBox) {\n      this.thicknessBox.destroy();\n      this.thicknessBox = null;\n    }\n\n    if (this.lineStyleDropDown) {\n      this.lineStyleDropDown.destroy();\n      this.lineStyleDropDown = null;\n    }\n\n    if (this.leaderLengthBox) {\n      this.leaderLengthBox.destroy();\n      this.leaderLengthBox = null;\n    }\n\n    if (this.propertiesDialog) {\n      this.propertiesDialog.destroy();\n      this.propertiesDialog = null;\n    }\n\n    var dialogElement = this.pdfViewerBase.getElement('_properties_window');\n\n    if (dialogElement) {\n      dialogElement.parentElement.removeChild(dialogElement);\n    }\n  };\n\n  Annotation.prototype.refreshColorPicker = function (colorPick) {\n    colorPick.setProperties({\n      'value': colorPick.value\n    }, true);\n    colorPick.refresh();\n  };\n\n  Annotation.prototype.createAppearanceTab = function () {\n    var _this = this;\n\n    var elementID = this.pdfViewer.element.id; // eslint-disable-next-line max-len\n\n    var items = [{\n      text: this.pdfViewer.localeObj.getConstant('None')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Open Arrow')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Closed Arrow')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Round Arrow')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Square Arrow')\n    }, {\n      text: this.pdfViewer.localeObj.getConstant('Diamond Arrow')\n    }]; // eslint-disable-next-line max-len\n\n    var appearanceDiv = createElement('div', {\n      id: elementID + '_properties_appearance'\n    });\n    var lineStyleContainer = createElement('div', {\n      className: 'e-pv-properties-line-style-prop'\n    });\n    appearanceDiv.appendChild(lineStyleContainer); // eslint-disable-next-line max-len\n\n    var lineHeadStartElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Start Arrow'), lineStyleContainer, 'text', 'button', true, 'e-pv-properties-line-start', elementID + '_properties_line_start'); // eslint-disable-next-line max-len\n\n    this.startArrowDropDown = new DropDownButton({\n      items: items,\n      cssClass: 'e-pv-properties-line-start',\n      select: this.onStartArrowHeadStyleSelect.bind(this)\n    }, lineHeadStartElement);\n    var lineHeadEndElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('End Arrow'), lineStyleContainer, 'text', 'button', true, 'e-pv-properties-line-end', elementID + '_properties_line_end'); // eslint-disable-next-line max-len\n\n    var borderStyleContainer = createElement('div', {\n      className: 'e-pv-properties-border-style'\n    });\n    appearanceDiv.appendChild(borderStyleContainer); // eslint-disable-next-line max-len\n\n    this.endArrowDropDown = new DropDownButton({\n      items: items,\n      cssClass: 'e-pv-properties-line-end',\n      select: this.onEndArrowHeadStyleSelect.bind(this)\n    }, lineHeadEndElement);\n    var lineStyleElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Style'), borderStyleContainer, 'text', 'button', true, 'e-pv-properties-line-style', elementID + '_properties_line_style');\n    var dropDownTarget = this.createStyleList(); // eslint-disable-next-line max-len\n\n    this.lineStyleDropDown = new DropDownButton({\n      cssClass: 'e-pv-properties-line-style',\n      target: dropDownTarget\n    }, lineStyleElement); // eslint-disable-next-line max-len\n\n    var thicknessElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Thickness'), borderStyleContainer, 'text', 'input', true, 'e-pv-properties-line-thickness', elementID + '_properties_thickness');\n    this.thicknessBox = new NumericTextBox({\n      value: 0,\n      format: '## pt',\n      cssClass: 'e-pv-properties-line-thickness',\n      min: 0,\n      max: 12\n    }, thicknessElement);\n    var colorStyleContainer = createElement('div', {\n      className: 'e-pv-properties-color-style'\n    });\n    appearanceDiv.appendChild(colorStyleContainer); // eslint-disable-next-line max-len\n\n    var fillColorElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Fill Color'), colorStyleContainer, 'color', 'button', true, 'e-pv-properties-line-fill-color', elementID + '_properties_fill_color');\n    this.fillColorPicker = this.createColorPicker(elementID + '_properties_fill_color', true);\n\n    this.fillColorPicker.change = function (args) {\n      var currentColor = args.currentValue.hex === '' ? '#ffffff00' : args.currentValue.hex;\n\n      _this.fillDropDown.toggle();\n\n      _this.updateColorInIcon(_this.fillDropDown.element, currentColor);\n    }; // eslint-disable-next-line max-len\n\n\n    this.fillDropDown = this.createDropDownButton(fillColorElement, 'e-pv-properties-fill-color-icon', this.fillColorPicker.element.parentElement);\n    this.fillDropDown.beforeOpen = this.onFillDropDownBeforeOpen.bind(this);\n\n    this.fillDropDown.open = function () {\n      _this.fillColorPicker.refresh();\n    }; // eslint-disable-next-line max-len\n\n\n    var strokeColorElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Color'), colorStyleContainer, 'color', 'button', true, 'e-pv-properties-line-stroke-color', elementID + '_properties_stroke_color');\n    this.strokeColorPicker = this.createColorPicker(elementID + '_properties_stroke_color', false);\n\n    this.strokeColorPicker.change = function (args) {\n      var currentColor = args.currentValue.hex === '' ? '#ffffff00' : args.currentValue.hex;\n\n      _this.strokeDropDown.toggle();\n\n      _this.updateColorInIcon(_this.strokeDropDown.element, currentColor);\n    }; // eslint-disable-next-line max-len\n\n\n    this.strokeDropDown = this.createDropDownButton(strokeColorElement, 'e-pv-properties-stroke-color-icon', this.strokeColorPicker.element.parentElement);\n    this.strokeDropDown.beforeOpen = this.onStrokeDropDownBeforeOpen.bind(this);\n\n    this.strokeDropDown.open = function () {\n      _this.strokeColorPicker.refresh();\n    };\n\n    var opacityContainer = createElement('div', {\n      className: 'e-pv-properties-opacity-style'\n    });\n    appearanceDiv.appendChild(opacityContainer); // eslint-disable-next-line max-len\n\n    var opacityElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Opacity'), opacityContainer, '', 'div', true, 'e-pv-properties-line-opacity', elementID + '_properties_opacity');\n    this.opacitySlider = new Slider({\n      type: 'MinRange',\n      max: 100,\n      min: 0,\n      cssClass: 'e-pv-properties-line-opacity',\n      change: function () {\n        _this.updateOpacityIndicator();\n      }\n    }, opacityElement);\n\n    if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n      // eslint-disable-next-line max-len\n      var lineLengthElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Leader Length'), opacityContainer, 'text', 'input', true, 'e-pv-properties-line-leader-length', elementID + '_properties_leader_length');\n      this.leaderLengthBox = new NumericTextBox({\n        value: 0,\n        format: '## pt',\n        cssClass: 'e-pv-properties-line-leader-length',\n        min: 0,\n        max: 100\n      }, lineLengthElement);\n    }\n\n    return appearanceDiv;\n  };\n\n  Annotation.prototype.createContent = function (text) {\n    var divElement = createElement('div', {\n      className: 'e-pv-properties-line-style-content'\n    });\n    divElement.textContent = text;\n    return divElement;\n  };\n\n  Annotation.prototype.onStrokeDropDownBeforeOpen = function () {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n    }\n\n    this.strokeColorPicker.refresh();\n  };\n\n  Annotation.prototype.onFillDropDownBeforeOpen = function () {\n    if (this.pdfViewer.selectedItems.annotations.length === 1) {\n      this.fillColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n    }\n\n    this.fillColorPicker.refresh();\n  };\n\n  Annotation.prototype.createStyleList = function () {\n    var _this = this;\n\n    var ulElement = createElement('ul');\n    document.body.appendChild(ulElement);\n    var solidLi = this.createListForStyle('solid');\n    solidLi.addEventListener('click', function () {\n      _this.setThickness('0', 'solid');\n    });\n    ulElement.appendChild(solidLi);\n    var dottedLi = this.createListForStyle('dotted');\n    dottedLi.addEventListener('click', function () {\n      _this.setThickness('2', 'dotted');\n    });\n    ulElement.appendChild(dottedLi);\n    var dashedLi = this.createListForStyle('dashed');\n    dashedLi.addEventListener('click', function () {\n      _this.setThickness('3', 'dashed');\n    });\n    ulElement.appendChild(dashedLi);\n    return ulElement;\n  };\n\n  Annotation.prototype.createColorPicker = function (idString, isNoColor) {\n    var inputElement = createElement('input', {\n      id: idString + '_target'\n    });\n    document.body.appendChild(inputElement);\n    var colorPicker = new ColorPicker({\n      inline: true,\n      mode: 'Palette',\n      enableOpacity: false,\n      value: '#000000',\n      showButtons: false,\n      modeSwitcher: false,\n      noColor: isNoColor\n    });\n\n    if (this.pdfViewer.enableRtl) {\n      colorPicker.enableRtl = true;\n    }\n\n    colorPicker.appendTo(inputElement);\n    return colorPicker;\n  };\n\n  Annotation.prototype.createDropDownButton = function (element, iconClass, target) {\n    // eslint-disable-next-line max-len\n    var dropDownButton = new DropDownButton({\n      iconCss: iconClass + ' e-pv-icon',\n      target: target\n    });\n\n    if (this.pdfViewer.enableRtl) {\n      dropDownButton.enableRtl = true;\n    }\n\n    dropDownButton.appendTo(element);\n    return dropDownButton;\n  };\n\n  Annotation.prototype.updateColorInIcon = function (element, color) {\n    element.childNodes[0].style.borderBottomColor = color;\n  };\n  /**\n   * @param color\n   * @private\n   */\n\n\n  Annotation.prototype.onFillColorChange = function (color) {\n    // eslint-disable-next-line\n    var colorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button');\n\n    if (color !== 'transparent') {\n      colorElement.children[0].style.borderBottomColor = color;\n    }\n  };\n  /**\n   * @param color\n   * @private\n   */\n\n\n  Annotation.prototype.onStrokeColorChange = function (color) {\n    // eslint-disable-next-line\n    var colorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button');\n\n    if (color !== 'transparent') {\n      colorElement.children[0].style.borderBottomColor = color;\n    }\n  };\n\n  Annotation.prototype.setThickness = function (value, style, isBlazor) {\n    if (!isBlazor) {\n      this.lineStyleDropDown.content = this.createDropDownContent(style).outerHTML;\n    }\n\n    this.selectedLineDashArray = value;\n\n    if (value === '0') {\n      this.selectedLineStyle = 'Solid';\n    } else if (value === '2' || value === '3') {\n      this.selectedLineStyle = 'Dashed';\n    }\n  };\n\n  Annotation.prototype.createDropDownContent = function (style) {\n    var divElement = createElement('div', {\n      className: 'e-pv-line-styles-content-container'\n    }); // eslint-disable-next-line max-len\n\n    var spanElement = createElement('span', {\n      className: 'e-pv-line-styles-content',\n      styles: 'border-bottom-style:' + style\n    });\n    divElement.appendChild(spanElement);\n    return divElement;\n  };\n\n  Annotation.prototype.createListForStyle = function (style) {\n    var liElement = createElement('li', {\n      className: 'e-menu-item'\n    });\n    var divElement = createElement('div', {\n      className: 'e-pv-line-styles-container'\n    }); // eslint-disable-next-line max-len\n\n    var spanElement = createElement('span', {\n      className: 'e-pv-line-styles-item',\n      styles: 'border-bottom-style:' + style\n    });\n    divElement.appendChild(spanElement);\n    liElement.appendChild(divElement);\n    return liElement;\n  };\n\n  Annotation.prototype.onStartArrowHeadStyleSelect = function (args) {\n    this.startArrowDropDown.content = this.createContent(args.item.text).outerHTML;\n  };\n\n  Annotation.prototype.onEndArrowHeadStyleSelect = function (args) {\n    this.endArrowDropDown.content = this.createContent(args.item.text).outerHTML;\n  }; // eslint-disable-next-line max-len\n\n\n  Annotation.prototype.createInputElement = function (labelText, parentElement, inputType, input, isLabelNeeded, className, idString) {\n    var container = createElement('div', {\n      id: idString + '_container',\n      className: className + '-container'\n    });\n\n    if (isLabelNeeded) {\n      var label = createElement('div', {\n        id: idString + '_label',\n        className: className + '-label'\n      });\n      label.textContent = labelText;\n      container.appendChild(label);\n    }\n\n    if (this.pdfViewer.localeObj.getConstant('Opacity') === labelText) {\n      this.opacityIndicator = createElement('span', {\n        className: 'e-pv-properties-opacity-indicator'\n      });\n      container.appendChild(this.opacityIndicator);\n    }\n\n    var textBoxInput = createElement(input, {\n      id: idString\n    });\n\n    if (input === 'input') {\n      textBoxInput.type = inputType;\n    }\n\n    container.appendChild(textBoxInput);\n    parentElement.appendChild(container);\n    return textBoxInput;\n  };\n\n  Annotation.prototype.updateOpacityIndicator = function () {\n    this.opacityIndicator.textContent = this.opacitySlider.value + '%';\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.onOkClicked = function (opacityValue) {\n    var startArrow;\n    var endArrow;\n    var thickness;\n    var strokeColor;\n    var fillColor;\n    var opacity;\n\n    if (!isBlazor()) {\n      startArrow = this.getArrowTypeFromDropDown(this.startArrowDropDown.content);\n      endArrow = this.getArrowTypeFromDropDown(this.endArrowDropDown.content);\n      thickness = this.thicknessBox.value;\n      strokeColor = this.strokeColorPicker.getValue(this.strokeColorPicker.value, 'hex');\n      strokeColor = strokeColor === '' ? '#ffffff00' : strokeColor;\n      fillColor = this.fillColorPicker.getValue(this.fillColorPicker.value, 'hex'); // eslint-disable-next-line max-len\n\n      fillColor = fillColor === '' || fillColor === '#transp' || this.fillColorPicker.value === '#ffffff00' ? '#ffffff00' : fillColor;\n      opacity = this.opacitySlider.value / 100;\n    } else {\n      // eslint-disable-next-line\n      var lineStartElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_line_start'); // eslint-disable-next-line\n\n      var lineEndElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_line_end'); // eslint-disable-next-line\n\n      var thicknessElement = document.querySelector('#' + this.pdfViewer.element.id + '_line_thickness'); // eslint-disable-next-line\n\n      var lineStyleElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_style'); // eslint-disable-next-line\n\n      var fillColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button'); // eslint-disable-next-line\n\n      var strokeColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button'); // eslint-disable-next-line\n\n      var opacityElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_opacity');\n      startArrow = this.getArrowTypeFromDropDown(lineStartElement.value, true);\n      endArrow = this.getArrowTypeFromDropDown(lineEndElement.value, true); // eslint-disable-next-line\n\n      thickness = parseInt(thicknessElement.value);\n      strokeColor = this.getValue(strokeColorElement.children[0].style.borderBottomColor, 'hex');\n      strokeColor = strokeColor === '' ? '#ffffff00' : strokeColor;\n      fillColor = this.getValue(fillColorElement.children[0].style.borderBottomColor, 'hex');\n      fillColor = fillColor === '' ? '#ffffff00' : fillColor;\n\n      if (opacityValue) {\n        opacity = opacityValue / 100;\n      } else {\n        opacity = opacityElement.value / 100;\n      }\n\n      if (lineStyleElement.value) {\n        if (lineStyleElement.value === 'Solid') {\n          this.setThickness('0', 'solid', true);\n        } else if (lineStyleElement.value === 'Dotted') {\n          this.setThickness('2', 'dotted', true);\n        } else if (lineStyleElement.value === 'Dashed') {\n          this.setThickness('3', 'dashed', true);\n        }\n      }\n    }\n\n    var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    var clonedObject = cloneObject(currentAnnotation);\n    var redoClonedObject = cloneObject(currentAnnotation);\n    var newNode = {};\n    var isColorChanged = false;\n    var isStrokeColorChanged = false;\n    var isThicknessChanged = false;\n    var isOpacityChanged = false;\n    var isLineHeadStartStyleChanged = false;\n    var isLineHeadEndStyleChanged = false;\n    var isBorderDashArrayChanged = false;\n\n    if (startArrow !== currentAnnotation.sourceDecoraterShapes) {\n      newNode.sourceDecoraterShapes = startArrow;\n      redoClonedObject.lineHeadStart = this.getArrowString(startArrow);\n      isLineHeadStartStyleChanged = true;\n    }\n\n    if (endArrow !== currentAnnotation.taregetDecoraterShapes) {\n      newNode.taregetDecoraterShapes = endArrow;\n      redoClonedObject.lineHeadEnd = this.getArrowString(endArrow);\n      isLineHeadEndStyleChanged = true;\n    }\n\n    if (thickness !== currentAnnotation.wrapper.children[0].style.strokeWidth) {\n      newNode.thickness = thickness;\n      redoClonedObject.thickness = thickness;\n      isThicknessChanged = true;\n    }\n\n    if (strokeColor !== currentAnnotation.wrapper.children[0].style.strokeColor) {\n      newNode.strokeColor = strokeColor;\n      redoClonedObject.strokeColor = strokeColor;\n      isStrokeColorChanged = true;\n    }\n\n    if (fillColor !== currentAnnotation.wrapper.children[0].style.fill) {\n      newNode.fillColor = fillColor;\n      redoClonedObject.fillColor = fillColor;\n      isColorChanged = true;\n    }\n\n    if (opacity !== currentAnnotation.wrapper.children[0].style.opacity) {\n      newNode.opacity = opacity;\n      redoClonedObject.opacity = opacity;\n      isOpacityChanged = true;\n    }\n\n    if (this.selectedLineDashArray !== currentAnnotation.wrapper.children[0].style.strokeDashArray) {\n      newNode.borderDashArray = this.selectedLineDashArray;\n      newNode.borderStyle = this.selectedLineStyle;\n      redoClonedObject.borderDashArray = newNode.borderDashArray;\n      redoClonedObject.borderStyle = newNode.borderStyle;\n      isBorderDashArrayChanged = true;\n    }\n\n    if (!isBlazor()) {\n      // eslint-disable-next-line max-len\n      if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance' && this.leaderLengthBox.value !== this.pdfViewer.selectedItems.annotations[0].leaderHeight) {\n        newNode.leaderHeight = this.leaderLengthBox.value;\n      }\n    } else {\n      // eslint-disable-next-line\n      var leaderLengthElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_leader_length'); // eslint-disable-next-line\n\n      if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance' && parseInt(leaderLengthElement.value) !== this.pdfViewer.selectedItems.annotations[0].leaderHeight) {\n        // eslint-disable-next-line\n        newNode.leaderHeight = parseInt(leaderLengthElement.value);\n      }\n    }\n\n    this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], newNode);\n    this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill = fillColor; // eslint-disable-next-line max-len\n\n    this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0], isColorChanged, isStrokeColorChanged, isThicknessChanged, isOpacityChanged, isLineHeadStartStyleChanged, isLineHeadEndStyleChanged, isBorderDashArrayChanged);\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'thickness');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'stroke');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'fill');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'opacity');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'dashArray');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'startArrow');\n    this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'endArrow'); // eslint-disable-next-line max-len\n\n    if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n      this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'leaderLength');\n    } // eslint-disable-next-line max-len\n\n\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Line properties change', '', clonedObject, redoClonedObject);\n    this.renderAnnotations(currentAnnotation.pageIndex, null, null, null);\n\n    if (!isBlazor()) {\n      this.propertiesDialog.hide();\n    }\n  };\n\n  Annotation.prototype.onCancelClicked = function () {\n    this.propertiesDialog.hide();\n  };\n\n  Annotation.prototype.getArrowTypeFromDropDown = function (arrowType, isBlazor) {\n    if (!isBlazor) {\n      arrowType = arrowType.split('</div>')[0].split('\">')[1];\n    }\n\n    var arrow = 'None';\n\n    switch (arrowType) {\n      case this.pdfViewer.localeObj.getConstant('None'):\n        arrow = 'None';\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Open Arrow'):\n        arrow = 'OpenArrow';\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Closed Arrow'):\n        arrow = 'Arrow';\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Round Arrow'):\n        arrow = 'Circle';\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Square Arrow'):\n        arrow = 'Square';\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Diamond Arrow'):\n        arrow = 'Diamond';\n        break;\n\n      case this.pdfViewer.localeObj.getConstant('Butt'):\n        arrow = 'Butt';\n        break;\n    }\n\n    return arrow;\n  };\n  /**\n   * @param arrow\n   * @private\n   */\n\n\n  Annotation.prototype.getArrowString = function (arrow) {\n    var arrowType = this.pdfViewer.localeObj.getConstant('None');\n\n    switch (arrow) {\n      case 'Arrow':\n        arrowType = this.pdfViewer.localeObj.getConstant('Closed');\n        break;\n\n      case 'OpenArrow':\n        arrowType = this.pdfViewer.localeObj.getConstant('Open Arrow');\n        break;\n\n      case 'Circle':\n        arrowType = this.pdfViewer.localeObj.getConstant('Round');\n        break;\n\n      case 'None':\n      case 'Square':\n      case 'Diamond':\n        arrowType = this.pdfViewer.localeObj.getConstant(arrow);\n        break;\n\n      case 'Butt':\n        arrowType = this.pdfViewer.localeObj.getConstant('Butt');\n        break;\n    }\n\n    return arrowType;\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.onAnnotationMouseUp = function () {\n    if (this.pdfViewer.selectedItems.annotations.length !== 0) {\n      if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n        this.enableBasedOnType();\n        this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);\n\n        if (!Browser.isDevice) {\n          this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();\n        }\n      }\n\n      this.pdfViewerBase.disableTextSelectionMode();\n    } else {\n      if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isPanMode && !this.pdfViewer.designerMode) {\n        this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n      } // eslint-disable-next-line max-len\n\n\n      if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n        // eslint-disable-next-line max-len\n        var isSkip = this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected;\n\n        if (this.pdfViewer.annotation.freeTextAnnotationModule && !this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus && !isSkip) {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n          this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(false);\n        }\n\n        this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();\n        this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(false);\n      }\n    }\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @param event\n   * @param pdfAnnotationBase\n   * @param event\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.onShapesMouseup = function (pdfAnnotationBase, event) {\n    // eslint-disable-next-line max-len\n    pdfAnnotationBase = !isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0]) ? this.pdfViewer.selectedItems.annotations[0] : pdfAnnotationBase;\n\n    if (pdfAnnotationBase) {\n      if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n        this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n      } // eslint-disable-next-line max-len\n\n\n      if ((this.pdfViewerBase.tool instanceof NodeDrawingTool || this.pdfViewerBase.tool instanceof LineTool) && !this.pdfViewerBase.tool.dragging) {\n        // eslint-disable-next-line\n        var setting = {\n          opacity: pdfAnnotationBase.opacity,\n          fillColor: pdfAnnotationBase.fillColor,\n          strokeColor: pdfAnnotationBase.strokeColor,\n          thickness: pdfAnnotationBase.thickness,\n          author: pdfAnnotationBase.author,\n          subject: pdfAnnotationBase.subject,\n          modifiedDate: pdfAnnotationBase.modifiedDate\n        };\n        var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id); // eslint-disable-next-line\n\n        var bounds = {\n          left: pdfAnnotationBase.bounds.x,\n          top: pdfAnnotationBase.bounds.y,\n          width: pdfAnnotationBase.bounds.width,\n          height: pdfAnnotationBase.bounds.height\n        };\n\n        if (this.pdfViewerBase.tool instanceof LineTool) {\n          setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n          setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n          setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n        }\n\n        if (!this.pdfViewerBase.isAnnotationAdded || pdfAnnotationBase.measureType === 'Distance') {\n          if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n            // eslint-disable-next-line max-len\n            this.shapeAnnotationModule.renderShapeAnnotations(pdfAnnotationBase, this.pdfViewer.annotation.getEventPageNumber(event));\n          } else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Radius') {\n            // eslint-disable-next-line max-len\n            this.measureAnnotationModule.renderMeasureShapeAnnotations(pdfAnnotationBase, this.pdfViewer.annotation.getEventPageNumber(event));\n          }\n        }\n\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n      } else if (this.pdfViewerBase.tool instanceof MoveTool || this.pdfViewerBase.tool instanceof ResizeTool) {\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n\n        if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n          if (pdfAnnotationBase.shapeAnnotationType === 'FreeText') {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          } else if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText') {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.signatureModule.modifySignatureCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          } else if (pdfAnnotationBase.shapeAnnotationType === 'Ink') {\n            // eslint-disable-next-line max-len\n            this.inkAnnotationModule.modifySignatureInkCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          } else if (pdfAnnotationBase.shapeAnnotationType === 'Stamp' || pdfAnnotationBase.shapeAnnotationType === 'Image') {\n            // eslint-disable-next-line max-len\n            this.stampAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          } else {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          } // eslint-disable-next-line max-len\n\n        } else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Radius' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume') {\n          this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n        }\n\n        if (this.pdfViewerBase.tool instanceof ResizeTool) {\n          if (!pdfAnnotationBase.formFieldAnnotationType) {\n            this.triggerAnnotationResize(pdfAnnotationBase);\n          }\n        }\n\n        if (this.pdfViewerBase.tool instanceof MoveTool) {\n          if (this.pdfViewerBase.action !== 'Select') {\n            if (!pdfAnnotationBase.formFieldAnnotationType) {\n              this.triggerAnnotationMove(pdfAnnotationBase);\n            }\n          }\n        }\n      } else if (this.pdfViewerBase.tool instanceof ConnectTool) {\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n\n        if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n          // eslint-disable-next-line max-len\n          if (pdfAnnotationBase.shapeAnnotationType === 'Line' || pdfAnnotationBase.shapeAnnotationType === 'LineWidthArrowHead' || pdfAnnotationBase.shapeAnnotationType === 'Polygon') {\n            this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          } // eslint-disable-next-line max-len\n\n        } else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume') {\n          if (pdfAnnotationBase.measureType === 'Distance') {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('leaderLength', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n          } // eslint-disable-next-line max-len\n\n\n          this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n        }\n\n        this.triggerAnnotationResize(pdfAnnotationBase);\n      } // eslint-disable-next-line max-len\n\n\n      if (this.pdfViewerBase.navigationPane && this.pdfViewerBase.navigationPane.annotationMenuObj && this.pdfViewer.isSignatureEditable && (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage')) {\n        // eslint-disable-next-line max-len\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true); // eslint-disable-next-line max-len\n\n        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n      }\n\n      if (this.pdfViewer.toolbarModule) {\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n          this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode();\n\n          if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();\n          } else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume' || pdfAnnotationBase.measureType === 'Radius') {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode();\n          }\n\n          if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(true);\n          }\n\n          if (!isBlazor()) {\n            if (this.pdfViewer.selectedItems.annotations.length === 1 && !this.pdfViewer.designerMode) {\n              this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(true);\n              this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();\n              this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true; // eslint-disable-next-line max-len\n\n              if (!this.pdfViewer.formDesignerModule && pdfAnnotationBase.properties.id != '' && pdfAnnotationBase.properties.id != null && pdfAnnotationBase.properties.id.slice(0, 4) != 'sign') {\n                var id = document.getElementById(pdfAnnotationBase.properties.id);\n                var isFieldReadOnly = id && id.disabled;\n\n                if (!isFieldReadOnly) {\n                  this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                } else if (this.pdfViewer.annotation && isFieldReadOnly) {\n                  this.pdfViewer.annotation.clearSelection();\n                }\n              } else {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n              }\n\n              if (this.pdfViewer.isAnnotationToolbarVisible && this.pdfViewer.isFormDesignerToolbarVisible) {\n                var formDesignerMainDiv = document.getElementById(this.pdfViewer.element.id + \"_formdesigner_toolbar\");\n                formDesignerMainDiv.style.display = \"none\";\n\n                if (this.pdfViewer.toolbarModule) {\n                  this.pdfViewer.toolbarModule.formDesignerToolbarModule.isToolbarHidden = false;\n                  this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem);\n                  this.pdfViewer.toolbarModule.annotationToolbarModule.adjustViewer(true);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @param isNewlyAdded\n   * @param pdfAnnotationBase\n   * @param isNewlyAdded\n   * @private\n   */\n\n\n  Annotation.prototype.updateCalibrateValues = function (pdfAnnotationBase, isNewlyAdded) {\n    if (pdfAnnotationBase.measureType === 'Distance') {\n      pdfAnnotationBase.notes = updateDistanceLabel(pdfAnnotationBase, pdfAnnotationBase.vertexPoints, this.measureAnnotationModule);\n\n      if (pdfAnnotationBase.enableShapeLabel === true) {\n        pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n      this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n    } else if (pdfAnnotationBase.measureType === 'Radius') {\n      pdfAnnotationBase.notes = updateRadiusLabel(pdfAnnotationBase, this.measureAnnotationModule);\n\n      if (pdfAnnotationBase.enableShapeLabel === true) {\n        pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n      this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n    } else if (pdfAnnotationBase.measureType === 'Perimeter') {\n      pdfAnnotationBase.notes = updatePerimeterLabel(pdfAnnotationBase, pdfAnnotationBase.vertexPoints, this.measureAnnotationModule);\n\n      if (pdfAnnotationBase.enableShapeLabel === true) {\n        pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n      this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n    } else if (pdfAnnotationBase.measureType === 'Area') {\n      // eslint-disable-next-line max-len\n      pdfAnnotationBase.notes = this.measureAnnotationModule.calculateArea(pdfAnnotationBase.vertexPoints, pdfAnnotationBase.id, pdfAnnotationBase.pageIndex);\n\n      if (pdfAnnotationBase.enableShapeLabel === true) {\n        pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n        updateCalibrateLabel(pdfAnnotationBase);\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n      this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n    } else if (pdfAnnotationBase.measureType === 'Volume') {\n      // eslint-disable-next-line max-len\n      pdfAnnotationBase.notes = this.measureAnnotationModule.calculateVolume(pdfAnnotationBase.vertexPoints, pdfAnnotationBase.id, pdfAnnotationBase.pageIndex);\n\n      if (pdfAnnotationBase.enableShapeLabel === true) {\n        pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n        updateCalibrateLabel(pdfAnnotationBase);\n      } // eslint-disable-next-line max-len\n\n\n      this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n      this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.onAnnotationMouseDown = function () {\n    if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n      if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n        if (!isBlazor() && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n          var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n\n          if (commentPanel.style.display === 'none') {\n            if (this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n              // eslint-disable-next-line max-len\n              this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(\"\");\n            } else {\n              if (this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar) {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n                this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType);\n                var editIcon = document.getElementById(this.pdfViewer.element.id + '_annotationIcon');\n\n                if (editIcon && !editIcon.parentElement.classList.contains('e-pv-select')) {\n                  editIcon.parentElement.classList.add('e-pv-select');\n                }\n              }\n            }\n          }\n        }\n\n        this.enableBasedOnType();\n        this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);\n      }\n    }\n  };\n\n  Annotation.prototype.enableBasedOnType = function () {\n    var isLock = false; // eslint-disable-next-line\n\n    var annotation = this.pdfViewer.selectedItems.annotations[0];\n\n    if (annotation && annotation.annotationSettings) {\n      // eslint-disable-next-line\n      isLock = annotation.annotationSettings.isLock;\n\n      if (isLock && this.checkAllowedInteractions('PropertyChange', annotation)) {\n        isLock = false;\n      }\n    }\n\n    if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n      if (!isLock) {\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Path' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage' || this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(true);\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n        } else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n        } else {\n          if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n            this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(true);\n          }\n        }\n      } // eslint-disable-next-line max-len\n\n    } else if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Path' && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(true, true);\n    }\n  };\n\n  Annotation.prototype.getProperDate = function (date) {\n    var dateObject = new Date(date.toString());\n\n    if (isNaN(dateObject.getFullYear())) {\n      var dateString = date.slice(2, 16); // eslint-disable-next-line max-len\n\n      dateString = dateString.slice(0, 4) + '/' + dateString.slice(4, 6) + '/' + dateString.slice(6, 8) + ' ' + dateString.slice(8, 10) + ':' + dateString.slice(10, 12) + ':' + dateString.slice(12, 14);\n      dateObject = new Date(dateString);\n    } // eslint-disable-next-line max-len\n\n\n    return dateObject.getMonth() + 1 + '/' + dateObject.getDate() + '/' + dateObject.getFullYear() + ' ' + dateObject.getHours() + ':' + dateObject.getMinutes() + ':' + dateObject.getSeconds();\n  };\n  /**\n   * @param pageAnnotations\n   * @param pageNumber\n   * @private\n   */\n\n\n  Annotation.prototype.getPageCollection = function (pageAnnotations, pageNumber) {\n    var index = null;\n\n    for (var i = 0; i < pageAnnotations.length; i++) {\n      if (pageAnnotations[i].pageIndex === pageNumber) {\n        index = i;\n        break;\n      }\n    }\n\n    return index;\n  };\n  /**\n   * @param annotations\n   * @param id\n   * @param annotations\n   * @param id\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getAnnotationWithId = function (annotations, id) {\n    // eslint-disable-next-line\n    var annotation;\n\n    for (var i = 0; i < annotations.length; i++) {\n      if (id === annotations[i].id) {\n        annotation = annotations[i];\n      }\n    }\n\n    return annotation;\n  };\n  /**\n   * @param event\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getEventPageNumber = function (event) {\n    var eventTarget = event.target;\n\n    if (eventTarget.classList.contains('e-pv-hyperlink')) {\n      eventTarget = eventTarget.parentElement;\n    } else if (eventTarget.parentElement && eventTarget.parentElement.classList.contains('foreign-object')) {\n      eventTarget = eventTarget.parentElement.parentElement.parentElement.parentElement;\n    } else if (eventTarget.classList.contains('e-pdfviewer-formFields')) {\n      eventTarget = eventTarget.parentElement;\n    }\n\n    var pageString;\n\n    if (eventTarget) {\n      // eslint-disable-next-line\n      pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1] || eventTarget.id.split('_pageDiv_')[1];\n    }\n\n    if (isNaN(pageString)) {\n      event = this.pdfViewerBase.annotationEvent;\n\n      if (event) {\n        eventTarget = event.target; // eslint-disable-next-line\n\n        pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1] || eventTarget.id.split('_pageDiv_')[1];\n      }\n    } // eslint-disable-next-line\n\n\n    return parseInt(pageString);\n  };\n  /**\n   * @param commentsAnnotations\n   * @param parentAnnotation\n   * @param author\n   * @param commentsAnnotations\n   * @param parentAnnotation\n   * @param author\n   * @param commentsAnnotations\n   * @param parentAnnotation\n   * @param author\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getAnnotationComments = function (commentsAnnotations, parentAnnotation, author) {\n    var newArray = [];\n    var annotationObject = null;\n\n    if (commentsAnnotations) {\n      if (commentsAnnotations.length > 0) {\n        for (var i = 0; i < commentsAnnotations.length; i++) {\n          // eslint-disable-next-line\n          var annotation = commentsAnnotations[i];\n          annotationObject = {\n            // eslint-disable-next-line max-len\n            shapeAnnotationType: 'sticky',\n            author: annotation.Author,\n            modifiedDate: annotation.ModifiedDate,\n            note: annotation.Note,\n            state: annotation.state,\n            stateModel: annotation.stateModel,\n            comments: [],\n            review: {\n              state: annotation.State,\n              stateModel: annotation.StateModel,\n              modifiedDate: annotation.ModifiedDate,\n              author: annotation.Author\n            },\n            annotName: annotation.AnnotName,\n            parentId: parentAnnotation.AnnotName,\n            subject: 'Comments',\n            isLock: annotation.IsLock\n          };\n          newArray[newArray.length] = annotationObject;\n        }\n      }\n    }\n\n    return newArray;\n  };\n\n  Annotation.prototype.getRandomNumber = function () {\n    // eslint-disable-next-line\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      // eslint-disable-next-line\n      var random = Math.random() * 16 | 0,\n          v = c == 'x' ? random : random & 0x3 | 0x8;\n      return random.toString(16);\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.createGUID = function () {\n    // eslint-disable-next-line max-len\n    return this.getRandomNumber();\n  };\n  /**\n   * @param pageDiv\n   * @param pageWidth\n   * @param pageHeight\n   * @param pageNumber\n   * @param displayMode\n   * @param pageDiv\n   * @param pageWidth\n   * @param pageHeight\n   * @param pageNumber\n   * @param displayMode\n   * @private\n   */\n  // eslint-disable-next-line max-len\n\n\n  Annotation.prototype.createAnnotationLayer = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n    var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n\n    if (canvas) {\n      this.updateCanvas(canvas, pageWidth, pageHeight, pageNumber);\n      return canvas;\n    } else {\n      // eslint-disable-next-line max-len\n      var annotationCanvas = createElement('canvas', {\n        id: this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber,\n        className: 'e-pv-annotation-canvas'\n      });\n      this.updateCanvas(annotationCanvas, pageWidth, pageHeight, pageNumber);\n      pageDiv.appendChild(annotationCanvas);\n      return annotationCanvas;\n    }\n  };\n  /**\n   * @param width\n   * @param height\n   * @param pageNumber\n   * @private\n   */\n\n\n  Annotation.prototype.resizeAnnotations = function (width, height, pageNumber) {\n    var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n\n    if (canvas) {\n      canvas.style.width = width + 'px';\n      canvas.style.height = height + 'px';\n      this.pdfViewerBase.applyElementStyles(canvas, pageNumber);\n    }\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n\n\n  Annotation.prototype.clearAnnotationCanvas = function (pageNumber) {\n    var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n    var zoom = this.pdfViewerBase.getZoomFactor();\n    var ratio = this.pdfViewerBase.getZoomRatio(zoom);\n\n    if (canvas) {\n      var width = this.pdfViewerBase.pageSize[pageNumber].width;\n      var height = this.pdfViewerBase.pageSize[pageNumber].height;\n      canvas.width = width * ratio;\n      canvas.height = height * ratio;\n      canvas.style.width = width * zoom + 'px';\n      canvas.style.height = height * zoom + 'px';\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param shapeAnnotation\n   * @param measureShapeAnnotation\n   * @param textMarkupAnnotation\n   * @param canvas\n   * @param isImportAnnotations\n   * @param pageNumber\n   * @param shapeAnnotation\n   * @param measureShapeAnnotation\n   * @param textMarkupAnnotation\n   * @param canvas\n   * @param isImportAnnotations\n   * @param pageNumber\n   * @param shapeAnnotation\n   * @param measureShapeAnnotation\n   * @param textMarkupAnnotation\n   * @param canvas\n   * @param isImportAnnotations\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.renderAnnotations = function (pageNumber, shapeAnnotation, measureShapeAnnotation, textMarkupAnnotation, canvas, isImportAnnotations) {\n    this.clearAnnotationCanvas(pageNumber);\n\n    if (this.shapeAnnotationModule) {\n      if (isImportAnnotations) {\n        this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation, pageNumber, true);\n      } else {\n        this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation, pageNumber);\n      }\n    }\n\n    if (this.measureAnnotationModule) {\n      if (isImportAnnotations) {\n        this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation, pageNumber, true);\n      } else {\n        this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation, pageNumber);\n      }\n    }\n\n    if (canvas !== null && canvas !== undefined) {\n      canvas = canvas;\n    } else {\n      canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n    }\n\n    this.pdfViewer.drawing.refreshCanvasDiagramLayer(canvas, pageNumber);\n\n    if (this.textMarkupAnnotationModule) {\n      if (isImportAnnotations) {\n        // eslint-disable-next-line\n        this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation, pageNumber, true);\n      } else {\n        // eslint-disable-next-line\n        this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation, pageNumber);\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param annotation\n   * @param annotationId\n   * @param pageNumber\n   * @param annotation\n   * @param annotationId\n   * @param pageNumber\n   * @param annotation\n   * @param annotationId\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.storeAnnotations = function (pageNumber, annotation, annotationId) {\n    // let annotationId: string = '_annotations_textMarkup';\n    // if (annotation is ITextMarkupAnnotation) {\n    //     annotationId = '_annotations_textMarkup';\n    // } else if (annotation as IShapeAnnotation) {\n    //     annotationId = '_annotations_shape';\n    // } else {\n    //     annotationId = '_annotations_stamp';\n    // }\n    // eslint-disable-next-line\n    var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n\n    if (sessionSize > 4500) {\n      this.clearAnnotationStorage();\n      this.pdfViewerBase.isStorageExceed = true;\n    } // eslint-disable-next-line\n\n\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + annotationId);\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId];\n    }\n\n    var index = 0;\n\n    if (!storeObject) {\n      this.storeAnnotationCollections(annotation, pageNumber);\n      var pageAnnotation = {\n        pageIndex: pageNumber,\n        annotations: []\n      };\n      pageAnnotation.annotations.push(annotation);\n      index = pageAnnotation.annotations.indexOf(annotation);\n      var annotationCollection = [];\n      annotationCollection.push(pageAnnotation);\n      var annotationStringified = JSON.stringify(annotationCollection);\n\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + annotationId, annotationStringified);\n      }\n    } else {\n      this.storeAnnotationCollections(annotation, pageNumber);\n      var annotObject = JSON.parse(storeObject);\n\n      if (!this.pdfViewerBase.isStorageExceed) {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + annotationId);\n      }\n\n      var pageIndex = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n\n      if (annotObject[pageIndex]) {\n        annotObject[pageIndex].annotations.push(annotation);\n        index = annotObject[pageIndex].annotations.indexOf(annotation);\n      } else {\n        var markupAnnotation = {\n          pageIndex: pageNumber,\n          annotations: []\n        };\n        markupAnnotation.annotations.push(annotation);\n        index = markupAnnotation.annotations.indexOf(annotation);\n        annotObject.push(markupAnnotation);\n      }\n\n      var annotationStringified = JSON.stringify(annotObject);\n\n      if (this.pdfViewerBase.isStorageExceed) {\n        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId] = annotationStringified;\n      } else {\n        window.sessionStorage.setItem(this.pdfViewerBase.documentId + annotationId, annotationStringified);\n      }\n    }\n\n    return index;\n  };\n  /**\n   * @param type\n   * @private\n   */\n\n\n  Annotation.prototype.getArrowType = function (type) {\n    var decoratorShapes = 'None';\n\n    switch (type) {\n      case 'ClosedArrow':\n      case 'Closed':\n        decoratorShapes = 'Arrow';\n        break;\n\n      case 'OpenArrow':\n      case 'Open':\n        decoratorShapes = 'OpenArrow';\n        break;\n\n      case 'Square':\n        decoratorShapes = 'Square';\n        break;\n\n      case 'Circle':\n      case 'Round':\n        decoratorShapes = 'Circle';\n        break;\n\n      case 'Diamond':\n        decoratorShapes = 'Diamond';\n        break;\n\n      case 'Butt':\n        decoratorShapes = 'Butt';\n        break;\n\n      case 'Slash':\n        // decoratorShapes = 'Slash';\n        break;\n    }\n\n    return decoratorShapes;\n  };\n  /**\n   * @param arrow\n   * @private\n   */\n\n\n  Annotation.prototype.getArrowTypeForCollection = function (arrow) {\n    var arrowType;\n\n    switch (arrow) {\n      case 'Arrow':\n        arrowType = 'ClosedArrow';\n        break;\n\n      case 'OpenArrow':\n      case 'Square':\n      case 'Circle':\n      case 'Diamond':\n      case 'None':\n        arrowType = arrow.toString();\n        break;\n\n      case 'Butt':\n        arrowType = 'Butt';\n        break;\n    }\n\n    return arrowType;\n  };\n  /**\n   * @param bound\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getBounds = function (bound, pageIndex) {\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n\n    if (pageDetails) {\n      if (pageDetails.rotation === 1) {\n        return {\n          left: bound.top,\n          top: pageDetails.width - (bound.left + bound.width),\n          width: bound.height,\n          height: bound.width\n        };\n      } else if (pageDetails.rotation === 2) {\n        // eslint-disable-next-line max-len\n        return {\n          left: pageDetails.width - bound.left - bound.width,\n          top: pageDetails.height - bound.top - bound.height,\n          width: bound.width,\n          height: bound.height\n        };\n      } else if (pageDetails.rotation === 3) {\n        return {\n          left: pageDetails.height - bound.top - bound.height,\n          top: bound.left,\n          width: bound.height,\n          height: bound.width\n        };\n      } else {\n        return bound;\n      }\n    } else {\n      return bound;\n    }\n  };\n  /**\n   * @param bound\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getInkBounds = function (bound, pageIndex) {\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n\n    if (pageDetails) {\n      if (pageDetails.rotation === 1) {\n        return {\n          x: bound.y,\n          y: pageDetails.width - (bound.x + bound.width),\n          width: bound.height,\n          height: bound.width\n        };\n      } else if (pageDetails.rotation === 2) {\n        // eslint-disable-next-line max-len\n        return {\n          x: pageDetails.width - bound.x - bound.width,\n          y: pageDetails.height - bound.y - bound.height,\n          width: bound.width,\n          height: bound.height\n        };\n      } else if (pageDetails.rotation === 3) {\n        return {\n          x: pageDetails.height - bound.y - bound.height,\n          y: bound.x,\n          width: bound.height,\n          height: bound.width\n        };\n      } else {\n        return bound;\n      }\n    } else {\n      return bound;\n    }\n  };\n  /**\n   * @param points\n   * @param pageIndex\n   * @param points\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getVertexPoints = function (points, pageIndex) {\n    if (points) {\n      var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n\n      if (pageDetails.rotation === 1) {\n        var points1 = [];\n\n        for (var i = 0; i < points.length; i++) {\n          var point = {\n            x: points[i].y,\n            y: pageDetails.width - points[i].x\n          };\n          points1.push(point);\n        }\n\n        return points1;\n      } else if (pageDetails.rotation === 2) {\n        var points2 = [];\n\n        for (var i = 0; i < points.length; i++) {\n          var point = {\n            x: pageDetails.width - points[i].x,\n            y: pageDetails.height - points[i].y\n          };\n          points2.push(point);\n        }\n\n        return points2;\n      } else if (pageDetails.rotation === 3) {\n        var points3 = [];\n\n        for (var i = 0; i < points.length; i++) {\n          var point = {\n            x: pageDetails.height - points[i].y,\n            y: points[i].x\n          };\n          points3.push(point);\n        }\n\n        return points3;\n      } else {\n        return points;\n      }\n    }\n  };\n  /**\n   * @param pageIndex\n   * @param shapeAnnotations\n   * @param idString\n   * @param pageIndex\n   * @param shapeAnnotations\n   * @param idString\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.getStoredAnnotations = function (pageIndex, shapeAnnotations, idString) {\n    // eslint-disable-next-line\n    var annotationCollection; // eslint-disable-next-line\n\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + idString);\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + idString];\n    }\n\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n\n      if (annotObject[index]) {\n        annotationCollection = annotObject[index].annotations;\n      } else {\n        annotationCollection = null;\n      }\n    } else {\n      annotationCollection = null;\n    }\n\n    return annotationCollection;\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @param pdfAnnotationBase\n   * @param isColor\n   * @param isStroke\n   * @param isThickness\n   * @param isOpacity\n   * @param isLineStart\n   * @param isLineEnd\n   * @param isDashArray\n   * @param isFreeText\n   * @param previousText\n   * @param currentText\n   * @private\n   */\n  // eslint-disable-next-line max-len\n\n\n  Annotation.prototype.triggerAnnotationPropChange = function (pdfAnnotationBase, isColor, isStroke, isThickness, isOpacity, isLineStart, isLineEnd, isDashArray, isFreeText, previousText, currentText) {\n    var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id);\n    var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType); // eslint-disable-next-line max-len\n\n    var eventArgs = {\n      name: 'annotationPropertiesChange',\n      pageIndex: pdfAnnotationBase.pageIndex,\n      annotationId: pdfAnnotationBase.annotName,\n      annotationType: type,\n      isColorChanged: isColor,\n      isOpacityChanged: isOpacity,\n      isThicknessChanged: isThickness,\n      isStrokeColorChanged: isStroke\n    };\n\n    if (isFreeText) {\n      eventArgs.isFreeTextChanged = isFreeText;\n      eventArgs.previousText = previousText;\n      eventArgs.currentText = currentText;\n    }\n\n    if (isLineStart) {\n      eventArgs.isLineHeadStartStyleChanged = isLineStart;\n    }\n\n    if (isLineEnd) {\n      eventArgs.isLineHeadEndStyleChanged = isLineEnd;\n    }\n\n    if (isDashArray) {\n      eventArgs.isBorderDashArrayChanged = isDashArray;\n    }\n\n    this.pdfViewer.trigger('annotationPropertiesChange', eventArgs);\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @private\n   */\n\n\n  Annotation.prototype.triggerAnnotationAdd = function (pdfAnnotationBase) {\n    // eslint-disable-next-line\n    var setting = {\n      opacity: pdfAnnotationBase.opacity,\n      fillColor: pdfAnnotationBase.fillColor,\n      strokeColor: pdfAnnotationBase.strokeColor,\n      thickness: pdfAnnotationBase.thickness,\n      author: pdfAnnotationBase.author,\n      subject: pdfAnnotationBase.subject,\n      modifiedDate: pdfAnnotationBase.modifiedDate\n    }; // eslint-disable-next-line\n\n    var bounds = {\n      left: pdfAnnotationBase.wrapper.bounds.x,\n      top: pdfAnnotationBase.wrapper.bounds.y,\n      width: pdfAnnotationBase.wrapper.bounds.width,\n      height: pdfAnnotationBase.wrapper.bounds.height\n    };\n    var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n\n    if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n      setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n      setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n      setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n    }\n\n    var labelSettings;\n\n    if (this.pdfViewer.enableShapeLabel) {\n      labelSettings = {\n        // eslint-disable-next-line max-len\n        fontColor: pdfAnnotationBase.fontColor,\n        fontSize: pdfAnnotationBase.fontSize,\n        fontFamily: pdfAnnotationBase.fontFamily,\n        opacity: pdfAnnotationBase.labelOpacity,\n        labelContent: pdfAnnotationBase.labelContent,\n        fillColor: pdfAnnotationBase.labelFillColor\n      }; // eslint-disable-next-line max-len\n\n      this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, bounds, setting, null, null, null, labelSettings);\n    } else {\n      // eslint-disable-next-line max-len\n      this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, bounds, setting);\n    }\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @private\n   */\n\n\n  Annotation.prototype.triggerAnnotationResize = function (pdfAnnotationBase) {\n    // eslint-disable-next-line\n    var setting = {\n      opacity: pdfAnnotationBase.opacity,\n      fillColor: pdfAnnotationBase.fillColor,\n      strokeColor: pdfAnnotationBase.strokeColor,\n      thickness: pdfAnnotationBase.thickness,\n      author: pdfAnnotationBase.author,\n      subject: pdfAnnotationBase.subject,\n      modifiedDate: pdfAnnotationBase.modifiedDate\n    };\n    var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id); // eslint-disable-next-line\n\n    var annotationBounds = pdfAnnotationBase.bounds;\n    var currentPosition = {\n      left: annotationBounds.x,\n      top: annotationBounds.y,\n      x: annotationBounds.x,\n      y: annotationBounds.y,\n      width: annotationBounds.width,\n      height: annotationBounds.height\n    }; // eslint-disable-next-line max-len\n\n    var previousPosition = {\n      left: annotationBounds.oldProperties.x,\n      top: annotationBounds.oldProperties.y,\n      width: annotationBounds.oldProperties.width,\n      height: annotationBounds.oldProperties.height\n    };\n    var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n\n    if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n      setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n      setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n      setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n    }\n\n    var labelSettings;\n\n    if (this.pdfViewer.enableShapeLabel && pdfAnnotationBase.shapeAnnotationType !== 'HandWrittenSignature') {\n      labelSettings = {\n        // eslint-disable-next-line max-len\n        fontColor: pdfAnnotationBase.fontColor,\n        fontSize: pdfAnnotationBase.fontSize,\n        fontFamily: pdfAnnotationBase.fontFamily,\n        opacity: pdfAnnotationBase.labelOpacity,\n        labelContent: pdfAnnotationBase.labelContent,\n        fillColor: pdfAnnotationBase.labelFillColor,\n        notes: pdfAnnotationBase.notes\n      }; // eslint-disable-next-line max-len\n\n      this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, currentPosition, setting, null, null, null, labelSettings);\n    } else {\n      if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage') {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireSignatureResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.signatureName, pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.opacity, pdfAnnotationBase.strokeColor, pdfAnnotationBase.thickness, currentPosition, previousPosition);\n      } else {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, currentPosition, setting);\n      }\n    }\n  };\n  /**\n   * @param pdfAnnotationBase\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.triggerAnnotationMove = function (pdfAnnotationBase, isMoving) {\n    // eslint-disable-next-line\n    var setting = {\n      opacity: pdfAnnotationBase.opacity,\n      fillColor: pdfAnnotationBase.fillColor,\n      strokeColor: pdfAnnotationBase.strokeColor,\n      thickness: pdfAnnotationBase.thickness,\n      author: pdfAnnotationBase.author,\n      subject: pdfAnnotationBase.subject,\n      modifiedDate: pdfAnnotationBase.modifiedDate\n    }; // eslint-disable-next-line\n\n    var annotationBounds = pdfAnnotationBase.bounds;\n    var currentPosition = {\n      left: annotationBounds.x,\n      top: annotationBounds.y,\n      x: annotationBounds.x,\n      y: annotationBounds.y,\n      width: annotationBounds.width,\n      height: annotationBounds.height\n    }; // eslint-disable-next-line max-len\n\n    var previousPosition = {\n      left: annotationBounds.oldProperties.x ? annotationBounds.oldProperties.x : annotationBounds.x,\n      top: annotationBounds.oldProperties.y ? annotationBounds.oldProperties.y : annotationBounds.y,\n      width: annotationBounds.width,\n      height: annotationBounds.height\n    };\n    var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n\n    if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n      setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n      setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n      setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n    }\n\n    if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage') {\n      // eslint-disable-next-line max-len\n      this.pdfViewer.fireSignatureMove(pdfAnnotationBase.pageIndex, pdfAnnotationBase.signatureName, pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.opacity, pdfAnnotationBase.strokeColor, pdfAnnotationBase.thickness, previousPosition, currentPosition);\n    } else {\n      // eslint-disable-next-line max-len\n      isMoving ? this.pdfViewer.fireAnnotationMoving(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, setting, previousPosition, currentPosition) : this.pdfViewer.fireAnnotationMove(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, setting, previousPosition, currentPosition);\n    }\n  };\n  /**\n   * @param annotationId\n   * @param pageNumber\n   * @param annotation\n   * @param annotationCollection\n   * @param isDblClick\n   * @param isSelected\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.annotationSelect = function (annotationId, pageNumber, annotation, annotationCollection, isDblClick, isSelected) {\n    // eslint-disable-next-line\n    var annotSettings;\n\n    if (annotation.shapeAnnotationType === 'textMarkup') {\n      // eslint-disable-next-line max-len\n      annotSettings = {\n        type: 'TextMarkup',\n        subType: annotation.subject,\n        opacity: annotation.opacity,\n        color: annotation.color,\n        textMarkupContent: annotation.textMarkupContent,\n        textMarkupStartIndex: annotation.textMarkupStartIndex,\n        textMarkupEndIndex: annotation.textMarkupEndIndex,\n        customData: annotation.customData\n      };\n    } else if (annotation.shapeAnnotationType === 'StickyNotes') {\n      annotSettings = {\n        type: 'StickyNotes',\n        opacity: annotation.opacity,\n        customData: annotation.customData\n      };\n    } else if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n      annotSettings = {\n        type: 'Stamp',\n        opacity: annotation.opacity,\n        customData: annotation.customData\n      };\n    } else if (annotation.shapeAnnotationType === 'Ink') {\n      annotSettings = {\n        // eslint-disable-next-line max-len\n        type: 'Ink',\n        opacity: annotation.opacity,\n        strokeColor: annotation.strokeColor,\n        thickness: annotation.thickness,\n        modifiedDate: annotation.modifiedDate,\n        width: annotation.bounds.width,\n        height: annotation.bounds.height,\n        left: annotation.bounds.x,\n        top: annotation.bounds.y,\n        data: annotation.data,\n        customData: annotation.customData\n      };\n    } else if (annotation.shapeAnnotationType === 'FreeText') {\n      annotSettings = {\n        type: 'FreeText',\n        opacity: annotation.opacity,\n        fillColor: annotation.fillColor,\n        // eslint-disable-next-line max-len\n        strokeColor: annotation.strokeColor,\n        thickness: annotation.thickness,\n        content: annotation.dynamicText,\n        // eslint-disable-next-line max-len\n        fontFamily: annotation.fontFamily,\n        fontSize: annotation.fontSize,\n        fontColor: annotation.fontColor,\n        textAlign: annotation.textAlign,\n        fontStyle: this.updateFreeTextFontStyle(annotation.font),\n        customData: annotation.customData\n      };\n    } else if (annotation.measureType === '') {\n      if (annotation.shapeAnnotationType === 'Line') {\n        // eslint-disable-next-line max-len\n        annotSettings = {\n          type: 'Shape',\n          subType: 'Line',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          borderDashArray: annotation.borderDashArray,\n          lineHeadStartStyle: annotation.sourceDecoraterShapes,\n          lineHeadEndStyle: annotation.taregetDecoraterShapes,\n          customData: annotation.customData\n        };\n      } else if (annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead') {\n        // eslint-disable-next-line max-len\n        annotSettings = {\n          type: 'Shape',\n          subType: 'Arrow',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          borderDashArray: annotation.borderDashArray,\n          lineHeadStartStyle: annotation.sourceDecoraterShapes,\n          lineHeadEndStyle: annotation.taregetDecoraterShapes,\n          customData: annotation.customData\n        };\n      } else if (annotation.shapeAnnotationType === 'Rectangle') {\n        annotSettings = {\n          type: 'Shape',\n          subType: 'Rectangle',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          customData: annotation.customData\n        };\n      } else if (annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse') {\n        annotSettings = {\n          type: 'Shape',\n          subType: 'Circle',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          customData: annotation.customData\n        };\n      } else if (annotation.shapeAnnotationType === 'Polygon') {\n        annotSettings = {\n          type: 'Shape',\n          subType: 'Polygon',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          customData: annotation.customData\n        };\n      }\n    } else if (annotation.measureType !== '') {\n      if (annotation.measureType === 'Distance') {\n        // eslint-disable-next-line max-len\n        annotSettings = {\n          type: 'Measure',\n          subType: 'Distance',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          borderDashArray: annotation.borderDashArray,\n          lineHeadStartStyle: annotation.sourceDecoraterShapes,\n          lineHeadEndStyle: annotation.taregetDecoraterShapes,\n          customData: annotation.customData\n        };\n      } else if (annotation.measureType === 'Perimeter') {\n        // eslint-disable-next-line max-len\n        annotSettings = {\n          type: 'Measure',\n          subType: 'Perimeter',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          borderDashArray: annotation.borderDashArray,\n          lineHeadStartStyle: annotation.sourceDecoraterShapes,\n          lineHeadEndStyle: annotation.taregetDecoraterShapes,\n          customData: annotation.customData\n        };\n      } else if (annotation.measureType === 'Area') {\n        annotSettings = {\n          type: 'Measure',\n          subType: 'Area',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          customData: annotation.customData\n        };\n      } else if (annotation.measureType === 'Radius') {\n        annotSettings = {\n          type: 'Measure',\n          subType: 'Radius',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          customData: annotation.customData\n        };\n      } else if (annotation.measureType === 'Volume') {\n        annotSettings = {\n          type: 'Measure',\n          subType: 'Volume',\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          calibrate: annotation.calibrate,\n          annotationId: annotation.annotName,\n          customData: annotation.customData\n        };\n      }\n    } // eslint-disable-next-line\n\n\n    var overlappedCollection = []; // eslint-disable-next-line\n\n    var overlappedAnnotations = this.getOverlappedAnnotations(annotation, pageNumber);\n\n    if (overlappedAnnotations && this.overlappedCollections) {\n      // eslint-disable-next-line\n      var overlappedCollections = []; // eslint-disable-next-line\n\n      for (var i = 0; i < overlappedAnnotations.length; i++) {\n        if (overlappedAnnotations[i].shapeAnnotationType !== 'textMarkup' && this.overlappedCollections || isSelected) {\n          for (var j = 0; j < this.overlappedCollections.length; j++) {\n            if (overlappedAnnotations[i].annotName === this.overlappedCollections[j].annotName) {\n              overlappedCollections.push(overlappedAnnotations[i]);\n              break;\n            }\n          }\n        } else {\n          overlappedCollections.push(overlappedAnnotations[i]);\n        }\n      }\n\n      overlappedAnnotations = overlappedCollections;\n    }\n\n    if (this.pdfViewer.enableMultiLineOverlap) {\n      // eslint-disable-next-line\n      for (var i = 0; i < overlappedAnnotations.length; i++) {\n        if (overlappedAnnotations[i].shapeAnnotationType === 'textMarkup') {\n          var isOverlapped = false;\n\n          for (var j = 0; j < overlappedAnnotations[i].bounds.length; j++) {\n            // eslint-disable-next-line\n            var bounds = this.orderTextMarkupBounds(overlappedAnnotations[i].bounds[j]); // eslint-disable-next-line\n\n            var clickedPosition = this.textMarkupAnnotationModule.annotationClickPosition;\n\n            if (clickedPosition && (clickedPosition.x || clickedPosition.y)) {\n              if (bounds.left <= clickedPosition.x && bounds.left + bounds.width >= clickedPosition.x) {\n                if (bounds.top <= clickedPosition.y && bounds.top + bounds.height >= clickedPosition.y) {\n                  isOverlapped = true;\n                }\n              }\n            } else {\n              isOverlapped = true;\n            }\n          }\n\n          if (!isOverlapped) {\n            overlappedAnnotations.splice(i, 1);\n          }\n        }\n      }\n    }\n\n    if (overlappedAnnotations && overlappedAnnotations.length > 0) {\n      annotationCollection = overlappedAnnotations; // eslint-disable-next-line\n\n      for (var i = 0; i < annotationCollection.length; i++) {\n        // eslint-disable-next-line\n        var overlappedObject = cloneObject(annotationCollection[i]);\n        overlappedObject.annotationId = annotationCollection[i].annotName;\n\n        if (annotationId === annotationCollection[i].annotName && annotation.measureType && annotation.measureType === 'Volume') {\n          annotSettings.calibrate = annotationCollection[i].calibrate;\n        }\n\n        delete overlappedObject.annotName;\n        overlappedCollection.push(overlappedObject);\n      }\n    } else {\n      overlappedCollection = null;\n    }\n\n    this.addFreeTextProperties(annotation, annotSettings);\n    var annotationAddMode = annotation.annotationAddMode;\n\n    if (!isDblClick) {\n      if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n        if (!this.pdfViewerBase.isNewStamp && this.annotationSelected) {\n          if (overlappedCollection) {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, overlappedCollection, null, null, annotationAddMode);\n          } else {\n            this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, null, null, null, annotationAddMode);\n          }\n        }\n      } else {\n        var module = this.textMarkupAnnotationModule;\n        var multiPageCollection = module && module.multiPageCollectionList(annotation);\n\n        if (multiPageCollection && multiPageCollection.length === 0) {\n          multiPageCollection = null;\n        }\n\n        if (this.annotationSelected) {\n          if (overlappedCollection) {\n            isSelected = false; // eslint-disable-next-line max-len\n\n            this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, overlappedCollection, multiPageCollection, isSelected, annotationAddMode);\n          } else {\n            isSelected = true; // eslint-disable-next-line max-len\n\n            this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, null, multiPageCollection, isSelected, annotationAddMode);\n          }\n        }\n      }\n    } else {\n      if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n        if (!this.pdfViewerBase.isNewStamp) {\n          this.pdfViewer.fireAnnotationDoubleClick(annotationId, pageNumber, annotSettings);\n        }\n      } else {\n        this.pdfViewer.fireAnnotationDoubleClick(annotationId, pageNumber, annotSettings);\n      }\n    }\n\n    this.annotationSelected = true;\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.selectSignature = function (signatureId, pageNumber, signatureModule) {\n    // eslint-disable-next-line\n    var annotBounds = signatureModule.bounds; // eslint-disable-next-line\n\n    var bounds = {\n      height: annotBounds.height,\n      width: annotBounds.width,\n      x: annotBounds.x,\n      y: annotBounds.y\n    };\n\n    if (!this.pdfViewerBase.signatureAdded) {\n      // eslint-disable-next-line max-len\n      var signature = {\n        bounds: bounds,\n        opacity: signatureModule.opacity,\n        thickness: signatureModule.thickness,\n        strokeColor: signatureModule.strokeColor\n      };\n      this.pdfViewer.fireSignatureSelect(signatureId, pageNumber, signature);\n    }\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.editSignature = function (signature) {\n    // eslint-disable-next-line\n    var currentAnnotation;\n\n    if (signature.uniqueKey) {\n      // eslint-disable-next-line\n      currentAnnotation = this.pdfViewer.nameTable[signature.uniqueKey];\n    } else {\n      currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n    }\n\n    var pageNumber = currentAnnotation.pageIndex;\n\n    if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n      // eslint-disable-next-line\n      var clonedObject = cloneObject(currentAnnotation); // eslint-disable-next-line\n\n      var redoClonedObject = cloneObject(currentAnnotation);\n\n      if (currentAnnotation.opacity !== signature.opacity) {\n        redoClonedObject.opacity = signature.opacity;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          opacity: signature.opacity\n        }); // eslint-disable-next-line max-len\n\n        this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, true, false, clonedObject.opacity, redoClonedObject.opacity); // eslint-disable-next-line max-len\n\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Opacity', '', clonedObject, redoClonedObject);\n      }\n\n      if (currentAnnotation.strokeColor !== signature.strokeColor) {\n        redoClonedObject.strokeColor = signature.strokeColor;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          strokeColor: signature.strokeColor\n        }); // eslint-disable-next-line max-len\n\n        this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, true, false, false, clonedObject.strokeColor, redoClonedObject.strokeColor); // eslint-disable-next-line max-len\n\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n      }\n\n      if (currentAnnotation.thickness !== signature.thickness) {\n        redoClonedObject.thickness = signature.thickness;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          thickness: signature.thickness\n        }); // eslint-disable-next-line max-len\n\n        this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, false, true, clonedObject.thickness, redoClonedObject.thickness); // eslint-disable-next-line max-len\n\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n      }\n\n      currentAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n      this.pdfViewer.renderDrawing();\n      this.pdfViewerBase.signatureModule.modifySignatureCollection(null, pageNumber, currentAnnotation, true);\n    }\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.deletComment = function (commentDiv) {\n    if (commentDiv.parentElement.firstChild === commentDiv) {\n      this.deleteAnnotation();\n    } else {\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.modifyCommentDeleteProperty(commentDiv.parentElement, commentDiv);\n    }\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.addReplyComments = function (currentAnnotation, replyComment, commentType) {\n    if (commentType === 'add') {\n      // eslint-disable-next-line\n      var commentsMainDiv = document.getElementById(currentAnnotation.annotName);\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentDiv(commentsMainDiv);\n\n      for (var j = 0; j < replyComment.length; j++) {\n        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(commentsMainDiv, replyComment[j]);\n      }\n    } else if (commentType === 'next') {\n      // eslint-disable-next-line\n      var commentsMainDiv = document.getElementById(currentAnnotation.annotationId);\n      this.selectAnnotation(currentAnnotation);\n      this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(commentsMainDiv, replyComment);\n    }\n  };\n\n  Annotation.prototype.editComments = function (commentId, editComment) {\n    // eslint-disable-next-line\n    var commentDiv = document.getElementById(commentId);\n    commentDiv.childNodes[1].ej2_instances[0].value = editComment;\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.editAnnotation = function (annotation) {\n    // eslint-disable-next-line\n    var currentAnnotation;\n    var annotationId;\n    var annotationType;\n    var pageNumber;\n    var isTextMarkupUpdate = false;\n\n    if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n      annotationId = currentAnnotation.annotName;\n      pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n    } else {\n      if (this.pdfViewer.selectedItems.annotations[0]) {\n        currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        annotationId = currentAnnotation.annotName;\n        pageNumber = currentAnnotation.pageIndex;\n      }\n    }\n\n    if (annotation.uniqueKey !== undefined) {\n      // eslint-disable-next-line\n      currentAnnotation = this.pdfViewer.nameTable[annotation.uniqueKey];\n      currentAnnotation.annotationSettings.isLock = annotation.annotationSettings.isLock;\n      annotationId = currentAnnotation.annotName;\n      pageNumber = currentAnnotation.pageIndex;\n\n      if (isBlazor()) {\n        if (annotation.allowedInteractions) {\n          var allowedInteractionsCount = annotation.allowedInteractions.length;\n\n          for (var i = 0; i < allowedInteractionsCount; i++) {\n            if (annotation.allowedInteractions[i] === 0) {\n              annotation.allowedInteractions[i] = AllowedInteraction.Select;\n            }\n\n            if (annotation.allowedInteractions[i] === 1) {\n              annotation.allowedInteractions[i] = AllowedInteraction.Move;\n            }\n\n            if (annotation.allowedInteractions[i] === 2) {\n              annotation.allowedInteractions[i] = AllowedInteraction.Resize;\n            }\n\n            if (annotation.allowedInteractions[i] === 3) {\n              annotation.allowedInteractions[i] = AllowedInteraction.Delete;\n            }\n\n            if (annotation.allowedInteractions[i] === 4) {\n              annotation.allowedInteractions[i] = AllowedInteraction.PropertyChange;\n            }\n\n            if (annotation.allowedInteractions[i] === 5) {\n              annotation.allowedInteractions[i] = AllowedInteraction.None;\n            }\n          }\n        }\n      } // eslint-disable-next-line\n\n\n      currentAnnotation.allowedInteractions = annotation.allowedInteractions ? annotation.allowedInteractions : this.updateAnnotationAllowedInteractions(annotation);\n    }\n\n    if (!currentAnnotation) {\n      if (annotation.shapeAnnotationType === 'sticky' && annotation.annotationId !== undefined) {\n        // eslint-disable-next-line\n        currentAnnotation = this.pdfViewer.nameTable[annotation.annotationId];\n        currentAnnotation.annotationSettings.isLock = annotation.annotationSettings.isLock;\n        annotationId = currentAnnotation.annotName;\n        pageNumber = currentAnnotation.pageIndex;\n      }\n    }\n\n    if (annotation.shapeAnnotationType === 'textMarkup') {\n      if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n        // eslint-disable-next-line max-len\n        currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(annotation.pageNumber, annotation);\n\n        for (var i = 0; i < currentAnnotation.length; i++) {\n          if (annotation.annotationId === currentAnnotation[i].annotName) {\n            isTextMarkupUpdate = true;\n            currentAnnotation = currentAnnotation[i];\n            currentAnnotation.isPrint = annotation.isPrint;\n            this.textMarkupAnnotationModule.currentTextMarkupAnnotation = currentAnnotation;\n            this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = currentAnnotation.pageNumber;\n            currentAnnotation.allowedInteractions = annotation.allowedInteractions;\n            pageNumber = currentAnnotation.pageNumber;\n            annotationId = annotation.annotationId;\n            break;\n          }\n        }\n      }\n    }\n\n    if (currentAnnotation) {\n      // eslint-disable-next-line\n      var clonedObject = cloneObject(currentAnnotation); // eslint-disable-next-line\n\n      var redoClonedObject = cloneObject(currentAnnotation);\n\n      if (annotation.shapeAnnotationType === 'textMarkup') {\n        annotationType = 'textMarkup';\n      }\n\n      if (annotation && annotation.isCommentLock === true) {\n        currentAnnotation.isCommentLock = annotation.isCommentLock;\n      }\n\n      if (annotation.comments) {\n        for (var j_1 = 0; j_1 < annotation.comments.length; j_1++) {\n          if (annotation.comments[j_1].isLock === true) {\n            if (annotationType) {\n              currentAnnotation.comments = annotation.comments;\n              currentAnnotation.comments[j_1].isLock = annotation.comments[j_1].isLock;\n            } else {\n              currentAnnotation.properties.comments = annotation.comments;\n              currentAnnotation.properties.comments[j_1].isLock = annotation.comments[j_1].isLock;\n            }\n          }\n        }\n      }\n\n      if (annotation && annotation.note !== '' && annotation.note !== undefined) {\n        if (annotationType) {\n          currentAnnotation.note = annotation.note; // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.note);\n        } else {\n          currentAnnotation.notes = annotation.note; // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.notes);\n        }\n      } else {\n        if (annotation && annotation.isCommentLock && (annotation.type && annotation.type !== 'FreeText' || annotation.shapeAnnotationType !== 'FreeText')) {\n          this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, '  ');\n        }\n      }\n\n      if (annotation.commentId && annotation.editComment && annotation.commentType === 'edit') {\n        this.editComments(annotation.commentId, annotation.editComment);\n      }\n\n      if (annotation.replyComment && annotation.commentType === 'add') {\n        this.addReplyComments(currentAnnotation, annotation.replyComment, annotation.commentType);\n        this.pdfViewer.annotationCollection[0].note = annotation.note;\n      }\n\n      if (annotation.nextComment && annotation.commentType === 'next') {\n        this.addReplyComments(annotation, annotation.nextComment, annotation.commentType);\n      }\n\n      if (annotation.note === '' && annotation.commentType === 'delete') {\n        // eslint-disable-next-line\n        var commentDiv = document.getElementById(annotation.annotationId);\n        this.deletComment(commentDiv);\n      }\n\n      if (annotation.comments) {\n        for (var j_2 = 0; j_2 < annotation.comments.length; j_2++) {\n          if (annotation.comments[j_2].note === '' && annotation.commentType === 'delete') {\n            // eslint-disable-next-line\n            var commentDiv = document.getElementById(annotation.comments[j_2].annotName);\n            this.deletComment(commentDiv);\n          }\n        }\n      }\n\n      if (annotation.type === 'TextMarkup' || annotation.shapeAnnotationType === 'textMarkup') {\n        if (currentAnnotation.annotationSettings && annotation.annotationSettings) {\n          if (currentAnnotation.annotationSettings.isLock !== annotation.annotationSettings.isLock) {\n            // eslint-disable-next-line max-len\n            var pageAnnotations = this.textMarkupAnnotationModule.modifyAnnotationProperty('AnnotationSettings', annotation.annotationSettings.isLock, null); // eslint-disable-next-line max-len\n\n            this.textMarkupAnnotationModule.manageAnnotations(pageAnnotations, this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);\n          }\n        }\n\n        if (currentAnnotation.opacity !== annotation.opacity) {\n          this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null, annotation.opacity);\n        }\n\n        if (currentAnnotation.color !== annotation.color) {\n          this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(annotation.color);\n        }\n\n        annotationType = 'textMarkup';\n\n        if (isTextMarkupUpdate) {\n          this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n          this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n        } // eslint-disable-next-line max-len\n\n      } else if (annotation && annotation.stampAnnotationType === 'image' && annotation.shapeAnnotationType === 'stamp' && annotation.stampAnnotationPath) {\n        annotationType = 'stamp';\n\n        if (currentAnnotation.data !== annotation.stampAnnotationPath) {\n          currentAnnotation.data = annotation.stampAnnotationPath;\n          currentAnnotation.wrapper.children[0].imageSource = annotation.stampAnnotationPath;\n        }\n\n        if (annotation.opacity && currentAnnotation.opacity !== annotation.opacity) {\n          this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n        }\n\n        this.calculateAnnotationBounds(currentAnnotation, annotation); // eslint-disable-next-line max-len\n      } else if (annotation.type === 'StickyNotes' || annotation.type === 'Stamp' || annotation.shapeAnnotationType === 'sticky' || annotation.shapeAnnotationType === 'stamp') {\n        if (annotation.opacity && currentAnnotation.opacity !== annotation.opacity) {\n          this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n        }\n\n        this.calculateAnnotationBounds(currentAnnotation, annotation);\n\n        if (annotation.type === 'StickyNotes' || annotation.shapeAnnotationType === 'sticky') {\n          annotationType = 'sticky';\n        } else {\n          annotationType = 'stamp';\n        } // eslint-disable-next-line max-len\n\n      } else if (annotation.type === 'Ink' || annotation.type === 'Shape' || annotation.type === 'Measure' || annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Polygon' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Ink') {\n        this.calculateAnnotationBounds(currentAnnotation, annotation);\n\n        if (annotation.opacity && currentAnnotation.opacity !== annotation.opacity) {\n          this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n        }\n\n        if (annotation.fillColor && currentAnnotation.fillColor !== annotation.fillColor) {\n          redoClonedObject.fillColor = annotation.fillColor;\n\n          if (annotation.labelSettings && annotation.labelSettings.fillColor) {\n            annotation.labelSettings.fillColor = annotation.fillColor;\n          }\n\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            fillColor: annotation.fillColor\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false); // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Fill', '', clonedObject, redoClonedObject);\n        }\n\n        if (annotation.strokeColor && currentAnnotation.strokeColor !== annotation.strokeColor) {\n          redoClonedObject.strokeColor = annotation.strokeColor;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            strokeColor: annotation.strokeColor\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false); // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n        }\n\n        if (annotation.thickness && currentAnnotation.thickness !== annotation.thickness) {\n          redoClonedObject.thickness = annotation.thickness;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            thickness: annotation.thickness\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false); // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n        }\n\n        if (currentAnnotation.author !== annotation.author) {\n          redoClonedObject.author = annotation.author;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            author: annotation.author\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n        }\n\n        if (currentAnnotation.modifiedDate !== annotation.modifiedDate) {\n          redoClonedObject.modifiedDate = annotation.modifiedDate;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            modifiedDate: annotation.modifiedDate\n          });\n        }\n\n        if (currentAnnotation.subject !== annotation.subject) {\n          redoClonedObject.subject = annotation.subject;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            subject: annotation.subject\n          });\n          this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false); // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n        }\n\n        if (this.pdfViewer.enableShapeLabel && currentAnnotation.fontColor !== annotation.fontColor) {\n          redoClonedObject.fontColor = annotation.fontColor;\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            fontColor: annotation.fontColor\n          });\n        }\n\n        if (this.pdfViewer.enableShapeLabel && annotation.labelSettings && annotation.labelSettings.fillColor) {\n          if (currentAnnotation.labelFillColor !== annotation.labelSettings.fillColor) {\n            redoClonedObject.labelFillColor = annotation.labelSettings.fillColor;\n            this.pdfViewer.nodePropertyChange(currentAnnotation, {\n              labelFillColor: annotation.labelSettings.fillColor\n            });\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Polygon') {\n          if (JSON.stringify(currentAnnotation.vertexPoints) !== JSON.stringify(annotation.vertexPoints)) {\n            currentAnnotation.vertexPoints = annotation.vertexPoints;\n            this.pdfViewer.nodePropertyChange(currentAnnotation, {\n              vertexPoints: annotation.vertexPoints\n            });\n          }\n        } // eslint-disable-next-line max-len\n\n\n        if (annotation.subType === 'Line' || annotation.subType === 'Arrow' || annotation.subType === 'Distance' || annotation.subType === 'Perimeter') {\n          var isSourceDecoraterShapesChanged = false;\n          var isTargetDecoraterShapesChanged = false;\n          var isBorderDashArrayChanged = false;\n          clonedObject.lineHeadStart = currentAnnotation.sourceDecoraterShapes;\n          clonedObject.lineHeadEnd = currentAnnotation.taregetDecoraterShapes;\n          redoClonedObject.lineHeadStart = annotation.lineHeadStartStyle;\n          redoClonedObject.lineHeadEnd = annotation.lineHeadEndStyle;\n          redoClonedObject.borderDashArray = annotation.borderDashArray;\n\n          if (currentAnnotation.taregetDecoraterShapes !== annotation.lineHeadEndStyle) {\n            isTargetDecoraterShapesChanged = true;\n          }\n\n          if (currentAnnotation.sourceDecoraterShapes !== annotation.lineHeadStartStyle) {\n            isSourceDecoraterShapesChanged = true;\n          }\n\n          if (currentAnnotation.borderDashArray !== annotation.borderDashArray) {\n            isBorderDashArrayChanged = true;\n          } // eslint-disable-next-line max-len\n\n\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            sourceDecoraterShapes: annotation.lineHeadStartStyle,\n            taregetDecoraterShapes: annotation.lineHeadEndStyle,\n            borderDashArray: annotation.borderDashArray\n          }); // eslint-disable-next-line max-len\n\n          this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false, isSourceDecoraterShapesChanged, isTargetDecoraterShapesChanged, isBorderDashArrayChanged); // eslint-disable-next-line max-len\n\n          this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Line properties change', '', clonedObject, redoClonedObject);\n        } // eslint-disable-next-line max-len\n\n\n        if (annotation.type === 'Shape' || annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Polygon') {\n          annotationType = 'shape';\n        }\n\n        if (annotation.type === 'Ink' || annotation.shapeAnnotationType === 'Ink') {\n          annotationType = 'ink';\n        } // eslint-disable-next-line max-len\n\n\n        if (annotation.type === 'Measure' || annotation.subject === 'Distance calculation' || annotation.subject === 'Perimeter calculation' || annotation.subject === 'Radius calculation' || annotation.subject === 'Area calculation' || annotation.subject === 'Volume calculation') {\n          annotationType = 'shape_measure';\n        }\n\n        if (annotation.labelSettings && this.pdfViewer.enableShapeLabel) {\n          this.updateFreeTextProperties(currentAnnotation);\n          this.pdfViewer.nodePropertyChange(currentAnnotation, {\n            // eslint-disable-next-line max-len\n            labelOpacity: annotation.labelSettings.opacity,\n            fontColor: annotation.labelSettings.fontColor,\n            fontSize: annotation.labelSettings.fontSize,\n            fontFamily: annotation.labelSettings.fontFamily,\n            labelContent: currentAnnotation.notes,\n            labelFillColor: annotation.labelSettings.fillColor\n          });\n        }\n\n        if (this.pdfViewer.enableShapeLabel && annotation.calibrate && annotation.calibrate.depth) {\n          if (this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth !== annotation.calibrate.depth) {\n            this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth = annotation.calibrate.depth; // eslint-disable-next-line max-len\n\n            currentAnnotation.notes = this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(currentAnnotation.vertexPoints, currentAnnotation.id, currentAnnotation.pageIndex);\n            currentAnnotation.labelContent = currentAnnotation.notes;\n\n            if (annotation.labelSettings && annotation.labelSettings.labelContent) {\n              annotation.labelSettings.labelContent = currentAnnotation.notes;\n            }\n\n            this.pdfViewer.nodePropertyChange(currentAnnotation, {\n              labelContent: currentAnnotation.labelContent\n            }); // eslint-disable-next-line max-len\n\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.notes);\n          }\n        }\n      } else if (annotation.type === 'FreeText' || annotation.shapeAnnotationType === 'FreeText') {\n        annotationType = 'freetext';\n\n        if (this.pdfViewer.freeTextSettings.enableAutoFit && currentAnnotation.dynamicText !== annotation.content) {\n          // eslint-disable-next-line\n          var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + currentAnnotation.pageIndex);\n          var context = canvas.getContext(\"2d\");\n          var fontSize = annotation.fontSize;\n          var font = void 0;\n          var fontFamily = annotation.fontFamily;\n          var zoomFactor = this.pdfViewerBase.getZoomFactor(); // eslint-disable-next-line\n\n          annotation.font.isBold ? font = 'bold' + ' ' + fontSize + 'px' + ' ' + fontFamily : font = fontSize + 'px' + ' ' + fontFamily;\n          context.font = font;\n          var characterLength = 8;\n          var highestTextNode = \"\"; // eslint-disable-next-line\n\n          var textNodes = [];\n          var textboxValue = annotation.content ? annotation.content : annotation.dynamicText;\n\n          if (textboxValue.indexOf('\\n') > -1) {\n            textNodes = textboxValue.split('\\n');\n\n            for (var j = 0; j < textNodes.length; j++) {\n              // eslint-disable-next-line\n              var textNodeData = context.measureText(textNodes[j]); // eslint-disable-next-line\n\n              var highestTextNodeData = context.measureText(highestTextNode);\n\n              if (textNodeData.width > highestTextNodeData.width) {\n                highestTextNode = textNodes[j];\n              }\n            }\n          } else {\n            highestTextNode = textboxValue;\n          } // eslint-disable-next-line\n\n\n          var textwidth = context.measureText(highestTextNode);\n          annotation.bounds.width = Math.ceil(textwidth.width + (characterLength + 1) * 2);\n          var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + annotation.pageIndex);\n          var maxWidth = pageDiv.clientWidth - annotation.bounds.left * zoomFactor;\n\n          if (annotation.bounds.width > maxWidth) {\n            annotation.bounds.width = maxWidth / zoomFactor;\n          }\n\n          var height = annotation.bounds.height;\n          annotation.bounds.height = height >= currentAnnotation.bounds.height ? height : currentAnnotation.bounds.height;\n        }\n\n        this.calculateAnnotationBounds(currentAnnotation, annotation);\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          // eslint-disable-next-line max-len\n          opacity: annotation.opacity,\n          fontColor: annotation.fontColor,\n          fontSize: annotation.fontSize,\n          fontFamily: annotation.fontFamily,\n          // eslint-disable-next-line max-len\n          dynamicText: annotation.content ? annotation.content : annotation.dynamicText,\n          fillColor: annotation.fillColor,\n          textAlign: annotation.textAlign,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          font: annotation.fontStyle ? this.setFreeTextFontStyle(annotation.fontStyle) : this.setFreeTextFontStyle(annotation.font),\n          isReadonly: annotation.isReadonly\n        });\n\n        if (annotation.opacity && currentAnnotation.opacity !== annotation.opacity) {\n          this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        }\n\n        if (annotation.fillColor && currentAnnotation.fillColor !== annotation.fillColor) {\n          this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false);\n        }\n\n        if (annotation.strokeColor && currentAnnotation.strokeColor !== annotation.strokeColor) {\n          this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n        }\n\n        if (annotation.thickness && currentAnnotation.thickness !== annotation.thickness) {\n          this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n        }\n\n        if (annotation.content && this.pdfViewer.selectedItems.annotations[0]) {\n          this.updateAnnotationComments(this.pdfViewer.selectedItems.annotations[0].annotName, annotation.content);\n        } // eslint-disable-next-line\n\n\n        var newCommentDiv = document.getElementById(this.pdfViewer.element.id + '_commenttextbox_editor'); // eslint-disable-next-line\n\n        var commentObj = new InPlaceEditor({\n          value: annotation.content\n        });\n        commentObj.appendTo(newCommentDiv);\n      }\n\n      currentAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n\n      if (currentAnnotation.customData !== annotation.customData) {\n        currentAnnotation.customData = annotation.customData;\n      }\n\n      currentAnnotation.isPrint = annotation.isPrint;\n\n      if (annotation.type !== 'TextMarkup') {\n        this.pdfViewer.renderDrawing();\n        this.updateCollection(annotationId, pageNumber, annotation, annotationType);\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.annotationPropertyChange = function (currentAnnotation, opacity, actionString, clonedObject, redoClonedObject) {\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      opacity: opacity\n    });\n    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true); // eslint-disable-next-line max-len\n\n    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, actionString, '', clonedObject, redoClonedObject);\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.calculateAnnotationBounds = function (currentAnnotation, annotation) {\n    // eslint-disable-next-line\n    var bounds = this.pdfViewerBase.convertBounds(currentAnnotation.wrapper.bounds); // eslint-disable-next-line\n\n    var annotBounds = this.pdfViewerBase.convertBounds(annotation.bounds);\n\n    if (bounds && annotBounds) {\n      // eslint-disable-next-line\n      if (JSON.stringify(bounds) !== JSON.stringify(annotBounds) && Math.abs(bounds.Y - annotBounds.Y) > 2 || Math.abs(bounds.X - annotBounds.X) > 2 || Math.abs(bounds.Width - annotBounds.Width) > 2 || Math.abs(bounds.Height - annotBounds.Height) > 2) {\n        // eslint-disable-next-line\n        var annotationBounds = {\n          x: annotBounds.X + annotBounds.Width / 2,\n          y: annotBounds.Y + annotBounds.Height / 2,\n          width: annotBounds.Width,\n          height: annotBounds.Height\n        };\n        this.pdfViewer.nodePropertyChange(currentAnnotation, {\n          bounds: annotationBounds\n        });\n        this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false);\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.updateFreeTextProperties = function (annotation) {\n    if (annotation.labelSettings) {\n      if (annotation.labelSettings.fillColor) {\n        annotation.labelFillColor = annotation.labelSettings.fillColor;\n      }\n\n      if (annotation.labelSettings.fontColor) {\n        annotation.fontColor = annotation.labelSettings.fontColor;\n      }\n\n      if (annotation.labelSettings.fontSize) {\n        annotation.fontSize = annotation.labelSettings.fontSize;\n      }\n\n      if (annotation.labelSettings.fontFamily) {\n        annotation.fontFamily = annotation.labelSettings.fontFamily;\n      }\n\n      if (annotation.labelSettings.opacity) {\n        annotation.labelOpacity = annotation.labelSettings.opacity;\n      }\n\n      if (annotation.labelSettings.labelContent) {\n        annotation.labelContent = annotation.labelSettings.labelContent;\n      }\n    }\n  };\n\n  Annotation.prototype.updateAnnotationComments = function (annotationId, noteContent) {\n    // eslint-disable-next-line\n    var commentsDiv = document.getElementById(annotationId);\n\n    if (commentsDiv && commentsDiv.childNodes) {\n      if (commentsDiv.childNodes[0].ej2_instances) {\n        commentsDiv.childNodes[0].ej2_instances[0].value = noteContent;\n      } else if (commentsDiv.childNodes[0].childNodes && commentsDiv.childNodes[0].childNodes[1].ej2_instances) {\n        commentsDiv.childNodes[0].childNodes[1].ej2_instances[0].value = noteContent;\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param currentAnnotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.addFreeTextProperties = function (annotation, currentAnnotation) {\n    if (this.pdfViewer.enableShapeLabel && annotation && currentAnnotation) {\n      currentAnnotation.labelSettings = {\n        fontColor: annotation.fontColor,\n        fontSize: annotation.fontSize,\n        fontFamily: annotation.fontFamily,\n        opacity: annotation.labelOpacity,\n        labelContent: annotation.labelContent,\n        fillColor: annotation.labelFillColor\n      };\n    }\n  };\n\n  Annotation.prototype.updateMeasurementSettings = function () {\n    if (this.pdfViewer.enableAnnotation && this.pdfViewer.enableMeasureAnnotation) {\n      // eslint-disable-next-line max-len\n      var ratioString = '1 ' + this.pdfViewer.measurementSettings.conversionUnit + ' = ' + this.pdfViewer.measurementSettings.scaleRatio + ' ' + this.pdfViewer.measurementSettings.displayUnit;\n      this.measureAnnotationModule.updateMeasureValues(ratioString, this.pdfViewer.measurementSettings.displayUnit, this.pdfViewer.measurementSettings.conversionUnit, this.pdfViewer.measurementSettings.depth);\n    }\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.updateCollection = function (annotationId, pageNumber, annotation, annotationType) {\n    // eslint-disable-next-line\n    var annotationCollection; // eslint-disable-next-line\n\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType);\n\n    if (this.pdfViewerBase.isStorageExceed) {\n      storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + annotationType];\n    }\n\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      var index = this.getPageCollection(annotObject, pageNumber);\n\n      if (annotObject[index]) {\n        annotationCollection = annotObject[index].annotations;\n\n        if (annotationCollection !== null) {\n          for (var i = 0; i < annotationCollection.length; i++) {\n            if (annotationCollection[i].annotName === annotationId) {\n              // eslint-disable-next-line\n              var newAnnot = this.modifyAnnotationProperties(annotationCollection[i], annotation, annotationType);\n              annotationCollection[i] = newAnnot;\n            }\n          }\n\n          if (!this.pdfViewerBase.isStorageExceed) {\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType);\n          }\n\n          if (annotObject[index]) {\n            annotObject[index].annotations = annotationCollection;\n          }\n\n          var annotationStringified = JSON.stringify(annotObject);\n\n          if (this.pdfViewerBase.isStorageExceed) {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + annotationType] = annotationStringified;\n          } else {\n            // eslint-disable-next-line max-len\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType, annotationStringified);\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.modifyAnnotationProperties = function (newAnnotation, annotation, annotationType) {\n    if (annotation && annotation.isCommentLock === true) {\n      newAnnotation.isCommentLock = annotation.isCommentLock;\n    }\n\n    if (annotation.comments) {\n      for (var j = 0; j < annotation.comments.length; j++) {\n        if (annotation.comments[j].isLock === true) {\n          newAnnotation.comments[j].isLock = annotation.comments[j].isLock;\n        }\n      }\n    }\n\n    if (annotation && annotation.note !== '' && annotation.note !== undefined) {\n      newAnnotation.note = annotation.note;\n    }\n\n    if (annotation.commentId && annotation.editComment && annotation.commentType === 'edit') {\n      // eslint-disable-next-line\n      var commentDiv = document.getElementById(annotation.commentId);\n\n      if (annotation.annotationId === annotation.commentId) {\n        newAnnotation.note = commentDiv.childNodes[1].ej2_instances[0].value;\n      }\n\n      for (var j = 0; j < annotation.comments.length; j++) {\n        if (annotation.comments[j].annotName === annotation.commentId) {\n          newAnnotation.comments[j].note = commentDiv.childNodes[1].ej2_instances[0].value;\n        }\n      }\n    }\n\n    if (annotationType === 'textMarkup') {\n      newAnnotation.opacity = annotation.opacity;\n      newAnnotation.color = annotation.color;\n      newAnnotation.allowedInteractions = annotation.allowedInteractions;\n    } else if (annotationType === 'sticky' || annotationType === 'stamp') {\n      if (annotation.bounds) {\n        newAnnotation.bounds = annotation.bounds;\n      }\n\n      newAnnotation.opacity = annotation.opacity;\n      newAnnotation.annotationSettings = annotation.annotationSettings;\n      newAnnotation.allowedInteractions = annotation.allowedInteractions;\n\n      if (annotation.stampAnnotationPath) {\n        newAnnotation.stampAnnotationPath = annotation.stampAnnotationPath;\n      }\n    } else if (annotationType === 'ink') {\n      if (annotation.bounds) {\n        newAnnotation.bounds = annotation.bounds;\n      }\n\n      newAnnotation.opacity = annotation.opacity;\n      newAnnotation.strokeColor = annotation.strokeColor;\n      newAnnotation.thickness = annotation.thickness;\n      newAnnotation.annotationSettings = annotation.annotationSettings;\n      newAnnotation.allowedInteractions = annotation.allowedInteractions;\n    } else if (annotationType === 'shape' || annotationType === 'shape_measure') {\n      if (annotation.subType === 'Line' || annotation.subType === 'Arrow' || annotation.subType === 'Distance' || annotation.subType === 'Perimeter') {\n        if (annotation.bounds) {\n          newAnnotation.bounds = annotation.bounds;\n        }\n\n        if (annotation.vertexPoint) {\n          newAnnotation.vertexPoints = annotation.vertexPoints;\n        }\n\n        newAnnotation.opacity = annotation.opacity;\n        newAnnotation.fillColor = annotation.fillColor;\n        newAnnotation.strokeColor = annotation.strokeColor;\n        newAnnotation.thickness = annotation.thickness;\n        newAnnotation.borderDashArray = annotation.borderDashArray;\n        newAnnotation.lineHeadStart = this.getArrowTypeForCollection(annotation.lineHeadStartStyle);\n        newAnnotation.lineHeadEnd = this.getArrowTypeForCollection(annotation.lineHeadEndStyle);\n        newAnnotation.annotationSettings = annotation.annotationSettings;\n        newAnnotation.allowedInteractions = annotation.allowedInteractions;\n      } else {\n        if (annotation.bounds) {\n          newAnnotation.bounds = annotation.bounds;\n        }\n\n        if (annotation.vertexPoint) {\n          newAnnotation.vertexPoints = annotation.vertexPoints;\n        }\n\n        newAnnotation.opacity = annotation.opacity;\n        newAnnotation.fillColor = annotation.fillColor;\n        newAnnotation.strokeColor = annotation.strokeColor;\n        newAnnotation.thickness = annotation.thickness;\n        newAnnotation.annotationSettings = annotation.annotationSettings;\n        newAnnotation.allowedInteractions = annotation.allowedInteractions;\n\n        if (annotation.calibrate) {\n          if (newAnnotation.annotName === annotation.annotationId) {\n            if (newAnnotation.calibrate.depth !== annotation.calibrate.depth) {\n              newAnnotation.calibrate.depth = annotation.calibrate.depth;\n              this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth = annotation.calibrate.depth; // eslint-disable-next-line max-len\n\n              newAnnotation.note = this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(newAnnotation.vertexPoints);\n            }\n          }\n        }\n      }\n\n      if (this.pdfViewer.enableShapeLabel && annotation.labelSettings) {\n        var text = annotation.labelSettings.labelContent;\n        newAnnotation.note = text;\n        newAnnotation.fontSize = annotation.labelSettings.fontSize;\n        newAnnotation.labelFillColor = annotation.labelSettings.fillColor;\n\n        if (newAnnotation.labelContent) {\n          newAnnotation.labelContent = text;\n        }\n\n        if (newAnnotation.labelSettings) {\n          newAnnotation.labelSettings = annotation.labelSettings;\n        }\n\n        this.updateAnnotationComments(newAnnotation.annotName, text);\n      }\n    } else if (annotationType === 'freetext') {\n      if (annotation.bounds) {\n        newAnnotation.bounds = annotation.bounds;\n      }\n\n      newAnnotation.opacity = annotation.opacity;\n      newAnnotation.strokeColor = annotation.strokeColor;\n      newAnnotation.thickness = annotation.thickness;\n\n      if (annotation.content) {\n        newAnnotation.dynamicText = annotation.content;\n      }\n\n      newAnnotation.fontFamily = annotation.fontFamily;\n      newAnnotation.fontSize = annotation.fontSize;\n      newAnnotation.fontColor = annotation.fontColor;\n      newAnnotation.fillColor = annotation.fillColor;\n      newAnnotation.font = annotation.font ? annotation.font : annotation.fontStyle;\n      newAnnotation.textAlign = annotation.textAlign;\n      newAnnotation.annotationSettings = annotation.annotationSettings;\n      newAnnotation.allowedInteractions = annotation.allowedInteractions;\n      newAnnotation.isReadonly = annotation.isReadonly;\n    }\n\n    newAnnotation.customData = annotation.customData;\n    newAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n    newAnnotation.isPrint = annotation.isPrint;\n\n    if (annotation.annotationSettings && !isNullOrUndefined(annotation.annotationSettings.isLock)) {\n      newAnnotation.isLocked = annotation.annotationSettings.isLock;\n    }\n\n    return newAnnotation;\n  };\n  /**\n   * @param annotationType\n   * @param annotationSubType\n   * @param annotationType\n   * @param annotationSubType\n   * @private\n   */\n\n\n  Annotation.prototype.updateAnnotationAuthor = function (annotationType, annotationSubType) {\n    var annotationAuthor;\n\n    if (annotationType === 'sticky') {\n      // eslint-disable-next-line max-len\n      annotationAuthor = this.pdfViewer.stickyNotesSettings.author !== 'Guest' ? this.pdfViewer.stickyNotesSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n    } else if (annotationType === 'stamp') {\n      // eslint-disable-next-line max-len\n      annotationAuthor = this.pdfViewer.stampSettings.author !== 'Guest' ? this.pdfViewer.stampSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n    } else if (annotationType === 'shape') {\n      if (annotationSubType === 'Line') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.lineSettings.author !== 'Guest' ? this.pdfViewer.lineSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'LineWidthArrowHead' || annotationSubType === 'Arrow') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.arrowSettings.author !== 'Guest' ? this.pdfViewer.arrowSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Circle' || annotationSubType === 'Ellipse' || annotationSubType === 'Oval') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.circleSettings.author !== 'Guest' ? this.pdfViewer.circleSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Rectangle' || annotationSubType === 'Square') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.rectangleSettings.author !== 'Guest' ? this.pdfViewer.rectangleSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Polygon') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.polygonSettings.author !== 'Guest' ? this.pdfViewer.polygonSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      }\n    } else if (annotationType === 'measure') {\n      if (annotationSubType === 'Distance' || annotationSubType === 'Distance calculation') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.distanceSettings.author !== 'Guest' ? this.pdfViewer.distanceSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Perimeter' || annotationSubType === 'Perimeter calculation') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.perimeterSettings.author !== 'Guest' ? this.pdfViewer.perimeterSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Radius' || annotationSubType === 'Radius calculation') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.radiusSettings.author !== 'Guest' ? this.pdfViewer.radiusSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Area' || annotationSubType === 'Area calculation') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.areaSettings.author !== 'Guest' ? this.pdfViewer.areaSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Volume' || annotationSubType === 'Volume calculation') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.volumeSettings.author !== 'Guest' ? this.pdfViewer.volumeSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      }\n    } else if (annotationType === 'textMarkup') {\n      if (annotationSubType === 'Highlight') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.highlightSettings.author !== 'Guest' ? this.pdfViewer.highlightSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Underline') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.underlineSettings.author !== 'Guest' ? this.pdfViewer.underlineSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else if (annotationSubType === 'Strikethrough') {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.strikethroughSettings.author !== 'Guest' ? this.pdfViewer.strikethroughSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n      } else {\n        // eslint-disable-next-line max-len\n        annotationAuthor = this.pdfViewer.annotationSettings.author;\n      }\n    } else if (annotationType === 'freeText') {\n      // eslint-disable-next-line max-len\n      annotationAuthor = this.pdfViewer.freeTextSettings.author !== 'Guest' ? this.pdfViewer.freeTextSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n    } else if (annotationType === 'ink') {\n      // eslint-disable-next-line max-len\n      annotationAuthor = this.pdfViewer.inkAnnotationSettings.author !== 'Guest' ? this.pdfViewer.inkAnnotationSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n    }\n\n    if (!annotationAuthor) {\n      // eslint-disable-next-line max-len\n      annotationAuthor = this.pdfViewer.annotationSettings.author;\n    }\n\n    return annotationAuthor;\n  };\n  /**\n   * @param colour\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.nameToHash = function (colour) {\n    // eslint-disable-next-line\n    var colours = {\n      'aliceblue': '#f0f8ff',\n      'antiquewhite': '#faebd7',\n      'aqua': '#00ffff',\n      'aquamarine': '#7fffd4',\n      'azure': '#f0ffff',\n      'beige': '#f5f5dc',\n      'bisque': '#ffe4c4',\n      'black': '#000000',\n      'blanchedalmond': '#ffebcd',\n      'blue': '#0000ff',\n      'blueviolet': '#8a2be2',\n      'brown': '#a52a2a',\n      'burlywood': '#deb887',\n      'yellow': '#ffff00',\n      'yellowgreen': '#9acd32',\n      'cadetblue': '#5f9ea0',\n      'chartreuse': '#7fff00',\n      'chocolate': '#d2691e',\n      'coral': '#ff7f50',\n      'cornflowerblue': '#6495ed',\n      'cornsilk': '#fff8dc',\n      'crimson': '#dc143c',\n      'cyan': '#00ffff',\n      'darkblue': '#00008b',\n      'darkcyan': '#008b8b',\n      'darkgoldenrod': '#b8860b',\n      'darkgray': '#a9a9a9',\n      'darkred': '#8b0000',\n      'darksalmon': '#e9967a',\n      'darkgreen': '#006400',\n      'darkkhaki': '#bdb76b',\n      'darkmagenta': '#8b008b',\n      'darkolivegreen': '#556b2f',\n      'darkorange': '#ff8c00',\n      'darkorchid': '#9932cc',\n      'darkseagreen': '#8fbc8f',\n      'darkslateblue': '#483d8b',\n      'darkslategray': '#2f4f4f',\n      'darkturquoise': '#00ced1',\n      'darkviolet': '#9400d3',\n      'deeppink': '#ff1493',\n      'deepskyblue': '#00bfff',\n      'dimgray': '#696969',\n      'dodgerblue': '#1e90ff',\n      'firebrick': '#b22222',\n      'floralwhite': '#fffaf0',\n      'forestgreen': '#228b22',\n      'fuchsia': '#ff00ff',\n      'gainsboro': '#dcdcdc',\n      'ghostwhite': '#f8f8ff',\n      'gold': '#ffd700',\n      'goldenrod': '#daa520',\n      'gray': '#808080',\n      'green': '#008000',\n      'greenyellow': '#adff2f',\n      'honeydew': '#f0fff0',\n      'hotpink': '#ff69b4',\n      'indianred ': '#cd5c5c',\n      'mediumorchid': '#ba55d3',\n      'mediumpurple': '#9370d8',\n      'indigo': '#4b0082',\n      'ivory': '#fffff0',\n      'navy': '#000080',\n      'oldlace': '#fdf5e6',\n      'olive': '#808000',\n      'khaki': '#f0e68c',\n      'lavender': '#e6e6fa',\n      'lavenderblush': '#fff0f5',\n      'lawngreen': '#7cfc00',\n      'lemonchiffon': '#fffacd',\n      'lightblue': '#add8e6',\n      'lightcoral': '#f08080',\n      'lightcyan': '#e0ffff',\n      'lightgoldenrodyellow': '#fafad2',\n      'lightgrey': '#d3d3d3',\n      'lightgreen': '#90ee90',\n      'lightpink': '#ffb6c1',\n      'lightsalmon': '#ffa07a',\n      'lightseagreen': '#20b2aa',\n      'lightskyblue': '#87cefa',\n      'lightslategray': '#778899',\n      'lightsteelblue': '#b0c4de',\n      'lightyellow': '#ffffe0',\n      'lime': '#00ff00',\n      'limegreen': '#32cd32',\n      'linen': '#faf0e6',\n      'magenta': '#ff00ff',\n      'maroon': '#800000',\n      'mediumaquamarine': '#66cdaa',\n      'mediumblue': '#0000cd',\n      'mediumseagreen': '#3cb371',\n      'mediumslateblue': '#7b68ee',\n      'mediumspringgreen': '#00fa9a',\n      'mediumturquoise': '#48d1cc',\n      'mediumvioletred': '#c71585',\n      'midnightblue': '#191970',\n      'mintcream': '#f5fffa',\n      'mistyrose': '#ffe4e1',\n      'moccasin': '#ffe4b5',\n      'navajowhite': '#ffdead',\n      'rebeccapurple': '#663399',\n      'red': '#ff0000',\n      'rosybrown': '#bc8f8f',\n      'royalblue': '#4169e1',\n      'olivedrab': '#6b8e23',\n      'orange': '#ffa500',\n      'orangered': '#ff4500',\n      'orchid': '#da70d6',\n      'palegoldenrod': '#eee8aa',\n      'palegreen': '#98fb98',\n      'paleturquoise': '#afeeee',\n      'palevioletred': '#d87093',\n      'papayawhip': '#ffefd5',\n      'peachpuff': '#ffdab9',\n      'peru': '#cd853f',\n      'wheat': '#f5deb3',\n      'white': '#ffffff',\n      'whitesmoke': '#f5f5f5',\n      'pink': '#ffc0cb',\n      'plum': '#dda0dd',\n      'steelblue': '#4682b4',\n      'violet': '#ee82ee',\n      'powderblue': '#b0e0e6',\n      'purple': '#800080',\n      'saddlebrown': '#8b4513',\n      'salmon': '#fa8072',\n      'sandybrown': '#f4a460',\n      'seagreen': '#2e8b57',\n      'seashell': '#fff5ee',\n      'sienna': '#a0522d',\n      'silver': '#c0c0c0',\n      'skyblue': '#87ceeb',\n      'slateblue': '#6a5acd',\n      'slategray': '#708090',\n      'snow': '#fffafa',\n      'springgreen': '#00ff7f',\n      'tan': '#d2b48c',\n      'teal': '#008080',\n      'thistle': '#d8bfd8',\n      'tomato': '#ff6347',\n      'turquoise': '#40e0d0'\n    };\n\n    if (typeof colours[colour.toLowerCase()] !== 'undefined') {\n      return colours[colour.toLowerCase()];\n    }\n\n    return '';\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.updateFreeTextFontStyle = function (font) {\n    // eslint-disable-next-line\n    var fontStyle = 0;\n\n    if (font.isBold === 1) {\n      fontStyle = 1;\n    } else if (font.isItalic === 2) {\n      fontStyle = 2;\n    } else if (font.isUnderline === 4) {\n      fontStyle = 4;\n    } else if (font.isStrikeout) {\n      fontStyle = 8;\n    } else {\n      fontStyle = {\n        isBold: font.isBold,\n        isItalic: font.isItalic,\n        isUnderline: font.isUnderline,\n        isStrikeout: font.isUnderline\n      };\n    }\n\n    return fontStyle;\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.setFreeTextFontStyle = function (fontStyle) {\n    if (fontStyle === 1) {\n      return {\n        isBold: true\n      };\n    } else if (fontStyle === 2) {\n      return {\n        isItalic: true\n      };\n    } else if (fontStyle === 4) {\n      return {\n        isUnderline: true\n      };\n    } else if (fontStyle === 8) {\n      return {\n        isStrikeout: true\n      };\n    } else {\n      return {\n        isBold: fontStyle.isBold,\n        isItalic: fontStyle.isItalic,\n        isUnderline: fontStyle.isUnderline,\n        isStrikeout: fontStyle.isUnderline\n      };\n    }\n  };\n  /**\n   * @param annotation\n   * @param isSettings\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.findAnnotationSettings = function (annotation, isSettings) {\n    // eslint-disable-next-line\n    var annotSettings = this.pdfViewer.annotationSettings;\n\n    if (annotation) {\n      // eslint-disable-next-line\n      var shapeType = annotation.shapeAnnotationType;\n\n      if (shapeType === 'StickyNotes' && this.pdfViewer.stickyNotesSettings) {\n        annotSettings = this.pdfViewer.stickyNotesSettings;\n      } else if (shapeType === 'Stamp' || shapeType === 'Image') {\n        annotSettings = this.pdfViewer.stampSettings; // eslint-disable-next-line max-len\n\n        if (shapeType === 'image' || shapeType === 'Image') {\n          annotSettings = this.pdfViewer.customStampSettings;\n        }\n      } else if (shapeType === 'FreeText') {\n        annotSettings = this.pdfViewer.freeTextSettings;\n      } else if (annotation.measureType === '') {\n        if (shapeType === 'Line') {\n          annotSettings = this.pdfViewer.lineSettings; // eslint-disable-next-line max-len\n        } else if (shapeType === 'Arrow' || shapeType === 'LineWidthArrowHead') {\n          annotSettings = this.pdfViewer.arrowSettings;\n        } else if (shapeType === 'Rectangle') {\n          annotSettings = this.pdfViewer.rectangleSettings; // eslint-disable-next-line max-len\n        } else if (shapeType === 'Circle' || shapeType === 'Ellipse') {\n          annotSettings = this.pdfViewer.circleSettings;\n        } else if (shapeType === 'Polygon' && this.pdfViewer.polygonSettings) {\n          annotSettings = this.pdfViewer.polygonSettings;\n        }\n      } else if (annotation.measureType !== '') {\n        if (annotation.measureType === 'Distance') {\n          annotSettings = this.pdfViewer.distanceSettings;\n        } else if (annotation.measureType === 'Perimeter') {\n          annotSettings = this.pdfViewer.perimeterSettings;\n        } else if (annotation.measureType === 'Area') {\n          annotSettings = this.pdfViewer.areaSettings;\n        } else if (annotation.measureType === 'Radius') {\n          annotSettings = this.pdfViewer.radiusSettings;\n        } else if (annotation.measureType === 'Volume') {\n          annotSettings = this.pdfViewer.volumeSettings;\n        }\n      }\n    }\n\n    var settings = annotation ? annotation.annotationSettings : {};\n\n    if (settings && (settings.minWidth || settings.maxWidth || settings.minHeight || settings.maxHeight)) {\n      return this.updateSettings(settings);\n    } else if (isSettings) {\n      return this.updateSettings(annotSettings);\n    } else {\n      return annotSettings;\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.updateAnnotationSettings = function (annotation) {\n    // eslint-disable-next-line\n    var annotSettings = this.pdfViewer.annotationSettings;\n\n    if (annotation.AnnotType === 'sticky') {\n      annotSettings = this.pdfViewer.stickyNotesSettings;\n    } else if (annotation.AnnotType === 'stamp' || annotation.AnnotType === 'image' || annotation.AnnotType === 'Image') {\n      annotSettings = this.pdfViewer.stampSettings; // eslint-disable-next-line max-len\n\n      if (annotation.Subject === 'image' || annotation.Subject === 'Image') {\n        annotSettings = this.pdfViewer.customStampSettings;\n      }\n    } else if (annotation.AnnotType === 'freeText') {\n      annotSettings = this.pdfViewer.freeTextSettings;\n    } else if (annotation.AnnotType === 'shape') {\n      if (annotation.Subject === 'Line') {\n        annotSettings = this.pdfViewer.lineSettings; // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Arrow' || annotation.Subject === 'LineWidthArrowHead') {\n        annotSettings = this.pdfViewer.arrowSettings; // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Rectangle' || annotation.Subject === 'Square') {\n        annotSettings = this.pdfViewer.rectangleSettings; // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Circle' || annotation.Subject === 'Ellipse' || annotation.Subject === 'Oval') {\n        annotSettings = this.pdfViewer.circleSettings;\n      } else if (annotation.Subject === 'Polygon') {\n        annotSettings = this.pdfViewer.polygonSettings;\n      }\n    } else if (annotation.AnnotType === 'shape_measure') {\n      // eslint-disable-next-line max-len\n      if (annotation.Subject === 'Distance' || annotation.Subject === 'Distance calculation') {\n        annotSettings = this.pdfViewer.distanceSettings; // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Perimeter' || annotation.Subject === 'Perimeter calculation') {\n        annotSettings = this.pdfViewer.perimeterSettings; // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Area' || annotation.Subject === 'Area calculation') {\n        annotSettings = this.pdfViewer.areaSettings; // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Radius' || annotation.Subject === 'Radius calculation') {\n        annotSettings = this.pdfViewer.radiusSettings; // eslint-disable-next-line max-len\n      } else if (annotation.Subject === 'Volume' || annotation.Subject === 'Volume calculation') {\n        annotSettings = this.pdfViewer.volumeSettings;\n      }\n    }\n\n    return this.updateSettings(annotSettings);\n  };\n  /**\n   * @param annotationSettings\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.updateSettings = function (annotationSettings) {\n    var maxHeight = 0;\n    var maxWidth = 0;\n    var minHeight = 0;\n    var minWidth = 0;\n    var isLock = false;\n    var isPrint = true; // eslint-disable-next-line\n\n    var settings = this.pdfViewer.annotationSettings;\n\n    if (annotationSettings.minWidth || annotationSettings.maxWidth || annotationSettings.minHeight || annotationSettings.maxHeight) {\n      maxHeight = annotationSettings.maxHeight ? annotationSettings.maxHeight : 2000;\n      maxWidth = annotationSettings.maxWidth ? annotationSettings.maxWidth : 2000;\n      minHeight = annotationSettings.minHeight ? annotationSettings.minHeight : 0;\n      minWidth = annotationSettings.minWidth ? annotationSettings.minWidth : 0;\n    } else if (settings.minWidth || settings.maxWidth || settings.minHeight || settings.maxHeight) {\n      maxHeight = settings.maxHeight ? settings.maxHeight : 2000;\n      maxWidth = settings.maxWidth ? settings.maxWidth : 2000;\n      minHeight = settings.minHeight ? settings.minHeight : 0;\n      minWidth = settings.minWidth ? settings.minWidth : 0;\n    }\n\n    isLock = annotationSettings.isLock ? annotationSettings.isLock : settings.isLock ? settings.isLock : false;\n    isPrint = annotationSettings.isPrint;\n    return {\n      minWidth: minWidth,\n      maxWidth: maxWidth,\n      minHeight: minHeight,\n      maxHeight: maxHeight,\n      isLock: isLock,\n      isPrint: isPrint\n    };\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.getOverlappedAnnotations = function (annotation, pageNumber) {\n    // eslint-disable-next-line\n    var pageCollections = this.getPageShapeAnnotations(pageNumber); // eslint-disable-next-line\n\n    var selectedAnnotation;\n\n    for (var i = 0; i < pageCollections.length; i++) {\n      if (annotation.annotName === pageCollections[i].annotName) {\n        selectedAnnotation = pageCollections[i];\n        break;\n      }\n    } // eslint-disable-next-line\n\n\n    var annotationCollection = this.findOverlappedAnnotations(selectedAnnotation, pageCollections);\n    return annotationCollection;\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.getPageShapeAnnotations = function (pageNumber) {\n    // eslint-disable-next-line\n    var pageCollections = []; // eslint-disable-next-line\n\n    var inkObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n\n    if (inkObject) {\n      var inkAnnotObject = JSON.parse(inkObject);\n\n      if (inkAnnotObject) {\n        var index = this.getPageCollection(inkAnnotObject, pageNumber);\n\n        if (inkAnnotObject[index]) {\n          // eslint-disable-next-line\n          var inkAnnotations = inkAnnotObject[index].annotations;\n\n          if (inkAnnotations && inkAnnotations.length > 0) {\n            for (var i = 0; i < inkAnnotations.length; i++) {\n              pageCollections.push(inkAnnotations[i]);\n            }\n          }\n        }\n      }\n    } // eslint-disable-next-line\n\n\n    var shapeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape');\n\n    if (shapeObject) {\n      var shapeAnnotObject = JSON.parse(shapeObject);\n\n      if (shapeAnnotObject) {\n        var index = this.getPageCollection(shapeAnnotObject, pageNumber);\n\n        if (shapeAnnotObject[index]) {\n          // eslint-disable-next-line\n          var shapeAnnotations = shapeAnnotObject[index].annotations;\n\n          if (shapeAnnotations && shapeAnnotations.length > 0) {\n            for (var i = 0; i < shapeAnnotations.length; i++) {\n              pageCollections.push(shapeAnnotations[i]);\n            }\n          }\n        }\n      }\n    } // eslint-disable-next-line\n\n\n    var measureObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape_measure');\n\n    if (measureObject) {\n      var measureAnnotationObject = JSON.parse(measureObject);\n\n      if (measureAnnotationObject) {\n        var index = this.getPageCollection(measureAnnotationObject, pageNumber);\n\n        if (measureAnnotationObject[index]) {\n          // eslint-disable-next-line\n          var measureAnnotations = measureAnnotationObject[index].annotations;\n\n          if (measureAnnotations && measureAnnotations.length > 0) {\n            for (var i = 0; i < measureAnnotations.length; i++) {\n              pageCollections.push(measureAnnotations[i]);\n            }\n          }\n        }\n      }\n    } // eslint-disable-next-line\n\n\n    var stampObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_stamp');\n\n    if (stampObject) {\n      var stampAnnotationObject = JSON.parse(stampObject);\n\n      if (stampAnnotationObject) {\n        var index = this.getPageCollection(stampAnnotationObject, pageNumber);\n\n        if (stampAnnotationObject[index]) {\n          // eslint-disable-next-line\n          var stampAnnotations = stampAnnotationObject[index].annotations;\n\n          if (stampAnnotations && stampAnnotations.length > 0) {\n            for (var i = 0; i < stampAnnotations.length; i++) {\n              pageCollections.push(stampAnnotations[i]);\n            }\n          }\n        }\n      }\n    } // eslint-disable-next-line\n\n\n    var freeTextObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_freetext');\n\n    if (freeTextObject) {\n      var freeTextAnnotationObject = JSON.parse(freeTextObject);\n\n      if (freeTextAnnotationObject) {\n        var index = this.getPageCollection(freeTextAnnotationObject, pageNumber);\n\n        if (freeTextAnnotationObject[index]) {\n          // eslint-disable-next-line\n          var freeTextAnnotations = freeTextAnnotationObject[index].annotations;\n\n          if (freeTextAnnotations && freeTextAnnotations.length > 0) {\n            for (var i = 0; i < freeTextAnnotations.length; i++) {\n              pageCollections.push(freeTextAnnotations[i]);\n            }\n          }\n        }\n      }\n    } // eslint-disable-next-line\n\n\n    var stickyObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n\n    if (stickyObject) {\n      var stickyNotesAnnotationObject = JSON.parse(stickyObject);\n\n      if (stickyNotesAnnotationObject) {\n        var index = this.getPageCollection(stickyNotesAnnotationObject, pageNumber);\n\n        if (stickyNotesAnnotationObject[index]) {\n          // eslint-disable-next-line\n          var stickyNotesAnnotations = stickyNotesAnnotationObject[index].annotations;\n\n          if (stickyNotesAnnotations && stickyNotesAnnotations.length > 0) {\n            for (var i = 0; i < stickyNotesAnnotations.length; i++) {\n              pageCollections.push(stickyNotesAnnotations[i]);\n            }\n          }\n        }\n      }\n    } // eslint-disable-next-line\n\n\n    var textMarkupObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n\n    if (textMarkupObject) {\n      var textMarkupAnnotationObject = JSON.parse(textMarkupObject);\n\n      if (textMarkupAnnotationObject) {\n        var index = this.getPageCollection(textMarkupAnnotationObject, pageNumber);\n\n        if (textMarkupAnnotationObject[index]) {\n          // eslint-disable-next-line\n          var textMarkupAnnotations = textMarkupAnnotationObject[index].annotations;\n\n          if (textMarkupAnnotations && textMarkupAnnotations.length > 0) {\n            for (var i = 0; i < textMarkupAnnotations.length; i++) {\n              pageCollections.push(textMarkupAnnotations[i]);\n            }\n          }\n        }\n      }\n    }\n\n    return pageCollections;\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.findOverlappedAnnotations = function (annotation, pageCollections) {\n    this.overlappedAnnotations = [];\n\n    if (annotation && annotation.bounds) {\n      if (annotation.shapeAnnotationType === 'textMarkup') {\n        for (var i = 0; i < annotation.bounds.length; i++) {\n          // eslint-disable-next-line\n          var bounds = this.orderTextMarkupBounds(annotation.bounds[i]);\n          this.calculateOverlappedAnnotationBounds(annotation, bounds, pageCollections);\n        }\n      } else {\n        this.calculateOverlappedAnnotationBounds(annotation, annotation.bounds, pageCollections);\n      }\n    }\n\n    return this.overlappedAnnotations;\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.calculateOverlappedAnnotationBounds = function (annotation, bounds, pageCollections) {\n    // eslint-disable-next-line\n    var selectBounds = bounds;\n\n    if (annotation.shapeAnnotationType === 'Ink') {\n      selectBounds = {\n        left: bounds.x,\n        top: bounds.y,\n        height: bounds.height,\n        width: bounds.width\n      };\n    } // eslint-disable-next-line\n\n\n    var left = parseInt(selectBounds.left); // eslint-disable-next-line\n\n    var top = parseInt(selectBounds.top); // eslint-disable-next-line\n\n    var totalHeight = parseInt(selectBounds.top + selectBounds.height); // eslint-disable-next-line\n\n    var totalWidth = parseInt(selectBounds.left + selectBounds.width);\n\n    for (var i = 0; i < pageCollections.length; i++) {\n      if (annotation.annotName === pageCollections[i].annotName) {\n        this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n      } else {\n        var boundsCount = 1;\n\n        if (pageCollections[i].shapeAnnotationType === 'textMarkup') {\n          boundsCount = pageCollections[i].bounds.length;\n        }\n\n        for (var j = 0; j < boundsCount; j++) {\n          // eslint-disable-next-line\n          var annotationBounds = void 0; // eslint-disable-next-line\n\n          var annotationBoundsCollection = pageCollections[i].bounds;\n\n          if (pageCollections[i].shapeAnnotationType === 'Ink') {\n            // eslint-disable-next-line\n            annotationBoundsCollection = {\n              left: annotationBoundsCollection.x,\n              top: annotationBoundsCollection.y,\n              height: annotationBoundsCollection.height,\n              width: annotationBoundsCollection.width\n            };\n          }\n\n          if (pageCollections[i].shapeAnnotationType !== 'textMarkup' && boundsCount === 1) {\n            annotationBounds = annotationBoundsCollection;\n          } else {\n            // eslint-disable-next-line\n            annotationBounds = this.orderTextMarkupBounds(annotationBoundsCollection[j]);\n          }\n\n          if (annotationBounds) {\n            var isOverlapped = false; // eslint-disable-next-line\n\n            if (left <= parseInt(annotationBounds.left) && totalWidth >= parseInt(annotationBounds.left) || left <= parseInt(annotationBounds.left + annotationBounds.width) && totalWidth >= parseInt(annotationBounds.left + annotationBounds.width)) {\n              isOverlapped = true;\n            }\n\n            if (isOverlapped) {\n              // eslint-disable-next-line\n              if (top <= parseInt(annotationBounds.top) && totalHeight >= parseInt(annotationBounds.top) || top <= parseInt(annotationBounds.top + annotationBounds.height) && totalHeight >= parseInt(annotationBounds.top + annotationBounds.height)) {\n                isOverlapped = true;\n              } else {\n                isOverlapped = false;\n              }\n            }\n\n            if (isOverlapped) {\n              this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n            } else {\n              // eslint-disable-next-line\n              if (parseInt(annotationBounds.left) <= left && parseInt(annotationBounds.left + annotationBounds.width) >= left || totalWidth >= parseInt(annotationBounds.left) && totalWidth <= parseInt(annotationBounds.left + annotationBounds.width)) {\n                isOverlapped = true;\n              }\n\n              if (isOverlapped) {\n                // eslint-disable-next-line\n                if (parseInt(annotationBounds.top) <= top && parseInt(annotationBounds.top + annotationBounds.height) >= top || totalHeight >= parseInt(annotationBounds.top) && totalHeight <= parseInt(annotationBounds.top + annotationBounds.height)) {\n                  isOverlapped = true;\n                } else {\n                  isOverlapped = false;\n                }\n              }\n\n              if (isOverlapped) {\n                this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n              } else {\n                // eslint-disable-next-line\n                if (left <= parseInt(annotationBounds.left) && totalWidth >= parseInt(annotationBounds.left) || left <= parseInt(annotationBounds.left + annotationBounds.width) && totalWidth >= parseInt(annotationBounds.left + annotationBounds.width)) {\n                  isOverlapped = true;\n                }\n\n                if (isOverlapped) {\n                  // eslint-disable-next-line\n                  if (parseInt(annotationBounds.top) <= top && parseInt(annotationBounds.top + annotationBounds.height) >= top || totalHeight >= parseInt(annotationBounds.top) && totalHeight <= parseInt(annotationBounds.top + annotationBounds.height)) {\n                    isOverlapped = true;\n                  } else {\n                    isOverlapped = false;\n                  }\n                }\n\n                if (isOverlapped) {\n                  this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                } else {\n                  // eslint-disable-next-line\n                  if (parseInt(annotationBounds.left) <= left && parseInt(annotationBounds.left + annotationBounds.width) >= left || totalWidth >= parseInt(annotationBounds.left) && totalWidth <= parseInt(annotationBounds.left + annotationBounds.width)) {\n                    isOverlapped = true;\n                  }\n\n                  if (isOverlapped) {\n                    // eslint-disable-next-line\n                    if (top <= parseInt(annotationBounds.top) && totalHeight >= parseInt(annotationBounds.top) || top <= parseInt(annotationBounds.top + annotationBounds.height) && totalHeight >= parseInt(annotationBounds.top + annotationBounds.height)) {\n                      isOverlapped = true;\n                    } else {\n                      isOverlapped = false;\n                    }\n                  }\n\n                  if (isOverlapped) {\n                    this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param annotation\n   * @param pageNumber\n   * @param type\n   * @param annotation\n   * @param pageNumber\n   * @param type\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.findAnnotationMode = function (annotation, pageNumber, type) {\n    // eslint-disable-next-line\n    var importCollection = this.pdfViewer.viewerBase.importedAnnotation[pageNumber];\n\n    if (importCollection) {\n      // eslint-disable-next-line\n      var collection = void 0;\n\n      if (type === 'shape') {\n        collection = importCollection.shapeAnnotation;\n      } else if (type === 'shape_measure') {\n        collection = importCollection.measureShapeAnnotation;\n      } else if (type === 'freeText') {\n        collection = importCollection.freeTextAnnotation;\n      } else if (type === 'stamp') {\n        collection = importCollection.stampAnnotations;\n      } else if (type === 'sticky') {\n        collection = importCollection.stickyNotesAnnotation;\n      } else if (type === 'textMarkup') {\n        collection = importCollection.textMarkupAnnotation;\n      }\n\n      if (collection) {\n        for (var i = 0; i < collection.length; i++) {\n          if (collection[i].AnnotName === annotation.AnnotName) {\n            return 'Imported Annotation';\n          }\n        }\n      }\n    }\n\n    return 'Existing Annotation';\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.checkOverlappedCollections = function (annotation, overlappedCollections) {\n    if (overlappedCollections.length > 0) {\n      var isAdded = false;\n\n      for (var i = 0; i < overlappedCollections.length; i++) {\n        if (annotation.annotName === overlappedCollections[i].annotName && annotation.bounds === overlappedCollections[i].bounds) {\n          isAdded = true;\n          break;\n        }\n      }\n\n      if (!isAdded) {\n        overlappedCollections.push(annotation);\n      }\n    } else {\n      overlappedCollections.push(annotation);\n    }\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.orderTextMarkupBounds = function (bounds) {\n    if (bounds.Left || bounds.Width) {\n      return {\n        left: bounds.Left,\n        top: bounds.Top,\n        height: bounds.Height,\n        width: bounds.Width\n      };\n    } else {\n      return {\n        left: bounds.left,\n        top: bounds.top,\n        height: bounds.height,\n        width: bounds.width\n      };\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.updateModifiedDate = function (annotation) {\n    if (annotation.modifiedDate) {\n      annotation.modifiedDate = this.setAnnotationModifiedDate(annotation.modifiedDate);\n    }\n\n    if (annotation.comments && annotation.comments.length > 0) {\n      for (var i = 0; i < annotation.comments.length; i++) {\n        if (annotation.comments[i].modifiedDate) {\n          annotation.comments[i].modifiedDate = this.setAnnotationModifiedDate(annotation.comments[i].modifiedDate);\n\n          if (annotation.comments[i].review && annotation.comments[i].review.modifiedDate) {\n            // eslint-disable-next-line max-len\n            annotation.comments[i].review.modifiedDate = this.setAnnotationModifiedDate(annotation.comments[i].review.modifiedDate);\n          }\n        }\n      }\n    }\n\n    if (annotation.review && annotation.review.modifiedDate) {\n      annotation.review.modifiedDate = this.setAnnotationModifiedDate(annotation.review.modifiedDate);\n    }\n  };\n\n  Annotation.prototype.setAnnotationModifiedDate = function (date) {\n    var modifiedTime;\n    var modifiedDateTime;\n\n    if (date !== '') {\n      // eslint-disable-next-line\n      var time = parseInt(date.split(' ')[1].split(':')[0]);\n\n      if (date.split(' ').length === 3) {\n        // eslint-disable-next-line max-len\n        modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' ' + date.split(' ')[2];\n      } else {\n        if (time >= 12) {\n          if (time === 12) {\n            modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' PM';\n          } else {\n            // eslint-disable-next-line max-len\n            modifiedTime = time - 12 + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' PM';\n          }\n        } else {\n          modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' AM';\n        }\n      } // eslint-disable-next-line\n\n\n      var dateString = date.split(' ')[0]; // eslint-disable-next-line\n\n      var dateStringSpilt = date.split(',');\n\n      if (dateStringSpilt.length > 1) {\n        modifiedDateTime = dateString + ' ' + modifiedTime;\n      } else {\n        modifiedDateTime = dateString + ', ' + modifiedTime;\n      }\n    } else {\n      return date;\n    }\n\n    return modifiedDateTime;\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.clear = function () {\n    if (this.shapeAnnotationModule) {\n      this.shapeAnnotationModule.shapeCount = 0;\n    }\n\n    if (this.measureAnnotationModule) {\n      this.measureAnnotationModule.measureShapeCount = 0;\n    }\n\n    if (this.textMarkupAnnotationModule) {\n      this.textMarkupAnnotationModule.clear();\n    }\n\n    if (this.stickyNotesAnnotationModule) {\n      this.stickyNotesAnnotationModule.clear();\n    }\n\n    this.pdfViewer.refresh();\n    this.undoCommentsElement = [];\n    this.redoCommentsElement = [];\n    this.overlappedAnnotations = [];\n    this.previousIndex = null; // eslint-disable-next-line max-len\n\n    if (this.pdfViewer.annotation && this.pdfViewer.annotation.stampAnnotationModule) {\n      this.pdfViewer.annotation.stampAnnotationModule.stampPageNumber = [];\n    }\n\n    if (this.pdfViewer.annotation && this.pdfViewer.annotation.freeTextAnnotationModule) {\n      this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers = [];\n      this.freeTextAnnotationModule.previousText = 'Type Here';\n    }\n\n    if (this.pdfViewer.annotation && this.pdfViewer.annotation.inkAnnotationModule) {\n      this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex = [];\n    }\n\n    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_shape');\n    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_shape_measure');\n    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_stamp');\n    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.retrieveAnnotationCollection = function () {\n    return this.pdfViewer.annotationCollection;\n  };\n  /**\n   * @param interaction\n   * @param annotation\n   * @param interaction\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.checkAllowedInteractions = function (interaction, annotation) {\n    // eslint-disable-next-line\n    var annotationInteraction = this.updateAnnotationAllowedInteractions(annotation);\n\n    if (annotationInteraction && annotationInteraction.length > 0) {\n      for (var i = 0; i < annotationInteraction.length; i++) {\n        if (interaction === 'Select') {\n          // eslint-disable-next-line max-len\n          if (annotationInteraction[i] === 'Move' || annotationInteraction[i] === 'Resize' || annotationInteraction[i] === 'Delete' || annotationInteraction[i] === 'PropertyChange' || annotationInteraction[i] === 'Select') {\n            return true;\n          }\n        } else {\n          if (annotationInteraction[i] === interaction) {\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  };\n  /**\n   * @param menuObj\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.checkContextMenuDeleteItem = function (menuObj) {\n    // eslint-disable-next-line\n    var annotation = this.findCurrentAnnotation();\n\n    if (annotation && annotation.annotationSettings) {\n      // eslint-disable-next-line\n      if (annotation.annotationSettings.isLock) {\n        if (this.checkAllowedInteractions('Delete', annotation)) {\n          menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n        } else {\n          menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], false);\n        }\n      } else {\n        menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.isEnableDelete = function () {\n    // eslint-disable-next-line\n    var annotation = this.findCurrentAnnotation();\n\n    if (annotation && annotation.annotationSettings) {\n      // eslint-disable-next-line\n      if (annotation.annotationSettings.isLock) {\n        if (this.checkAllowedInteractions('Delete', annotation)) {\n          return true;\n        } else {\n          return false;\n        }\n      } else {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.findCurrentAnnotation = function () {\n    if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n      return this.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n    }\n\n    if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations[0]) {\n      return this.pdfViewer.selectedItems.annotations[0];\n    }\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.updateAnnotationAllowedInteractions = function (annotation) {\n    // eslint-disable-next-line\n    var annotationInteraction = ['None'];\n\n    if (annotation) {\n      if (annotation.shapeAnnotationType === 'FreeText' && this.pdfViewer.freeTextSettings.allowedInteractions) {\n        // eslint-disable-next-line max-len\n        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions, annotation.allowedInteractions);\n      } else if (annotation.shapeAnnotationType === 'Ink' && this.pdfViewer.inkAnnotationSettings.allowedInteractions) {\n        // eslint-disable-next-line max-len\n        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions, annotation.allowedInteractions);\n      } else if (annotation.shapeAnnotationType === 'StickyNotes' && this.pdfViewer.stickyNotesSettings.allowedInteractions) {\n        // eslint-disable-next-line max-len\n        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions, annotation.allowedInteractions);\n      } else if (annotation.shapeAnnotationType === 'Stamp' && this.pdfViewer.stampSettings.allowedInteractions) {\n        // eslint-disable-next-line max-len\n        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions, annotation.allowedInteractions);\n      } else if (annotation.shapeAnnotationType === 'Image' && this.pdfViewer.customStampSettings.allowedInteractions) {\n        // eslint-disable-next-line max-len\n        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions, annotation.allowedInteractions);\n      } else if (annotation.shapeAnnotationType === 'textMarkup') {\n        if (annotation.textMarkupAnnotationType === 'Highlight' && this.pdfViewer.highlightSettings.allowedInteractions) {\n          // eslint-disable-next-line max-len\n          annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions, annotation.allowedInteractions);\n        } else if (annotation.textMarkupAnnotationType === 'Underline' && this.pdfViewer.underlineSettings.allowedInteractions) {\n          // eslint-disable-next-line max-len\n          annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions, annotation.allowedInteractions);\n        } else if (annotation.textMarkupAnnotationType === 'Strikethrough' && this.pdfViewer.strikethroughSettings.allowedInteractions) {\n          // eslint-disable-next-line max-len\n          annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions, annotation.allowedInteractions);\n        }\n      } else {\n        if (annotation.measureType !== '') {\n          if (annotation.measureType === 'Distance' && this.pdfViewer.distanceSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if (annotation.measureType === 'Perimeter' && this.pdfViewer.perimeterSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if (annotation.measureType === 'Radius' && this.pdfViewer.radiusSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if (annotation.measureType === 'Area' && this.pdfViewer.areaSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if (annotation.measureType === 'Volume' && this.pdfViewer.volumeSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions, annotation.allowedInteractions);\n          }\n        } else {\n          if (annotation.shapeAnnotationType === 'Line' && this.pdfViewer.lineSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions, annotation.allowedInteractions); // eslint-disable-next-line max-len\n          } else if ((annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead') && this.pdfViewer.arrowSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions, annotation.allowedInteractions); // eslint-disable-next-line max-len\n          } else if ((annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse' || annotation.shapeAnnotationType === 'Oval') && this.pdfViewer.circleSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if ((annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square') && this.pdfViewer.rectangleSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions, annotation.allowedInteractions);\n          } else if (annotation.shapeAnnotationType === 'Polygon' && this.pdfViewer.polygonSettings.allowedInteractions) {\n            // eslint-disable-next-line max-len\n            annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions, annotation.allowedInteractions);\n          }\n        }\n      }\n    }\n\n    return annotationInteraction;\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.checkIsLockSettings = function (annotation) {\n    // eslint-disable-next-line\n    var isLocked = false;\n\n    if (annotation) {\n      if (annotation.shapeAnnotationType === 'FreeText') {\n        isLocked = this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock);\n      } else if (annotation.shapeAnnotationType === 'Ink') {\n        // eslint-disable-next-line max-len\n        isLocked = this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock);\n      } else if (annotation.shapeAnnotationType === 'StickyNotes') {\n        isLocked = this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock);\n      } else if (annotation.shapeAnnotationType === 'Stamp') {\n        isLocked = this.checkLockSettings(this.pdfViewer.stampSettings.isLock);\n      } else if (annotation.shapeAnnotationType === 'Image') {\n        isLocked = this.checkLockSettings(this.pdfViewer.customStampSettings.isLock);\n      } else if (annotation.shapeAnnotationType === 'textMarkup') {\n        if (annotation.textMarkupAnnotationType === 'Highlight') {\n          // eslint-disable-next-line max-len\n          isLocked = this.checkLockSettings(this.pdfViewer.highlightSettings.isLock);\n        } else if (annotation.textMarkupAnnotationType === 'Underline') {\n          // eslint-disable-next-line max-len\n          isLocked = this.checkLockSettings(this.pdfViewer.underlineSettings.isLock);\n        } else if (annotation.textMarkupAnnotationType === 'Strikethrough') {\n          // eslint-disable-next-line max-len\n          isLocked = this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock);\n        }\n      } else {\n        if (annotation.measureType !== '') {\n          if (annotation.measureType === 'Distance') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.distanceSettings.isLock);\n          } else if (annotation.measureType === 'Perimeter') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock);\n          } else if (annotation.measureType === 'Radius') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.radiusSettings.isLock);\n          } else if (annotation.measureType === 'Area') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.areaSettings.isLock);\n          } else if (annotation.measureType === 'Volume') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.volumeSettings.isLock);\n          }\n        } else {\n          if (annotation.shapeAnnotationType === 'Line') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.lineSettings.isLock); // eslint-disable-next-line max-len\n          } else if (annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.arrowSettings.isLock); // eslint-disable-next-line max-len\n          } else if (annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse' || annotation.shapeAnnotationType === 'Oval') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.circleSettings.isLock);\n          } else if (annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock);\n          } else if (annotation.shapeAnnotationType === 'Polygon') {\n            // eslint-disable-next-line max-len\n            isLocked = this.checkLockSettings(this.pdfViewer.polygonSettings.isLock);\n          }\n        }\n      }\n    }\n\n    return isLocked;\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.checkLockSettings = function (locked) {\n    var islock = false;\n\n    if (locked || this.pdfViewer.annotationSettings.isLock) {\n      islock = true;\n    }\n\n    return islock;\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.restrictContextMenu = function () {\n    // eslint-disable-next-line\n    var isRestrict = false; // eslint-disable-next-line\n\n    var annotation = this.findCurrentAnnotation();\n\n    if (annotation && this.checkIsLockSettings(annotation) && this.checkAllowedInteractions('Select', annotation)) {\n      isRestrict = true;\n    }\n\n    return isRestrict;\n  }; // eslint-disable-next-line\n\n\n  Annotation.prototype.checkAllowedInteractionSettings = function (annotationInteraction, annotationAllowedInteraction) {\n    if (annotationAllowedInteraction) {\n      if (annotationAllowedInteraction.length === 1) {\n        if (annotationAllowedInteraction[0] !== 'None') {\n          return annotationAllowedInteraction;\n        }\n      } else {\n        return annotationAllowedInteraction;\n      }\n    }\n\n    if (annotationInteraction) {\n      if (annotationInteraction.length === 1) {\n        if (annotationInteraction[0] !== 'None') {\n          return annotationInteraction;\n        }\n      } else {\n        return annotationInteraction;\n      }\n    }\n\n    if (this.pdfViewer.annotationSettings.allowedInteractions) {\n      return this.pdfViewer.annotationSettings.allowedInteractions;\n    }\n\n    return ['None'];\n  };\n  /**\n   * @param value\n   * @param type\n   * @param value\n   * @param type\n   * @private\n   */\n\n\n  Annotation.prototype.getValue = function (value, type) {\n    type = !type ? 'hex' : type.toLowerCase();\n\n    if (value[0] === 'r') {\n      var cValue = this.convertRgbToNumberArray(value);\n\n      if (type === 'hex' || type === 'hexa') {\n        var hex = this.rgbToHex(cValue);\n        return type === 'hex' ? hex.slice(0, 7) : hex;\n      } else {\n        if (type === 'hsv') {\n          return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n        } else {\n          if (type === 'hsva') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n          } else {\n            return 'null';\n          }\n        }\n      }\n    } else {\n      if (value[0] === 'h') {\n        var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n\n        if (type === 'rgba') {\n          return this.convertToRgbString(cValue);\n        } else {\n          if (type === 'hex' || type === 'hexa') {\n            var hex = this.rgbToHex(cValue);\n            return type === 'hex' ? hex.slice(0, 7) : hex;\n          } else {\n            if (type === 'rgb') {\n              return this.convertToRgbString(cValue.slice(0, 3));\n            } else {\n              return 'null';\n            }\n          }\n        }\n      } else {\n        value = this.roundValue(value);\n        var rgb = this.hexToRgb(value);\n\n        if (type === 'rgb' || type === 'hsv') {\n          rgb = rgb.slice(0, 3);\n        }\n\n        if (type === 'rgba' || type === 'rgb') {\n          return this.convertToRgbString(rgb);\n        } else {\n          if (type === 'hsva' || type === 'hsv') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n          } else {\n            if (type === 'hex') {\n              return value.slice(0, 7);\n            } else {\n              if (type === 'a') {\n                return rgb[3].toString();\n              } else {\n                return 'null';\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n\n  Annotation.prototype.convertRgbToNumberArray = function (value) {\n    // eslint-disable-next-line max-len\n    return value.slice(value.indexOf('(') + 1, value.indexOf(')')).split(',').map(function (n, i) {\n      return i !== 3 ? parseInt(n, 10) : parseFloat(n);\n    });\n  };\n\n  Annotation.prototype.convertToRgbString = function (rgb) {\n    return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n  };\n\n  Annotation.prototype.convertToHsvString = function (hsv) {\n    return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n  };\n\n  Annotation.prototype.roundValue = function (value) {\n    if (!value) {\n      return '';\n    }\n\n    if (value[0] !== '#') {\n      value = '#' + value;\n    }\n\n    var len = value.length;\n\n    if (len === 4) {\n      value += 'f';\n      len = 5;\n    }\n\n    if (len === 5) {\n      var tempValue = '';\n\n      for (var i = 1, len_1 = value.length; i < len_1; i++) {\n        tempValue += value.charAt(i) + value.charAt(i);\n      }\n\n      value = '#' + tempValue;\n      len = 9;\n    }\n\n    if (len === 7) {\n      value += 'ff';\n    }\n\n    return value;\n  };\n\n  Annotation.prototype.hexToRgb = function (hex) {\n    if (!hex) {\n      return [];\n    }\n\n    hex = hex.trim();\n\n    if (hex.length !== 9) {\n      hex = this.roundValue(hex);\n    }\n\n    var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n    hex = hex.slice(1, 7);\n    var bigInt = parseInt(hex, 16);\n    var h = [];\n    h.push(bigInt >> 16 & 255);\n    h.push(bigInt >> 8 & 255);\n    h.push(bigInt & 255);\n    h.push(opacity);\n    return h;\n  };\n\n  Annotation.prototype.rgbToHsv = function (r, g, b, opacity) {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h;\n    var s;\n    var v = max;\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if (max === min) {\n      h = 0;\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          h = (b - r) / d + 2;\n          break;\n\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n\n      h /= 6;\n    }\n\n    var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n\n    if (!isNullOrUndefined(opacity)) {\n      hsv.push(opacity);\n    }\n\n    return hsv;\n  };\n\n  Annotation.prototype.hsvToRgb = function (h, s, v, opacity) {\n    var r;\n    var g;\n    var b;\n    var i;\n    var f;\n    var p;\n    var q;\n    var t;\n    s /= 100;\n    v /= 100;\n\n    if (s === 0) {\n      r = g = b = v;\n      return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n    }\n\n    h /= 60;\n    i = Math.floor(h);\n    f = h - i;\n    p = v * (1 - s);\n    q = v * (1 - s * f);\n    t = v * (1 - s * (1 - f));\n\n    switch (i) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n\n      default:\n        r = v;\n        g = p;\n        b = q;\n    }\n\n    var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n\n    if (!isNullOrUndefined(opacity)) {\n      rgb.push(opacity);\n    }\n\n    return rgb;\n  };\n\n  Annotation.prototype.rgbToHex = function (rgb) {\n    // eslint-disable-next-line max-len\n    return rgb.length ? '#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) + (!isNullOrUndefined(rgb[3]) ? rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00' : '') : '';\n  };\n  /**\n   * @param dataFormat\n   * @private\n   */\n\n\n  Annotation.prototype.exportAnnotationsAsStream = function (dataFormat) {\n    var _this = this;\n\n    if (this.pdfViewer.annotationModule) {\n      var isAnnotations = this.pdfViewer.viewerBase.updateExportItem();\n\n      if (isAnnotations) {\n        return new Promise(function (resolve, reject) {\n          _this.pdfViewer.viewerBase.createRequestForExportAnnotations(true, dataFormat, true).then(function (value) {\n            resolve(value);\n          });\n        });\n      }\n    }\n\n    return null;\n  };\n\n  Annotation.prototype.hex = function (x) {\n    if (!isNullOrUndefined(x)) {\n      return ('0' + x.toString(16)).slice(-2);\n    } else {\n      return '0';\n    }\n  };\n  /**\n   * @param obj\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  Annotation.prototype.cloneObject = function (obj) {\n    return JSON.parse(JSON.stringify(obj));\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.destroy = function () {\n    this.destroyPropertiesWindow();\n    this.textMarkupAnnotationModule.clear();\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.getModuleName = function () {\n    return 'Annotation';\n  };\n  /**\n   * Get vertex points properties\n   * @private\n   */\n\n\n  Annotation.prototype.getVertexPointsXY = function (points) {\n    var vertexPoints = []; //Converting points model into vertex property\n\n    for (var j = 0; j < points.length; j++) {\n      vertexPoints[j] = {\n        X: points[j].x,\n        Y: points[j].y\n      };\n    }\n\n    return vertexPoints;\n  };\n  /**\n   * Method used to add annotations using program.\n   *\n   * @param annotationType - It describes type of annotation object.\n   * @param options -  It describes about the annotation objects and it's property.\n   * @param dynamicStampItem - It describe which type of dynamic stamp.\n   * @param signStampItem - It describe which type of sign stamp.\n   * @param standardBusinessStampItem - It describe which type of standard business stamp.\n   * @returns void\n   */\n\n\n  Annotation.prototype.addAnnotation = function (annotationType, options, dynamicStampItem, signStampItem, standardBusinessStampItem) {\n    //Initialize the bounds and pageNumber\n    var offset = {\n      x: 1,\n      y: 1\n    };\n    var pageNumber = 0;\n\n    if (options) {\n      if (options.pageNumber && options.pageNumber > 0) pageNumber = options.pageNumber ? options.pageNumber - 1 : 0;\n    } //Initialize the pdf annotation object array\n\n\n    var annotationObject = null;\n    var pdfAnnotation = [];\n    this.pdfViewer.annotation.triggerAnnotationUnselectEvent(); //Seperate the annotation type with it's method\n\n    if (annotationType == 'FreeText') {\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(options, offset);\n      this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType == 'StickyNotes') {\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(options, offset);\n      this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType == 'Highlight' || annotationType == 'Underline' || annotationType == 'Strikethrough') {\n      if (annotationType == 'Highlight') annotationObject = options;else if (annotationType == 'Underline') annotationObject = options;else if (annotationType == 'Strikethrough') annotationObject = options;\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject);\n      this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType === 'Line' || annotationType === 'Arrow' || annotationType === 'Rectangle' || annotationType === 'Circle' || annotationType === 'Polygon') {\n      if (annotationType == 'Line') annotationObject = options;else if (annotationType == 'Arrow') annotationObject = options;else if (annotationType == 'Rectangle') annotationObject = options;else if (annotationType == 'Circle') annotationObject = options;else if (annotationType == 'Polygon') annotationObject = options;\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject, offset);\n      this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType === 'Distance' || annotationType === 'Perimeter' || annotationType === 'Area' || annotationType === 'Radius' || annotationType === 'Volume') {\n      if (annotationType == 'Distance') annotationObject = options;else if (annotationType == 'Perimeter') annotationObject = options;else if (annotationType == 'Area') annotationObject = options;else if (annotationType == 'Radius') annotationObject = options;else if (annotationType == 'Volume') annotationObject = options;\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject, offset);\n      this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType === 'Stamp') {\n      if (options && options.customStamps) {\n        pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber, dynamicStampItem, signStampItem, standardBusinessStampItem);\n      } else {\n        pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber, dynamicStampItem, signStampItem, standardBusinessStampItem);\n      }\n\n      this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically = true;\n    } else if (annotationType === 'Ink') {\n      pdfAnnotation[pageNumber] = this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber);\n      this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically = true;\n    } //Annotation rendering can be done with the import annotation method.\n\n\n    var pdf = {\n      pdfAnnotation: pdfAnnotation\n    };\n    this.pdfViewerBase.isAddAnnotation = true;\n    this.pdfViewerBase.importAnnotations(pdf);\n    this.pdfViewerBase.isAddAnnotation = false;\n  };\n  /**\n   * @param annotation\n   * @private\n   */\n\n\n  Annotation.prototype.triggerAnnotationAddEvent = function (annotation) {\n    var annotationType = annotation.shapeAnnotationType;\n\n    if (annotationType === 'Stamp' || annotationType === 'Image' || annotationType === 'Path' || annotationType === 'FreeText' || annotationType === 'StickyNotes' || annotationType === 'Ink') {\n      var settings = void 0;\n\n      if (annotationType === 'FreeText') {\n        settings = {\n          opacity: annotation.opacity,\n          borderColor: annotation.strokeColor,\n          borderWidth: annotation.thickness,\n          author: annotation.author,\n          subject: annotation.subject,\n          modifiedDate: annotation.modifiedDate,\n          fillColor: annotation.fillColor,\n          fontSize: annotation.fontSize,\n          width: annotation.bounds.width,\n          height: annotation.bounds.height,\n          fontColor: annotation.fontColor,\n          fontFamily: annotation.fontFamily,\n          defaultText: annotation.dynamicText,\n          fontStyle: annotation.font,\n          textAlignment: annotation.textAlign\n        };\n      } else {\n        settings = {\n          opacity: annotation.opacity,\n          fillColor: annotation.fillColor,\n          strokeColor: annotation.strokeColor,\n          thickness: annotation.thickness,\n          author: annotation.author,\n          subject: annotation.subject,\n          modifiedDate: annotation.modifiedDate,\n          data: annotation.data\n        };\n      } // eslint-disable-next-line\n\n\n      var bounds = {\n        left: annotation.bounds.x,\n        top: annotation.bounds.y,\n        width: annotation.bounds.width,\n        height: annotation.bounds.height\n      };\n      var type = this.getAnnotationType(annotation.shapeAnnotationType, annotation.measureType); // eslint-disable-next-line max-len\n\n      this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, settings);\n    } else if (annotationType === 'SignatureText' || annotationType === 'SignatureImage' || annotationType === 'HandWrittenSignature') {\n      // eslint-disable-next-line\n      var bounds = {\n        left: annotation.bounds.x,\n        top: annotation.bounds.y,\n        width: annotation.bounds.width,\n        height: annotation.bounds.height\n      }; // eslint-disable-next-line max-len\n\n      this.pdfViewer.fireSignatureAdd(annotation.pageIndex, annotation.signatureName, annotation.shapeAnnotationType, bounds, annotation.opacity, annotation.strokeColor, annotation.thickness, annotation.data);\n    } else {\n      // eslint-disable-next-line\n      var setting = {\n        opacity: annotation.opacity,\n        fillColor: annotation.fillColor,\n        strokeColor: annotation.strokeColor,\n        thickness: annotation.thickness,\n        author: annotation.author,\n        subject: annotation.subject,\n        modifiedDate: annotation.modifiedDate\n      };\n      var bounds = {\n        left: annotation.bounds.x,\n        top: annotation.bounds.y,\n        width: annotation.bounds.width,\n        height: annotation.bounds.height\n      };\n      var type = this.getAnnotationType(annotation.shapeAnnotationType, annotation.measureType);\n\n      if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n        setting.lineHeadStartStyle = this.getArrowString(annotation.sourceDecoraterShapes);\n        setting.lineHeadEndStyle = this.getArrowString(annotation.taregetDecoraterShapes);\n        setting.borderDashArray = annotation.borderDashArray;\n      }\n\n      var labelSettings = void 0;\n\n      if (this.pdfViewer.enableShapeLabel) {\n        labelSettings = {\n          // eslint-disable-next-line max-len\n          fontColor: annotation.fontColor,\n          fontSize: annotation.fontSize,\n          fontFamily: annotation.fontFamily,\n          opacity: annotation.labelOpacity,\n          labelContent: annotation.labelContent,\n          fillColor: annotation.labelFillColor\n        }; // eslint-disable-next-line max-len\n\n        this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, setting, null, null, null, labelSettings);\n      } else {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, setting);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Annotation.prototype.triggerAnnotationUnselectEvent = function () {\n    if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations[0]) {\n      var annotation = this.pdfViewer.selectedItems.annotations[0];\n\n      if (annotation.shapeAnnotationType !== 'HandWrittenSignature' && annotation.shapeAnnotationType !== 'SignatureText' && annotation.shapeAnnotationType !== 'SignatureImage' && annotation.shapeAnnotationType !== 'Path') {\n        this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n        this.pdfViewer.clearSelection(annotation.pageIndex);\n      }\n    }\n  };\n  /**\n   * @private\n  */\n\n\n  Annotation.prototype.updateFontFamilyRenderSize = function (currentAnnotation, currentValue) {\n    var freeTextAnnotation = this.freeTextAnnotationModule;\n    freeTextAnnotation.inputBoxElement.style.fontFamily = currentValue;\n    freeTextAnnotation.autoFitFreeText();\n    var zoomFactor = this.pdfViewerBase.getZoomFactor();\n    var padding = parseFloat(freeTextAnnotation.inputBoxElement.style.paddingLeft);\n    var inputEleHeight = currentAnnotation.bounds.height * zoomFactor;\n    var characterLength = 8;\n    var inputEleWidth = parseFloat(freeTextAnnotation.inputBoxElement.style.width) - characterLength;\n    inputEleWidth = inputEleWidth / zoomFactor;\n    inputEleHeight = inputEleHeight / zoomFactor;\n    var heightDiff = inputEleHeight - currentAnnotation.bounds.height;\n    var y = undefined;\n\n    if (heightDiff > 0) {\n      y = currentAnnotation.wrapper.offsetY + heightDiff / 2;\n      y = y > 0 ? y : undefined;\n    } else {\n      heightDiff = Math.abs(heightDiff);\n      y = currentAnnotation.wrapper.offsetY - heightDiff / 2;\n      y = y > 0 ? y : undefined;\n    }\n\n    var widthDiff = inputEleWidth - currentAnnotation.bounds.width;\n    var x = undefined;\n\n    if (widthDiff > 0) {\n      x = currentAnnotation.wrapper.offsetX + widthDiff / 2;\n      x = x > 0 ? x : undefined;\n    } else {\n      widthDiff = Math.abs(widthDiff);\n      x = currentAnnotation.wrapper.offsetX - widthDiff / 2;\n    }\n\n    currentAnnotation.bounds.width = inputEleWidth;\n    currentAnnotation.bounds.height = inputEleHeight;\n    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n      fontFamily: currentValue,\n      bounds: {\n        width: currentAnnotation.bounds.width,\n        height: currentAnnotation.bounds.height,\n        y: y,\n        x: x\n      }\n    });\n    this.pdfViewer.renderSelector(currentAnnotation.pageIndex, this.pdfViewer.annotationSelectorSettings);\n    this.modifyInCollections(currentAnnotation, 'bounds');\n  };\n\n  Annotation.prototype.updateCanvas = function (canvas, pageWidth, pageHeight, pageNumber) {\n    var ratio = this.pdfViewerBase.getZoomRatio();\n    canvas.width = pageWidth * ratio;\n    canvas.height = pageHeight * ratio;\n    canvas.style.width = pageWidth + 'px';\n    canvas.style.height = pageHeight + 'px';\n    canvas.style.position = 'absolute';\n    canvas.style.zIndex = '1';\n    this.pdfViewerBase.applyElementStyles(canvas, pageNumber);\n  };\n\n  return Annotation;\n}();\n\nexport { Annotation };","map":{"version":3,"names":["TextMarkupAnnotation","ShapeAnnotation","StampAnnotation","StickyNotesAnnotation","MeasureAnnotation","InkAnnotation","AllowedInteraction","DynamicStampItem","SignStampItem","StandardBusinessStampItem","createElement","Browser","isNullOrUndefined","isBlazor","NumericTextBox","Slider","ColorPicker","Dialog","DropDownButton","processPathData","splitArrayCollection","isLineShapes","cloneObject","NodeDrawingTool","LineTool","MoveTool","ResizeTool","ConnectTool","updateDistanceLabel","updateRadiusLabel","updatePerimeterLabel","updateCalibrateLabel","FreeTextAnnotation","InputElement","InPlaceEditor","Annotation","pdfViewer","viewerBase","isUndoRedoAction","isUndoAction","annotationSelected","isShapeCopied","actionCollection","redoCollection","isPopupNoteVisible","undoCommentsElement","redoCommentsElement","selectAnnotationId","isAnnotationSelected","annotationPageIndex","previousIndex","overlappedAnnotations","overlappedCollections","isFormFieldShape","removedAnnotationCollection","pdfViewerBase","enableTextMarkupAnnotation","textMarkupAnnotationModule","enableShapeAnnotation","shapeAnnotationModule","enableMeasureAnnotation","measureAnnotationModule","stampAnnotationModule","stickyNotesAnnotationModule","freeTextAnnotationModule","inputElementModule","inkAnnotationModule","prototype","setAnnotationMode","type","dynamicStampItem","signStampItem","standardBusinessStampItem","allowServerDataBind","allowServerDataBinding","enableServerDataBinding","triggerAnnotationUnselectEvent","clearAnnotationMode","isSelectionMaintained","drawTextMarkupAnnotations","toString","setAnnotationType","isNewFreeTextAnnot","isNewAddedAnnot","signatureModule","setInitialMode","isCommentIconAdded","isAddComment","pageDiv","document","getElementById","element","id","currentPageNumber","addEventListener","annotationModule","drawIcons","bind","annotation","isStampAddMode","isStampAnnotSelected","stampAdded","stampName","isDynamicStamp","retrieveDynamicStampAnnotation","retrievestampAnnotation","initiateTextSelection","deleteAnnotationById","annotationId","selectAnnotation","deleteAnnotation","isTextMarkupAnnotationMode","isTextMarkupAnnotationModule","currentTextMarkupAddMode","isShapeAnnotationModule","currentAnnotationMode","isCalibrateAnnotationModule","parseInt","drawInkAnnotation","deleteTextMarkupAnnotation","selectedAnnotation","selectedItems","annotations","data","window","sessionStorage","getItem","documentId","formFieldsData","JSON","parse","newFormFieldsData","x","length","uniqueID","Value","y","FieldName","Name","splice","push","setItem","stringify","isLock","isReadOnly","annotation_1","shapeAnnotationType","formFieldAnnotationType","inputFields","disabled","annotationSettings","checkAllowedInteractions","pageNumber","pageIndex","shapeType","undoElement","measureType","findPosition","updateImportAnnotationCollection","modifyInCollections","updateSessionStorage","addAction","removeDiv","annotName","parentElement","childElementCount","updateAccordionContainer","remove","selectedAnnot","annotType","getAnnotationType","formFieldCollection","retrieveFormFields","index","findIndex","el","formFieldName","name","m","value","signatureType","annotation_2","getAnnotationsFromCollections","updateInputFieldDivElement","formDesignerModule","updateFormFieldCollection","updateAnnotationCollection","formFieldObj","nameTable","split","formFieldCollections","i","formFieldsIndex","fireFormFieldPropertiesChangeEvent","updateFormFieldCollections","annotation_3","formFieldObject","wrapper","children","indexOf","renderDrawing","clearSelection","setItemInSessionStorage","updateDocumentEditedProperty","tool","bounds","left","top","width","height","fireSignatureRemove","signatureName","fireAnnotationRemove","textSelectionModule","enableTextSelectionMode","updateToolbar","toolbarModule","annotationToolbarModule","selectAnnotationDeleteItem","enableTextMarkupAnnotationPropertiesTools","collections","signatureFieldElement","classList","contains","className","style","pointerEvents","updateSignatureValue","formFieldsModule","updateDataInSession","storeAnnotationCollections","collectionDetails","checkFormDesignCollection","formFieldId","uniqueKey","isExisting","position","checkAnnotationCollection","randomId","customData","annotationCollection","getCustomData","ExistingCustomData","CustomData","stickyNotesSettings","stampSettings","freeTextSettings","getShapeData","ShapeAnnotationType","subject","getMeasureData","Subject","getTextMarkupData","inkAnnotationSettings","lineSettings","arrowSettings","rectangleSettings","circleSettings","polygonSettings","distanceSettings","radiusSettings","highlightSettings","underlineSettings","strikethroughSettings","getData","clearAnnotationStorage","sessionSize","Math","round","maxSessionSize","storageLength","annotationList","key","annotationStorage","removeItem","annotationType","isImportAction","importedAnnotation","currentPageAnnotations","AnnotName","documentcollections","documentAnnotationCollections","documentPageCollections","getAnnotationsFromAnnotationCollections","isRender","findRenderPageList","currentSelector","annotationSelectorSettings","rect","scrollValue","pageSize","getZoomFactor","getAnnotationTop","scroll_1","viewerContainer","scrollTop","scrollLeft","getAnnotationLeft","navigation","goToPage","scroll_2","clearCurrentAnnotationSelection","canvas","getElement","textMarkupAnnotation","getTextMarkupAnnotations","currentTextMarkupAnnotation","isSelectedAnnotation","showHideDropletDiv","annotationClickPosition","selectTextMarkupCurrentPage","enableAnnotationPropertiesTool","enableAnnotationToolbar","isToolbarHidden","showAnnotationToolbar","annotationItem","select","onAnnotationMouseDown","commentElement","display","accordionExpand","ej2_instances","expandItem","commentsDiv","firstChild","click","clearCurrentSelectedAnnotation","currentAnnotation","Top","Left","selectAnnotationFromCodeBehind","pageList","renderedPagesList","getPageNumberFromAnnotationCollections","storeObject","isStorageExceed","annotObject","getPageCollection","getAnnotationIndex","pageAnnotationBases","drawing","getPageObjects","initializeCollection","customStampCollection","popupNote","createNote","showCommentsPanel","enableCommentPanel","commentPanel","isDevice","viewer","insertBefore","navigationPane","commentPanelContainer","toolbarElement","commentPanelResizer","setCommentPanelResizeIconTop","updateCommentPanelTextTop","pageContainer","enableRtl","getViewerContainerRight","right","clientWidth","getViewerContainerLeft","offsetWidth","getViewerContainerScrollbarWidth","updateZoomValue","viewerMainContainer","clientHeight","commentDiv","lastElementChild","enableEditMode","toolbar","propertyToolbar","actionString","property","node","redo","action","modifiedProperty","redoElement","undo","actionObject","pop","undoTextMarkupAction","undoRedoPropertyChange","nodePropertyChange","vertexPoints","leaderHeight","notes","updateCalibrateValues","formDesigner","updateHTMLElement","activeElements","activePageID","deleteFormField","isAnnotationUpdate","annotationObject","duplicate","removeChild","enableDesktopMode","mobileAnnotationToolbar","toolbarCreated","createAnnotationToolbarForMobile","drawFormField","addInCollection","updateDeleteItems","addedAnnot","add","enableShapeLabel","getItemFromSessionStorage","Key","FormField","collectionData","csData","addAnnotationComments","opacity","updateAnnotationModifiedDate","modifiedDate","getDateAndTime","strokeColor","fillColor","updateOpacityValue","thickness","borderDashArray","borderStyle","sourceDecoraterShapes","getArrowType","lineHeadStart","taregetDecoraterShapes","lineHeadEnd","updateCollectionForLineProperty","undoAction","isFreeTextValueChange","dynamicText","fontColor","fontSize","fontFamily","textAlign","font","rotateAngle","isMultiline","undoRedoMultiline","updateFormFieldPropertiesChanges","updateFormFieldValueChange","spanElement","annotationObj","redoTextMarkupAction","isUpdate","sType","redoAction","canvass","undefined","renderMultilineText","renderTextbox","formFieldModel","getFormField","getFormFiledIndex","inputElement","firstElementChild","updateValuePropertyChange","isSelected","updateIsSelectedPropertyChange","selectedIndex","k","options","selected","includes","checkboxDivElement","isChecked","updateIsCheckedPropertyChange","updateTextboxFormDesignerProperties","updateCheckboxFormDesignerProperties","updateRadioButtonDesignerProperties","updateDropdownFormDesignerProperties","updateListBoxFormDesignerProperties","updateSignatureTextboxProperties","pdfAnnotationBase","isAnnotationDelete","updateUndoRedoButtons","styles","popupNoteAuthor","appendChild","popupNoteContent","mainContainer","showPopupNote","event","color","author","note","mainContainerPosition","getBoundingClientRect","popupNoteClientRect","textContent","backgroundColor","topPosition","pageY","leftPosition","pageX","hidePopupNote","createTextMarkupPopup","_this","elementId","popupElement","headerElement","authorPopupElement","closeBtn","modifiedDateElement","contentContainer","noteContentElement","contentEditable","saveClosePopupMenu","onPopupElementMoveStart","onPopupElementMove","onPopupElementMoveEnd","focus","changedTouches","target","childNodes","isPopupMenuMoved","popupElementClientRect","clientX","clientY","currentAnnotPageNumber","parseFloat","top_1","clientPosition","saveNoteContent","innerText","closePopupMenu","showAnnotationPopup","getEventPageNumber","getProperDate","canvasPosition","modifyOpacity","args","isOpacity","clonedObject","redoClonedObject","opacityValue","fireSignaturePropertiesChange","triggerAnnotationPropChange","modifyFontColor","currentColor","modifyFontFamily","currentValue","enableAutoFit","updateFontFamilyRenderSize","modifyFontSize","freeTextAnnotation","addInuptElemet","previousFontSize","inputBoxElement","scrollHeight","inputEleHeight","inputEleWidth","zoomFactor","heightDiff","y_1","offsetY","abs","widthDiff","x_1","offsetX","renderSelector","modifyTextAlignment","modifyTextProperties","fontInfo","isBold","isItalic","isUnderline","isStrikeout","modifyThickness","thicknessValue","modifyStrokeColor","modifyFillColor","modifyDynamicTextValue","filter","s","previousText","annotationBase","returnObj","modifyInCollection","modifySignatureCollection","modifySignatureInkCollection","createPropertiesWindow","elementID","dialogDiv","appearanceTab","createAppearanceTab","propertiesDialog","showCloseIcon","closeOnEscape","isModal","header","localeObj","getConstant","content","close","destroyPropertiesWindow","buttons","buttonModel","isPrimary","onOkClicked","onCancelClicked","appendTo","startArrowDropDown","createContent","getArrowString","outerHTML","endArrowDropDown","thicknessBox","strokeWidth","fillColorPicker","fill","refreshColorPicker","strokeColorPicker","updateColorInIcon","fillDropDown","strokeDropDown","opacitySlider","updateOpacityIndicator","strokeDashArray","lineStyleDropDown","createDropDownContent","selectedLineStyle","selectedLineDashArray","leaderLengthBox","lineStartElement","lineEndElement","lineStyleElement","_dotnetInstance","invokeMethodAsync","updatePropertiesWindowInBlazor","thicknessElement","querySelector","fillColorElement","strokeColorElement","leaderLengthElement","onStrokeColorChange","onFillColorChange","destroy","dialogElement","colorPick","setProperties","refresh","items","text","appearanceDiv","lineStyleContainer","lineHeadStartElement","createInputElement","cssClass","onStartArrowHeadStyleSelect","lineHeadEndElement","borderStyleContainer","onEndArrowHeadStyleSelect","dropDownTarget","createStyleList","format","min","max","colorStyleContainer","createColorPicker","change","hex","toggle","createDropDownButton","beforeOpen","onFillDropDownBeforeOpen","open","onStrokeDropDownBeforeOpen","opacityContainer","opacityElement","lineLengthElement","divElement","ulElement","body","solidLi","createListForStyle","setThickness","dottedLi","dashedLi","idString","isNoColor","colorPicker","inline","mode","enableOpacity","showButtons","modeSwitcher","noColor","iconClass","dropDownButton","iconCss","borderBottomColor","colorElement","liElement","item","labelText","inputType","input","isLabelNeeded","container","label","opacityIndicator","textBoxInput","startArrow","endArrow","getArrowTypeFromDropDown","getValue","newNode","isColorChanged","isStrokeColorChanged","isThicknessChanged","isOpacityChanged","isLineHeadStartStyleChanged","isLineHeadEndStyleChanged","isBorderDashArrayChanged","renderAnnotations","hide","arrowType","arrow","onAnnotationMouseUp","enableBasedOnType","updateAnnnotationPropertyItems","disableTextSelectionMode","isPanMode","designerMode","isSkip","inkAnnotationSelected","isInuptBoxInFocus","enableAnnotationPropertiesTools","enableFreeTextAnnotationPropertiesTools","onShapesMouseup","dragging","setting","lineHeadStartStyle","lineHeadEndStyle","isAnnotationAdded","renderShapeAnnotations","renderMeasureShapeAnnotations","triggerAnnotationResize","triggerAnnotationMove","annotationMenuObj","isSignatureEditable","enableItems","clearTextMarkupMode","clearMeasureMode","clearShapeMode","setCurrentColorInPicker","properties","slice","isFieldReadOnly","isAnnotationToolbarVisible","isFormDesignerToolbarVisible","formDesignerMainDiv","formDesignerToolbarModule","showFormDesignerToolbar","formDesignerItem","adjustViewer","isNewlyAdded","labelContent","addTextToComments","calculateArea","calculateVolume","enableToolbar","createPropertyTools","editIcon","enableStampAnnotationPropertiesTools","enableSignaturePropertiesTools","createMobileAnnotationToolbar","date","dateObject","Date","isNaN","getFullYear","dateString","getMonth","getDate","getHours","getMinutes","getSeconds","pageAnnotations","getAnnotationWithId","eventTarget","pageString","annotationEvent","getAnnotationComments","commentsAnnotations","parentAnnotation","newArray","Author","ModifiedDate","Note","state","stateModel","comments","review","State","StateModel","parentId","IsLock","getRandomNumber","replace","c","random","v","createGUID","createAnnotationLayer","pageWidth","pageHeight","displayMode","updateCanvas","annotationCanvas","resizeAnnotations","applyElementStyles","clearAnnotationCanvas","zoom","ratio","getZoomRatio","shapeAnnotation","measureShapeAnnotation","isImportAnnotations","refreshCanvasDiagramLayer","renderTextMarkupAnnotationsInPage","storeAnnotations","pageAnnotation","annotationStringified","markupAnnotation","decoratorShapes","getArrowTypeForCollection","getBounds","bound","pageDetails","rotation","getInkBounds","getVertexPoints","points","points1","point","points2","points3","getStoredAnnotations","shapeAnnotations","isColor","isStroke","isThickness","isLineStart","isLineEnd","isDashArray","isFreeText","currentText","eventArgs","isFreeTextChanged","trigger","triggerAnnotationAdd","labelSettings","labelOpacity","labelFillColor","fireAnnotationAdd","annotationBounds","currentPosition","previousPosition","oldProperties","fireAnnotationResize","fireSignatureResize","isMoving","fireSignatureMove","fireAnnotationMoving","fireAnnotationMove","annotationSelect","isDblClick","annotSettings","subType","textMarkupContent","textMarkupStartIndex","textMarkupEndIndex","fontStyle","updateFreeTextFontStyle","calibrate","overlappedCollection","getOverlappedAnnotations","j","enableMultiLineOverlap","isOverlapped","orderTextMarkupBounds","clickedPosition","overlappedObject","addFreeTextProperties","annotationAddMode","isNewStamp","fireAnnotationSelect","module","multiPageCollection","multiPageCollectionList","fireAnnotationDoubleClick","selectSignature","signatureId","annotBounds","signatureAdded","signature","fireSignatureSelect","editSignature","deletComment","modifyCommentDeleteProperty","addReplyComments","replyComment","commentType","commentsMainDiv","createCommentDiv","saveCommentDiv","editComments","commentId","editComment","editAnnotation","isTextMarkupUpdate","allowedInteractions","allowedInteractionsCount","Select","Move","Resize","Delete","PropertyChange","None","updateAnnotationAllowedInteractions","getAnnotations","isPrint","isCommentLock","j_1","nextComment","j_2","modifyAnnotationProperty","manageAnnotations","modifyOpacityProperty","modifyColorProperty","stampAnnotationType","stampAnnotationPath","imageSource","annotationPropertyChange","calculateAnnotationBounds","isSourceDecoraterShapesChanged","isTargetDecoraterShapesChanged","updateFreeTextProperties","depth","volumeDepth","context","getContext","characterLength","highestTextNode","textNodes","textboxValue","textNodeData","measureText","highestTextNodeData","textwidth","ceil","maxWidth","setFreeTextFontStyle","isReadonly","updateAnnotationComments","newCommentDiv","commentObj","updateCollection","convertBounds","Y","X","Width","Height","noteContent","updateMeasurementSettings","enableAnnotation","ratioString","measurementSettings","conversionUnit","scaleRatio","displayUnit","updateMeasureValues","newAnnot","modifyAnnotationProperties","newAnnotation","vertexPoint","isLocked","updateAnnotationAuthor","annotationSubType","annotationAuthor","perimeterSettings","areaSettings","volumeSettings","nameToHash","colour","colours","toLowerCase","findAnnotationSettings","isSettings","customStampSettings","settings","minWidth","minHeight","maxHeight","updateSettings","updateAnnotationSettings","AnnotType","pageCollections","getPageShapeAnnotations","findOverlappedAnnotations","inkObject","inkAnnotObject","inkAnnotations","shapeObject","shapeAnnotObject","measureObject","measureAnnotationObject","measureAnnotations","stampObject","stampAnnotationObject","stampAnnotations","freeTextObject","freeTextAnnotationObject","freeTextAnnotations","stickyObject","stickyNotesAnnotationObject","stickyNotesAnnotations","textMarkupObject","textMarkupAnnotationObject","textMarkupAnnotations","calculateOverlappedAnnotationBounds","selectBounds","totalHeight","totalWidth","checkOverlappedCollections","boundsCount","annotationBoundsCollection","findAnnotationMode","importCollection","collection","stickyNotesAnnotation","isAdded","updateModifiedDate","setAnnotationModifiedDate","modifiedTime","modifiedDateTime","time","dateStringSpilt","clear","shapeCount","measureShapeCount","stampPageNumber","freeTextPageNumbers","inkAnnotationindex","retrieveAnnotationCollection","interaction","annotationInteraction","checkContextMenuDeleteItem","menuObj","findCurrentAnnotation","isEnableDelete","checkAllowedInteractionSettings","textMarkupAnnotationType","checkIsLockSettings","checkLockSettings","locked","islock","restrictContextMenu","isRestrict","annotationAllowedInteraction","cValue","convertRgbToNumberArray","rgbToHex","convertToHsvString","rgbToHsv","apply","hsvToRgb","convertToRgbString","roundValue","rgb","hexToRgb","map","n","join","hsv","len","tempValue","len_1","charAt","trim","Number","toFixed","bigInt","h","r","g","b","d","f","p","q","t","floor","substr","exportAnnotationsAsStream","dataFormat","isAnnotations","updateExportItem","Promise","resolve","reject","createRequestForExportAnnotations","then","obj","getModuleName","getVertexPointsXY","addAnnotation","offset","pdfAnnotation","updateAddAnnotationDetails","isAddAnnotationProgramatically","customStamps","pdf","isAddAnnotation","importAnnotations","triggerAnnotationAddEvent","borderColor","borderWidth","defaultText","textAlignment","fireSignatureAdd","fireAnnotationUnSelect","autoFitFreeText","padding","paddingLeft","zIndex"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/annotation/annotation.js"],"sourcesContent":["import { TextMarkupAnnotation, ShapeAnnotation, StampAnnotation, StickyNotesAnnotation, MeasureAnnotation, InkAnnotation, AllowedInteraction, DynamicStampItem, SignStampItem, StandardBusinessStampItem } from '../index';\nimport { createElement, Browser, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { NumericTextBox, Slider, ColorPicker } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { processPathData, splitArrayCollection } from '@syncfusion/ej2-drawings';\nimport { isLineShapes, cloneObject } from '../drawing/drawing-util';\nimport { NodeDrawingTool, LineTool, MoveTool, ResizeTool, ConnectTool } from '../drawing/tools';\nimport { updateDistanceLabel, updateRadiusLabel, updatePerimeterLabel, updateCalibrateLabel } from '../drawing/connector-util';\nimport { FreeTextAnnotation } from './free-text-annotation';\nimport { InputElement } from './input-element';\nimport { InPlaceEditor } from '@syncfusion/ej2-inplace-editor';\n/**\n * The `Annotation` module is used to handle annotation actions of PDF viewer.\n */\nvar Annotation = /** @class */ (function () {\n    /**\n     * @param pdfViewer\n     * @param viewerBase\n     * @param pdfViewer\n     * @param viewerBase\n     * @private\n     */\n    function Annotation(pdfViewer, viewerBase) {\n        this.isUndoRedoAction = false;\n        this.isUndoAction = false;\n        this.annotationSelected = true;\n        /**\n         * @private\n         */\n        this.isShapeCopied = false;\n        /**\n         * @private\n         */\n        this.actionCollection = [];\n        /**\n         * @private\n         */\n        this.redoCollection = [];\n        /**\n         * @private\n         */\n        this.isPopupNoteVisible = false;\n        /**\n         * @private\n         */\n        this.undoCommentsElement = [];\n        /**\n         * @private\n         */\n        this.redoCommentsElement = [];\n        /**\n         * @private\n         */\n        this.selectAnnotationId = null;\n        /**\n         * @private\n         */\n        this.isAnnotationSelected = false;\n        /**\n         * @private\n         */\n        this.annotationPageIndex = null;\n        this.previousIndex = null;\n        // eslint-disable-next-line\n        this.overlappedAnnotations = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.overlappedCollections = [];\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.isFormFieldShape = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.removedAnnotationCollection = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.textMarkupAnnotationModule = new TextMarkupAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n        if (this.pdfViewer.enableShapeAnnotation) {\n            this.shapeAnnotationModule = new ShapeAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n        if (this.pdfViewer.enableMeasureAnnotation) {\n            this.measureAnnotationModule = new MeasureAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n        this.stampAnnotationModule = new StampAnnotation(this.pdfViewer, this.pdfViewerBase);\n        this.stickyNotesAnnotationModule = new StickyNotesAnnotation(this.pdfViewer, this.pdfViewerBase);\n        this.freeTextAnnotationModule = new FreeTextAnnotation(this.pdfViewer, this.pdfViewerBase);\n        this.inputElementModule = new InputElement(this.pdfViewer, this.pdfViewerBase);\n        this.inkAnnotationModule = new InkAnnotation(this.pdfViewer, this.pdfViewerBase);\n    }\n    /**\n     * Set annotation type to be added in next user interaction in PDF Document.\n     *\n     * @param type\n     * @param dynamicStampItem\n     * @param signStampItem\n     * @param standardBusinessStampItem\n     * @returns void\n     */\n    // eslint-disable-next-line max-len\n    Annotation.prototype.setAnnotationMode = function (type, dynamicStampItem, signStampItem, standardBusinessStampItem) {\n        var allowServerDataBind = this.pdfViewer.allowServerDataBinding;\n        this.pdfViewer.enableServerDataBinding(false);\n        type !== 'None' ? this.triggerAnnotationUnselectEvent() : null;\n        if (type === 'None') {\n            this.clearAnnotationMode();\n        }\n        else if (type === 'Highlight' || type === 'Strikethrough' || type === 'Underline') {\n            if (this.textMarkupAnnotationModule) {\n                this.textMarkupAnnotationModule.isSelectionMaintained = false;\n                this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());\n            }\n        }\n        else if (type === 'Line' || type === 'Arrow' || type === 'Rectangle' || type === 'Circle' || type === 'Polygon') {\n            if (this.shapeAnnotationModule) {\n                this.shapeAnnotationModule.setAnnotationType(type);\n            }\n        }\n        else if (type === 'Distance' || type === 'Perimeter' || type === 'Area' || type === 'Radius' || type === 'Volume') {\n            if (this.measureAnnotationModule) {\n                this.measureAnnotationModule.setAnnotationType(type);\n            }\n        }\n        else if (type === 'FreeText' && this.freeTextAnnotationModule) {\n            this.freeTextAnnotationModule.setAnnotationType('FreeText');\n            this.freeTextAnnotationModule.isNewFreeTextAnnot = true;\n            this.freeTextAnnotationModule.isNewAddedAnnot = true;\n        }\n        else if (type === 'HandWrittenSignature') {\n            this.pdfViewerBase.signatureModule.setAnnotationMode();\n        }\n        else if (type === 'Initial') {\n            this.pdfViewerBase.signatureModule.setInitialMode();\n        }\n        else if (type === 'Ink') {\n            this.inkAnnotationModule.setAnnotationMode();\n        }\n        else if (type === 'StickyNotes') {\n            this.pdfViewerBase.isCommentIconAdded = true;\n            this.pdfViewerBase.isAddComment = true;\n            // eslint-disable-next-line max-len\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n            if (pageDiv) {\n                pageDiv.addEventListener('mousedown', this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this));\n            }\n        }\n        else if (type === 'Stamp') {\n            this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode = true;\n            this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected = true;\n            this.pdfViewerBase.stampAdded = true;\n            if (dynamicStampItem) {\n                // eslint-disable-next-line\n                var stampName = DynamicStampItem[dynamicStampItem];\n                this.pdfViewerBase.isDynamicStamp = true;\n                this.stampAnnotationModule.retrieveDynamicStampAnnotation(stampName);\n            }\n            else if (signStampItem) {\n                // eslint-disable-next-line\n                var stampName = SignStampItem[signStampItem];\n                this.pdfViewerBase.isDynamicStamp = false;\n                this.stampAnnotationModule.retrievestampAnnotation(stampName);\n            }\n            else if (standardBusinessStampItem) {\n                // eslint-disable-next-line\n                var stampName = StandardBusinessStampItem[standardBusinessStampItem];\n                this.pdfViewerBase.isDynamicStamp = false;\n                this.stampAnnotationModule.retrievestampAnnotation(stampName);\n            }\n        }\n        this.pdfViewer.enableServerDataBinding(allowServerDataBind, true);\n        this.pdfViewerBase.initiateTextSelection();\n    };\n    Annotation.prototype.deleteAnnotationById = function (annotationId) {\n        if (annotationId) {\n            this.annotationSelected = false;\n            this.selectAnnotation(annotationId);\n            this.deleteAnnotation();\n        }\n    };\n    Annotation.prototype.clearAnnotationMode = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        if (this.freeTextAnnotationModule) {\n            this.freeTextAnnotationModule.isNewFreeTextAnnot = false;\n            this.freeTextAnnotationModule.isNewAddedAnnot = false;\n        }\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode = '';\n        }\n        if (this.pdfViewerBase.isShapeAnnotationModule()) {\n            this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode = '';\n        }\n        if (this.pdfViewerBase.isCalibrateAnnotationModule()) {\n            this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode = '';\n        }\n        if (this.pdfViewer.annotationModule.inkAnnotationModule) {\n            // eslint-disable-next-line\n            var currentPageNumber = parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);\n            this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);\n        }\n    };\n    Annotation.prototype.deleteAnnotation = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n        }\n        var selectedAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        if (selectedAnnotation) {\n            var data = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_formfields');\n            var formFieldsData = JSON.parse(data);\n            var newFormFieldsData = [];\n            if (formFieldsData) {\n                for (var x = 0; x < formFieldsData.length; x++) {\n                    if (formFieldsData[x].uniqueID == selectedAnnotation.id) {\n                        formFieldsData[x].Value = '';\n                        for (var y = 0; y < formFieldsData.length; y++) {\n                            if (formFieldsData[x].FieldName === formFieldsData[y].FieldName && formFieldsData[y].Name === 'ink') {\n                                formFieldsData.splice(y, 1);\n                            }\n                        }\n                        newFormFieldsData.push(formFieldsData[x]);\n                    }\n                    else {\n                        newFormFieldsData.push(formFieldsData[x]);\n                    }\n                }\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_formfields', JSON.stringify(newFormFieldsData));\n            }\n        }\n        var isLock = false;\n        var isReadOnly = false;\n        if (this.pdfViewer.selectedItems.annotations.length > 0) {\n            // eslint-disable-next-line\n            var annotation_1 = this.pdfViewer.selectedItems.annotations[0];\n            var type = annotation_1.shapeAnnotationType;\n            if (type === 'Path' || annotation_1.formFieldAnnotationType === 'SignatureField' || annotation_1.formFieldAnnotationType === 'InitialField' || type === 'HandWrittenSignature' || type === 'SignatureText' || type === 'SignatureImage') {\n                var inputFields = document.getElementById(annotation_1.id);\n                if (inputFields && inputFields.disabled) {\n                    isReadOnly = true;\n                }\n            }\n            if (annotation_1.annotationSettings) {\n                isLock = annotation_1.annotationSettings.isLock;\n                if (isLock && this.checkAllowedInteractions('Delete', annotation_1)) {\n                    isLock = false;\n                }\n            }\n            if (!isLock && !isReadOnly) {\n                var pageNumber = annotation_1.pageIndex;\n                // eslint-disable-next-line\n                var shapeType = annotation_1.shapeAnnotationType;\n                // eslint-disable-next-line\n                var undoElement = void 0;\n                if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n                    // eslint-disable-next-line max-len\n                    if (isNullOrUndefined(annotation_1.measureType) || annotation_1.measureType === '') {\n                        this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'shape');\n                        this.updateImportAnnotationCollection(annotation_1, pageNumber, 'shapeAnnotation');\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'measure');\n                        // eslint-disable-next-line max-len\n                        this.updateImportAnnotationCollection(annotation_1, pageNumber, 'measureShapeAnnotation');\n                    }\n                    undoElement = this.modifyInCollections(annotation_1, 'delete');\n                }\n                else if (shapeType === 'FreeText') {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'FreeText', 'delete');\n                    undoElement = this.modifyInCollections(annotation_1, 'delete');\n                    this.updateImportAnnotationCollection(annotation_1, pageNumber, 'freeTextAnnotation');\n                }\n                else if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureImage' || shapeType === 'SignatureText') {\n                    undoElement = this.modifyInCollections(annotation_1, 'delete');\n                }\n                else if (shapeType === 'Ink') {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1, 'Ink', 'delete');\n                    undoElement = this.modifyInCollections(annotation_1, 'delete');\n                    this.updateImportAnnotationCollection(annotation_1, pageNumber, 'inkAnnotation');\n                }\n                else {\n                    undoElement = this.pdfViewer.selectedItems.annotations[0];\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(undoElement, undoElement.shapeAnnotationType, 'delete');\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(annotation_1, null, 'delete');\n                }\n                if (shapeType === 'StickyNotes') {\n                    this.updateImportAnnotationCollection(annotation_1, pageNumber, 'stickyNotesAnnotation');\n                }\n                if (shapeType === 'Stamp' || 'Image') {\n                    this.updateImportAnnotationCollection(annotation_1, pageNumber, 'stampAnnotations');\n                }\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(pageNumber, null, annotation_1, 'Delete', '', undoElement, annotation_1);\n                // eslint-disable-next-line\n                var removeDiv = void 0;\n                if (annotation_1.annotName !== '') {\n                    removeDiv = document.getElementById(annotation_1.annotName);\n                }\n                else {\n                    if (undoElement) {\n                        if (undoElement.annotName !== '') {\n                            removeDiv = document.getElementById(undoElement.annotName);\n                        }\n                    }\n                }\n                if (removeDiv) {\n                    if (removeDiv.parentElement.childElementCount === 1) {\n                        this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);\n                    }\n                    else {\n                        removeDiv.remove();\n                    }\n                }\n                var selectedAnnot = this.pdfViewer.selectedItems.annotations[0];\n                var annotationId = selectedAnnot.annotName;\n                var annotType = this.getAnnotationType(selectedAnnot.shapeAnnotationType, selectedAnnot.measureType);\n                if (shapeType === 'Path' || selectedAnnot.formFieldAnnotationType === 'SignatureField' || selectedAnnot.formFieldAnnotationType === 'InitialField' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') { // eslint-disable-next-line\n                    var formFieldCollection = this.pdfViewer.retrieveFormFields();\n                    var index = formFieldCollection.findIndex(function (el) { return el.id === annotation_1.id; });\n                    var formFieldName = void 0;\n                    if (index > -1) {\n                        formFieldName = formFieldCollection[index].name;\n                    }\n                    for (var m = 0; m < formFieldCollection.length; m++) {\n                        if (selectedAnnot.id === formFieldCollection[m].id || (isNullOrUndefined(formFieldName) && formFieldName === formFieldCollection[m].name)) {\n                            formFieldCollection[m].value = '';\n                            formFieldCollection[m].signatureType = '';\n                            var annotation_2 = this.getAnnotationsFromCollections(formFieldCollection[m].id);\n                            this.updateInputFieldDivElement(annotation_2);\n                            undoElement = this.modifyInCollections(annotation_2, 'delete');\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.addAction(annotation_2.pageIndex, null, annotation_2, 'Delete', '', undoElement, annotation_2);\n                            if (this.pdfViewer.formDesignerModule && selectedAnnot.formFieldAnnotationType)\n                                this.updateFormFieldCollection(annotation_2);\n                            else\n                                this.updateAnnotationCollection(annotation_2);\n                            this.pdfViewer.remove(annotation_2);\n                        }\n                    }\n                    if (this.pdfViewer.formDesignerModule && selectedAnnot.formFieldAnnotationType)\n                        this.updateFormFieldCollection(annotation_1);\n                    else\n                        this.updateAnnotationCollection(annotation_1);\n                }\n                var formFieldObj = this.pdfViewer.nameTable[annotation_1.id.split(\"_\")[0]];\n                if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n                    var index = this.pdfViewer.formFieldCollections.findIndex(function (el) { return el.id === annotation_1.id.split(\"_\")[0]; });\n                    var formFieldName = void 0;\n                    if (index > -1) {\n                        formFieldName = this.pdfViewer.formFieldCollections[index].name;\n                    }\n                    for (var i = 0; i < this.pdfViewer.formFieldCollections.length; i++) {\n                        if (formFieldName === this.pdfViewer.formFieldCollections[i].name) {\n                            var formFieldsIndex = this.pdfViewer.formFieldCollections[i];\n                            this.pdfViewer.fireFormFieldPropertiesChangeEvent(\"formFieldPropertiesChange\", formFieldsIndex, formFieldsIndex.pageIndex, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, formFieldsIndex.value, \"\");\n                            formFieldsIndex.value = \"\";\n                            formFieldsIndex.signatureType = \"\";\n                            this.pdfViewer.formDesignerModule.updateFormFieldCollections(formFieldsIndex);\n                            var annotation_3 = this.getAnnotationsFromCollections(formFieldsIndex.id + '_content');\n                            undoElement = this.modifyInCollections(annotation_3, 'delete');\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.addAction(annotation_3.pageIndex, null, annotation_3, 'Delete', '', undoElement, annotation_3);\n                            this.updateInputFieldDivElement(annotation_3);\n                            var formFieldObject = this.pdfViewer.nameTable[annotation_3.id.split(\"_\")[0]];\n                            formFieldObject.wrapper.children.splice(formFieldObject.wrapper.children.indexOf(annotation_3.wrapper.children[0]), 1);\n                            this.pdfViewer.remove(annotation_3);\n                        }\n                    }\n                }\n                this.pdfViewer.remove(annotation_1);\n                this.pdfViewer.renderDrawing();\n                this.pdfViewer.clearSelection(pageNumber);\n                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n                this.pdfViewerBase.updateDocumentEditedProperty(true);\n                this.pdfViewerBase.tool = null;\n                this.pdfViewer.tool = null;\n                if (selectedAnnot.shapeAnnotationType === 'HandWrittenSignature' || selectedAnnot.shapeAnnotationType === 'SignatureText' || selectedAnnot.shapeAnnotationType === 'SignatureImage') {\n                    // eslint-disable-next-line max-len\n                    var bounds = { left: selectedAnnot.bounds.x, top: selectedAnnot.bounds.y, width: selectedAnnot.bounds.width, height: selectedAnnot.bounds.height };\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.fireSignatureRemove(pageNumber, selectedAnnot.signatureName, selectedAnnot.shapeAnnotationType, bounds);\n                }\n                else if (this.pdfViewer.annotationModule) {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.fireAnnotationRemove(pageNumber, annotationId, annotType, selectedAnnot.bounds);\n                }\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n                }\n            }\n        }\n        this.updateToolbar(true);\n        if (this.pdfViewer.toolbarModule) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule && !isLock) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false, true);\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(false);\n            }\n        }\n    };\n    /**\n     * @param annotationId\n    */\n    // eslint-disable-next-line max-len\n    Annotation.prototype.getAnnotationsFromCollections = function (annotationId) {\n        var collections = this.pdfViewer.annotations;\n        if (collections && annotationId) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].id === annotationId) {\n                    return collections[i];\n                }\n            }\n        }\n    };\n    ;\n    /**\n     * @param annotation\n    */\n    Annotation.prototype.updateInputFieldDivElement = function (annotation) {\n        var inputFields = document.getElementById(annotation.id);\n        var signatureFieldElement = document.getElementById(annotation.id + \"_html_element\");\n        if (inputFields === null && !isNullOrUndefined(signatureFieldElement)) {\n            inputFields = signatureFieldElement.children[0].children[0];\n        }\n        if (inputFields && inputFields.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n            inputFields.className = 'e-pdfviewer-signatureformfields';\n            inputFields.style.pointerEvents = '';\n            inputFields.parentElement.style.pointerEvents = '';\n            if (this.pdfViewer.formDesignerModule) {\n                this.pdfViewer.formDesignerModule.updateSignatureValue(annotation.id);\n            }\n            else {\n                this.pdfViewer.formFieldsModule.updateDataInSession(inputFields, '');\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param annotation\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.storeAnnotationCollections = function (annotation, pageNumber) {\n        if (this.isFormFieldShape) {\n            var collectionDetails = this.checkFormDesignCollection(annotation);\n            var selectAnnotation = cloneObject(annotation);\n            selectAnnotation.formFieldId = annotation.annotName;\n            selectAnnotation.pageNumber = pageNumber;\n            delete selectAnnotation.annotName;\n            if (annotation.id) {\n                selectAnnotation.uniqueKey = annotation.id;\n                delete selectAnnotation.id;\n            }\n            if (collectionDetails.isExisting) {\n                this.pdfViewer.formFieldCollection.splice(collectionDetails.position, 0, selectAnnotation);\n            }\n            else {\n                this.pdfViewer.formFieldCollection.push(selectAnnotation);\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var collectionDetails = this.checkAnnotationCollection(annotation);\n            // eslint-disable-next-line\n            var selectAnnotation = cloneObject(annotation);\n            selectAnnotation.annotationId = annotation.annotName;\n            selectAnnotation.pageNumber = pageNumber;\n            delete selectAnnotation.annotName;\n            if (annotation.shapeAnnotationType === 'stamp') {\n                selectAnnotation.uniqueKey = annotation.randomId;\n                delete selectAnnotation.randomId;\n            }\n            if (annotation.shapeAnnotationType === 'sticky') {\n                selectAnnotation.uniqueKey = annotation.annotName;\n            }\n            if (annotation.id) {\n                selectAnnotation.uniqueKey = annotation.id;\n                delete selectAnnotation.id;\n            }\n            // eslint-disable-next-line\n            if (selectAnnotation.customData && annotation.customData && JSON.stringify(selectAnnotation.customData) !== JSON.stringify(annotation.customData)) {\n                selectAnnotation.customData = annotation.customData;\n            }\n            if (collectionDetails.isExisting) {\n                this.pdfViewer.annotationCollection.splice(collectionDetails.position, 0, selectAnnotation);\n            }\n            else {\n                this.pdfViewer.annotationCollection.push(selectAnnotation);\n            }\n        }\n    };\n    Annotation.prototype.checkFormDesignCollection = function (annotation) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.formFieldCollection;\n        if (collections && annotation) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].formFieldId === annotation.annotName) {\n                    this.pdfViewer.formFieldCollection.splice(i, 1);\n                    return { isExisting: true, position: i };\n                }\n            }\n        }\n        return { isExisting: false, position: null };\n    };\n    Annotation.prototype.updateFormFieldCollection = function (annotation) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.formFieldCollection;\n        if (collections && annotation) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].formFieldId === annotation.annotName) {\n                    this.removedAnnotationCollection.push(collections[i]);\n                    this.pdfViewer.formFieldCollection.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getCustomData = function (annotation) {\n        var customData;\n        if (annotation.ExistingCustomData && !annotation.CustomData) {\n            customData = JSON.parse(annotation.ExistingCustomData);\n        }\n        else if (annotation.CustomData === null) {\n            if (annotation.shapeAnnotationType === 'sticky') {\n                customData = this.pdfViewer.stickyNotesSettings.customData;\n            }\n            if (annotation.shapeAnnotationType === 'Stamp') {\n                customData = this.pdfViewer.stampSettings.customData;\n            }\n            if (annotation.shapeAnnotationType === 'FreeText') {\n                customData = this.pdfViewer.freeTextSettings.customData;\n            }\n            if (annotation.id === 'shape') {\n                customData = this.getShapeData(annotation.ShapeAnnotationType, annotation.subject);\n            }\n            if (annotation.id === 'measure') {\n                customData = this.getMeasureData(annotation.Subject);\n            }\n            if (annotation.shapeAnnotationType === 'textMarkup') {\n                customData = this.getTextMarkupData(annotation.subject);\n            }\n            if (annotation.shapeAnnotationType === 'Ink') {\n                customData = this.pdfViewer.inkAnnotationSettings.customData;\n            }\n        }\n        else {\n            customData = annotation.CustomData;\n        }\n        return customData;\n    };\n    /**\n     * @param type\n     * @param subject\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getShapeData = function (type, subject) {\n        var customData;\n        if (type === 'Line' && subject !== 'Arrow' && this.pdfViewer.lineSettings.customData) {\n            customData = this.pdfViewer.lineSettings.customData;\n        }\n        else if ((type === 'LineWidthArrowHead' || subject === 'Arrow') && this.pdfViewer.arrowSettings.customData) {\n            customData = this.pdfViewer.arrowSettings.customData;\n        }\n        else if ((type === 'Rectangle' || type === 'Square') && this.pdfViewer.rectangleSettings.customData) {\n            customData = this.pdfViewer.rectangleSettings.customData;\n        }\n        else if ((type === 'Ellipse' || type === 'Circle') && this.pdfViewer.circleSettings.customData) {\n            customData = this.pdfViewer.circleSettings.customData;\n        }\n        else if (type === 'Polygon' && this.pdfViewer.polygonSettings.customData) {\n            customData = this.pdfViewer.polygonSettings.customData;\n        }\n        else if (this.pdfViewer.annotationSettings.customData) {\n            customData = this.pdfViewer.annotationSettings.customData;\n        }\n        return customData;\n    };\n    /**\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getMeasureData = function (type) {\n        var customData;\n        if ((type === 'Distance' || type === 'Distance calculation') && this.pdfViewer.distanceSettings.customData) {\n            customData = this.pdfViewer.distanceSettings.customData;\n        }\n        else if ((type === 'Line' || type === 'Perimeter calculation') && this.pdfViewer.lineSettings.customData) {\n            customData = this.pdfViewer.lineSettings.customData;\n            // eslint-disable-next-line max-len\n        }\n        else if ((type === 'Polygon' || type === 'Area calculation' || type === 'Volume calculation') && this.pdfViewer.polygonSettings.customData) {\n            customData = this.pdfViewer.polygonSettings.customData;\n        }\n        else if ((type === 'Radius' || type === 'Radius calculation') && this.pdfViewer.radiusSettings.customData) {\n            customData = this.pdfViewer.radiusSettings.customData;\n        }\n        else if (this.pdfViewer.annotationSettings.customData) {\n            customData = this.pdfViewer.annotationSettings.customData;\n        }\n        return customData;\n    };\n    /**\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getTextMarkupData = function (type) {\n        var customData;\n        if (type === 'Highlight' && this.pdfViewer.highlightSettings.customData) {\n            customData = this.pdfViewer.highlightSettings.customData;\n        }\n        else if (type === 'Underline' && this.pdfViewer.underlineSettings.customData) {\n            customData = this.pdfViewer.underlineSettings.customData;\n        }\n        else if (type === 'Strikethrough' && this.pdfViewer.strikethroughSettings.customData) {\n            customData = this.pdfViewer.strikethroughSettings.customData;\n        }\n        else if (this.pdfViewer.annotationSettings.customData) {\n            customData = this.pdfViewer.annotationSettings.customData;\n        }\n        return customData;\n    };\n    /**\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getData = function (type) {\n        var customData;\n        if (type === 'FreeText' && this.pdfViewer.freeTextSettings.customData) {\n            customData = this.pdfViewer.freeTextSettings.customData;\n        }\n        else if ((type === 'image' || type === 'Stamp') && this.pdfViewer.stampSettings.customData) {\n            customData = this.pdfViewer.stampSettings.customData;\n        }\n        else if (type === 'sticky' && this.pdfViewer.stickyNotesSettings.customData) {\n            customData = this.pdfViewer.stickyNotesSettings.customData;\n        }\n        else if (this.pdfViewer.annotationSettings.customData) {\n            customData = this.pdfViewer.annotationSettings.customData;\n        }\n        return customData;\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.clearAnnotationStorage = function () {\n        // eslint-disable-next-line\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        var maxSessionSize = 4500;\n        if (sessionSize > maxSessionSize) {\n            var storageLength = window.sessionStorage.length;\n            // eslint-disable-next-line\n            var annotationList = [];\n            for (var i = 0; i < storageLength; i++) {\n                if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n                    if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.annotationStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n                        annotationList.push(window.sessionStorage.key(i));\n                    }\n                }\n            }\n            if (annotationList) {\n                for (var i = 0; i < annotationList.length; i++) {\n                    window.sessionStorage.removeItem(annotationList[i]);\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.checkAnnotationCollection = function (annotation) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.annotationCollection;\n        if (collections && annotation) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].annotationId === annotation.annotName) {\n                    this.pdfViewer.annotationCollection.splice(i, 1);\n                    return { isExisting: true, position: i };\n                }\n            }\n        }\n        return { isExisting: false, position: null };\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateAnnotationCollection = function (annotation) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.annotationCollection;\n        if (collections && annotation) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].annotationId === annotation.annotName) {\n                    this.removedAnnotationCollection.push(collections[i]);\n                    this.pdfViewer.annotationCollection.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param annotationType\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateImportAnnotationCollection = function (annotation, pageNumber, annotationType) {\n        if (this.pdfViewerBase.isImportAction) {\n            if (this.pdfViewerBase.importedAnnotation && this.pdfViewerBase.importedAnnotation[pageNumber]) {\n                // eslint-disable-next-line\n                var currentPageAnnotations = this.pdfViewerBase.importedAnnotation[pageNumber];\n                if (currentPageAnnotations[annotationType]) {\n                    for (var i = 0; i < currentPageAnnotations[annotationType].length; i++) {\n                        // eslint-disable-next-line max-len\n                        if (annotation.annotName === currentPageAnnotations[annotationType][i].AnnotName || annotation.annotName === currentPageAnnotations[annotationType][i].annotName) {\n                            this.pdfViewerBase.importedAnnotation[pageNumber][annotationType].splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var documentcollections = this.pdfViewerBase.documentAnnotationCollections;\n        if (documentcollections && documentcollections[pageNumber]) {\n            // eslint-disable-next-line\n            var documentPageCollections = documentcollections[pageNumber];\n            if (documentPageCollections && documentPageCollections[annotationType]) {\n                for (var i = 0; i < documentPageCollections[annotationType].length; i++) {\n                    // eslint-disable-next-line max-len\n                    if (annotation.annotName === documentPageCollections[annotationType][i].AnnotName) {\n                        this.pdfViewerBase.documentAnnotationCollections[pageNumber][annotationType].splice(i, 1);\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * Select the annotations using annotation object or annotation Id.\n     *\n     * @param annotationId\n     * @returns void\n     */\n    Annotation.prototype.selectAnnotation = function (annotationId) {\n        // eslint-disable-next-line\n        var annotation;\n        var id;\n        if (typeof annotationId === 'object') {\n            annotation = annotationId;\n            id = annotation.annotationId;\n            annotation = this.getAnnotationsFromAnnotationCollections(id);\n        }\n        if (typeof annotationId === 'string') {\n            annotation = this.getAnnotationsFromAnnotationCollections(annotationId);\n            id = annotationId;\n        }\n        if (annotation) {\n            var pageIndex = annotation.pageNumber;\n            var isRender = false;\n            isRender = this.findRenderPageList(pageIndex);\n            var currentSelector = this.pdfViewer.annotationSelectorSettings;\n            //let pageIndex: number = this.getPageNumberFromAnnotationCollections(annotation);\n            if (annotation && pageIndex >= 0) {\n                if (annotation.shapeAnnotationType === 'textMarkup') {\n                    if (annotation.rect || annotation.bounds) {\n                        // eslint-disable-next-line max-len\n                        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + (this.getAnnotationTop(annotation)) * this.pdfViewerBase.getZoomFactor();\n                        var scroll_1 = (scrollValue - 20).toString();\n                        // eslint-disable-next-line radix\n                        this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_1);\n                        this.pdfViewerBase.viewerContainer.scrollLeft = this.getAnnotationLeft(annotation) * this.pdfViewerBase.getZoomFactor();\n                    }\n                    else {\n                        if (this.pdfViewer.navigation) {\n                            this.pdfViewer.navigation.goToPage(pageIndex + 1);\n                        }\n                    }\n                }\n                else {\n                    if (annotation.bounds) {\n                        // eslint-disable-next-line max-len\n                        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + (annotation.bounds.top) * this.pdfViewerBase.getZoomFactor();\n                        var scrollLeft = annotation.bounds.left * this.pdfViewerBase.getZoomFactor();\n                        if (annotation.shapeAnnotationType === 'Ink') {\n                            // eslint-disable-next-line max-len\n                            scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + (annotation.bounds.y) * this.pdfViewerBase.getZoomFactor();\n                            scrollLeft = annotation.bounds.x * this.pdfViewerBase.getZoomFactor();\n                        }\n                        var scroll_2 = (scrollValue - 20).toString();\n                        // eslint-disable-next-line radix\n                        this.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll_2);\n                        this.pdfViewerBase.viewerContainer.scrollLeft = scrollLeft;\n                    }\n                    else {\n                        if (this.pdfViewer.navigation) {\n                            this.pdfViewer.navigation.goToPage(pageIndex + 1);\n                        }\n                    }\n                }\n                if (isRender) {\n                    if (this.previousIndex) {\n                        this.pdfViewer.clearSelection(this.previousIndex);\n                    }\n                    this.pdfViewer.clearSelection(pageIndex);\n                    this.previousIndex = pageIndex;\n                    if (annotation.shapeAnnotationType === 'textMarkup') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex, true);\n                        // eslint-disable-next-line max-len\n                        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n                        // eslint-disable-next-line\n                        var textMarkupAnnotation = this.getTextMarkupAnnotations(pageIndex, annotation);\n                        if (textMarkupAnnotation) {\n                            this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n                            this.textMarkupAnnotationModule.isSelectedAnnotation = true;\n                            this.textMarkupAnnotationModule.showHideDropletDiv(true);\n                            this.textMarkupAnnotationModule.annotationClickPosition = null;\n                            this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation, canvas, pageIndex, null, true);\n                            this.textMarkupAnnotationModule.currentTextMarkupAnnotation = textMarkupAnnotation;\n                            this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageIndex;\n                            this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n                            this.textMarkupAnnotationModule.isSelectedAnnotation = false;\n                            if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                            }\n                        }\n                    }\n                    else if (annotation.shapeAnnotationType === 'stamp' || annotation.ShapeAnnotationType === 'stamp') {\n                        this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n                        this.pdfViewer.annotation.onAnnotationMouseDown();\n                    }\n                    else if (annotation.shapeAnnotationType === 'sticky' || annotation.ShapeAnnotationType === 'sticky') {\n                        this.pdfViewer.select([annotation.annotationId], currentSelector);\n                        this.pdfViewer.annotation.onAnnotationMouseDown();\n                    }\n                    else {\n                        this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n                        this.pdfViewer.annotation.onAnnotationMouseDown();\n                    }\n                    // eslint-disable-next-line max-len\n                    var commentElement = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n                    if (commentElement && commentElement.style.display === 'block') {\n                        // eslint-disable-next-line\n                        var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n                        if (accordionExpand) {\n                            accordionExpand.ej2_instances[0].expandItem(true);\n                        }\n                        // eslint-disable-next-line\n                        var commentsDiv = document.getElementById(id);\n                        if (commentsDiv) {\n                            if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                                commentsDiv.firstChild.click();\n                            }\n                        }\n                    }\n                }\n                else {\n                    this.selectAnnotationId = id;\n                    this.isAnnotationSelected = true;\n                    this.annotationPageIndex = pageIndex;\n                }\n            }\n        }\n    };\n    /**\n     * Clear the annotation selection.\n     *\n     * @returns void\n     */\n    Annotation.prototype.clearSelection = function () {\n        if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation();\n            this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);\n        }\n        else {\n            if (this.pdfViewer.selectedItems && this.pdfViewer.selectedItems.annotations[0]) {\n                // eslint-disable-next-line\n                var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                this.pdfViewer.clearSelection(currentAnnotation.pageIndex);\n            }\n            else {\n                this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getAnnotationTop = function (annotation) {\n        if (annotation.rect) {\n            if (annotation.rect.Top) {\n                return annotation.rect.Top;\n            }\n            else {\n                return annotation.rect.top;\n            }\n        }\n        else {\n            if (annotation.bounds[0].Top) {\n                return annotation.bounds[0].Top;\n            }\n            else {\n                return annotation.bounds[0].top;\n            }\n        }\n    };\n    /**\n      * @param annotation\n      */\n    // eslint-disable-next-line\n    Annotation.prototype.getAnnotationLeft = function (annotation) {\n        if (annotation.rect) {\n            if (annotation.rect.Left) {\n                return annotation.rect.Left;\n            }\n            else {\n                return annotation.rect.left;\n            }\n        }\n        else {\n            if (annotation.bounds[0].Left) {\n                return annotation.bounds[0].Left;\n            }\n            else {\n                return annotation.bounds[0].left;\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.selectAnnotationFromCodeBehind = function () {\n        if (this.isAnnotationSelected && this.selectAnnotationId) {\n            // eslint-disable-next-line\n            var annotation = this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId);\n            var id = this.selectAnnotationId;\n            var pageIndex = annotation.pageNumber;\n            var currentSelector = this.pdfViewer.annotationSelectorSettings;\n            if (annotation && (this.annotationPageIndex >= 0) && this.annotationPageIndex === pageIndex) {\n                if (this.previousIndex) {\n                    this.pdfViewer.clearSelection(this.previousIndex);\n                }\n                this.pdfViewer.clearSelection(pageIndex);\n                this.previousIndex = pageIndex;\n                if (annotation.shapeAnnotationType === 'textMarkup') {\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex, true);\n                    // eslint-disable-next-line max-len\n                    var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n                    // eslint-disable-next-line\n                    var textMarkupAnnotation = this.getTextMarkupAnnotations(pageIndex, annotation);\n                    if (textMarkupAnnotation) {\n                        this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n                        this.textMarkupAnnotationModule.isSelectedAnnotation = true;\n                        this.textMarkupAnnotationModule.showHideDropletDiv(true);\n                        this.textMarkupAnnotationModule.annotationClickPosition = null;\n                        this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation, canvas, pageIndex);\n                        this.textMarkupAnnotationModule.currentTextMarkupAnnotation = textMarkupAnnotation;\n                        this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = pageIndex;\n                        this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);\n                        this.textMarkupAnnotationModule.isSelectedAnnotation = false;\n                        if (this.pdfViewer.toolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                        }\n                    }\n                }\n                else if (annotation.shapeAnnotationType === 'stamp' || annotation.ShapeAnnotationType === 'stamp') {\n                    this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n                    this.pdfViewer.annotation.onAnnotationMouseDown();\n                }\n                else if (annotation.shapeAnnotationType === 'sticky' || annotation.ShapeAnnotationType === 'sticky') {\n                    this.pdfViewer.select([annotation.annotationId], currentSelector);\n                    this.pdfViewer.annotation.onAnnotationMouseDown();\n                }\n                else if (annotation.uniqueKey) {\n                    this.pdfViewer.select([annotation.uniqueKey], currentSelector);\n                    this.pdfViewer.annotation.onAnnotationMouseDown();\n                }\n                else {\n                    this.pdfViewer.select([annotation.annotationId], currentSelector);\n                    this.pdfViewer.annotation.onAnnotationMouseDown();\n                }\n                // eslint-disable-next-line max-len\n                var commentElement = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n                if (commentElement && commentElement.style.display === 'block') {\n                    // eslint-disable-next-line\n                    var accordionExpand = document.getElementById(this.pdfViewer.element.id + '_accordionContainer' + this.pdfViewer.currentPageNumber);\n                    if (accordionExpand) {\n                        accordionExpand.ej2_instances[0].expandItem(true);\n                    }\n                    // eslint-disable-next-line\n                    var commentsDiv = document.getElementById(id);\n                    if (commentsDiv) {\n                        if (!commentsDiv.classList.contains('e-pv-comments-border')) {\n                            commentsDiv.firstChild.click();\n                        }\n                    }\n                }\n            }\n            this.isAnnotationSelected = false;\n            this.selectAnnotationId = null;\n            this.annotationPageIndex = null;\n        }\n    };\n    /**\n     * @param pageIndex\n     * @private\n     */\n    Annotation.prototype.findRenderPageList = function (pageIndex) {\n        var isRender = false;\n        // eslint-disable-next-line\n        var pageList = this.pdfViewerBase.renderedPagesList;\n        if (pageList) {\n            for (var i = 0; i < pageList.length; i++) {\n                if (pageList[i] === pageIndex) {\n                    isRender = true;\n                    return isRender;\n                }\n            }\n        }\n        return isRender;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.getPageNumberFromAnnotationCollections = function (annotation) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.annotations;\n        if (annotation) {\n            if (annotation.shapeAnnotationType === 'textMarkup') {\n                return annotation.pageNumber;\n            }\n            else {\n                if (collections) {\n                    for (var i = 0; i < collections.length; i++) {\n                        if (collections[i].annotName === annotation.annotationId) {\n                            return collections[i].pageIndex;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.getAnnotationsFromAnnotationCollections = function (annotationId) {\n        // eslint-disable-next-line\n        var collections = this.pdfViewer.annotationCollection;\n        if (collections && annotationId) {\n            for (var i = 0; i < collections.length; i++) {\n                if (collections[i].annotationId === annotationId) {\n                    return collections[i];\n                }\n            }\n        }\n        if (this.pdfViewer.selectedItems.annotations.length === 0)\n            this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[annotationId]);\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.getTextMarkupAnnotations = function (pageIndex, annotation) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_textMarkup'];\n        }\n        if (storeObject) {\n            // eslint-disable-next-line\n            var annotObject = JSON.parse(storeObject);\n            var index = this.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                for (var i = 0; i < annotObject[index].annotations.length; i++) {\n                    if (annotObject[index].annotations[i].annotName === annotation.annotationId) {\n                        return annotObject[index].annotations[i];\n                    }\n                }\n                return null;\n            }\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @param type\n     * @param measureType\n     * @param type\n     * @param measureType\n     * @private\n     */\n    Annotation.prototype.getAnnotationType = function (type, measureType) {\n        var annotType;\n        if (measureType === '' || isNullOrUndefined(measureType)) {\n            switch (type) {\n                case 'Line':\n                    annotType = 'Line';\n                    break;\n                case 'LineWidthArrowHead':\n                    annotType = 'Arrow';\n                    break;\n                case 'Rectangle':\n                    annotType = 'Rectangle';\n                    break;\n                case 'Ellipse':\n                    annotType = 'Circle';\n                    break;\n                case 'Polygon':\n                    annotType = 'Polygon';\n                    break;\n                case 'Stamp':\n                    annotType = 'Stamp';\n                    break;\n                case 'Image':\n                    annotType = 'Image';\n                    break;\n                case 'FreeText':\n                    annotType = 'FreeText';\n                    break;\n                case 'Ink':\n                    annotType = 'Ink';\n                    break;\n                case 'StickyNotes':\n                    annotType = 'StickyNotes';\n                    break;\n            }\n        }\n        else {\n            switch (measureType) {\n                case 'Distance':\n                    annotType = 'Distance';\n                    break;\n                case 'Perimeter':\n                    annotType = 'Perimeter';\n                    break;\n                case 'Area':\n                    annotType = 'Area';\n                    break;\n                case 'Radius':\n                    annotType = 'Radius';\n                    break;\n                case 'Volume':\n                    annotType = 'Volume';\n                    break;\n            }\n        }\n        return annotType;\n    };\n    /**\n     * @param pageNumber\n     * @param annotationId\n     * @private\n     */\n    Annotation.prototype.getAnnotationIndex = function (pageNumber, annotationId) {\n        var pageAnnotationBases = this.pdfViewer.drawing.getPageObjects(pageNumber);\n        var index = null;\n        for (var i = 0; i < pageAnnotationBases.length; i++) {\n            if (pageAnnotationBases[i].id === annotationId) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.initializeCollection = function () {\n        this.actionCollection = [];\n        this.redoCollection = [];\n        this.pdfViewerBase.customStampCollection = [];\n        if (!this.popupNote) {\n            this.createNote();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.showCommentsPanel = function () {\n        if (this.pdfViewer.enableCommentPanel) {\n            var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n            if (commentPanel) {\n                if (commentPanel.style.display === 'none') {\n                    commentPanel.style.display = 'block';\n                    if (Browser.isDevice && !isBlazor()) {\n                        // eslint:disable-next-line\n                        var viewer = document.getElementById(this.pdfViewer.element.id + '_viewerMainContainer');\n                        // eslint:disable-next-line\n                        viewer.insertBefore(this.pdfViewerBase.navigationPane.commentPanelContainer, this.pdfViewer.toolbarModule.toolbarElement);\n                    }\n                    if (this.pdfViewerBase.navigationPane.commentPanelResizer) {\n                        this.pdfViewerBase.navigationPane.commentPanelResizer.style.display = 'block';\n                    }\n                    this.pdfViewerBase.navigationPane.setCommentPanelResizeIconTop();\n                    this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();\n                    var viewerContainer = document.getElementById(this.pdfViewer.element.id + '_viewerContainer');\n                    var pageContainer = document.getElementById(this.pdfViewer.element.id + '_pageViewContainer');\n                    if (viewerContainer) {\n                        if (this.pdfViewer.enableRtl) {\n                            viewerContainer.style.left = this.pdfViewerBase.navigationPane.getViewerContainerRight() + 'px';\n                        }\n                        else {\n                            viewerContainer.style.right = this.pdfViewerBase.navigationPane.getViewerContainerRight() + 'px';\n                        }\n                        // eslint-disable-next-line max-len\n                        viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - this.pdfViewerBase.navigationPane.getViewerContainerRight()) + 'px';\n                        pageContainer.style.width = (viewerContainer.offsetWidth - this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth()) + 'px';\n                    }\n                    this.pdfViewerBase.updateZoomValue();\n                    if (this.pdfViewer.annotation && this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                        this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);\n                    }\n                    if (Browser.isDevice && !isBlazor()) {\n                        commentPanel.style.height = this.pdfViewerBase.viewerMainContainer.clientHeight + 'px';\n                        if (this.pdfViewer.selectedItems.annotations.length > 0) {\n                            // eslint:disable-next-line\n                            var commentDiv = document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);\n                            if (commentDiv && commentDiv.lastElementChild.children[1] && commentDiv.lastElementChild.children[1].ej2_instances) {\n                                commentDiv.lastElementChild.children[1].ej2_instances[0].enableEditMode = true;\n                            }\n                            else if (commentDiv && commentDiv.lastElementChild.ej2_instances) {\n                                commentDiv.lastElementChild.ej2_instances[0].enableEditMode = true;\n                                commentDiv.lastElementChild.style.display = 'block';\n                                commentDiv.lastElementChild.children[1] ? commentDiv.lastElementChild.children[1].style.display = 'block' : null;\n                            }\n                        }\n                        if (this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar) {\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display = 'none';\n                            if (this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar) {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar.element.style.display = 'none';\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param index\n     * @param annotation\n     * @param actionString\n     * @param property\n     * @param node\n     * @param redo\n     * @param pageNumber\n     * @param index\n     * @param annotation\n     * @param actionString\n     * @param property\n     * @param node\n     * @param redo\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.addAction = function (\n    // eslint-disable-next-line\n    pageNumber, index, annotation, actionString, property, node, redo) {\n        var action = {\n            pageIndex: pageNumber, index: index, annotation: annotation,\n            action: actionString, modifiedProperty: property, undoElement: node, redoElement: redo\n        };\n        this.actionCollection.push(action);\n        this.updateToolbar();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.undo = function () {\n        var actionObject = this.actionCollection.pop();\n        if (actionObject) {\n            // eslint-disable-next-line\n            var shapeType = actionObject.annotation.shapeAnnotationType;\n            this.isUndoRedoAction = true;\n            this.isUndoAction = true;\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // eslint-disable-next-line max-len\n                        this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // eslint-disable-next-line max-len\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty, true);\n                    }\n                    break;\n                case 'Drag':\n                case 'Resize':\n                    if (isLineShapes(actionObject.annotation)) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, { bounds: actionObject.undoElement.bounds, vertexPoints: actionObject.undoElement.vertexPoints, leaderHeight: actionObject.undoElement.leaderHeight });\n                    }\n                    else {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, { bounds: actionObject.undoElement.bounds });\n                    }\n                    // eslint-disable-next-line max-len\n                    if (actionObject.annotation.measureType === 'Distance' || actionObject.annotation.measureType === 'Perimeter' || actionObject.annotation.measureType === 'Area' ||\n                        actionObject.annotation.measureType === 'Radius' || actionObject.annotation.measureType === 'Volume') {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, { notes: actionObject.undoElement.notes });\n                        this.updateCalibrateValues(actionObject.annotation);\n                    }\n                    if (actionObject.annotation.formFieldAnnotationType) {\n                        this.pdfViewer.formDesigner.updateHTMLElement(actionObject.annotation);\n                    }\n                    this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                    this.pdfViewer.select([actionObject.annotation.id]);\n                    // eslint-disable-next-line max-len\n                    if (actionObject.annotation.shapeAnnotationType === 'Line' || actionObject.annotation.shapeAnnotationType === 'Rectangle' || actionObject.annotation.shapeAnnotationType === 'Ellipse' || actionObject.annotation.shapeAnnotationType === 'Polygon' || actionObject.annotation.shapeAnnotationType === 'LineWidthArrowHead' ||\n                        actionObject.annotation.shapeAnnotationType === 'Radius' || actionObject.annotation.shapeAnnotationType === 'FreeText' || actionObject.annotation.shapeAnnotationType === 'HandWrittenSignature' || actionObject.annotation.shapeAnnotationType === 'SignatureText' || actionObject.annotation.shapeAnnotationType === 'SignatureImage' || actionObject.annotation.shapeAnnotationType === 'Ink') {\n                        this.modifyInCollections(actionObject.annotation, 'bounds');\n                    }\n                    break;\n                case 'Addition':\n                    if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n                        this.pdfViewer.formDesigner.deleteFormField(actionObject.undoElement.id, false);\n                    }\n                    else {\n                        var isAnnotationUpdate = false;\n                        // eslint-disable-next-line max-len\n                        if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n                            if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                                this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, 'shape');\n                            }\n                            else {\n                                this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, 'measure');\n                            }\n                            isAnnotationUpdate = true;\n                            // eslint-disable-next-line\n                            var annotationObject = actionObject.annotation;\n                            // eslint-disable-next-line\n                            var wrapper = annotationObject.wrapper ? annotationObject.wrapper : null;\n                            if (wrapper && wrapper.bounds) {\n                                actionObject.annotation.bounds = wrapper.bounds;\n                            }\n                            actionObject.duplicate = this.modifyInCollections(actionObject.annotation, 'delete');\n                        }\n                        if (shapeType === 'Stamp' || shapeType === 'Image') {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n                            // eslint-disable-next-line max-len\n                            this.stampAnnotationModule.updateSessionStorage(actionObject.annotation, null, 'delete');\n                            isAnnotationUpdate = true;\n                        }\n                        if (shapeType === 'FreeText' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureImage' || shapeType === 'SignatureText' || shapeType === 'Ink') {\n                            isAnnotationUpdate = true;\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n                            actionObject.duplicate = this.modifyInCollections(actionObject.annotation, 'delete');\n                        }\n                        if (!isAnnotationUpdate) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, actionObject.annotation.shapeAnnotationType, 'delete');\n                        }\n                        this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                        this.pdfViewer.remove(actionObject.annotation);\n                        this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n                        // eslint-disable-next-line\n                        var removeDiv = document.getElementById(actionObject.annotation.annotName);\n                        if (removeDiv) {\n                            if (removeDiv.parentElement.childElementCount === 1) {\n                                this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);\n                            }\n                            else {\n                                removeDiv.parentElement.removeChild(removeDiv);\n                            }\n                        }\n                        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                            var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n                            if (mobileAnnotationToolbar && mobileAnnotationToolbar.children.length > 0) {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated = false;\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n                            }\n                        }\n                    }\n                    break;\n                case 'Delete':\n                    if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n                        actionObject.undoElement.bounds.x = actionObject.undoElement.wrapper.bounds.x;\n                        actionObject.undoElement.bounds.y = actionObject.undoElement.wrapper.bounds.y;\n                        this.pdfViewer.formDesigner.drawFormField(actionObject.undoElement);\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n                            if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                                shapeType = 'shape';\n                                this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n                            }\n                            else {\n                                shapeType = 'shape_measure';\n                                this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n                            }\n                        }\n                        if (shapeType === 'Stamp' || shapeType === 'Image') {\n                            this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex, actionObject.annotation);\n                        }\n                        else if (shapeType === 'FreeText') {\n                            this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n                        }\n                        else if (shapeType === 'Ink') {\n                            this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.undoElement);\n                        }\n                        var addedAnnot = this.pdfViewer.add(actionObject.annotation);\n                        if ((shapeType === 'FreeText' || addedAnnot.enableShapeLabel) && addedAnnot) {\n                            this.pdfViewer.nodePropertyChange(addedAnnot, {});\n                        }\n                        var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n                        if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n                            formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[0]);\n                            if (actionObject.annotation.shapeAnnotationType === \"SignatureText\")\n                                formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[1]);\n                            var key = actionObject.annotation.id.split('_')[0] + '_content';\n                            var data = null;\n                            if (this.pdfViewer.formDesignerModule) {\n                                data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n                            }\n                            if (data) {\n                                var formFieldsData = JSON.parse(data);\n                                for (var i = 0; i < formFieldsData.length; i++) {\n                                    if (formFieldsData[i].Key === key) {\n                                        if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") {\n                                            formFieldsData[i].FormField.signatureType = \"Text\";\n                                            formFieldsData[i].FormField.value = actionObject.annotation.data;\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                                        }\n                                        else if (actionObject.annotation.shapeAnnotationType === \"SignatureImage\") {\n                                            formFieldsData[i].FormField.signatureType = \"Image\";\n                                            formFieldsData[i].FormField.value = actionObject.annotation.data;\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                                        }\n                                        else {\n                                            formFieldsData[i].FormField.signatureType = \"Path\";\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                                            var collectionData = processPathData(actionObject.annotation.data);\n                                            var csData = splitArrayCollection(collectionData);\n                                            formFieldsData[i].FormField.value = JSON.stringify(csData);\n                                            this.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                                        }\n                                    }\n                                }\n                                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n                            }\n                        }\n                        this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex, shapeType);\n                    }\n                    break;\n                case 'stampOpacity':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { opacity: actionObject.undoElement.opacity });\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                    break;\n                case 'Shape Stroke':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { strokeColor: actionObject.undoElement.strokeColor });\n                    this.modifyInCollections(actionObject.annotation, 'stroke');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Fill':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fillColor: actionObject.undoElement.fillColor });\n                    this.modifyInCollections(actionObject.annotation, 'fill');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Opacity':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { opacity: actionObject.undoElement.opacity });\n                    if (actionObject.annotation.shapeAnnotationType === 'StickyNotes') {\n                        this.stickyNotesAnnotationModule.updateOpacityValue(actionObject.annotation);\n                        this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                        actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                    }\n                    else {\n                        this.modifyInCollections(actionObject.annotation, 'opacity');\n                    }\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Thickness':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { thickness: actionObject.undoElement.thickness });\n                    this.modifyInCollections(actionObject.annotation, 'thickness');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Line properties change':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n                        // eslint-disable-next-line max-len\n                        fillColor: actionObject.undoElement.fillColor, borderDashArray: actionObject.undoElement.borderDashArray, borderStyle: actionObject.undoElement.borderStyle,\n                        // eslint-disable-next-line max-len\n                        strokeColor: actionObject.undoElement.strokeColor, opacity: actionObject.undoElement.opacity, thickness: actionObject.undoElement.thickness,\n                        sourceDecoraterShapes: this.getArrowType(actionObject.undoElement.lineHeadStart), taregetDecoraterShapes: this.getArrowType(actionObject.undoElement.lineHeadEnd)\n                    });\n                    this.updateCollectionForLineProperty(actionObject.annotation);\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Text Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    actionObject.annotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                    break;\n                case 'Comments Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    break;\n                case 'Status Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    break;\n                case 'Comments Reply Deleted':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    break;\n                case 'dynamicText Change':\n                    this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = true;\n                    actionObject.annotation.dynamicText = actionObject.undoElement.dynamicText;\n                    if (this.pdfViewer.selectedItems.annotations[0]) {\n                        this.pdfViewer.selectedItems.annotations[0].dynamicText = actionObject.undoElement.dynamicText;\n                    }\n                    // eslint-disable-next-line\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    this.modifyInCollections(actionObject.annotation, 'dynamicText');\n                    if (this.pdfViewer.selectedItems.annotations[0]) {\n                        this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], {});\n                    }\n                    else {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, {});\n                    }\n                    this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = false;\n                    this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                    break;\n                case 'fontColor':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fontColor: actionObject.undoElement.fontColor });\n                    this.modifyInCollections(actionObject.annotation, 'fontColor');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'fontSize':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fontSize: actionObject.undoElement.fontSize });\n                    this.modifyInCollections(actionObject.annotation, 'fontSize');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'fontFamily':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fontFamily: actionObject.undoElement.fontFamily });\n                    this.modifyInCollections(actionObject.annotation, 'fontFamily');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'textAlign':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { textAlign: actionObject.undoElement.textAlign });\n                    this.modifyInCollections(actionObject.annotation, 'textAlign');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'textPropertiesChange':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { font: actionObject.undoElement.font });\n                    this.modifyInCollections(actionObject.annotation, 'textPropertiesChange');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Rotate':\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation.annotations[0], { bounds: actionObject.undoElement.bounds, rotateAngle: actionObject.undoElement.rotateAngle });\n                    this.modifyInCollections(actionObject.annotation.annotations[0], 'bounds');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'FormDesigner Properties Change':\n                    if (actionObject.undoElement && actionObject.undoElement.isMultiline !== actionObject.redoElement.isMultiline) {\n                        this.undoRedoMultiline(actionObject.undoElement);\n                    }\n                    this.updateFormFieldPropertiesChanges(actionObject.undoElement.formFieldAnnotationType, actionObject.undoElement);\n                    break;\n                case 'FormField Value Change':\n                    if (actionObject.annotation.formFieldAnnotationType) {\n                        if (actionObject.annotation.formFieldAnnotationType == \"RadioButton\") {\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.undoElement, false);\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.redoElement, true);\n                        }\n                        else {\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.annotation, actionObject.undoElement);\n                        }\n                    }\n                    else {\n                        var spanElement = document.getElementById(actionObject.annotation.id + \"_html_element\").children[0].children[0];\n                        spanElement.className = 'e-pdfviewer-signatureformfields';\n                        var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n                        var annotationObj = this.pdfViewer.nameTable[actionObject.annotation.id];\n                        formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotationObj.wrapper.children[0]), 1);\n                        if (actionObject.annotation.shapeAnnotationType === \"SignatureText\")\n                            formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotationObj.wrapper.children[1]), 1);\n                        var key = actionObject.annotation.id.split('_')[0] + '_content';\n                        var data = null;\n                        if (this.pdfViewer.formDesignerModule) {\n                            data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n                        }\n                        if (data) {\n                            var formFieldsData = JSON.parse(data);\n                            for (var i = 0; i < formFieldsData.length; i++) {\n                                if (formFieldsData[i].Key === key) {\n                                    formFieldsData[i].FormField.value = '';\n                                    formFieldsData[i].FormField.signatureType = '';\n                                    this.pdfViewerBase.formFieldCollection[i].FormField.value = '';\n                                    this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = '';\n                                }\n                            }\n                            this.pdfViewer.remove(actionObject.annotation);\n                            this.pdfViewer.renderDrawing();\n                            this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n                        }\n                    }\n            }\n            this.redoCollection.push(actionObject);\n            this.updateToolbar();\n            this.isUndoRedoAction = false;\n            this.isUndoAction = false;\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.redo = function () {\n        var actionObject = this.redoCollection.pop();\n        if (actionObject) {\n            // eslint-disable-next-line\n            var shapeType = actionObject.annotation.shapeAnnotationType;\n            this.isUndoRedoAction = true;\n            switch (actionObject.action) {\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // eslint-disable-next-line max-len\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // eslint-disable-next-line max-len\n                        this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Drag':\n                case 'Resize':\n                    if (isLineShapes(actionObject.annotation)) {\n                        this.pdfViewer.nodePropertyChange(\n                        // eslint-disable-next-line max-len\n                        actionObject.annotation, { bounds: actionObject.redoElement.bounds, vertexPoints: actionObject.redoElement.vertexPoints, leaderHeight: actionObject.redoElement.leaderHeight });\n                    }\n                    else {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, { bounds: actionObject.redoElement.bounds });\n                    }\n                    // eslint-disable-next-line max-len\n                    if (actionObject.annotation.measureType === 'Distance' || actionObject.annotation.measureType === 'Perimeter' || actionObject.annotation.measureType === 'Area' ||\n                        actionObject.annotation.measureType === 'Radius' || actionObject.annotation.measureType === 'Volume') {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, { notes: actionObject.redoElement.notes });\n                        this.updateCalibrateValues(actionObject.annotation);\n                    }\n                    if (actionObject.annotation.formFieldAnnotationType) {\n                        this.pdfViewer.formDesigner.updateHTMLElement(actionObject.annotation);\n                    }\n                    this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                    this.pdfViewer.select([actionObject.annotation.id]);\n                    // eslint-disable-next-line max-len\n                    if (actionObject.annotation.shapeAnnotationType === 'Line' || actionObject.annotation.shapeAnnotationType === 'Rectangle' || actionObject.annotation.shapeAnnotationType === 'Ellipse' || actionObject.annotation.shapeAnnotationType === 'Polygon' || actionObject.annotation.shapeAnnotationType === 'LineWidthArrowHead'\n                        || actionObject.annotation.shapeAnnotationType === 'Radius' || actionObject.annotation.shapeAnnotationType === 'FreeText' || actionObject.annotation.shapeAnnotationType === 'HandWrittenSignature' || actionObject.annotation.shapeAnnotationType === 'SignatureText' || actionObject.annotation.shapeAnnotationType === 'SignatureImage' || actionObject.annotation.shapeAnnotationType === 'Ink') {\n                        this.modifyInCollections(actionObject.annotation, 'bounds');\n                    }\n                    break;\n                case 'Addition':\n                    if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n                        actionObject.redoElement.bounds.x = actionObject.redoElement.wrapper.bounds.x;\n                        actionObject.redoElement.bounds.y = actionObject.redoElement.wrapper.bounds.y;\n                        this.pdfViewer.formDesigner.drawFormField(actionObject.redoElement);\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n                            if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                                shapeType = 'shape';\n                                this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n                            }\n                            else {\n                                shapeType = 'shape_measure';\n                                this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n                            }\n                        }\n                        if (shapeType === 'FreeText') {\n                            this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n                        }\n                        if (shapeType === 'Stamp') {\n                            this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex, actionObject.redoElement);\n                        }\n                        if (shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n                            this.pdfViewerBase.signatureModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n                        }\n                        if (shapeType === 'Ink') {\n                            this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex, actionObject.duplicate);\n                        }\n                        var addedAnnot = this.pdfViewer.add(actionObject.annotation);\n                        this.pdfViewer.select([actionObject.annotation.id]);\n                        if ((shapeType === 'FreeText' || addedAnnot.enableShapeLabel) && addedAnnot) {\n                            this.pdfViewer.nodePropertyChange(addedAnnot, {});\n                        }\n                        this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex, shapeType);\n                        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                            var mobileAnnotationToolbar = document.getElementById(this.pdfViewer.element.id + '_propertyToolbar');\n                            if (mobileAnnotationToolbar && mobileAnnotationToolbar.children.length > 0) {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated = false;\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n                            }\n                        }\n                    }\n                    break;\n                case 'Delete':\n                    if (this.pdfViewer.formDesigner && actionObject.annotation.formFieldAnnotationType) {\n                        this.pdfViewer.formDesigner.deleteFormField(actionObject.redoElement.id, false);\n                    }\n                    else {\n                        var isUpdate = false;\n                        var sType = actionObject.annotation.shapeAnnotationType;\n                        // eslint-disable-next-line max-len\n                        if (shapeType === 'Line' || shapeType === 'LineWidthArrowHead' || shapeType === 'Polygon' || shapeType === 'Ellipse' || shapeType === 'Rectangle' || shapeType === 'Radius' || shapeType === 'Distance') {\n                            if (actionObject.annotation.measureType === '' || isNullOrUndefined(actionObject.annotation.measureType)) {\n                                sType = 'shape';\n                            }\n                            else {\n                                sType = 'measure';\n                            }\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n                            this.modifyInCollections(actionObject.annotation, 'delete');\n                            isUpdate = true;\n                        }\n                        if (shapeType === 'Stamp') {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n                            this.stampAnnotationModule.updateSessionStorage(actionObject.annotation, null, 'delete');\n                            isUpdate = true;\n                        }\n                        if (shapeType === 'FreeText' || shapeType === 'HandWrittenSignature' || shapeType === 'SignatureText' || shapeType === 'SignatureImage') {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n                            this.modifyInCollections(actionObject.annotation, 'delete');\n                        }\n                        if (!isUpdate) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation, sType, 'delete');\n                        }\n                        var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n                        if (formFieldObj != null && (formFieldObj.formFieldAnnotationType === 'SignatureField' || formFieldObj.formFieldAnnotationType === 'InitialField')) {\n                            formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[0]), 1);\n                            if (actionObject.annotation.shapeAnnotationType === \"SignatureText\")\n                                formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[1]), 1);\n                            var key = actionObject.annotation.id.split('_')[0] + '_content';\n                            var data = null;\n                            if (this.pdfViewer.formDesignerModule) {\n                                data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n                            }\n                            if (data) {\n                                var formFieldsData = JSON.parse(data);\n                                for (var i = 0; i < formFieldsData.length; i++) {\n                                    if (formFieldsData[i].Key === key) {\n                                        formFieldsData[i].FormField.value = '';\n                                        formFieldsData[i].FormField.signatureType = '';\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.value = '';\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = '';\n                                    }\n                                }\n                                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n                            }\n                        }\n                        this.pdfViewer.clearSelection(actionObject.annotation.pageIndex);\n                        this.pdfViewer.remove(actionObject.annotation);\n                        this.pdfViewer.renderDrawing(null, actionObject.annotation.pageIndex);\n                        // eslint-disable-next-line\n                        var removeDiv = document.getElementById(actionObject.annotation.annotName);\n                        if (removeDiv) {\n                            if (removeDiv.parentElement.childElementCount === 1) {\n                                this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);\n                            }\n                            else {\n                                removeDiv.remove();\n                            }\n                        }\n                    }\n                    break;\n                case 'stampOpacity':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { opacity: actionObject.redoElement.opacity });\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    break;\n                case 'Shape Stroke':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { strokeColor: actionObject.redoElement.strokeColor });\n                    this.modifyInCollections(actionObject.annotation, 'stroke');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Fill':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fillColor: actionObject.redoElement.fillColor });\n                    this.modifyInCollections(actionObject.annotation, 'fill');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Opacity':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { opacity: actionObject.redoElement.opacity });\n                    if (actionObject.annotation.shapeAnnotationType === 'StickyNotes') {\n                        this.stickyNotesAnnotationModule.updateOpacityValue(actionObject.annotation);\n                        this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    }\n                    else {\n                        this.modifyInCollections(actionObject.annotation, 'opacity');\n                    }\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Shape Thickness':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { thickness: actionObject.redoElement.thickness });\n                    this.modifyInCollections(actionObject.annotation, 'thickness');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Line properties change':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, {\n                        // eslint-disable-next-line max-len\n                        fillColor: actionObject.redoElement.fillColor, strokeColor: actionObject.redoElement.strokeColor, opacity: actionObject.redoElement.opacity, thickness: actionObject.redoElement.thickness,\n                        sourceDecoraterShapes: this.getArrowType(actionObject.redoElement.lineHeadStart), taregetDecoraterShapes: this.getArrowType(actionObject.redoElement.lineHeadEnd),\n                        borderDashArray: actionObject.redoElement.borderDashArray, borderStyle: actionObject.redoElement.borderStyle\n                    });\n                    this.updateCollectionForLineProperty(actionObject.annotation);\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Text Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    break;\n                case 'Comments Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    break;\n                case 'Status Property Added':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action);\n                    break;\n                case 'Comments Reply Deleted':\n                    // eslint-disable-next-line max-len\n                    actionObject.annotation = this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action);\n                    break;\n                case 'dynamicText Change':\n                    this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = true;\n                    actionObject.annotation.dynamicText = actionObject.redoElement.dynamicText;\n                    // eslint-disable-next-line\n                    var annotation = this.pdfViewer.selectedItems.annotations[0];\n                    if (annotation) {\n                        annotation.dynamicText = actionObject.redoElement.dynamicText;\n                        annotation.bounds.height = actionObject.redoElement.bounds.height;\n                    }\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation, actionObject.action, actionObject.undoElement);\n                    this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation, null, true);\n                    this.modifyInCollections(actionObject.annotation, 'dynamicText');\n                    if (annotation) {\n                        this.pdfViewer.nodePropertyChange(annotation, {});\n                    }\n                    else {\n                        this.pdfViewer.nodePropertyChange(actionObject.annotation, {});\n                    }\n                    this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange = false;\n                    this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                    this.pdfViewer.select([actionObject.annotation.id]);\n                    break;\n                case 'fontColor':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fontColor: actionObject.redoElement.fontColor });\n                    this.modifyInCollections(actionObject.annotation, 'fontColor');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'fontSize':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { fontSize: actionObject.redoElement.fontSize });\n                    this.modifyInCollections(actionObject.annotation, 'fontSize');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'textAlign':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { textAlign: actionObject.redoElement.textAlign });\n                    this.modifyInCollections(actionObject.annotation, 'textAlign');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'textPropertiesChange':\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation, { font: actionObject.redoElement.font });\n                    this.modifyInCollections(actionObject.annotation, 'textPropertiesChange');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'Rotate':\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.nodePropertyChange(actionObject.annotation.annotations[0], { bounds: actionObject.redoElement.bounds, rotateAngle: actionObject.redoElement.rotateAngle });\n                    this.modifyInCollections(actionObject.annotation.annotations[0], 'bounds');\n                    this.pdfViewer.renderDrawing();\n                    break;\n                case 'FormDesigner Properties Change':\n                    if (actionObject.redoElement && actionObject.undoElement.isMultiline !== actionObject.redoElement.isMultiline) {\n                        this.undoRedoMultiline(actionObject.redoElement);\n                    }\n                    this.updateFormFieldPropertiesChanges(actionObject.redoElement.formFieldAnnotationType, actionObject.redoElement);\n                    break;\n                case 'FormField Value Change':\n                    if (actionObject.annotation.formFieldAnnotationType) {\n                        if (actionObject.annotation.formFieldAnnotationType == \"RadioButton\") {\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.undoElement, true);\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.redoElement, false);\n                        }\n                        else {\n                            this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType, actionObject.annotation, actionObject.redoElement);\n                        }\n                    }\n                    else {\n                        var spanElement = document.getElementById(actionObject.annotation.id + \"_html_element\").children[0].children[0];\n                        spanElement.className = 'e-pdfviewer-signatureformfields-signature';\n                        var formFieldObj = this.pdfViewer.nameTable[actionObject.annotation.id.split(\"_\")[0]];\n                        var annotationObj = this.pdfViewer.nameTable[actionObject.annotation.id];\n                        formFieldObj.wrapper.children.push(annotationObj.wrapper.children[0]);\n                        if (actionObject.annotation.shapeAnnotationType === \"SignatureText\")\n                            formFieldObj.wrapper.children.push(annotationObj.wrapper.children[1]);\n                        var key = actionObject.annotation.id.split('_')[0] + '_content';\n                        var data = null;\n                        if (this.pdfViewer.formDesignerModule) {\n                            data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n                        }\n                        if (data) {\n                            var formFieldsData = JSON.parse(data);\n                            for (var i = 0; i < formFieldsData.length; i++) {\n                                if (formFieldsData[i].Key === key) {\n                                    if (actionObject.annotation.shapeAnnotationType === \"SignatureText\") {\n                                        formFieldsData[i].FormField.signatureType = \"Text\";\n                                        formFieldsData[i].FormField.value = actionObject.annotation.data;\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                                    }\n                                    else if (actionObject.annotation.shapeAnnotationType === \"SignatureImage\") {\n                                        formFieldsData[i].FormField.signatureType = \"Image\";\n                                        formFieldsData[i].FormField.value = actionObject.annotation.data;\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.value = actionObject.annotation.data;\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                                    }\n                                    else {\n                                        formFieldsData[i].FormField.signatureType = \"Path\";\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                                        var collectionData = processPathData(actionObject.annotation.data);\n                                        var csData = splitArrayCollection(collectionData);\n                                        formFieldsData[i].FormField.value = JSON.stringify(csData);\n                                        this.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                                    }\n                                }\n                            }\n                            this.pdfViewer.add(actionObject.annotation);\n                            var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + actionObject.pageIndex);\n                            this.pdfViewer.renderDrawing(canvass, actionObject.pageIndex);\n                            this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n                        }\n                    }\n            }\n            if (actionObject.redoElement && actionObject.redoElement.modifiedDate !== undefined) {\n                actionObject.annotation.modifiedDate = actionObject.redoElement.modifiedDate;\n            }\n            this.actionCollection.push(actionObject);\n            this.updateToolbar();\n            this.isUndoRedoAction = false;\n        }\n    };\n    Annotation.prototype.undoRedoMultiline = function (element) {\n        if (element.isMultiline && element.formFieldAnnotationType === 'Textbox') {\n            this.pdfViewer.formDesignerModule.renderMultilineText(element, true);\n        }\n        else if (element.formFieldAnnotationType === 'Textbox') {\n            this.pdfViewer.formDesignerModule.renderTextbox(element, true);\n        }\n    };\n    Annotation.prototype.updateFormFieldValueChange = function (formFieldAnnotationType, annotation, value) {\n        if (annotation) {\n            var formFieldModel = this.pdfViewer.formDesigner.getFormField(annotation.id.split(\"_\")[0]);\n            var data = null;\n            if (this.pdfViewer.formDesignerModule) {\n                data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n            }\n            if (data) {\n                var formFieldsData = JSON.parse(data);\n                var index = this.pdfViewer.formDesigner.getFormFiledIndex(annotation.id.split('_')[0]);\n                switch (formFieldAnnotationType) {\n                    case 'Textbox':\n                    case 'PasswordField':\n                    case 'RadioButton':\n                    case 'DropdownList':\n                    case 'ListBox':\n                        var inputElement = document.getElementById(annotation.id.split(\"_\")[0] + \"_content_html_element\").firstElementChild.firstElementChild;\n                        if (formFieldAnnotationType == 'Textbox' || formFieldAnnotationType == 'PasswordField') {\n                            formFieldModel.value = value;\n                            this.pdfViewer.formDesigner.updateValuePropertyChange(formFieldModel, inputElement, true, index, formFieldsData);\n                        }\n                        else if (formFieldAnnotationType == 'RadioButton') {\n                            formFieldModel.isSelected = value;\n                            this.pdfViewer.formDesigner.updateIsSelectedPropertyChange(formFieldModel, inputElement.firstElementChild, true, index, formFieldsData);\n                        }\n                        else if (formFieldAnnotationType == 'DropdownList' || formFieldAnnotationType == 'ListBox') {\n                            formFieldModel.selectedIndex = value;\n                            formFieldsData[index].FormField.selectedIndex = value;\n                            this.pdfViewerBase.formFieldCollection[index].FormField.selectedIndex = value;\n                            this.pdfViewer.nameTable[formFieldsData[index].Key.split(\"_\")[0]].selectedIndex = value;\n                            if (formFieldAnnotationType == 'ListBox') {\n                                for (var k = 0; k < inputElement.options.length; k++) {\n                                    inputElement.options[k].selected = value.includes(k) ? true : false;\n                                }\n                            }\n                            else {\n                                inputElement.selectedIndex = value;\n                            }\n                        }\n                        break;\n                    case 'Checkbox':\n                        var checkboxDivElement = document.getElementById(annotation.id.split(\"_\")[0] + \"_content_html_element\").firstElementChild.firstElementChild.lastElementChild;\n                        formFieldModel.isChecked = value;\n                        this.pdfViewer.formDesigner.updateIsCheckedPropertyChange(formFieldModel, checkboxDivElement, true, index, formFieldsData);\n                        break;\n                }\n                this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection, '_formDesigner');\n            }\n        }\n    };\n    Annotation.prototype.updateFormFieldPropertiesChanges = function (formFieldAnnotationType, element) {\n        switch (formFieldAnnotationType) {\n            case 'Textbox':\n            case 'PasswordField':\n                this.pdfViewer.formDesigner.updateTextboxFormDesignerProperties(element, true);\n                break;\n            case 'Checkbox':\n                this.pdfViewer.formDesigner.updateCheckboxFormDesignerProperties(element, true);\n                break;\n            case 'RadioButton':\n                this.pdfViewer.formDesigner.updateRadioButtonDesignerProperties(element, true);\n                break;\n            case 'DropdownList':\n                this.pdfViewer.formDesigner.updateDropdownFormDesignerProperties(element, true);\n                break;\n            case 'ListBox':\n                this.pdfViewer.formDesigner.updateListBoxFormDesignerProperties(element, true);\n                break;\n            case 'SignatureField':\n            case 'InitialField':\n                this.pdfViewer.formDesigner.updateSignatureTextboxProperties(element, true);\n        }\n    };\n    Annotation.prototype.updateCollectionForLineProperty = function (pdfAnnotationBase) {\n        this.modifyInCollections(pdfAnnotationBase, 'fill');\n        this.modifyInCollections(pdfAnnotationBase, 'stroke');\n        this.modifyInCollections(pdfAnnotationBase, 'opacity');\n        this.modifyInCollections(pdfAnnotationBase, 'thickness');\n        this.modifyInCollections(pdfAnnotationBase, 'dashArray');\n        this.modifyInCollections(pdfAnnotationBase, 'startArrow');\n        this.modifyInCollections(pdfAnnotationBase, 'endArrow');\n    };\n    Annotation.prototype.updateToolbar = function (isAnnotationDelete) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateUndoRedoButtons();\n        }\n        if (this.actionCollection && this.actionCollection.length == 0) {\n            this.pdfViewerBase.updateDocumentEditedProperty(false);\n        }\n        else {\n            this.pdfViewerBase.updateDocumentEditedProperty(true);\n        }\n        if (isAnnotationDelete) {\n            //This below lines are commented for the below task -EJ2-61754-IsDocumentEdited API is not Properly working for delete annotations\n            //Also refer EJ2-55205-The isDocumentEdited property is False on adding handwritten signature\n            // let isEdited: boolean = false;\n            // if (this.pdfViewer.annotationCollection && this.pdfViewer.annotationCollection.length > 0 && this.pdfViewer.signatureCollection && this.pdfViewer.signatureCollection.length > 0) {\n            //     isEdited = true;\n            // }\n            // if (!isEdited && this.pdfViewer.isDocumentEdited) {\n            this.pdfViewerBase.updateDocumentEditedProperty(true);\n            // }\n        }\n    };\n    Annotation.prototype.createNote = function () {\n        // eslint-disable-next-line max-len\n        this.popupNote = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note', className: 'e-pv-annotation-note', styles: 'display:none' });\n        this.popupNoteAuthor = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_author', className: 'e-pv-annotation-note-author' });\n        this.popupNote.appendChild(this.popupNoteAuthor);\n        // eslint-disable-next-line max-len\n        this.popupNoteContent = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_content', className: 'e-pv-annotation-note-content' });\n        this.popupNote.appendChild(this.popupNoteContent);\n        this.pdfViewerBase.mainContainer.appendChild(this.popupNote);\n    };\n    /**\n     * @param event\n     * @param color\n     * @param author\n     * @param note\n     * @param type\n     * @param event\n     * @param color\n     * @param author\n     * @param note\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.showPopupNote = function (event, color, author, note, type) {\n        var mainContainerPosition = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n        var popupNoteClientRect = this.popupNote.getBoundingClientRect();\n        if (author) {\n            this.popupNoteAuthor.textContent = author;\n        }\n        this.popupNoteContent.textContent = note;\n        if (type === 'Highlight') {\n            this.popupNote.style.backgroundColor = 'rgb(237, 232, 177)';\n        }\n        else if (type === 'Underline') {\n            this.popupNote.style.backgroundColor = 'rgb(187, 241, 191)';\n        }\n        else if (type === 'Strikethrough') {\n            this.popupNote.style.backgroundColor = 'rgb(242, 188, 207)';\n        }\n        this.popupNote.style.display = 'block';\n        var topPosition = (event.pageY - mainContainerPosition.top + 5);\n        var leftPosition = (event.pageX - mainContainerPosition.left + 5);\n        if (leftPosition + popupNoteClientRect.width > mainContainerPosition.width) {\n            leftPosition = leftPosition - popupNoteClientRect.width;\n        }\n        if (topPosition + popupNoteClientRect.height > mainContainerPosition.height) {\n            topPosition = topPosition - popupNoteClientRect.height;\n        }\n        this.popupNote.style.top = topPosition + 'px';\n        this.popupNote.style.left = leftPosition + 'px';\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.hidePopupNote = function () {\n        if (this.popupNote) {\n            this.popupNote.style.display = 'none';\n        }\n    };\n    Annotation.prototype.createTextMarkupPopup = function () {\n        var _this = this;\n        var elementId = this.pdfViewer.element.id;\n        // eslint-disable-next-line max-len\n        this.popupElement = createElement('div', { id: elementId + '_popup_annotation_note', className: 'e-pv-annotation-popup-menu', styles: 'display:none' });\n        var headerElement = createElement('div', { id: elementId + '_popup_header', className: 'e-pv-annotation-popup-header' });\n        // eslint-disable-next-line max-len\n        this.authorPopupElement = createElement('div', { id: elementId + '_popup_author', className: 'e-pv-annotation-popup-author' });\n        headerElement.appendChild(this.authorPopupElement);\n        // eslint-disable-next-line max-len\n        var closeBtn = createElement('span', { id: elementId + '_popup_close', className: 'e-pv-annotation-popup-close e-pv-icon' });\n        headerElement.appendChild(closeBtn);\n        this.popupElement.appendChild(headerElement);\n        // eslint-disable-next-line max-len\n        this.modifiedDateElement = createElement('div', { id: elementId + '_popup_modified_time', className: 'e-pv-annotation-modified-time' });\n        this.popupElement.appendChild(this.modifiedDateElement);\n        // eslint-disable-next-line max-len\n        var contentContainer = createElement('div', { id: elementId + '_popup_content_container', className: 'e-pv-annotation-popup-note-container' });\n        this.noteContentElement = createElement('div', { id: elementId + '_popup_content', className: 'e-pv-annotation-popup-content' });\n        this.noteContentElement.contentEditable = 'true';\n        contentContainer.appendChild(this.noteContentElement);\n        this.popupElement.appendChild(contentContainer);\n        this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);\n        closeBtn.addEventListener('click', this.saveClosePopupMenu.bind(this));\n        closeBtn.addEventListener('touchend', this.saveClosePopupMenu.bind(this));\n        this.popupElement.addEventListener('mousedown', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('mousemove', this.onPopupElementMove.bind(this));\n        window.addEventListener('mouseup', this.onPopupElementMoveEnd.bind(this));\n        this.popupElement.addEventListener('touchstart', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('touchmove', this.onPopupElementMove.bind(this));\n        window.addEventListener('touchend', this.onPopupElementMoveEnd.bind(this));\n        this.noteContentElement.addEventListener('mousedown', function () {\n            _this.noteContentElement.focus();\n        });\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.onPopupElementMoveStart = function (event) {\n        if (event.type === 'touchstart') {\n            event = event.changedTouches[0];\n        }\n        if ((event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            this.isPopupMenuMoved = true;\n            var popupElementClientRect = this.popupElement.getBoundingClientRect();\n            this.clientX = event.clientX - popupElementClientRect.left;\n            // eslint-disable-next-line max-len\n            this.clientY = (event.clientY - popupElementClientRect.top) + (this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top * this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.onPopupElementMove = function (event) {\n        if (event.type === 'touchmove') {\n            event = event.changedTouches[0];\n        }\n        // eslint-disable-next-line max-len\n        if (this.isPopupMenuMoved && (event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            var left = (event.clientX - this.clientX) + parseFloat(this.popupElement.style.left);\n            var top_1 = ((event.clientY - this.clientY) + parseFloat(this.popupElement.style.top));\n            this.clientX = event.clientX;\n            this.clientY = event.clientY;\n            var clientPosition = this.popupElement.getBoundingClientRect();\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n            // eslint-disable-next-line max-len\n            if (left > parseFloat(pageDiv.style.left) && (left + clientPosition.width) < (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                this.popupElement.style.left = (left) + 'px';\n            }\n            else {\n                this.popupElement.style.left = parseFloat(this.popupElement.style.left) + 'px';\n            }\n            // eslint-disable-next-line max-len\n            if (top_1 > parseFloat(pageDiv.style.top) && (top_1 + clientPosition.height) < (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                this.popupElement.style.top = (top_1) + 'px';\n            }\n            else {\n                this.popupElement.style.top = parseFloat(this.popupElement.style.top) + 'px';\n            }\n        }\n    };\n    Annotation.prototype.onPopupElementMoveEnd = function () {\n        this.isPopupMenuMoved = false;\n    };\n    Annotation.prototype.saveClosePopupMenu = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber, this.noteContentElement.innerText);\n        }\n        this.closePopupMenu();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.closePopupMenu = function () {\n        if (this.popupElement) {\n            this.popupElement.parentElement.removeChild(this.popupElement);\n            this.popupElement = null;\n            this.isPopupNoteVisible = false;\n        }\n    };\n    /**\n     * @param event\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.showAnnotationPopup = function (event) {\n        if (this.textMarkupAnnotationModule) {\n            this.currentAnnotPageNumber = this.getEventPageNumber(event);\n            // eslint-disable-next-line max-len\n            if (this.textMarkupAnnotationModule && (event.target !== (this.noteContentElement) || (event.target.contains(this.noteContentElement.childNodes[0])))) {\n                this.hidePopupNote();\n                if (!this.popupElement) {\n                    this.createTextMarkupPopup();\n                    this.popupElement.style.display = 'block';\n                    this.authorPopupElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;\n                    // eslint-disable-next-line max-len\n                    this.modifiedDateElement.textContent = this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);\n                    this.noteContentElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;\n                    var clientPosition = this.popupElement.getBoundingClientRect();\n                    // eslint-disable-next-line max-len\n                    var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n                    var canvasPosition = pageDiv.getBoundingClientRect();\n                    var topPosition = ((event.clientY) - canvasPosition.top) + parseFloat(pageDiv.style.top);\n                    var leftPosition = (event.clientX);\n                    if ((leftPosition + clientPosition.width) > (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                        this.popupElement.style.left = (leftPosition - clientPosition.width) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.left = leftPosition + 'px';\n                    }\n                    if ((topPosition + clientPosition.height) > (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                        this.popupElement.style.top = (topPosition - clientPosition.height) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.top = topPosition + 'px';\n                    }\n                    this.isPopupNoteVisible = true;\n                }\n            }\n        }\n    };\n    /**\n     * @param args\n     * @param isOpacity\n     * @param args\n     * @param isOpacity\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.modifyOpacity = function (args, isOpacity) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        var opacityValue = 1;\n        if (isOpacity) {\n            opacityValue = args / 100;\n        }\n        else {\n            opacityValue = args.value / 100;\n        }\n        if (currentAnnotation.opacity !== opacityValue) {\n            redoClonedObject.opacity = opacityValue;\n            this.pdfViewer.nodePropertyChange(currentAnnotation, { opacity: opacityValue });\n            if (currentAnnotation.shapeAnnotationType === 'StickyNotes') {\n                this.stickyNotesAnnotationModule.updateOpacityValue(currentAnnotation);\n            }\n            else {\n                this.modifyInCollections(currentAnnotation, 'opacity');\n            }\n            if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureImage' || currentAnnotation.shapeAnnotationType === 'SignatureText') {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, true, false, clonedObject.opacity, redoClonedObject.opacity);\n            }\n            else {\n                this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Opacity', '', clonedObject, redoClonedObject);\n            this.pdfViewer.renderDrawing();\n        }\n    };\n    /**\n     * @param currentColor\n     * @private\n     */\n    Annotation.prototype.modifyFontColor = function (currentColor) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.fontColor = currentColor;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { fontColor: currentColor });\n        this.modifyInCollections(currentAnnotation, 'fontColor');\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontColor', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param currentValue\n     * @private\n     */\n    Annotation.prototype.modifyFontFamily = function (currentValue) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.fontFamily = currentValue;\n        if (this.pdfViewer.freeTextSettings.enableAutoFit) {\n            this.updateFontFamilyRenderSize(currentAnnotation, currentValue);\n        }\n        else {\n            this.pdfViewer.nodePropertyChange(currentAnnotation, { fontFamily: currentValue });\n        }\n        this.modifyInCollections(currentAnnotation, 'fontFamily');\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontFamily', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param currentValue\n     * @private\n     */\n    Annotation.prototype.modifyFontSize = function (currentValue) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.fontSize = currentValue;\n        var freeTextAnnotation = this.freeTextAnnotationModule;\n        var x = currentAnnotation.bounds.x;\n        var y = currentAnnotation.bounds.y;\n        currentAnnotation.fontSize = currentValue;\n        if (freeTextAnnotation && !freeTextAnnotation.isNewFreeTextAnnot && currentAnnotation.dynamicText !== '') {\n            freeTextAnnotation.addInuptElemet({ x: x, y: y }, currentAnnotation);\n            if (currentAnnotation) {\n                if (currentAnnotation.previousFontSize > currentValue) {\n                    freeTextAnnotation.inputBoxElement.style.height = 'auto';\n                    freeTextAnnotation.inputBoxElement.style.height = freeTextAnnotation.inputBoxElement.scrollHeight + 5 + 'px';\n                }\n                var inputEleHeight = parseFloat(freeTextAnnotation.inputBoxElement.style.height);\n                var inputEleWidth = parseFloat(freeTextAnnotation.inputBoxElement.style.width);\n                var zoomFactor = this.pdfViewerBase.getZoomFactor();\n                inputEleWidth = ((inputEleWidth) / zoomFactor);\n                inputEleHeight = ((inputEleHeight) / zoomFactor);\n                var heightDiff = (inputEleHeight - currentAnnotation.bounds.height);\n                var y_1 = undefined;\n                if (heightDiff > 0) {\n                    y_1 = currentAnnotation.wrapper.offsetY + (heightDiff / 2);\n                    y_1 = y_1 > 0 ? y_1 : undefined;\n                }\n                else {\n                    heightDiff = Math.abs(heightDiff);\n                    y_1 = currentAnnotation.wrapper.offsetY - (heightDiff / 2);\n                    y_1 = y_1 > 0 ? y_1 : undefined;\n                }\n                var widthDiff = (inputEleWidth - currentAnnotation.bounds.width);\n                var x_1 = undefined;\n                if (widthDiff > 0) {\n                    x_1 = currentAnnotation.wrapper.offsetX + (widthDiff / 2);\n                    x_1 = x_1 > 0 ? x_1 : undefined;\n                }\n                else {\n                    widthDiff = Math.abs(widthDiff);\n                    x_1 = currentAnnotation.wrapper.offsetX - (widthDiff / 2);\n                }\n                currentAnnotation.bounds.width = inputEleWidth;\n                currentAnnotation.bounds.height = inputEleHeight;\n                // eslint-disable-next-line max-len\n                this.pdfViewer.nodePropertyChange(currentAnnotation, { fontSize: currentValue, bounds: { width: currentAnnotation.bounds.width, height: currentAnnotation.bounds.height, y: y_1, x: x_1 } });\n                this.pdfViewer.renderSelector(currentAnnotation.pageIndex, this.pdfViewer.annotationSelectorSettings);\n                currentAnnotation.previousFontSize = currentValue;\n            }\n            this.modifyInCollections(currentAnnotation, 'fontSize');\n            this.modifyInCollections(currentAnnotation, 'bounds');\n            this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'fontSize', '', clonedObject, redoClonedObject);\n            this.pdfViewer.renderDrawing();\n        }\n    };\n    /**\n     * @param currentValue\n     * @private\n     */\n    Annotation.prototype.modifyTextAlignment = function (currentValue) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.textAlign = currentValue;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { textAlign: currentValue });\n        this.modifyInCollections(currentAnnotation, 'textAlign');\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'textAlign', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param fontInfo\n     * @param action\n     * @private\n     */\n    Annotation.prototype.modifyTextProperties = function (fontInfo, action) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        if (action === 'bold') {\n            redoClonedObject.font.isBold = fontInfo.isBold;\n        }\n        else if (action === 'italic') {\n            redoClonedObject.font.isItalic = fontInfo.isItalic;\n        }\n        else if (action === 'underline') {\n            redoClonedObject.font.isUnderline = fontInfo.isUnderline;\n            if (redoClonedObject.font.isUnderline && redoClonedObject.font.isStrikeout) {\n                redoClonedObject.font.isStrikeout = false;\n            }\n        }\n        else if (action === 'strikeout') {\n            redoClonedObject.font.isStrikeout = fontInfo.isStrikeout;\n            if (redoClonedObject.font.isUnderline && redoClonedObject.font.isStrikeout) {\n                redoClonedObject.font.isUnderline = false;\n            }\n        }\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { font: fontInfo });\n        this.modifyInCollections(currentAnnotation, 'textPropertiesChange');\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'textPropertiesChange', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param thicknessValue\n     * @private\n     */\n    Annotation.prototype.modifyThickness = function (thicknessValue) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        if (currentAnnotation.thickness !== thicknessValue) {\n            var clonedObject = cloneObject(currentAnnotation);\n            var redoClonedObject = cloneObject(currentAnnotation);\n            redoClonedObject.thickness = thicknessValue;\n            this.pdfViewer.nodePropertyChange(currentAnnotation, { thickness: thicknessValue });\n            this.modifyInCollections(currentAnnotation, 'thickness');\n            if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, false, true, clonedObject.thickness, redoClonedObject.thickness);\n            }\n            else {\n                this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n            this.pdfViewer.renderDrawing();\n        }\n    };\n    /**\n     * @param color\n     * @private\n     */\n    Annotation.prototype.modifyStrokeColor = function (color) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.strokeColor = color;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { strokeColor: color });\n        this.modifyInCollections(currentAnnotation, 'stroke');\n        if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, true, false, false, clonedObject.strokeColor, redoClonedObject.strokeColor);\n        }\n        else {\n            this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n        }\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param color\n     * @private\n     */\n    Annotation.prototype.modifyFillColor = function (color) {\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        redoClonedObject.fillColor = color;\n        this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], { fillColor: color });\n        this.modifyInCollections(currentAnnotation, 'fill');\n        this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Fill', '', clonedObject, redoClonedObject);\n        this.pdfViewer.renderDrawing();\n    };\n    /**\n     * @param dynamicText\n     * @param annotName\n     * @private\n     */\n    Annotation.prototype.modifyDynamicTextValue = function (dynamicText, annotName) {\n        var currentAnnotation = null;\n        currentAnnotation = this.pdfViewer.selectedItems.annotations.filter(function (s) { return s.annotName === annotName; })[0];\n        if (currentAnnotation) {\n            var clonedObject = cloneObject(currentAnnotation);\n            var redoClonedObject = cloneObject(currentAnnotation);\n            currentAnnotation.dynamicText = dynamicText;\n            redoClonedObject.dynamicText = dynamicText;\n            if (clonedObject.dynamicText === '') {\n                clonedObject.dynamicText = this.freeTextAnnotationModule.previousText;\n            }\n            this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], { dynamicText: dynamicText });\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'dynamicText Change', '', clonedObject, redoClonedObject);\n            this.modifyInCollections(currentAnnotation, 'dynamicText');\n            this.pdfViewer.renderDrawing();\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.modifyInCollections = function (annotationBase, property) {\n        // eslint-disable-next-line\n        var returnObj;\n        if (annotationBase.measureType === '' || isNullOrUndefined(annotationBase.measureType)) {\n            if (annotationBase.shapeAnnotationType === 'FreeText') {\n                returnObj = this.freeTextAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n            }\n            else if (annotationBase.shapeAnnotationType === 'HandWrittenSignature' || annotationBase.shapeAnnotationType === 'SignatureText' || annotationBase.shapeAnnotationType === 'SignatureImage') {\n                // eslint-disable-next-line max-len\n                returnObj = this.pdfViewerBase.signatureModule.modifySignatureCollection(property, annotationBase.pageIndex, annotationBase);\n            }\n            else if (annotationBase.shapeAnnotationType === 'Stamp') {\n                returnObj = this.stampAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n            }\n            else if (annotationBase.shapeAnnotationType === 'Ink') {\n                // eslint-disable-next-line max-len\n                returnObj = this.inkAnnotationModule.modifySignatureInkCollection(property, annotationBase.pageIndex, annotationBase);\n            }\n            else {\n                returnObj = this.shapeAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n            }\n        }\n        else if (annotationBase.measureType === 'Distance' || annotationBase.measureType === 'Perimeter' ||\n            annotationBase.measureType === 'Radius' || annotationBase.measureType === 'Area' || annotationBase.measureType === 'Volume') {\n            returnObj = this.measureAnnotationModule.modifyInCollection(property, annotationBase.pageIndex, annotationBase);\n        }\n        if (this.isUndoRedoAction) {\n            this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase, null, true);\n            if (this.isUndoAction) {\n                annotationBase.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n            }\n        }\n        else {\n            if (property !== 'bounds') {\n                this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase);\n            }\n        }\n        return returnObj;\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.createPropertiesWindow = function () {\n        var _this = this;\n        if (!isBlazor()) {\n            var elementID = this.pdfViewer.element.id;\n            // eslint-disable-next-line max-len\n            var dialogDiv = createElement('div', { id: elementID + '_properties_window', className: 'e-pv-properties-window' });\n            var appearanceTab = this.createAppearanceTab();\n            this.pdfViewerBase.pageContainer.appendChild(dialogDiv);\n            this.propertiesDialog = new Dialog({\n                showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('Line Properties'),\n                target: this.pdfViewer.element, content: appearanceTab, close: function () {\n                    _this.destroyPropertiesWindow();\n                }\n            });\n            if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n                this.propertiesDialog.buttons = [\n                    // eslint-disable-next-line max-len\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.onOkClicked.bind(this) },\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.onCancelClicked.bind(this) }\n                ];\n            }\n            else {\n                this.propertiesDialog.buttons = [\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.onCancelClicked.bind(this) },\n                    // eslint-disable-next-line max-len\n                    { buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.onOkClicked.bind(this) }\n                ];\n            }\n            if (this.pdfViewer.enableRtl) {\n                this.propertiesDialog.enableRtl = true;\n            }\n            this.propertiesDialog.appendTo(dialogDiv);\n            if (this.pdfViewer.selectedItems.annotations[0] && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Line') {\n                // eslint-disable-next-line\n                var fillColor = document.getElementById(this.pdfViewer.element.id + '_properties_fill_color');\n                fillColor.disabled = true;\n            }\n            // eslint-disable-next-line max-len\n            this.startArrowDropDown.content = this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes)).outerHTML;\n            this.endArrowDropDown.content = this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes)).outerHTML;\n            this.thicknessBox.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n            this.fillColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n            this.refreshColorPicker(this.fillColorPicker);\n            this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n            this.refreshColorPicker(this.strokeColorPicker);\n            this.updateColorInIcon(this.fillDropDown.element, this.fillColorPicker.value);\n            this.updateColorInIcon(this.strokeDropDown.element, this.strokeColorPicker.value);\n            this.opacitySlider.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n            this.updateOpacityIndicator();\n            // eslint-disable-next-line\n            if (parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray) >= 3) {\n                this.lineStyleDropDown.content = this.createDropDownContent('dashed').outerHTML;\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '2') {\n                this.lineStyleDropDown.content = this.createDropDownContent('dotted').outerHTML;\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '0') {\n                this.lineStyleDropDown.content = this.createDropDownContent('solid').outerHTML;\n            }\n            this.selectedLineStyle = this.pdfViewer.selectedItems.annotations[0].borderStyle;\n            this.selectedLineDashArray = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray;\n            if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n                this.leaderLengthBox.value = this.pdfViewer.selectedItems.annotations[0].leaderHeight;\n            }\n        }\n        else {\n            var opacityValue = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity * 100;\n            var lineStartElement = this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes);\n            var lineEndElement = this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes);\n            var lineStyleElement = void 0;\n            // eslint-disable-next-line\n            if (parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray) >= 3) {\n                lineStyleElement = 'Dashed';\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '2') {\n                lineStyleElement = 'Dotted';\n            }\n            else if (this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray === '0') {\n                lineStyleElement = 'Solid';\n            }\n            this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPropertiesDialog', opacityValue, lineStartElement, lineEndElement, lineStyleElement);\n        }\n    };\n    Annotation.prototype.updatePropertiesWindowInBlazor = function () {\n        // eslint-disable-next-line\n        var thicknessElement = document.querySelector('#' + this.pdfViewer.element.id + '_line_thickness');\n        // eslint-disable-next-line\n        var fillColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button');\n        // eslint-disable-next-line\n        var strokeColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button');\n        // eslint-disable-next-line\n        var leaderLengthElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_leader_length');\n        thicknessElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;\n        fillColorElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;\n        strokeColorElement.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n        this.onStrokeColorChange(strokeColorElement.value);\n        this.onFillColorChange(fillColorElement.value);\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n            // eslint-disable-next-line\n            leaderLengthElement.value = parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString());\n        }\n    };\n    Annotation.prototype.destroyPropertiesWindow = function () {\n        if (this.strokeColorPicker) {\n            this.strokeColorPicker.destroy();\n            this.strokeColorPicker = null;\n        }\n        if (this.fillColorPicker) {\n            this.fillColorPicker.destroy();\n            this.fillColorPicker = null;\n        }\n        if (this.endArrowDropDown) {\n            this.endArrowDropDown.destroy();\n            this.endArrowDropDown = null;\n        }\n        if (this.startArrowDropDown) {\n            this.startArrowDropDown.destroy();\n            this.startArrowDropDown = null;\n        }\n        if (this.opacitySlider) {\n            this.opacitySlider.destroy();\n            this.opacitySlider = null;\n        }\n        if (this.thicknessBox) {\n            this.thicknessBox.destroy();\n            this.thicknessBox = null;\n        }\n        if (this.lineStyleDropDown) {\n            this.lineStyleDropDown.destroy();\n            this.lineStyleDropDown = null;\n        }\n        if (this.leaderLengthBox) {\n            this.leaderLengthBox.destroy();\n            this.leaderLengthBox = null;\n        }\n        if (this.propertiesDialog) {\n            this.propertiesDialog.destroy();\n            this.propertiesDialog = null;\n        }\n        var dialogElement = this.pdfViewerBase.getElement('_properties_window');\n        if (dialogElement) {\n            dialogElement.parentElement.removeChild(dialogElement);\n        }\n    };\n    Annotation.prototype.refreshColorPicker = function (colorPick) {\n        colorPick.setProperties({ 'value': colorPick.value }, true);\n        colorPick.refresh();\n    };\n    Annotation.prototype.createAppearanceTab = function () {\n        var _this = this;\n        var elementID = this.pdfViewer.element.id;\n        // eslint-disable-next-line max-len\n        var items = [{ text: this.pdfViewer.localeObj.getConstant('None') }, { text: this.pdfViewer.localeObj.getConstant('Open Arrow') }, { text: this.pdfViewer.localeObj.getConstant('Closed Arrow') },\n            { text: this.pdfViewer.localeObj.getConstant('Round Arrow') }, { text: this.pdfViewer.localeObj.getConstant('Square Arrow') }, { text: this.pdfViewer.localeObj.getConstant('Diamond Arrow') }];\n        // eslint-disable-next-line max-len\n        var appearanceDiv = createElement('div', { id: elementID + '_properties_appearance' });\n        var lineStyleContainer = createElement('div', { className: 'e-pv-properties-line-style-prop' });\n        appearanceDiv.appendChild(lineStyleContainer);\n        // eslint-disable-next-line max-len\n        var lineHeadStartElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Start Arrow'), lineStyleContainer, 'text', 'button', true, 'e-pv-properties-line-start', elementID + '_properties_line_start');\n        // eslint-disable-next-line max-len\n        this.startArrowDropDown = new DropDownButton({ items: items, cssClass: 'e-pv-properties-line-start', select: this.onStartArrowHeadStyleSelect.bind(this) }, lineHeadStartElement);\n        var lineHeadEndElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('End Arrow'), lineStyleContainer, 'text', 'button', true, 'e-pv-properties-line-end', elementID + '_properties_line_end');\n        // eslint-disable-next-line max-len\n        var borderStyleContainer = createElement('div', { className: 'e-pv-properties-border-style' });\n        appearanceDiv.appendChild(borderStyleContainer);\n        // eslint-disable-next-line max-len\n        this.endArrowDropDown = new DropDownButton({ items: items, cssClass: 'e-pv-properties-line-end', select: this.onEndArrowHeadStyleSelect.bind(this) }, lineHeadEndElement);\n        var lineStyleElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Style'), borderStyleContainer, 'text', 'button', true, 'e-pv-properties-line-style', elementID + '_properties_line_style');\n        var dropDownTarget = this.createStyleList();\n        // eslint-disable-next-line max-len\n        this.lineStyleDropDown = new DropDownButton({ cssClass: 'e-pv-properties-line-style', target: dropDownTarget }, lineStyleElement);\n        // eslint-disable-next-line max-len\n        var thicknessElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Thickness'), borderStyleContainer, 'text', 'input', true, 'e-pv-properties-line-thickness', elementID + '_properties_thickness');\n        this.thicknessBox = new NumericTextBox({ value: 0, format: '## pt', cssClass: 'e-pv-properties-line-thickness', min: 0, max: 12 }, thicknessElement);\n        var colorStyleContainer = createElement('div', { className: 'e-pv-properties-color-style' });\n        appearanceDiv.appendChild(colorStyleContainer);\n        // eslint-disable-next-line max-len\n        var fillColorElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Fill Color'), colorStyleContainer, 'color', 'button', true, 'e-pv-properties-line-fill-color', elementID + '_properties_fill_color');\n        this.fillColorPicker = this.createColorPicker(elementID + '_properties_fill_color', true);\n        this.fillColorPicker.change = function (args) {\n            var currentColor = (args.currentValue.hex === '') ? '#ffffff00' : args.currentValue.hex;\n            _this.fillDropDown.toggle();\n            _this.updateColorInIcon(_this.fillDropDown.element, currentColor);\n        };\n        // eslint-disable-next-line max-len\n        this.fillDropDown = this.createDropDownButton(fillColorElement, 'e-pv-properties-fill-color-icon', this.fillColorPicker.element.parentElement);\n        this.fillDropDown.beforeOpen = this.onFillDropDownBeforeOpen.bind(this);\n        this.fillDropDown.open = function () {\n            _this.fillColorPicker.refresh();\n        };\n        // eslint-disable-next-line max-len\n        var strokeColorElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Color'), colorStyleContainer, 'color', 'button', true, 'e-pv-properties-line-stroke-color', elementID + '_properties_stroke_color');\n        this.strokeColorPicker = this.createColorPicker(elementID + '_properties_stroke_color', false);\n        this.strokeColorPicker.change = function (args) {\n            var currentColor = (args.currentValue.hex === '') ? '#ffffff00' : args.currentValue.hex;\n            _this.strokeDropDown.toggle();\n            _this.updateColorInIcon(_this.strokeDropDown.element, currentColor);\n        };\n        // eslint-disable-next-line max-len\n        this.strokeDropDown = this.createDropDownButton(strokeColorElement, 'e-pv-properties-stroke-color-icon', this.strokeColorPicker.element.parentElement);\n        this.strokeDropDown.beforeOpen = this.onStrokeDropDownBeforeOpen.bind(this);\n        this.strokeDropDown.open = function () {\n            _this.strokeColorPicker.refresh();\n        };\n        var opacityContainer = createElement('div', { className: 'e-pv-properties-opacity-style' });\n        appearanceDiv.appendChild(opacityContainer);\n        // eslint-disable-next-line max-len\n        var opacityElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Opacity'), opacityContainer, '', 'div', true, 'e-pv-properties-line-opacity', elementID + '_properties_opacity');\n        this.opacitySlider = new Slider({\n            type: 'MinRange', max: 100, min: 0, cssClass: 'e-pv-properties-line-opacity', change: function () {\n                _this.updateOpacityIndicator();\n            }\n        }, opacityElement);\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n            // eslint-disable-next-line max-len\n            var lineLengthElement = this.createInputElement(this.pdfViewer.localeObj.getConstant('Leader Length'), opacityContainer, 'text', 'input', true, 'e-pv-properties-line-leader-length', elementID + '_properties_leader_length');\n            this.leaderLengthBox = new NumericTextBox({ value: 0, format: '## pt', cssClass: 'e-pv-properties-line-leader-length', min: 0, max: 100 }, lineLengthElement);\n        }\n        return appearanceDiv;\n    };\n    Annotation.prototype.createContent = function (text) {\n        var divElement = createElement('div', { className: 'e-pv-properties-line-style-content' });\n        divElement.textContent = text;\n        return divElement;\n    };\n    Annotation.prototype.onStrokeDropDownBeforeOpen = function () {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.strokeColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n        }\n        this.strokeColorPicker.refresh();\n    };\n    Annotation.prototype.onFillDropDownBeforeOpen = function () {\n        if (this.pdfViewer.selectedItems.annotations.length === 1) {\n            this.fillColorPicker.value = this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;\n        }\n        this.fillColorPicker.refresh();\n    };\n    Annotation.prototype.createStyleList = function () {\n        var _this = this;\n        var ulElement = createElement('ul');\n        document.body.appendChild(ulElement);\n        var solidLi = this.createListForStyle('solid');\n        solidLi.addEventListener('click', function () {\n            _this.setThickness('0', 'solid');\n        });\n        ulElement.appendChild(solidLi);\n        var dottedLi = this.createListForStyle('dotted');\n        dottedLi.addEventListener('click', function () {\n            _this.setThickness('2', 'dotted');\n        });\n        ulElement.appendChild(dottedLi);\n        var dashedLi = this.createListForStyle('dashed');\n        dashedLi.addEventListener('click', function () {\n            _this.setThickness('3', 'dashed');\n        });\n        ulElement.appendChild(dashedLi);\n        return ulElement;\n    };\n    Annotation.prototype.createColorPicker = function (idString, isNoColor) {\n        var inputElement = createElement('input', { id: idString + '_target' });\n        document.body.appendChild(inputElement);\n        var colorPicker = new ColorPicker({\n            inline: true, mode: 'Palette', enableOpacity: false, value: '#000000', showButtons: false, modeSwitcher: false,\n            noColor: isNoColor\n        });\n        if (this.pdfViewer.enableRtl) {\n            colorPicker.enableRtl = true;\n        }\n        colorPicker.appendTo(inputElement);\n        return colorPicker;\n    };\n    Annotation.prototype.createDropDownButton = function (element, iconClass, target) {\n        // eslint-disable-next-line max-len\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        return dropDownButton;\n    };\n    Annotation.prototype.updateColorInIcon = function (element, color) {\n        element.childNodes[0].style.borderBottomColor = color;\n    };\n    /**\n     * @param color\n     * @private\n     */\n    Annotation.prototype.onFillColorChange = function (color) {\n        // eslint-disable-next-line\n        var colorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button');\n        if (color !== 'transparent') {\n            colorElement.children[0].style.borderBottomColor = color;\n        }\n    };\n    /**\n     * @param color\n     * @private\n     */\n    Annotation.prototype.onStrokeColorChange = function (color) {\n        // eslint-disable-next-line\n        var colorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button');\n        if (color !== 'transparent') {\n            colorElement.children[0].style.borderBottomColor = color;\n        }\n    };\n    Annotation.prototype.setThickness = function (value, style, isBlazor) {\n        if (!isBlazor) {\n            this.lineStyleDropDown.content = this.createDropDownContent(style).outerHTML;\n        }\n        this.selectedLineDashArray = value;\n        if (value === '0') {\n            this.selectedLineStyle = 'Solid';\n        }\n        else if (value === '2' || value === '3') {\n            this.selectedLineStyle = 'Dashed';\n        }\n    };\n    Annotation.prototype.createDropDownContent = function (style) {\n        var divElement = createElement('div', { className: 'e-pv-line-styles-content-container' });\n        // eslint-disable-next-line max-len\n        var spanElement = createElement('span', { className: 'e-pv-line-styles-content', styles: 'border-bottom-style:' + style });\n        divElement.appendChild(spanElement);\n        return divElement;\n    };\n    Annotation.prototype.createListForStyle = function (style) {\n        var liElement = createElement('li', { className: 'e-menu-item' });\n        var divElement = createElement('div', { className: 'e-pv-line-styles-container' });\n        // eslint-disable-next-line max-len\n        var spanElement = createElement('span', { className: 'e-pv-line-styles-item', styles: 'border-bottom-style:' + style });\n        divElement.appendChild(spanElement);\n        liElement.appendChild(divElement);\n        return liElement;\n    };\n    Annotation.prototype.onStartArrowHeadStyleSelect = function (args) {\n        this.startArrowDropDown.content = this.createContent(args.item.text).outerHTML;\n    };\n    Annotation.prototype.onEndArrowHeadStyleSelect = function (args) {\n        this.endArrowDropDown.content = this.createContent(args.item.text).outerHTML;\n    };\n    // eslint-disable-next-line max-len\n    Annotation.prototype.createInputElement = function (labelText, parentElement, inputType, input, isLabelNeeded, className, idString) {\n        var container = createElement('div', { id: idString + '_container', className: className + '-container' });\n        if (isLabelNeeded) {\n            var label = createElement('div', { id: idString + '_label', className: className + '-label' });\n            label.textContent = labelText;\n            container.appendChild(label);\n        }\n        if (this.pdfViewer.localeObj.getConstant('Opacity') === labelText) {\n            this.opacityIndicator = createElement('span', { className: 'e-pv-properties-opacity-indicator' });\n            container.appendChild(this.opacityIndicator);\n        }\n        var textBoxInput = createElement(input, { id: idString });\n        if (input === 'input') {\n            textBoxInput.type = inputType;\n        }\n        container.appendChild(textBoxInput);\n        parentElement.appendChild(container);\n        return textBoxInput;\n    };\n    Annotation.prototype.updateOpacityIndicator = function () {\n        this.opacityIndicator.textContent = this.opacitySlider.value + '%';\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.onOkClicked = function (opacityValue) {\n        var startArrow;\n        var endArrow;\n        var thickness;\n        var strokeColor;\n        var fillColor;\n        var opacity;\n        if (!isBlazor()) {\n            startArrow = this.getArrowTypeFromDropDown(this.startArrowDropDown.content);\n            endArrow = this.getArrowTypeFromDropDown(this.endArrowDropDown.content);\n            thickness = this.thicknessBox.value;\n            strokeColor = this.strokeColorPicker.getValue(this.strokeColorPicker.value, 'hex');\n            strokeColor = (strokeColor === '') ? '#ffffff00' : strokeColor;\n            fillColor = this.fillColorPicker.getValue(this.fillColorPicker.value, 'hex');\n            // eslint-disable-next-line max-len\n            fillColor = (fillColor === '' || fillColor === '#transp' || this.fillColorPicker.value === '#ffffff00') ? '#ffffff00' : fillColor;\n            opacity = this.opacitySlider.value / 100;\n        }\n        else {\n            // eslint-disable-next-line\n            var lineStartElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_line_start');\n            // eslint-disable-next-line\n            var lineEndElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_line_end');\n            // eslint-disable-next-line\n            var thicknessElement = document.querySelector('#' + this.pdfViewer.element.id + '_line_thickness');\n            // eslint-disable-next-line\n            var lineStyleElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_style');\n            // eslint-disable-next-line\n            var fillColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_fill_color_button');\n            // eslint-disable-next-line\n            var strokeColorElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_stroke_color_button');\n            // eslint-disable-next-line\n            var opacityElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_opacity');\n            startArrow = this.getArrowTypeFromDropDown(lineStartElement.value, true);\n            endArrow = this.getArrowTypeFromDropDown(lineEndElement.value, true);\n            // eslint-disable-next-line\n            thickness = parseInt(thicknessElement.value);\n            strokeColor = this.getValue(strokeColorElement.children[0].style.borderBottomColor, 'hex');\n            strokeColor = (strokeColor === '') ? '#ffffff00' : strokeColor;\n            fillColor = this.getValue(fillColorElement.children[0].style.borderBottomColor, 'hex');\n            fillColor = (fillColor === '') ? '#ffffff00' : fillColor;\n            if (opacityValue) {\n                opacity = (opacityValue) / 100;\n            }\n            else {\n                opacity = opacityElement.value / 100;\n            }\n            if (lineStyleElement.value) {\n                if (lineStyleElement.value === 'Solid') {\n                    this.setThickness('0', 'solid', true);\n                }\n                else if (lineStyleElement.value === 'Dotted') {\n                    this.setThickness('2', 'dotted', true);\n                }\n                else if (lineStyleElement.value === 'Dashed') {\n                    this.setThickness('3', 'dashed', true);\n                }\n            }\n        }\n        var currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        var clonedObject = cloneObject(currentAnnotation);\n        var redoClonedObject = cloneObject(currentAnnotation);\n        var newNode = {};\n        var isColorChanged = false;\n        var isStrokeColorChanged = false;\n        var isThicknessChanged = false;\n        var isOpacityChanged = false;\n        var isLineHeadStartStyleChanged = false;\n        var isLineHeadEndStyleChanged = false;\n        var isBorderDashArrayChanged = false;\n        if (startArrow !== currentAnnotation.sourceDecoraterShapes) {\n            newNode.sourceDecoraterShapes = startArrow;\n            redoClonedObject.lineHeadStart = this.getArrowString(startArrow);\n            isLineHeadStartStyleChanged = true;\n        }\n        if (endArrow !== currentAnnotation.taregetDecoraterShapes) {\n            newNode.taregetDecoraterShapes = endArrow;\n            redoClonedObject.lineHeadEnd = this.getArrowString(endArrow);\n            isLineHeadEndStyleChanged = true;\n        }\n        if (thickness !== currentAnnotation.wrapper.children[0].style.strokeWidth) {\n            newNode.thickness = thickness;\n            redoClonedObject.thickness = thickness;\n            isThicknessChanged = true;\n        }\n        if (strokeColor !== currentAnnotation.wrapper.children[0].style.strokeColor) {\n            newNode.strokeColor = strokeColor;\n            redoClonedObject.strokeColor = strokeColor;\n            isStrokeColorChanged = true;\n        }\n        if (fillColor !== currentAnnotation.wrapper.children[0].style.fill) {\n            newNode.fillColor = fillColor;\n            redoClonedObject.fillColor = fillColor;\n            isColorChanged = true;\n        }\n        if (opacity !== currentAnnotation.wrapper.children[0].style.opacity) {\n            newNode.opacity = opacity;\n            redoClonedObject.opacity = opacity;\n            isOpacityChanged = true;\n        }\n        if (this.selectedLineDashArray !== currentAnnotation.wrapper.children[0].style.strokeDashArray) {\n            newNode.borderDashArray = this.selectedLineDashArray;\n            newNode.borderStyle = this.selectedLineStyle;\n            redoClonedObject.borderDashArray = newNode.borderDashArray;\n            redoClonedObject.borderStyle = newNode.borderStyle;\n            isBorderDashArrayChanged = true;\n        }\n        if (!isBlazor()) {\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance' && this.leaderLengthBox.value !== this.pdfViewer.selectedItems.annotations[0].leaderHeight) {\n                newNode.leaderHeight = this.leaderLengthBox.value;\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var leaderLengthElement = document.querySelector('#' + this.pdfViewer.element.id + '_properties_leader_length');\n            // eslint-disable-next-line\n            if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance' && parseInt(leaderLengthElement.value) !== this.pdfViewer.selectedItems.annotations[0].leaderHeight) {\n                // eslint-disable-next-line\n                newNode.leaderHeight = parseInt(leaderLengthElement.value);\n            }\n        }\n        this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0], newNode);\n        this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill = fillColor;\n        // eslint-disable-next-line max-len\n        this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0], isColorChanged, isStrokeColorChanged, isThicknessChanged, isOpacityChanged, isLineHeadStartStyleChanged, isLineHeadEndStyleChanged, isBorderDashArrayChanged);\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'thickness');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'stroke');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'fill');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'opacity');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'dashArray');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'startArrow');\n        this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'endArrow');\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Distance') {\n            this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0], 'leaderLength');\n        }\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Line properties change', '', clonedObject, redoClonedObject);\n        this.renderAnnotations(currentAnnotation.pageIndex, null, null, null);\n        if (!isBlazor()) {\n            this.propertiesDialog.hide();\n        }\n    };\n    Annotation.prototype.onCancelClicked = function () {\n        this.propertiesDialog.hide();\n    };\n    Annotation.prototype.getArrowTypeFromDropDown = function (arrowType, isBlazor) {\n        if (!isBlazor) {\n            arrowType = arrowType.split('</div>')[0].split('\">')[1];\n        }\n        var arrow = 'None';\n        switch (arrowType) {\n            case this.pdfViewer.localeObj.getConstant('None'):\n                arrow = 'None';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Open Arrow'):\n                arrow = 'OpenArrow';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Closed Arrow'):\n                arrow = 'Arrow';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Round Arrow'):\n                arrow = 'Circle';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Square Arrow'):\n                arrow = 'Square';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Diamond Arrow'):\n                arrow = 'Diamond';\n                break;\n            case this.pdfViewer.localeObj.getConstant('Butt'):\n                arrow = 'Butt';\n                break;\n        }\n        return arrow;\n    };\n    /**\n     * @param arrow\n     * @private\n     */\n    Annotation.prototype.getArrowString = function (arrow) {\n        var arrowType = this.pdfViewer.localeObj.getConstant('None');\n        switch (arrow) {\n            case 'Arrow':\n                arrowType = this.pdfViewer.localeObj.getConstant('Closed');\n                break;\n            case 'OpenArrow':\n                arrowType = this.pdfViewer.localeObj.getConstant('Open Arrow');\n                break;\n            case 'Circle':\n                arrowType = this.pdfViewer.localeObj.getConstant('Round');\n                break;\n            case 'None':\n            case 'Square':\n            case 'Diamond':\n                arrowType = this.pdfViewer.localeObj.getConstant(arrow);\n                break;\n            case 'Butt':\n                arrowType = this.pdfViewer.localeObj.getConstant('Butt');\n                break;\n        }\n        return arrowType;\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.onAnnotationMouseUp = function () {\n        if (this.pdfViewer.selectedItems.annotations.length !== 0) {\n            if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n                this.enableBasedOnType();\n                this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);\n                if (!Browser.isDevice) {\n                    this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();\n                }\n            }\n            this.pdfViewerBase.disableTextSelectionMode();\n        }\n        else {\n            if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isPanMode && !this.pdfViewer.designerMode) {\n                this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n            }\n            // eslint-disable-next-line max-len\n            if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule && (!Browser.isDevice || this.pdfViewer.enableDesktopMode)) {\n                // eslint-disable-next-line max-len\n                var isSkip = this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected;\n                if (this.pdfViewer.annotation.freeTextAnnotationModule && !this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus && !isSkip) {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(false);\n                }\n                this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();\n                this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(false);\n            }\n        }\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @param event\n     * @param pdfAnnotationBase\n     * @param event\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.onShapesMouseup = function (pdfAnnotationBase, event) {\n        // eslint-disable-next-line max-len\n        pdfAnnotationBase = !isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0]) ? this.pdfViewer.selectedItems.annotations[0] : pdfAnnotationBase;\n        if (pdfAnnotationBase) {\n            if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n                this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n            }\n            // eslint-disable-next-line max-len\n            if ((this.pdfViewerBase.tool instanceof NodeDrawingTool || this.pdfViewerBase.tool instanceof LineTool) && !this.pdfViewerBase.tool.dragging) {\n                // eslint-disable-next-line\n                var setting = {\n                    opacity: pdfAnnotationBase.opacity, fillColor: pdfAnnotationBase.fillColor, strokeColor: pdfAnnotationBase.strokeColor,\n                    thickness: pdfAnnotationBase.thickness, author: pdfAnnotationBase.author, subject: pdfAnnotationBase.subject,\n                    modifiedDate: pdfAnnotationBase.modifiedDate\n                };\n                var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id);\n                // eslint-disable-next-line\n                var bounds = { left: pdfAnnotationBase.bounds.x, top: pdfAnnotationBase.bounds.y, width: pdfAnnotationBase.bounds.width, height: pdfAnnotationBase.bounds.height };\n                if (this.pdfViewerBase.tool instanceof LineTool) {\n                    setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n                    setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n                    setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n                }\n                if (!this.pdfViewerBase.isAnnotationAdded || pdfAnnotationBase.measureType === 'Distance') {\n                    if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n                        // eslint-disable-next-line max-len\n                        this.shapeAnnotationModule.renderShapeAnnotations(pdfAnnotationBase, this.pdfViewer.annotation.getEventPageNumber(event));\n                    }\n                    else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' ||\n                        pdfAnnotationBase.measureType === 'Radius') {\n                        // eslint-disable-next-line max-len\n                        this.measureAnnotationModule.renderMeasureShapeAnnotations(pdfAnnotationBase, this.pdfViewer.annotation.getEventPageNumber(event));\n                    }\n                }\n                this.pdfViewerBase.updateDocumentEditedProperty(true);\n            }\n            else if (this.pdfViewerBase.tool instanceof MoveTool || this.pdfViewerBase.tool instanceof ResizeTool) {\n                this.pdfViewerBase.updateDocumentEditedProperty(true);\n                if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n                    if (pdfAnnotationBase.shapeAnnotationType === 'FreeText') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    else if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.signatureModule.modifySignatureCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    else if (pdfAnnotationBase.shapeAnnotationType === 'Ink') {\n                        // eslint-disable-next-line max-len\n                        this.inkAnnotationModule.modifySignatureInkCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    else if (pdfAnnotationBase.shapeAnnotationType === 'Stamp' || pdfAnnotationBase.shapeAnnotationType === 'Image') {\n                        // eslint-disable-next-line max-len\n                        this.stampAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    // eslint-disable-next-line max-len\n                }\n                else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Radius' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume') {\n                    this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                }\n                if (this.pdfViewerBase.tool instanceof ResizeTool) {\n                    if (!pdfAnnotationBase.formFieldAnnotationType) {\n                        this.triggerAnnotationResize(pdfAnnotationBase);\n                    }\n                }\n                if (this.pdfViewerBase.tool instanceof MoveTool) {\n                    if (this.pdfViewerBase.action !== 'Select') {\n                        if (!pdfAnnotationBase.formFieldAnnotationType) {\n                            this.triggerAnnotationMove(pdfAnnotationBase);\n                        }\n                    }\n                }\n            }\n            else if (this.pdfViewerBase.tool instanceof ConnectTool) {\n                this.pdfViewerBase.updateDocumentEditedProperty(true);\n                if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n                    // eslint-disable-next-line max-len\n                    if ((pdfAnnotationBase.shapeAnnotationType === 'Line' || pdfAnnotationBase.shapeAnnotationType === 'LineWidthArrowHead' || pdfAnnotationBase.shapeAnnotationType === 'Polygon')) {\n                        this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    // eslint-disable-next-line max-len\n                }\n                else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume') {\n                    if (pdfAnnotationBase.measureType === 'Distance') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('leaderLength', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                    }\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds', this.pdfViewer.annotation.getEventPageNumber(event), pdfAnnotationBase);\n                }\n                this.triggerAnnotationResize(pdfAnnotationBase);\n            }\n            // eslint-disable-next-line max-len\n            if (this.pdfViewerBase.navigationPane && this.pdfViewerBase.navigationPane.annotationMenuObj && this.pdfViewer.isSignatureEditable && (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage')) {\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n                // eslint-disable-next-line max-len\n                this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n            }\n            if (this.pdfViewer.toolbarModule) {\n                if (this.pdfViewer.toolbarModule.annotationToolbarModule && this.pdfViewer.enableAnnotationToolbar) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode();\n                    if (pdfAnnotationBase.measureType === '' || isNullOrUndefined(pdfAnnotationBase.measureType)) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();\n                    }\n                    else if (pdfAnnotationBase.measureType === 'Distance' || pdfAnnotationBase.measureType === 'Perimeter' || pdfAnnotationBase.measureType === 'Area' || pdfAnnotationBase.measureType === 'Volume' || pdfAnnotationBase.measureType === 'Radius') {\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode();\n                    }\n                    if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(true);\n                    }\n                    if (!isBlazor()) {\n                        if (this.pdfViewer.selectedItems.annotations.length === 1 && !this.pdfViewer.designerMode) {\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(true);\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                            // eslint-disable-next-line max-len\n                            if (!this.pdfViewer.formDesignerModule && pdfAnnotationBase.properties.id != '' && pdfAnnotationBase.properties.id != null && pdfAnnotationBase.properties.id.slice(0, 4) != 'sign') {\n                                var id = document.getElementById(pdfAnnotationBase.properties.id);\n                                var isFieldReadOnly = id && id.disabled;\n                                if (!isFieldReadOnly) {\n                                    this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                                }\n                                else if (this.pdfViewer.annotation && isFieldReadOnly) {\n                                    this.pdfViewer.annotation.clearSelection();\n                                }\n                            }\n                            else {\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                            }\n                            if (this.pdfViewer.isAnnotationToolbarVisible && this.pdfViewer.isFormDesignerToolbarVisible) {\n                                var formDesignerMainDiv = document.getElementById(this.pdfViewer.element.id + \"_formdesigner_toolbar\");\n                                formDesignerMainDiv.style.display = \"none\";\n                                if (this.pdfViewer.toolbarModule) {\n                                    this.pdfViewer.toolbarModule.formDesignerToolbarModule.isToolbarHidden = false;\n                                    this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem);\n                                    this.pdfViewer.toolbarModule.annotationToolbarModule.adjustViewer(true);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @param isNewlyAdded\n     * @param pdfAnnotationBase\n     * @param isNewlyAdded\n     * @private\n     */\n    Annotation.prototype.updateCalibrateValues = function (pdfAnnotationBase, isNewlyAdded) {\n        if (pdfAnnotationBase.measureType === 'Distance') {\n            pdfAnnotationBase.notes = updateDistanceLabel(pdfAnnotationBase, pdfAnnotationBase.vertexPoints, this.measureAnnotationModule);\n            if (pdfAnnotationBase.enableShapeLabel === true) {\n                pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n            this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n        }\n        else if (pdfAnnotationBase.measureType === 'Radius') {\n            pdfAnnotationBase.notes = updateRadiusLabel(pdfAnnotationBase, this.measureAnnotationModule);\n            if (pdfAnnotationBase.enableShapeLabel === true) {\n                pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n            this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n        }\n        else if (pdfAnnotationBase.measureType === 'Perimeter') {\n            pdfAnnotationBase.notes = updatePerimeterLabel(pdfAnnotationBase, pdfAnnotationBase.vertexPoints, this.measureAnnotationModule);\n            if (pdfAnnotationBase.enableShapeLabel === true) {\n                pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n            this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n        }\n        else if (pdfAnnotationBase.measureType === 'Area') {\n            // eslint-disable-next-line max-len\n            pdfAnnotationBase.notes = this.measureAnnotationModule.calculateArea(pdfAnnotationBase.vertexPoints, pdfAnnotationBase.id, pdfAnnotationBase.pageIndex);\n            if (pdfAnnotationBase.enableShapeLabel === true) {\n                pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n                updateCalibrateLabel(pdfAnnotationBase);\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n            this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n        }\n        else if (pdfAnnotationBase.measureType === 'Volume') {\n            // eslint-disable-next-line max-len\n            pdfAnnotationBase.notes = this.measureAnnotationModule.calculateVolume(pdfAnnotationBase.vertexPoints, pdfAnnotationBase.id, pdfAnnotationBase.pageIndex);\n            if (pdfAnnotationBase.enableShapeLabel === true) {\n                pdfAnnotationBase.labelContent = pdfAnnotationBase.notes;\n                updateCalibrateLabel(pdfAnnotationBase);\n            }\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes', pdfAnnotationBase.pageIndex, pdfAnnotationBase, isNewlyAdded);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName, pdfAnnotationBase.notes);\n            this.renderAnnotations(pdfAnnotationBase.pageIndex, null, null, null, null);\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.onAnnotationMouseDown = function () {\n        if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n            if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n                if (!isBlazor() && Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n                    var commentPanel = document.getElementById(this.pdfViewer.element.id + '_commantPanel');\n                    if (commentPanel.style.display === 'none') {\n                        if (this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar && this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                            // eslint-disable-next-line max-len\n                            this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(\"\");\n                        }\n                        else {\n                            if (this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar) {\n                                // eslint-disable-next-line max-len\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();\n                                this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType);\n                                var editIcon = document.getElementById(this.pdfViewer.element.id + '_annotationIcon');\n                                if (editIcon && !editIcon.parentElement.classList.contains('e-pv-select')) {\n                                    editIcon.parentElement.classList.add('e-pv-select');\n                                }\n                            }\n                        }\n                    }\n                }\n                this.enableBasedOnType();\n                this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);\n            }\n        }\n    };\n    Annotation.prototype.enableBasedOnType = function () {\n        var isLock = false;\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.selectedItems.annotations[0];\n        if (annotation && annotation.annotationSettings) {\n            // eslint-disable-next-line\n            isLock = annotation.annotationSettings.isLock;\n            if (isLock && this.checkAllowedInteractions('PropertyChange', annotation)) {\n                isLock = false;\n            }\n        }\n        if (!Browser.isDevice || this.pdfViewer.enableDesktopMode) {\n            if (!isLock) {\n                if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Stamp' ||\n                    this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Image') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'StickyNotes') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Path' ||\n                    this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureImage' ||\n                    this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'SignatureText') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'FreeText') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(true);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'HandWrittenSignature') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n                }\n                else if (this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Ink') {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n                }\n                else {\n                    if (this.pdfViewer.selectedItems.annotations.length === 1 && this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType === null) {\n                        this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(true);\n                    }\n                }\n            }\n            // eslint-disable-next-line max-len\n        }\n        else if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation && this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType === 'Path' && (Browser.isDevice && !this.pdfViewer.enableDesktopMode)) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(true, true);\n        }\n    };\n    Annotation.prototype.getProperDate = function (date) {\n        var dateObject = new Date(date.toString());\n        if (isNaN(dateObject.getFullYear())) {\n            var dateString = date.slice(2, 16);\n            // eslint-disable-next-line max-len\n            dateString = dateString.slice(0, 4) + '/' + dateString.slice(4, 6) + '/' + dateString.slice(6, 8) + ' ' + dateString.slice(8, 10) + ':' + dateString.slice(10, 12) + ':' + dateString.slice(12, 14);\n            dateObject = new Date(dateString);\n        }\n        // eslint-disable-next-line max-len\n        return (dateObject.getMonth() + 1) + '/' + dateObject.getDate() + '/' + dateObject.getFullYear() + ' ' + dateObject.getHours() + ':' + dateObject.getMinutes() + ':' + dateObject.getSeconds();\n    };\n    /**\n     * @param pageAnnotations\n     * @param pageNumber\n     * @private\n     */\n    Annotation.prototype.getPageCollection = function (pageAnnotations, pageNumber) {\n        var index = null;\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (pageAnnotations[i].pageIndex === pageNumber) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    /**\n     * @param annotations\n     * @param id\n     * @param annotations\n     * @param id\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getAnnotationWithId = function (annotations, id) {\n        // eslint-disable-next-line\n        var annotation;\n        for (var i = 0; i < annotations.length; i++) {\n            if (id === annotations[i].id) {\n                annotation = annotations[i];\n            }\n        }\n        return annotation;\n    };\n    /**\n     * @param event\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getEventPageNumber = function (event) {\n        var eventTarget = event.target;\n        if (eventTarget.classList.contains('e-pv-hyperlink')) {\n            eventTarget = eventTarget.parentElement;\n        }\n        else if (eventTarget.parentElement && eventTarget.parentElement.classList.contains('foreign-object')) {\n            eventTarget = eventTarget.parentElement.parentElement.parentElement.parentElement;\n        }\n        else if (eventTarget.classList.contains('e-pdfviewer-formFields')) {\n            eventTarget = eventTarget.parentElement;\n        }\n        var pageString;\n        if (eventTarget) {\n            // eslint-disable-next-line\n            pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1] || eventTarget.id.split('_pageDiv_')[1];\n        }\n        if (isNaN(pageString)) {\n            event = this.pdfViewerBase.annotationEvent;\n            if (event) {\n                eventTarget = event.target;\n                // eslint-disable-next-line\n                pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1] || eventTarget.id.split('_pageDiv_')[1];\n            }\n        }\n        // eslint-disable-next-line\n        return parseInt(pageString);\n    };\n    /**\n     * @param commentsAnnotations\n     * @param parentAnnotation\n     * @param author\n     * @param commentsAnnotations\n     * @param parentAnnotation\n     * @param author\n     * @param commentsAnnotations\n     * @param parentAnnotation\n     * @param author\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getAnnotationComments = function (commentsAnnotations, parentAnnotation, author) {\n        var newArray = [];\n        var annotationObject = null;\n        if (commentsAnnotations) {\n            if (commentsAnnotations.length > 0) {\n                for (var i = 0; i < commentsAnnotations.length; i++) {\n                    // eslint-disable-next-line\n                    var annotation = commentsAnnotations[i];\n                    annotationObject = {\n                        // eslint-disable-next-line max-len\n                        shapeAnnotationType: 'sticky', author: annotation.Author, modifiedDate: annotation.ModifiedDate, note: annotation.Note, state: annotation.state, stateModel: annotation.stateModel,\n                        comments: [], review: { state: annotation.State, stateModel: annotation.StateModel, modifiedDate: annotation.ModifiedDate, author: annotation.Author },\n                        annotName: annotation.AnnotName, parentId: parentAnnotation.AnnotName, subject: 'Comments',\n                        isLock: annotation.IsLock\n                    };\n                    newArray[newArray.length] = annotationObject;\n                }\n            }\n        }\n        return newArray;\n    };\n    Annotation.prototype.getRandomNumber = function () {\n        // eslint-disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // eslint-disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.createGUID = function () {\n        // eslint-disable-next-line max-len\n        return this.getRandomNumber();\n    };\n    /**\n     * @param pageDiv\n     * @param pageWidth\n     * @param pageHeight\n     * @param pageNumber\n     * @param displayMode\n     * @param pageDiv\n     * @param pageWidth\n     * @param pageHeight\n     * @param pageNumber\n     * @param displayMode\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    Annotation.prototype.createAnnotationLayer = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            this.updateCanvas(canvas, pageWidth, pageHeight, pageNumber);\n            return canvas;\n        }\n        else {\n            // eslint-disable-next-line max-len\n            var annotationCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber, className: 'e-pv-annotation-canvas' });\n            this.updateCanvas(annotationCanvas, pageWidth, pageHeight, pageNumber);\n            pageDiv.appendChild(annotationCanvas);\n            return annotationCanvas;\n        }\n    };\n    /**\n     * @param width\n     * @param height\n     * @param pageNumber\n     * @private\n     */\n    Annotation.prototype.resizeAnnotations = function (width, height, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            canvas.style.width = width + 'px';\n            canvas.style.height = height + 'px';\n            this.pdfViewerBase.applyElementStyles(canvas, pageNumber);\n        }\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    Annotation.prototype.clearAnnotationCanvas = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        var zoom = this.pdfViewerBase.getZoomFactor();\n        var ratio = this.pdfViewerBase.getZoomRatio(zoom);\n        if (canvas) {\n            var width = this.pdfViewerBase.pageSize[pageNumber].width;\n            var height = this.pdfViewerBase.pageSize[pageNumber].height;\n            canvas.width = width * ratio;\n            canvas.height = height * ratio;\n            canvas.style.width = width * zoom + 'px';\n            canvas.style.height = height * zoom + 'px';\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param shapeAnnotation\n     * @param measureShapeAnnotation\n     * @param textMarkupAnnotation\n     * @param canvas\n     * @param isImportAnnotations\n     * @param pageNumber\n     * @param shapeAnnotation\n     * @param measureShapeAnnotation\n     * @param textMarkupAnnotation\n     * @param canvas\n     * @param isImportAnnotations\n     * @param pageNumber\n     * @param shapeAnnotation\n     * @param measureShapeAnnotation\n     * @param textMarkupAnnotation\n     * @param canvas\n     * @param isImportAnnotations\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.renderAnnotations = function (pageNumber, shapeAnnotation, measureShapeAnnotation, textMarkupAnnotation, canvas, isImportAnnotations) {\n        this.clearAnnotationCanvas(pageNumber);\n        if (this.shapeAnnotationModule) {\n            if (isImportAnnotations) {\n                this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation, pageNumber, true);\n            }\n            else {\n                this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation, pageNumber);\n            }\n        }\n        if (this.measureAnnotationModule) {\n            if (isImportAnnotations) {\n                this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation, pageNumber, true);\n            }\n            else {\n                this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation, pageNumber);\n            }\n        }\n        if (canvas !== null && canvas !== undefined) {\n            canvas = canvas;\n        }\n        else {\n            canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        }\n        this.pdfViewer.drawing.refreshCanvasDiagramLayer(canvas, pageNumber);\n        if (this.textMarkupAnnotationModule) {\n            if (isImportAnnotations) {\n                // eslint-disable-next-line\n                this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation, pageNumber, true);\n            }\n            else {\n                // eslint-disable-next-line\n                this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation, pageNumber);\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param annotation\n     * @param annotationId\n     * @param pageNumber\n     * @param annotation\n     * @param annotationId\n     * @param pageNumber\n     * @param annotation\n     * @param annotationId\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.storeAnnotations = function (pageNumber, annotation, annotationId) {\n        // let annotationId: string = '_annotations_textMarkup';\n        // if (annotation is ITextMarkupAnnotation) {\n        //     annotationId = '_annotations_textMarkup';\n        // } else if (annotation as IShapeAnnotation) {\n        //     annotationId = '_annotations_shape';\n        // } else {\n        //     annotationId = '_annotations_stamp';\n        // }\n        // eslint-disable-next-line\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        if (sessionSize > 4500) {\n            this.clearAnnotationStorage();\n            this.pdfViewerBase.isStorageExceed = true;\n        }\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + annotationId);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId];\n        }\n        var index = 0;\n        if (!storeObject) {\n            this.storeAnnotationCollections(annotation, pageNumber);\n            var pageAnnotation = { pageIndex: pageNumber, annotations: [] };\n            pageAnnotation.annotations.push(annotation);\n            index = pageAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(pageAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + annotationId, annotationStringified);\n            }\n        }\n        else {\n            this.storeAnnotationCollections(annotation, pageNumber);\n            var annotObject = JSON.parse(storeObject);\n            if (!this.pdfViewerBase.isStorageExceed) {\n                window.sessionStorage.removeItem(this.pdfViewerBase.documentId + annotationId);\n            }\n            var pageIndex = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[pageIndex]) {\n                annotObject[pageIndex].annotations.push(annotation);\n                index = annotObject[pageIndex].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            if (this.pdfViewerBase.isStorageExceed) {\n                this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + annotationId] = annotationStringified;\n            }\n            else {\n                window.sessionStorage.setItem(this.pdfViewerBase.documentId + annotationId, annotationStringified);\n            }\n        }\n        return index;\n    };\n    /**\n     * @param type\n     * @private\n     */\n    Annotation.prototype.getArrowType = function (type) {\n        var decoratorShapes = 'None';\n        switch (type) {\n            case 'ClosedArrow':\n            case 'Closed':\n                decoratorShapes = 'Arrow';\n                break;\n            case 'OpenArrow':\n            case 'Open':\n                decoratorShapes = 'OpenArrow';\n                break;\n            case 'Square':\n                decoratorShapes = 'Square';\n                break;\n            case 'Circle':\n            case 'Round':\n                decoratorShapes = 'Circle';\n                break;\n            case 'Diamond':\n                decoratorShapes = 'Diamond';\n                break;\n            case 'Butt':\n                decoratorShapes = 'Butt';\n                break;\n            case 'Slash':\n                // decoratorShapes = 'Slash';\n                break;\n        }\n        return decoratorShapes;\n    };\n    /**\n     * @param arrow\n     * @private\n     */\n    Annotation.prototype.getArrowTypeForCollection = function (arrow) {\n        var arrowType;\n        switch (arrow) {\n            case 'Arrow':\n                arrowType = 'ClosedArrow';\n                break;\n            case 'OpenArrow':\n            case 'Square':\n            case 'Circle':\n            case 'Diamond':\n            case 'None':\n                arrowType = arrow.toString();\n                break;\n            case 'Butt':\n                arrowType = 'Butt';\n                break;\n        }\n        return arrowType;\n    };\n    /**\n     * @param bound\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getBounds = function (bound, pageIndex) {\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        if (pageDetails) {\n            if (pageDetails.rotation === 1) {\n                return { left: bound.top, top: pageDetails.width - (bound.left + bound.width), width: bound.height, height: bound.width };\n            }\n            else if (pageDetails.rotation === 2) {\n                // eslint-disable-next-line max-len\n                return { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n            }\n            else if (pageDetails.rotation === 3) {\n                return { left: pageDetails.height - bound.top - bound.height, top: bound.left, width: bound.height, height: bound.width };\n            }\n            else {\n                return bound;\n            }\n        }\n        else {\n            return bound;\n        }\n    };\n    /**\n     * @param bound\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getInkBounds = function (bound, pageIndex) {\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        if (pageDetails) {\n            if (pageDetails.rotation === 1) {\n                return { x: bound.y, y: pageDetails.width - (bound.x + bound.width), width: bound.height, height: bound.width };\n            }\n            else if (pageDetails.rotation === 2) {\n                // eslint-disable-next-line max-len\n                return { x: pageDetails.width - bound.x - bound.width, y: pageDetails.height - bound.y - bound.height, width: bound.width, height: bound.height };\n            }\n            else if (pageDetails.rotation === 3) {\n                return { x: pageDetails.height - bound.y - bound.height, y: bound.x, width: bound.height, height: bound.width };\n            }\n            else {\n                return bound;\n            }\n        }\n        else {\n            return bound;\n        }\n    };\n    /**\n     * @param points\n     * @param pageIndex\n     * @param points\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getVertexPoints = function (points, pageIndex) {\n        if (points) {\n            var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n            if (pageDetails.rotation === 1) {\n                var points1 = [];\n                for (var i = 0; i < points.length; i++) {\n                    var point = { x: points[i].y, y: pageDetails.width - points[i].x };\n                    points1.push(point);\n                }\n                return points1;\n            }\n            else if (pageDetails.rotation === 2) {\n                var points2 = [];\n                for (var i = 0; i < points.length; i++) {\n                    var point = { x: pageDetails.width - points[i].x, y: pageDetails.height - points[i].y };\n                    points2.push(point);\n                }\n                return points2;\n            }\n            else if (pageDetails.rotation === 3) {\n                var points3 = [];\n                for (var i = 0; i < points.length; i++) {\n                    var point = { x: pageDetails.height - points[i].y, y: points[i].x };\n                    points3.push(point);\n                }\n                return points3;\n            }\n            else {\n                return points;\n            }\n        }\n    };\n    /**\n     * @param pageIndex\n     * @param shapeAnnotations\n     * @param idString\n     * @param pageIndex\n     * @param shapeAnnotations\n     * @param idString\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.getStoredAnnotations = function (pageIndex, shapeAnnotations, idString) {\n        // eslint-disable-next-line\n        var annotationCollection;\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + idString);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + idString];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = null;\n            }\n        }\n        else {\n            annotationCollection = null;\n        }\n        return annotationCollection;\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @param pdfAnnotationBase\n     * @param isColor\n     * @param isStroke\n     * @param isThickness\n     * @param isOpacity\n     * @param isLineStart\n     * @param isLineEnd\n     * @param isDashArray\n     * @param isFreeText\n     * @param previousText\n     * @param currentText\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    Annotation.prototype.triggerAnnotationPropChange = function (pdfAnnotationBase, isColor, isStroke, isThickness, isOpacity, isLineStart, isLineEnd, isDashArray, isFreeText, previousText, currentText) {\n        var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id);\n        var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n        // eslint-disable-next-line max-len\n        var eventArgs = { name: 'annotationPropertiesChange', pageIndex: pdfAnnotationBase.pageIndex, annotationId: pdfAnnotationBase.annotName, annotationType: type, isColorChanged: isColor, isOpacityChanged: isOpacity, isThicknessChanged: isThickness, isStrokeColorChanged: isStroke };\n        if (isFreeText) {\n            eventArgs.isFreeTextChanged = isFreeText;\n            eventArgs.previousText = previousText;\n            eventArgs.currentText = currentText;\n        }\n        if (isLineStart) {\n            eventArgs.isLineHeadStartStyleChanged = isLineStart;\n        }\n        if (isLineEnd) {\n            eventArgs.isLineHeadEndStyleChanged = isLineEnd;\n        }\n        if (isDashArray) {\n            eventArgs.isBorderDashArrayChanged = isDashArray;\n        }\n        this.pdfViewer.trigger('annotationPropertiesChange', eventArgs);\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @private\n     */\n    Annotation.prototype.triggerAnnotationAdd = function (pdfAnnotationBase) {\n        // eslint-disable-next-line\n        var setting = {\n            opacity: pdfAnnotationBase.opacity, fillColor: pdfAnnotationBase.fillColor, strokeColor: pdfAnnotationBase.strokeColor,\n            thickness: pdfAnnotationBase.thickness, author: pdfAnnotationBase.author, subject: pdfAnnotationBase.subject,\n            modifiedDate: pdfAnnotationBase.modifiedDate\n        };\n        // eslint-disable-next-line\n        var bounds = { left: pdfAnnotationBase.wrapper.bounds.x, top: pdfAnnotationBase.wrapper.bounds.y, width: pdfAnnotationBase.wrapper.bounds.width, height: pdfAnnotationBase.wrapper.bounds.height };\n        var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n        if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n            setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n            setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n            setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n        }\n        var labelSettings;\n        if (this.pdfViewer.enableShapeLabel) {\n            labelSettings = {\n                // eslint-disable-next-line max-len\n                fontColor: pdfAnnotationBase.fontColor, fontSize: pdfAnnotationBase.fontSize, fontFamily: pdfAnnotationBase.fontFamily,\n                opacity: pdfAnnotationBase.labelOpacity, labelContent: pdfAnnotationBase.labelContent, fillColor: pdfAnnotationBase.labelFillColor\n            };\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, bounds, setting, null, null, null, labelSettings);\n        }\n        else {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, bounds, setting);\n        }\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @private\n     */\n    Annotation.prototype.triggerAnnotationResize = function (pdfAnnotationBase) {\n        // eslint-disable-next-line\n        var setting = {\n            opacity: pdfAnnotationBase.opacity, fillColor: pdfAnnotationBase.fillColor, strokeColor: pdfAnnotationBase.strokeColor,\n            thickness: pdfAnnotationBase.thickness, author: pdfAnnotationBase.author, subject: pdfAnnotationBase.subject,\n            modifiedDate: pdfAnnotationBase.modifiedDate\n        };\n        var index = this.getAnnotationIndex(pdfAnnotationBase.pageIndex, pdfAnnotationBase.id);\n        // eslint-disable-next-line\n        var annotationBounds = pdfAnnotationBase.bounds;\n        var currentPosition = { left: annotationBounds.x, top: annotationBounds.y, x: annotationBounds.x, y: annotationBounds.y, width: annotationBounds.width, height: annotationBounds.height };\n        // eslint-disable-next-line max-len\n        var previousPosition = { left: annotationBounds.oldProperties.x, top: annotationBounds.oldProperties.y, width: annotationBounds.oldProperties.width, height: annotationBounds.oldProperties.height };\n        var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n        if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n            setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n            setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n            setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n        }\n        var labelSettings;\n        if (this.pdfViewer.enableShapeLabel && (pdfAnnotationBase.shapeAnnotationType !== 'HandWrittenSignature')) {\n            labelSettings = {\n                // eslint-disable-next-line max-len\n                fontColor: pdfAnnotationBase.fontColor, fontSize: pdfAnnotationBase.fontSize, fontFamily: pdfAnnotationBase.fontFamily,\n                opacity: pdfAnnotationBase.labelOpacity, labelContent: pdfAnnotationBase.labelContent, fillColor: pdfAnnotationBase.labelFillColor, notes: pdfAnnotationBase.notes\n            };\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, currentPosition, setting, null, null, null, labelSettings);\n        }\n        else {\n            if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage') {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignatureResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.signatureName, pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.opacity, pdfAnnotationBase.strokeColor, pdfAnnotationBase.thickness, currentPosition, previousPosition);\n            }\n            else {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, currentPosition, setting);\n            }\n        }\n    };\n    /**\n     * @param pdfAnnotationBase\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.triggerAnnotationMove = function (pdfAnnotationBase, isMoving) {\n        // eslint-disable-next-line\n        var setting = {\n            opacity: pdfAnnotationBase.opacity, fillColor: pdfAnnotationBase.fillColor, strokeColor: pdfAnnotationBase.strokeColor,\n            thickness: pdfAnnotationBase.thickness, author: pdfAnnotationBase.author, subject: pdfAnnotationBase.subject,\n            modifiedDate: pdfAnnotationBase.modifiedDate\n        };\n        // eslint-disable-next-line\n        var annotationBounds = pdfAnnotationBase.bounds;\n        var currentPosition = { left: annotationBounds.x, top: annotationBounds.y, x: annotationBounds.x, y: annotationBounds.y, width: annotationBounds.width, height: annotationBounds.height };\n        // eslint-disable-next-line max-len\n        var previousPosition = { left: annotationBounds.oldProperties.x ? annotationBounds.oldProperties.x : annotationBounds.x, top: annotationBounds.oldProperties.y ? annotationBounds.oldProperties.y : annotationBounds.y, width: annotationBounds.width, height: annotationBounds.height };\n        var type = this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.measureType);\n        if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n            setting.lineHeadStartStyle = this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);\n            setting.lineHeadEndStyle = this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);\n            setting.borderDashArray = pdfAnnotationBase.borderDashArray;\n        }\n        if (pdfAnnotationBase.shapeAnnotationType === 'HandWrittenSignature' || pdfAnnotationBase.shapeAnnotationType === 'SignatureText' || pdfAnnotationBase.shapeAnnotationType === 'SignatureImage') {\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireSignatureMove(pdfAnnotationBase.pageIndex, pdfAnnotationBase.signatureName, pdfAnnotationBase.shapeAnnotationType, pdfAnnotationBase.opacity, pdfAnnotationBase.strokeColor, pdfAnnotationBase.thickness, previousPosition, currentPosition);\n        }\n        else {\n            // eslint-disable-next-line max-len\n            isMoving ? this.pdfViewer.fireAnnotationMoving(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, setting, previousPosition, currentPosition) : this.pdfViewer.fireAnnotationMove(pdfAnnotationBase.pageIndex, pdfAnnotationBase.annotName, type, setting, previousPosition, currentPosition);\n        }\n    };\n    /**\n     * @param annotationId\n     * @param pageNumber\n     * @param annotation\n     * @param annotationCollection\n     * @param isDblClick\n     * @param isSelected\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.annotationSelect = function (annotationId, pageNumber, annotation, annotationCollection, isDblClick, isSelected) {\n        // eslint-disable-next-line\n        var annotSettings;\n        if (annotation.shapeAnnotationType === 'textMarkup') {\n            // eslint-disable-next-line max-len\n            annotSettings = { type: 'TextMarkup', subType: annotation.subject, opacity: annotation.opacity, color: annotation.color, textMarkupContent: annotation.textMarkupContent, textMarkupStartIndex: annotation.textMarkupStartIndex, textMarkupEndIndex: annotation.textMarkupEndIndex, customData: annotation.customData };\n        }\n        else if (annotation.shapeAnnotationType === 'StickyNotes') {\n            annotSettings = { type: 'StickyNotes', opacity: annotation.opacity, customData: annotation.customData };\n        }\n        else if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n            annotSettings = { type: 'Stamp', opacity: annotation.opacity, customData: annotation.customData };\n        }\n        else if (annotation.shapeAnnotationType === 'Ink') {\n            annotSettings = {\n                // eslint-disable-next-line max-len\n                type: 'Ink', opacity: annotation.opacity, strokeColor: annotation.strokeColor, thickness: annotation.thickness, modifiedDate: annotation.modifiedDate,\n                width: annotation.bounds.width, height: annotation.bounds.height, left: annotation.bounds.x, top: annotation.bounds.y, data: annotation.data, customData: annotation.customData\n            };\n        }\n        else if (annotation.shapeAnnotationType === 'FreeText') {\n            annotSettings = {\n                type: 'FreeText', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                // eslint-disable-next-line max-len\n                strokeColor: annotation.strokeColor, thickness: annotation.thickness, content: annotation.dynamicText,\n                // eslint-disable-next-line max-len\n                fontFamily: annotation.fontFamily, fontSize: annotation.fontSize, fontColor: annotation.fontColor, textAlign: annotation.textAlign, fontStyle: this.updateFreeTextFontStyle(annotation.font), customData: annotation.customData\n            };\n        }\n        else if (annotation.measureType === '') {\n            if (annotation.shapeAnnotationType === 'Line') {\n                // eslint-disable-next-line max-len\n                annotSettings = { type: 'Shape', subType: 'Line', opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor, thickness: annotation.thickness, borderDashArray: annotation.borderDashArray, lineHeadStartStyle: annotation.sourceDecoraterShapes, lineHeadEndStyle: annotation.taregetDecoraterShapes, customData: annotation.customData };\n            }\n            else if (annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead') {\n                // eslint-disable-next-line max-len\n                annotSettings = { type: 'Shape', subType: 'Arrow', opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor, thickness: annotation.thickness, borderDashArray: annotation.borderDashArray, lineHeadStartStyle: annotation.sourceDecoraterShapes, lineHeadEndStyle: annotation.taregetDecoraterShapes, customData: annotation.customData };\n            }\n            else if (annotation.shapeAnnotationType === 'Rectangle') {\n                annotSettings = {\n                    type: 'Shape', subType: 'Rectangle', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, customData: annotation.customData\n                };\n            }\n            else if (annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse') {\n                annotSettings = {\n                    type: 'Shape', subType: 'Circle', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, customData: annotation.customData\n                };\n            }\n            else if (annotation.shapeAnnotationType === 'Polygon') {\n                annotSettings = {\n                    type: 'Shape', subType: 'Polygon', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, customData: annotation.customData\n                };\n            }\n        }\n        else if (annotation.measureType !== '') {\n            if (annotation.measureType === 'Distance') {\n                // eslint-disable-next-line max-len\n                annotSettings = { type: 'Measure', subType: 'Distance', opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor, thickness: annotation.thickness, borderDashArray: annotation.borderDashArray, lineHeadStartStyle: annotation.sourceDecoraterShapes, lineHeadEndStyle: annotation.taregetDecoraterShapes, customData: annotation.customData };\n            }\n            else if (annotation.measureType === 'Perimeter') {\n                // eslint-disable-next-line max-len\n                annotSettings = { type: 'Measure', subType: 'Perimeter', opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor, thickness: annotation.thickness, borderDashArray: annotation.borderDashArray, lineHeadStartStyle: annotation.sourceDecoraterShapes, lineHeadEndStyle: annotation.taregetDecoraterShapes, customData: annotation.customData };\n            }\n            else if (annotation.measureType === 'Area') {\n                annotSettings = {\n                    type: 'Measure', subType: 'Area', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, customData: annotation.customData\n                };\n            }\n            else if (annotation.measureType === 'Radius') {\n                annotSettings = {\n                    type: 'Measure', subType: 'Radius', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, customData: annotation.customData\n                };\n            }\n            else if (annotation.measureType === 'Volume') {\n                annotSettings = {\n                    type: 'Measure', subType: 'Volume', opacity: annotation.opacity, fillColor: annotation.fillColor,\n                    strokeColor: annotation.strokeColor, thickness: annotation.thickness, calibrate: annotation.calibrate,\n                    annotationId: annotation.annotName, customData: annotation.customData\n                };\n            }\n        }\n        // eslint-disable-next-line\n        var overlappedCollection = [];\n        // eslint-disable-next-line\n        var overlappedAnnotations = this.getOverlappedAnnotations(annotation, pageNumber);\n        if (overlappedAnnotations && this.overlappedCollections) {\n            // eslint-disable-next-line\n            var overlappedCollections = [];\n            // eslint-disable-next-line\n            for (var i = 0; i < overlappedAnnotations.length; i++) {\n                if (overlappedAnnotations[i].shapeAnnotationType !== 'textMarkup' && this.overlappedCollections || isSelected) {\n                    for (var j = 0; j < this.overlappedCollections.length; j++) {\n                        if (overlappedAnnotations[i].annotName === this.overlappedCollections[j].annotName) {\n                            overlappedCollections.push(overlappedAnnotations[i]);\n                            break;\n                        }\n                    }\n                }\n                else {\n                    overlappedCollections.push(overlappedAnnotations[i]);\n                }\n            }\n            overlappedAnnotations = overlappedCollections;\n        }\n        if (this.pdfViewer.enableMultiLineOverlap) {\n            // eslint-disable-next-line\n            for (var i = 0; i < overlappedAnnotations.length; i++) {\n                if (overlappedAnnotations[i].shapeAnnotationType === 'textMarkup') {\n                    var isOverlapped = false;\n                    for (var j = 0; j < overlappedAnnotations[i].bounds.length; j++) {\n                        // eslint-disable-next-line\n                        var bounds = this.orderTextMarkupBounds(overlappedAnnotations[i].bounds[j]);\n                        // eslint-disable-next-line\n                        var clickedPosition = this.textMarkupAnnotationModule.annotationClickPosition;\n                        if (clickedPosition && (clickedPosition.x || clickedPosition.y)) {\n                            if (bounds.left <= clickedPosition.x && (bounds.left + bounds.width) >= clickedPosition.x) {\n                                if (bounds.top <= clickedPosition.y && (bounds.top + bounds.height) >= clickedPosition.y) {\n                                    isOverlapped = true;\n                                }\n                            }\n                        }\n                        else {\n                            isOverlapped = true;\n                        }\n                    }\n                    if (!isOverlapped) {\n                        overlappedAnnotations.splice(i, 1);\n                    }\n                }\n            }\n        }\n        if (overlappedAnnotations && overlappedAnnotations.length > 0) {\n            annotationCollection = overlappedAnnotations;\n            // eslint-disable-next-line\n            for (var i = 0; i < annotationCollection.length; i++) {\n                // eslint-disable-next-line\n                var overlappedObject = cloneObject(annotationCollection[i]);\n                overlappedObject.annotationId = annotationCollection[i].annotName;\n                if (annotationId === annotationCollection[i].annotName && annotation.measureType && annotation.measureType === 'Volume') {\n                    annotSettings.calibrate = annotationCollection[i].calibrate;\n                }\n                delete overlappedObject.annotName;\n                overlappedCollection.push(overlappedObject);\n            }\n        }\n        else {\n            overlappedCollection = null;\n        }\n        this.addFreeTextProperties(annotation, annotSettings);\n        var annotationAddMode = annotation.annotationAddMode;\n        if (!isDblClick) {\n            if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n                if (!this.pdfViewerBase.isNewStamp && this.annotationSelected) {\n                    if (overlappedCollection) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, overlappedCollection, null, null, annotationAddMode);\n                    }\n                    else {\n                        this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, null, null, null, annotationAddMode);\n                    }\n                }\n            }\n            else {\n                var module = this.textMarkupAnnotationModule;\n                var multiPageCollection = module && module.multiPageCollectionList(annotation);\n                if (multiPageCollection && multiPageCollection.length === 0) {\n                    multiPageCollection = null;\n                }\n                if (this.annotationSelected) {\n                    if (overlappedCollection) {\n                        isSelected = false;\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, overlappedCollection, multiPageCollection, isSelected, annotationAddMode);\n                    }\n                    else {\n                        isSelected = true;\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.fireAnnotationSelect(annotationId, pageNumber, annotSettings, null, multiPageCollection, isSelected, annotationAddMode);\n                    }\n                }\n            }\n        }\n        else {\n            if (annotation.shapeAnnotationType === 'Stamp' || annotation.shapeAnnotationType === 'Image') {\n                if (!this.pdfViewerBase.isNewStamp) {\n                    this.pdfViewer.fireAnnotationDoubleClick(annotationId, pageNumber, annotSettings);\n                }\n            }\n            else {\n                this.pdfViewer.fireAnnotationDoubleClick(annotationId, pageNumber, annotSettings);\n            }\n        }\n        this.annotationSelected = true;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.selectSignature = function (signatureId, pageNumber, signatureModule) {\n        // eslint-disable-next-line\n        var annotBounds = signatureModule.bounds;\n        // eslint-disable-next-line\n        var bounds = { height: annotBounds.height, width: annotBounds.width, x: annotBounds.x, y: annotBounds.y };\n        if (!this.pdfViewerBase.signatureAdded) {\n            // eslint-disable-next-line max-len\n            var signature = { bounds: bounds, opacity: signatureModule.opacity, thickness: signatureModule.thickness, strokeColor: signatureModule.strokeColor };\n            this.pdfViewer.fireSignatureSelect(signatureId, pageNumber, signature);\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.editSignature = function (signature) {\n        // eslint-disable-next-line\n        var currentAnnotation;\n        if (signature.uniqueKey) {\n            // eslint-disable-next-line\n            currentAnnotation = this.pdfViewer.nameTable[signature.uniqueKey];\n        }\n        else {\n            currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n        }\n        var pageNumber = currentAnnotation.pageIndex;\n        if (currentAnnotation.shapeAnnotationType === 'HandWrittenSignature' || currentAnnotation.shapeAnnotationType === 'SignatureText' || currentAnnotation.shapeAnnotationType === 'SignatureImage') {\n            // eslint-disable-next-line\n            var clonedObject = cloneObject(currentAnnotation);\n            // eslint-disable-next-line\n            var redoClonedObject = cloneObject(currentAnnotation);\n            if (currentAnnotation.opacity !== signature.opacity) {\n                redoClonedObject.opacity = signature.opacity;\n                this.pdfViewer.nodePropertyChange(currentAnnotation, { opacity: signature.opacity });\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, true, false, clonedObject.opacity, redoClonedObject.opacity);\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Opacity', '', clonedObject, redoClonedObject);\n            }\n            if (currentAnnotation.strokeColor !== signature.strokeColor) {\n                redoClonedObject.strokeColor = signature.strokeColor;\n                this.pdfViewer.nodePropertyChange(currentAnnotation, { strokeColor: signature.strokeColor });\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, true, false, false, clonedObject.strokeColor, redoClonedObject.strokeColor);\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n            }\n            if (currentAnnotation.thickness !== signature.thickness) {\n                redoClonedObject.thickness = signature.thickness;\n                this.pdfViewer.nodePropertyChange(currentAnnotation, { thickness: signature.thickness });\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex, currentAnnotation.signatureName, currentAnnotation.shapeAnnotationType, false, false, true, clonedObject.thickness, redoClonedObject.thickness);\n                // eslint-disable-next-line max-len\n                this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n            }\n            currentAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n            this.pdfViewer.renderDrawing();\n            this.pdfViewerBase.signatureModule.modifySignatureCollection(null, pageNumber, currentAnnotation, true);\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.deletComment = function (commentDiv) {\n        if (commentDiv.parentElement.firstChild === commentDiv) {\n            this.deleteAnnotation();\n        }\n        else {\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.modifyCommentDeleteProperty(commentDiv.parentElement, commentDiv);\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.addReplyComments = function (currentAnnotation, replyComment, commentType) {\n        if (commentType === 'add') {\n            // eslint-disable-next-line\n            var commentsMainDiv = document.getElementById(currentAnnotation.annotName);\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentDiv(commentsMainDiv);\n            for (var j = 0; j < replyComment.length; j++) {\n                this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(commentsMainDiv, replyComment[j]);\n            }\n        }\n        else if (commentType === 'next') {\n            // eslint-disable-next-line\n            var commentsMainDiv = document.getElementById(currentAnnotation.annotationId);\n            this.selectAnnotation(currentAnnotation);\n            this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(commentsMainDiv, replyComment);\n        }\n    };\n    Annotation.prototype.editComments = function (commentId, editComment) {\n        // eslint-disable-next-line\n        var commentDiv = document.getElementById(commentId);\n        commentDiv.childNodes[1].ej2_instances[0].value = editComment;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.editAnnotation = function (annotation) {\n        // eslint-disable-next-line\n        var currentAnnotation;\n        var annotationId;\n        var annotationType;\n        var pageNumber;\n        var isTextMarkupUpdate = false;\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n            annotationId = currentAnnotation.annotName;\n            pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        }\n        else {\n            if (this.pdfViewer.selectedItems.annotations[0]) {\n                currentAnnotation = this.pdfViewer.selectedItems.annotations[0];\n                annotationId = currentAnnotation.annotName;\n                pageNumber = currentAnnotation.pageIndex;\n            }\n        }\n        if (annotation.uniqueKey !== undefined) {\n            // eslint-disable-next-line\n            currentAnnotation = this.pdfViewer.nameTable[annotation.uniqueKey];\n            currentAnnotation.annotationSettings.isLock = annotation.annotationSettings.isLock;\n            annotationId = currentAnnotation.annotName;\n            pageNumber = currentAnnotation.pageIndex;\n            if (isBlazor()) {\n                if (annotation.allowedInteractions) {\n                    var allowedInteractionsCount = annotation.allowedInteractions.length;\n                    for (var i = 0; i < allowedInteractionsCount; i++) {\n                        if (annotation.allowedInteractions[i] === 0) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.Select;\n                        }\n                        if (annotation.allowedInteractions[i] === 1) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.Move;\n                        }\n                        if (annotation.allowedInteractions[i] === 2) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.Resize;\n                        }\n                        if (annotation.allowedInteractions[i] === 3) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.Delete;\n                        }\n                        if (annotation.allowedInteractions[i] === 4) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.PropertyChange;\n                        }\n                        if (annotation.allowedInteractions[i] === 5) {\n                            annotation.allowedInteractions[i] = AllowedInteraction.None;\n                        }\n                    }\n                }\n            }\n            // eslint-disable-next-line\n            currentAnnotation.allowedInteractions = annotation.allowedInteractions ? annotation.allowedInteractions : this.updateAnnotationAllowedInteractions(annotation);\n        }\n        if (!currentAnnotation) {\n            if (annotation.shapeAnnotationType === 'sticky' && annotation.annotationId !== undefined) {\n                // eslint-disable-next-line\n                currentAnnotation = this.pdfViewer.nameTable[annotation.annotationId];\n                currentAnnotation.annotationSettings.isLock = annotation.annotationSettings.isLock;\n                annotationId = currentAnnotation.annotName;\n                pageNumber = currentAnnotation.pageIndex;\n            }\n        }\n        if (annotation.shapeAnnotationType === 'textMarkup') {\n            if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                // eslint-disable-next-line max-len\n                currentAnnotation = this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(annotation.pageNumber, annotation);\n                for (var i = 0; i < currentAnnotation.length; i++) {\n                    if (annotation.annotationId === currentAnnotation[i].annotName) {\n                        isTextMarkupUpdate = true;\n                        currentAnnotation = currentAnnotation[i];\n                        currentAnnotation.isPrint = annotation.isPrint;\n                        this.textMarkupAnnotationModule.currentTextMarkupAnnotation = currentAnnotation;\n                        this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = currentAnnotation.pageNumber;\n                        currentAnnotation.allowedInteractions = annotation.allowedInteractions;\n                        pageNumber = currentAnnotation.pageNumber;\n                        annotationId = annotation.annotationId;\n                        break;\n                    }\n                }\n            }\n        }\n        if (currentAnnotation) {\n            // eslint-disable-next-line\n            var clonedObject = cloneObject(currentAnnotation);\n            // eslint-disable-next-line\n            var redoClonedObject = cloneObject(currentAnnotation);\n            if (annotation.shapeAnnotationType === 'textMarkup') {\n                annotationType = 'textMarkup';\n            }\n            if (annotation && annotation.isCommentLock === true) {\n                currentAnnotation.isCommentLock = annotation.isCommentLock;\n            }\n            if (annotation.comments) {\n                for (var j_1 = 0; j_1 < annotation.comments.length; j_1++) {\n                    if (annotation.comments[j_1].isLock === true) {\n                        if (annotationType) {\n                            currentAnnotation.comments = annotation.comments;\n                            currentAnnotation.comments[j_1].isLock = annotation.comments[j_1].isLock;\n                        }\n                        else {\n                            currentAnnotation.properties.comments = annotation.comments;\n                            currentAnnotation.properties.comments[j_1].isLock = annotation.comments[j_1].isLock;\n                        }\n                    }\n                }\n            }\n            if (annotation && annotation.note !== '' && annotation.note !== undefined) {\n                if (annotationType) {\n                    currentAnnotation.note = annotation.note;\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.note);\n                }\n                else {\n                    currentAnnotation.notes = annotation.note;\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.notes);\n                }\n            }\n            else {\n                if (annotation && annotation.isCommentLock && ((annotation.type && annotation.type !== 'FreeText') || annotation.shapeAnnotationType !== 'FreeText')) {\n                    this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, '  ');\n                }\n            }\n            if (annotation.commentId && annotation.editComment && annotation.commentType === 'edit') {\n                this.editComments(annotation.commentId, annotation.editComment);\n            }\n            if (annotation.replyComment && annotation.commentType === 'add') {\n                this.addReplyComments(currentAnnotation, annotation.replyComment, annotation.commentType);\n                this.pdfViewer.annotationCollection[0].note = annotation.note;\n            }\n            if (annotation.nextComment && annotation.commentType === 'next') {\n                this.addReplyComments(annotation, annotation.nextComment, annotation.commentType);\n            }\n            if (annotation.note === '' && annotation.commentType === 'delete') {\n                // eslint-disable-next-line\n                var commentDiv = document.getElementById(annotation.annotationId);\n                this.deletComment(commentDiv);\n            }\n            if (annotation.comments) {\n                for (var j_2 = 0; j_2 < annotation.comments.length; j_2++) {\n                    if (annotation.comments[j_2].note === '' && annotation.commentType === 'delete') {\n                        // eslint-disable-next-line\n                        var commentDiv = document.getElementById(annotation.comments[j_2].annotName);\n                        this.deletComment(commentDiv);\n                    }\n                }\n            }\n            if (annotation.type === 'TextMarkup' || annotation.shapeAnnotationType === 'textMarkup') {\n                if (currentAnnotation.annotationSettings && annotation.annotationSettings) {\n                    if (currentAnnotation.annotationSettings.isLock !== annotation.annotationSettings.isLock) {\n                        // eslint-disable-next-line max-len\n                        var pageAnnotations = this.textMarkupAnnotationModule.modifyAnnotationProperty('AnnotationSettings', annotation.annotationSettings.isLock, null);\n                        // eslint-disable-next-line max-len\n                        this.textMarkupAnnotationModule.manageAnnotations(pageAnnotations, this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);\n                    }\n                }\n                if (currentAnnotation.opacity !== annotation.opacity) {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null, annotation.opacity);\n                }\n                if (currentAnnotation.color !== annotation.color) {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(annotation.color);\n                }\n                annotationType = 'textMarkup';\n                if (isTextMarkupUpdate) {\n                    this.textMarkupAnnotationModule.currentTextMarkupAnnotation = null;\n                    this.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n                }\n                // eslint-disable-next-line max-len\n            }\n            else if (annotation && annotation.stampAnnotationType === 'image' && annotation.shapeAnnotationType === 'stamp' && annotation.stampAnnotationPath) {\n                annotationType = 'stamp';\n                if (currentAnnotation.data !== annotation.stampAnnotationPath) {\n                    currentAnnotation.data = annotation.stampAnnotationPath;\n                    currentAnnotation.wrapper.children[0].imageSource = annotation.stampAnnotationPath;\n                }\n                if (annotation.opacity && currentAnnotation.opacity !== annotation.opacity) {\n                    this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n                }\n                this.calculateAnnotationBounds(currentAnnotation, annotation);\n                // eslint-disable-next-line max-len\n            }\n            else if (annotation.type === 'StickyNotes' || annotation.type === 'Stamp' || annotation.shapeAnnotationType === 'sticky' || annotation.shapeAnnotationType === 'stamp') {\n                if (annotation.opacity && currentAnnotation.opacity !== annotation.opacity) {\n                    this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n                }\n                this.calculateAnnotationBounds(currentAnnotation, annotation);\n                if (annotation.type === 'StickyNotes' || annotation.shapeAnnotationType === 'sticky') {\n                    annotationType = 'sticky';\n                }\n                else {\n                    annotationType = 'stamp';\n                }\n                // eslint-disable-next-line max-len\n            }\n            else if (annotation.type === 'Ink' || annotation.type === 'Shape' || annotation.type === 'Measure' || annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Polygon' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Ink') {\n                this.calculateAnnotationBounds(currentAnnotation, annotation);\n                if (annotation.opacity && currentAnnotation.opacity !== annotation.opacity) {\n                    this.annotationPropertyChange(currentAnnotation, annotation.opacity, 'Shape Opacity', clonedObject, redoClonedObject);\n                }\n                if (annotation.fillColor && currentAnnotation.fillColor !== annotation.fillColor) {\n                    redoClonedObject.fillColor = annotation.fillColor;\n                    if (annotation.labelSettings && annotation.labelSettings.fillColor) {\n                        annotation.labelSettings.fillColor = annotation.fillColor;\n                    }\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { fillColor: annotation.fillColor });\n                    this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Fill', '', clonedObject, redoClonedObject);\n                }\n                if (annotation.strokeColor && currentAnnotation.strokeColor !== annotation.strokeColor) {\n                    redoClonedObject.strokeColor = annotation.strokeColor;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { strokeColor: annotation.strokeColor });\n                    this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n                }\n                if (annotation.thickness && currentAnnotation.thickness !== annotation.thickness) {\n                    redoClonedObject.thickness = annotation.thickness;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { thickness: annotation.thickness });\n                    this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Thickness', '', clonedObject, redoClonedObject);\n                }\n                if (currentAnnotation.author !== annotation.author) {\n                    redoClonedObject.author = annotation.author;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { author: annotation.author });\n                    this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n                }\n                if (currentAnnotation.modifiedDate !== annotation.modifiedDate) {\n                    redoClonedObject.modifiedDate = annotation.modifiedDate;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { modifiedDate: annotation.modifiedDate });\n                }\n                if (currentAnnotation.subject !== annotation.subject) {\n                    redoClonedObject.subject = annotation.subject;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { subject: annotation.subject });\n                    this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Shape Stroke', '', clonedObject, redoClonedObject);\n                }\n                if (this.pdfViewer.enableShapeLabel && currentAnnotation.fontColor !== annotation.fontColor) {\n                    redoClonedObject.fontColor = annotation.fontColor;\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { fontColor: annotation.fontColor });\n                }\n                if (this.pdfViewer.enableShapeLabel && annotation.labelSettings && annotation.labelSettings.fillColor) {\n                    if (currentAnnotation.labelFillColor !== annotation.labelSettings.fillColor) {\n                        redoClonedObject.labelFillColor = annotation.labelSettings.fillColor;\n                        this.pdfViewer.nodePropertyChange(currentAnnotation, { labelFillColor: annotation.labelSettings.fillColor });\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Polyline' || annotation.shapeAnnotationType === 'Polygon') {\n                    if (JSON.stringify(currentAnnotation.vertexPoints) !== JSON.stringify(annotation.vertexPoints)) {\n                        currentAnnotation.vertexPoints = annotation.vertexPoints;\n                        this.pdfViewer.nodePropertyChange(currentAnnotation, { vertexPoints: annotation.vertexPoints });\n                    }\n                }\n                // eslint-disable-next-line max-len\n                if (annotation.subType === 'Line' || annotation.subType === 'Arrow' || annotation.subType === 'Distance' || annotation.subType === 'Perimeter') {\n                    var isSourceDecoraterShapesChanged = false;\n                    var isTargetDecoraterShapesChanged = false;\n                    var isBorderDashArrayChanged = false;\n                    clonedObject.lineHeadStart = currentAnnotation.sourceDecoraterShapes;\n                    clonedObject.lineHeadEnd = currentAnnotation.taregetDecoraterShapes;\n                    redoClonedObject.lineHeadStart = annotation.lineHeadStartStyle;\n                    redoClonedObject.lineHeadEnd = annotation.lineHeadEndStyle;\n                    redoClonedObject.borderDashArray = annotation.borderDashArray;\n                    if (currentAnnotation.taregetDecoraterShapes !== annotation.lineHeadEndStyle) {\n                        isTargetDecoraterShapesChanged = true;\n                    }\n                    if (currentAnnotation.sourceDecoraterShapes !== annotation.lineHeadStartStyle) {\n                        isSourceDecoraterShapesChanged = true;\n                    }\n                    if (currentAnnotation.borderDashArray !== annotation.borderDashArray) {\n                        isBorderDashArrayChanged = true;\n                    }\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, { sourceDecoraterShapes: annotation.lineHeadStartStyle, taregetDecoraterShapes: annotation.lineHeadEndStyle, borderDashArray: annotation.borderDashArray });\n                    // eslint-disable-next-line max-len\n                    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false, isSourceDecoraterShapesChanged, isTargetDecoraterShapesChanged, isBorderDashArrayChanged);\n                    // eslint-disable-next-line max-len\n                    this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, 'Line properties change', '', clonedObject, redoClonedObject);\n                }\n                // eslint-disable-next-line max-len\n                if (annotation.type === 'Shape' || annotation.shapeAnnotationType === 'Line' || annotation.shapeAnnotationType === 'Square' || annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Polygon') {\n                    annotationType = 'shape';\n                }\n                if (annotation.type === 'Ink' || annotation.shapeAnnotationType === 'Ink') {\n                    annotationType = 'ink';\n                }\n                // eslint-disable-next-line max-len\n                if (annotation.type === 'Measure' || annotation.subject === 'Distance calculation' || annotation.subject === 'Perimeter calculation' || annotation.subject === 'Radius calculation' || annotation.subject === 'Area calculation' || annotation.subject === 'Volume calculation') {\n                    annotationType = 'shape_measure';\n                }\n                if (annotation.labelSettings && this.pdfViewer.enableShapeLabel) {\n                    this.updateFreeTextProperties(currentAnnotation);\n                    this.pdfViewer.nodePropertyChange(currentAnnotation, {\n                        // eslint-disable-next-line max-len\n                        labelOpacity: annotation.labelSettings.opacity, fontColor: annotation.labelSettings.fontColor, fontSize: annotation.labelSettings.fontSize, fontFamily: annotation.labelSettings.fontFamily,\n                        labelContent: currentAnnotation.notes, labelFillColor: annotation.labelSettings.fillColor\n                    });\n                }\n                if (this.pdfViewer.enableShapeLabel && annotation.calibrate && annotation.calibrate.depth) {\n                    if (this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth !== annotation.calibrate.depth) {\n                        this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth = annotation.calibrate.depth;\n                        // eslint-disable-next-line max-len\n                        currentAnnotation.notes = this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(currentAnnotation.vertexPoints, currentAnnotation.id, currentAnnotation.pageIndex);\n                        currentAnnotation.labelContent = currentAnnotation.notes;\n                        if (annotation.labelSettings && annotation.labelSettings.labelContent) {\n                            annotation.labelSettings.labelContent = currentAnnotation.notes;\n                        }\n                        this.pdfViewer.nodePropertyChange(currentAnnotation, { labelContent: currentAnnotation.labelContent });\n                        // eslint-disable-next-line max-len\n                        this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName, currentAnnotation.notes);\n                    }\n                }\n            }\n            else if (annotation.type === 'FreeText' || annotation.shapeAnnotationType === 'FreeText') {\n                annotationType = 'freetext';\n                if (this.pdfViewer.freeTextSettings.enableAutoFit && currentAnnotation.dynamicText !== annotation.content) {\n                    // eslint-disable-next-line\n                    var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + currentAnnotation.pageIndex);\n                    var context = canvas.getContext(\"2d\");\n                    var fontSize = annotation.fontSize;\n                    var font = void 0;\n                    var fontFamily = annotation.fontFamily;\n                    var zoomFactor = this.pdfViewerBase.getZoomFactor();\n                    // eslint-disable-next-line\n                    annotation.font.isBold ? font = 'bold' + ' ' + fontSize + 'px' + ' ' + fontFamily : font = fontSize + 'px' + ' ' + fontFamily;\n                    context.font = font;\n                    var characterLength = 8;\n                    var highestTextNode = \"\";\n                    // eslint-disable-next-line\n                    var textNodes = [];\n                    var textboxValue = annotation.content ? annotation.content : annotation.dynamicText;\n                    if (textboxValue.indexOf('\\n') > -1) {\n                        textNodes = textboxValue.split('\\n');\n                        for (var j = 0; j < textNodes.length; j++) {\n                            // eslint-disable-next-line\n                            var textNodeData = context.measureText(textNodes[j]);\n                            // eslint-disable-next-line\n                            var highestTextNodeData = context.measureText(highestTextNode);\n                            if (textNodeData.width > highestTextNodeData.width) {\n                                highestTextNode = textNodes[j];\n                            }\n                        }\n                    }\n                    else {\n                        highestTextNode = textboxValue;\n                    }\n                    // eslint-disable-next-line\n                    var textwidth = context.measureText(highestTextNode);\n                    annotation.bounds.width = Math.ceil(textwidth.width + ((characterLength + 1) * 2));\n                    var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (annotation.pageIndex));\n                    var maxWidth = pageDiv.clientWidth - (annotation.bounds.left * zoomFactor);\n                    if (annotation.bounds.width > maxWidth) {\n                        annotation.bounds.width = maxWidth / zoomFactor;\n                    }\n                    var height = annotation.bounds.height;\n                    annotation.bounds.height = height >= currentAnnotation.bounds.height ? height : currentAnnotation.bounds.height;\n                }\n                this.calculateAnnotationBounds(currentAnnotation, annotation);\n                this.pdfViewer.nodePropertyChange(currentAnnotation, {\n                    // eslint-disable-next-line max-len\n                    opacity: annotation.opacity, fontColor: annotation.fontColor, fontSize: annotation.fontSize, fontFamily: annotation.fontFamily,\n                    // eslint-disable-next-line max-len\n                    dynamicText: annotation.content ? annotation.content : annotation.dynamicText, fillColor: annotation.fillColor, textAlign: annotation.textAlign, strokeColor: annotation.strokeColor, thickness: annotation.thickness, font: annotation.fontStyle ? this.setFreeTextFontStyle(annotation.fontStyle) : this.setFreeTextFontStyle(annotation.font),\n                    isReadonly: annotation.isReadonly\n                });\n                if (annotation.opacity && currentAnnotation.opacity !== annotation.opacity) {\n                    this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n                }\n                if (annotation.fillColor && currentAnnotation.fillColor !== annotation.fillColor) {\n                    this.triggerAnnotationPropChange(currentAnnotation, true, false, false, false);\n                }\n                if (annotation.strokeColor && currentAnnotation.strokeColor !== annotation.strokeColor) {\n                    this.triggerAnnotationPropChange(currentAnnotation, false, true, false, false);\n                }\n                if (annotation.thickness && currentAnnotation.thickness !== annotation.thickness) {\n                    this.triggerAnnotationPropChange(currentAnnotation, false, false, true, false);\n                }\n                if (annotation.content && this.pdfViewer.selectedItems.annotations[0]) {\n                    this.updateAnnotationComments(this.pdfViewer.selectedItems.annotations[0].annotName, annotation.content);\n                }\n                // eslint-disable-next-line\n                var newCommentDiv = document.getElementById(this.pdfViewer.element.id + '_commenttextbox_editor');\n                // eslint-disable-next-line\n                var commentObj = new InPlaceEditor({\n                    value: annotation.content\n                });\n                commentObj.appendTo(newCommentDiv);\n            }\n            currentAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n            if (currentAnnotation.customData !== annotation.customData) {\n                currentAnnotation.customData = annotation.customData;\n            }\n            currentAnnotation.isPrint = annotation.isPrint;\n            if (annotation.type !== 'TextMarkup') {\n                this.pdfViewer.renderDrawing();\n                this.updateCollection(annotationId, pageNumber, annotation, annotationType);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.annotationPropertyChange = function (currentAnnotation, opacity, actionString, clonedObject, redoClonedObject) {\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { opacity: opacity });\n        this.triggerAnnotationPropChange(currentAnnotation, false, false, false, true);\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex, null, currentAnnotation, actionString, '', clonedObject, redoClonedObject);\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.calculateAnnotationBounds = function (currentAnnotation, annotation) {\n        // eslint-disable-next-line\n        var bounds = this.pdfViewerBase.convertBounds(currentAnnotation.wrapper.bounds);\n        // eslint-disable-next-line\n        var annotBounds = this.pdfViewerBase.convertBounds(annotation.bounds);\n        if (bounds && annotBounds) {\n            // eslint-disable-next-line\n            if (JSON.stringify(bounds) !== JSON.stringify(annotBounds) && (Math.abs(bounds.Y - annotBounds.Y) > 2) || (Math.abs(bounds.X - annotBounds.X) > 2) || (Math.abs(bounds.Width - annotBounds.Width) > 2) || (Math.abs(bounds.Height - annotBounds.Height) > 2)) {\n                // eslint-disable-next-line\n                var annotationBounds = { x: annotBounds.X + (annotBounds.Width / 2), y: annotBounds.Y + (annotBounds.Height / 2), width: annotBounds.Width, height: annotBounds.Height };\n                this.pdfViewer.nodePropertyChange(currentAnnotation, { bounds: annotationBounds });\n                this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);\n                this.triggerAnnotationPropChange(currentAnnotation, false, false, false, false);\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateFreeTextProperties = function (annotation) {\n        if (annotation.labelSettings) {\n            if (annotation.labelSettings.fillColor) {\n                annotation.labelFillColor = annotation.labelSettings.fillColor;\n            }\n            if (annotation.labelSettings.fontColor) {\n                annotation.fontColor = annotation.labelSettings.fontColor;\n            }\n            if (annotation.labelSettings.fontSize) {\n                annotation.fontSize = annotation.labelSettings.fontSize;\n            }\n            if (annotation.labelSettings.fontFamily) {\n                annotation.fontFamily = annotation.labelSettings.fontFamily;\n            }\n            if (annotation.labelSettings.opacity) {\n                annotation.labelOpacity = annotation.labelSettings.opacity;\n            }\n            if (annotation.labelSettings.labelContent) {\n                annotation.labelContent = annotation.labelSettings.labelContent;\n            }\n        }\n    };\n    Annotation.prototype.updateAnnotationComments = function (annotationId, noteContent) {\n        // eslint-disable-next-line\n        var commentsDiv = document.getElementById(annotationId);\n        if (commentsDiv && commentsDiv.childNodes) {\n            if (commentsDiv.childNodes[0].ej2_instances) {\n                commentsDiv.childNodes[0].ej2_instances[0].value = noteContent;\n            }\n            else if (commentsDiv.childNodes[0].childNodes && commentsDiv.childNodes[0].childNodes[1].ej2_instances) {\n                commentsDiv.childNodes[0].childNodes[1].ej2_instances[0].value = noteContent;\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param currentAnnotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.addFreeTextProperties = function (annotation, currentAnnotation) {\n        if (this.pdfViewer.enableShapeLabel && annotation && currentAnnotation) {\n            currentAnnotation.labelSettings = {\n                fontColor: annotation.fontColor, fontSize: annotation.fontSize, fontFamily: annotation.fontFamily,\n                opacity: annotation.labelOpacity, labelContent: annotation.labelContent, fillColor: annotation.labelFillColor\n            };\n        }\n    };\n    Annotation.prototype.updateMeasurementSettings = function () {\n        if (this.pdfViewer.enableAnnotation && this.pdfViewer.enableMeasureAnnotation) {\n            // eslint-disable-next-line max-len\n            var ratioString = '1 ' + this.pdfViewer.measurementSettings.conversionUnit + ' = ' + this.pdfViewer.measurementSettings.scaleRatio + ' ' + this.pdfViewer.measurementSettings.displayUnit;\n            this.measureAnnotationModule.updateMeasureValues(ratioString, this.pdfViewer.measurementSettings.displayUnit, this.pdfViewer.measurementSettings.conversionUnit, this.pdfViewer.measurementSettings.depth);\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.updateCollection = function (annotationId, pageNumber, annotation, annotationType) {\n        // eslint-disable-next-line\n        var annotationCollection;\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType);\n        if (this.pdfViewerBase.isStorageExceed) {\n            storeObject = this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + annotationType];\n        }\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n                if (annotationCollection !== null) {\n                    for (var i = 0; i < annotationCollection.length; i++) {\n                        if (annotationCollection[i].annotName === annotationId) {\n                            // eslint-disable-next-line\n                            var newAnnot = this.modifyAnnotationProperties(annotationCollection[i], annotation, annotationType);\n                            annotationCollection[i] = newAnnot;\n                        }\n                    }\n                    if (!this.pdfViewerBase.isStorageExceed) {\n                        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType);\n                    }\n                    if (annotObject[index]) {\n                        annotObject[index].annotations = annotationCollection;\n                    }\n                    var annotationStringified = JSON.stringify(annotObject);\n                    if (this.pdfViewerBase.isStorageExceed) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId + '_annotations_' + annotationType] = annotationStringified;\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_' + annotationType, annotationStringified);\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.modifyAnnotationProperties = function (newAnnotation, annotation, annotationType) {\n        if (annotation && annotation.isCommentLock === true) {\n            newAnnotation.isCommentLock = annotation.isCommentLock;\n        }\n        if (annotation.comments) {\n            for (var j = 0; j < annotation.comments.length; j++) {\n                if (annotation.comments[j].isLock === true) {\n                    newAnnotation.comments[j].isLock = annotation.comments[j].isLock;\n                }\n            }\n        }\n        if (annotation && annotation.note !== '' && annotation.note !== undefined) {\n            newAnnotation.note = annotation.note;\n        }\n        if (annotation.commentId && annotation.editComment && annotation.commentType === 'edit') {\n            // eslint-disable-next-line\n            var commentDiv = document.getElementById(annotation.commentId);\n            if (annotation.annotationId === annotation.commentId) {\n                newAnnotation.note = commentDiv.childNodes[1].ej2_instances[0].value;\n            }\n            for (var j = 0; j < annotation.comments.length; j++) {\n                if (annotation.comments[j].annotName === annotation.commentId) {\n                    newAnnotation.comments[j].note = commentDiv.childNodes[1].ej2_instances[0].value;\n                }\n            }\n        }\n        if (annotationType === 'textMarkup') {\n            newAnnotation.opacity = annotation.opacity;\n            newAnnotation.color = annotation.color;\n            newAnnotation.allowedInteractions = annotation.allowedInteractions;\n        }\n        else if (annotationType === 'sticky' || annotationType === 'stamp') {\n            if (annotation.bounds) {\n                newAnnotation.bounds = annotation.bounds;\n            }\n            newAnnotation.opacity = annotation.opacity;\n            newAnnotation.annotationSettings = annotation.annotationSettings;\n            newAnnotation.allowedInteractions = annotation.allowedInteractions;\n            if (annotation.stampAnnotationPath) {\n                newAnnotation.stampAnnotationPath = annotation.stampAnnotationPath;\n            }\n        }\n        else if (annotationType === 'ink') {\n            if (annotation.bounds) {\n                newAnnotation.bounds = annotation.bounds;\n            }\n            newAnnotation.opacity = annotation.opacity;\n            newAnnotation.strokeColor = annotation.strokeColor;\n            newAnnotation.thickness = annotation.thickness;\n            newAnnotation.annotationSettings = annotation.annotationSettings;\n            newAnnotation.allowedInteractions = annotation.allowedInteractions;\n        }\n        else if (annotationType === 'shape' || annotationType === 'shape_measure') {\n            if (annotation.subType === 'Line' || annotation.subType === 'Arrow' || annotation.subType === 'Distance' ||\n                annotation.subType === 'Perimeter') {\n                if (annotation.bounds) {\n                    newAnnotation.bounds = annotation.bounds;\n                }\n                if (annotation.vertexPoint) {\n                    newAnnotation.vertexPoints = annotation.vertexPoints;\n                }\n                newAnnotation.opacity = annotation.opacity;\n                newAnnotation.fillColor = annotation.fillColor;\n                newAnnotation.strokeColor = annotation.strokeColor;\n                newAnnotation.thickness = annotation.thickness;\n                newAnnotation.borderDashArray = annotation.borderDashArray;\n                newAnnotation.lineHeadStart = this.getArrowTypeForCollection(annotation.lineHeadStartStyle);\n                newAnnotation.lineHeadEnd = this.getArrowTypeForCollection(annotation.lineHeadEndStyle);\n                newAnnotation.annotationSettings = annotation.annotationSettings;\n                newAnnotation.allowedInteractions = annotation.allowedInteractions;\n            }\n            else {\n                if (annotation.bounds) {\n                    newAnnotation.bounds = annotation.bounds;\n                }\n                if (annotation.vertexPoint) {\n                    newAnnotation.vertexPoints = annotation.vertexPoints;\n                }\n                newAnnotation.opacity = annotation.opacity;\n                newAnnotation.fillColor = annotation.fillColor;\n                newAnnotation.strokeColor = annotation.strokeColor;\n                newAnnotation.thickness = annotation.thickness;\n                newAnnotation.annotationSettings = annotation.annotationSettings;\n                newAnnotation.allowedInteractions = annotation.allowedInteractions;\n                if (annotation.calibrate) {\n                    if (newAnnotation.annotName === annotation.annotationId) {\n                        if (newAnnotation.calibrate.depth !== annotation.calibrate.depth) {\n                            newAnnotation.calibrate.depth = annotation.calibrate.depth;\n                            this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth = annotation.calibrate.depth;\n                            // eslint-disable-next-line max-len\n                            newAnnotation.note = this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(newAnnotation.vertexPoints);\n                        }\n                    }\n                }\n            }\n            if (this.pdfViewer.enableShapeLabel && annotation.labelSettings) {\n                var text = annotation.labelSettings.labelContent;\n                newAnnotation.note = text;\n                newAnnotation.fontSize = annotation.labelSettings.fontSize;\n                newAnnotation.labelFillColor = annotation.labelSettings.fillColor;\n                if (newAnnotation.labelContent) {\n                    newAnnotation.labelContent = text;\n                }\n                if (newAnnotation.labelSettings) {\n                    newAnnotation.labelSettings = annotation.labelSettings;\n                }\n                this.updateAnnotationComments(newAnnotation.annotName, text);\n            }\n        }\n        else if (annotationType === 'freetext') {\n            if (annotation.bounds) {\n                newAnnotation.bounds = annotation.bounds;\n            }\n            newAnnotation.opacity = annotation.opacity;\n            newAnnotation.strokeColor = annotation.strokeColor;\n            newAnnotation.thickness = annotation.thickness;\n            if (annotation.content) {\n                newAnnotation.dynamicText = annotation.content;\n            }\n            newAnnotation.fontFamily = annotation.fontFamily;\n            newAnnotation.fontSize = annotation.fontSize;\n            newAnnotation.fontColor = annotation.fontColor;\n            newAnnotation.fillColor = annotation.fillColor;\n            newAnnotation.font = annotation.font ? annotation.font : annotation.fontStyle;\n            newAnnotation.textAlign = annotation.textAlign;\n            newAnnotation.annotationSettings = annotation.annotationSettings;\n            newAnnotation.allowedInteractions = annotation.allowedInteractions;\n            newAnnotation.isReadonly = annotation.isReadonly;\n        }\n        newAnnotation.customData = annotation.customData;\n        newAnnotation.modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n        newAnnotation.isPrint = annotation.isPrint;\n        if (annotation.annotationSettings && !isNullOrUndefined(annotation.annotationSettings.isLock)) {\n            newAnnotation.isLocked = annotation.annotationSettings.isLock;\n        }\n        return newAnnotation;\n    };\n    /**\n     * @param annotationType\n     * @param annotationSubType\n     * @param annotationType\n     * @param annotationSubType\n     * @private\n     */\n    Annotation.prototype.updateAnnotationAuthor = function (annotationType, annotationSubType) {\n        var annotationAuthor;\n        if (annotationType === 'sticky') {\n            // eslint-disable-next-line max-len\n            annotationAuthor = (this.pdfViewer.stickyNotesSettings.author !== 'Guest') ? this.pdfViewer.stickyNotesSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n        }\n        else if (annotationType === 'stamp') {\n            // eslint-disable-next-line max-len\n            annotationAuthor = (this.pdfViewer.stampSettings.author !== 'Guest') ? this.pdfViewer.stampSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n        }\n        else if (annotationType === 'shape') {\n            if (annotationSubType === 'Line') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.lineSettings.author !== 'Guest') ? this.pdfViewer.lineSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'LineWidthArrowHead' || annotationSubType === 'Arrow') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.arrowSettings.author !== 'Guest') ? this.pdfViewer.arrowSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Circle' || annotationSubType === 'Ellipse' || annotationSubType === 'Oval') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.circleSettings.author !== 'Guest') ? this.pdfViewer.circleSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Rectangle' || annotationSubType === 'Square') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.rectangleSettings.author !== 'Guest') ? this.pdfViewer.rectangleSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Polygon') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.polygonSettings.author !== 'Guest') ? this.pdfViewer.polygonSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n        }\n        else if (annotationType === 'measure') {\n            if (annotationSubType === 'Distance' || annotationSubType === 'Distance calculation') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.distanceSettings.author !== 'Guest') ? this.pdfViewer.distanceSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Perimeter' || annotationSubType === 'Perimeter calculation') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.perimeterSettings.author !== 'Guest') ? this.pdfViewer.perimeterSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Radius' || annotationSubType === 'Radius calculation') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.radiusSettings.author !== 'Guest') ? this.pdfViewer.radiusSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Area' || annotationSubType === 'Area calculation') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.areaSettings.author !== 'Guest') ? this.pdfViewer.areaSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Volume' || annotationSubType === 'Volume calculation') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.volumeSettings.author !== 'Guest') ? this.pdfViewer.volumeSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n        }\n        else if (annotationType === 'textMarkup') {\n            if (annotationSubType === 'Highlight') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.highlightSettings.author !== 'Guest') ? this.pdfViewer.highlightSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Underline') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.underlineSettings.author !== 'Guest') ? this.pdfViewer.underlineSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else if (annotationSubType === 'Strikethrough') {\n                // eslint-disable-next-line max-len\n                annotationAuthor = (this.pdfViewer.strikethroughSettings.author !== 'Guest') ? this.pdfViewer.strikethroughSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n            }\n            else {\n                // eslint-disable-next-line max-len\n                annotationAuthor = this.pdfViewer.annotationSettings.author;\n            }\n        }\n        else if (annotationType === 'freeText') {\n            // eslint-disable-next-line max-len\n            annotationAuthor = (this.pdfViewer.freeTextSettings.author !== 'Guest') ? this.pdfViewer.freeTextSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n        }\n        else if (annotationType === 'ink') {\n            // eslint-disable-next-line max-len\n            annotationAuthor = (this.pdfViewer.inkAnnotationSettings.author !== 'Guest') ? this.pdfViewer.inkAnnotationSettings.author : this.pdfViewer.annotationSettings.author ? this.pdfViewer.annotationSettings.author : 'Guest';\n        }\n        if (!annotationAuthor) {\n            // eslint-disable-next-line max-len\n            annotationAuthor = this.pdfViewer.annotationSettings.author;\n        }\n        return annotationAuthor;\n    };\n    /**\n     * @param colour\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.nameToHash = function (colour) {\n        // eslint-disable-next-line\n        var colours = {\n            'aliceblue': '#f0f8ff', 'antiquewhite': '#faebd7', 'aqua': '#00ffff', 'aquamarine': '#7fffd4', 'azure': '#f0ffff',\n            'beige': '#f5f5dc', 'bisque': '#ffe4c4', 'black': '#000000', 'blanchedalmond': '#ffebcd', 'blue': '#0000ff',\n            'blueviolet': '#8a2be2', 'brown': '#a52a2a', 'burlywood': '#deb887', 'yellow': '#ffff00', 'yellowgreen': '#9acd32',\n            'cadetblue': '#5f9ea0', 'chartreuse': '#7fff00', 'chocolate': '#d2691e', 'coral': '#ff7f50',\n            'cornflowerblue': '#6495ed', 'cornsilk': '#fff8dc', 'crimson': '#dc143c',\n            'cyan': '#00ffff', 'darkblue': '#00008b', 'darkcyan': '#008b8b', 'darkgoldenrod': '#b8860b', 'darkgray': '#a9a9a9',\n            'darkred': '#8b0000', 'darksalmon': '#e9967a', 'darkgreen': '#006400', 'darkkhaki': '#bdb76b',\n            'darkmagenta': '#8b008b', 'darkolivegreen': '#556b2f', 'darkorange': '#ff8c00', 'darkorchid': '#9932cc',\n            'darkseagreen': '#8fbc8f', 'darkslateblue': '#483d8b', 'darkslategray': '#2f4f4f', 'darkturquoise': '#00ced1',\n            'darkviolet': '#9400d3', 'deeppink': '#ff1493', 'deepskyblue': '#00bfff', 'dimgray': '#696969',\n            'dodgerblue': '#1e90ff', 'firebrick': '#b22222', 'floralwhite': '#fffaf0',\n            'forestgreen': '#228b22', 'fuchsia': '#ff00ff', 'gainsboro': '#dcdcdc', 'ghostwhite': '#f8f8ff',\n            'gold': '#ffd700', 'goldenrod': '#daa520', 'gray': '#808080', 'green': '#008000',\n            'greenyellow': '#adff2f', 'honeydew': '#f0fff0', 'hotpink': '#ff69b4', 'indianred ': '#cd5c5c',\n            'mediumorchid': '#ba55d3', 'mediumpurple': '#9370d8', 'indigo': '#4b0082', 'ivory': '#fffff0',\n            'navy': '#000080', 'oldlace': '#fdf5e6', 'olive': '#808000', 'khaki': '#f0e68c',\n            'lavender': '#e6e6fa', 'lavenderblush': '#fff0f5', 'lawngreen': '#7cfc00', 'lemonchiffon': '#fffacd',\n            'lightblue': '#add8e6', 'lightcoral': '#f08080', 'lightcyan': '#e0ffff',\n            'lightgoldenrodyellow': '#fafad2', 'lightgrey': '#d3d3d3', 'lightgreen': '#90ee90',\n            'lightpink': '#ffb6c1', 'lightsalmon': '#ffa07a', 'lightseagreen': '#20b2aa',\n            'lightskyblue': '#87cefa', 'lightslategray': '#778899', 'lightsteelblue': '#b0c4de',\n            'lightyellow': '#ffffe0', 'lime': '#00ff00', 'limegreen': '#32cd32', 'linen': '#faf0e6',\n            'magenta': '#ff00ff', 'maroon': '#800000', 'mediumaquamarine': '#66cdaa', 'mediumblue': '#0000cd',\n            'mediumseagreen': '#3cb371', 'mediumslateblue': '#7b68ee', 'mediumspringgreen': '#00fa9a',\n            'mediumturquoise': '#48d1cc', 'mediumvioletred': '#c71585', 'midnightblue': '#191970',\n            'mintcream': '#f5fffa', 'mistyrose': '#ffe4e1', 'moccasin': '#ffe4b5', 'navajowhite': '#ffdead',\n            'rebeccapurple': '#663399', 'red': '#ff0000', 'rosybrown': '#bc8f8f', 'royalblue': '#4169e1',\n            'olivedrab': '#6b8e23', 'orange': '#ffa500', 'orangered': '#ff4500', 'orchid': '#da70d6',\n            'palegoldenrod': '#eee8aa', 'palegreen': '#98fb98', 'paleturquoise': '#afeeee',\n            'palevioletred': '#d87093', 'papayawhip': '#ffefd5', 'peachpuff': '#ffdab9', 'peru': '#cd853f',\n            'wheat': '#f5deb3', 'white': '#ffffff', 'whitesmoke': '#f5f5f5', 'pink': '#ffc0cb', 'plum': '#dda0dd',\n            'steelblue': '#4682b4', 'violet': '#ee82ee', 'powderblue': '#b0e0e6', 'purple': '#800080',\n            'saddlebrown': '#8b4513', 'salmon': '#fa8072', 'sandybrown': '#f4a460', 'seagreen': '#2e8b57',\n            'seashell': '#fff5ee', 'sienna': '#a0522d', 'silver': '#c0c0c0', 'skyblue': '#87ceeb',\n            'slateblue': '#6a5acd', 'slategray': '#708090', 'snow': '#fffafa', 'springgreen': '#00ff7f',\n            'tan': '#d2b48c', 'teal': '#008080', 'thistle': '#d8bfd8', 'tomato': '#ff6347', 'turquoise': '#40e0d0'\n        };\n        if (typeof colours[colour.toLowerCase()] !== 'undefined') {\n            return colours[colour.toLowerCase()];\n        }\n        return '';\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.updateFreeTextFontStyle = function (font) {\n        // eslint-disable-next-line\n        var fontStyle = 0;\n        if (font.isBold === 1) {\n            fontStyle = 1;\n        }\n        else if (font.isItalic === 2) {\n            fontStyle = 2;\n        }\n        else if (font.isUnderline === 4) {\n            fontStyle = 4;\n        }\n        else if (font.isStrikeout) {\n            fontStyle = 8;\n        }\n        else {\n            fontStyle = { isBold: font.isBold, isItalic: font.isItalic, isUnderline: font.isUnderline, isStrikeout: font.isUnderline };\n        }\n        return fontStyle;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.setFreeTextFontStyle = function (fontStyle) {\n        if (fontStyle === 1) {\n            return { isBold: true };\n        }\n        else if (fontStyle === 2) {\n            return { isItalic: true };\n        }\n        else if (fontStyle === 4) {\n            return { isUnderline: true };\n        }\n        else if (fontStyle === 8) {\n            return { isStrikeout: true };\n        }\n        else {\n            return { isBold: fontStyle.isBold, isItalic: fontStyle.isItalic, isUnderline: fontStyle.isUnderline, isStrikeout: fontStyle.isUnderline };\n        }\n    };\n    /**\n     * @param annotation\n     * @param isSettings\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.findAnnotationSettings = function (annotation, isSettings) {\n        // eslint-disable-next-line\n        var annotSettings = this.pdfViewer.annotationSettings;\n        if (annotation) {\n            // eslint-disable-next-line\n            var shapeType = annotation.shapeAnnotationType;\n            if (shapeType === 'StickyNotes' && this.pdfViewer.stickyNotesSettings) {\n                annotSettings = this.pdfViewer.stickyNotesSettings;\n            }\n            else if (shapeType === 'Stamp' || shapeType === 'Image') {\n                annotSettings = this.pdfViewer.stampSettings;\n                // eslint-disable-next-line max-len\n                if ((shapeType === 'image' || shapeType === 'Image')) {\n                    annotSettings = this.pdfViewer.customStampSettings;\n                }\n            }\n            else if (shapeType === 'FreeText') {\n                annotSettings = this.pdfViewer.freeTextSettings;\n            }\n            else if (annotation.measureType === '') {\n                if (shapeType === 'Line') {\n                    annotSettings = this.pdfViewer.lineSettings;\n                    // eslint-disable-next-line max-len\n                }\n                else if ((shapeType === 'Arrow' || shapeType === 'LineWidthArrowHead')) {\n                    annotSettings = this.pdfViewer.arrowSettings;\n                }\n                else if (shapeType === 'Rectangle') {\n                    annotSettings = this.pdfViewer.rectangleSettings;\n                    // eslint-disable-next-line max-len\n                }\n                else if ((shapeType === 'Circle' || shapeType === 'Ellipse')) {\n                    annotSettings = this.pdfViewer.circleSettings;\n                }\n                else if (shapeType === 'Polygon' && this.pdfViewer.polygonSettings) {\n                    annotSettings = this.pdfViewer.polygonSettings;\n                }\n            }\n            else if (annotation.measureType !== '') {\n                if (annotation.measureType === 'Distance') {\n                    annotSettings = this.pdfViewer.distanceSettings;\n                }\n                else if (annotation.measureType === 'Perimeter') {\n                    annotSettings = this.pdfViewer.perimeterSettings;\n                }\n                else if (annotation.measureType === 'Area') {\n                    annotSettings = this.pdfViewer.areaSettings;\n                }\n                else if (annotation.measureType === 'Radius') {\n                    annotSettings = this.pdfViewer.radiusSettings;\n                }\n                else if (annotation.measureType === 'Volume') {\n                    annotSettings = this.pdfViewer.volumeSettings;\n                }\n            }\n        }\n        var settings = annotation ? annotation.annotationSettings : {};\n        if (settings && (settings.minWidth || settings.maxWidth || settings.minHeight || settings.maxHeight)) {\n            return this.updateSettings(settings);\n        }\n        else if (isSettings) {\n            return this.updateSettings(annotSettings);\n        }\n        else {\n            return annotSettings;\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateAnnotationSettings = function (annotation) {\n        // eslint-disable-next-line\n        var annotSettings = this.pdfViewer.annotationSettings;\n        if (annotation.AnnotType === 'sticky') {\n            annotSettings = this.pdfViewer.stickyNotesSettings;\n        }\n        else if (annotation.AnnotType === 'stamp' || annotation.AnnotType === 'image' || annotation.AnnotType === 'Image') {\n            annotSettings = this.pdfViewer.stampSettings;\n            // eslint-disable-next-line max-len\n            if ((annotation.Subject === 'image' || annotation.Subject === 'Image')) {\n                annotSettings = this.pdfViewer.customStampSettings;\n            }\n        }\n        else if (annotation.AnnotType === 'freeText') {\n            annotSettings = this.pdfViewer.freeTextSettings;\n        }\n        else if (annotation.AnnotType === 'shape') {\n            if (annotation.Subject === 'Line') {\n                annotSettings = this.pdfViewer.lineSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Arrow' || annotation.Subject === 'LineWidthArrowHead')) {\n                annotSettings = this.pdfViewer.arrowSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Rectangle' || annotation.Subject === 'Square')) {\n                annotSettings = this.pdfViewer.rectangleSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Circle' || annotation.Subject === 'Ellipse' || annotation.Subject === 'Oval')) {\n                annotSettings = this.pdfViewer.circleSettings;\n            }\n            else if (annotation.Subject === 'Polygon') {\n                annotSettings = this.pdfViewer.polygonSettings;\n            }\n        }\n        else if (annotation.AnnotType === 'shape_measure') {\n            // eslint-disable-next-line max-len\n            if ((annotation.Subject === 'Distance' || annotation.Subject === 'Distance calculation')) {\n                annotSettings = this.pdfViewer.distanceSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Perimeter' || annotation.Subject === 'Perimeter calculation')) {\n                annotSettings = this.pdfViewer.perimeterSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Area' || annotation.Subject === 'Area calculation')) {\n                annotSettings = this.pdfViewer.areaSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Radius' || annotation.Subject === 'Radius calculation')) {\n                annotSettings = this.pdfViewer.radiusSettings;\n                // eslint-disable-next-line max-len\n            }\n            else if ((annotation.Subject === 'Volume' || annotation.Subject === 'Volume calculation')) {\n                annotSettings = this.pdfViewer.volumeSettings;\n            }\n        }\n        return this.updateSettings(annotSettings);\n    };\n    /**\n     * @param annotationSettings\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateSettings = function (annotationSettings) {\n        var maxHeight = 0;\n        var maxWidth = 0;\n        var minHeight = 0;\n        var minWidth = 0;\n        var isLock = false;\n        var isPrint = true;\n        // eslint-disable-next-line\n        var settings = this.pdfViewer.annotationSettings;\n        if (annotationSettings.minWidth || annotationSettings.maxWidth || annotationSettings.minHeight || annotationSettings.maxHeight) {\n            maxHeight = annotationSettings.maxHeight ? annotationSettings.maxHeight : 2000;\n            maxWidth = annotationSettings.maxWidth ? annotationSettings.maxWidth : 2000;\n            minHeight = annotationSettings.minHeight ? annotationSettings.minHeight : 0;\n            minWidth = annotationSettings.minWidth ? annotationSettings.minWidth : 0;\n        }\n        else if (settings.minWidth || settings.maxWidth || settings.minHeight || settings.maxHeight) {\n            maxHeight = settings.maxHeight ? settings.maxHeight : 2000;\n            maxWidth = settings.maxWidth ? settings.maxWidth : 2000;\n            minHeight = settings.minHeight ? settings.minHeight : 0;\n            minWidth = settings.minWidth ? settings.minWidth : 0;\n        }\n        isLock = annotationSettings.isLock ? annotationSettings.isLock : settings.isLock ? settings.isLock : false;\n        isPrint = annotationSettings.isPrint;\n        return { minWidth: minWidth, maxWidth: maxWidth, minHeight: minHeight, maxHeight: maxHeight, isLock: isLock, isPrint: isPrint };\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.getOverlappedAnnotations = function (annotation, pageNumber) {\n        // eslint-disable-next-line\n        var pageCollections = this.getPageShapeAnnotations(pageNumber);\n        // eslint-disable-next-line\n        var selectedAnnotation;\n        for (var i = 0; i < pageCollections.length; i++) {\n            if (annotation.annotName === pageCollections[i].annotName) {\n                selectedAnnotation = pageCollections[i];\n                break;\n            }\n        }\n        // eslint-disable-next-line\n        var annotationCollection = this.findOverlappedAnnotations(selectedAnnotation, pageCollections);\n        return annotationCollection;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.getPageShapeAnnotations = function (pageNumber) {\n        // eslint-disable-next-line\n        var pageCollections = [];\n        // eslint-disable-next-line\n        var inkObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n        if (inkObject) {\n            var inkAnnotObject = JSON.parse(inkObject);\n            if (inkAnnotObject) {\n                var index = this.getPageCollection(inkAnnotObject, pageNumber);\n                if (inkAnnotObject[index]) {\n                    // eslint-disable-next-line\n                    var inkAnnotations = inkAnnotObject[index].annotations;\n                    if (inkAnnotations && inkAnnotations.length > 0) {\n                        for (var i = 0; i < inkAnnotations.length; i++) {\n                            pageCollections.push(inkAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var shapeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape');\n        if (shapeObject) {\n            var shapeAnnotObject = JSON.parse(shapeObject);\n            if (shapeAnnotObject) {\n                var index = this.getPageCollection(shapeAnnotObject, pageNumber);\n                if (shapeAnnotObject[index]) {\n                    // eslint-disable-next-line\n                    var shapeAnnotations = shapeAnnotObject[index].annotations;\n                    if (shapeAnnotations && shapeAnnotations.length > 0) {\n                        for (var i = 0; i < shapeAnnotations.length; i++) {\n                            pageCollections.push(shapeAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var measureObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_shape_measure');\n        if (measureObject) {\n            var measureAnnotationObject = JSON.parse(measureObject);\n            if (measureAnnotationObject) {\n                var index = this.getPageCollection(measureAnnotationObject, pageNumber);\n                if (measureAnnotationObject[index]) {\n                    // eslint-disable-next-line\n                    var measureAnnotations = measureAnnotationObject[index].annotations;\n                    if (measureAnnotations && measureAnnotations.length > 0) {\n                        for (var i = 0; i < measureAnnotations.length; i++) {\n                            pageCollections.push(measureAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var stampObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_stamp');\n        if (stampObject) {\n            var stampAnnotationObject = JSON.parse(stampObject);\n            if (stampAnnotationObject) {\n                var index = this.getPageCollection(stampAnnotationObject, pageNumber);\n                if (stampAnnotationObject[index]) {\n                    // eslint-disable-next-line\n                    var stampAnnotations = stampAnnotationObject[index].annotations;\n                    if (stampAnnotations && stampAnnotations.length > 0) {\n                        for (var i = 0; i < stampAnnotations.length; i++) {\n                            pageCollections.push(stampAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var freeTextObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_freetext');\n        if (freeTextObject) {\n            var freeTextAnnotationObject = JSON.parse(freeTextObject);\n            if (freeTextAnnotationObject) {\n                var index = this.getPageCollection(freeTextAnnotationObject, pageNumber);\n                if (freeTextAnnotationObject[index]) {\n                    // eslint-disable-next-line\n                    var freeTextAnnotations = freeTextAnnotationObject[index].annotations;\n                    if (freeTextAnnotations && freeTextAnnotations.length > 0) {\n                        for (var i = 0; i < freeTextAnnotations.length; i++) {\n                            pageCollections.push(freeTextAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var stickyObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n        if (stickyObject) {\n            var stickyNotesAnnotationObject = JSON.parse(stickyObject);\n            if (stickyNotesAnnotationObject) {\n                var index = this.getPageCollection(stickyNotesAnnotationObject, pageNumber);\n                if (stickyNotesAnnotationObject[index]) {\n                    // eslint-disable-next-line\n                    var stickyNotesAnnotations = stickyNotesAnnotationObject[index].annotations;\n                    if (stickyNotesAnnotations && stickyNotesAnnotations.length > 0) {\n                        for (var i = 0; i < stickyNotesAnnotations.length; i++) {\n                            pageCollections.push(stickyNotesAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        // eslint-disable-next-line\n        var textMarkupObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (textMarkupObject) {\n            var textMarkupAnnotationObject = JSON.parse(textMarkupObject);\n            if (textMarkupAnnotationObject) {\n                var index = this.getPageCollection(textMarkupAnnotationObject, pageNumber);\n                if (textMarkupAnnotationObject[index]) {\n                    // eslint-disable-next-line\n                    var textMarkupAnnotations = textMarkupAnnotationObject[index].annotations;\n                    if (textMarkupAnnotations && textMarkupAnnotations.length > 0) {\n                        for (var i = 0; i < textMarkupAnnotations.length; i++) {\n                            pageCollections.push(textMarkupAnnotations[i]);\n                        }\n                    }\n                }\n            }\n        }\n        return pageCollections;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.findOverlappedAnnotations = function (annotation, pageCollections) {\n        this.overlappedAnnotations = [];\n        if (annotation && annotation.bounds) {\n            if (annotation.shapeAnnotationType === 'textMarkup') {\n                for (var i = 0; i < annotation.bounds.length; i++) {\n                    // eslint-disable-next-line\n                    var bounds = this.orderTextMarkupBounds(annotation.bounds[i]);\n                    this.calculateOverlappedAnnotationBounds(annotation, bounds, pageCollections);\n                }\n            }\n            else {\n                this.calculateOverlappedAnnotationBounds(annotation, annotation.bounds, pageCollections);\n            }\n        }\n        return this.overlappedAnnotations;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.calculateOverlappedAnnotationBounds = function (annotation, bounds, pageCollections) {\n        // eslint-disable-next-line\n        var selectBounds = bounds;\n        if (annotation.shapeAnnotationType === 'Ink') {\n            selectBounds = { left: bounds.x, top: bounds.y, height: bounds.height, width: bounds.width };\n        }\n        // eslint-disable-next-line\n        var left = parseInt(selectBounds.left);\n        // eslint-disable-next-line\n        var top = parseInt(selectBounds.top);\n        // eslint-disable-next-line\n        var totalHeight = parseInt(selectBounds.top + selectBounds.height);\n        // eslint-disable-next-line\n        var totalWidth = parseInt(selectBounds.left + selectBounds.width);\n        for (var i = 0; i < pageCollections.length; i++) {\n            if (annotation.annotName === pageCollections[i].annotName) {\n                this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n            }\n            else {\n                var boundsCount = 1;\n                if (pageCollections[i].shapeAnnotationType === 'textMarkup') {\n                    boundsCount = pageCollections[i].bounds.length;\n                }\n                for (var j = 0; j < boundsCount; j++) {\n                    // eslint-disable-next-line\n                    var annotationBounds = void 0;\n                    // eslint-disable-next-line\n                    var annotationBoundsCollection = pageCollections[i].bounds;\n                    if (pageCollections[i].shapeAnnotationType === 'Ink') {\n                        // eslint-disable-next-line\n                        annotationBoundsCollection = { left: annotationBoundsCollection.x, top: annotationBoundsCollection.y, height: annotationBoundsCollection.height, width: annotationBoundsCollection.width };\n                    }\n                    if (pageCollections[i].shapeAnnotationType !== 'textMarkup' && boundsCount === 1) {\n                        annotationBounds = annotationBoundsCollection;\n                    }\n                    else {\n                        // eslint-disable-next-line\n                        annotationBounds = this.orderTextMarkupBounds(annotationBoundsCollection[j]);\n                    }\n                    if (annotationBounds) {\n                        var isOverlapped = false;\n                        // eslint-disable-next-line\n                        if (((left <= parseInt(annotationBounds.left)) && (totalWidth >= parseInt(annotationBounds.left))) || ((left <= parseInt(annotationBounds.left + annotationBounds.width)) && (totalWidth >= parseInt(annotationBounds.left + annotationBounds.width)))) {\n                            isOverlapped = true;\n                        }\n                        if (isOverlapped) {\n                            // eslint-disable-next-line\n                            if (((top <= parseInt(annotationBounds.top)) && (totalHeight >= parseInt(annotationBounds.top))) || ((top <= parseInt(annotationBounds.top + annotationBounds.height)) && (totalHeight >= parseInt(annotationBounds.top + annotationBounds.height)))) {\n                                isOverlapped = true;\n                            }\n                            else {\n                                isOverlapped = false;\n                            }\n                        }\n                        if (isOverlapped) {\n                            this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                        }\n                        else {\n                            // eslint-disable-next-line\n                            if (((parseInt(annotationBounds.left) <= left) && (parseInt(annotationBounds.left + annotationBounds.width) >= left)) || ((totalWidth >= parseInt(annotationBounds.left)) && (totalWidth <= parseInt(annotationBounds.left + annotationBounds.width)))) {\n                                isOverlapped = true;\n                            }\n                            if (isOverlapped) {\n                                // eslint-disable-next-line\n                                if (((parseInt(annotationBounds.top) <= top) && parseInt(annotationBounds.top + annotationBounds.height) >= top) || ((totalHeight >= parseInt(annotationBounds.top)) && (totalHeight <= parseInt(annotationBounds.top + annotationBounds.height)))) {\n                                    isOverlapped = true;\n                                }\n                                else {\n                                    isOverlapped = false;\n                                }\n                            }\n                            if (isOverlapped) {\n                                this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                            }\n                            else {\n                                // eslint-disable-next-line\n                                if (((left <= parseInt(annotationBounds.left)) && (totalWidth >= parseInt(annotationBounds.left))) || ((left <= parseInt(annotationBounds.left + annotationBounds.width)) && (totalWidth >= parseInt(annotationBounds.left + annotationBounds.width)))) {\n                                    isOverlapped = true;\n                                }\n                                if (isOverlapped) {\n                                    // eslint-disable-next-line\n                                    if (((parseInt(annotationBounds.top) <= top) && parseInt(annotationBounds.top + annotationBounds.height) >= top) || ((totalHeight >= parseInt(annotationBounds.top)) && (totalHeight <= parseInt(annotationBounds.top + annotationBounds.height)))) {\n                                        isOverlapped = true;\n                                    }\n                                    else {\n                                        isOverlapped = false;\n                                    }\n                                }\n                                if (isOverlapped) {\n                                    this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                                }\n                                else {\n                                    // eslint-disable-next-line\n                                    if (((parseInt(annotationBounds.left) <= left) && (parseInt(annotationBounds.left + annotationBounds.width) >= left)) || ((totalWidth >= parseInt(annotationBounds.left)) && (totalWidth <= parseInt(annotationBounds.left + annotationBounds.width)))) {\n                                        isOverlapped = true;\n                                    }\n                                    if (isOverlapped) {\n                                        // eslint-disable-next-line\n                                        if (((top <= parseInt(annotationBounds.top)) && (totalHeight >= parseInt(annotationBounds.top))) || ((top <= parseInt(annotationBounds.top + annotationBounds.height)) && (totalHeight >= parseInt(annotationBounds.top + annotationBounds.height)))) {\n                                            isOverlapped = true;\n                                        }\n                                        else {\n                                            isOverlapped = false;\n                                        }\n                                    }\n                                    if (isOverlapped) {\n                                        this.checkOverlappedCollections(pageCollections[i], this.overlappedAnnotations);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param annotation\n     * @param pageNumber\n     * @param type\n     * @param annotation\n     * @param pageNumber\n     * @param type\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.findAnnotationMode = function (annotation, pageNumber, type) {\n        // eslint-disable-next-line\n        var importCollection = this.pdfViewer.viewerBase.importedAnnotation[pageNumber];\n        if (importCollection) {\n            // eslint-disable-next-line\n            var collection = void 0;\n            if (type === 'shape') {\n                collection = importCollection.shapeAnnotation;\n            }\n            else if (type === 'shape_measure') {\n                collection = importCollection.measureShapeAnnotation;\n            }\n            else if (type === 'freeText') {\n                collection = importCollection.freeTextAnnotation;\n            }\n            else if (type === 'stamp') {\n                collection = importCollection.stampAnnotations;\n            }\n            else if (type === 'sticky') {\n                collection = importCollection.stickyNotesAnnotation;\n            }\n            else if (type === 'textMarkup') {\n                collection = importCollection.textMarkupAnnotation;\n            }\n            if (collection) {\n                for (var i = 0; i < collection.length; i++) {\n                    if (collection[i].AnnotName === annotation.AnnotName) {\n                        return 'Imported Annotation';\n                    }\n                }\n            }\n        }\n        return 'Existing Annotation';\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.checkOverlappedCollections = function (annotation, overlappedCollections) {\n        if (overlappedCollections.length > 0) {\n            var isAdded = false;\n            for (var i = 0; i < overlappedCollections.length; i++) {\n                if (annotation.annotName === overlappedCollections[i].annotName && annotation.bounds === overlappedCollections[i].bounds) {\n                    isAdded = true;\n                    break;\n                }\n            }\n            if (!isAdded) {\n                overlappedCollections.push(annotation);\n            }\n        }\n        else {\n            overlappedCollections.push(annotation);\n        }\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.orderTextMarkupBounds = function (bounds) {\n        if (bounds.Left || bounds.Width) {\n            return { left: bounds.Left, top: bounds.Top, height: bounds.Height, width: bounds.Width };\n        }\n        else {\n            return { left: bounds.left, top: bounds.top, height: bounds.height, width: bounds.width };\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateModifiedDate = function (annotation) {\n        if (annotation.modifiedDate) {\n            annotation.modifiedDate = this.setAnnotationModifiedDate(annotation.modifiedDate);\n        }\n        if (annotation.comments && annotation.comments.length > 0) {\n            for (var i = 0; i < annotation.comments.length; i++) {\n                if (annotation.comments[i].modifiedDate) {\n                    annotation.comments[i].modifiedDate = this.setAnnotationModifiedDate(annotation.comments[i].modifiedDate);\n                    if (annotation.comments[i].review && annotation.comments[i].review.modifiedDate) {\n                        // eslint-disable-next-line max-len\n                        annotation.comments[i].review.modifiedDate = this.setAnnotationModifiedDate(annotation.comments[i].review.modifiedDate);\n                    }\n                }\n            }\n        }\n        if (annotation.review && annotation.review.modifiedDate) {\n            annotation.review.modifiedDate = this.setAnnotationModifiedDate(annotation.review.modifiedDate);\n        }\n    };\n    Annotation.prototype.setAnnotationModifiedDate = function (date) {\n        var modifiedTime;\n        var modifiedDateTime;\n        if (date !== '') {\n            // eslint-disable-next-line\n            var time = parseInt(date.split(' ')[1].split(':')[0]);\n            if (date.split(' ').length === 3) {\n                // eslint-disable-next-line max-len\n                modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' ' + date.split(' ')[2];\n            }\n            else {\n                if (time >= 12) {\n                    if (time === 12) {\n                        modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' PM';\n                    }\n                    else {\n                        // eslint-disable-next-line max-len\n                        modifiedTime = (time - 12) + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' PM';\n                    }\n                }\n                else {\n                    modifiedTime = time + ':' + date.split(' ')[1].split(':')[1] + ':' + date.split(' ')[1].split(':')[2] + ' AM';\n                }\n            }\n            // eslint-disable-next-line\n            var dateString = date.split(' ')[0];\n            // eslint-disable-next-line\n            var dateStringSpilt = date.split(',');\n            if (dateStringSpilt.length > 1) {\n                modifiedDateTime = dateString + (' ') + modifiedTime;\n            }\n            else {\n                modifiedDateTime = dateString + (', ') + modifiedTime;\n            }\n        }\n        else {\n            return date;\n        }\n        return modifiedDateTime;\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.clear = function () {\n        if (this.shapeAnnotationModule) {\n            this.shapeAnnotationModule.shapeCount = 0;\n        }\n        if (this.measureAnnotationModule) {\n            this.measureAnnotationModule.measureShapeCount = 0;\n        }\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.clear();\n        }\n        if (this.stickyNotesAnnotationModule) {\n            this.stickyNotesAnnotationModule.clear();\n        }\n        this.pdfViewer.refresh();\n        this.undoCommentsElement = [];\n        this.redoCommentsElement = [];\n        this.overlappedAnnotations = [];\n        this.previousIndex = null;\n        // eslint-disable-next-line max-len\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.stampAnnotationModule) {\n            this.pdfViewer.annotation.stampAnnotationModule.stampPageNumber = [];\n        }\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.freeTextAnnotationModule) {\n            this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers = [];\n            this.freeTextAnnotationModule.previousText = 'Type Here';\n        }\n        if (this.pdfViewer.annotation && this.pdfViewer.annotation.inkAnnotationModule) {\n            this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex = [];\n        }\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_shape');\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_shape_measure');\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_stamp');\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_sticky');\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.retrieveAnnotationCollection = function () {\n        return this.pdfViewer.annotationCollection;\n    };\n    /**\n     * @param interaction\n     * @param annotation\n     * @param interaction\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.checkAllowedInteractions = function (interaction, annotation) {\n        // eslint-disable-next-line\n        var annotationInteraction = this.updateAnnotationAllowedInteractions(annotation);\n        if (annotationInteraction && annotationInteraction.length > 0) {\n            for (var i = 0; i < annotationInteraction.length; i++) {\n                if (interaction === 'Select') {\n                    // eslint-disable-next-line max-len\n                    if (annotationInteraction[i] === 'Move' || annotationInteraction[i] === 'Resize' || annotationInteraction[i] === 'Delete' || annotationInteraction[i] === 'PropertyChange' || annotationInteraction[i] === 'Select') {\n                        return true;\n                    }\n                }\n                else {\n                    if (annotationInteraction[i] === interaction) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    };\n    /**\n     * @param menuObj\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.checkContextMenuDeleteItem = function (menuObj) {\n        // eslint-disable-next-line\n        var annotation = this.findCurrentAnnotation();\n        if (annotation && annotation.annotationSettings) {\n            // eslint-disable-next-line\n            if (annotation.annotationSettings.isLock) {\n                if (this.checkAllowedInteractions('Delete', annotation)) {\n                    menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n                }\n                else {\n                    menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], false);\n                }\n            }\n            else {\n                menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')], true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.isEnableDelete = function () {\n        // eslint-disable-next-line\n        var annotation = this.findCurrentAnnotation();\n        if (annotation && annotation.annotationSettings) {\n            // eslint-disable-next-line\n            if (annotation.annotationSettings.isLock) {\n                if (this.checkAllowedInteractions('Delete', annotation)) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.findCurrentAnnotation = function () {\n        if (this.textMarkupAnnotationModule && this.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n            return this.textMarkupAnnotationModule.currentTextMarkupAnnotation;\n        }\n        if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations[0]) {\n            return this.pdfViewer.selectedItems.annotations[0];\n        }\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.updateAnnotationAllowedInteractions = function (annotation) {\n        // eslint-disable-next-line\n        var annotationInteraction = ['None'];\n        if (annotation) {\n            if (annotation.shapeAnnotationType === 'FreeText' && this.pdfViewer.freeTextSettings.allowedInteractions) {\n                // eslint-disable-next-line max-len\n                annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions, annotation.allowedInteractions);\n            }\n            else if (annotation.shapeAnnotationType === 'Ink' && this.pdfViewer.inkAnnotationSettings.allowedInteractions) {\n                // eslint-disable-next-line max-len\n                annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions, annotation.allowedInteractions);\n            }\n            else if (annotation.shapeAnnotationType === 'StickyNotes' && this.pdfViewer.stickyNotesSettings.allowedInteractions) {\n                // eslint-disable-next-line max-len\n                annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions, annotation.allowedInteractions);\n            }\n            else if (annotation.shapeAnnotationType === 'Stamp' && this.pdfViewer.stampSettings.allowedInteractions) {\n                // eslint-disable-next-line max-len\n                annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions, annotation.allowedInteractions);\n            }\n            else if (annotation.shapeAnnotationType === 'Image' && this.pdfViewer.customStampSettings.allowedInteractions) {\n                // eslint-disable-next-line max-len\n                annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions, annotation.allowedInteractions);\n            }\n            else if (annotation.shapeAnnotationType === 'textMarkup') {\n                if (annotation.textMarkupAnnotationType === 'Highlight' && this.pdfViewer.highlightSettings.allowedInteractions) {\n                    // eslint-disable-next-line max-len\n                    annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions, annotation.allowedInteractions);\n                }\n                else if (annotation.textMarkupAnnotationType === 'Underline' && this.pdfViewer.underlineSettings.allowedInteractions) {\n                    // eslint-disable-next-line max-len\n                    annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions, annotation.allowedInteractions);\n                }\n                else if (annotation.textMarkupAnnotationType === 'Strikethrough' && this.pdfViewer.strikethroughSettings.allowedInteractions) {\n                    // eslint-disable-next-line max-len\n                    annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions, annotation.allowedInteractions);\n                }\n            }\n            else {\n                if (annotation.measureType !== '') {\n                    if (annotation.measureType === 'Distance' && this.pdfViewer.distanceSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if (annotation.measureType === 'Perimeter' && this.pdfViewer.perimeterSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if (annotation.measureType === 'Radius' && this.pdfViewer.radiusSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if (annotation.measureType === 'Area' && this.pdfViewer.areaSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if (annotation.measureType === 'Volume' && this.pdfViewer.volumeSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                }\n                else {\n                    if (annotation.shapeAnnotationType === 'Line' && this.pdfViewer.lineSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions, annotation.allowedInteractions);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead') && this.pdfViewer.arrowSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions, annotation.allowedInteractions);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse' || annotation.shapeAnnotationType === 'Oval') && this.pdfViewer.circleSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square') && this.pdfViewer.rectangleSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                    else if (annotation.shapeAnnotationType === 'Polygon' && this.pdfViewer.polygonSettings.allowedInteractions) {\n                        // eslint-disable-next-line max-len\n                        annotationInteraction = this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions, annotation.allowedInteractions);\n                    }\n                }\n            }\n        }\n        return annotationInteraction;\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.checkIsLockSettings = function (annotation) {\n        // eslint-disable-next-line\n        var isLocked = false;\n        if (annotation) {\n            if (annotation.shapeAnnotationType === 'FreeText') {\n                isLocked = this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock);\n            }\n            else if (annotation.shapeAnnotationType === 'Ink') {\n                // eslint-disable-next-line max-len\n                isLocked = this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock);\n            }\n            else if (annotation.shapeAnnotationType === 'StickyNotes') {\n                isLocked = this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock);\n            }\n            else if (annotation.shapeAnnotationType === 'Stamp') {\n                isLocked = this.checkLockSettings(this.pdfViewer.stampSettings.isLock);\n            }\n            else if (annotation.shapeAnnotationType === 'Image') {\n                isLocked = this.checkLockSettings(this.pdfViewer.customStampSettings.isLock);\n            }\n            else if (annotation.shapeAnnotationType === 'textMarkup') {\n                if (annotation.textMarkupAnnotationType === 'Highlight') {\n                    // eslint-disable-next-line max-len\n                    isLocked = this.checkLockSettings(this.pdfViewer.highlightSettings.isLock);\n                }\n                else if (annotation.textMarkupAnnotationType === 'Underline') {\n                    // eslint-disable-next-line max-len\n                    isLocked = this.checkLockSettings(this.pdfViewer.underlineSettings.isLock);\n                }\n                else if (annotation.textMarkupAnnotationType === 'Strikethrough') {\n                    // eslint-disable-next-line max-len\n                    isLocked = this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock);\n                }\n            }\n            else {\n                if (annotation.measureType !== '') {\n                    if (annotation.measureType === 'Distance') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.distanceSettings.isLock);\n                    }\n                    else if (annotation.measureType === 'Perimeter') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock);\n                    }\n                    else if (annotation.measureType === 'Radius') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.radiusSettings.isLock);\n                    }\n                    else if (annotation.measureType === 'Area') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.areaSettings.isLock);\n                    }\n                    else if (annotation.measureType === 'Volume') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.volumeSettings.isLock);\n                    }\n                }\n                else {\n                    if (annotation.shapeAnnotationType === 'Line') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.lineSettings.isLock);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Arrow' || annotation.shapeAnnotationType === 'LineWidthArrowHead')) {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.arrowSettings.isLock);\n                        // eslint-disable-next-line max-len\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Circle' || annotation.shapeAnnotationType === 'Ellipse' || annotation.shapeAnnotationType === 'Oval')) {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.circleSettings.isLock);\n                    }\n                    else if ((annotation.shapeAnnotationType === 'Rectangle' || annotation.shapeAnnotationType === 'Square')) {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock);\n                    }\n                    else if (annotation.shapeAnnotationType === 'Polygon') {\n                        // eslint-disable-next-line max-len\n                        isLocked = this.checkLockSettings(this.pdfViewer.polygonSettings.isLock);\n                    }\n                }\n            }\n        }\n        return isLocked;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.checkLockSettings = function (locked) {\n        var islock = false;\n        if (locked || this.pdfViewer.annotationSettings.isLock) {\n            islock = true;\n        }\n        return islock;\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.restrictContextMenu = function () {\n        // eslint-disable-next-line\n        var isRestrict = false;\n        // eslint-disable-next-line\n        var annotation = this.findCurrentAnnotation();\n        if (annotation && this.checkIsLockSettings(annotation) && this.checkAllowedInteractions('Select', annotation)) {\n            isRestrict = true;\n        }\n        return isRestrict;\n    };\n    // eslint-disable-next-line\n    Annotation.prototype.checkAllowedInteractionSettings = function (annotationInteraction, annotationAllowedInteraction) {\n        if (annotationAllowedInteraction) {\n            if (annotationAllowedInteraction.length === 1) {\n                if (annotationAllowedInteraction[0] !== 'None') {\n                    return annotationAllowedInteraction;\n                }\n            }\n            else {\n                return annotationAllowedInteraction;\n            }\n        }\n        if (annotationInteraction) {\n            if (annotationInteraction.length === 1) {\n                if (annotationInteraction[0] !== 'None') {\n                    return annotationInteraction;\n                }\n            }\n            else {\n                return annotationInteraction;\n            }\n        }\n        if (this.pdfViewer.annotationSettings.allowedInteractions) {\n            return this.pdfViewer.annotationSettings.allowedInteractions;\n        }\n        return ['None'];\n    };\n    /**\n     * @param value\n     * @param type\n     * @param value\n     * @param type\n     * @private\n     */\n    Annotation.prototype.getValue = function (value, type) {\n        type = !type ? 'hex' : type.toLowerCase();\n        if (value[0] === 'r') {\n            var cValue = this.convertRgbToNumberArray(value);\n            if (type === 'hex' || type === 'hexa') {\n                var hex = this.rgbToHex(cValue);\n                return type === 'hex' ? hex.slice(0, 7) : hex;\n            }\n            else {\n                if (type === 'hsv') {\n                    return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n                }\n                else {\n                    if (type === 'hsva') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n                    }\n                    else {\n                        return 'null';\n                    }\n                }\n            }\n        }\n        else {\n            if (value[0] === 'h') {\n                var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n                if (type === 'rgba') {\n                    return this.convertToRgbString(cValue);\n                }\n                else {\n                    if (type === 'hex' || type === 'hexa') {\n                        var hex = this.rgbToHex(cValue);\n                        return type === 'hex' ? hex.slice(0, 7) : hex;\n                    }\n                    else {\n                        if (type === 'rgb') {\n                            return this.convertToRgbString(cValue.slice(0, 3));\n                        }\n                        else {\n                            return 'null';\n                        }\n                    }\n                }\n            }\n            else {\n                value = this.roundValue(value);\n                var rgb = this.hexToRgb(value);\n                if (type === 'rgb' || type === 'hsv') {\n                    rgb = rgb.slice(0, 3);\n                }\n                if (type === 'rgba' || type === 'rgb') {\n                    return this.convertToRgbString(rgb);\n                }\n                else {\n                    if (type === 'hsva' || type === 'hsv') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n                    }\n                    else {\n                        if (type === 'hex') {\n                            return value.slice(0, 7);\n                        }\n                        else {\n                            if (type === 'a') {\n                                return rgb[3].toString();\n                            }\n                            else {\n                                return 'null';\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Annotation.prototype.convertRgbToNumberArray = function (value) {\n        // eslint-disable-next-line max-len\n        return (value.slice(value.indexOf('(') + 1, value.indexOf(')'))).split(',').map(function (n, i) {\n            return (i !== 3) ? parseInt(n, 10) : parseFloat(n);\n        });\n    };\n    Annotation.prototype.convertToRgbString = function (rgb) {\n        return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n    };\n    Annotation.prototype.convertToHsvString = function (hsv) {\n        return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n    };\n    Annotation.prototype.roundValue = function (value) {\n        if (!value) {\n            return '';\n        }\n        if (value[0] !== '#') {\n            value = '#' + value;\n        }\n        var len = value.length;\n        if (len === 4) {\n            value += 'f';\n            len = 5;\n        }\n        if (len === 5) {\n            var tempValue = '';\n            for (var i = 1, len_1 = value.length; i < len_1; i++) {\n                tempValue += (value.charAt(i) + value.charAt(i));\n            }\n            value = '#' + tempValue;\n            len = 9;\n        }\n        if (len === 7) {\n            value += 'ff';\n        }\n        return value;\n    };\n    Annotation.prototype.hexToRgb = function (hex) {\n        if (!hex) {\n            return [];\n        }\n        hex = hex.trim();\n        if (hex.length !== 9) {\n            hex = this.roundValue(hex);\n        }\n        var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n        hex = hex.slice(1, 7);\n        var bigInt = parseInt(hex, 16);\n        var h = [];\n        h.push((bigInt >> 16) & 255);\n        h.push((bigInt >> 8) & 255);\n        h.push(bigInt & 255);\n        h.push(opacity);\n        return h;\n    };\n    Annotation.prototype.rgbToHsv = function (r, g, b, opacity) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var max = Math.max(r, g, b);\n        var min = Math.min(r, g, b);\n        var h;\n        var s;\n        var v = max;\n        var d = max - min;\n        s = max === 0 ? 0 : d / max;\n        if (max === min) {\n            h = 0;\n        }\n        else {\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n            }\n            h /= 6;\n        }\n        var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n        if (!isNullOrUndefined(opacity)) {\n            hsv.push(opacity);\n        }\n        return hsv;\n    };\n    Annotation.prototype.hsvToRgb = function (h, s, v, opacity) {\n        var r;\n        var g;\n        var b;\n        var i;\n        var f;\n        var p;\n        var q;\n        var t;\n        s /= 100;\n        v /= 100;\n        if (s === 0) {\n            r = g = b = v;\n            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n        }\n        h /= 60;\n        i = Math.floor(h);\n        f = h - i;\n        p = v * (1 - s);\n        q = v * (1 - s * f);\n        t = v * (1 - s * (1 - f));\n        switch (i) {\n            case 0:\n                r = v;\n                g = t;\n                b = p;\n                break;\n            case 1:\n                r = q;\n                g = v;\n                b = p;\n                break;\n            case 2:\n                r = p;\n                g = v;\n                b = t;\n                break;\n            case 3:\n                r = p;\n                g = q;\n                b = v;\n                break;\n            case 4:\n                r = t;\n                g = p;\n                b = v;\n                break;\n            default:\n                r = v;\n                g = p;\n                b = q;\n        }\n        var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n        if (!isNullOrUndefined(opacity)) {\n            rgb.push(opacity);\n        }\n        return rgb;\n    };\n    Annotation.prototype.rgbToHex = function (rgb) {\n        // eslint-disable-next-line max-len\n        return rgb.length ? ('#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) +\n            (!isNullOrUndefined(rgb[3]) ? (rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00') : '')) : '';\n    };\n    /**\n     * @param dataFormat\n     * @private\n     */\n    Annotation.prototype.exportAnnotationsAsStream = function (dataFormat) {\n        var _this = this;\n        if (this.pdfViewer.annotationModule) {\n            var isAnnotations = this.pdfViewer.viewerBase.updateExportItem();\n            if (isAnnotations) {\n                return new Promise(function (resolve, reject) {\n                    _this.pdfViewer.viewerBase.createRequestForExportAnnotations(true, dataFormat, true).then(function (value) {\n                        resolve(value);\n                    });\n                });\n            }\n        }\n        return null;\n    };\n    Annotation.prototype.hex = function (x) {\n        if (!isNullOrUndefined(x)) {\n            return ('0' + x.toString(16)).slice(-2);\n        }\n        else {\n            return '0';\n        }\n    };\n    /**\n     * @param obj\n     * @private\n     */\n    // eslint-disable-next-line\n    Annotation.prototype.cloneObject = function (obj) {\n        return JSON.parse(JSON.stringify(obj));\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.destroy = function () {\n        this.destroyPropertiesWindow();\n        this.textMarkupAnnotationModule.clear();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.getModuleName = function () {\n        return 'Annotation';\n    };\n    /**\n     * Get vertex points properties\n     * @private\n     */\n    Annotation.prototype.getVertexPointsXY = function (points) {\n        var vertexPoints = [];\n        //Converting points model into vertex property\n        for (var j = 0; j < points.length; j++) {\n            vertexPoints[j] = { X: points[j].x, Y: points[j].y };\n        }\n        return vertexPoints;\n    };\n    /**\n     * Method used to add annotations using program.\n     *\n     * @param annotationType - It describes type of annotation object.\n     * @param options -  It describes about the annotation objects and it's property.\n     * @param dynamicStampItem - It describe which type of dynamic stamp.\n     * @param signStampItem - It describe which type of sign stamp.\n     * @param standardBusinessStampItem - It describe which type of standard business stamp.\n     * @returns void\n     */\n    Annotation.prototype.addAnnotation = function (annotationType, options, dynamicStampItem, signStampItem, standardBusinessStampItem) {\n        //Initialize the bounds and pageNumber\n        var offset = { x: 1, y: 1 };\n        var pageNumber = 0;\n        if (options) {\n            if (options.pageNumber && options.pageNumber > 0)\n                pageNumber = options.pageNumber ? options.pageNumber - 1 : 0;\n        }\n        //Initialize the pdf annotation object array\n        var annotationObject = null;\n        var pdfAnnotation = [];\n        this.pdfViewer.annotation.triggerAnnotationUnselectEvent();\n        //Seperate the annotation type with it's method\n        if (annotationType == 'FreeText') {\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(options, offset);\n            this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType == 'StickyNotes') {\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(options, offset);\n            this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType == 'Highlight' || annotationType == 'Underline' || annotationType == 'Strikethrough') {\n            if (annotationType == 'Highlight')\n                annotationObject = options;\n            else if (annotationType == 'Underline')\n                annotationObject = options;\n            else if (annotationType == 'Strikethrough')\n                annotationObject = options;\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject);\n            this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType === 'Line' || annotationType === 'Arrow' || annotationType === 'Rectangle' || annotationType === 'Circle' || annotationType === 'Polygon') {\n            if (annotationType == 'Line')\n                annotationObject = options;\n            else if (annotationType == 'Arrow')\n                annotationObject = options;\n            else if (annotationType == 'Rectangle')\n                annotationObject = options;\n            else if (annotationType == 'Circle')\n                annotationObject = options;\n            else if (annotationType == 'Polygon')\n                annotationObject = options;\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject, offset);\n            this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType === 'Distance' || annotationType === 'Perimeter' || annotationType === 'Area' || annotationType === 'Radius' || annotationType === 'Volume') {\n            if (annotationType == 'Distance')\n                annotationObject = options;\n            else if (annotationType == 'Perimeter')\n                annotationObject = options;\n            else if (annotationType == 'Area')\n                annotationObject = options;\n            else if (annotationType == 'Radius')\n                annotationObject = options;\n            else if (annotationType == 'Volume')\n                annotationObject = options;\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(annotationType, annotationObject, offset);\n            this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType === 'Stamp') {\n            if (options && options.customStamps) {\n                pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber, dynamicStampItem, signStampItem, standardBusinessStampItem);\n            }\n            else {\n                pdfAnnotation[pageNumber] = this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber, dynamicStampItem, signStampItem, standardBusinessStampItem);\n            }\n            this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        else if (annotationType === 'Ink') {\n            pdfAnnotation[pageNumber] = this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(options, offset, pageNumber);\n            this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically = true;\n        }\n        //Annotation rendering can be done with the import annotation method.\n        var pdf = { pdfAnnotation: pdfAnnotation };\n        this.pdfViewerBase.isAddAnnotation = true;\n        this.pdfViewerBase.importAnnotations(pdf);\n        this.pdfViewerBase.isAddAnnotation = false;\n    };\n    /**\n     * @param annotation\n     * @private\n     */\n    Annotation.prototype.triggerAnnotationAddEvent = function (annotation) {\n        var annotationType = annotation.shapeAnnotationType;\n        if (annotationType === 'Stamp' || annotationType === 'Image' || annotationType === 'Path' || annotationType === 'FreeText' || annotationType === 'StickyNotes' || annotationType === 'Ink') {\n            var settings = void 0;\n            if (annotationType === 'FreeText') {\n                settings = {\n                    opacity: annotation.opacity, borderColor: annotation.strokeColor, borderWidth: annotation.thickness, author: annotation.author, subject: annotation.subject, modifiedDate: annotation.modifiedDate,\n                    fillColor: annotation.fillColor, fontSize: annotation.fontSize, width: annotation.bounds.width, height: annotation.bounds.height, fontColor: annotation.fontColor, fontFamily: annotation.fontFamily, defaultText: annotation.dynamicText, fontStyle: annotation.font, textAlignment: annotation.textAlign\n                };\n            }\n            else {\n                settings = {\n                    opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor,\n                    thickness: annotation.thickness, author: annotation.author, subject: annotation.subject,\n                    modifiedDate: annotation.modifiedDate, data: annotation.data\n                };\n            }\n            // eslint-disable-next-line\n            var bounds = { left: annotation.bounds.x, top: annotation.bounds.y, width: annotation.bounds.width, height: annotation.bounds.height };\n            var type = this.getAnnotationType(annotation.shapeAnnotationType, annotation.measureType);\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, settings);\n        }\n        else if (annotationType === 'SignatureText' || annotationType === 'SignatureImage' || annotationType === 'HandWrittenSignature') {\n            // eslint-disable-next-line\n            var bounds = { left: annotation.bounds.x, top: annotation.bounds.y, width: annotation.bounds.width, height: annotation.bounds.height };\n            // eslint-disable-next-line max-len\n            this.pdfViewer.fireSignatureAdd(annotation.pageIndex, annotation.signatureName, annotation.shapeAnnotationType, bounds, annotation.opacity, annotation.strokeColor, annotation.thickness, annotation.data);\n        }\n        else {\n            // eslint-disable-next-line\n            var setting = {\n                opacity: annotation.opacity, fillColor: annotation.fillColor, strokeColor: annotation.strokeColor,\n                thickness: annotation.thickness, author: annotation.author, subject: annotation.subject,\n                modifiedDate: annotation.modifiedDate\n            };\n            var bounds = { left: annotation.bounds.x, top: annotation.bounds.y, width: annotation.bounds.width, height: annotation.bounds.height };\n            var type = this.getAnnotationType(annotation.shapeAnnotationType, annotation.measureType);\n            if (type === 'Line' || type === 'Arrow' || type === 'Distance' || type === 'Perimeter') {\n                setting.lineHeadStartStyle = this.getArrowString(annotation.sourceDecoraterShapes);\n                setting.lineHeadEndStyle = this.getArrowString(annotation.taregetDecoraterShapes);\n                setting.borderDashArray = annotation.borderDashArray;\n            }\n            var labelSettings = void 0;\n            if (this.pdfViewer.enableShapeLabel) {\n                labelSettings = {\n                    // eslint-disable-next-line max-len\n                    fontColor: annotation.fontColor, fontSize: annotation.fontSize, fontFamily: annotation.fontFamily,\n                    opacity: annotation.labelOpacity, labelContent: annotation.labelContent, fillColor: annotation.labelFillColor\n                };\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, setting, null, null, null, labelSettings);\n            }\n            else {\n                // eslint-disable-next-line max-len\n                this.pdfViewer.fireAnnotationAdd(annotation.pageIndex, annotation.annotName, type, bounds, setting);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.triggerAnnotationUnselectEvent = function () {\n        if (this.pdfViewer.selectedItems.annotations && this.pdfViewer.selectedItems.annotations[0]) {\n            var annotation = this.pdfViewer.selectedItems.annotations[0];\n            if (annotation.shapeAnnotationType !== 'HandWrittenSignature' && annotation.shapeAnnotationType !== 'SignatureText' && annotation.shapeAnnotationType !== 'SignatureImage' && annotation.shapeAnnotationType !== 'Path') {\n                this.pdfViewer.fireAnnotationUnSelect(annotation.annotName, annotation.pageIndex, annotation);\n                this.pdfViewer.clearSelection(annotation.pageIndex);\n            }\n        }\n    };\n    /**\n     * @private\n    */\n    Annotation.prototype.updateFontFamilyRenderSize = function (currentAnnotation, currentValue) {\n        var freeTextAnnotation = this.freeTextAnnotationModule;\n        freeTextAnnotation.inputBoxElement.style.fontFamily = currentValue;\n        freeTextAnnotation.autoFitFreeText();\n        var zoomFactor = this.pdfViewerBase.getZoomFactor();\n        var padding = parseFloat(freeTextAnnotation.inputBoxElement.style.paddingLeft);\n        var inputEleHeight = currentAnnotation.bounds.height * zoomFactor;\n        var characterLength = 8;\n        var inputEleWidth = parseFloat(freeTextAnnotation.inputBoxElement.style.width) - characterLength;\n        inputEleWidth = ((inputEleWidth) / zoomFactor);\n        inputEleHeight = ((inputEleHeight) / zoomFactor);\n        var heightDiff = (inputEleHeight - currentAnnotation.bounds.height);\n        var y = undefined;\n        if (heightDiff > 0) {\n            y = currentAnnotation.wrapper.offsetY + (heightDiff / 2);\n            y = y > 0 ? y : undefined;\n        }\n        else {\n            heightDiff = Math.abs(heightDiff);\n            y = currentAnnotation.wrapper.offsetY - (heightDiff / 2);\n            y = y > 0 ? y : undefined;\n        }\n        var widthDiff = (inputEleWidth - currentAnnotation.bounds.width);\n        var x = undefined;\n        if (widthDiff > 0) {\n            x = currentAnnotation.wrapper.offsetX + (widthDiff / 2);\n            x = x > 0 ? x : undefined;\n        }\n        else {\n            widthDiff = Math.abs(widthDiff);\n            x = currentAnnotation.wrapper.offsetX - (widthDiff / 2);\n        }\n        currentAnnotation.bounds.width = inputEleWidth;\n        currentAnnotation.bounds.height = inputEleHeight;\n        this.pdfViewer.nodePropertyChange(currentAnnotation, { fontFamily: currentValue, bounds: { width: currentAnnotation.bounds.width, height: currentAnnotation.bounds.height, y: y, x: x } });\n        this.pdfViewer.renderSelector(currentAnnotation.pageIndex, this.pdfViewer.annotationSelectorSettings);\n        this.modifyInCollections(currentAnnotation, 'bounds');\n    };\n    Annotation.prototype.updateCanvas = function (canvas, pageWidth, pageHeight, pageNumber) {\n        var ratio = this.pdfViewerBase.getZoomRatio();\n        canvas.width = pageWidth * ratio;\n        canvas.height = pageHeight * ratio;\n        canvas.style.width = pageWidth + 'px';\n        canvas.style.height = pageHeight + 'px';\n        canvas.style.position = 'absolute';\n        canvas.style.zIndex = '1';\n        this.pdfViewerBase.applyElementStyles(canvas, pageNumber);\n    };\n    return Annotation;\n}());\nexport { Annotation };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}