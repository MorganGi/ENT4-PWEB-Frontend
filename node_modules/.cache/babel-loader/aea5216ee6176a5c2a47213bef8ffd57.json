{"ast":null,"code":"import { splitArrayCollection, processPathData, getPathString } from '@syncfusion/ej2-drawings';\nimport { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\n\nvar InkAnnotation =\n/** @class */\nfunction () {\n  function InkAnnotation(pdfViewer, pdfViewerBase) {\n    // eslint-disable-next-line\n    this.newObject = [];\n    /**\n     * @private\n     */\n\n    this.outputString = '';\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.inkAnnotationindex = [];\n    /**\n     * @private\n     */\n\n    this.isAddAnnotationProgramatically = false;\n    /**\n     * @private\n     */\n\n    this.currentPageNumber = '';\n    this.pdfViewer = pdfViewer;\n    this.pdfViewerBase = pdfViewerBase;\n  }\n  /**\n   * @private\n   */\n\n\n  InkAnnotation.prototype.drawInk = function () {\n    this.pdfViewerBase.disableTextSelectionMode();\n    this.pdfViewer.tool = 'Ink';\n  };\n\n  InkAnnotation.prototype.drawInkAnnotation = function (pageNumber) {\n    if (this.pdfViewerBase.isToolbarInkClicked) {\n      this.pdfViewerBase.isInkAdded = true;\n      var pageIndex = !isNaN(pageNumber) ? pageNumber : this.pdfViewerBase.currentPageNumber - 1;\n\n      if (this.outputString && this.outputString !== '') {\n        var currentAnnot = this.addInk(pageIndex);\n        this.pdfViewer.renderDrawing(undefined, pageIndex);\n        this.pdfViewer.clearSelection(pageIndex);\n        this.pdfViewer.select([currentAnnot.id], currentAnnot.annotationSelectorSettings);\n\n        if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n          this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n        }\n\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar) {\n          this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(\"Ink\");\n        }\n      } else {\n        this.outputString = '';\n        this.newObject = [];\n        this.pdfViewerBase.isToolbarInkClicked = false;\n        this.pdfViewer.tool = '';\n      }\n\n      this.pdfViewerBase.isInkAdded = false;\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  InkAnnotation.prototype.storePathData = function () {\n    this.convertToPath(this.newObject);\n    this.newObject = [];\n  };\n  /**\n   * @param position\n   * @param pageIndex\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.drawInkInCanvas = function (position, pageIndex) {\n    // eslint-disable-next-line\n    if (this.currentPageNumber !== '' && parseInt(this.currentPageNumber) !== pageIndex) {\n      // eslint-disable-next-line\n      this.drawInkAnnotation(parseInt(this.currentPageNumber));\n      this.pdfViewerBase.isToolbarInkClicked = true;\n      this.pdfViewer.tool = 'Ink';\n    }\n\n    var zoom = this.pdfViewerBase.getZoomFactor();\n    var ratio = this.pdfViewerBase.getWindowDevicePixelRatio();\n    ; // eslint-disable-next-line\n\n    var canvas = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex); // eslint-disable-next-line\n\n    var context = canvas.getContext('2d');\n    var thickness = this.pdfViewer.inkAnnotationSettings.thickness ? this.pdfViewer.inkAnnotationSettings.thickness : 1; // eslint-disable-next-line max-len\n\n    var opacity = this.pdfViewer.inkAnnotationSettings.opacity ? this.pdfViewer.inkAnnotationSettings.opacity : 1; // eslint-disable-next-line max-len\n\n    var strokeColor = this.pdfViewer.inkAnnotationSettings.strokeColor ? this.pdfViewer.inkAnnotationSettings.strokeColor : '#ff0000';\n\n    if (!Browser.isDevice || Browser.isDevice && zoom <= 0.7) {\n      context.setTransform(ratio, 0, 0, ratio, 0, 0);\n    }\n\n    context.beginPath();\n    context.lineJoin = 'round';\n    context.lineCap = 'round';\n    context.moveTo(position.prevPosition.x, position.prevPosition.y);\n    context.lineTo(position.currentPosition.x, position.currentPosition.y);\n    context.lineWidth = thickness * zoom > 1 ? thickness * zoom : thickness;\n    context.strokeStyle = strokeColor;\n    context.globalAlpha = opacity;\n    context.stroke(); // context.lineWidth = 2;\n\n    context.arc(position.prevPosition.x, position.prevPosition.y, 2 / 2, 0, Math.PI * 2, true);\n    context.closePath();\n    this.pdfViewerBase.prevPosition = position.currentPosition;\n    this.newObject.push(position.currentPosition.x, position.currentPosition.y);\n    this.currentPageNumber = pageIndex.toString();\n  }; // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.convertToPath = function (newObject) {\n    this.movePath(newObject[0], newObject[1]);\n    this.linePath(newObject[0], newObject[1]);\n\n    for (var n = 2; n < newObject.length; n = n + 2) {\n      this.linePath(newObject[n], newObject[n + 1]);\n    }\n  };\n\n  InkAnnotation.prototype.linePath = function (x, y) {\n    this.outputString += 'L' + x + ',' + y + ' ';\n  };\n\n  InkAnnotation.prototype.movePath = function (x, y) {\n    this.outputString += 'M' + x + ',' + y + ' ';\n  };\n  /**\n   * @param pageNumber\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.addInk = function (pageNumber) {\n    // eslint-disable-next-line\n    var currentBounds = this.calculateInkSize();\n    var zoomvalue = this.pdfViewerBase.getZoomFactor(); // eslint-disable-next-line\n\n    var annot;\n\n    if (this.pdfViewerBase.isToolbarInkClicked) {\n      var annotationName = this.pdfViewer.annotation.createGUID();\n      var modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n      var pageIndex = !isNaN(pageNumber) ? pageNumber : this.pdfViewerBase.currentPageNumber - 1;\n      var thickness = this.pdfViewer.inkAnnotationSettings.thickness ? this.pdfViewer.inkAnnotationSettings.thickness : 1; // eslint-disable-next-line max-len\n\n      var opacity = this.pdfViewer.inkAnnotationSettings.opacity ? this.pdfViewer.inkAnnotationSettings.opacity : 1; // eslint-disable-next-line max-len\n\n      var strokeColor = this.pdfViewer.inkAnnotationSettings.strokeColor ? this.pdfViewer.inkAnnotationSettings.strokeColor : '#ff0000'; // eslint-disable-next-line\n\n      var isLock = this.pdfViewer.inkAnnotationSettings.isLock ? this.pdfViewer.inkAnnotationSettings.isLock : this.pdfViewer.annotationSettings.isLock;\n      var author = this.pdfViewer.annotationSettings.author !== 'Guest' ? this.pdfViewer.annotationSettings.author : this.pdfViewer.inkAnnotationSettings.author ? this.pdfViewer.inkAnnotationSettings.author : 'Guest';\n      var customData = this.pdfViewer.inkAnnotationSettings.customData;\n      var isPrint = this.pdfViewer.inkAnnotationSettings.isPrint; // eslint-disable-next-line\n\n      var allowedInteractions = this.pdfViewer.inkAnnotationSettings.allowedInteractions ? this.pdfViewer.inkAnnotationSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions; // eslint-disable-next-line\n\n      var annotationSettings = this.pdfViewer.inkAnnotationSettings ? this.pdfViewer.inkAnnotationSettings : this.pdfViewer.annotationSettings;\n      annot = {\n        // eslint-disable-next-line max-len\n        id: 'ink' + this.pdfViewerBase.inkCount,\n        bounds: {\n          x: currentBounds.x,\n          y: currentBounds.y,\n          width: currentBounds.width,\n          height: currentBounds.height\n        },\n        pageIndex: pageIndex,\n        data: this.outputString,\n        customData: customData,\n        shapeAnnotationType: 'Ink',\n        opacity: opacity,\n        strokeColor: strokeColor,\n        thickness: thickness,\n        annotName: annotationName,\n        comments: [],\n        author: author,\n        subject: 'Ink',\n        notes: '',\n        review: {\n          state: '',\n          stateModel: '',\n          modifiedDate: modifiedDate,\n          author: author\n        },\n        annotationSelectorSettings: this.getSelector('Ink', ''),\n        modifiedDate: modifiedDate,\n        annotationSettings: annotationSettings,\n        isPrint: isPrint,\n        allowedInteractions: allowedInteractions,\n        isCommentLock: false,\n        isLocked: isLock\n      };\n      var annotation = this.pdfViewer.add(annot); // eslint-disable-next-line\n\n      var bounds = {\n        left: annot.bounds.x,\n        top: annot.bounds.y,\n        width: annot.bounds.width,\n        height: annot.bounds.height\n      }; // eslint-disable-next-line\n\n      var settings = {\n        opacity: annot.opacity,\n        strokeColor: annot.strokeColor,\n        thickness: annot.thickness,\n        modifiedDate: annot.modifiedDate,\n        width: annot.bounds.width,\n        height: annot.bounds.height,\n        data: this.outputString\n      };\n      this.pdfViewerBase.inkCount++; // eslint-disable-next-line max-len\n\n      var commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('ink', annot.pageIndex + 1, annot.shapeAnnotationType);\n\n      if (commentsDivid) {\n        document.getElementById(commentsDivid).id = annotationName;\n      }\n\n      annot.annotName = annotationName; // eslint-disable-next-line max-len\n\n      this.pdfViewer.annotation.addAction(pageIndex, null, annotation, 'Addition', '', annotation, annotation);\n      this.pdfViewer.annotationModule.storeAnnotations(pageIndex, annot, '_annotations_ink');\n      this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'Ink', bounds, settings);\n\n      if (this.pdfViewerBase.isInkAdded) {\n        this.outputString = '';\n        this.newObject = [];\n      }\n\n      this.pdfViewerBase.isToolbarInkClicked = false;\n      this.pdfViewer.tool = '';\n    }\n\n    return annot;\n  };\n  /**\n   * @private\n   */\n\n\n  InkAnnotation.prototype.setAnnotationMode = function () {\n    if (this.pdfViewerBase.isToolbarInkClicked) {\n      this.drawInkAnnotation();\n    } else {\n      this.pdfViewerBase.isToolbarInkClicked = true;\n      this.drawInk();\n    }\n  };\n\n  InkAnnotation.prototype.saveInkSignature = function () {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink'); // eslint-disable-next-line\n\n    var annotations = new Array();\n\n    for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n      annotations[j] = [];\n    }\n\n    if (storeObject) {\n      var annotationCollection = JSON.parse(storeObject);\n\n      for (var i = 0; i < annotationCollection.length; i++) {\n        // eslint-disable-next-line\n        var newArray = [];\n        var pageAnnotationObject = annotationCollection[i];\n\n        if (pageAnnotationObject) {\n          for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n            this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]); // eslint-disable-next-line max-len\n\n            var strokeColorString = pageAnnotationObject.annotations[z].strokeColor;\n            pageAnnotationObject.annotations[z].strokeColor = JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(strokeColorString));\n            pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.pdfViewer.annotation.getInkBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex)); // eslint-disable-next-line\n\n            var collectionData = processPathData(pageAnnotationObject.annotations[z].data); // eslint-disable-next-line\n\n            var csData = splitArrayCollection(collectionData);\n            pageAnnotationObject.annotations[z].data = JSON.stringify(csData);\n          }\n\n          newArray = pageAnnotationObject.annotations;\n        }\n\n        annotations[pageAnnotationObject.pageIndex] = newArray;\n      }\n    }\n\n    return JSON.stringify(annotations);\n  };\n  /**\n   * @param pageNumber\n   * @param annotationBase\n   * @param pageNumber\n   * @param annotationBase\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.addInCollection = function (pageNumber, annotationBase) {\n    if (annotationBase) {\n      // eslint-disable-next-line\n      var pageAnnotations = this.getAnnotations(pageNumber, null);\n\n      if (pageAnnotations) {\n        pageAnnotations.push(annotationBase);\n      }\n\n      this.manageInkAnnotations(pageAnnotations, pageNumber);\n    }\n  }; // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.calculateInkSize = function () {\n    var minimumX = -1;\n    var minimumY = -1;\n    var maximumX = -1;\n    var maximumY = -1; // eslint-disable-next-line\n\n    var collectionData = processPathData(this.outputString);\n    var zoomvalue = this.pdfViewerBase.getZoomFactor(); // eslint-disable-next-line\n\n    for (var k = 0; k < collectionData.length; k++) {\n      // eslint-disable-next-line\n      var val = collectionData[k];\n\n      if (minimumX === -1) {\n        // eslint-disable-next-line\n        minimumX = val['x']; // eslint-disable-next-line\n\n        maximumX = val['x']; // eslint-disable-next-line\n\n        minimumY = val['y']; // eslint-disable-next-line\n\n        maximumY = val['y'];\n      } else {\n        // eslint-disable-next-line\n        var point1 = val['x']; // eslint-disable-next-line\n\n        var point2 = val['y'];\n\n        if (minimumX >= point1) {\n          minimumX = point1;\n        }\n\n        if (minimumY >= point2) {\n          minimumY = point2;\n        }\n\n        if (maximumX <= point1) {\n          maximumX = point1;\n        }\n\n        if (maximumY <= point2) {\n          maximumY = point2;\n        }\n      }\n    }\n\n    var newdifferenceX = maximumX - minimumX;\n    var newdifferenceY = maximumY - minimumY; // eslint-disable-next-line max-len\n\n    return {\n      x: minimumX / zoomvalue,\n      y: minimumY / zoomvalue,\n      width: newdifferenceX / zoomvalue,\n      height: newdifferenceY / zoomvalue\n    };\n  };\n  /**\n   * @param annotationCollection\n   * @param pageIndex\n   * @param isImport\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.renderExistingInkSignature = function (annotationCollection, pageIndex, isImport) {\n    var annot;\n    var isinkAnnotationAdded = false;\n\n    if (!isImport) {\n      for (var p = 0; p < this.inkAnnotationindex.length; p++) {\n        if (this.inkAnnotationindex[p] === pageIndex) {\n          isinkAnnotationAdded = true;\n          break;\n        }\n      }\n    }\n\n    if (annotationCollection && !isinkAnnotationAdded) {\n      if (annotationCollection.length > 0 && this.inkAnnotationindex.indexOf(pageIndex) === -1) {\n        this.inkAnnotationindex.push(pageIndex);\n      }\n\n      for (var n = 0; n < annotationCollection.length; n++) {\n        // eslint-disable-next-line\n        var currentAnnotation = annotationCollection[n];\n\n        if (currentAnnotation) {\n          // eslint-disable-next-line\n          var data = currentAnnotation.PathData;\n\n          if (isImport && data) {\n            if (typeof data === 'object' && data.length > 1) {\n              data = getPathString(data);\n            } else {\n              if (currentAnnotation.IsPathData || data.split('command').length <= 1) {\n                data = data;\n              } else {\n                data = getPathString(JSON.parse(data));\n              }\n            }\n          }\n\n          this.outputString = data; // eslint-disable-next-line\n\n          var calculateInkPosition = this.calculateInkSize();\n          this.outputString = '';\n          var rectDiff = 0;\n          var rectDifference = 1; // eslint-disable-next-line\n\n          var bounds = currentAnnotation.Bounds;\n\n          if (calculateInkPosition) {\n            if (calculateInkPosition.height < 1) {\n              rectDiff = bounds.Height ? bounds.Height : bounds.height;\n              rectDifference = bounds.Height ? bounds.Height : bounds.height;\n            } else if (calculateInkPosition.width < 1) {\n              rectDiff = bounds.Width ? bounds.Width : bounds.width;\n              rectDifference = bounds.Width ? bounds.Width : bounds.width;\n            }\n          }\n\n          var currentLeft = !isNullOrUndefined(bounds.X) ? bounds.X + rectDiff / 2 : bounds.x + rectDiff / 2;\n          var currentTop = !isNullOrUndefined(bounds.Y) ? bounds.Y + rectDiff / 2 : bounds.y + rectDiff / 2;\n          var currentWidth = bounds.Width ? bounds.Width - (rectDifference - 1) : bounds.width - (rectDifference - 1);\n          var currentHeight = bounds.Height ? bounds.Height - (rectDifference - 1) : bounds.height - (rectDifference - 1);\n          var isLock = currentAnnotation.AnnotationSettings ? currentAnnotation.AnnotationSettings.isLock : false; // eslint-disable-next-line\n\n          var selectorSettings = currentAnnotation.AnnotationSelectorSettings ? currentAnnotation.AnnotationSelectorSettings : this.getSelector(currentAnnotation, 'Ink');\n          var customData = this.pdfViewer.annotation.getCustomData(currentAnnotation);\n          var isPrint = true;\n\n          if (currentAnnotation.AnnotationSettings) {\n            isPrint = currentAnnotation.AnnotationSettings.isPrint;\n          } else {\n            isPrint = this.pdfViewer.inkAnnotationSettings.isPrint;\n          }\n\n          if (currentAnnotation.IsLocked) {\n            isLock = currentAnnotation.IsLocked;\n          }\n\n          if (currentAnnotation.Subject === 'Highlight' && currentAnnotation.Opacity === 1) {\n            currentAnnotation.Opacity = currentAnnotation.Opacity / 2;\n          } // eslint-disable-next-line max-len\n\n\n          currentAnnotation.allowedInteractions = currentAnnotation.AllowedInteractions ? currentAnnotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);\n          annot = {\n            // eslint-disable-next-line max-len\n            id: 'ink' + this.pdfViewerBase.inkCount,\n            bounds: {\n              x: currentLeft,\n              y: currentTop,\n              width: currentWidth,\n              height: currentHeight\n            },\n            pageIndex: pageIndex,\n            data: data,\n            shapeAnnotationType: 'Ink',\n            opacity: currentAnnotation.Opacity,\n            strokeColor: currentAnnotation.StrokeColor,\n            thickness: currentAnnotation.Thickness,\n            annotName: currentAnnotation.AnnotName,\n            // eslint-disable-next-line max-len\n            comments: this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments, currentAnnotation, currentAnnotation.Author),\n            author: currentAnnotation.Author,\n            allowedInteractions: currentAnnotation.allowedInteractions,\n            subject: currentAnnotation.Subject,\n            modifiedDate: currentAnnotation.ModifiedDate,\n            // eslint-disable-next-line max-len\n            review: {\n              state: '',\n              stateModel: '',\n              modifiedDate: currentAnnotation.ModifiedDate,\n              author: currentAnnotation.Author\n            },\n            notes: currentAnnotation.Note,\n            annotationSettings: {\n              isLock: isLock\n            },\n            annotationSelectorSettings: selectorSettings,\n            customData: customData,\n            isPrint: isPrint,\n            isCommentLock: currentAnnotation.IsCommentLock\n          };\n          this.pdfViewer.add(annot); // eslint-disable-next-line\n\n          var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentAnnotation.pageIndex); // eslint-disable-next-line\n\n          this.pdfViewer.renderDrawing(canvass, annot.pageIndex);\n          this.pdfViewer.annotationModule.storeAnnotations(annot.pageIndex, annot, '_annotations_ink');\n\n          if (this.isAddAnnotationProgramatically) {\n            var settings = {\n              opacity: annot.opacity,\n              strokeColor: annot.strokeColor,\n              thickness: annot.thickness,\n              modifiedDate: annot.modifiedDate,\n              width: annot.bounds.width,\n              height: annot.bounds.height,\n              data: this.outputString\n            };\n            this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'Ink', bounds, settings);\n          }\n\n          this.pdfViewerBase.currentSignatureAnnot = null;\n          this.pdfViewerBase.signatureCount++;\n          this.pdfViewerBase.inkCount++; // eslint-disable-next-line max-len\n\n          if (this.pdfViewerBase.navigationPane && this.pdfViewerBase.navigationPane.annotationMenuObj && this.pdfViewer.isSignatureEditable) {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true); // eslint-disable-next-line max-len\n\n            this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @param pageNumber\n   * @param annotations\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.storeInkSignatureData = function (pageNumber, annotations) {\n    // eslint-disable-next-line max-len\n    this.pdfViewer.annotation.addAction(annotations.pageIndex, null, annotations, 'Addition', '', annotations, annotations); // eslint-disable-next-line\n\n    var annotation = null;\n    var left = annotations.bounds.left ? annotations.bounds.left : annotations.bounds.x;\n    var top = annotations.bounds.top ? annotations.bounds.top : annotations.bounds.y;\n\n    if (annotations.wrapper && annotations.wrapper.bounds) {\n      left = annotations.wrapper.bounds.left;\n      top = annotations.wrapper.bounds.top;\n    }\n\n    annotation = {\n      // eslint-disable-next-line max-len\n      id: annotations.id,\n      bounds: {\n        x: left,\n        y: top,\n        width: annotations.bounds.width,\n        height: annotations.bounds.height\n      },\n      // eslint-disable-next-line max-len\n      shapeAnnotationType: 'Ink',\n      opacity: annotations.opacity,\n      thickness: annotations.thickness,\n      strokeColor: annotations.strokeColor,\n      pageIndex: annotations.pageIndex,\n      data: annotations.data,\n      annotName: annotations.annotName,\n      // eslint-disable-next-line max-len\n      comments: annotations.comments,\n      author: annotations.author,\n      subject: annotations.subject,\n      modifiedDate: annotations.modifiedDate,\n      // eslint-disable-next-line max-len\n      review: {\n        state: '',\n        stateModel: '',\n        modifiedDate: annotations.modifiedDate,\n        author: annotations.author\n      },\n      notes: annotations.notes,\n      annotationSelectorSettings: this.getSelector(annotations, 'Ink'),\n      isCommentLock: annotations.isCommentLock\n    }; // eslint-disable-next-line\n\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n    var index = 0;\n\n    if (!storeObject) {\n      var shapeAnnotation = {\n        pageIndex: pageNumber,\n        annotations: []\n      };\n      shapeAnnotation.annotations.push(annotation);\n      index = shapeAnnotation.annotations.indexOf(annotation);\n      var annotationCollection = [];\n      annotationCollection.push(shapeAnnotation);\n      var annotationStringified = JSON.stringify(annotationCollection);\n      window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n    } else {\n      var annotObject = JSON.parse(storeObject);\n      window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_ink');\n      var pageIndex = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n\n      if (annotObject[pageIndex]) {\n        annotObject[pageIndex].annotations.push(annotation);\n        index = annotObject[pageIndex].annotations.indexOf(annotation);\n      } else {\n        var markupAnnotation = {\n          pageIndex: pageNumber,\n          annotations: []\n        };\n        markupAnnotation.annotations.push(annotation);\n        index = markupAnnotation.annotations.indexOf(annotation);\n        annotObject.push(markupAnnotation);\n      }\n\n      var annotationStringified = JSON.stringify(annotObject);\n      window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n    }\n  };\n\n  InkAnnotation.prototype.getSelector = function (type, subject) {\n    var selector = this.pdfViewer.annotationSelectorSettings;\n\n    if (type === 'Ink' && this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings) {\n      selector = this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings;\n    }\n\n    return selector;\n  }; // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.getAnnotations = function (pageIndex, shapeAnnotations) {\n    // eslint-disable-next-line\n    var annotationCollection; // eslint-disable-next-line\n\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n\n      if (annotObject[index]) {\n        annotationCollection = annotObject[index].annotations;\n      } else {\n        annotationCollection = shapeAnnotations;\n      }\n    } else {\n      annotationCollection = shapeAnnotations;\n    }\n\n    return annotationCollection;\n  };\n  /**\n   * @param property\n   * @param pageNumber\n   * @param annotationBase\n   * @param property\n   * @param pageNumber\n   * @param annotationBase\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.modifySignatureInkCollection = function (property, pageNumber, annotationBase) {\n    this.pdfViewerBase.updateDocumentEditedProperty(true); // eslint-disable-next-line\n\n    var currentAnnotObject = null; // eslint-disable-next-line\n\n    var pageAnnotations = this.getAnnotations(pageNumber, null);\n\n    if (pageAnnotations != null && annotationBase) {\n      for (var i = 0; i < pageAnnotations.length; i++) {\n        if (annotationBase.id === pageAnnotations[i].id) {\n          if (property === 'bounds') {\n            // eslint-disable-next-line max-len\n            pageAnnotations[i].bounds = {\n              x: annotationBase.wrapper.bounds.left,\n              y: annotationBase.wrapper.bounds.top,\n              width: annotationBase.bounds.width,\n              height: annotationBase.bounds.height\n            };\n          } else if (property === 'stroke') {\n            pageAnnotations[i].strokeColor = annotationBase.wrapper.children[0].style.strokeColor;\n          } else if (property === 'opacity') {\n            pageAnnotations[i].opacity = annotationBase.wrapper.children[0].style.opacity;\n          } else if (property === 'thickness') {\n            pageAnnotations[i].thickness = annotationBase.wrapper.children[0].style.strokeWidth;\n          } else if (property === 'notes') {\n            pageAnnotations[i].notes = annotationBase.notes;\n          } else if (property === 'delete') {\n            currentAnnotObject = pageAnnotations.splice(i, 1)[0];\n            break;\n          }\n\n          pageAnnotations[i].modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n          this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], pageNumber);\n        }\n      }\n\n      this.manageInkAnnotations(pageAnnotations, pageNumber);\n    }\n\n    return currentAnnotObject;\n  }; // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.manageInkAnnotations = function (pageAnnotations, pageNumber) {\n    // eslint-disable-next-line\n    var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n\n    if (storeObject) {\n      var annotObject = JSON.parse(storeObject);\n      window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_ink');\n      var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n\n      if (annotObject[index]) {\n        annotObject[index].annotations = pageAnnotations;\n      }\n\n      var annotationStringified = JSON.stringify(annotObject);\n      window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n    }\n  };\n  /**\n   * @param currentAnnotation\n   * @param pageIndex\n   * @param isImport\n   * @param currentAnnotation\n   * @param pageIndex\n   * @param isImport\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  InkAnnotation.prototype.updateInkCollections = function (currentAnnotation, pageIndex, isImport) {\n    // eslint-disable-next-line\n    var annot; // eslint-disable-next-line\n\n    if (currentAnnotation) {\n      // eslint-disable-next-line\n      var bounds = currentAnnotation.Bounds;\n      var currentLeft = bounds.X;\n      var currentTop = bounds.Y;\n      var currentWidth = bounds.Width;\n      var currentHeight = bounds.Height;\n      var customData = currentAnnotation.customData;\n      var isPrint = currentAnnotation.isPrint; // eslint-disable-next-line\n\n      var allowedInteractions = currentAnnotation.AllowedInteractions ? currentAnnotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation); // eslint-disable-next-line\n\n      var annotationSettings = currentAnnotation.AnnotationSettings ? currentAnnotation.AnnotationSettings : this.pdfViewer.inkAnnotationSettings ? this.pdfViewer.inkAnnotationSettings : this.pdfViewer.annotationSettings;\n\n      if (currentAnnotation.IsLocked) {\n        annotationSettings.isLock = currentAnnotation.IsLocked;\n      } // eslint-disable-next-line\n\n\n      var data = currentAnnotation.PathData;\n\n      if (isImport) {\n        data = getPathString(JSON.parse(currentAnnotation.PathData));\n      }\n\n      annot = {\n        // eslint-disable-next-line max-len\n        id: 'ink' + this.pdfViewerBase.signatureCount,\n        bounds: {\n          x: currentLeft,\n          y: currentTop,\n          width: currentWidth,\n          height: currentHeight\n        },\n        pageIndex: pageIndex,\n        data: data,\n        // eslint-disable-next-line max-len\n        shapeAnnotationType: 'Ink',\n        opacity: currentAnnotation.Opacity,\n        strokeColor: currentAnnotation.StrokeColor,\n        thickness: currentAnnotation.Thickness,\n        annotationId: currentAnnotation.AnnotName,\n        // eslint-disable-next-line max-len\n        customData: customData,\n        comments: this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments, currentAnnotation, currentAnnotation.Author),\n        author: currentAnnotation.Author,\n        allowedInteractions: allowedInteractions,\n        subject: currentAnnotation.Subject,\n        modifiedDate: currentAnnotation.ModifiedDate,\n        review: {\n          state: '',\n          stateModel: '',\n          modifiedDate: currentAnnotation.ModifiedDate,\n          author: currentAnnotation.Author\n        },\n        notes: currentAnnotation.Note,\n        isPrint: isPrint,\n        isCommentLock: currentAnnotation.IsCommentLock,\n        annotationSettings: annotationSettings,\n        isLocked: annotationSettings.isLock\n      };\n      return annot;\n    }\n  };\n  /**\n   * This method used to add annotations with using program.\n   *\n   * @param annotationObject - It describes type of annotation object\n   * @param offset - It describes about the annotation bounds or location\n   * @param pageNumber - It describes about the annotation page number\n   * @returns Object\n   * @private\n   */\n\n\n  InkAnnotation.prototype.updateAddAnnotationDetails = function (annotationObject, offset, pageNumber) {\n    //Creating new object if annotationObject is null\n    if (!annotationObject) {\n      annotationObject = {\n        offset: {\n          x: 10,\n          y: 10\n        },\n        pageNumber: 0,\n        width: undefined,\n        height: undefined\n      };\n      offset = annotationObject.offset;\n    } else if (!annotationObject.offset) offset = {\n      x: 10,\n      y: 10\n    };else offset = annotationObject.offset; //Creating the CurrentDate and Annotation name\n\n\n    var currentDateString = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n    var annotationName = this.pdfViewer.annotation.createGUID(); //Creating annotation settings\n\n    var annotationSelectorSettings = this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings ? this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n    var annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings);\n    var allowedInteractions = this.pdfViewer.inkAnnotationSettings.allowedInteractions ? this.pdfViewer.inkAnnotationSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n    annotationSettings.isLock = annotationObject.isLock ? annotationObject.isLock : false;\n    annotationObject.width = annotationObject.width ? annotationObject.width : 150;\n    annotationObject.height = annotationObject.height ? annotationObject.height : 60;\n    var pathData = annotationObject.path ? annotationObject.path : '';\n\n    if (!isNullOrUndefined(pathData)) {\n      // Check whether the given path of the ink annotation is starts with Move path or Line path. \n      if (pathData[0] === 'M' || pathData[0] === 'L') {\n        var collectionData = processPathData(pathData);\n        var csData = splitArrayCollection(collectionData);\n        pathData = JSON.stringify(csData);\n      } else {\n        pathData = getPathString(JSON.parse(pathData));\n      }\n    }\n\n    annotationObject.path = pathData; //Creating Annotation objects with it's proper properties\n\n    var signatureInkAnnotation = [];\n    var ink = {\n      AllowedInteractions: annotationObject.allowedInteractions ? annotationObject.allowedInteractions : allowedInteractions,\n      AnnotName: annotationName,\n      AnnotType: 'ink',\n      AnnotationFlags: null,\n      AnnotationSelectorSettings: annotationObject.annotationSelectorSettings ? annotationObject.annotationSelectorSettings : annotationSelectorSettings,\n      AnnotationSettings: annotationSettings,\n      AnnotationType: 'Ink',\n      Author: annotationObject.author ? annotationObject.author : 'Guest',\n      Bounds: {\n        X: offset.x,\n        Y: offset.y,\n        Width: annotationObject.width,\n        Height: annotationObject.height,\n        Left: offset.x,\n        Top: offset.y,\n        Location: {\n          X: offset.x,\n          Y: offset.y\n        },\n        Size: {\n          Height: annotationObject.height,\n          IsEmpty: false,\n          Width: annotationObject.width\n        }\n      },\n      Comments: null,\n      CreatedDate: currentDateString,\n      CustomData: annotationObject.customData ? annotationObject.customData : null,\n      ExistingCustomData: null,\n      IsCommentLock: false,\n      IsLock: annotationObject.isLock ? annotationObject.isLock : false,\n      IsPrint: annotationObject.isPrint ? annotationObject.isPrint : true,\n      ModifiedDate: currentDateString,\n      Note: '',\n      Opacity: annotationObject.opacity ? annotationObject.opacity : 1,\n      PathData: annotationObject.path,\n      PageNumber: pageNumber,\n      State: '',\n      StateModel: '',\n      StrokeColor: annotationObject.strokeColor ? annotationObject.strokeColor : 'rgba(255,0,0,1)',\n      SubType: null,\n      Subject: 'Ink',\n      Type: null,\n      Thickness: annotationObject.thickness ? annotationObject.thickness : 1\n    }; //Adding the annotation object to an array and return it\n\n    signatureInkAnnotation[0] = ink;\n    return {\n      signatureInkAnnotation: signatureInkAnnotation\n    };\n  };\n\n  return InkAnnotation;\n}();\n\nexport { InkAnnotation };","map":{"version":3,"names":["splitArrayCollection","processPathData","getPathString","Browser","isNullOrUndefined","InkAnnotation","pdfViewer","pdfViewerBase","newObject","outputString","inkAnnotationindex","isAddAnnotationProgramatically","currentPageNumber","prototype","drawInk","disableTextSelectionMode","tool","drawInkAnnotation","pageNumber","isToolbarInkClicked","isInkAdded","pageIndex","isNaN","currentAnnot","addInk","renderDrawing","undefined","clearSelection","select","id","annotationSelectorSettings","toolbar","annotationToolbarModule","enableSignaturePropertiesTools","isDevice","enableDesktopMode","enableToolbar","enableAnnotationToolbar","toolbarModule","createPropertyTools","storePathData","convertToPath","drawInkInCanvas","position","parseInt","zoom","getZoomFactor","ratio","getWindowDevicePixelRatio","canvas","document","getElementById","element","context","getContext","thickness","inkAnnotationSettings","opacity","strokeColor","setTransform","beginPath","lineJoin","lineCap","moveTo","prevPosition","x","y","lineTo","currentPosition","lineWidth","strokeStyle","globalAlpha","stroke","arc","Math","PI","closePath","push","toString","movePath","linePath","n","length","currentBounds","calculateInkSize","zoomvalue","annot","annotationName","annotation","createGUID","modifiedDate","stickyNotesAnnotationModule","getDateAndTime","isLock","annotationSettings","author","customData","isPrint","allowedInteractions","inkCount","bounds","width","height","data","shapeAnnotationType","annotName","comments","subject","notes","review","state","stateModel","getSelector","isCommentLock","isLocked","add","left","top","settings","commentsDivid","addComments","addAction","annotationModule","storeAnnotations","fireAnnotationAdd","setAnnotationMode","saveInkSignature","storeObject","window","sessionStorage","getItem","documentId","annotations","Array","j","pageCount","annotationCollection","JSON","parse","i","newArray","pageAnnotationObject","z","updateModifiedDate","strokeColorString","stringify","signatureModule","getRgbCode","getInkBounds","collectionData","csData","addInCollection","annotationBase","pageAnnotations","getAnnotations","manageInkAnnotations","minimumX","minimumY","maximumX","maximumY","k","val","point1","point2","newdifferenceX","newdifferenceY","renderExistingInkSignature","isImport","isinkAnnotationAdded","p","indexOf","currentAnnotation","PathData","IsPathData","split","calculateInkPosition","rectDiff","rectDifference","Bounds","Height","Width","currentLeft","X","currentTop","Y","currentWidth","currentHeight","AnnotationSettings","selectorSettings","AnnotationSelectorSettings","getCustomData","IsLocked","Subject","Opacity","AllowedInteractions","updateAnnotationAllowedInteractions","StrokeColor","Thickness","AnnotName","getAnnotationComments","Comments","Author","ModifiedDate","Note","IsCommentLock","canvass","currentSignatureAnnot","signatureCount","navigationPane","annotationMenuObj","isSignatureEditable","enableItems","localeObj","getConstant","storeInkSignatureData","wrapper","index","shapeAnnotation","annotationStringified","setItem","annotObject","removeItem","getPageCollection","markupAnnotation","type","selector","shapeAnnotations","modifySignatureInkCollection","property","updateDocumentEditedProperty","currentAnnotObject","children","style","strokeWidth","splice","storeAnnotationCollections","updateInkCollections","annotationId","updateAddAnnotationDetails","annotationObject","offset","currentDateString","updateSettings","pathData","path","signatureInkAnnotation","ink","AnnotType","AnnotationFlags","AnnotationType","Left","Top","Location","Size","IsEmpty","CreatedDate","CustomData","ExistingCustomData","IsLock","IsPrint","PageNumber","State","StateModel","SubType","Type"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/annotation/ink-annotation.js"],"sourcesContent":["import { splitArrayCollection, processPathData, getPathString } from '@syncfusion/ej2-drawings';\nimport { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar InkAnnotation = /** @class */ (function () {\n    function InkAnnotation(pdfViewer, pdfViewerBase) {\n        // eslint-disable-next-line\n        this.newObject = [];\n        /**\n         * @private\n         */\n        this.outputString = '';\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.inkAnnotationindex = [];\n        /**\n         * @private\n         */\n        this.isAddAnnotationProgramatically = false;\n        /**\n         * @private\n         */\n        this.currentPageNumber = '';\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    InkAnnotation.prototype.drawInk = function () {\n        this.pdfViewerBase.disableTextSelectionMode();\n        this.pdfViewer.tool = 'Ink';\n    };\n    InkAnnotation.prototype.drawInkAnnotation = function (pageNumber) {\n        if (this.pdfViewerBase.isToolbarInkClicked) {\n            this.pdfViewerBase.isInkAdded = true;\n            var pageIndex = !isNaN(pageNumber) ? pageNumber : this.pdfViewerBase.currentPageNumber - 1;\n            if (this.outputString && this.outputString !== '') {\n                var currentAnnot = this.addInk(pageIndex);\n                this.pdfViewer.renderDrawing(undefined, pageIndex);\n                this.pdfViewer.clearSelection(pageIndex);\n                this.pdfViewer.select([currentAnnot.id], currentAnnot.annotationSelectorSettings);\n                if (this.pdfViewer.toolbar && this.pdfViewer.toolbar.annotationToolbarModule) {\n                    this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);\n                }\n                if (Browser.isDevice && !this.pdfViewer.enableDesktopMode && this.pdfViewer.enableToolbar && this.pdfViewer.enableAnnotationToolbar) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(\"Ink\");\n                }\n            }\n            else {\n                this.outputString = '';\n                this.newObject = [];\n                this.pdfViewerBase.isToolbarInkClicked = false;\n                this.pdfViewer.tool = '';\n            }\n            this.pdfViewerBase.isInkAdded = false;\n        }\n    };\n    /**\n     * @private\n     */\n    InkAnnotation.prototype.storePathData = function () {\n        this.convertToPath(this.newObject);\n        this.newObject = [];\n    };\n    /**\n     * @param position\n     * @param pageIndex\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.drawInkInCanvas = function (position, pageIndex) {\n        // eslint-disable-next-line\n        if (this.currentPageNumber !== '' && parseInt(this.currentPageNumber) !== pageIndex) {\n            // eslint-disable-next-line\n            this.drawInkAnnotation(parseInt(this.currentPageNumber));\n            this.pdfViewerBase.isToolbarInkClicked = true;\n            this.pdfViewer.tool = 'Ink';\n        }\n        var zoom = this.pdfViewerBase.getZoomFactor();\n        var ratio = this.pdfViewerBase.getWindowDevicePixelRatio();\n        ;\n        // eslint-disable-next-line\n        var canvas = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + pageIndex);\n        // eslint-disable-next-line\n        var context = canvas.getContext('2d');\n        var thickness = this.pdfViewer.inkAnnotationSettings.thickness ? this.pdfViewer.inkAnnotationSettings.thickness : 1;\n        // eslint-disable-next-line max-len\n        var opacity = this.pdfViewer.inkAnnotationSettings.opacity ? this.pdfViewer.inkAnnotationSettings.opacity : 1;\n        // eslint-disable-next-line max-len\n        var strokeColor = this.pdfViewer.inkAnnotationSettings.strokeColor ? this.pdfViewer.inkAnnotationSettings.strokeColor : '#ff0000';\n        if (!Browser.isDevice || (Browser.isDevice && zoom <= 0.7)) {\n            context.setTransform(ratio, 0, 0, ratio, 0, 0);\n        }\n        context.beginPath();\n        context.lineJoin = 'round';\n        context.lineCap = 'round';\n        context.moveTo(position.prevPosition.x, position.prevPosition.y);\n        context.lineTo(position.currentPosition.x, position.currentPosition.y);\n        context.lineWidth = thickness * zoom > 1 ? thickness * zoom : thickness;\n        context.strokeStyle = strokeColor;\n        context.globalAlpha = opacity;\n        context.stroke();\n        // context.lineWidth = 2;\n        context.arc(position.prevPosition.x, position.prevPosition.y, 2 / 2, 0, Math.PI * 2, true);\n        context.closePath();\n        this.pdfViewerBase.prevPosition = position.currentPosition;\n        this.newObject.push(position.currentPosition.x, position.currentPosition.y);\n        this.currentPageNumber = pageIndex.toString();\n    };\n    // eslint-disable-next-line\n    InkAnnotation.prototype.convertToPath = function (newObject) {\n        this.movePath(newObject[0], newObject[1]);\n        this.linePath(newObject[0], newObject[1]);\n        for (var n = 2; n < newObject.length; n = n + 2) {\n            this.linePath(newObject[n], newObject[n + 1]);\n        }\n    };\n    InkAnnotation.prototype.linePath = function (x, y) {\n        this.outputString += 'L' + x + ',' + y + ' ';\n    };\n    InkAnnotation.prototype.movePath = function (x, y) {\n        this.outputString += 'M' + x + ',' + y + ' ';\n    };\n    /**\n     * @param pageNumber\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.addInk = function (pageNumber) {\n        // eslint-disable-next-line\n        var currentBounds = this.calculateInkSize();\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        // eslint-disable-next-line\n        var annot;\n        if (this.pdfViewerBase.isToolbarInkClicked) {\n            var annotationName = this.pdfViewer.annotation.createGUID();\n            var modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n            var pageIndex = !isNaN(pageNumber) ? pageNumber : this.pdfViewerBase.currentPageNumber - 1;\n            var thickness = this.pdfViewer.inkAnnotationSettings.thickness ? this.pdfViewer.inkAnnotationSettings.thickness : 1;\n            // eslint-disable-next-line max-len\n            var opacity = this.pdfViewer.inkAnnotationSettings.opacity ? this.pdfViewer.inkAnnotationSettings.opacity : 1;\n            // eslint-disable-next-line max-len\n            var strokeColor = this.pdfViewer.inkAnnotationSettings.strokeColor ? this.pdfViewer.inkAnnotationSettings.strokeColor : '#ff0000';\n            // eslint-disable-next-line\n            var isLock = this.pdfViewer.inkAnnotationSettings.isLock ? this.pdfViewer.inkAnnotationSettings.isLock : this.pdfViewer.annotationSettings.isLock;\n            var author = (this.pdfViewer.annotationSettings.author !== 'Guest') ? this.pdfViewer.annotationSettings.author : this.pdfViewer.inkAnnotationSettings.author ? this.pdfViewer.inkAnnotationSettings.author : 'Guest';\n            var customData = this.pdfViewer.inkAnnotationSettings.customData;\n            var isPrint = this.pdfViewer.inkAnnotationSettings.isPrint;\n            // eslint-disable-next-line\n            var allowedInteractions = this.pdfViewer.inkAnnotationSettings.allowedInteractions ? this.pdfViewer.inkAnnotationSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n            // eslint-disable-next-line\n            var annotationSettings = this.pdfViewer.inkAnnotationSettings ? this.pdfViewer.inkAnnotationSettings : this.pdfViewer.annotationSettings;\n            annot = {\n                // eslint-disable-next-line max-len\n                id: 'ink' + this.pdfViewerBase.inkCount, bounds: { x: currentBounds.x, y: currentBounds.y, width: currentBounds.width, height: currentBounds.height }, pageIndex: pageIndex, data: this.outputString, customData: customData,\n                shapeAnnotationType: 'Ink', opacity: opacity, strokeColor: strokeColor, thickness: thickness, annotName: annotationName, comments: [],\n                author: author, subject: 'Ink', notes: '',\n                review: { state: '', stateModel: '', modifiedDate: modifiedDate, author: author },\n                annotationSelectorSettings: this.getSelector('Ink', ''), modifiedDate: modifiedDate, annotationSettings: annotationSettings,\n                isPrint: isPrint, allowedInteractions: allowedInteractions, isCommentLock: false, isLocked: isLock\n            };\n            var annotation = this.pdfViewer.add(annot);\n            // eslint-disable-next-line\n            var bounds = { left: annot.bounds.x, top: annot.bounds.y, width: annot.bounds.width, height: annot.bounds.height };\n            // eslint-disable-next-line\n            var settings = {\n                opacity: annot.opacity, strokeColor: annot.strokeColor, thickness: annot.thickness, modifiedDate: annot.modifiedDate,\n                width: annot.bounds.width, height: annot.bounds.height, data: this.outputString\n            };\n            this.pdfViewerBase.inkCount++;\n            // eslint-disable-next-line max-len\n            var commentsDivid = this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('ink', (annot.pageIndex + 1), annot.shapeAnnotationType);\n            if (commentsDivid) {\n                document.getElementById(commentsDivid).id = annotationName;\n            }\n            annot.annotName = annotationName;\n            // eslint-disable-next-line max-len\n            this.pdfViewer.annotation.addAction(pageIndex, null, annotation, 'Addition', '', annotation, annotation);\n            this.pdfViewer.annotationModule.storeAnnotations(pageIndex, annot, '_annotations_ink');\n            this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'Ink', bounds, settings);\n            if (this.pdfViewerBase.isInkAdded) {\n                this.outputString = '';\n                this.newObject = [];\n            }\n            this.pdfViewerBase.isToolbarInkClicked = false;\n            this.pdfViewer.tool = '';\n        }\n        return annot;\n    };\n    /**\n     * @private\n     */\n    InkAnnotation.prototype.setAnnotationMode = function () {\n        if (this.pdfViewerBase.isToolbarInkClicked) {\n            this.drawInkAnnotation();\n        }\n        else {\n            this.pdfViewerBase.isToolbarInkClicked = true;\n            this.drawInk();\n        }\n    };\n    InkAnnotation.prototype.saveInkSignature = function () {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n        // eslint-disable-next-line\n        var annotations = new Array();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                // eslint-disable-next-line\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);\n                        // eslint-disable-next-line max-len\n                        var strokeColorString = pageAnnotationObject.annotations[z].strokeColor;\n                        pageAnnotationObject.annotations[z].strokeColor = JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(strokeColorString));\n                        pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.pdfViewer.annotation.getInkBounds(pageAnnotationObject.annotations[z].bounds, pageAnnotationObject.pageIndex));\n                        // eslint-disable-next-line\n                        var collectionData = processPathData(pageAnnotationObject.annotations[z].data);\n                        // eslint-disable-next-line\n                        var csData = splitArrayCollection(collectionData);\n                        pageAnnotationObject.annotations[z].data = JSON.stringify(csData);\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    /**\n     * @param pageNumber\n     * @param annotationBase\n     * @param pageNumber\n     * @param annotationBase\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.addInCollection = function (pageNumber, annotationBase) {\n        if (annotationBase) {\n            // eslint-disable-next-line\n            var pageAnnotations = this.getAnnotations(pageNumber, null);\n            if (pageAnnotations) {\n                pageAnnotations.push(annotationBase);\n            }\n            this.manageInkAnnotations(pageAnnotations, pageNumber);\n        }\n    };\n    // eslint-disable-next-line\n    InkAnnotation.prototype.calculateInkSize = function () {\n        var minimumX = -1;\n        var minimumY = -1;\n        var maximumX = -1;\n        var maximumY = -1;\n        // eslint-disable-next-line\n        var collectionData = processPathData(this.outputString);\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        // eslint-disable-next-line\n        for (var k = 0; k < collectionData.length; k++) {\n            // eslint-disable-next-line\n            var val = collectionData[k];\n            if (minimumX === -1) {\n                // eslint-disable-next-line\n                minimumX = (val['x']);\n                // eslint-disable-next-line\n                maximumX = (val['x']);\n                // eslint-disable-next-line\n                minimumY = (val['y']);\n                // eslint-disable-next-line\n                maximumY = (val['y']);\n            }\n            else {\n                // eslint-disable-next-line\n                var point1 = (val['x']);\n                // eslint-disable-next-line\n                var point2 = (val['y']);\n                if (minimumX >= point1) {\n                    minimumX = point1;\n                }\n                if (minimumY >= point2) {\n                    minimumY = point2;\n                }\n                if (maximumX <= point1) {\n                    maximumX = point1;\n                }\n                if (maximumY <= point2) {\n                    maximumY = point2;\n                }\n            }\n        }\n        var newdifferenceX = maximumX - minimumX;\n        var newdifferenceY = maximumY - minimumY;\n        // eslint-disable-next-line max-len\n        return { x: (minimumX / zoomvalue), y: (minimumY / zoomvalue), width: (newdifferenceX / zoomvalue), height: (newdifferenceY / zoomvalue) };\n    };\n    /**\n     * @param annotationCollection\n     * @param pageIndex\n     * @param isImport\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.renderExistingInkSignature = function (annotationCollection, pageIndex, isImport) {\n        var annot;\n        var isinkAnnotationAdded = false;\n        if (!isImport) {\n            for (var p = 0; p < this.inkAnnotationindex.length; p++) {\n                if (this.inkAnnotationindex[p] === pageIndex) {\n                    isinkAnnotationAdded = true;\n                    break;\n                }\n            }\n        }\n        if (annotationCollection && !isinkAnnotationAdded) {\n            if (annotationCollection.length > 0 && this.inkAnnotationindex.indexOf(pageIndex) === -1) {\n                this.inkAnnotationindex.push(pageIndex);\n            }\n            for (var n = 0; n < annotationCollection.length; n++) {\n                // eslint-disable-next-line\n                var currentAnnotation = annotationCollection[n];\n                if (currentAnnotation) {\n                    // eslint-disable-next-line\n                    var data = currentAnnotation.PathData;\n                    if (isImport && data) {\n                        if (typeof (data) === 'object' && data.length > 1) {\n                            data = getPathString(data);\n                        }\n                        else {\n                            if (currentAnnotation.IsPathData || (data.split('command').length <= 1)) {\n                                data = data;\n                            }\n                            else {\n                                data = getPathString(JSON.parse(data));\n                            }\n                        }\n                    }\n                    this.outputString = data;\n                    // eslint-disable-next-line\n                    var calculateInkPosition = this.calculateInkSize();\n                    this.outputString = '';\n                    var rectDiff = 0;\n                    var rectDifference = 1;\n                    // eslint-disable-next-line\n                    var bounds = currentAnnotation.Bounds;\n                    if (calculateInkPosition) {\n                        if (calculateInkPosition.height < 1) {\n                            rectDiff = bounds.Height ? bounds.Height : bounds.height;\n                            rectDifference = bounds.Height ? bounds.Height : bounds.height;\n                        }\n                        else if (calculateInkPosition.width < 1) {\n                            rectDiff = bounds.Width ? bounds.Width : bounds.width;\n                            rectDifference = bounds.Width ? bounds.Width : bounds.width;\n                        }\n                    }\n                    var currentLeft = !isNullOrUndefined(bounds.X) ? bounds.X + (rectDiff / 2) : bounds.x + (rectDiff / 2);\n                    var currentTop = !isNullOrUndefined(bounds.Y) ? bounds.Y + (rectDiff / 2) : bounds.y + (rectDiff / 2);\n                    var currentWidth = bounds.Width ? bounds.Width - (rectDifference - 1) : bounds.width - (rectDifference - 1);\n                    var currentHeight = bounds.Height ? bounds.Height - (rectDifference - 1) : bounds.height - (rectDifference - 1);\n                    var isLock = currentAnnotation.AnnotationSettings ? currentAnnotation.AnnotationSettings.isLock : false;\n                    // eslint-disable-next-line\n                    var selectorSettings = currentAnnotation.AnnotationSelectorSettings ? currentAnnotation.AnnotationSelectorSettings : this.getSelector(currentAnnotation, 'Ink');\n                    var customData = this.pdfViewer.annotation.getCustomData(currentAnnotation);\n                    var isPrint = true;\n                    if (currentAnnotation.AnnotationSettings) {\n                        isPrint = currentAnnotation.AnnotationSettings.isPrint;\n                    }\n                    else {\n                        isPrint = this.pdfViewer.inkAnnotationSettings.isPrint;\n                    }\n                    if (currentAnnotation.IsLocked) {\n                        isLock = currentAnnotation.IsLocked;\n                    }\n                    if (currentAnnotation.Subject === 'Highlight' && currentAnnotation.Opacity === 1) {\n                        currentAnnotation.Opacity = currentAnnotation.Opacity / 2;\n                    }\n                    // eslint-disable-next-line max-len\n                    currentAnnotation.allowedInteractions = currentAnnotation.AllowedInteractions ? currentAnnotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);\n                    annot = {\n                        // eslint-disable-next-line max-len\n                        id: 'ink' + this.pdfViewerBase.inkCount, bounds: { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight }, pageIndex: pageIndex, data: data,\n                        shapeAnnotationType: 'Ink', opacity: currentAnnotation.Opacity, strokeColor: currentAnnotation.StrokeColor, thickness: currentAnnotation.Thickness, annotName: currentAnnotation.AnnotName,\n                        // eslint-disable-next-line max-len\n                        comments: this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments, currentAnnotation, currentAnnotation.Author), author: currentAnnotation.Author, allowedInteractions: currentAnnotation.allowedInteractions, subject: currentAnnotation.Subject, modifiedDate: currentAnnotation.ModifiedDate,\n                        // eslint-disable-next-line max-len\n                        review: { state: '', stateModel: '', modifiedDate: currentAnnotation.ModifiedDate, author: currentAnnotation.Author }, notes: currentAnnotation.Note, annotationSettings: { isLock: isLock },\n                        annotationSelectorSettings: selectorSettings, customData: customData, isPrint: isPrint, isCommentLock: currentAnnotation.IsCommentLock\n                    };\n                    this.pdfViewer.add(annot);\n                    // eslint-disable-next-line\n                    var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentAnnotation.pageIndex);\n                    // eslint-disable-next-line\n                    this.pdfViewer.renderDrawing(canvass, annot.pageIndex);\n                    this.pdfViewer.annotationModule.storeAnnotations(annot.pageIndex, annot, '_annotations_ink');\n                    if (this.isAddAnnotationProgramatically) {\n                        var settings = {\n                            opacity: annot.opacity, strokeColor: annot.strokeColor, thickness: annot.thickness, modifiedDate: annot.modifiedDate,\n                            width: annot.bounds.width, height: annot.bounds.height, data: this.outputString\n                        };\n                        this.pdfViewer.fireAnnotationAdd(annot.pageIndex, annot.annotName, 'Ink', bounds, settings);\n                    }\n                    this.pdfViewerBase.currentSignatureAnnot = null;\n                    this.pdfViewerBase.signatureCount++;\n                    this.pdfViewerBase.inkCount++;\n                    // eslint-disable-next-line max-len\n                    if (this.pdfViewerBase.navigationPane && this.pdfViewerBase.navigationPane.annotationMenuObj && this.pdfViewer.isSignatureEditable) {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')], true);\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')], true);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @param pageNumber\n     * @param annotations\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.storeInkSignatureData = function (pageNumber, annotations) {\n        // eslint-disable-next-line max-len\n        this.pdfViewer.annotation.addAction(annotations.pageIndex, null, annotations, 'Addition', '', annotations, annotations);\n        // eslint-disable-next-line\n        var annotation = null;\n        var left = annotations.bounds.left ? annotations.bounds.left : annotations.bounds.x;\n        var top = annotations.bounds.top ? annotations.bounds.top : annotations.bounds.y;\n        if (annotations.wrapper && annotations.wrapper.bounds) {\n            left = annotations.wrapper.bounds.left;\n            top = annotations.wrapper.bounds.top;\n        }\n        annotation = {\n            // eslint-disable-next-line max-len\n            id: annotations.id, bounds: { x: left, y: top, width: annotations.bounds.width, height: annotations.bounds.height },\n            // eslint-disable-next-line max-len\n            shapeAnnotationType: 'Ink', opacity: annotations.opacity, thickness: annotations.thickness, strokeColor: annotations.strokeColor, pageIndex: annotations.pageIndex, data: annotations.data,\n            annotName: annotations.annotName,\n            // eslint-disable-next-line max-len\n            comments: annotations.comments, author: annotations.author, subject: annotations.subject, modifiedDate: annotations.modifiedDate,\n            // eslint-disable-next-line max-len\n            review: { state: '', stateModel: '', modifiedDate: annotations.modifiedDate, author: annotations.author }, notes: annotations.notes,\n            annotationSelectorSettings: this.getSelector(annotations, 'Ink'), isCommentLock: annotations.isCommentLock\n        };\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n        var index = 0;\n        if (!storeObject) {\n            var shapeAnnotation = { pageIndex: pageNumber, annotations: [] };\n            shapeAnnotation.annotations.push(annotation);\n            index = shapeAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(shapeAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n        }\n        else {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_ink');\n            var pageIndex = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[pageIndex]) {\n                annotObject[pageIndex].annotations.push(annotation);\n                index = annotObject[pageIndex].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n        }\n    };\n    InkAnnotation.prototype.getSelector = function (type, subject) {\n        var selector = this.pdfViewer.annotationSelectorSettings;\n        if (type === 'Ink' && this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings) {\n            selector = this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings;\n        }\n        return selector;\n    };\n    // eslint-disable-next-line\n    InkAnnotation.prototype.getAnnotations = function (pageIndex, shapeAnnotations) {\n        // eslint-disable-next-line\n        var annotationCollection;\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = shapeAnnotations;\n            }\n        }\n        else {\n            annotationCollection = shapeAnnotations;\n        }\n        return annotationCollection;\n    };\n    /**\n     * @param property\n     * @param pageNumber\n     * @param annotationBase\n     * @param property\n     * @param pageNumber\n     * @param annotationBase\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.modifySignatureInkCollection = function (property, pageNumber, annotationBase) {\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n        // eslint-disable-next-line\n        var currentAnnotObject = null;\n        // eslint-disable-next-line\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations != null && annotationBase) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (annotationBase.id === pageAnnotations[i].id) {\n                    if (property === 'bounds') {\n                        // eslint-disable-next-line max-len\n                        pageAnnotations[i].bounds = { x: annotationBase.wrapper.bounds.left, y: annotationBase.wrapper.bounds.top, width: annotationBase.bounds.width, height: annotationBase.bounds.height };\n                    }\n                    else if (property === 'stroke') {\n                        pageAnnotations[i].strokeColor = annotationBase.wrapper.children[0].style.strokeColor;\n                    }\n                    else if (property === 'opacity') {\n                        pageAnnotations[i].opacity = annotationBase.wrapper.children[0].style.opacity;\n                    }\n                    else if (property === 'thickness') {\n                        pageAnnotations[i].thickness = annotationBase.wrapper.children[0].style.strokeWidth;\n                    }\n                    else if (property === 'notes') {\n                        pageAnnotations[i].notes = annotationBase.notes;\n                    }\n                    else if (property === 'delete') {\n                        currentAnnotObject = pageAnnotations.splice(i, 1)[0];\n                        break;\n                    }\n                    pageAnnotations[i].modifiedDate = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n                    this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i], pageNumber);\n                }\n            }\n            this.manageInkAnnotations(pageAnnotations, pageNumber);\n        }\n        return currentAnnotObject;\n    };\n    // eslint-disable-next-line\n    InkAnnotation.prototype.manageInkAnnotations = function (pageAnnotations, pageNumber) {\n        // eslint-disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_ink');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_ink');\n            var index = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_ink', annotationStringified);\n        }\n    };\n    /**\n     * @param currentAnnotation\n     * @param pageIndex\n     * @param isImport\n     * @param currentAnnotation\n     * @param pageIndex\n     * @param isImport\n     * @private\n     */\n    // eslint-disable-next-line\n    InkAnnotation.prototype.updateInkCollections = function (currentAnnotation, pageIndex, isImport) {\n        // eslint-disable-next-line\n        var annot;\n        // eslint-disable-next-line\n        if (currentAnnotation) {\n            // eslint-disable-next-line\n            var bounds = currentAnnotation.Bounds;\n            var currentLeft = (bounds.X);\n            var currentTop = (bounds.Y);\n            var currentWidth = (bounds.Width);\n            var currentHeight = (bounds.Height);\n            var customData = currentAnnotation.customData;\n            var isPrint = currentAnnotation.isPrint;\n            // eslint-disable-next-line\n            var allowedInteractions = currentAnnotation.AllowedInteractions ? currentAnnotation.AllowedInteractions : this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);\n            // eslint-disable-next-line\n            var annotationSettings = currentAnnotation.AnnotationSettings ? currentAnnotation.AnnotationSettings : this.pdfViewer.inkAnnotationSettings ? this.pdfViewer.inkAnnotationSettings : this.pdfViewer.annotationSettings;\n            if (currentAnnotation.IsLocked) {\n                annotationSettings.isLock = currentAnnotation.IsLocked;\n            }\n            // eslint-disable-next-line\n            var data = currentAnnotation.PathData;\n            if (isImport) {\n                data = getPathString(JSON.parse(currentAnnotation.PathData));\n            }\n            annot = {\n                // eslint-disable-next-line max-len\n                id: 'ink' + this.pdfViewerBase.signatureCount, bounds: { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight }, pageIndex: pageIndex, data: data,\n                // eslint-disable-next-line max-len\n                shapeAnnotationType: 'Ink', opacity: currentAnnotation.Opacity, strokeColor: currentAnnotation.StrokeColor, thickness: currentAnnotation.Thickness, annotationId: currentAnnotation.AnnotName,\n                // eslint-disable-next-line max-len\n                customData: customData, comments: this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments, currentAnnotation, currentAnnotation.Author), author: currentAnnotation.Author, allowedInteractions: allowedInteractions, subject: currentAnnotation.Subject, modifiedDate: currentAnnotation.ModifiedDate,\n                review: { state: '', stateModel: '', modifiedDate: currentAnnotation.ModifiedDate, author: currentAnnotation.Author }, notes: currentAnnotation.Note, isPrint: isPrint, isCommentLock: currentAnnotation.IsCommentLock, annotationSettings: annotationSettings, isLocked: annotationSettings.isLock\n            };\n            return annot;\n        }\n    };\n    /**\n     * This method used to add annotations with using program.\n     *\n     * @param annotationObject - It describes type of annotation object\n     * @param offset - It describes about the annotation bounds or location\n     * @param pageNumber - It describes about the annotation page number\n     * @returns Object\n     * @private\n     */\n    InkAnnotation.prototype.updateAddAnnotationDetails = function (annotationObject, offset, pageNumber) {\n        //Creating new object if annotationObject is null\n        if (!annotationObject) {\n            annotationObject = { offset: { x: 10, y: 10 }, pageNumber: 0, width: undefined, height: undefined };\n            offset = annotationObject.offset;\n        }\n        else if (!annotationObject.offset)\n            offset = { x: 10, y: 10 };\n        else\n            offset = annotationObject.offset;\n        //Creating the CurrentDate and Annotation name\n        var currentDateString = this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();\n        var annotationName = this.pdfViewer.annotation.createGUID();\n        //Creating annotation settings\n        var annotationSelectorSettings = this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings ? this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings : this.pdfViewer.annotationSelectorSettings;\n        var annotationSettings = this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings);\n        var allowedInteractions = this.pdfViewer.inkAnnotationSettings.allowedInteractions ? this.pdfViewer.inkAnnotationSettings.allowedInteractions : this.pdfViewer.annotationSettings.allowedInteractions;\n        annotationSettings.isLock = annotationObject.isLock ? annotationObject.isLock : false;\n        annotationObject.width = annotationObject.width ? annotationObject.width : 150;\n        annotationObject.height = annotationObject.height ? annotationObject.height : 60;\n        var pathData = annotationObject.path ? annotationObject.path : '';\n        if (!isNullOrUndefined(pathData)) {\n            // Check whether the given path of the ink annotation is starts with Move path or Line path. \n            if (pathData[0] === 'M' || pathData[0] === 'L') {\n                var collectionData = processPathData(pathData);\n                var csData = splitArrayCollection(collectionData);\n                pathData = JSON.stringify(csData);\n            }\n            else {\n                pathData = getPathString(JSON.parse(pathData));\n            }\n        }\n        annotationObject.path = pathData;\n        //Creating Annotation objects with it's proper properties\n        var signatureInkAnnotation = [];\n        var ink = {\n            AllowedInteractions: annotationObject.allowedInteractions ? annotationObject.allowedInteractions : allowedInteractions,\n            AnnotName: annotationName,\n            AnnotType: 'ink',\n            AnnotationFlags: null,\n            AnnotationSelectorSettings: annotationObject.annotationSelectorSettings ? annotationObject.annotationSelectorSettings : annotationSelectorSettings,\n            AnnotationSettings: annotationSettings,\n            AnnotationType: 'Ink',\n            Author: annotationObject.author ? annotationObject.author : 'Guest',\n            Bounds: { X: offset.x, Y: offset.y, Width: annotationObject.width, Height: annotationObject.height, Left: offset.x, Top: offset.y, Location: { X: offset.x, Y: offset.y }, Size: { Height: annotationObject.height, IsEmpty: false, Width: annotationObject.width } },\n            Comments: null,\n            CreatedDate: currentDateString,\n            CustomData: annotationObject.customData ? annotationObject.customData : null,\n            ExistingCustomData: null,\n            IsCommentLock: false,\n            IsLock: annotationObject.isLock ? annotationObject.isLock : false,\n            IsPrint: annotationObject.isPrint ? annotationObject.isPrint : true,\n            ModifiedDate: currentDateString,\n            Note: '',\n            Opacity: annotationObject.opacity ? annotationObject.opacity : 1,\n            PathData: annotationObject.path,\n            PageNumber: pageNumber,\n            State: '',\n            StateModel: '',\n            StrokeColor: annotationObject.strokeColor ? annotationObject.strokeColor : 'rgba(255,0,0,1)',\n            SubType: null,\n            Subject: 'Ink',\n            Type: null,\n            Thickness: annotationObject.thickness ? annotationObject.thickness : 1\n        };\n        //Adding the annotation object to an array and return it\n        signatureInkAnnotation[0] = ink;\n        return { signatureInkAnnotation: signatureInkAnnotation };\n    };\n    return InkAnnotation;\n}());\nexport { InkAnnotation };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}