{"ast":null,"code":"import { removeClass, addClass, extend } from '@syncfusion/ej2-base';\nimport { closest, classList, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\n\nvar DetailRow =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the Grid detail template module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} locator - specifes the serviceLocator\n   * @hidden\n   */\n  function DetailRow(parent, locator) {\n    //Internal variables\n    this.aria = new AriaService();\n    this.childRefs = [];\n    this.parent = parent;\n\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.focus = locator.getService('focus');\n    this.parent.on(events.click, this.clickHandler, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    this.parent.on(events.expandChildGrid, this.expand, this);\n    this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n    this.parent.on(events.destroy, this.destroyChildGrids, this);\n    this.parent.on(events.destroyChildGrid, this.destroyChildGrids, this);\n  }\n\n  DetailRow.prototype.clickHandler = function (e) {\n    this.toogleExpandcollapse(closest(e.target, 'td'));\n  };\n\n  DetailRow.prototype.toogleExpandcollapse = function (target) {\n    var gObj = this.parent;\n    var table = this.parent.getContentTable();\n    var lastrowIdx = this.parent.getCurrentViewRecords().length - 1;\n    var parent = 'parentDetails';\n    var childGrid;\n    var isExpanded = target && target.classList.contains('e-detailrowcollapse');\n\n    if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand')))) {\n      return;\n    }\n\n    var tr = target.parentElement;\n    var uid = tr.getAttribute('data-uid');\n    var rowObj = gObj.getRowObjectFromUID(uid);\n    var nextRow = this.parent.getContentTable().querySelector(literals.tbody).children[tr.rowIndex + 1];\n\n    if (target.classList.contains('e-detailrowcollapse')) {\n      var data = rowObj.data;\n\n      if (this.isDetailRow(nextRow)) {\n        nextRow.style.display = '';\n        gObj.notify(events.detailStateChange, {\n          data: data,\n          childGrid: gObj.childGrid,\n          detailElement: target,\n          isExpanded: isExpanded\n        });\n      } else if (gObj.getDetailTemplate() || gObj.childGrid) {\n        var rowId = getUid('grid-row');\n        var detailRow = this.parent.createElement('tr', {\n          className: 'e-detailrow',\n          attrs: {\n            'data-uid': rowId,\n            role: 'row'\n          }\n        });\n        var detailCell = this.parent.createElement('td', {\n          className: 'e-detailcell'\n        });\n        var colSpan = this.parent.getVisibleColumns().length;\n\n        if (this.parent.allowRowDragAndDrop) {\n          colSpan++;\n        }\n\n        detailCell.setAttribute('colspan', colSpan.toString());\n        var row = new Row({\n          isDataRow: true,\n          isExpand: true,\n          uid: rowId,\n          isDetailRow: true,\n          cells: [new Cell({\n            cellType: CellType.Indent\n          }), new Cell({\n            isDataCell: true,\n            visible: true\n          })]\n        });\n        row.parentUid = rowObj.uid;\n\n        for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n          detailRow.appendChild(this.parent.createElement('td', {\n            className: 'e-indentcell'\n          }));\n          row.cells.unshift(new Cell({\n            cellType: CellType.Indent\n          }));\n        }\n\n        detailRow.appendChild(this.parent.createElement('td', {\n          className: 'e-detailindentcell'\n        }));\n        detailRow.appendChild(detailCell);\n        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\n        if (gObj.detailTemplate) {\n          var isReactCompiler = this.parent.isReact && typeof gObj.detailTemplate !== 'string';\n          var detailTemplateID = gObj.element.id + 'detailTemplate';\n\n          if (isReactCompiler) {\n            gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID, null, null, detailCell);\n            this.parent.renderTemplates();\n          } else {\n            appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID, undefined, undefined, undefined, this.parent['root']));\n          }\n        } else {\n          childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n          this.childRefs.push(childGrid);\n\n          if (childGrid.query) {\n            childGrid.query = childGrid.query.clone();\n          }\n\n          childGrid[parent] = {\n            parentID: gObj.element.id,\n            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n            parentKeyField: gObj.childGrid.queryString,\n            parentKeyFieldValue: data[gObj.childGrid.queryString],\n            parentRowData: data\n          };\n          childGrid.isLegacyTemplate = gObj.isReact || gObj.isLegacyTemplate;\n\n          if (gObj.isPrinting) {\n            childGrid.isPrinting = true;\n            childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n            childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n          }\n\n          rowObj.childGrid = childGrid;\n          var modules = childGrid.getInjectedModules();\n          var injectedModues = gObj.getInjectedModules();\n\n          if (!modules || modules.length !== injectedModues.length) {\n            childGrid.setInjectedModules(injectedModues);\n          }\n\n          var gridElem = this.parent.createElement('div', {\n            id: 'child' + parents(tr, 'e-grid').length + '_grid' + tr.rowIndex + getUid(''),\n            className: 'e-childgrid'\n          });\n          detailCell.appendChild(gridElem);\n          childGrid.appendTo(gridElem);\n        }\n\n        detailRow.appendChild(detailCell);\n\n        if (tr.nextSibling) {\n          tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n        } else {\n          tr.parentNode.appendChild(detailRow);\n        }\n\n        var rowElems = gObj.getRows();\n        var rowObjs = gObj.getRowsObject();\n        rowElems.splice(rowElems.indexOf(tr) + 1, 0, detailRow);\n        rowObjs.splice(rowObjs.indexOf(rowObj) + 1, 0, row);\n        gObj.trigger(events.detailDataBound, {\n          detailElement: detailCell,\n          data: data,\n          childGrid: childGrid\n        });\n        gObj.notify(events.detailDataBound, {\n          rows: rowObjs\n        });\n      }\n\n      classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n      classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n      rowObj.isExpand = true;\n\n      if (target.classList.contains('e-lastrowcell') && this.parent.getContent().clientHeight > table.scrollHeight) {\n        removeClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n        var detailrowIdx = table.querySelector(literals.tbody).getElementsByClassName('e-detailrow').length - 1;\n        addClass(table.querySelector(literals.tbody).getElementsByClassName('e-detailrow')[detailrowIdx].childNodes, ['e-lastrowcell']);\n        this.lastrowcell = true;\n      }\n\n      this.aria.setExpand(target, true);\n      target.firstElementChild.setAttribute('title', 'expanded');\n    } else {\n      if (this.isDetailRow(nextRow)) {\n        nextRow.style.display = 'none';\n        gObj.notify(events.detailStateChange, {\n          data: rowObj.data,\n          childGrid: gObj.childGrid,\n          detailElement: target,\n          isExpanded: isExpanded\n        });\n      }\n\n      classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n      classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n\n      if (parseInt(tr.getAttribute(literals.ariaRowIndex), 10) === lastrowIdx && this.lastrowcell) {\n        addClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n        this.lastrowcell = false;\n      }\n\n      rowObj.isExpand = false;\n      this.aria.setExpand(target, false);\n      target.firstElementChild.setAttribute('title', 'collapsed');\n    }\n\n    if (!isNullOrUndefined(gObj.detailTemplate)) {\n      gObj.updateVisibleExpandCollapseRows();\n      gObj.notify(events.refreshExpandandCollapse, {\n        rows: gObj.getRowsObject()\n      });\n    }\n  };\n  /**\n   * @hidden\n   * @param {IGrid} gObj - specifies the grid Object\n   * @param {Row<Column>}rowObj - specifies the row object\n   * @param {string} printMode - specifies the printmode\n   * @returns {Object} returns the object\n   */\n\n\n  DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n    var gridModel;\n\n    if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows && gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n      gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n      gridModel = gObj.expandedRows[rowObj.index].gridModel;\n    } else {\n      if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n        gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n      }\n\n      gridModel = extend({}, {}, gObj.childGrid, true);\n    }\n\n    return gridModel;\n  };\n\n  DetailRow.prototype.promiseResolve = function (grid) {\n    var _this = this;\n\n    return function () {\n      grid.off(events.contentReady, _this.promiseResolve);\n      grid.off(events.onEmpty, _this.promiseResolve);\n      grid.notify(events.hierarchyPrint, {});\n    };\n  };\n\n  DetailRow.prototype.isDetailRow = function (row) {\n    return row && row.classList.contains('e-detailrow');\n  };\n\n  DetailRow.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n\n    if (this.parent.isDestroyed || !gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n\n    this.parent.off(events.click, this.clickHandler);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.keyPressed, this.keyPressHandler);\n    this.parent.off(events.expandChildGrid, this.expand);\n    this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n    this.parent.off(events.destroy, this.destroyChildGrids);\n    this.parent.off(events.destroyChildGrid, this.destroyChildGrids);\n  };\n\n  DetailRow.prototype.getTDfromIndex = function (index, className) {\n    var tr = this.parent.getDataRows()[index];\n\n    if (tr && tr.querySelector(className)) {\n      return tr.querySelector(className);\n    }\n\n    return null;\n  };\n  /**\n   * Expands a detail row with the given target.\n   *\n   * @param  {Element} target - Defines the collapsed element to expand.\n   * @returns {void}\n   */\n\n\n  DetailRow.prototype.expand = function (target) {\n    if (!isNaN(target)) {\n      target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n    }\n\n    if (target && target.classList.contains('e-detailrowcollapse')) {\n      this.toogleExpandcollapse(target);\n    }\n  };\n  /**\n   * Collapses a detail row with the given target.\n   *\n   * @param  {Element} target - Defines the expanded element to collapse.\n   * @returns {void}\n   */\n\n\n  DetailRow.prototype.collapse = function (target) {\n    if (!isNaN(target)) {\n      target = this.getTDfromIndex(target, '.e-detailrowexpand');\n    }\n\n    if (target && target.classList.contains('e-detailrowexpand')) {\n      this.toogleExpandcollapse(target);\n    }\n  };\n  /**\n   * Expands all the detail rows of the Grid.\n   *\n   * @returns {void}\n   */\n\n\n  DetailRow.prototype.expandAll = function () {\n    this.expandCollapse(true);\n    this.parent.trigger(events.actionComplete, {\n      requestType: 'expandAllComplete',\n      type: events.actionComplete,\n      moduleObj: this\n    });\n  };\n  /**\n   * Collapses all the detail rows of the Grid.\n   *\n   * @returns {void}\n   */\n\n\n  DetailRow.prototype.collapseAll = function () {\n    this.expandCollapse(false);\n    this.parent.trigger(events.actionComplete, {\n      requestType: 'collapseAllComplete',\n      type: events.actionComplete,\n      moduleObj: this\n    });\n  };\n\n  DetailRow.prototype.expandCollapse = function (isExpand) {\n    var td;\n    var rows = this.parent.getDataRows();\n\n    for (var i = 0, len = rows.length; i < len; i++) {\n      td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\n      if (isExpand) {\n        this.expand(td);\n      } else {\n        this.collapse(td);\n      }\n    }\n  };\n\n  DetailRow.prototype.keyPressHandler = function (e) {\n    var gObj = this.parent;\n\n    switch (e.action) {\n      case 'ctrlDownArrow':\n        this.expandAll();\n        break;\n\n      case 'ctrlUpArrow':\n        this.collapseAll();\n        break;\n\n      case 'altUpArrow':\n      case 'altDownArrow':\n        // eslint-disable-next-line no-case-declarations\n        var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\n        if (selected.length) {\n          var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n          var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\n          if (e.action === 'altDownArrow') {\n            this.expand(td);\n          } else {\n            this.collapse(td);\n          }\n        }\n\n        break;\n\n      case 'enter':\n        if (this.parent.isEdit) {\n          return;\n        } // eslint-disable-next-line no-case-declarations\n\n\n        var element = this.focus.getFocusedElement();\n\n        if (element.classList.contains('e-icon-grightarrow') || element.classList.contains('e-icon-gdownarrow')) {\n          element = element.parentElement;\n        }\n\n        if (!element.classList.contains('e-detailrowcollapse') && !element.classList.contains('e-detailrowexpand')) {\n          break;\n        }\n\n        this.toogleExpandcollapse(element);\n        break;\n    }\n  };\n\n  DetailRow.prototype.refreshColSpan = function () {\n    var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n    var colSpan = this.parent.getVisibleColumns().length;\n\n    for (var i = 0; i < detailrows.length; i++) {\n      detailrows[i].querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n    }\n  };\n\n  DetailRow.prototype.destroyChildGrids = function () {\n    var rows = this.parent.getRowsObject();\n\n    for (var i = 0; i < rows.length; i++) {\n      rows[i].childGrid = null;\n    }\n\n    for (var i = 0; i < this.childRefs.length; i++) {\n      if (!this.childRefs[i].isDestroyed) {\n        this.childRefs[i].destroy();\n      }\n    }\n\n    this.childRefs = [];\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   * @private\n   */\n\n\n  DetailRow.prototype.getModuleName = function () {\n    return 'detailRow';\n  };\n\n  return DetailRow;\n}();\n\nexport { DetailRow };","map":{"version":3,"names":["removeClass","addClass","extend","closest","classList","isNullOrUndefined","Grid","parents","getUid","appendChildren","events","AriaService","Row","Cell","CellType","literals","DetailRow","parent","locator","aria","childRefs","isDestroyed","focus","getService","on","click","clickHandler","destroy","keyPressed","keyPressHandler","expandChildGrid","expand","columnVisibilityChanged","refreshColSpan","destroyChildGrids","destroyChildGrid","prototype","e","toogleExpandcollapse","target","gObj","table","getContentTable","lastrowIdx","getCurrentViewRecords","length","childGrid","isExpanded","contains","tr","parentElement","uid","getAttribute","rowObj","getRowObjectFromUID","nextRow","querySelector","tbody","children","rowIndex","data","isDetailRow","style","display","notify","detailStateChange","detailElement","getDetailTemplate","rowId","detailRow","createElement","className","attrs","role","detailCell","colSpan","getVisibleColumns","allowRowDragAndDrop","setAttribute","toString","row","isDataRow","isExpand","cells","cellType","Indent","isDataCell","visible","parentUid","i","len","groupSettings","columns","appendChild","unshift","parentNode","insertBefore","nextSibling","detailTemplate","isReactCompiler","isReact","detailTemplateID","element","id","renderTemplates","undefined","getGridModel","printMode","push","query","clone","parentID","parentPrimaryKeys","getPrimaryKeyFieldNames","parentKeyField","queryString","parentKeyFieldValue","parentRowData","isLegacyTemplate","isPrinting","contentReady","promiseResolve","onEmpty","modules","getInjectedModules","injectedModues","setInjectedModules","gridElem","appendTo","rowElems","getRows","rowObjs","getRowsObject","splice","indexOf","trigger","detailDataBound","rows","firstElementChild","getContent","clientHeight","scrollHeight","querySelectorAll","detailrowIdx","getElementsByClassName","childNodes","lastrowcell","setExpand","parseInt","ariaRowIndex","updateVisibleExpandCollapseRows","refreshExpandandCollapse","gridModel","expandedRows","index","hierarchyPrintMode","allowPaging","grid","_this","off","hierarchyPrint","gridElement","gridHeader","gridContent","getTDfromIndex","getDataRows","isNaN","collapse","expandAll","expandCollapse","actionComplete","requestType","type","moduleObj","collapseAll","td","action","selected","allowSelection","getSelectedRowIndexes","dataRow","isEdit","getFocusedElement","detailrows","contentModule","getTable","getModuleName"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-grids/src/grid/actions/detail-row.js"],"sourcesContent":["import { removeClass, addClass, extend } from '@syncfusion/ej2-base';\nimport { closest, classList, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} locator - specifes the serviceLocator\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.childRefs = [];\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.focus = locator.getService('focus');\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.expandChildGrid, this.expand, this);\n        this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n        this.parent.on(events.destroy, this.destroyChildGrids, this);\n        this.parent.on(events.destroyChildGrid, this.destroyChildGrids, this);\n    }\n    DetailRow.prototype.clickHandler = function (e) {\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        var gObj = this.parent;\n        var table = this.parent.getContentTable();\n        var lastrowIdx = this.parent.getCurrentViewRecords().length - 1;\n        var parent = 'parentDetails';\n        var childGrid;\n        var isExpanded = target && target.classList.contains('e-detailrowcollapse');\n        if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand')))) {\n            return;\n        }\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var nextRow = this.parent.getContentTable().querySelector(literals.tbody).children[tr.rowIndex + 1];\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var data = rowObj.data;\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = '';\n                gObj.notify(events.detailStateChange, { data: data,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n            }\n            else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                var rowId = getUid('grid-row');\n                var detailRow = this.parent.createElement('tr', { className: 'e-detailrow', attrs: { 'data-uid': rowId, role: 'row' } });\n                var detailCell = this.parent.createElement('td', { className: 'e-detailcell' });\n                var colSpan = this.parent.getVisibleColumns().length;\n                if (this.parent.allowRowDragAndDrop) {\n                    colSpan++;\n                }\n                detailCell.setAttribute('colspan', colSpan.toString());\n                var row = new Row({\n                    isDataRow: true,\n                    isExpand: true,\n                    uid: rowId,\n                    isDetailRow: true,\n                    cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                });\n                row.parentUid = rowObj.uid;\n                for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                    detailRow.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n                    row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                }\n                detailRow.appendChild(this.parent.createElement('td', { className: 'e-detailindentcell' }));\n                detailRow.appendChild(detailCell);\n                tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                if (gObj.detailTemplate) {\n                    var isReactCompiler = this.parent.isReact && typeof (gObj.detailTemplate) !== 'string';\n                    var detailTemplateID = gObj.element.id + 'detailTemplate';\n                    if (isReactCompiler) {\n                        gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID, null, null, detailCell);\n                        this.parent.renderTemplates();\n                    }\n                    else {\n                        appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID, undefined, undefined, undefined, this.parent['root']));\n                    }\n                }\n                else {\n                    childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n                    this.childRefs.push(childGrid);\n                    if (childGrid.query) {\n                        childGrid.query = childGrid.query.clone();\n                    }\n                    childGrid[parent] = {\n                        parentID: gObj.element.id,\n                        parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                        parentKeyField: gObj.childGrid.queryString,\n                        parentKeyFieldValue: data[gObj.childGrid.queryString],\n                        parentRowData: data\n                    };\n                    childGrid.isLegacyTemplate = gObj.isReact\n                        || gObj.isLegacyTemplate;\n                    if (gObj.isPrinting) {\n                        childGrid.isPrinting = true;\n                        childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n                        childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n                    }\n                    rowObj.childGrid = childGrid;\n                    var modules = childGrid.getInjectedModules();\n                    var injectedModues = gObj.getInjectedModules();\n                    if (!modules || modules.length !== injectedModues.length) {\n                        childGrid.setInjectedModules(injectedModues);\n                    }\n                    var gridElem = this.parent.createElement('div', {\n                        id: 'child' + parents(tr, 'e-grid').length +\n                            '_grid' + tr.rowIndex + getUid(''), className: 'e-childgrid'\n                    });\n                    detailCell.appendChild(gridElem);\n                    childGrid.appendTo(gridElem);\n                }\n                detailRow.appendChild(detailCell);\n                if (tr.nextSibling) {\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                }\n                else {\n                    tr.parentNode.appendChild(detailRow);\n                }\n                var rowElems = gObj.getRows();\n                var rowObjs = gObj.getRowsObject();\n                rowElems.splice(rowElems.indexOf(tr) + 1, 0, detailRow);\n                rowObjs.splice(rowObjs.indexOf(rowObj) + 1, 0, row);\n                gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data, childGrid: childGrid });\n                gObj.notify(events.detailDataBound, { rows: rowObjs });\n            }\n            classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n            classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n            rowObj.isExpand = true;\n            if (target.classList.contains('e-lastrowcell') && this.parent.getContent().clientHeight > table.scrollHeight) {\n                removeClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                var detailrowIdx = table.querySelector(literals.tbody).getElementsByClassName('e-detailrow').length - 1;\n                addClass(table.querySelector(literals.tbody).getElementsByClassName('e-detailrow')[detailrowIdx].childNodes, ['e-lastrowcell']);\n                this.lastrowcell = true;\n            }\n            this.aria.setExpand(target, true);\n            target.firstElementChild.setAttribute('title', 'expanded');\n        }\n        else {\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = 'none';\n                gObj.notify(events.detailStateChange, { data: rowObj.data,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n            }\n            classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n            classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n            if (parseInt(tr.getAttribute(literals.ariaRowIndex), 10) === lastrowIdx && this.lastrowcell) {\n                addClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                this.lastrowcell = false;\n            }\n            rowObj.isExpand = false;\n            this.aria.setExpand(target, false);\n            target.firstElementChild.setAttribute('title', 'collapsed');\n        }\n        if (!isNullOrUndefined(gObj.detailTemplate)) {\n            gObj.updateVisibleExpandCollapseRows();\n            gObj.notify(events.refreshExpandandCollapse, { rows: gObj.getRowsObject() });\n        }\n    };\n    /**\n     * @hidden\n     * @param {IGrid} gObj - specifies the grid Object\n     * @param {Row<Column>}rowObj - specifies the row object\n     * @param {string} printMode - specifies the printmode\n     * @returns {Object} returns the object\n     */\n    DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n        var gridModel;\n        if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows &&\n            gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n            gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n            gridModel = gObj.expandedRows[rowObj.index].gridModel;\n        }\n        else {\n            if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n                gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n            }\n            gridModel = extend({}, {}, gObj.childGrid, true);\n        }\n        return gridModel;\n    };\n    DetailRow.prototype.promiseResolve = function (grid) {\n        var _this = this;\n        return function () {\n            grid.off(events.contentReady, _this.promiseResolve);\n            grid.off(events.onEmpty, _this.promiseResolve);\n            grid.notify(events.hierarchyPrint, {});\n        };\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.' + literals.gridHeader) &&\n            !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.expandChildGrid, this.expand);\n        this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n        this.parent.off(events.destroy, this.destroyChildGrids);\n        this.parent.off(events.destroyChildGrid, this.destroyChildGrids);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = this.parent.getDataRows()[index];\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     *\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @returns {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     *\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @returns {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     *\n     * @returns {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n        this.parent.trigger(events.actionComplete, { requestType: 'expandAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     *\n     * @returns {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n        this.parent.trigger(events.actionComplete, { requestType: 'collapseAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            if (isExpand) {\n                this.expand(td);\n            }\n            else {\n                this.collapse(td);\n            }\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                // eslint-disable-next-line no-case-declarations\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    if (e.action === 'altDownArrow') {\n                        this.expand(td);\n                    }\n                    else {\n                        this.collapse(td);\n                    }\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                // eslint-disable-next-line no-case-declarations\n                var element = this.focus.getFocusedElement();\n                if (element.classList.contains('e-icon-grightarrow') || element.classList.contains('e-icon-gdownarrow')) {\n                    element = element.parentElement;\n                }\n                if (!element.classList.contains('e-detailrowcollapse') &&\n                    !element.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    DetailRow.prototype.refreshColSpan = function () {\n        var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n        var colSpan = this.parent.getVisibleColumns().length;\n        for (var i = 0; i < detailrows.length; i++) {\n            detailrows[i].querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n        }\n    };\n    DetailRow.prototype.destroyChildGrids = function () {\n        var rows = this.parent.getRowsObject();\n        for (var i = 0; i < rows.length; i++) {\n            rows[i].childGrid = null;\n        }\n        for (var i = 0; i < this.childRefs.length; i++) {\n            if (!this.childRefs[i].isDestroyed) {\n                this.childRefs[i].destroy();\n            }\n        }\n        this.childRefs = [];\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}