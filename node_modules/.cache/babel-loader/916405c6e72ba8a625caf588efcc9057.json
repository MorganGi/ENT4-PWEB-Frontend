{"ast":null,"code":"import { Browser, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { splitArrayCollection, processPathData, cornersPointsBeforeRotation } from '@syncfusion/ej2-drawings';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * The `FormFields` module is to render formfields in the PDF document.\n *\n * @hidden\n */\n\nvar FormFields =\n/** @class */\nfunction () {\n  /**\n   * @param viewer\n   * @param base\n   * @param viewer\n   * @param base\n   * @private\n   */\n  function FormFields(viewer, base) {\n    // eslint-disable-next-line\n    this.maintainTabIndex = {}; // eslint-disable-next-line\n\n    this.maintanMinTabindex = {};\n    this.isSignatureField = false;\n    this.isKeyDownCheck = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.readOnlyCollection = [];\n    this.isSignatureRendered = false;\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n\n    this.signatureFieldCollection = [];\n    this.selectedIndex = [];\n    this.pdfViewer = viewer;\n    this.pdfViewerBase = base;\n  }\n  /**\n   * @param pageIndex\n   * @private\n   */\n\n\n  FormFields.prototype.renderFormFields = function (pageIndex) {\n    this.maxTabIndex = 0;\n    this.minTabIndex = -1; // eslint-disable-next-line\n\n    this.data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n\n    if (this.data) {\n      // eslint-disable-next-line\n      this.formFieldsData = JSON.parse(this.data);\n      var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n      var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageIndex);\n      var count = void 0;\n\n      if (this.formFieldsData !== null && canvasElement !== null && textLayer !== null) {\n        var flag = false;\n\n        for (var i = 0; i < this.formFieldsData.length; i++) {\n          var formField = this.formFieldsData[i];\n\n          if (!flag && isNullOrUndefined(formField.ActualFieldName) && formField.PageIndex === pageIndex) {\n            count = parseInt(formField.FieldName.split('_')[1]);\n            flag = true;\n          }\n        }\n\n        for (var i_1 = 0; i_1 < this.formFieldsData.length; i_1++) {\n          // eslint-disable-next-line\n          var currentData = this.formFieldsData[i_1];\n\n          if (currentData.FieldName !== '') {\n            if (currentData.IsInitialField) {\n              currentData.Name = 'InitialField';\n            } // eslint-disable-next-line\n\n\n            var font = currentData['Font'];\n\n            if (this.pdfViewer.formDesigner) {\n              if (parseFloat(currentData['PageIndex']) == pageIndex) {\n                var fontFamily = void 0;\n                var fontStyle = void 0;\n                var fontSize = void 0;\n\n                if (font !== null && font.Height) {\n                  fontFamily = font.Name;\n\n                  if (font.Italic) {\n                    fontStyle = 'Italic';\n                  }\n\n                  if (font.Bold) {\n                    fontStyle = 'Bold';\n                  }\n\n                  if (font.Strikeout) {\n                    fontStyle = 'Strikethrough';\n                  }\n\n                  if (font.Underline) {\n                    fontStyle = 'Underline';\n                  }\n\n                  fontSize = this.ConvertPointToPixel(font.Size);\n                }\n\n                var textAlignment = currentData.Alignment === 2 ? 'right' : currentData.Alignment === 1 ? 'center' : 'left';\n                var backgroundColor = currentData['BackColor'];\n                var bounds = currentData['LineBounds'];\n                var backColor = 'rgba(' + backgroundColor.R + ',' + backgroundColor.G + ',' + backgroundColor.B + ',' + 1 + ')';\n\n                if (currentData.IsTransparent === true) {\n                  backColor = \"rgba(0,0,0,0)\";\n                }\n\n                backColor = this.rgbaToHex(backColor); // set default color if field have black color as bg.\n\n                if (backColor === '#000000ff') {\n                  backColor = '#daeaf7ff';\n                } // eslint-disable-next-line\n\n\n                var fontColor = currentData['FontColor'];\n                var left = this.ConvertPointToPixel(bounds.X);\n                var top_1 = this.ConvertPointToPixel(bounds.Y);\n                var width = this.ConvertPointToPixel(bounds.Width);\n                var height = this.ConvertPointToPixel(bounds.Height);\n                var boundArray = {\n                  left: left,\n                  top: top_1,\n                  width: width,\n                  height: height\n                };\n                var isFieldRotated = false;\n                var rotateFieldAngle = 0;\n\n                if (currentData[\"Rotation\"] !== 0) {\n                  if (currentData[\"RotationAngle\"] === -90 || currentData[\"RotationAngle\"] === -270 || currentData[\"RotationAngle\"] === -180) {\n                    boundArray = this.getBounds(boundArray, pageIndex, 0, isFieldRotated);\n                  }\n                } else {\n                  isFieldRotated = true;\n                  boundArray = this.getBounds(boundArray, pageIndex, 0, isFieldRotated);\n                  rotateFieldAngle = this.getAngle(pageIndex);\n                }\n\n                var foreColor = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n                foreColor = this.rgbaToHex(foreColor);\n                var borderColor = currentData['BorderColor'];\n                var borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n                borderRGB = this.rgbaToHex(borderRGB);\n                var borderWidth = currentData['BorderWidth'];\n                this.selectedIndex = [];\n                var elementValue = \"\";\n\n                if (currentData.Name === 'RadioButton') {\n                  elementValue = currentData['Text'] ? currentData['Text'] : currentData['Value'];\n                } else {\n                  elementValue = currentData['Text'];\n                }\n\n                var fieldProperties = {\n                  bounds: {\n                    X: boundArray.left,\n                    Y: boundArray.top,\n                    Width: boundArray.width,\n                    Height: boundArray.height\n                  },\n                  pageNumber: parseFloat(currentData['PageIndex']) + 1,\n                  name: currentData['ActualFieldName'],\n                  tooltip: currentData['ToolTip'],\n                  value: elementValue,\n                  isChecked: currentData['Selected'],\n                  isSelected: currentData['Selected'],\n                  fontFamily: fontFamily,\n                  fontStyle: fontStyle,\n                  backgroundColor: backColor,\n                  color: foreColor,\n                  borderColor: borderRGB,\n                  thickness: borderWidth,\n                  fontSize: fontSize,\n                  isMultiline: currentData.Multiline,\n                  rotateAngle: rotateFieldAngle,\n                  isReadOnly: currentData['IsReadonly'],\n                  isRequired: currentData['IsRequired'],\n                  alignment: textAlignment,\n                  options: this.getListValues(currentData),\n                  selectedIndex: this.selectedIndex,\n                  maxLength: currentData.MaxLength,\n                  visibility: currentData.Visible === 1 ? \"hidden\" : \"visible\",\n                  font: {\n                    isItalic: !isNullOrUndefined(font) ? font.Italic : false,\n                    isBold: !isNullOrUndefined(font) ? font.Bold : false,\n                    isStrikeout: !isNullOrUndefined(font) ? font.Strikeout : false,\n                    isUnderline: !isNullOrUndefined(font) ? font.Underline : false\n                  }\n                };\n\n                if (!currentData.id && this.pdfViewer.formFieldCollections[i_1] && !isNullOrUndefined(currentData['ActualFieldName'])) {\n                  fieldProperties.id = this.pdfViewer.formFieldCollections[i_1].id;\n                }\n\n                if (currentData.Name === 'DropDown' || currentData.Name === 'ListBox') {\n                  fieldProperties.value = currentData['SelectedValue'];\n                } // eslint-disable-next-line\n\n\n                var fieldType = this.getFormFieldType(currentData);\n\n                if (currentData.Name !== 'SignatureText' || currentData.Name !== 'SignatureImage') {\n                  if (!isNullOrUndefined(this.getFormFieldType(currentData))) {\n                    if (currentData.IsRequired) {\n                      var thickness = fieldProperties.thickness;\n                      thickness = thickness > 0 ? thickness : 1;\n                      fieldProperties.thickness = thickness;\n                    }\n\n                    var addedElement1 = this.pdfViewer.formDesignerModule.addFormField(fieldType, fieldProperties, false, fieldProperties.id);\n\n                    if (addedElement1 && addedElement1.parentElement) {\n                      currentData.id = addedElement1.parentElement.id.split('_')[0];\n                    }\n\n                    if (addedElement1.style.visibility === \"hidden\") {\n                      addedElement1.childNodes[0].disabled = true;\n                    }\n                  }\n                }\n\n                if (fieldType === 'SignatureField' || fieldType === 'InitialField') {\n                  this.addSignaturePath(currentData, count);\n\n                  if (!isNullOrUndefined(currentData.Value)) {\n                    this.renderExistingAnnnot(currentData, parseFloat(currentData['PageIndex']) + 1, null, isFieldRotated);\n                    this.isSignatureRendered = true;\n                    count++;\n                  }\n                }\n\n                this.pdfViewerBase.isLoadedFormFieldAdded = true;\n              }\n            } else {\n              // eslint-disable-next-line\n              if (parseFloat(currentData['PageIndex']) == pageIndex) {\n                // eslint-disable-next-line\n                var field = this.createFormFields(currentData, pageIndex, i_1, null, count);\n                var inputField = field.currentField;\n                var signCount = field.count;\n\n                if (inputField) {\n                  // eslint-disable-next-line\n                  var divElement = this.createParentElement(currentData, pageIndex); // eslint-disable-next-line\n\n                  var bounds = currentData['LineBounds']; // eslint-disable-next-line\n\n                  var font_1 = currentData['Font']; // eslint-disable-next-line\n\n                  var isFieldRotated = false;\n                  var rotateAngle = 0;\n\n                  if (currentData['Rotation'] === 0) {\n                    isFieldRotated = true;\n                    rotateAngle = this.getAngle(pageIndex);\n\n                    if (divElement) {\n                      divElement.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                    } else {\n                      inputField.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                    }\n                  } else {\n                    if (divElement) {\n                      divElement.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                    } else {\n                      inputField.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                    }\n                  }\n\n                  this.applyPosition(inputField, bounds, font_1, pageIndex, 0, isFieldRotated);\n                  inputField.InsertSpaces = currentData.InsertSpaces;\n\n                  if (inputField.InsertSpaces) {\n                    var zoomFactor = this.pdfViewerBase.getZoomFactor(); // eslint-disable-next-line\n\n                    var font_2 = parseInt(inputField.style.width) / inputField.maxLength - parseFloat(inputField.style.fontSize) / 2 - 0.6 * zoomFactor; // eslint-disable-next-line\n\n                    inputField.style.letterSpacing = '' + font_2 + 'px';\n                    inputField.style.fontFamily = 'monospace';\n                    inputField.style.paddingLeft = font_2 / 2 + 'px';\n                  } // eslint-disable-next-line\n\n\n                  currentData['uniqueID'] = this.pdfViewer.element.id + 'input_' + pageIndex + '_' + i_1;\n\n                  for (var j = 0; j < this.pdfViewer.formFieldCollections.length; j++) {\n                    if ((inputField.type === 'text' || inputField.type === 'password' || inputField.type === 'textarea') && currentData.Name !== 'SignatureField') {\n                      if (currentData['uniqueID'] === this.pdfViewer.formFieldCollections[j].id) {\n                        this.pdfViewer.formFieldCollections[j].value = currentData['Text'];\n                      }\n                    }\n                  }\n\n                  if (isNullOrUndefined(currentData.Value)) {\n                    currentData.Value = currentData['Text'];\n                  }\n\n                  if (currentData.ToolTip) {\n                    this.setToolTip(currentData.ToolTip, inputField);\n                  }\n\n                  this.applyCommonProperties(inputField, pageIndex, i_1, currentData, isFieldRotated);\n                  this.checkIsReadonly(currentData, inputField);\n                  this.applyTabIndex(currentData, inputField, pageIndex);\n                  this.checkIsRequiredField(currentData, inputField);\n                  this.applyDefaultColor(inputField);\n                  this.updateFormFieldsCollection(currentData);\n\n                  if (divElement) {\n                    divElement.appendChild(inputField);\n                    textLayer.appendChild(divElement);\n                  } else {\n                    inputField.style.position = 'absolute';\n                    textLayer.appendChild(inputField);\n                  }\n\n                  inputField.addEventListener('focus', this.focusFormFields.bind(this));\n                  inputField.addEventListener('blur', this.blurFormFields.bind(this));\n                  inputField.addEventListener('click', this.updateFormFields.bind(this));\n                  inputField.addEventListener('change', this.changeFormFields.bind(this));\n                  inputField.addEventListener('keydown', this.updateFormFieldsValue.bind(this));\n                  inputField.addEventListener('keyup', this.updateSameFieldsValue.bind(this));\n                  count = signCount;\n                }\n              }\n            }\n          }\n        }\n\n        if (!this.pdfViewer.formDesigner) {\n          window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_formfields');\n          this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData, '_formfields');\n        }\n      }\n    }\n\n    if (this.pdfViewerBase.isFocusField && this.pdfViewerBase.focusField) {\n      var currentField = document.getElementById(this.pdfViewerBase.focusField.id);\n\n      if (currentField) {\n        if ((this.pdfViewerBase.focusField.type === \"SignatureField\" || this.pdfViewerBase.focusField.type === \"InitialField\") && this.pdfViewer.formDesignerModule) {\n          var y = this.pdfViewerBase.focusField.bounds.y;\n          var height = this.pdfViewerBase.getPageHeight(this.pdfViewerBase.focusField.pageIndex);\n          this.pdfViewer.bookmark.goToBookmark(this.pdfViewerBase.focusField.pageIndex, height - y);\n        } else {\n          currentField.focus();\n        }\n\n        this.pdfViewerBase.isFocusField = false;\n        this.pdfViewerBase.focusField = [];\n      }\n    }\n  };\n\n  FormFields.prototype.setToolTip = function (tooltipContent, targetElement) {\n    //initialize tooltip component\n    var tooltip = new Tooltip({\n      content: tooltipContent\n    }); // render initialized tooltip\n\n    tooltip.appendTo(targetElement);\n  };\n\n  FormFields.prototype.trim = function (str) {\n    return str.replace(/^\\s+|\\s+$/gm, '');\n  };\n\n  FormFields.prototype.rgbaToHex = function (rgba) {\n    var inParts = rgba.substring(rgba.indexOf(\"(\")).split(\",\");\n    var r = parseInt(this.trim(inParts[0].substring(1)), 10);\n    var g = parseInt(this.trim(inParts[1]), 10);\n    var b = parseInt(this.trim(inParts[2]), 10);\n    var a = parseFloat(parseFloat(this.trim(inParts[3].substring(0, inParts[3].length - 1))).toFixed(2));\n    var outParts = [r.toString(16), g.toString(16), b.toString(16), Math.round(a * 255).toString(16).substring(0, 2)]; // Pad single-digit output values\n\n    outParts.forEach(function (part, i) {\n      if (part.length === 1) {\n        outParts[i] = '0' + part;\n      }\n    });\n    return '#' + outParts.join('');\n  };\n\n  FormFields.prototype.getListValues = function (currentData) {\n    var listItem = currentData['TextList'];\n    var options = [];\n\n    for (var i = 0; i < listItem.length; i++) {\n      if (listItem[i] === currentData['SelectedValue']) this.selectedIndex.push(i);\n      options.push({\n        itemName: listItem[i],\n        itemValue: listItem[i]\n      });\n    }\n\n    if (this.getFormFieldType(currentData) === 'ListBox') {\n      this.selectedIndex = currentData['SelectedList'];\n    }\n\n    return options;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.createParentElement = function (data, pageIndex) {\n    // eslint-disable-next-line\n    var divElement; // eslint-disable-next-line\n\n    if (data['Name'] === 'Textbox' || data['Name'] === 'Password') {\n      divElement = document.createElement('div');\n      divElement.style.background = 'white';\n\n      if (data.InsertSpaces) {\n        divElement.style.background = 'transparent';\n      } // eslint-disable-next-line\n\n\n      var bounds = data['LineBounds']; // eslint-disable-next-line\n\n      var font = data['Font']; // eslint-disable-next-line\n\n      divElement.style.position = 'absolute'; // eslint-disable-next-line\n\n      var isFieldRotated = false;\n\n      if (data['Rotation'] === 0) {\n        isFieldRotated = true;\n      }\n\n      this.applyPosition(divElement, bounds, font, pageIndex, 0, isFieldRotated);\n    }\n\n    return divElement;\n  };\n  /**\n   * @private\n   */\n\n\n  FormFields.prototype.getAngle = function (pageIndex) {\n    // eslint-disable-next-line\n    var angle = 0; // eslint-disable-next-line\n\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n\n    if (pageDetails && pageDetails.rotation) {\n      switch (pageDetails.rotation) {\n        case 0:\n          angle = 0;\n          break;\n\n        case 1:\n          angle = 90;\n          break;\n\n        case 2:\n          angle = 180;\n          break;\n\n        case 3:\n          angle = 270;\n          break;\n      }\n    }\n\n    return angle;\n  };\n\n  FormFields.prototype.nextField = function () {\n    this.signatureFieldNavigate(true);\n  };\n\n  FormFields.prototype.previousField = function () {\n    this.signatureFieldNavigate(false);\n  };\n\n  FormFields.prototype.signatureFieldNavigate = function (nextSign) {\n    var isNextSignField = nextSign; // eslint-disable-next-line\n\n    var signatureFields = this.signatureFieldCollection;\n\n    if (signatureFields.length === 0) {\n      signatureFields = this.getSignField();\n    } // eslint-disable-next-line\n\n\n    var currentField;\n\n    if (this.currentTarget) {\n      for (var i = 0; i < signatureFields.length; i++) {\n        currentField = this.pdfViewer.formDesignerModule ? signatureFields[i].FormField : signatureFields[i];\n\n        if (this.currentTarget.id === currentField.uniqueID) {\n          this.currentTarget = document.getElementById(currentField.uniqueID);\n          this.getSignatureIndex(i, signatureFields.length, isNextSignField);\n          break;\n        }\n      }\n    } else {\n      if (nextSign) {\n        currentField = this.pdfViewer.formDesignerModule ? signatureFields[0].FormField : signatureFields[0];\n\n        if (currentField.uniqueID) {\n          this.currentTarget = document.getElementById(currentField.uniqueID);\n          this.getSignatureIndex(0, signatureFields.length, isNextSignField, true);\n        }\n      }\n    }\n  };\n\n  FormFields.prototype.getSignatureIndex = function (currentSignatureIndex, signatureCount, isNextSign, isFirstNavigate) {\n    var signatureIndex = currentSignatureIndex;\n\n    if (!isFirstNavigate) {\n      if (isNextSign) {\n        signatureIndex++;\n      } else {\n        signatureIndex--;\n      }\n    }\n\n    if (signatureCount === 1) {\n      this.renderSignatureField(0);\n    } else {\n      if (signatureIndex < signatureCount && signatureIndex >= 0) {\n        this.renderSignatureField(signatureIndex);\n      } else {\n        if (isNextSign) {\n          if (signatureIndex >= signatureCount) {\n            this.renderSignatureField(0);\n          }\n        } else {\n          if (signatureIndex <= 0) {\n            this.renderSignatureField(signatureCount - 1);\n          }\n        }\n      }\n    }\n  };\n\n  FormFields.prototype.renderSignatureField = function (currentSignIndex) {\n    var curSignIndex = currentSignIndex; // eslint-disable-next-line\n\n    var signatureFields = this.signatureFieldCollection; // eslint-disable-next-line\n\n    var currentField;\n\n    if (curSignIndex < signatureFields.length) {\n      for (var i = 0; i < signatureFields.length; i++) {\n        var curSignIndexId = this.pdfViewer.formDesignerModule ? signatureFields[curSignIndex].FormField.uniqueID : signatureFields[curSignIndex].uniqueID;\n        var signatureFieldData = this.pdfViewer.formDesignerModule ? signatureFields[i].FormField : signatureFields[i];\n\n        if (curSignIndexId === signatureFieldData.uniqueID) {\n          var pageIndex = signatureFieldData.PageIndex >= 0 ? signatureFieldData.PageIndex : signatureFieldData.pageNumber;\n          var isRender = this.pdfViewer.annotationModule.findRenderPageList(pageIndex);\n\n          if (!isRender) {\n            this.pdfViewer.navigation.goToPage(pageIndex);\n          }\n\n          this.currentTarget = document.getElementById(signatureFieldData.uniqueID);\n          currentField = signatureFieldData;\n          break;\n        }\n      }\n\n      if (this.currentTarget === null) {\n        var pageIndex = currentField.PageIndex >= 0 ? currentField.PageIndex : currentField.pageNumber;\n        this.pdfViewer.navigation.goToPage(pageIndex);\n        this.currentTarget = document.getElementById(currentField.uniqueID);\n      }\n\n      if (this.currentTarget) {\n        if (this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n          document.getElementById(this.currentTarget.id).focus();\n          this.pdfViewer.select([this.currentTarget.id], null);\n        } else if (this.currentTarget.className === 'e-pdfviewer-signatureformfields') {\n          if (this.pdfViewer.formDesignerModule) {\n            document.getElementById(this.currentTarget.id).parentElement.focus();\n          } else {\n            document.getElementById(this.currentTarget.id).focus();\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  FormFields.prototype.setFocus = function (id) {\n    if (!id) {\n      if (this.currentTarget) {\n        document.getElementById(this.currentTarget.id).focus();\n      }\n    } else {\n      this.removeFocus();\n      var signatureElement = document.getElementById(id);\n      signatureElement.classList.add('e-pv-signature-focus');\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  FormFields.prototype.removeFocus = function () {\n    if (this.signatureFieldCollection) {\n      // eslint-disable-next-line\n      var signatureFields = this.signatureFieldCollection;\n\n      if (signatureFields.length === 0) {\n        signatureFields = this.getSignField();\n      }\n\n      for (var i = 0; i < this.signatureFieldCollection.length; i++) {\n        var signatureFieldId = this.pdfViewer.formDesignerModule ? this.signatureFieldCollection[i].FormField.uniqueID : this.signatureFieldCollection[i].uniqueID;\n        var signatureElement = document.getElementById(signatureFieldId);\n\n        if (signatureElement) {\n          signatureElement.classList.remove('e-pv-signature-focus');\n        }\n      }\n\n      if (this.pdfViewer.formFieldsModule.currentTarget) {\n        this.pdfViewer.formFieldsModule.currentTarget.classList.remove('e-pv-signature-focus');\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.getSignField = function () {\n    if (this.pdfViewer.formDesignerModule) {\n      this.signatureFieldCollection = this.pdfViewer.formDesignerModule.getFormDesignerSignField(this.signatureFieldCollection);\n    } else {\n      this.signatureFieldCollection = this.getFormFieldSignField();\n    }\n\n    return this.signatureFieldCollection;\n  };\n\n  FormFields.prototype.getFormFieldSignField = function () {\n    // eslint-disable-next-line\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields'); // eslint-disable-next-line\n\n    var currentData;\n\n    if (data) {\n      // eslint-disable-next-line\n      var formFieldsData = JSON.parse(data);\n\n      for (var i = 0; i < formFieldsData.length; i++) {\n        currentData = formFieldsData[i];\n\n        if (currentData.Name === 'SignatureField') {\n          // eslint-disable-next-line\n          currentData['uniqueID'] = this.pdfViewer.element.id + 'input_' + currentData.PageIndex + '_' + i;\n          this.signatureFieldCollection.push(formFieldsData[i]);\n        }\n      }\n    }\n\n    return this.signatureFieldCollection;\n  };\n  /**\n   * @private\n   */\n\n\n  FormFields.prototype.formFieldCollections = function () {\n    // eslint-disable-next-line\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n\n    if (data) {\n      // eslint-disable-next-line\n      var formFieldsData = JSON.parse(data);\n\n      for (var i = 0; i < formFieldsData.length; i++) {\n        // eslint-disable-next-line\n        var currentData = formFieldsData[i]; // eslint-disable-next-line\n\n        var type = currentData['Name'];\n\n        if (this.pdfViewer.formDesignerModule) {\n          if (currentData.Name !== 'ink' && currentData.Name !== 'SignatureImage' && currentData.Name !== 'SignatureText') {\n            this.retreiveFormFieldsData(currentData, true);\n          }\n        } else {\n          if (currentData.Name !== 'ink') {\n            // eslint-disable-next-line\n            var formFieldCollection = {\n              name: this.retriveFieldName(currentData),\n              id: this.pdfViewer.element.id + 'input_' + parseFloat(currentData['PageIndex']) + '_' + i,\n              isReadOnly: false,\n              type: currentData.IsInitialField ? 'InitialField' : type,\n              value: this.retriveCurrentValue(currentData),\n              fontName: '',\n              isRequired: currentData.IsRequired\n            };\n            this.pdfViewer.formFieldCollections.push(formFieldCollection);\n          }\n        }\n      }\n    }\n  };\n\n  FormFields.prototype.retreiveFormFieldsData = function (currentData, isCollection) {\n    var fontFamily;\n    var fontStyle;\n    var fontSize;\n\n    if (currentData.FieldName !== '') {\n      if (currentData.IsInitialField) {\n        currentData.Name = 'InitialField';\n      } // eslint-disable-next-line\n\n\n      var font = currentData['Font'];\n\n      if (font !== null && font.Height) {\n        fontFamily = font.Name;\n\n        if (font.Italic) {\n          fontStyle = 'Italic';\n        }\n\n        if (font.Bold) {\n          fontStyle = 'Bold';\n        }\n\n        if (font.Strikeout) {\n          fontStyle = 'Strikethrough';\n        }\n\n        if (font.Underline) {\n          fontStyle = 'Underline';\n        }\n\n        fontSize = this.ConvertPointToPixel(font.Size);\n      }\n\n      var textAlignment = currentData.Alignment === 2 ? 'right' : currentData.Alignment === 1 ? 'center' : 'left';\n      var backgroundColor = currentData['BackColor'];\n      var bounds = currentData['LineBounds'];\n      var backColor = 'rgba(' + backgroundColor.R + ',' + backgroundColor.G + ',' + backgroundColor.B + ',' + 1 + ')';\n      backColor = this.rgbaToHex(backColor); // set default color if field have black color as bg.\n\n      if (backColor === '#000000ff') {\n        backColor = '#daeaf7ff';\n      } // eslint-disable-next-line\n\n\n      var fontColor = currentData['FontColor'];\n      var left = this.ConvertPointToPixel(bounds.X);\n      var top_2 = this.ConvertPointToPixel(bounds.Y);\n      var width = this.ConvertPointToPixel(bounds.Width);\n      var height = this.ConvertPointToPixel(bounds.Height);\n      var boundArray = {\n        left: left,\n        top: top_2,\n        width: width,\n        height: height\n      };\n      var foreColor = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n      foreColor = this.rgbaToHex(foreColor);\n      var borderColor = currentData['BorderColor'];\n      var borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n      borderRGB = this.rgbaToHex(borderRGB);\n      var borderWidth = currentData['BorderWidth'];\n      this.selectedIndex = [];\n      var fieldProperties = {\n        bounds: {\n          X: boundArray.left,\n          Y: boundArray.top,\n          Width: boundArray.width,\n          Height: boundArray.height\n        },\n        pageNumber: parseFloat(currentData['PageIndex']) + 1,\n        name: currentData['ActualFieldName'],\n        tooltip: currentData['ToolTip'],\n        value: currentData['Text'],\n        isChecked: currentData['Selected'],\n        isSelected: currentData['Selected'],\n        fontFamily: fontFamily,\n        fontStyle: fontStyle,\n        backgroundColor: backColor,\n        color: foreColor,\n        borderColor: borderRGB,\n        thickness: borderWidth,\n        fontSize: fontSize,\n        isMultiline: currentData.Multiline,\n        isReadOnly: currentData['IsReadonly'],\n        isRequired: currentData['IsRequired'],\n        alignment: textAlignment,\n        options: this.getListValues(currentData),\n        selectedIndex: this.selectedIndex,\n        maxLength: currentData.MaxLength,\n        visibility: currentData.Visible === 1 ? \"hidden\" : \"visible\",\n        font: {\n          isItalic: !isNullOrUndefined(font) ? font.Italic : false,\n          isBold: !isNullOrUndefined(font) ? font.Bold : false,\n          isStrikeout: !isNullOrUndefined(font) ? font.Strikeout : false,\n          isUnderline: !isNullOrUndefined(font) ? font.Underline : false\n        }\n      };\n\n      if (currentData.Name === 'DropDown' || currentData.Name === 'ListBox') {\n        fieldProperties.value = currentData['SelectedValue'];\n      } // eslint-disable-next-line\n\n\n      var fieldType = this.getFormFieldType(currentData);\n\n      if (fieldType === 'SignatureField' || fieldType === 'InitialField') {\n        this.addSignaturePath(currentData);\n\n        if (this.isSignatureField) {\n          fieldProperties.value = currentData.Value;\n        }\n      }\n\n      var addedElement = this.pdfViewer.formDesignerModule.addFormField(fieldType, fieldProperties, isCollection);\n      return addedElement;\n    }\n\n    return null;\n  };\n  /**\n   * @param formField\n   * @private\n   */\n\n\n  FormFields.prototype.updateFormFieldsCollection = function (formField) {\n    var type = formField['Name'];\n    var formFieldCollection = {\n      name: this.retriveFieldName(formField),\n      id: formField.uniqueID,\n      isReadOnly: formField.IsReadonly,\n      isRequired: formField.IsRequired,\n      isSelected: type === 'CheckBox' ? false : formField.Selected,\n      isChecked: type === 'RadioButton' ? false : formField.Selected,\n      type: type,\n      value: type === 'ListBox' || type === 'DropDown' ? formField.SelectedValue : formField.Value,\n      fontName: formField.FontFamily ? formField.FontFamily : ''\n    };\n    this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function (el) {\n      return el.id === formFieldCollection.id;\n    })] = formFieldCollection;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.updateFormFieldValues = function (formFields) {\n    this.readOnlyCollection.push(formFields.id);\n\n    if (formFields) {\n      // eslint-disable-next-line\n      var currentElement = document.getElementById(formFields.id);\n\n      if (currentElement) {\n        if (formFields.isReadOnly) {\n          currentElement.disabled = true;\n          currentElement.style.backgroundColor = '';\n          currentElement.style.cursor = 'default';\n        } else {\n          if (currentElement.style.backgroundColor === '') {\n            currentElement.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n          }\n\n          currentElement.disabled = false;\n          currentElement.style.cursor = '';\n        }\n      }\n\n      this.updateDataInSession(currentElement);\n    }\n  };\n  /**\n   * @param currentData\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  FormFields.prototype.retriveFieldName = function (currentData) {\n    // eslint-disable-next-line\n    var currentField; // eslint-disable-next-line\n\n    switch (currentData['Name']) {\n      case 'Textbox':\n      case 'Password':\n      case 'SignatureField':\n      case 'InitialField':\n        currentField = currentData.FieldName;\n        break;\n\n      case 'RadioButton':\n      case 'CheckBox':\n        currentField = currentData.GroupName;\n        break;\n\n      case 'DropDown':\n      case 'ListBox':\n        currentField = currentData.Text;\n        break;\n    }\n\n    return currentField;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.retriveCurrentValue = function (currentData) {\n    // eslint-disable-next-line\n    var currentField; // eslint-disable-next-line\n\n    switch (currentData['Name']) {\n      case 'Textbox':\n      case 'Password':\n        currentField = currentData.Text;\n        break;\n\n      case 'SignatureField':\n        currentField = currentData.Value;\n        break;\n\n      case 'RadioButton':\n      case 'CheckBox':\n        currentField = currentData.Selected;\n        break;\n\n      case 'DropDown':\n        currentField = currentData.SelectedValue;\n        break;\n\n      case 'ListBox':\n        currentField = currentData.SelectedList;\n        break;\n    }\n\n    return currentField;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.getSignatureBounds = function (LineBounds, bounds, pageIndex) {\n    // eslint-disable-next-line\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex]; // eslint-disable-next-line\n\n    var bound = 0;\n\n    switch (pageDetails.rotation) {\n      case 0:\n        bound = bounds;\n        break;\n\n      case 1:\n        bound = {\n          x: bounds.x + LineBounds.Width + bounds.width / 3.5,\n          y: pageDetails.width - LineBounds.X + bounds.height / 4\n        };\n        break;\n\n      case 2:\n        bound = {\n          x: pageDetails.width - bounds.x - bounds.width,\n          y: pageDetails.height - bounds.y - bounds.height\n        };\n        break;\n\n      case 3:\n        bound = {\n          x: bounds.y - bounds.width / 2 + bounds.height,\n          y: bounds.x + bounds.width / 3\n        };\n        break;\n    }\n\n    return bound;\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  FormFields.prototype.downloadFormFieldsData = function () {\n    // eslint-disable-next-line\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n\n    if (data) {\n      // eslint-disable-next-line\n      var formFieldsData = JSON.parse(data); // eslint-disable-next-line\n\n      var datas = {};\n      var fieldDatas = [];\n\n      for (var m = 0; m < formFieldsData.length; m++) {\n        // eslint-disable-next-line\n        var currentData = formFieldsData[m];\n        var isRequired = currentData.IsRequired;\n\n        if (currentData.Name === 'Textbox' || currentData.Name === 'Password' || currentData.Multiline) {\n          if (isRequired && (currentData.Text === '' || currentData.Text === null)) {\n            this.pdfViewerBase.validateForm = true;\n            this.pdfViewerBase.nonFillableFields[currentData.FieldName] = currentData.Text;\n          } else {\n            delete this.pdfViewerBase.nonFillableFields[currentData.FieldName];\n          }\n\n          fieldDatas = {\n            fieldValue: currentData.Text,\n            isReadOnly: currentData.IsReadonly\n          };\n          datas[currentData.FieldName] = fieldDatas;\n        } else if (currentData.Name === 'RadioButton' && currentData.Selected) {\n          if (isRequired && currentData.Selected === false) {\n            this.pdfViewerBase.validateForm = true;\n            this.pdfViewerBase.nonFillableFields[currentData.GroupName] = currentData.Value;\n          } else {\n            delete this.pdfViewerBase.nonFillableFields[currentData.GroupName];\n          }\n\n          fieldDatas = {\n            fieldValue: currentData.Value,\n            isReadOnly: currentData.IsReadonly\n          };\n          datas[currentData.GroupName] = fieldDatas;\n        } else if (currentData.Name === 'CheckBox') {\n          if (isRequired && currentData.Selected === false) {\n            this.pdfViewerBase.validateForm = true;\n            this.pdfViewerBase.nonFillableFields[currentData.GroupName] = currentData.Selected;\n          } else {\n            delete this.pdfViewerBase.nonFillableFields[currentData.GroupName];\n          }\n\n          if (currentData.CheckboxIndex && currentData.Selected) {\n            fieldDatas = {\n              fieldValue: currentData.CheckboxIndex,\n              isReadOnly: currentData.IsReadonly\n            };\n            datas[currentData.GroupName] = fieldDatas;\n          } else if (datas[currentData.GroupName] === undefined || datas[currentData.GroupName] === null) {\n            fieldDatas = {\n              fieldValue: currentData.Selected,\n              isReadOnly: currentData.IsReadonly\n            };\n            datas[currentData.GroupName] = fieldDatas;\n          }\n        } else if (currentData.Name === 'DropDown') {\n          if (isRequired && currentData.SelectedValue === '') {\n            this.pdfViewerBase.validateForm = true;\n            this.pdfViewerBase.nonFillableFields[currentData.Text] = currentData.SelectedValue;\n          } else {\n            delete this.pdfViewerBase.nonFillableFields[currentData.Text];\n          }\n\n          fieldDatas = {\n            fieldValue: currentData.SelectedValue,\n            isReadOnly: currentData.IsReadonly\n          };\n          datas[currentData.Text] = fieldDatas;\n        } else if (currentData.Name === 'ListBox') {\n          // eslint-disable-next-line\n          var childItems = currentData['TextList'];\n          var childItemsText = [];\n\n          for (var m_1 = 0; m_1 < currentData.SelectedList.length; m_1++) {\n            // eslint-disable-next-line\n            var currentElement = currentData.SelectedList[m_1];\n            childItemsText.push(childItems[currentElement]);\n          }\n\n          fieldDatas = {\n            fieldValue: JSON.stringify(childItemsText),\n            isReadOnly: currentData.IsReadonly\n          };\n          datas[currentData.Text] = fieldDatas;\n        } else if (currentData.Name === 'SignatureField' || currentData.Name === 'InitialField') {\n          // eslint-disable-next-line\n          var csData = void 0;\n\n          if (currentData.Value === null || currentData.Value === '') {\n            this.addSignaturePath(currentData);\n          }\n\n          if (currentData.Value && currentData.Value !== '') {\n            csData = currentData.Value;\n            var fontFamily = currentData.fontFamily ? currentData.fontFamily : currentData.FontFamily;\n\n            if (fontFamily) {\n              datas[currentData.FieldName + 'fontName'] = fontFamily;\n              datas[currentData.FieldName + 'fontSize'] = currentData.fontSize ? currentData.fontSize : currentData.FontSize;\n            } else if (currentData.Value.split('base64,')[1]) {\n              datas[currentData.FieldName + 'ImageData'] = true;\n            } else {\n              // eslint-disable-next-line\n              var collectionData = processPathData(currentData.Value);\n              csData = splitArrayCollection(collectionData);\n            }\n          }\n\n          if (isRequired && currentData.Value === null || currentData.Value === '') {\n            this.pdfViewerBase.validateForm = true;\n            this.pdfViewerBase.nonFillableFields[currentData.FieldName] = JSON.stringify(csData);\n          } else {\n            delete this.pdfViewerBase.nonFillableFields[currentData.FieldName];\n          }\n\n          datas[currentData.FieldName] = JSON.stringify(csData);\n\n          if (currentData.Bounds) {\n            // eslint-disable-next-line\n            var bounds = this.getSignatureBounds(currentData.LineBounds, currentData.Bounds, currentData.PageIndex);\n            currentData.Bounds.x = bounds.x;\n            currentData.Bounds.y = bounds.y;\n            datas[currentData.FieldName + 'bounds'] = JSON.stringify(currentData.Bounds);\n          } else {\n            // eslint-disable-next-line\n            var lineBounds = currentData.LineBounds; // eslint-disable-next-line\n\n            var bounds = {\n              x: this.ConvertPointToPixel(lineBounds.X),\n              y: this.ConvertPointToPixel(lineBounds.Y),\n              width: this.ConvertPointToPixel(lineBounds.Width),\n              height: this.ConvertPointToPixel(lineBounds.Height)\n            };\n            datas[currentData.FieldName + 'bounds'] = JSON.stringify(bounds);\n          }\n\n          datas[currentData.FieldName + 'isReadOnly'] = currentData.IsReadonly;\n        }\n      }\n\n      return JSON.stringify(datas);\n    }\n  };\n\n  FormFields.prototype.focusFormFields = function (event) {\n    // eslint-disable-next-line\n    var currentTarget = event.target; // eslint-disable-next-line\n\n    if (currentTarget && currentTarget.className !== 'e-pdfviewer-signatureformfields' && currentTarget.className !== 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n      // eslint-disable-next-line\n      var backgroundcolor = currentTarget.style.backgroundColor; // eslint-disable-next-line\n\n      var currentIndex = backgroundcolor.lastIndexOf(','); // eslint-disable-next-line\n\n      var currentColor = backgroundcolor.slice(0, currentIndex + 1) + 0 + ')';\n      currentTarget.style.backgroundColor = currentColor;\n    } else if (currentTarget) {\n      // eslint-disable-next-line\n      if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature  e-pv-signature-focus') {\n        this.setFocus(currentTarget.id);\n      }\n    }\n  };\n\n  FormFields.prototype.blurFormFields = function (event) {\n    // eslint-disable-next-line\n    var currentTarget = event.target;\n\n    if (currentTarget.InsertSpaces && this.isKeyDownCheck) {\n      // eslint-disable-next-line\n      var font = parseInt(currentTarget.style.width) - parseInt(currentTarget.style.height) / 2;\n      currentTarget.style.width = '' + font + 'px';\n      this.isKeyDownCheck = false;\n    }\n\n    if (currentTarget.type === 'checkbox') {\n      this.pdfViewer.fireFocusOutFormField(currentTarget.name, currentTarget.checked);\n    } else {\n      this.pdfViewer.fireFocusOutFormField(currentTarget.name, currentTarget.value);\n    } // eslint-disable-next-line\n\n\n    var backgroundcolor = currentTarget.style.backgroundColor; // eslint-disable-next-line\n\n    var currentIndex = backgroundcolor.lastIndexOf(','); // eslint-disable-next-line\n\n    var currentColor = backgroundcolor.slice(0, currentIndex + 1) + 0.2 + ')';\n    currentTarget.style.backgroundColor = currentColor;\n  };\n\n  FormFields.prototype.updateFormFields = function (event) {\n    // eslint-disable-next-line\n    var currentTarget = event.target;\n\n    if (currentTarget.className === 'e-pdfviewer-ListBox') {\n      currentTarget = currentTarget.parentElement;\n      this.updateDataInSession(currentTarget);\n    } else if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n      this.currentTarget = currentTarget;\n    } else if (currentTarget.className === 'e-pv-buttonItem' || currentTarget.type === 'button') {\n      this.pdfViewer.fireButtonFieldClickEvent(currentTarget.value, currentTarget.name, currentTarget.id);\n    }\n\n    for (var m = 0; m < this.pdfViewer.formFieldCollections.length; m++) {\n      if (currentTarget.id === this.pdfViewer.formFieldCollections[m].id) {\n        if (this.pdfViewer.formDesignerModule || this.pdfViewer.annotationModule) {\n          this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', this.pdfViewer.formFieldCollections[m]);\n        } // eslint-disable-next-line\n\n\n        if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature  e-pv-signature-focus') {\n          this.setFocus(currentTarget.id);\n        }\n      }\n    }\n  };\n  /**\n   * @param signatureType\n   * @param value\n   * @param target\n   * @param fontname\n   * @param signatureType\n   * @param value\n   * @param target\n   * @param fontname\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  FormFields.prototype.drawSignature = function (signatureType, value, target, fontname) {\n    var annot; // eslint-disable-next-line\n\n    var bounds;\n    var targetBounds;\n    var parentElementBounds;\n    var data;\n\n    if (this.pdfViewer.formDesigner) {\n      data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n    } else {\n      data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n    }\n\n    var formFieldsData = JSON.parse(data);\n    var targetName = target ? target.name ? target.name : target.offsetParent.name : this.currentTarget.name;\n\n    for (var i = 0; i < formFieldsData.length; i++) {\n      var fieldName = this.pdfViewer.formDesigner ? formFieldsData[i].FormField.name : formFieldsData[i].FieldName;\n\n      if (this.pdfViewer.formDesigner ? fieldName === targetName : fieldName === targetName && !isNullOrUndefined(formFieldsData[i].ActualFieldName)) {\n        target = this.pdfViewer.formDesigner ? document.getElementById(formFieldsData[i].Key.split(\"_\")[0]) : document.getElementById(formFieldsData[i].uniqueID); // eslint-disable-next-line\n\n        var currentField = target;\n        var elementId = currentField.offsetParent.offsetParent.id.split(\"_\")[0];\n        var signatureField = this.pdfViewer.nameTable[elementId];\n\n        if (target && target.offsetParent && signatureField) {\n          targetBounds = target.getBoundingClientRect();\n          parentElementBounds = target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n          this.pdfViewerBase.drawSignatureWithTool = true;\n\n          if (target.nextSibling && target.nextSibling.id.indexOf(\"initial\") !== -1) {\n            this.pdfViewer.isInitialFieldToolbarSelection = true;\n          }\n        }\n\n        var currentValue = value ? value : this.pdfViewerBase.signatureModule.outputString;\n        var currentFont = fontname ? fontname : this.pdfViewerBase.signatureModule.fontName;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        var currentWidth = this.pdfViewerBase.drawSignatureWithTool ? targetBounds.width / zoomvalue : parseFloat(currentField.style.width) / zoomvalue;\n        var currentHeight = this.pdfViewerBase.drawSignatureWithTool ? targetBounds.height / zoomvalue : parseFloat(currentField.style.height) / zoomvalue;\n        var currentLeft = this.pdfViewerBase.drawSignatureWithTool ? (targetBounds.left - parentElementBounds.left) / zoomvalue : parseFloat(currentField.style.left) / zoomvalue;\n        var currentTop = this.pdfViewerBase.drawSignatureWithTool ? (targetBounds.top - parentElementBounds.top) / zoomvalue : parseFloat(currentField.style.top) / zoomvalue;\n        var currentPage = this.pdfViewerBase.drawSignatureWithTool ? target.nextElementSibling ? parseFloat(target.nextElementSibling.id.split(\"_\")[0].charAt(target.nextElementSibling.id.split(\"_\")[0].length - 1)) : parseFloat(currentField.id.split('_')[1]) : parseFloat(currentField.id.split('_')[1]);\n        var currentIndex = this.pdfViewerBase.drawSignatureWithTool ? target.nextElementSibling ? parseFloat(target.nextElementSibling.id.split('_')[1]) : parseFloat(currentField.id.split('_')[2]) : parseFloat(currentField.id.split('_')[2]);\n        var signString = this.pdfViewerBase.signatureModule.saveImageString;\n        var signatureFontFamily = void 0;\n        var signatureFontSize = void 0;\n        var rotateAngleString = currentField.offsetParent.offsetParent.style.transform ? currentField.offsetParent.offsetParent.style.transform : currentField.style.transform;\n        rotateAngleString = rotateAngleString.substring(rotateAngleString.indexOf(\"(\") + 1, rotateAngleString.indexOf(\"d\"));\n        var rotateAngle = rotateAngleString ? parseInt(rotateAngleString) : 0;\n\n        if (signatureType === 'Type') {\n          if (!currentFont) {\n            currentFont = 'Helvetica';\n          } // eslint-disable-next-line\n\n\n          bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n\n          if (this.pdfViewer.signatureFitMode === 'Default') {\n            bounds = this.getDefaultBoundsforSign(bounds);\n          }\n\n          annot = {\n            // eslint-disable-next-line max-len\n            id: currentField.id,\n            bounds: {\n              x: bounds.x,\n              y: bounds.y,\n              width: bounds.width,\n              height: bounds.height\n            },\n            pageIndex: currentPage,\n            data: currentValue,\n            modifiedDate: '',\n            shapeAnnotationType: 'SignatureText',\n            opacity: 1,\n            rotateAngle: rotateAngle,\n            annotName: 'SignatureText',\n            comments: [],\n            review: {\n              state: '',\n              stateModel: '',\n              modifiedDate: '',\n              author: ''\n            },\n            fontFamily: currentFont,\n            fontSize: rotateAngle === 90 || rotateAngle === 270 ? bounds.width / 2 : bounds.height / 2\n          };\n\n          if (annot.shapeAnnotationType === 'SignatureText') {\n            var textWidth = this.getTextWidth(annot.data, annot.fontSize, annot.fontFamily);\n            var widthRatio = 1;\n            if (textWidth > bounds.width) widthRatio = bounds.width / textWidth;\n            annot.fontSize = this.getFontSize(Math.floor(annot.fontSize * widthRatio));\n          }\n\n          signString = annot.data;\n          signatureFontFamily = annot.fontFamily;\n          signatureFontSize = annot.fontSize;\n        } else if (signatureType === 'Image') {\n          // eslint-disable-next-line\n          bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n          var image = new Image();\n          image.src = currentValue;\n\n          if (this.pdfViewer.signatureFitMode === 'Default') {\n            // To check whether the image shape is square or rectangle\n            var difference = 20;\n            var hightDifference = 4;\n            var heightRatio = 2;\n\n            if (Math.abs(image.height - image.width) < difference) {\n              if (bounds.width > bounds.height) {\n                bounds.x = bounds.x + bounds.width / heightRatio - bounds.height / heightRatio;\n                bounds.width = bounds.height;\n              } else {\n                bounds.y = bounds.y + bounds.height / heightRatio - bounds.width / heightRatio;\n                bounds.height = bounds.width;\n              }\n            } else {\n              if (bounds.width > bounds.height) {\n                bounds.y = bounds.y + bounds.height / hightDifference;\n                bounds.x = bounds.x + bounds.height / hightDifference;\n                var height = bounds.height / heightRatio;\n                bounds = {\n                  x: bounds.x,\n                  y: bounds.y,\n                  width: bounds.width - height,\n                  height: bounds.height - height\n                };\n              } else {\n                bounds.y = bounds.y + bounds.height / hightDifference;\n                bounds.height = bounds.height / heightRatio;\n              }\n            }\n          }\n\n          annot = {\n            // eslint-disable-next-line max-len\n            id: currentField.id,\n            bounds: {\n              x: bounds.x,\n              y: bounds.y,\n              width: bounds.width,\n              height: bounds.height\n            },\n            pageIndex: currentPage,\n            data: currentValue,\n            modifiedDate: '',\n            shapeAnnotationType: 'SignatureImage',\n            opacity: 1,\n            rotateAngle: rotateAngle,\n            annotName: 'SignatureField',\n            comments: [],\n            review: {\n              state: '',\n              stateModel: '',\n              modifiedDate: '',\n              author: ''\n            }\n          };\n          signString = annot.data;\n        } else {\n          if (currentValue.indexOf('base64') !== -1) {\n            // eslint-disable-next-line\n            bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n\n            if (this.pdfViewer.signatureFitMode === 'Default') {\n              bounds = this.getDefaultBoundsforSign(bounds);\n            }\n\n            annot = {\n              // eslint-disable-next-line max-len\n              id: currentField.id,\n              bounds: {\n                x: bounds.x,\n                y: bounds.y,\n                width: bounds.width,\n                height: bounds.height\n              },\n              pageIndex: currentPage,\n              data: currentValue,\n              modifiedDate: '',\n              shapeAnnotationType: 'SignatureImage',\n              opacity: 1,\n              rotateAngle: rotateAngle,\n              annotName: 'SignatureField',\n              comments: [],\n              review: {\n                state: '',\n                stateModel: '',\n                modifiedDate: '',\n                author: ''\n              }\n            };\n            signString = annot.data;\n          } else {\n            // eslint-disable-next-line\n            if (this.pdfViewer.signatureFitMode === 'Default') {\n              // eslint-disable-next-line\n              var signatureBounds = this.updateSignatureAspectRatio(currentValue, false, currentField); // eslint-disable-next-line\n\n              bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, signatureBounds.width, signatureBounds.height, true);\n              bounds.x = bounds.x + signatureBounds.left;\n              bounds.y = bounds.y + signatureBounds.top;\n            } else {\n              bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n            }\n\n            annot = {\n              // eslint-disable-next-line max-len\n              id: currentField.id,\n              bounds: {\n                x: bounds.x,\n                y: bounds.y,\n                width: bounds.width,\n                height: bounds.height\n              },\n              pageIndex: currentPage,\n              data: currentValue,\n              modifiedDate: '',\n              shapeAnnotationType: 'Path',\n              opacity: 1,\n              rotateAngle: rotateAngle,\n              annotName: 'SignatureField',\n              comments: [],\n              review: {\n                state: '',\n                stateModel: '',\n                modifiedDate: '',\n                author: ''\n              }\n            };\n          }\n        }\n\n        if (this.pdfViewerBase.drawSignatureWithTool && signatureField) {\n          annot.id = signatureField.id + \"_content\";\n          var obj = this.pdfViewer.add(annot);\n          signatureField.wrapper.children.push(obj.wrapper);\n        } else {\n          this.pdfViewer.add(annot);\n        }\n\n        if (annot && annot.shapeAnnotationType === 'Path' && currentValue !== '') {\n          this.pdfViewerBase.currentSignatureAnnot = annot; // eslint-disable-next-line\n\n          var position = {\n            currentHeight: currentHeight,\n            currentWidth: currentWidth,\n            currentLeft: currentLeft,\n            currentTop: currentTop\n          };\n          this.pdfViewerBase.signatureModule.addSignatureCollection(bounds, position);\n          signString = this.pdfViewerBase.signatureModule.saveImageString;\n          this.pdfViewerBase.currentSignatureAnnot = null;\n        } // eslint-disable-next-line\n\n\n        var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentPage); // eslint-disable-next-line\n\n        this.pdfViewer.renderDrawing(canvass, currentPage);\n        this.pdfViewerBase.signatureModule.showSignatureDialog(false);\n\n        if (currentField.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n          currentField.className = 'e-pdfviewer-signatureformfields-signature e-pv-signature-focus';\n        } else {\n          currentField.className = 'e-pdfviewer-signatureformfields-signature';\n        }\n\n        if (this.pdfViewerBase.drawSignatureWithTool && signatureField) {\n          var key = target.offsetParent.offsetParent.id.split('_')[0] + '_content';\n          this.updateSignatureDataInSession(annot, key);\n        } else {\n          this.updateDataInSession(currentField, annot.data, annot.bounds, signatureFontFamily, signatureFontSize);\n        }\n\n        currentField.style.pointerEvents = 'none';\n\n        if (this.pdfViewer.annotation) {\n          this.pdfViewer.annotation.addAction(annot.pageIndex, null, annot, 'FormField Value Change', '', annot, annot);\n        } // eslint-disable-next-line\n\n\n        this.pdfViewer.fireSignatureAdd(annot.pageIndex, annot.id, 'HandWrittenSignature', annot.bounds, annot.opacity, null, null, signString);\n        this.pdfViewer.fireFocusOutFormField(currentField.name, currentValue);\n      }\n    }\n\n    this.pdfViewerBase.signatureModule.hideSignaturePanel();\n    this.pdfViewerBase.drawSignatureWithTool = false;\n    this.pdfViewer.isInitialFieldToolbarSelection = false;\n  };\n\n  FormFields.prototype.updateSignatureDataInSession = function (annot, key) {\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n    var formFieldsData = JSON.parse(data);\n\n    var _loop_1 = function (i) {\n      if (formFieldsData[i].Key === key) {\n        var formFieldIndex = this_1.pdfViewer.formFieldCollections.findIndex(function (el) {\n          return el.id === formFieldsData[i].FormField.id.split('_')[0];\n        });\n\n        if (annot.shapeAnnotationType === \"SignatureText\") {\n          formFieldsData[i].FormField.signatureType = \"Text\";\n          this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n          this_1.pdfViewer.nameTable[key].signatureType = \"Text\";\n          formFieldsData[i].FormField.fontFamily = annot.fontFamily;\n          this_1.pdfViewerBase.formFieldCollection[i].FormField.fontFamily = annot.fontFamily;\n          this_1.pdfViewer.nameTable[key].fontFamily = annot.fontFamily;\n          formFieldsData[i].FormField.fontSize = annot.fontSize;\n          this_1.pdfViewerBase.formFieldCollection[i].FormField.fontSize = annot.fontSize;\n          this_1.pdfViewer.nameTable[key].fontSize = annot.fontSize;\n          formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Text\" : null;\n        } else if (annot.shapeAnnotationType === \"SignatureImage\") {\n          formFieldsData[i].FormField.signatureType = \"Image\";\n          this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n          this_1.pdfViewer.nameTable[key].signatureType = \"Image\";\n          formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Image\" : null;\n        } else {\n          formFieldsData[i].FormField.signatureType = \"Path\";\n          this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n          this_1.pdfViewer.nameTable[key].signatureType = \"Path\";\n          formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Path\" : null;\n        }\n\n        formFieldsData[i].FormField.signatureBound = annot.bounds;\n        this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureBound = annot.bounds;\n        this_1.pdfViewer.nameTable[key].signatureBound = annot.bounds;\n        formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureBound = annot.bounds : null;\n\n        if (annot.shapeAnnotationType === \"Path\") {\n          var collectionData = processPathData(annot.data);\n          var csData = splitArrayCollection(collectionData);\n          formFieldsData[i].FormField.value = JSON.stringify(csData);\n          this_1.pdfViewer.nameTable[key].value = annot.data;\n          this_1.pdfViewer.nameTable[key.split('_')[0]].value = annot.data;\n          this_1.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n          formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].value = JSON.stringify(csData) : null;\n        } else {\n          formFieldsData[i].FormField.value = annot.data;\n          this_1.pdfViewerBase.formFieldCollection[i].FormField.value = annot.data;\n          this_1.pdfViewer.nameTable[key.split('_')[0]].value = annot.data;\n          this_1.pdfViewer.nameTable[key].value = annot.data;\n          formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].value = annot.data : null;\n        }\n\n        this_1.pdfViewer.formDesigner.updateFormFieldCollections(formFieldsData[i].FormField);\n        this_1.pdfViewer.formDesigner.updateFormFieldPropertiesChanges(\"formFieldPropertiesChange\", formFieldsData[i].FormField, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, \"\", formFieldsData[i].FormField.value);\n      }\n    };\n\n    var this_1 = this;\n\n    for (var i = 0; i < formFieldsData.length; i++) {\n      _loop_1(i);\n    }\n\n    this.pdfViewerBase.setItemInSessionStorage(formFieldsData, '_formDesigner');\n  };\n  /**\n   * @private\n   */\n\n\n  FormFields.prototype.getDefaultBoundsforSign = function (bounds) {\n    return {\n      x: bounds.x + 10,\n      y: bounds.y + 10,\n      width: bounds.width - 21,\n      height: bounds.height - 21\n    };\n  };\n  /**\n   * @private\n    */\n  // eslint-disable-next-line\n\n\n  FormFields.prototype.getSignBounds = function (currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight, isDraw) {\n    // eslint-disable-next-line\n    var bounds;\n    var signatureId = this.pdfViewer.isInitialFieldToolbarSelection ? 'initialIcon' : 'signIcon';\n    var signIcon = document.getElementById(signatureId + currentPage + '_' + currentIndex);\n    var signLeft = signIcon ? parseFloat(signIcon.style.left) * zoomvalue : 0;\n    var difference = currentLeft * zoomvalue - signLeft / zoomvalue;\n\n    if (rotateAngle === 90 || rotateAngle === 270) {\n      this.rotateAngle = 0;\n\n      if (signIcon.style.left !== '') {\n        if (isDraw) {\n          return bounds = {\n            x: currentLeft - difference / zoomvalue - zoomvalue,\n            y: currentTop + difference / zoomvalue + zoomvalue,\n            width: currentWidth,\n            height: currentHeight\n          };\n        } else {\n          return bounds = {\n            x: currentLeft - difference / zoomvalue - zoomvalue,\n            y: currentTop + difference / zoomvalue + zoomvalue,\n            width: currentHeight,\n            height: currentWidth\n          };\n        }\n      } else {\n        difference = 10;\n\n        if (isDraw) {\n          return bounds = {\n            x: currentLeft - currentWidth,\n            y: currentTop + currentWidth,\n            width: currentHeight,\n            height: currentWidth\n          };\n        } else {\n          return bounds = {\n            x: currentLeft - currentWidth - difference / 2,\n            y: currentTop + currentWidth + difference,\n            width: currentHeight,\n            height: currentWidth\n          };\n        }\n      }\n    } else {\n      this.rotateAngle = 0;\n      return bounds = {\n        x: currentLeft,\n        y: currentTop,\n        width: currentWidth,\n        height: currentHeight\n      };\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.updateSameFieldsValue = function (event) {\n    if (this.formFieldsData) {\n      for (var i = 0; i < this.formFieldsData.length; i++) {\n        // eslint-disable-next-line\n        var currentField = this.formFieldsData[i];\n\n        if (event.target.name === currentField.FieldName && event.target.id !== currentField.uniqueID) {\n          // eslint-disable-next-line\n          var currentTarget = document.getElementById(this.formFieldsData[i].uniqueID);\n\n          if (currentTarget) {\n            currentTarget.value = event.target.value;\n          } else {\n            currentField.Text = event.target.value;\n            this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData, '_formfields');\n          }\n        }\n      }\n    }\n  };\n\n  FormFields.prototype.updateFormFieldsValue = function (event) {\n    // eslint-disable-next-line\n    var currentTarget = event.target;\n\n    if (currentTarget.InsertSpaces && !this.isKeyDownCheck) {\n      // eslint-disable-next-line\n      var font = parseInt(currentTarget.style.width) + parseInt(currentTarget.style.height) / 2;\n      currentTarget.style.width = '' + font + 'px';\n      this.isKeyDownCheck = true;\n    }\n\n    if (event.which === 9 && currentTarget && currentTarget.className === 'e-pdfviewer-formFields') {\n      // eslint-disable-next-line\n      var id = currentTarget.id.split('input_')[1].split('_')[0];\n\n      if (this.maintainTabIndex[id] === currentTarget.tabIndex) {\n        // eslint-disable-next-line\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (parseInt(id) + 1));\n\n        if (textLayer) {\n          // eslint-disable-next-line\n          var currentFields = textLayer.getElementsByClassName('e-pdfviewer-formFields');\n\n          if (currentFields && currentFields.length > 0) {\n            currentFields[0].focus();\n            event.preventDefault();\n          }\n        } else {\n          var textLayer_1 = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + 0); // eslint-disable-next-line\n\n          var currentFields = textLayer_1.getElementsByClassName('e-pdfviewer-formFields');\n\n          for (var m = 0; m < currentFields.length; m++) {\n            if (currentFields[m].tabIndex === this.maintanMinTabindex['0']) {\n              currentFields[m].focus();\n              event.preventDefault();\n              break;\n            }\n          }\n        }\n      } else {\n        // eslint-disable-next-line\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + parseInt(id)); // eslint-disable-next-line\n\n        var currentFields = textLayer.getElementsByClassName('e-pdfviewer-formFields');\n        var istabindexed = true;\n\n        for (var m = 0; m < currentFields.length; m++) {\n          istabindexed = false;\n\n          if (currentFields[m].tabIndex === currentTarget.tabIndex + 1) {\n            currentFields[m].focus();\n            istabindexed = true;\n            event.preventDefault();\n            break;\n          }\n        }\n\n        var tabindex = currentTarget.tabIndex + 1;\n\n        while (!istabindexed) {\n          for (var l = 0; l < currentFields.length; l++) {\n            istabindexed = false;\n\n            if (currentFields[l].tabIndex === tabindex) {\n              currentFields[l].focus();\n              istabindexed = true;\n              event.preventDefault();\n              break;\n            }\n          }\n\n          if (this.maintainTabIndex[id] === tabindex) {\n            istabindexed = true;\n          }\n\n          tabindex = tabindex + 1;\n        }\n      }\n    }\n\n    if (event.currentTarget.classList.contains('e-pdfviewer-signatureformfields') || event.currentTarget.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n      if (event.key === 'Enter') {\n        // eslint-disable-next-line\n        var currentTarget_1 = event.target;\n\n        for (var m = 0; m < this.pdfViewer.formFieldCollections.length; m++) {\n          if (currentTarget_1.id === this.pdfViewer.formFieldCollections[m].id) {\n            this.setFocus(currentTarget_1.id);\n            this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', this.pdfViewer.formFieldCollections[m]);\n          }\n        }\n      } else {\n        event.preventDefault();\n      }\n    }\n  };\n\n  FormFields.prototype.changeFormFields = function (event) {\n    // eslint-disable-next-line\n    var currentTarget = event.target;\n    this.updateDataInSession(currentTarget);\n  };\n\n  FormFields.prototype.calculateSignatureBounds = function (signatureCavasWidth, signatureCavasHeight, newdifferenceX, newdifferenceY, isSignature, currentField, currentData) {\n    var ratioX = newdifferenceX / signatureCavasWidth;\n    var ratioY = newdifferenceY / signatureCavasHeight;\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n    var currentWidth = 0;\n    var currentHeight = 0;\n    var isSignatureStretched = false;\n    var isHeightStretched = false;\n    var leftDifference = 0;\n    var topDifference = 0;\n\n    if (isSignature) {\n      currentWidth = this.pdfViewer.handWrittenSignatureSettings.width ? this.pdfViewer.handWrittenSignatureSettings.width : 150;\n      currentHeight = this.pdfViewer.handWrittenSignatureSettings.height ? this.pdfViewer.handWrittenSignatureSettings.height : 100;\n    } else {\n      var fieldWidth = currentField ? currentField.style.width === '100%' ? currentField.clientWidth : parseFloat(currentField.style.width) : this.ConvertPointToPixel(currentData.LineBounds.Width);\n      var fieldHeight = currentField ? currentField.style.height === '100%' ? currentField.clientHeight : parseFloat(currentField.style.height) : this.ConvertPointToPixel(currentData.LineBounds.Height);\n      var fieldWidthRatio = fieldWidth / fieldHeight;\n      var fieldHeightRatio = fieldHeight / fieldWidth;\n      var canvasWidthRatio = signatureCavasWidth / signatureCavasHeight;\n      var canvasHeightRatio = signatureCavasHeight / signatureCavasWidth;\n      var fieldRotation = currentField ? currentField.offsetParent.offsetParent.style.transform ? currentField.offsetParent.offsetParent.style.transform : currentField.style.transform : currentData.RotationAngle;\n\n      if (fieldWidthRatio > canvasWidthRatio || fieldHeightRatio > canvasWidthRatio || Math.abs(fieldWidthRatio - fieldHeightRatio) <= 1) {\n        var ratioDifference = 0;\n\n        if (fieldHeightRatio > canvasWidthRatio || Math.abs(fieldWidthRatio - fieldHeightRatio) <= 1) {\n          isHeightStretched = true;\n          ratioDifference = fieldHeightRatio / canvasHeightRatio;\n        } else {\n          isSignatureStretched = true;\n          ratioDifference = fieldWidthRatio / canvasWidthRatio;\n        }\n\n        if (fieldRotation === 'rotate(90deg)' || fieldRotation === 'rotate(270deg)') {\n          // eslint-disable-next-line\n          currentWidth = fieldHeight / zoomvalue; // eslint-disable-next-line\n\n          currentHeight = fieldWidth / zoomvalue;\n        } else {\n          if (isSignatureStretched) {\n            // eslint-disable-next-line\n            leftDifference = fieldWidth / zoomvalue; // eslint-disable-next-line\n\n            currentWidth = fieldWidth / ratioDifference / zoomvalue; // eslint-disable-next-line\n\n            currentHeight = fieldHeight / zoomvalue;\n          }\n\n          if (isHeightStretched) {\n            // eslint-disable-next-line\n            topDifference = fieldHeight / zoomvalue; // eslint-disable-next-line\n\n            currentWidth = fieldWidth / zoomvalue; // eslint-disable-next-line\n\n            currentHeight = fieldHeight / ratioDifference / zoomvalue;\n          }\n        }\n      } else {\n        if (fieldRotation === 'rotate(90deg)' || fieldRotation === 'rotate(270deg)') {\n          // eslint-disable-next-line\n          currentWidth = fieldHeight / zoomvalue; // eslint-disable-next-line\n\n          currentHeight = fieldWidth / zoomvalue;\n        } else {\n          // eslint-disable-next-line\n          currentWidth = fieldWidth / zoomvalue; // eslint-disable-next-line\n\n          currentHeight = fieldHeight / zoomvalue;\n        }\n      }\n    }\n\n    var currentLeftDiff = (signatureCavasWidth - newdifferenceX) / 2;\n    var currentTopDiff = (signatureCavasHeight - newdifferenceY) / 2;\n\n    if (isSignatureStretched) {\n      currentLeftDiff = currentLeftDiff / signatureCavasWidth * leftDifference;\n      var leftValueDiff = (leftDifference * ratioX - currentWidth * ratioX) / 2;\n      currentLeftDiff = currentLeftDiff + leftValueDiff;\n      currentTopDiff = currentTopDiff / signatureCavasHeight * currentHeight;\n    } else if (isHeightStretched) {\n      currentLeftDiff = currentLeftDiff / signatureCavasWidth * currentWidth;\n      currentTopDiff = currentTopDiff / signatureCavasHeight * topDifference;\n      var topValueDiff = (topDifference * ratioY - currentHeight * ratioY) / 2;\n      currentTopDiff = currentTopDiff + topValueDiff;\n    } else {\n      currentLeftDiff = currentLeftDiff / signatureCavasWidth * currentWidth;\n      currentTopDiff = currentTopDiff / signatureCavasHeight * currentHeight;\n    }\n\n    currentWidth = currentWidth * ratioX;\n    currentHeight = currentHeight * ratioY;\n    return {\n      currentLeftDiff: currentLeftDiff,\n      currentTopDiff: currentTopDiff,\n      currentWidth: currentWidth,\n      currentHeight: currentHeight\n    };\n  };\n  /**\n   * @param data\n   * @param isSignature\n   * @param currentField\n   * @param data\n   * @param isSignature\n   * @param currentField\n   * @param data\n   * @param isSignature\n   * @param currentField\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  FormFields.prototype.updateSignatureAspectRatio = function (data, isSignature, currentField, currentData) {\n    // eslint-disable-next-line\n    var collectionData = processPathData(data); // eslint-disable-next-line\n\n    var csData = splitArrayCollection(collectionData);\n    var minimumX = -1;\n    var minimumY = -1;\n    var maximumX = -1;\n    var maximumY = -1;\n    var signatureCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n    var signatureCavasWidth = 0;\n    var signatureCavasHeight = 0;\n\n    for (var m = 0; m < csData.length; m++) {\n      // eslint-disable-next-line\n      var val = csData[m];\n\n      if (minimumX === -1) {\n        // eslint-disable-next-line\n        minimumX = parseFloat(val['x'].toString()); // eslint-disable-next-line\n\n        maximumX = parseFloat(val['x'].toString()); // eslint-disable-next-line\n\n        minimumY = parseFloat(val['y'].toString()); // eslint-disable-next-line\n\n        maximumY = parseFloat(val['y'].toString());\n      } else {\n        // eslint-disable-next-line\n        var point1 = parseFloat(val['x'].toString()); // eslint-disable-next-line\n\n        var point2 = parseFloat(val['y'].toString());\n\n        if (minimumX >= point1) {\n          minimumX = point1;\n        }\n\n        if (minimumY >= point2) {\n          minimumY = point2;\n        }\n\n        if (maximumX <= point1) {\n          maximumX = point1;\n        }\n\n        if (maximumY <= point2) {\n          maximumY = point2;\n        }\n      }\n    }\n\n    signatureCavasWidth = signatureCanvas ? signatureCanvas.clientWidth : 650;\n    signatureCavasHeight = signatureCanvas ? signatureCanvas.clientHeight : 300;\n    var newdifferenceX = maximumX - minimumX;\n    var newdifferenceY = maximumY - minimumY;\n    var signBounds = this.calculateSignatureBounds(signatureCavasWidth, signatureCavasHeight, newdifferenceX, newdifferenceY, isSignature, currentField, currentData);\n\n    if (isSignature) {\n      var zoomvalue = this.pdfViewerBase.getZoomFactor();\n      var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n      var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n      var currentLeft = (parseFloat(pageDiv.style.width) / 2 - signBounds.currentWidth / 2) / zoomvalue; // eslint-disable-next-line max-len\n\n      var currentTop = (parseFloat(pageDiv.style.height) / 2 - signBounds.currentHeight / 2) / zoomvalue;\n      return {\n        x: currentLeft,\n        y: currentTop,\n        width: signBounds.currentWidth,\n        height: signBounds.currentHeight\n      };\n    } else {\n      return {\n        left: signBounds.currentLeftDiff,\n        top: signBounds.currentTopDiff,\n        width: signBounds.currentWidth,\n        height: signBounds.currentHeight\n      };\n    }\n  };\n  /**\n   * @param target\n   * @param signaturePath\n   * @param signatureBounds\n   * @param signatureFontFamily\n   * @param signatureFontSize\n   * @param target\n   * @param signaturePath\n   * @param signatureBounds\n   * @param signatureFontFamily\n   * @param signatureFontSize\n   * @param target\n   * @param signaturePath\n   * @param signatureBounds\n   * @param signatureFontFamily\n   * @param signatureFontSize\n   * @param target\n   * @param signaturePath\n   * @param signatureBounds\n   * @param signatureFontFamily\n   * @param signatureFontSize\n   * @param target\n   * @param signaturePath\n   * @param signatureBounds\n   * @param signatureFontFamily\n   * @param signatureFontSize\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  FormFields.prototype.updateDataInSession = function (target, signaturePath, signatureBounds, signatureFontFamily, signatureFontSize) {\n    this.pdfViewerBase.updateDocumentEditedProperty(true); // eslint-disable-next-line\n\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n\n    if (data) {\n      // eslint-disable-next-line\n      var FormFieldsData = JSON.parse(data);\n\n      for (var m = 0; m < FormFieldsData.length; m++) {\n        // eslint-disable-next-line\n        var currentData = FormFieldsData[m];\n\n        if (currentData.uniqueID === target.id) {\n          if (target && target.type === 'text' || target.type === 'password' || target.type === 'textarea') {\n            var signField = target;\n\n            if (signField.classList.contains('e-pdfviewer-signatureformfields') || signField.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n              if (signaturePath) {\n                currentData.Value = signaturePath;\n              }\n\n              if (signatureBounds) {\n                currentData.Bounds = signatureBounds;\n              }\n\n              if (signatureFontFamily) {\n                currentData.FontFamily = signatureFontFamily;\n                currentData.FontSize = signatureFontSize;\n              }\n            } else {\n              currentData.Text = target.value;\n              currentData.Value = target.value;\n            }\n          } else if (target.type === 'radio') {\n            for (var l = 0; l < FormFieldsData.length; l++) {\n              // eslint-disable-next-line\n              var currentType = FormFieldsData[l];\n\n              if (FormFieldsData[l].GroupName === target.name) {\n                FormFieldsData[l].Selected = false;\n              }\n            }\n\n            currentData.Selected = true;\n          } else if (target.type === 'checkbox') {\n            for (var l = 0; l < FormFieldsData.length; l++) {\n              // eslint-disable-next-line\n              var currentType = FormFieldsData[l];\n\n              if (FormFieldsData[l].GroupName === target.name) {\n                FormFieldsData[l].Selected = false; // eslint-disable-next-line\n\n                var currentTarget = document.getElementById(FormFieldsData[l].uniqueID);\n\n                if (currentTarget) {\n                  if (currentData.GroupName === target.name && currentData.uniqueID !== currentTarget.id) {\n                    currentData.Selected = false;\n                    currentTarget.checked = false;\n                  }\n                }\n              }\n            }\n\n            if (target.checked) {\n              currentData.Selected = true;\n            } else {\n              currentData.Selected = false;\n            }\n          } else if (target.type === 'select-one' && target.size === 0) {\n            // eslint-disable-next-line\n            var currentValue = target.options[target.selectedIndex].text; // eslint-disable-next-line\n\n            var childrens = target.children;\n            var isChildElements = false;\n\n            for (var k = 0; k < childrens.length; k++) {\n              if (childrens[k].text === currentValue) {\n                currentData.SelectedValue = currentValue;\n              }\n            }\n          } else if (target.type === 'select-multiple' || target.size > 0) {\n            // eslint-disable-next-line\n            var currentValue = target.selectedOptions;\n            currentData.SelectedList = [];\n\n            for (var z = 0; z < currentValue.length; z++) {\n              // eslint-disable-next-line\n              var childrens = target.children;\n\n              for (var k = 0; k < childrens.length; k++) {\n                if (childrens[k] === currentValue[z]) {\n                  currentData.SelectedList.push(k);\n                }\n              }\n            }\n\n            currentData.SelectedValue = target.value;\n            var index = currentData.TextList ? currentData.TextList.indexOf(target.value) : 0;\n            currentData.selectedIndex = index > -1 ? index : 0;\n            currentData.SelectedList = [currentData.selectedIndex];\n          }\n\n          if (target.disabled) {\n            currentData.IsReadonly = true;\n          }\n\n          this.updateFormFieldsCollection(currentData);\n          break;\n        } else if (target && target.getAttribute('list') != null && target.type === 'text' && currentData.uniqueID === target.list.id) {\n          currentData.SelectedValue = target.value;\n        }\n\n        this.updateFormFieldsCollection(currentData);\n      }\n\n      window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_formfields');\n      this.pdfViewerBase.setItemInSessionStorage(FormFieldsData, '_formfields');\n    }\n\n    if (this.pdfViewer.formDesignerModule && target && target.id) {\n      var selectedItem = this.pdfViewer.nameTable[target.id.split('_')[0]];\n\n      if (selectedItem && selectedItem.wrapper && selectedItem.wrapper.children[0]) {\n        selectedItem.value = target.value;\n        var point = cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;\n        this.pdfViewer.formDesignerModule.updateFormDesignerFieldInSessionStorage(point, selectedItem.wrapper.children[0], selectedItem.formFieldAnnotationType, selectedItem);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  FormFields.prototype.removeExistingFormFields = function () {\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n    var formFieldsData = JSON.parse(data);\n\n    if (formFieldsData) {\n      for (var i = 0; i < formFieldsData.length; i++) {\n        this.pdfViewer.formDesignerModule.deleteFormField(formFieldsData[i].Key.split('_')[0]);\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.applyCommonProperties = function (inputdiv, pageIndex, index, currentData, isFieldRotated) {\n    // eslint-disable-next-line\n    var inputField = document.getElementById(this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index);\n\n    if (inputField) {\n      var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n\n      if (inputdiv.type === 'text' && inputField.parentElement !== textLayer) {\n        inputField.parentElement.remove();\n      }\n\n      inputField.remove();\n    } // eslint-disable-next-line\n\n\n    var signIcon = document.getElementById('signIcon' + pageIndex + '_' + pageIndex);\n    var left = parseFloat(inputdiv.style.left);\n    var top = parseInt(inputdiv.style.top);\n    var width = parseFloat(inputdiv.style.width);\n    var height = parseFloat(inputdiv.style.height);\n    var signIconWidth;\n    var signIconHeght;\n    var hightDifference;\n    var widthDifference;\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n\n    if (signIcon && !isFieldRotated) {\n      signIconWidth = parseFloat(signIcon.style.width);\n      signIconHeght = parseFloat(signIcon.style.height);\n\n      if (signIcon.style.transform == 'rotate(90deg)') {\n        signIcon.style.transform = 'rotate(0deg)';\n        hightDifference = height / 2;\n        widthDifference = signIconWidth * zoomvalue;\n        signIcon.style.left = left - (hightDifference - signIconWidth * zoomvalue) + widthDifference / 2 + 'px';\n      }\n\n      if (signIcon.style.transform == 'rotate(180deg)') {\n        signIcon.style.transform = 'rotate(0deg)';\n        signIcon.style.left = left + 'px';\n        signIcon.style.top = top + 'px';\n      }\n\n      if (signIcon.style.transform == 'rotate(270deg)') {\n        signIcon.style.transform = 'rotate(0deg)';\n        hightDifference = height / 2;\n        widthDifference = signIconWidth * zoomvalue;\n        signIcon.style.left = left - (hightDifference - widthDifference) + widthDifference / 2 + 'px';\n        signIcon.style.top = top + (width + signIconHeght * zoomvalue) + signIconHeght * zoomvalue / 2 + 'px';\n      }\n    }\n\n    if (currentData.IsSignatureField && this.isSignatureField) {\n      inputdiv.className = 'e-pdfviewer-signatureformfields-signature';\n      inputdiv.style.pointerEvents = 'none';\n    } else if (currentData.IsSignatureField) {\n      if (currentData.Value) {\n        inputdiv.className = 'e-pdfviewer-signatureformfields-signature';\n        inputdiv.style.pointerEvents = 'none';\n      } else {\n        inputdiv.className = 'e-pdfviewer-signatureformfields';\n      }\n    } else if (currentData.Name !== 'Button') {\n      inputdiv.className = 'e-pdfviewer-formFields';\n    }\n\n    inputdiv.id = this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index;\n    inputdiv.style.zIndex = 1000;\n  };\n  /**\n   * @param currentData\n   * @param pageIndex\n   * @param index\n   * @param printContainer\n   * @param currentData\n   * @param pageIndex\n   * @param index\n   * @param printContainer\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  FormFields.prototype.createFormFields = function (currentData, pageIndex, index, printContainer, count) {\n    // eslint-disable-next-line\n    var currentField; // eslint-disable-next-line\n\n    switch (currentData['Name']) {\n      case 'Textbox':\n        currentField = this.createTextBoxField(currentData, pageIndex, 'text');\n        break;\n\n      case 'Password':\n        currentField = this.createTextBoxField(currentData, pageIndex, 'password');\n        break;\n\n      case 'RadioButton':\n        currentField = this.createRadioBoxField(currentData, pageIndex, 'radio');\n        break;\n\n      case 'CheckBox':\n        currentField = this.createRadioBoxField(currentData, pageIndex, 'checkbox', printContainer);\n        break;\n\n      case 'DropDown':\n        currentField = this.createDropDownField(currentData, pageIndex, index, printContainer);\n        break;\n\n      case 'ListBox':\n        currentField = this.createListBoxField(currentData, pageIndex);\n        break;\n\n      case 'InitialField':\n      case 'SignatureField':\n        currentField = this.createSignatureField(currentData, pageIndex, index, printContainer, count);\n        var isFieldRotated = false;\n\n        if (currentData['Rotation'] === 0) {\n          isFieldRotated = true;\n        }\n\n        if (currentData.Value && currentData.Value !== '') {\n          this.renderExistingAnnnot(currentData, index, printContainer, isFieldRotated);\n          this.isSignatureRendered = true;\n          count++;\n        }\n\n        break;\n\n      case 'Button':\n        currentField = this.createButtonField(currentData, pageIndex);\n        break;\n\n      case 'ink':\n        if (this.pdfViewer.formDesignerModule) {\n          if (currentData.Value && currentData.Value !== '' && !this.isSignatureRendered) {\n            this.renderExistingAnnnot(currentData, index, printContainer);\n          }\n        }\n\n        break;\n\n      case 'SignatureText':\n      case 'SignatureImage':\n        if (currentData.Value && currentData.Value !== '' && !this.isSignatureRendered) {\n          this.renderExistingAnnnot(currentData, index, printContainer);\n        }\n\n        break;\n    }\n\n    return {\n      currentField: currentField,\n      count: count\n    };\n  };\n\n  FormFields.prototype.getFormFieldType = function (currentData) {\n    // eslint-disable-next-line\n    var currentField; // eslint-disable-next-line\n\n    switch (currentData['Name']) {\n      case 'Textbox':\n        currentField = 'Textbox';\n        break;\n\n      case 'Password':\n        currentField = 'Password';\n        break;\n\n      case 'RadioButton':\n        currentField = 'RadioButton';\n        break;\n\n      case 'CheckBox':\n        currentField = 'CheckBox';\n        break;\n\n      case 'DropDown':\n        currentField = 'DropDown';\n        break;\n\n      case 'ListBox':\n        currentField = 'ListBox';\n        break;\n\n      case 'SignatureField':\n        currentField = 'SignatureField';\n\n        if (currentData.IsInitialField) {\n          currentField = 'InitialField';\n        }\n\n        break;\n\n      case 'InitialField':\n        currentField = 'InitialField';\n        break;\n    }\n\n    return currentField;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.createButtonField = function (data, pageIndex) {\n    // eslint-disable-next-line\n    var inputField = document.createElement('input');\n\n    if (data.Value) {\n      inputField.type = 'image';\n      inputField.src = data.Value;\n    } else {\n      inputField.type = 'button';\n    }\n\n    inputField.className = 'e-pv-buttonItem';\n\n    if (data.Text !== '') {\n      inputField.value = data.Text;\n    } else {\n      inputField.value = '';\n    }\n\n    inputField.name = data.FieldName;\n    return inputField;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.createTextBoxField = function (data, pageIndex, type) {\n    // eslint-disable-next-line\n    var inputField;\n\n    if (data.Visible === 1) {\n      return;\n    }\n\n    if (data.Multiline) {\n      inputField = document.createElement('textarea');\n      inputField.style.resize = 'none';\n    } else {\n      inputField = document.createElement('input');\n      inputField.type = type;\n    }\n\n    if (data.MaxLength > 0) {\n      inputField.maxLength = data.MaxLength;\n    }\n\n    this.addAlignmentPropety(data, inputField);\n\n    if (data.Text !== '') {\n      inputField.value = data.Text;\n    } else {\n      inputField.value = '';\n    }\n\n    if (!this.pdfViewer.enableAutoComplete) {\n      inputField.autocomplete = 'off';\n    }\n\n    inputField.name = data.FieldName;\n    return inputField;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.checkIsReadonly = function (data, inputField) {\n    var isReadonly = false;\n\n    for (var n = 0; n < this.readOnlyCollection.length; n++) {\n      if (inputField.id === this.readOnlyCollection[n]) {\n        isReadonly = true;\n        break;\n      }\n    }\n\n    if (!this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule && (data.IsInitialField || data.IsSignatureField)) {\n      isReadonly = true;\n    }\n\n    if (data.IsReadonly || !this.pdfViewer.enableFormFields || isReadonly) {\n      inputField.disabled = true;\n      inputField.style.cursor = 'default';\n      inputField.style.backgroundColor = 'transparent';\n    } else {\n      // eslint-disable-next-line\n      var borderColor = data.BackColor;\n      inputField.style.backgroundColor = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 0.2 + ')'; // eslint-disable-next-line\n\n      var fontColor = data.FontColor;\n      inputField.style.color = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n    }\n  };\n  /**\n   * @param isReadonly\n   * @private\n   */\n  // eslint-disable-next-line max-len\n\n\n  FormFields.prototype.formFieldsReadOnly = function (isReadonly) {\n    // eslint-disable-next-line\n    var formFields = document.getElementsByClassName('e-pdfviewer-formFields');\n    this.makeformFieldsReadonly(formFields, isReadonly); // eslint-disable-next-line\n\n    var signatureFields = document.getElementsByClassName('e-pdfviewer-signatureformfields');\n    this.makeformFieldsReadonly(signatureFields, isReadonly);\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.makeformFieldsReadonly = function (formFields, isReadonly) {\n    for (var i = 0; i < formFields.length; i++) {\n      if (formFields[i]) {\n        // eslint-disable-next-line\n        var inputField = formFields[i];\n\n        if (!isReadonly) {\n          inputField.disabled = true;\n          inputField.style.cursor = 'default';\n        } else {\n          // eslint-disable-next-line\n          inputField.disabled = false;\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.applyTabIndex = function (data, inputField, pageIndex) {\n    inputField.tabIndex = data.TabIndex;\n    this.maxTabIndex = Math.max(this.maxTabIndex, inputField.tabIndex);\n\n    if (this.minTabIndex === -1) {\n      this.minTabIndex = inputField.tabIndex;\n    }\n\n    this.minTabIndex = Math.min(this.minTabIndex, inputField.tabIndex);\n    this.maintainTabIndex[pageIndex.toString()] = this.maxTabIndex;\n    this.maintanMinTabindex[pageIndex.toString()] = this.minTabIndex;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.checkIsRequiredField = function (data, inputField) {\n    if (data.IsRequired) {\n      inputField.required = true;\n      inputField.style.border = '1px solid red';\n    } else {\n      // eslint-disable-next-line\n      var borderColor = data.BorderColor;\n      inputField.style.border = data.BorderWidth;\n      inputField.style.borderColor = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n    }\n\n    if (inputField.type !== 'checkbox' && inputField.type !== 'radio') {\n      var borderStyle = data.BorderStyle;\n      this.addBorderStylePropety(borderStyle, inputField);\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.applyDefaultColor = function (inputField) {\n    // eslint-disable-next-line max-len\n    if (inputField.type !== 'button' && (inputField.style.backgroundColor === 'rgba(255, 255, 255, 0.2)' || inputField.style.backgroundColor === 'rgba(0, 0, 0, 0.2)')) {\n      inputField.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n    }\n\n    if (inputField.style.color === 'rgba(255, 255, 255, 0.2)') {\n      inputField.style.color = 'black';\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.addAlignmentPropety = function (data, inputField) {\n    // eslint-disable-next-line\n    var alignment = data.Alignment;\n\n    switch (alignment) {\n      case 0:\n        inputField.style.textAlign = 'left';\n        break;\n\n      case 1:\n        inputField.style.textAlign = 'center';\n        break;\n\n      case 2:\n        inputField.style.textAlign = 'right';\n        break;\n\n      case 3:\n        inputField.style.textAlign = 'justify';\n        break;\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.addBorderStylePropety = function (borderStyle, inputField) {\n    // eslint-disable-next-line\n    switch (borderStyle) {\n      case 0:\n        inputField.style.borderStyle = 'solid';\n        break;\n\n      case 1:\n        inputField.style.borderStyle = 'dashed';\n        break;\n\n      case 2:\n        inputField.style.borderStyle = 'outset';\n        break;\n\n      case 3:\n        inputField.style.borderStyle = 'inset';\n        break;\n\n      case 4:\n        inputField.style.borderStyle = 'outset';\n        break;\n\n      case 5:\n        inputField.style.borderStyle = 'dotted';\n        break;\n\n      case 6:\n        inputField.style.borderStyle = 'inset';\n        break;\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.createRadioBoxField = function (data, pageIndex, type, printContainer) {\n    // eslint-disable-next-line\n    var inputField = document.createElement('input');\n    inputField.type = type;\n\n    if (data.Selected) {\n      inputField.checked = true;\n    }\n\n    inputField.name = data.GroupName;\n    inputField.value = data.Value;\n    return inputField;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.createDropDownField = function (data, pageIndex, index, printContainer) {\n    // eslint-disable-next-line\n    var inputField = document.createElement('select'); // eslint-disable-next-line\n\n    var childItems = data['TextList'];\n\n    if (data.Selected && !printContainer) {\n      // eslint-disable-next-line\n      var previousField = document.getElementById('editableDropdown' + pageIndex + '_' + index);\n\n      if (previousField) {\n        previousField.remove();\n      } // eslint-disable-next-line\n\n\n      var inputFields = document.createElement('input');\n      inputFields.id = 'editableDropdown' + pageIndex + '_' + index;\n      inputFields.setAttribute('list', this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index); // eslint-disable-next-line\n\n      var bounds = data['LineBounds']; // eslint-disable-next-line\n\n      var font = data['Font'];\n      inputFields.style.position = 'absolute';\n      inputFields.style.border = '0px'; // eslint-disable-next-line\n\n      this.applyPosition(inputFields, bounds, font, pageIndex, data['Rotation']);\n      inputFields.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n      inputFields.className = 'e-pdfviewer-formFields';\n\n      if (data.selectedIndex === -1) {\n        inputFields.value = data.SelectedValue;\n      }\n\n      if (printContainer) {\n        printContainer.appendChild(inputFields);\n      } else {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n        textLayer.appendChild(inputFields);\n      }\n\n      inputFields.addEventListener('focus', this.focusFormFields.bind(this));\n      inputFields.addEventListener('blur', this.blurFormFields.bind(this));\n      inputFields.addEventListener('click', this.updateFormFields.bind(this));\n      inputFields.addEventListener('change', this.changeFormFields.bind(this));\n      inputFields.addEventListener('keydown', this.updateFormFieldsValue.bind(this));\n      inputField = document.createElement('DATALIST');\n    }\n\n    for (var j = 0; j < childItems.length; j++) {\n      // eslint-disable-next-line\n      var option = document.createElement('option');\n      option.className = 'e-dropdownSelect';\n\n      if (data.SelectedValue === childItems[j] || data.selectedIndex === j) {\n        option.selected = true;\n      } else {\n        option.selected = false;\n      }\n\n      option.innerHTML = childItems[j];\n      inputField.appendChild(option);\n    }\n\n    inputField.name = data.Text;\n    return inputField;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.createListBoxField = function (data, pageIndex) {\n    // eslint-disable-next-line\n    var inputField = document.createElement('select'); // eslint-disable-next-line\n\n    var childItems = data['TextList'];\n\n    if (data.MultiSelect) {\n      inputField.multiple = true;\n    } else {\n      inputField.multiple = false;\n      inputField.size = childItems.length;\n    }\n\n    for (var j = 0; j < childItems.length; j++) {\n      // eslint-disable-next-line\n      var option = document.createElement('option');\n      option.className = 'e-pdfviewer-ListBox';\n\n      for (var k = 0; k < data.SelectedList.length; k++) {\n        if (data.SelectedList[k] === j) {\n          option.selected = true;\n        }\n      }\n\n      option.innerHTML = childItems[j];\n      inputField.appendChild(option);\n    }\n\n    inputField.name = data.Text;\n    return inputField;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.createSignatureField = function (data, pageIndex, index, printContainer, count) {\n    // eslint-disable-next-line\n    var inputField = document.createElement('input');\n    inputField.type = 'text';\n    inputField.name = data.FieldName; // eslint-disable-next-line\n\n    var previousField = document.getElementById('signIcon' + pageIndex + '_' + index);\n\n    if (previousField && !printContainer) {\n      previousField.remove();\n    }\n\n    this.pdfViewerBase.isInitialField = data.IsInitialField;\n    var signIndicator = this.pdfViewerBase.isInitialField ? \"Initial\" : \"Sign\"; //check whether the width for sign indicator has default value or not and then set the default width value for initial field.\n\n    var signatureFieldIndicatorWidth = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width === 19 ? this.pdfViewerBase.isInitialField ? 27 : 19 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width; // eslint-disable-next-line\n\n    var span = document.createElement('span');\n    var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex); // eslint-disable-next-line\n\n    var bounds = data['LineBounds']; // eslint-disable-next-line\n\n    var font = data['Font'];\n    var left = this.ConvertPointToPixel(bounds.X);\n    var top = this.ConvertPointToPixel(bounds.Y); // eslint-disable-next-line max-len\n\n    var height = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height > bounds.Height / 2 ? bounds.Height / 2 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height; // eslint-disable-next-line max-len\n\n    var width = signatureFieldIndicatorWidth > bounds.Width / 2 ? bounds.Width / 2 : signatureFieldIndicatorWidth; // eslint-disable-next-line max-len\n\n    var fontSize = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize > height / 2 ? 10 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize;\n    span.style.position = 'absolute';\n    span.id = 'signIcon' + pageIndex + '_' + index;\n    var zoomvalue = this.pdfViewerBase.getZoomFactor();\n    var rotation = this.getAngle(pageIndex); // eslint-disable-next-line\n\n    var annotBounds = {\n      left: left,\n      top: top,\n      width: width,\n      height: height\n    }; // eslint-disable-next-line\n\n    var fieldBounds = this.getBounds(annotBounds, pageIndex);\n    span.style.transform = 'rotate(' + rotation + 'deg)';\n    span.style.left = fieldBounds.left * zoomvalue + 'px';\n    span.style.top = fieldBounds.top * zoomvalue + 'px';\n\n    if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n      span.style.height = 5 + 'px';\n      span.style.width = 10 + 'px';\n      span.style.fontSize = '3px';\n    } else {\n      span.style.height = height + 'px';\n      span.style.width = width + 'px';\n      span.style.fontSize = fontSize + 'px';\n\n      if (isBlazor()) {\n        span.style.fontSize = fontSize - 1 + 'px';\n      }\n    }\n\n    span.style.padding = '2px';\n    span.style.textAlign = 'center';\n    span.style.boxSizing = 'content-box'; // eslint-disable-next-line\n\n    span.innerHTML = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text : signIndicator;\n    span.style.color = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color : 'black'; // eslint-disable-next-line\n\n    span.style.backgroundColor = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor : 'orange';\n    span.style.opacity = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity : 1;\n    textLayer.appendChild(span);\n    this.addSignaturePath(data, count);\n    return inputField;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.addSignaturePath = function (signData, count) {\n    this.isSignatureField = false; // eslint-disable-next-line\n\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n\n    if (data) {\n      // eslint-disable-next-line\n      var formFieldsData = JSON.parse(data);\n\n      for (var m = 0; m < formFieldsData.length; m++) {\n        // eslint-disable-next-line\n        var currentData = formFieldsData[m]; // eslint-disable-next-line max-len\n\n        if ((currentData.Name === 'ink' || currentData.Name === 'SignatureField' || currentData.Name === 'SignatureImage' || currentData.Name === 'SignatureText') && this.pdfViewer.formDesigner ? currentData.FieldName === signData.ActualFieldName + '_' + count || currentData.FieldName === signData.FieldName + '_' + count : (currentData.FieldName === signData.FieldName + '_' + count || currentData.FieldName === signData.ActualFieldName + '_' + count) && !isNullOrUndefined(signData.ActualFieldName) && currentData.Value && currentData.Value !== '') {\n          signData.Value = currentData.Value;\n          signData.FontFamily = currentData.FontFamily;\n          signData.FontSize = currentData.FontSize;\n          this.isSignatureField = true;\n\n          if (!signData.Bounds) {\n            signData.Bounds = currentData.LineBounds;\n          }\n\n          break;\n        }\n      }\n    }\n\n    return this.isSignatureField;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.getBounds = function (bound, pageIndex, rotation, isFieldRotated) {\n    // eslint-disable-next-line\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex]; // eslint-disable-next-line\n\n    var bounds;\n\n    if (rotation > 0) {\n      bounds = this.getBoundsPosition(rotation, bound, pageDetails, isFieldRotated);\n    } else {\n      bounds = this.getBoundsPosition(pageDetails.rotation, bound, pageDetails, isFieldRotated);\n    }\n\n    return bounds;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.getBoundsPosition = function (rotation, bound, pageDetails, isFieldRotated) {\n    // eslint-disable-next-line\n    var bounds;\n\n    if (!isFieldRotated) {\n      switch (rotation) {\n        case 90:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.top - bound.height,\n            top: bound.left,\n            width: bound.height,\n            height: bound.width\n          };\n          break;\n\n        case 180:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.left - bound.width,\n            top: pageDetails.height - bound.top - bound.height,\n            width: bound.width,\n            height: bound.height\n          };\n          break;\n\n        case 270:\n          // eslint-disable-next-line\n          bounds = {\n            left: bound.top,\n            top: pageDetails.height - bound.left - bound.width,\n            width: bound.height,\n            height: bound.width\n          };\n          break;\n\n        case 0:\n          // eslint-disable-next-line\n          bounds = bound;\n          break;\n\n        case 1:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.top - bound.height,\n            top: bound.left,\n            width: bound.height,\n            height: bound.width\n          };\n          break;\n\n        case 2:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.left - bound.width,\n            top: pageDetails.height - bound.top - bound.height,\n            width: bound.width,\n            height: bound.height\n          };\n          break;\n\n        case 3:\n          // eslint-disable-next-line\n          bounds = {\n            left: bound.top,\n            top: pageDetails.height - bound.left - bound.width,\n            width: bound.height,\n            height: bound.width\n          };\n          break;\n      }\n\n      if (!bounds) {\n        bounds = bound;\n      }\n    } else {\n      switch (rotation) {\n        case 0:\n          // eslint-disable-next-line\n          bounds = bound;\n          break;\n\n        case 1:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.top - bound.height - (bound.width / 2 - bound.height / 2),\n            top: bound.left + (bound.width / 2 - bound.height / 2),\n            width: bound.width,\n            height: bound.height\n          };\n          break;\n\n        case 2:\n          // eslint-disable-next-line\n          bounds = {\n            left: pageDetails.width - bound.left - bound.width,\n            top: pageDetails.height - bound.top - bound.height,\n            width: bound.width,\n            height: bound.height\n          };\n          break;\n\n        case 3:\n          // eslint-disable-next-line\n          bounds = {\n            left: bound.top - (bound.width / 2 - bound.height / 2),\n            top: pageDetails.height - bound.left - bound.width + (bound.width / 2 - bound.height / 2),\n            width: bound.width,\n            height: bound.height\n          };\n          break;\n      }\n\n      if (!bounds) {\n        bounds = bound;\n      }\n    }\n\n    return bounds;\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.applyPosition = function (inputField, bounds, font, pageIndex, rotation, isFieldRotated) {\n    if (bounds) {\n      var left = this.ConvertPointToPixel(bounds.X);\n      var top_3 = this.ConvertPointToPixel(bounds.Y);\n      var width = this.ConvertPointToPixel(bounds.Width);\n      var height = this.ConvertPointToPixel(bounds.Height);\n      var fontHeight = 0; // eslint-disable-next-line\n\n      var fieldBounds = {\n        left: left,\n        top: top_3,\n        width: width,\n        height: height\n      }; // eslint-disable-next-line\n\n      var annotBounds = this.getBounds(fieldBounds, pageIndex, rotation, isFieldRotated);\n\n      if (font !== null && font.Height) {\n        inputField.style.fontFamily = font.Name;\n\n        if (font.Italic) {\n          inputField.style.fontStyle = 'italic';\n        }\n\n        if (font.Bold) {\n          inputField.style.fontWeight = 'Bold';\n        }\n\n        fontHeight = this.ConvertPointToPixel(font.Size);\n      }\n\n      this.pdfViewerBase.setStyleToTextDiv(inputField, annotBounds.left, annotBounds.top, fontHeight, annotBounds.width, annotBounds.height, false);\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.renderExistingAnnnot = function (data, index, printContainer, isFieldRotated) {\n    if (!printContainer) {\n      // eslint-disable-next-line\n      var bounds = void 0;\n\n      if (data.Bounds && data.Name !== 'ink') {\n        bounds = data.Bounds;\n      } else {\n        bounds = data.LineBounds;\n      }\n\n      var currentLeft = void 0;\n      var currentTop = void 0;\n      var currentWidth = void 0;\n      var currentHeight = void 0;\n\n      if (bounds.x || bounds.y || bounds.width || bounds.height) {\n        currentLeft = bounds.x;\n        currentTop = bounds.y;\n        currentWidth = bounds.width;\n        currentHeight = bounds.height;\n      } else {\n        currentLeft = this.ConvertPointToPixel(bounds.X);\n        currentTop = this.ConvertPointToPixel(bounds.Y);\n        currentWidth = this.ConvertPointToPixel(bounds.Width);\n        currentHeight = this.ConvertPointToPixel(bounds.Height);\n      } // eslint-disable-next-line\n\n\n      var currentPage = parseFloat(data['PageIndex']); // eslint-disable-next-line\n\n      var bound = {\n        left: currentLeft,\n        top: currentTop,\n        width: currentWidth,\n        height: currentHeight\n      }; // eslint-disable-next-line\n\n      var newBounds = this.updateSignatureBounds(bound, currentPage, isFieldRotated);\n      var annot = void 0;\n      var fontFamily = data.FontFamily ? data.FontFamily : data.fontFamily; // eslint-disable-next-line\n\n      if (data.Value.split('base64,')[1]) {\n        annot = {\n          // eslint-disable-next-line max-len\n          id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index,\n          bounds: newBounds,\n          pageIndex: currentPage,\n          data: data.Value,\n          modifiedDate: '',\n          shapeAnnotationType: 'SignatureImage',\n          opacity: 1,\n          rotateAngle: isFieldRotated ? this.getAngle(currentPage) : 0,\n          annotName: 'SignatureField',\n          comments: [],\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: '',\n            author: ''\n          }\n        };\n      } else if (fontFamily && !(data.Value && data.Value.startsWith('M') && data.Value.split(',')[1].split(' ')[1].startsWith('L'))) {\n        annot = {\n          // eslint-disable-next-line max-len\n          id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index,\n          bounds: newBounds,\n          pageIndex: currentPage,\n          data: data.Value,\n          modifiedDate: '',\n          shapeAnnotationType: 'SignatureText',\n          opacity: 1,\n          rotateAngle: isFieldRotated ? this.getAngle(currentPage) : 0,\n          annotName: 'SignatureField',\n          comments: [],\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: '',\n            author: ''\n          },\n          fontFamily: data.FontFamily,\n          fontSize: data.FontSize\n        };\n        annot.fontFamily = fontFamily;\n        annot.fontSize = data.FontSize ? data.FontSize : data.fontSize;\n      } else {\n        var bound_1 = newBounds;\n        var tempBounds = {\n          left: newBounds.x,\n          top: newBounds.y,\n          width: newBounds.width,\n          height: newBounds.height\n        };\n        bound_1 = this.updateSignatureBounds(tempBounds, currentPage, false);\n        annot = {\n          // eslint-disable-next-line max-len\n          id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index,\n          bounds: bound_1,\n          pageIndex: currentPage,\n          data: data.Value,\n          modifiedDate: '',\n          shapeAnnotationType: 'Path',\n          opacity: 1,\n          rotateAngle: 0,\n          annotName: 'SignatureField',\n          comments: [],\n          review: {\n            state: '',\n            stateModel: '',\n            modifiedDate: '',\n            author: ''\n          }\n        };\n      }\n\n      if ((data.Name === 'SignatureField' || data.Name === 'InitialField') && !isNullOrUndefined(data.id)) {\n        var elementId = data.id;\n        var signatureFieldElement = document.getElementById(elementId + '_content_html_element');\n        var signatureField = this.pdfViewer.nameTable[elementId];\n        annot.id = signatureField.id + \"_content\";\n        var obj = this.pdfViewer.add(annot);\n        signatureField.wrapper.children.push(obj.wrapper);\n\n        if (!isNullOrUndefined(signatureFieldElement) && this.isSignatureField) {\n          var inputField = signatureFieldElement.children[0].children[0];\n          inputField.style.pointerEvents = 'none';\n          inputField.className = 'e-pdfviewer-signatureformfields-signature';\n          inputField.parentElement.style.pointerEvents = 'none';\n        } else if (!isNullOrUndefined(signatureFieldElement) && data.Value) {\n          var inputField = signatureFieldElement.children[0].children[0];\n          inputField.style.pointerEvents = 'none';\n          inputField.className = 'e-pdfviewer-signatureformfields-signature';\n          inputField.parentElement.style.pointerEvents = 'none';\n        }\n      } else {\n        var target = document.getElementById(annot.id);\n\n        if (target && target.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n          this.pdfViewer.annotation.deleteAnnotationById(annot.id);\n        }\n\n        this.pdfViewer.add(annot);\n      }\n\n      data.Bounds = annot.bounds;\n\n      if (this.pdfViewer.formDesignerModule) {\n        this.updateSignatureDataInSession(annot, annot.id);\n      } // eslint-disable-next-line\n\n\n      var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentPage); // eslint-disable-next-line\n\n      this.pdfViewer.renderDrawing(canvass, currentPage);\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.updateSignatureBounds = function (bound, pageIndex, isFieldRotated) {\n    // eslint-disable-next-line\n    var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n\n    if (pageDetails) {\n      if (!isFieldRotated) {\n        if (pageDetails.rotation === 1) {\n          // eslint-disable-next-line max-len\n          return {\n            x: pageDetails.width - bound.top - bound.height,\n            y: bound.left,\n            width: bound.height,\n            height: bound.width\n          };\n        } else if (pageDetails.rotation === 2) {\n          // eslint-disable-next-line max-len\n          return {\n            x: pageDetails.width - bound.left - bound.width,\n            y: pageDetails.height - bound.top - bound.height,\n            width: bound.width,\n            height: bound.height\n          };\n        } else if (pageDetails.rotation === 3) {\n          // eslint-disable-next-line max-len\n          return {\n            x: bound.top,\n            y: pageDetails.height - bound.left - bound.width,\n            width: bound.height,\n            height: bound.width\n          };\n        } else {\n          // eslint-disable-next-line max-len\n          return {\n            x: bound.left,\n            y: bound.top,\n            width: bound.width,\n            height: bound.height\n          };\n        }\n      } else {\n        if (pageDetails.rotation === 1) {\n          // eslint-disable-next-line max-len\n          return {\n            x: pageDetails.width - bound.top - bound.height - (bound.width / 2 - bound.height / 2),\n            y: bound.left + (bound.width / 2 - bound.height / 2),\n            width: bound.width,\n            height: bound.height\n          };\n        } else if (pageDetails.rotation === 2) {\n          // eslint-disable-next-line max-len\n          return {\n            x: pageDetails.width - bound.left - bound.width,\n            y: pageDetails.height - bound.top - bound.height,\n            width: bound.width,\n            height: bound.height\n          };\n        } else if (pageDetails.rotation === 3) {\n          // eslint-disable-next-line max-len\n          return {\n            x: bound.top - (bound.width / 2 - bound.height / 2),\n            y: pageDetails.height - bound.left - bound.width + (bound.width / 2 - bound.height / 2),\n            width: bound.width,\n            height: bound.height\n          };\n        } else {\n          // eslint-disable-next-line max-len\n          return {\n            x: bound.left,\n            y: bound.top,\n            width: bound.width,\n            height: bound.height\n          };\n        }\n      }\n    } else {\n      return {\n        x: bound.left,\n        y: bound.top,\n        width: bound.width,\n        height: bound.height\n      };\n    }\n  };\n\n  FormFields.prototype.resetFormFields = function () {\n    var formFieldData = this.pdfViewer.formFieldCollections;\n\n    for (var i = 0; i < formFieldData.length; i++) {\n      var currentData = formFieldData[i];\n      this.currentTarget = document.getElementById(currentData.id);\n\n      if (currentData.type === 'Textbox') {\n        this.currentTarget.value = currentData.value;\n      } else if (currentData.type === 'RadioButton') {\n        this.currentTarget.checked = currentData.value;\n\n        if (currentData.value) {\n          this.updateDataInSession(this.currentTarget);\n        }\n      } else if (currentData.type === 'DropDown') {\n        this.currentTarget.value = currentData.value;\n      } else if (currentData.type === 'CheckBox') {\n        this.currentTarget.checked = currentData.value;\n      } else if (currentData.type === 'SignatureField') {\n        // eslint-disable-next-line\n        var annotation = this.pdfViewer.nameTable[currentData.id];\n\n        if (annotation) {\n          if (this.currentTarget && this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n            this.currentTarget.className = 'e-pdfviewer-signatureformfields';\n            this.currentTarget.style.pointerEvents = '';\n            this.updateDataInSession(this.currentTarget, '');\n          }\n\n          this.pdfViewer.remove(annotation);\n          this.pdfViewer.renderDrawing();\n        }\n      }\n\n      if (currentData.type !== 'RadioButton' && currentData.type !== 'SignatureField') {\n        this.updateDataInSession(this.currentTarget);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  FormFields.prototype.clearFormFieldStorage = function () {\n    // eslint-disable-next-line\n    var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n    var maxSessionSize = 4500;\n\n    if (sessionSize > maxSessionSize) {\n      var storageLength = window.sessionStorage.length; // eslint-disable-next-line\n\n      var annotationList = [];\n\n      for (var i = 0; i < storageLength; i++) {\n        if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n          if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n            // eslint-disable-next-line max-len\n            this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n            annotationList.push(window.sessionStorage.key(i));\n          }\n        }\n      }\n\n      if (annotationList) {\n        for (var i = 0; i < annotationList.length; i++) {\n          window.sessionStorage.removeItem(annotationList[i]);\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  FormFields.prototype.clearFormFields = function (formField) {\n    // eslint-disable-next-line\n    var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n\n    if (data) {\n      // eslint-disable-next-line\n      var formFieldsData = void 0;\n\n      if (formField) {\n        formFieldsData = [formField];\n      } else {\n        formFieldsData = JSON.parse(data);\n      }\n\n      var isFirstRadio = true;\n\n      for (var m = 0; m < formFieldsData.length; m++) {\n        // eslint-disable-next-line\n        var currentData = formFieldsData[m];\n\n        if (formField) {\n          currentData.uniqueID = formField.id;\n          currentData.Name = formField.type;\n        } // eslint-disable-next-line\n\n\n        this.currentTarget = document.getElementById(currentData.uniqueID);\n\n        if (currentData.Name === 'Textbox') {\n          this.currentTarget.value = '';\n        } else if (currentData.Name === 'RadioButton') {\n          if (isFirstRadio) {\n            this.currentTarget.checked = true;\n            this.updateDataInSession(this.currentTarget);\n            isFirstRadio = false;\n          }\n        } else if (currentData.Name === 'DropDown') {\n          this.currentTarget.value = currentData.TextList[0];\n        } else if (currentData.Name === 'CheckBox') {\n          this.currentTarget.checked = false;\n        } else if (currentData.Name === 'SignatureField') {\n          // eslint-disable-next-line\n          var annotation = this.pdfViewer.nameTable[currentData.uniqueID];\n\n          if (annotation) {\n            if (this.currentTarget && this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n              this.currentTarget.className = 'e-pdfviewer-signatureformfields';\n              this.currentTarget.style.pointerEvents = '';\n              this.currentTarget.parentElement.style.pointerEvents = '';\n              this.updateDataInSession(this.currentTarget, '');\n\n              if (formField) {\n                formField.value = '';\n                formField.signatureType = [formField.signatureType];\n                formField.signatureType[0] = '';\n              }\n            }\n\n            this.pdfViewer.remove(annotation);\n            this.pdfViewer.renderDrawing();\n          }\n        }\n\n        if (currentData.Name !== 'SignatureField' && currentData.Name !== 'ink' && currentData.Name !== 'RadioButton') {\n          this.updateDataInSession(this.currentTarget);\n        }\n      }\n    }\n  };\n  /**\n   * @param number\n   * @private\n   */\n  // eslint-disable-next-line\n\n\n  FormFields.prototype.ConvertPointToPixel = function (number) {\n    return number * (96 / 72);\n  };\n  /**\n   * @private\n   */\n\n\n  FormFields.prototype.destroy = function () {\n    this.currentTarget = null;\n    this.readOnlyCollection = [];\n    if (this.pdfViewerBase && this.pdfViewerBase.signatureModule) this.pdfViewerBase.signatureModule.destroy();\n  };\n  /**\n   * @private\n   */\n\n\n  FormFields.prototype.getModuleName = function () {\n    return 'FormFields';\n  };\n  /**\n   * @private\n   * Get the text wdith\n   * @param text\n   * @param font\n   * @param fontFamily\n  */\n\n\n  FormFields.prototype.getTextWidth = function (text, font, fontFamily) {\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var fontName;\n\n    if (font) {\n      fontName = font + 'px' + ' ' + fontFamily;\n    }\n\n    context.font = fontName || getComputedStyle(document.body).font;\n    return context.measureText(text).width;\n  };\n  /**\n   * @private\n   * @param {number} fontSize - Font size.\n   * @returns {number} - Returns the font size.\n  */\n\n\n  FormFields.prototype.getFontSize = function (fontSize) {\n    return fontSize % 2 === 0 ? fontSize : --fontSize;\n  };\n\n  return FormFields;\n}();\n\nexport { FormFields };","map":{"version":3,"names":["Browser","isBlazor","isNullOrUndefined","splitArrayCollection","processPathData","cornersPointsBeforeRotation","Tooltip","FormFields","viewer","base","maintainTabIndex","maintanMinTabindex","isSignatureField","isKeyDownCheck","readOnlyCollection","isSignatureRendered","signatureFieldCollection","selectedIndex","pdfViewer","pdfViewerBase","prototype","renderFormFields","pageIndex","maxTabIndex","minTabIndex","data","getItemFromSessionStorage","formFieldsData","JSON","parse","textLayer","document","getElementById","element","id","canvasElement","count","flag","i","length","formField","ActualFieldName","PageIndex","parseInt","FieldName","split","i_1","currentData","IsInitialField","Name","font","formDesigner","parseFloat","fontFamily","fontStyle","fontSize","Height","Italic","Bold","Strikeout","Underline","ConvertPointToPixel","Size","textAlignment","Alignment","backgroundColor","bounds","backColor","R","G","B","IsTransparent","rgbaToHex","fontColor","left","X","top_1","Y","width","Width","height","boundArray","top","isFieldRotated","rotateFieldAngle","getBounds","getAngle","foreColor","borderColor","borderRGB","borderWidth","elementValue","fieldProperties","pageNumber","name","tooltip","value","isChecked","isSelected","color","thickness","isMultiline","Multiline","rotateAngle","isReadOnly","isRequired","alignment","options","getListValues","maxLength","MaxLength","visibility","Visible","isItalic","isBold","isStrikeout","isUnderline","formFieldCollections","fieldType","getFormFieldType","IsRequired","addedElement1","formDesignerModule","addFormField","parentElement","style","childNodes","disabled","addSignaturePath","Value","renderExistingAnnnot","isLoadedFormFieldAdded","field","createFormFields","inputField","currentField","signCount","divElement","createParentElement","font_1","transform","applyPosition","InsertSpaces","zoomFactor","getZoomFactor","font_2","letterSpacing","paddingLeft","j","type","ToolTip","setToolTip","applyCommonProperties","checkIsReadonly","applyTabIndex","checkIsRequiredField","applyDefaultColor","updateFormFieldsCollection","appendChild","position","addEventListener","focusFormFields","bind","blurFormFields","updateFormFields","changeFormFields","updateFormFieldsValue","updateSameFieldsValue","window","sessionStorage","removeItem","documentId","setItemInSessionStorage","isFocusField","focusField","y","getPageHeight","bookmark","goToBookmark","focus","tooltipContent","targetElement","content","appendTo","trim","str","replace","rgba","inParts","substring","indexOf","r","g","b","a","toFixed","outParts","toString","Math","round","forEach","part","join","listItem","push","itemName","itemValue","createElement","background","angle","pageDetails","pageSize","rotation","nextField","signatureFieldNavigate","previousField","nextSign","isNextSignField","signatureFields","getSignField","currentTarget","FormField","uniqueID","getSignatureIndex","currentSignatureIndex","signatureCount","isNextSign","isFirstNavigate","signatureIndex","renderSignatureField","currentSignIndex","curSignIndex","curSignIndexId","signatureFieldData","isRender","annotationModule","findRenderPageList","navigation","goToPage","className","select","setFocus","removeFocus","signatureElement","classList","add","signatureFieldId","remove","formFieldsModule","getFormDesignerSignField","getFormFieldSignField","retreiveFormFieldsData","formFieldCollection","retriveFieldName","retriveCurrentValue","fontName","isCollection","top_2","addedElement","IsReadonly","Selected","SelectedValue","FontFamily","findIndex","el","updateFormFieldValues","formFields","currentElement","cursor","updateDataInSession","GroupName","Text","SelectedList","getSignatureBounds","LineBounds","bound","x","downloadFormFieldsData","datas","fieldDatas","m","validateForm","nonFillableFields","fieldValue","CheckboxIndex","undefined","childItems","childItemsText","m_1","stringify","csData","FontSize","collectionData","Bounds","lineBounds","event","target","backgroundcolor","currentIndex","lastIndexOf","currentColor","slice","fireFocusOutFormField","checked","fireButtonFieldClickEvent","fireFormFieldClickEvent","drawSignature","signatureType","fontname","annot","targetBounds","parentElementBounds","targetName","offsetParent","fieldName","Key","elementId","signatureField","nameTable","getBoundingClientRect","drawSignatureWithTool","nextSibling","isInitialFieldToolbarSelection","currentValue","signatureModule","outputString","currentFont","zoomvalue","currentWidth","currentHeight","currentLeft","currentTop","currentPage","nextElementSibling","charAt","signString","saveImageString","signatureFontFamily","signatureFontSize","rotateAngleString","getSignBounds","signatureFitMode","getDefaultBoundsforSign","modifiedDate","shapeAnnotationType","opacity","annotName","comments","review","state","stateModel","author","textWidth","getTextWidth","widthRatio","getFontSize","floor","image","Image","src","difference","hightDifference","heightRatio","abs","signatureBounds","updateSignatureAspectRatio","obj","wrapper","children","currentSignatureAnnot","addSignatureCollection","canvass","renderDrawing","showSignatureDialog","key","updateSignatureDataInSession","pointerEvents","annotation","addAction","fireSignatureAdd","hideSignaturePanel","_loop_1","formFieldIndex","this_1","signatureBound","updateFormFieldCollections","updateFormFieldPropertiesChanges","isDraw","signatureId","signIcon","signLeft","which","tabIndex","currentFields","getElementsByClassName","preventDefault","textLayer_1","istabindexed","tabindex","l","contains","currentTarget_1","calculateSignatureBounds","signatureCavasWidth","signatureCavasHeight","newdifferenceX","newdifferenceY","isSignature","ratioX","ratioY","isSignatureStretched","isHeightStretched","leftDifference","topDifference","handWrittenSignatureSettings","fieldWidth","clientWidth","fieldHeight","clientHeight","fieldWidthRatio","fieldHeightRatio","canvasWidthRatio","canvasHeightRatio","fieldRotation","RotationAngle","ratioDifference","currentLeftDiff","currentTopDiff","leftValueDiff","topValueDiff","minimumX","minimumY","maximumX","maximumY","signatureCanvas","val","point1","point2","signBounds","currentPageNumber","pageDiv","signaturePath","updateDocumentEditedProperty","FormFieldsData","signField","currentType","size","text","childrens","isChildElements","k","selectedOptions","z","index","TextList","getAttribute","list","selectedItem","point","topLeft","updateFormDesignerFieldInSessionStorage","formFieldAnnotationType","removeExistingFormFields","deleteFormField","inputdiv","signIconWidth","signIconHeght","widthDifference","IsSignatureField","zIndex","printContainer","createTextBoxField","createRadioBoxField","createDropDownField","createListBoxField","createSignatureField","createButtonField","resize","addAlignmentPropety","enableAutoComplete","autocomplete","isReadonly","n","enableFormFields","BackColor","FontColor","formFieldsReadOnly","makeformFieldsReadonly","TabIndex","max","min","required","border","BorderColor","BorderWidth","borderStyle","BorderStyle","addBorderStylePropety","textAlign","inputFields","setAttribute","option","selected","innerHTML","MultiSelect","multiple","isInitialField","signIndicator","signatureFieldIndicatorWidth","signatureFieldSettings","signatureIndicatorSettings","span","annotBounds","fieldBounds","isDevice","enableDesktopMode","padding","boxSizing","signData","getBoundsPosition","top_3","fontHeight","fontWeight","setStyleToTextDiv","newBounds","updateSignatureBounds","startsWith","bound_1","tempBounds","signatureFieldElement","deleteAnnotationById","resetFormFields","formFieldData","clearFormFieldStorage","sessionSize","maxSessionSize","storageLength","annotationList","formFieldStorage","getItem","clearFormFields","isFirstRadio","number","destroy","getModuleName","canvas","context","getContext","getComputedStyle","body","measureText"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/form-fields/form-fields.js"],"sourcesContent":["import { Browser, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { splitArrayCollection, processPathData, cornersPointsBeforeRotation } from '@syncfusion/ej2-drawings';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * The `FormFields` module is to render formfields in the PDF document.\n *\n * @hidden\n */\nvar FormFields = /** @class */ (function () {\n    /**\n     * @param viewer\n     * @param base\n     * @param viewer\n     * @param base\n     * @private\n     */\n    function FormFields(viewer, base) {\n        // eslint-disable-next-line\n        this.maintainTabIndex = {};\n        // eslint-disable-next-line\n        this.maintanMinTabindex = {};\n        this.isSignatureField = false;\n        this.isKeyDownCheck = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.readOnlyCollection = [];\n        this.isSignatureRendered = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.signatureFieldCollection = [];\n        this.selectedIndex = [];\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @param pageIndex\n     * @private\n     */\n    FormFields.prototype.renderFormFields = function (pageIndex) {\n        this.maxTabIndex = 0;\n        this.minTabIndex = -1;\n        // eslint-disable-next-line\n        this.data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (this.data) {\n            // eslint-disable-next-line\n            this.formFieldsData = JSON.parse(this.data);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n            var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageIndex);\n            var count = void 0;\n            if (this.formFieldsData !== null && canvasElement !== null && textLayer !== null) {\n                var flag = false;\n                for (var i = 0; i < this.formFieldsData.length; i++) {\n                    var formField = this.formFieldsData[i];\n                    if (!flag && isNullOrUndefined(formField.ActualFieldName) && formField.PageIndex === pageIndex) {\n                        count = parseInt(formField.FieldName.split('_')[1]);\n                        flag = true;\n                    }\n                }\n                for (var i_1 = 0; i_1 < this.formFieldsData.length; i_1++) {\n                    // eslint-disable-next-line\n                    var currentData = this.formFieldsData[i_1];\n                    if (currentData.FieldName !== '') {\n                        if (currentData.IsInitialField) {\n                            currentData.Name = 'InitialField';\n                        }\n                        // eslint-disable-next-line\n                        var font = currentData['Font'];\n                        if (this.pdfViewer.formDesigner) {\n                            if (parseFloat(currentData['PageIndex']) == pageIndex) {\n                                var fontFamily = void 0;\n                                var fontStyle = void 0;\n                                var fontSize = void 0;\n                                if (font !== null && font.Height) {\n                                    fontFamily = font.Name;\n                                    if (font.Italic) {\n                                        fontStyle = 'Italic';\n                                    }\n                                    if (font.Bold) {\n                                        fontStyle = 'Bold';\n                                    }\n                                    if (font.Strikeout) {\n                                        fontStyle = 'Strikethrough';\n                                    }\n                                    if (font.Underline) {\n                                        fontStyle = 'Underline';\n                                    }\n                                    fontSize = this.ConvertPointToPixel(font.Size);\n                                }\n                                var textAlignment = currentData.Alignment === 2 ? 'right' : (currentData.Alignment === 1 ? 'center' : 'left');\n                                var backgroundColor = currentData['BackColor'];\n                                var bounds = currentData['LineBounds'];\n                                var backColor = 'rgba(' + backgroundColor.R + ',' + backgroundColor.G + ',' + backgroundColor.B + ',' + 1 + ')';\n                                if (currentData.IsTransparent === true) {\n                                    backColor = \"rgba(0,0,0,0)\";\n                                }\n                                backColor = this.rgbaToHex(backColor);\n                                // set default color if field have black color as bg.\n                                if (backColor === '#000000ff') {\n                                    backColor = '#daeaf7ff';\n                                }\n                                // eslint-disable-next-line\n                                var fontColor = currentData['FontColor'];\n                                var left = this.ConvertPointToPixel(bounds.X);\n                                var top_1 = this.ConvertPointToPixel(bounds.Y);\n                                var width = this.ConvertPointToPixel(bounds.Width);\n                                var height = this.ConvertPointToPixel(bounds.Height);\n                                var boundArray = { left: left, top: top_1, width: width, height: height };\n                                var isFieldRotated = false;\n                                var rotateFieldAngle = 0;\n                                if (currentData[\"Rotation\"] !== 0) {\n                                    if (currentData[\"RotationAngle\"] === -90 || currentData[\"RotationAngle\"] === -270 || currentData[\"RotationAngle\"] === -180) {\n                                        boundArray = this.getBounds(boundArray, pageIndex, 0, isFieldRotated);\n                                    }\n                                }\n                                else {\n                                    isFieldRotated = true;\n                                    boundArray = this.getBounds(boundArray, pageIndex, 0, isFieldRotated);\n                                    rotateFieldAngle = this.getAngle(pageIndex);\n                                }\n                                var foreColor = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n                                foreColor = this.rgbaToHex(foreColor);\n                                var borderColor = currentData['BorderColor'];\n                                var borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n                                borderRGB = this.rgbaToHex(borderRGB);\n                                var borderWidth = currentData['BorderWidth'];\n                                this.selectedIndex = [];\n                                var elementValue = \"\";\n                                if (currentData.Name === 'RadioButton') {\n                                    elementValue = currentData['Text'] ? currentData['Text'] : currentData['Value'];\n                                }\n                                else {\n                                    elementValue = currentData['Text'];\n                                }\n                                var fieldProperties = {\n                                    bounds: { X: boundArray.left, Y: boundArray.top, Width: boundArray.width, Height: boundArray.height }, pageNumber: parseFloat(currentData['PageIndex']) + 1, name: currentData['ActualFieldName'], tooltip: currentData['ToolTip'],\n                                    value: elementValue, isChecked: currentData['Selected'], isSelected: currentData['Selected'], fontFamily: fontFamily, fontStyle: fontStyle, backgroundColor: backColor, color: foreColor, borderColor: borderRGB, thickness: borderWidth, fontSize: fontSize, isMultiline: currentData.Multiline, rotateAngle: rotateFieldAngle,\n                                    isReadOnly: currentData['IsReadonly'], isRequired: currentData['IsRequired'], alignment: textAlignment, options: this.getListValues(currentData), selectedIndex: this.selectedIndex, maxLength: currentData.MaxLength, visibility: currentData.Visible === 1 ? \"hidden\" : \"visible\", font: { isItalic: !isNullOrUndefined(font) ? font.Italic : false, isBold: !isNullOrUndefined(font) ? font.Bold : false, isStrikeout: !isNullOrUndefined(font) ? font.Strikeout : false, isUnderline: !isNullOrUndefined(font) ? font.Underline : false }\n                                };\n                                if (!currentData.id && this.pdfViewer.formFieldCollections[i_1] && !isNullOrUndefined(currentData['ActualFieldName'])) {\n                                    fieldProperties.id = this.pdfViewer.formFieldCollections[i_1].id;\n                                }\n                                if (currentData.Name === 'DropDown' || currentData.Name === 'ListBox') {\n                                    fieldProperties.value = currentData['SelectedValue'];\n                                }\n                                // eslint-disable-next-line\n                                var fieldType = this.getFormFieldType(currentData);\n                                if (currentData.Name !== 'SignatureText' || currentData.Name !== 'SignatureImage') {\n                                    if (!isNullOrUndefined(this.getFormFieldType(currentData))) {\n                                        if (currentData.IsRequired) {\n                                            var thickness = fieldProperties.thickness;\n                                            thickness = thickness > 0 ? thickness : 1;\n                                            fieldProperties.thickness = thickness;\n                                        }\n                                        var addedElement1 = this.pdfViewer.formDesignerModule.addFormField(fieldType, fieldProperties, false, fieldProperties.id);\n                                        if (addedElement1 && addedElement1.parentElement) {\n                                            currentData.id = addedElement1.parentElement.id.split('_')[0];\n                                        }\n                                        if (addedElement1.style.visibility === \"hidden\") {\n                                            addedElement1.childNodes[0].disabled = true;\n                                        }\n                                    }\n                                }\n                                if (fieldType === 'SignatureField' || fieldType === 'InitialField') {\n                                    this.addSignaturePath(currentData, count);\n                                    if (!isNullOrUndefined(currentData.Value)) {\n                                        this.renderExistingAnnnot(currentData, parseFloat(currentData['PageIndex']) + 1, null, isFieldRotated);\n                                        this.isSignatureRendered = true;\n                                        count++;\n                                    }\n                                }\n                                this.pdfViewerBase.isLoadedFormFieldAdded = true;\n                            }\n                        }\n                        else {\n                            // eslint-disable-next-line\n                            if (parseFloat(currentData['PageIndex']) == pageIndex) {\n                                // eslint-disable-next-line\n                                var field = this.createFormFields(currentData, pageIndex, i_1, null, count);\n                                var inputField = field.currentField;\n                                var signCount = field.count;\n                                if (inputField) {\n                                    // eslint-disable-next-line\n                                    var divElement = this.createParentElement(currentData, pageIndex);\n                                    // eslint-disable-next-line\n                                    var bounds = currentData['LineBounds'];\n                                    // eslint-disable-next-line\n                                    var font_1 = currentData['Font'];\n                                    // eslint-disable-next-line\n                                    var isFieldRotated = false;\n                                    var rotateAngle = 0;\n                                    if (currentData['Rotation'] === 0) {\n                                        isFieldRotated = true;\n                                        rotateAngle = this.getAngle(pageIndex);\n                                        if (divElement) {\n                                            divElement.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                        else {\n                                            inputField.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                    }\n                                    else {\n                                        if (divElement) {\n                                            divElement.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                        else {\n                                            inputField.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                    }\n                                    this.applyPosition(inputField, bounds, font_1, pageIndex, 0, isFieldRotated);\n                                    inputField.InsertSpaces = currentData.InsertSpaces;\n                                    if (inputField.InsertSpaces) {\n                                        var zoomFactor = this.pdfViewerBase.getZoomFactor();\n                                        // eslint-disable-next-line\n                                        var font_2 = ((parseInt(inputField.style.width) / inputField.maxLength) - (parseFloat(inputField.style.fontSize) / 2)) - (0.6 * zoomFactor);\n                                        // eslint-disable-next-line\n                                        inputField.style.letterSpacing = '' + font_2 + 'px';\n                                        inputField.style.fontFamily = 'monospace';\n                                        inputField.style.paddingLeft = (font_2 / 2) + 'px';\n                                    }\n                                    // eslint-disable-next-line\n                                    currentData['uniqueID'] = this.pdfViewer.element.id + 'input_' + pageIndex + '_' + i_1;\n                                    for (var j = 0; j < this.pdfViewer.formFieldCollections.length; j++) {\n                                        if ((inputField.type === 'text' || inputField.type === 'password' || inputField.type === 'textarea') && currentData.Name !== 'SignatureField') {\n                                            if (currentData['uniqueID'] === this.pdfViewer.formFieldCollections[j].id) {\n                                                this.pdfViewer.formFieldCollections[j].value = currentData['Text'];\n                                            }\n                                        }\n                                    }\n                                    if (isNullOrUndefined(currentData.Value)) {\n                                        currentData.Value = currentData['Text'];\n                                    }\n                                    if (currentData.ToolTip) {\n                                        this.setToolTip(currentData.ToolTip, inputField);\n                                    }\n                                    this.applyCommonProperties(inputField, pageIndex, i_1, currentData, isFieldRotated);\n                                    this.checkIsReadonly(currentData, inputField);\n                                    this.applyTabIndex(currentData, inputField, pageIndex);\n                                    this.checkIsRequiredField(currentData, inputField);\n                                    this.applyDefaultColor(inputField);\n                                    this.updateFormFieldsCollection(currentData);\n                                    if (divElement) {\n                                        divElement.appendChild(inputField);\n                                        textLayer.appendChild(divElement);\n                                    }\n                                    else {\n                                        inputField.style.position = 'absolute';\n                                        textLayer.appendChild(inputField);\n                                    }\n                                    inputField.addEventListener('focus', this.focusFormFields.bind(this));\n                                    inputField.addEventListener('blur', this.blurFormFields.bind(this));\n                                    inputField.addEventListener('click', this.updateFormFields.bind(this));\n                                    inputField.addEventListener('change', this.changeFormFields.bind(this));\n                                    inputField.addEventListener('keydown', this.updateFormFieldsValue.bind(this));\n                                    inputField.addEventListener('keyup', this.updateSameFieldsValue.bind(this));\n                                    count = signCount;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (!this.pdfViewer.formDesigner) {\n                    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_formfields');\n                    this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData, '_formfields');\n                }\n            }\n        }\n        if (this.pdfViewerBase.isFocusField && this.pdfViewerBase.focusField) {\n            var currentField = document.getElementById(this.pdfViewerBase.focusField.id);\n            if (currentField) {\n                if ((this.pdfViewerBase.focusField.type === \"SignatureField\" || this.pdfViewerBase.focusField.type === \"InitialField\") && this.pdfViewer.formDesignerModule) {\n                    var y = this.pdfViewerBase.focusField.bounds.y;\n                    var height = this.pdfViewerBase.getPageHeight(this.pdfViewerBase.focusField.pageIndex);\n                    this.pdfViewer.bookmark.goToBookmark(this.pdfViewerBase.focusField.pageIndex, height - y);\n                }\n                else {\n                    currentField.focus();\n                }\n                this.pdfViewerBase.isFocusField = false;\n                this.pdfViewerBase.focusField = [];\n            }\n        }\n    };\n    FormFields.prototype.setToolTip = function (tooltipContent, targetElement) {\n        //initialize tooltip component\n        var tooltip = new Tooltip({\n            content: tooltipContent\n        });\n        // render initialized tooltip\n        tooltip.appendTo(targetElement);\n    };\n    FormFields.prototype.trim = function (str) {\n        return str.replace(/^\\s+|\\s+$/gm, '');\n    };\n    FormFields.prototype.rgbaToHex = function (rgba) {\n        var inParts = rgba.substring(rgba.indexOf(\"(\")).split(\",\");\n        var r = parseInt(this.trim(inParts[0].substring(1)), 10);\n        var g = parseInt(this.trim(inParts[1]), 10);\n        var b = parseInt(this.trim(inParts[2]), 10);\n        var a = parseFloat(parseFloat(this.trim(inParts[3].substring(0, inParts[3].length - 1))).toFixed(2));\n        var outParts = [\n            r.toString(16),\n            g.toString(16),\n            b.toString(16),\n            Math.round(a * 255).toString(16).substring(0, 2)\n        ];\n        // Pad single-digit output values\n        outParts.forEach(function (part, i) {\n            if (part.length === 1) {\n                outParts[i] = '0' + part;\n            }\n        });\n        return ('#' + outParts.join(''));\n    };\n    FormFields.prototype.getListValues = function (currentData) {\n        var listItem = currentData['TextList'];\n        var options = [];\n        for (var i = 0; i < listItem.length; i++) {\n            if (listItem[i] === currentData['SelectedValue'])\n                this.selectedIndex.push(i);\n            options.push({ itemName: listItem[i], itemValue: listItem[i] });\n        }\n        if (this.getFormFieldType(currentData) === 'ListBox') {\n            this.selectedIndex = currentData['SelectedList'];\n        }\n        return options;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createParentElement = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var divElement;\n        // eslint-disable-next-line\n        if (data['Name'] === 'Textbox' || data['Name'] === 'Password') {\n            divElement = document.createElement('div');\n            divElement.style.background = 'white';\n            if (data.InsertSpaces) {\n                divElement.style.background = 'transparent';\n            }\n            // eslint-disable-next-line\n            var bounds = data['LineBounds'];\n            // eslint-disable-next-line\n            var font = data['Font'];\n            // eslint-disable-next-line\n            divElement.style.position = 'absolute';\n            // eslint-disable-next-line\n            var isFieldRotated = false;\n            if (data['Rotation'] === 0) {\n                isFieldRotated = true;\n            }\n            this.applyPosition(divElement, bounds, font, pageIndex, 0, isFieldRotated);\n        }\n        return divElement;\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.getAngle = function (pageIndex) {\n        // eslint-disable-next-line\n        var angle = 0;\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        if (pageDetails && pageDetails.rotation) {\n            switch (pageDetails.rotation) {\n                case 0:\n                    angle = 0;\n                    break;\n                case 1:\n                    angle = 90;\n                    break;\n                case 2:\n                    angle = 180;\n                    break;\n                case 3:\n                    angle = 270;\n                    break;\n            }\n        }\n        return angle;\n    };\n    FormFields.prototype.nextField = function () {\n        this.signatureFieldNavigate(true);\n    };\n    FormFields.prototype.previousField = function () {\n        this.signatureFieldNavigate(false);\n    };\n    FormFields.prototype.signatureFieldNavigate = function (nextSign) {\n        var isNextSignField = nextSign;\n        // eslint-disable-next-line\n        var signatureFields = this.signatureFieldCollection;\n        if (signatureFields.length === 0) {\n            signatureFields = this.getSignField();\n        }\n        // eslint-disable-next-line\n        var currentField;\n        if (this.currentTarget) {\n            for (var i = 0; i < signatureFields.length; i++) {\n                currentField = this.pdfViewer.formDesignerModule ? signatureFields[i].FormField : signatureFields[i];\n                if (this.currentTarget.id === currentField.uniqueID) {\n                    this.currentTarget = document.getElementById(currentField.uniqueID);\n                    this.getSignatureIndex(i, signatureFields.length, isNextSignField);\n                    break;\n                }\n            }\n        }\n        else {\n            if (nextSign) {\n                currentField = this.pdfViewer.formDesignerModule ? signatureFields[0].FormField : signatureFields[0];\n                if (currentField.uniqueID) {\n                    this.currentTarget = document.getElementById(currentField.uniqueID);\n                    this.getSignatureIndex(0, signatureFields.length, isNextSignField, true);\n                }\n            }\n        }\n    };\n    FormFields.prototype.getSignatureIndex = function (currentSignatureIndex, signatureCount, isNextSign, isFirstNavigate) {\n        var signatureIndex = currentSignatureIndex;\n        if (!isFirstNavigate) {\n            if (isNextSign) {\n                signatureIndex++;\n            }\n            else {\n                signatureIndex--;\n            }\n        }\n        if (signatureCount === 1) {\n            this.renderSignatureField(0);\n        }\n        else {\n            if (signatureIndex < signatureCount && signatureIndex >= 0) {\n                this.renderSignatureField(signatureIndex);\n            }\n            else {\n                if (isNextSign) {\n                    if (signatureIndex >= signatureCount) {\n                        this.renderSignatureField(0);\n                    }\n                }\n                else {\n                    if (signatureIndex <= 0) {\n                        this.renderSignatureField(signatureCount - 1);\n                    }\n                }\n            }\n        }\n    };\n    FormFields.prototype.renderSignatureField = function (currentSignIndex) {\n        var curSignIndex = currentSignIndex;\n        // eslint-disable-next-line\n        var signatureFields = this.signatureFieldCollection;\n        // eslint-disable-next-line\n        var currentField;\n        if (curSignIndex < signatureFields.length) {\n            for (var i = 0; i < signatureFields.length; i++) {\n                var curSignIndexId = this.pdfViewer.formDesignerModule ? signatureFields[curSignIndex].FormField.uniqueID : signatureFields[curSignIndex].uniqueID;\n                var signatureFieldData = this.pdfViewer.formDesignerModule ? signatureFields[i].FormField : signatureFields[i];\n                if (curSignIndexId === signatureFieldData.uniqueID) {\n                    var pageIndex = signatureFieldData.PageIndex >= 0 ? signatureFieldData.PageIndex : signatureFieldData.pageNumber;\n                    var isRender = this.pdfViewer.annotationModule.findRenderPageList(pageIndex);\n                    if (!isRender) {\n                        this.pdfViewer.navigation.goToPage(pageIndex);\n                    }\n                    this.currentTarget = document.getElementById(signatureFieldData.uniqueID);\n                    currentField = signatureFieldData;\n                    break;\n                }\n            }\n            if (this.currentTarget === null) {\n                var pageIndex = currentField.PageIndex >= 0 ? currentField.PageIndex : currentField.pageNumber;\n                this.pdfViewer.navigation.goToPage(pageIndex);\n                this.currentTarget = document.getElementById(currentField.uniqueID);\n            }\n            if (this.currentTarget) {\n                if (this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n                    document.getElementById(this.currentTarget.id).focus();\n                    this.pdfViewer.select([this.currentTarget.id], null);\n                }\n                else if (this.currentTarget.className === 'e-pdfviewer-signatureformfields') {\n                    if (this.pdfViewer.formDesignerModule) {\n                        document.getElementById(this.currentTarget.id).parentElement.focus();\n                    }\n                    else {\n                        document.getElementById(this.currentTarget.id).focus();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.setFocus = function (id) {\n        if (!id) {\n            if (this.currentTarget) {\n                document.getElementById(this.currentTarget.id).focus();\n            }\n        }\n        else {\n            this.removeFocus();\n            var signatureElement = document.getElementById(id);\n            signatureElement.classList.add('e-pv-signature-focus');\n        }\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.removeFocus = function () {\n        if (this.signatureFieldCollection) {\n            // eslint-disable-next-line\n            var signatureFields = this.signatureFieldCollection;\n            if (signatureFields.length === 0) {\n                signatureFields = this.getSignField();\n            }\n            for (var i = 0; i < this.signatureFieldCollection.length; i++) {\n                var signatureFieldId = this.pdfViewer.formDesignerModule ? this.signatureFieldCollection[i].FormField.uniqueID : this.signatureFieldCollection[i].uniqueID;\n                var signatureElement = document.getElementById(signatureFieldId);\n                if (signatureElement) {\n                    signatureElement.classList.remove('e-pv-signature-focus');\n                }\n            }\n            if (this.pdfViewer.formFieldsModule.currentTarget) {\n                this.pdfViewer.formFieldsModule.currentTarget.classList.remove('e-pv-signature-focus');\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getSignField = function () {\n        if (this.pdfViewer.formDesignerModule) {\n            this.signatureFieldCollection =\n                this.pdfViewer.formDesignerModule.getFormDesignerSignField(this.signatureFieldCollection);\n        }\n        else {\n            this.signatureFieldCollection = this.getFormFieldSignField();\n        }\n        return this.signatureFieldCollection;\n    };\n    FormFields.prototype.getFormFieldSignField = function () {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        // eslint-disable-next-line\n        var currentData;\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            for (var i = 0; i < formFieldsData.length; i++) {\n                currentData = formFieldsData[i];\n                if (currentData.Name === 'SignatureField') {\n                    // eslint-disable-next-line\n                    currentData['uniqueID'] = this.pdfViewer.element.id + 'input_' + currentData.PageIndex + '_' + i;\n                    this.signatureFieldCollection.push(formFieldsData[i]);\n                }\n            }\n        }\n        return this.signatureFieldCollection;\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.formFieldCollections = function () {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            for (var i = 0; i < formFieldsData.length; i++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[i];\n                // eslint-disable-next-line\n                var type = currentData['Name'];\n                if (this.pdfViewer.formDesignerModule) {\n                    if (currentData.Name !== 'ink' && currentData.Name !== 'SignatureImage' && currentData.Name !== 'SignatureText') {\n                        this.retreiveFormFieldsData(currentData, true);\n                    }\n                }\n                else {\n                    if (currentData.Name !== 'ink') {\n                        // eslint-disable-next-line\n                        var formFieldCollection = { name: this.retriveFieldName(currentData), id: this.pdfViewer.element.id + 'input_' + parseFloat(currentData['PageIndex']) + '_' + i, isReadOnly: false, type: currentData.IsInitialField ? 'InitialField' : type, value: this.retriveCurrentValue(currentData), fontName: '', isRequired: currentData.IsRequired };\n                        this.pdfViewer.formFieldCollections.push(formFieldCollection);\n                    }\n                }\n            }\n        }\n    };\n    FormFields.prototype.retreiveFormFieldsData = function (currentData, isCollection) {\n        var fontFamily;\n        var fontStyle;\n        var fontSize;\n        if (currentData.FieldName !== '') {\n            if (currentData.IsInitialField) {\n                currentData.Name = 'InitialField';\n            }\n            // eslint-disable-next-line\n            var font = currentData['Font'];\n            if (font !== null && font.Height) {\n                fontFamily = font.Name;\n                if (font.Italic) {\n                    fontStyle = 'Italic';\n                }\n                if (font.Bold) {\n                    fontStyle = 'Bold';\n                }\n                if (font.Strikeout) {\n                    fontStyle = 'Strikethrough';\n                }\n                if (font.Underline) {\n                    fontStyle = 'Underline';\n                }\n                fontSize = this.ConvertPointToPixel(font.Size);\n            }\n            var textAlignment = currentData.Alignment === 2 ? 'right' : (currentData.Alignment === 1 ? 'center' : 'left');\n            var backgroundColor = currentData['BackColor'];\n            var bounds = currentData['LineBounds'];\n            var backColor = 'rgba(' + backgroundColor.R + ',' + backgroundColor.G + ',' + backgroundColor.B + ',' + 1 + ')';\n            backColor = this.rgbaToHex(backColor);\n            // set default color if field have black color as bg.\n            if (backColor === '#000000ff') {\n                backColor = '#daeaf7ff';\n            }\n            // eslint-disable-next-line\n            var fontColor = currentData['FontColor'];\n            var left = this.ConvertPointToPixel(bounds.X);\n            var top_2 = this.ConvertPointToPixel(bounds.Y);\n            var width = this.ConvertPointToPixel(bounds.Width);\n            var height = this.ConvertPointToPixel(bounds.Height);\n            var boundArray = { left: left, top: top_2, width: width, height: height };\n            var foreColor = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n            foreColor = this.rgbaToHex(foreColor);\n            var borderColor = currentData['BorderColor'];\n            var borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n            borderRGB = this.rgbaToHex(borderRGB);\n            var borderWidth = currentData['BorderWidth'];\n            this.selectedIndex = [];\n            var fieldProperties = {\n                bounds: { X: boundArray.left, Y: boundArray.top, Width: boundArray.width, Height: boundArray.height }, pageNumber: parseFloat(currentData['PageIndex']) + 1, name: currentData['ActualFieldName'], tooltip: currentData['ToolTip'],\n                value: currentData['Text'], isChecked: currentData['Selected'], isSelected: currentData['Selected'], fontFamily: fontFamily, fontStyle: fontStyle, backgroundColor: backColor, color: foreColor, borderColor: borderRGB, thickness: borderWidth, fontSize: fontSize, isMultiline: currentData.Multiline,\n                isReadOnly: currentData['IsReadonly'], isRequired: currentData['IsRequired'], alignment: textAlignment, options: this.getListValues(currentData), selectedIndex: this.selectedIndex, maxLength: currentData.MaxLength, visibility: currentData.Visible === 1 ? \"hidden\" : \"visible\", font: { isItalic: !isNullOrUndefined(font) ? font.Italic : false, isBold: !isNullOrUndefined(font) ? font.Bold : false, isStrikeout: !isNullOrUndefined(font) ? font.Strikeout : false, isUnderline: !isNullOrUndefined(font) ? font.Underline : false }\n            };\n            if (currentData.Name === 'DropDown' || currentData.Name === 'ListBox') {\n                fieldProperties.value = currentData['SelectedValue'];\n            }\n            // eslint-disable-next-line\n            var fieldType = this.getFormFieldType(currentData);\n            if (fieldType === 'SignatureField' || fieldType === 'InitialField') {\n                this.addSignaturePath(currentData);\n                if (this.isSignatureField) {\n                    fieldProperties.value = currentData.Value;\n                }\n            }\n            var addedElement = this.pdfViewer.formDesignerModule.addFormField(fieldType, fieldProperties, isCollection);\n            return addedElement;\n        }\n        return null;\n    };\n    /**\n     * @param formField\n     * @private\n     */\n    FormFields.prototype.updateFormFieldsCollection = function (formField) {\n        var type = formField['Name'];\n        var formFieldCollection = {\n            name: this.retriveFieldName(formField), id: formField.uniqueID, isReadOnly: formField.IsReadonly, isRequired: formField.IsRequired, isSelected: type === 'CheckBox' ? false : formField.Selected,\n            isChecked: type === 'RadioButton' ? false : formField.Selected, type: type, value: type === 'ListBox' || type === 'DropDown' ? formField.SelectedValue : formField.Value, fontName: formField.FontFamily ? formField.FontFamily : ''\n        };\n        this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function (el) { return el.id === formFieldCollection.id; })] = formFieldCollection;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.updateFormFieldValues = function (formFields) {\n        this.readOnlyCollection.push(formFields.id);\n        if (formFields) {\n            // eslint-disable-next-line\n            var currentElement = document.getElementById(formFields.id);\n            if (currentElement) {\n                if (formFields.isReadOnly) {\n                    currentElement.disabled = true;\n                    currentElement.style.backgroundColor = '';\n                    currentElement.style.cursor = 'default';\n                }\n                else {\n                    if (currentElement.style.backgroundColor === '') {\n                        currentElement.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n                    }\n                    currentElement.disabled = false;\n                    currentElement.style.cursor = '';\n                }\n            }\n            this.updateDataInSession(currentElement);\n        }\n    };\n    /**\n     * @param currentData\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.retriveFieldName = function (currentData) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n            case 'Password':\n            case 'SignatureField':\n            case 'InitialField':\n                currentField = currentData.FieldName;\n                break;\n            case 'RadioButton':\n            case 'CheckBox':\n                currentField = currentData.GroupName;\n                break;\n            case 'DropDown':\n            case 'ListBox':\n                currentField = currentData.Text;\n                break;\n        }\n        return currentField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.retriveCurrentValue = function (currentData) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n            case 'Password':\n                currentField = currentData.Text;\n                break;\n            case 'SignatureField':\n                currentField = currentData.Value;\n                break;\n            case 'RadioButton':\n            case 'CheckBox':\n                currentField = currentData.Selected;\n                break;\n            case 'DropDown':\n                currentField = currentData.SelectedValue;\n                break;\n            case 'ListBox':\n                currentField = currentData.SelectedList;\n                break;\n        }\n        return currentField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getSignatureBounds = function (LineBounds, bounds, pageIndex) {\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        // eslint-disable-next-line\n        var bound = 0;\n        switch (pageDetails.rotation) {\n            case 0:\n                bound = bounds;\n                break;\n            case 1:\n                bound = { x: bounds.x + LineBounds.Width + (bounds.width / 3.5), y: pageDetails.width - LineBounds.X + (bounds.height / 4) };\n                break;\n            case 2:\n                bound = { x: pageDetails.width - bounds.x - bounds.width, y: pageDetails.height - bounds.y - bounds.height };\n                break;\n            case 3:\n                bound = { x: bounds.y - (bounds.width / 2) + bounds.height, y: bounds.x + (bounds.width / 3) };\n                break;\n        }\n        return bound;\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.downloadFormFieldsData = function () {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            // eslint-disable-next-line\n            var datas = {};\n            var fieldDatas = [];\n            for (var m = 0; m < formFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[m];\n                var isRequired = currentData.IsRequired;\n                if (currentData.Name === 'Textbox' || currentData.Name === 'Password' || currentData.Multiline) {\n                    if (isRequired && (currentData.Text === '' || currentData.Text === null)) {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.FieldName] = currentData.Text;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.FieldName]);\n                    }\n                    fieldDatas = { fieldValue: currentData.Text, isReadOnly: currentData.IsReadonly };\n                    datas[currentData.FieldName] = fieldDatas;\n                }\n                else if (currentData.Name === 'RadioButton' && currentData.Selected) {\n                    if (isRequired && currentData.Selected === false) {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.GroupName] = currentData.Value;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.GroupName]);\n                    }\n                    fieldDatas = { fieldValue: currentData.Value, isReadOnly: currentData.IsReadonly };\n                    datas[currentData.GroupName] = fieldDatas;\n                }\n                else if (currentData.Name === 'CheckBox') {\n                    if (isRequired && currentData.Selected === false) {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.GroupName] = currentData.Selected;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.GroupName]);\n                    }\n                    if (currentData.CheckboxIndex && currentData.Selected) {\n                        fieldDatas = { fieldValue: currentData.CheckboxIndex, isReadOnly: currentData.IsReadonly };\n                        datas[currentData.GroupName] = fieldDatas;\n                    }\n                    else if (datas[currentData.GroupName] === undefined || datas[currentData.GroupName] === null) {\n                        fieldDatas = { fieldValue: currentData.Selected, isReadOnly: currentData.IsReadonly };\n                        datas[currentData.GroupName] = fieldDatas;\n                    }\n                }\n                else if (currentData.Name === 'DropDown') {\n                    if (isRequired && currentData.SelectedValue === '') {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.Text] = currentData.SelectedValue;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.Text]);\n                    }\n                    fieldDatas = { fieldValue: currentData.SelectedValue, isReadOnly: currentData.IsReadonly };\n                    datas[currentData.Text] = fieldDatas;\n                }\n                else if (currentData.Name === 'ListBox') {\n                    // eslint-disable-next-line\n                    var childItems = currentData['TextList'];\n                    var childItemsText = [];\n                    for (var m_1 = 0; m_1 < currentData.SelectedList.length; m_1++) {\n                        // eslint-disable-next-line\n                        var currentElement = currentData.SelectedList[m_1];\n                        childItemsText.push(childItems[currentElement]);\n                    }\n                    fieldDatas = { fieldValue: JSON.stringify(childItemsText), isReadOnly: currentData.IsReadonly };\n                    datas[currentData.Text] = fieldDatas;\n                }\n                else if (currentData.Name === 'SignatureField' || currentData.Name === 'InitialField') {\n                    // eslint-disable-next-line\n                    var csData = void 0;\n                    if (currentData.Value === null || currentData.Value === '') {\n                        this.addSignaturePath(currentData);\n                    }\n                    if (currentData.Value && currentData.Value !== '') {\n                        csData = currentData.Value;\n                        var fontFamily = currentData.fontFamily ? currentData.fontFamily : currentData.FontFamily;\n                        if (fontFamily) {\n                            datas[currentData.FieldName + 'fontName'] = fontFamily;\n                            datas[currentData.FieldName + 'fontSize'] = currentData.fontSize ? currentData.fontSize : currentData.FontSize;\n                        }\n                        else if (currentData.Value.split('base64,')[1]) {\n                            datas[currentData.FieldName + 'ImageData'] = true;\n                        }\n                        else {\n                            // eslint-disable-next-line\n                            var collectionData = processPathData(currentData.Value);\n                            csData = splitArrayCollection(collectionData);\n                        }\n                    }\n                    if (isRequired && currentData.Value === null || currentData.Value === '') {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.FieldName] = JSON.stringify(csData);\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.FieldName]);\n                    }\n                    datas[currentData.FieldName] = JSON.stringify(csData);\n                    if (currentData.Bounds) {\n                        // eslint-disable-next-line\n                        var bounds = this.getSignatureBounds(currentData.LineBounds, currentData.Bounds, currentData.PageIndex);\n                        currentData.Bounds.x = bounds.x;\n                        currentData.Bounds.y = bounds.y;\n                        datas[currentData.FieldName + 'bounds'] = JSON.stringify(currentData.Bounds);\n                    }\n                    else {\n                        // eslint-disable-next-line\n                        var lineBounds = currentData.LineBounds;\n                        // eslint-disable-next-line\n                        var bounds = { x: this.ConvertPointToPixel(lineBounds.X), y: this.ConvertPointToPixel(lineBounds.Y), width: this.ConvertPointToPixel(lineBounds.Width), height: this.ConvertPointToPixel(lineBounds.Height) };\n                        datas[currentData.FieldName + 'bounds'] = JSON.stringify(bounds);\n                    }\n                    datas[currentData.FieldName + 'isReadOnly'] = currentData.IsReadonly;\n                }\n            }\n            return (JSON.stringify(datas));\n        }\n    };\n    FormFields.prototype.focusFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        // eslint-disable-next-line\n        if (currentTarget && (currentTarget.className !== 'e-pdfviewer-signatureformfields' && currentTarget.className !== 'e-pdfviewer-signatureformfields e-pv-signature-focus')) {\n            // eslint-disable-next-line\n            var backgroundcolor = currentTarget.style.backgroundColor;\n            // eslint-disable-next-line\n            var currentIndex = backgroundcolor.lastIndexOf(',');\n            // eslint-disable-next-line\n            var currentColor = backgroundcolor.slice(0, currentIndex + 1) + 0 + ')';\n            currentTarget.style.backgroundColor = currentColor;\n        }\n        else if (currentTarget) {\n            // eslint-disable-next-line\n            if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature  e-pv-signature-focus') {\n                this.setFocus(currentTarget.id);\n            }\n        }\n    };\n    FormFields.prototype.blurFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        if (currentTarget.InsertSpaces && this.isKeyDownCheck) {\n            // eslint-disable-next-line\n            var font = parseInt(currentTarget.style.width) - (parseInt(currentTarget.style.height) / 2);\n            currentTarget.style.width = '' + font + 'px';\n            this.isKeyDownCheck = false;\n        }\n        if (currentTarget.type === 'checkbox') {\n            this.pdfViewer.fireFocusOutFormField(currentTarget.name, currentTarget.checked);\n        }\n        else {\n            this.pdfViewer.fireFocusOutFormField(currentTarget.name, currentTarget.value);\n        }\n        // eslint-disable-next-line\n        var backgroundcolor = currentTarget.style.backgroundColor;\n        // eslint-disable-next-line\n        var currentIndex = backgroundcolor.lastIndexOf(',');\n        // eslint-disable-next-line\n        var currentColor = backgroundcolor.slice(0, currentIndex + 1) + 0.2 + ')';\n        currentTarget.style.backgroundColor = currentColor;\n    };\n    FormFields.prototype.updateFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        if (currentTarget.className === 'e-pdfviewer-ListBox') {\n            currentTarget = currentTarget.parentElement;\n            this.updateDataInSession(currentTarget);\n        }\n        else if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n            this.currentTarget = currentTarget;\n        }\n        else if (currentTarget.className === 'e-pv-buttonItem' || currentTarget.type === 'button') {\n            this.pdfViewer.fireButtonFieldClickEvent(currentTarget.value, currentTarget.name, currentTarget.id);\n        }\n        for (var m = 0; m < this.pdfViewer.formFieldCollections.length; m++) {\n            if (currentTarget.id === this.pdfViewer.formFieldCollections[m].id) {\n                if (this.pdfViewer.formDesignerModule || this.pdfViewer.annotationModule) {\n                    this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', this.pdfViewer.formFieldCollections[m]);\n                }\n                // eslint-disable-next-line\n                if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature  e-pv-signature-focus') {\n                    this.setFocus(currentTarget.id);\n                }\n            }\n        }\n    };\n    /**\n     * @param signatureType\n     * @param value\n     * @param target\n     * @param fontname\n     * @param signatureType\n     * @param value\n     * @param target\n     * @param fontname\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.drawSignature = function (signatureType, value, target, fontname) {\n        var annot;\n        // eslint-disable-next-line\n        var bounds;\n        var targetBounds;\n        var parentElementBounds;\n        var data;\n        if (this.pdfViewer.formDesigner) {\n            data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n        }\n        else {\n            data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        }\n        var formFieldsData = JSON.parse(data);\n        var targetName = target ? target.name ? target.name : target.offsetParent.name : this.currentTarget.name;\n        for (var i = 0; i < formFieldsData.length; i++) {\n            var fieldName = this.pdfViewer.formDesigner ? formFieldsData[i].FormField.name : formFieldsData[i].FieldName;\n            if (this.pdfViewer.formDesigner ? fieldName === targetName : fieldName === targetName && (!isNullOrUndefined(formFieldsData[i].ActualFieldName))) {\n                target = this.pdfViewer.formDesigner ? document.getElementById(formFieldsData[i].Key.split(\"_\")[0]) : document.getElementById(formFieldsData[i].uniqueID);\n                // eslint-disable-next-line\n                var currentField = target;\n                var elementId = currentField.offsetParent.offsetParent.id.split(\"_\")[0];\n                var signatureField = this.pdfViewer.nameTable[elementId];\n                if (target && target.offsetParent && signatureField) {\n                    targetBounds = target.getBoundingClientRect();\n                    parentElementBounds = target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n                    this.pdfViewerBase.drawSignatureWithTool = true;\n                    if (target.nextSibling && target.nextSibling.id.indexOf(\"initial\") !== -1) {\n                        this.pdfViewer.isInitialFieldToolbarSelection = true;\n                    }\n                }\n                var currentValue = value ? value : this.pdfViewerBase.signatureModule.outputString;\n                var currentFont = fontname ? fontname : this.pdfViewerBase.signatureModule.fontName;\n                var zoomvalue = this.pdfViewerBase.getZoomFactor();\n                var currentWidth = this.pdfViewerBase.drawSignatureWithTool ? targetBounds.width / zoomvalue : parseFloat(currentField.style.width) / zoomvalue;\n                var currentHeight = this.pdfViewerBase.drawSignatureWithTool ? targetBounds.height / zoomvalue : parseFloat(currentField.style.height) / zoomvalue;\n                var currentLeft = this.pdfViewerBase.drawSignatureWithTool ? ((targetBounds.left - parentElementBounds.left)) / zoomvalue : parseFloat(currentField.style.left) / zoomvalue;\n                var currentTop = this.pdfViewerBase.drawSignatureWithTool ? ((targetBounds.top - parentElementBounds.top)) / zoomvalue : parseFloat(currentField.style.top) / zoomvalue;\n                var currentPage = this.pdfViewerBase.drawSignatureWithTool ? target.nextElementSibling ? parseFloat(target.nextElementSibling.id.split(\"_\")[0].charAt(target.nextElementSibling.id.split(\"_\")[0].length - 1)) : parseFloat(currentField.id.split('_')[1]) : parseFloat(currentField.id.split('_')[1]);\n                var currentIndex = this.pdfViewerBase.drawSignatureWithTool ? target.nextElementSibling ? parseFloat(target.nextElementSibling.id.split('_')[1]) : parseFloat(currentField.id.split('_')[2]) : parseFloat(currentField.id.split('_')[2]);\n                var signString = this.pdfViewerBase.signatureModule.saveImageString;\n                var signatureFontFamily = void 0;\n                var signatureFontSize = void 0;\n                var rotateAngleString = currentField.offsetParent.offsetParent.style.transform ? currentField.offsetParent.offsetParent.style.transform : currentField.style.transform;\n                rotateAngleString = rotateAngleString.substring(rotateAngleString.indexOf(\"(\") + 1, rotateAngleString.indexOf(\"d\"));\n                var rotateAngle = rotateAngleString ? parseInt(rotateAngleString) : 0;\n                if (signatureType === 'Type') {\n                    if (!currentFont) {\n                        currentFont = 'Helvetica';\n                    }\n                    // eslint-disable-next-line\n                    bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                    if (this.pdfViewer.signatureFitMode === 'Default') {\n                        bounds = this.getDefaultBoundsforSign(bounds);\n                    }\n                    annot = {\n                        // eslint-disable-next-line max-len\n                        id: currentField.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage, data: currentValue, modifiedDate: '',\n                        shapeAnnotationType: 'SignatureText', opacity: 1, rotateAngle: rotateAngle, annotName: 'SignatureText', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }, fontFamily: currentFont, fontSize: rotateAngle === 90 || rotateAngle === 270 ? (bounds.width / 2) : (bounds.height / 2)\n                    };\n                    if (annot.shapeAnnotationType === 'SignatureText') {\n                        var textWidth = this.getTextWidth(annot.data, annot.fontSize, annot.fontFamily);\n                        var widthRatio = 1;\n                        if (textWidth > bounds.width)\n                            widthRatio = bounds.width / textWidth;\n                        annot.fontSize = this.getFontSize(Math.floor((annot.fontSize * widthRatio)));\n                    }\n                    signString = annot.data;\n                    signatureFontFamily = annot.fontFamily;\n                    signatureFontSize = annot.fontSize;\n                }\n                else if (signatureType === 'Image') {\n                    // eslint-disable-next-line\n                    bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                    var image = new Image();\n                    image.src = currentValue;\n                    if (this.pdfViewer.signatureFitMode === 'Default') {\n                        // To check whether the image shape is square or rectangle\n                        var difference = 20;\n                        var hightDifference = 4;\n                        var heightRatio = 2;\n                        if (Math.abs(image.height - image.width) < difference) {\n                            if (bounds.width > bounds.height) {\n                                bounds.x = bounds.x + (bounds.width / heightRatio) - (bounds.height / heightRatio);\n                                bounds.width = bounds.height;\n                            }\n                            else {\n                                bounds.y = bounds.y + (bounds.height / heightRatio) - (bounds.width / heightRatio);\n                                bounds.height = bounds.width;\n                            }\n                        }\n                        else {\n                            if (bounds.width > bounds.height) {\n                                bounds.y = bounds.y + (bounds.height / hightDifference);\n                                bounds.x = bounds.x + (bounds.height / hightDifference);\n                                var height = bounds.height / heightRatio;\n                                bounds = { x: bounds.x, y: bounds.y, width: bounds.width - height, height: bounds.height - height };\n                            }\n                            else {\n                                bounds.y = bounds.y + (bounds.height / hightDifference);\n                                bounds.height = bounds.height / heightRatio;\n                            }\n                        }\n                    }\n                    annot = {\n                        // eslint-disable-next-line max-len\n                        id: currentField.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage, data: currentValue, modifiedDate: '',\n                        shapeAnnotationType: 'SignatureImage', opacity: 1, rotateAngle: rotateAngle, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                    };\n                    signString = annot.data;\n                }\n                else {\n                    if ((currentValue.indexOf('base64')) !== -1) {\n                        // eslint-disable-next-line\n                        bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                        if (this.pdfViewer.signatureFitMode === 'Default') {\n                            bounds = this.getDefaultBoundsforSign(bounds);\n                        }\n                        annot = {\n                            // eslint-disable-next-line max-len\n                            id: currentField.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage, data: currentValue, modifiedDate: '',\n                            shapeAnnotationType: 'SignatureImage', opacity: 1, rotateAngle: rotateAngle, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                        };\n                        signString = annot.data;\n                    }\n                    else {\n                        // eslint-disable-next-line\n                        if (this.pdfViewer.signatureFitMode === 'Default') {\n                            // eslint-disable-next-line\n                            var signatureBounds = this.updateSignatureAspectRatio(currentValue, false, currentField);\n                            // eslint-disable-next-line\n                            bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, signatureBounds.width, signatureBounds.height, true);\n                            bounds.x = bounds.x + signatureBounds.left;\n                            bounds.y = bounds.y + signatureBounds.top;\n                        }\n                        else {\n                            bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                        }\n                        annot = {\n                            // eslint-disable-next-line max-len\n                            id: currentField.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage, data: currentValue, modifiedDate: '',\n                            shapeAnnotationType: 'Path', opacity: 1, rotateAngle: rotateAngle, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                        };\n                    }\n                }\n                if (this.pdfViewerBase.drawSignatureWithTool && signatureField) {\n                    annot.id = signatureField.id + \"_content\";\n                    var obj = this.pdfViewer.add(annot);\n                    signatureField.wrapper.children.push(obj.wrapper);\n                }\n                else {\n                    this.pdfViewer.add(annot);\n                }\n                if (annot && annot.shapeAnnotationType === 'Path' && currentValue !== '') {\n                    this.pdfViewerBase.currentSignatureAnnot = annot;\n                    // eslint-disable-next-line\n                    var position = { currentHeight: currentHeight, currentWidth: currentWidth, currentLeft: currentLeft, currentTop: currentTop };\n                    this.pdfViewerBase.signatureModule.addSignatureCollection(bounds, position);\n                    signString = this.pdfViewerBase.signatureModule.saveImageString;\n                    this.pdfViewerBase.currentSignatureAnnot = null;\n                }\n                // eslint-disable-next-line\n                var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentPage);\n                // eslint-disable-next-line\n                this.pdfViewer.renderDrawing(canvass, currentPage);\n                this.pdfViewerBase.signatureModule.showSignatureDialog(false);\n                if (currentField.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n                    currentField.className = 'e-pdfviewer-signatureformfields-signature e-pv-signature-focus';\n                }\n                else {\n                    currentField.className = 'e-pdfviewer-signatureformfields-signature';\n                }\n                if (this.pdfViewerBase.drawSignatureWithTool && signatureField) {\n                    var key = target.offsetParent.offsetParent.id.split('_')[0] + '_content';\n                    this.updateSignatureDataInSession(annot, key);\n                }\n                else {\n                    this.updateDataInSession(currentField, annot.data, annot.bounds, signatureFontFamily, signatureFontSize);\n                }\n                currentField.style.pointerEvents = 'none';\n                if (this.pdfViewer.annotation) {\n                    this.pdfViewer.annotation.addAction(annot.pageIndex, null, annot, 'FormField Value Change', '', annot, annot);\n                }\n                // eslint-disable-next-line\n                this.pdfViewer.fireSignatureAdd(annot.pageIndex, annot.id, 'HandWrittenSignature', annot.bounds, annot.opacity, null, null, signString);\n                this.pdfViewer.fireFocusOutFormField(currentField.name, currentValue);\n            }\n        }\n        this.pdfViewerBase.signatureModule.hideSignaturePanel();\n        this.pdfViewerBase.drawSignatureWithTool = false;\n        this.pdfViewer.isInitialFieldToolbarSelection = false;\n    };\n    FormFields.prototype.updateSignatureDataInSession = function (annot, key) {\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n        var formFieldsData = JSON.parse(data);\n        var _loop_1 = function (i) {\n            if (formFieldsData[i].Key === key) {\n                var formFieldIndex = this_1.pdfViewer.formFieldCollections.findIndex(function (el) { return el.id === formFieldsData[i].FormField.id.split('_')[0]; });\n                if (annot.shapeAnnotationType === \"SignatureText\") {\n                    formFieldsData[i].FormField.signatureType = \"Text\";\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                    this_1.pdfViewer.nameTable[key].signatureType = \"Text\";\n                    formFieldsData[i].FormField.fontFamily = annot.fontFamily;\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.fontFamily = annot.fontFamily;\n                    this_1.pdfViewer.nameTable[key].fontFamily = annot.fontFamily;\n                    formFieldsData[i].FormField.fontSize = annot.fontSize;\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.fontSize = annot.fontSize;\n                    this_1.pdfViewer.nameTable[key].fontSize = annot.fontSize;\n                    formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Text\" : null;\n                }\n                else if (annot.shapeAnnotationType === \"SignatureImage\") {\n                    formFieldsData[i].FormField.signatureType = \"Image\";\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                    this_1.pdfViewer.nameTable[key].signatureType = \"Image\";\n                    formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Image\" : null;\n                }\n                else {\n                    formFieldsData[i].FormField.signatureType = \"Path\";\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                    this_1.pdfViewer.nameTable[key].signatureType = \"Path\";\n                    formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Path\" : null;\n                }\n                formFieldsData[i].FormField.signatureBound = annot.bounds;\n                this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureBound = annot.bounds;\n                this_1.pdfViewer.nameTable[key].signatureBound = annot.bounds;\n                formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureBound = annot.bounds : null;\n                if (annot.shapeAnnotationType === \"Path\") {\n                    var collectionData = processPathData(annot.data);\n                    var csData = splitArrayCollection(collectionData);\n                    formFieldsData[i].FormField.value = JSON.stringify(csData);\n                    this_1.pdfViewer.nameTable[key].value = annot.data;\n                    this_1.pdfViewer.nameTable[key.split('_')[0]].value = annot.data;\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                    formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].value = JSON.stringify(csData) : null;\n                }\n                else {\n                    formFieldsData[i].FormField.value = annot.data;\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.value = annot.data;\n                    this_1.pdfViewer.nameTable[key.split('_')[0]].value = annot.data;\n                    this_1.pdfViewer.nameTable[key].value = annot.data;\n                    formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].value = annot.data : null;\n                }\n                this_1.pdfViewer.formDesigner.updateFormFieldCollections(formFieldsData[i].FormField);\n                this_1.pdfViewer.formDesigner.updateFormFieldPropertiesChanges(\"formFieldPropertiesChange\", formFieldsData[i].FormField, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, \"\", formFieldsData[i].FormField.value);\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < formFieldsData.length; i++) {\n            _loop_1(i);\n        }\n        this.pdfViewerBase.setItemInSessionStorage(formFieldsData, '_formDesigner');\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.getDefaultBoundsforSign = function (bounds) {\n        return { x: bounds.x + 10, y: bounds.y + 10, width: bounds.width - 21, height: bounds.height - 21 };\n    };\n    /**\n     * @private\n      */\n    // eslint-disable-next-line\n    FormFields.prototype.getSignBounds = function (currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight, isDraw) {\n        // eslint-disable-next-line\n        var bounds;\n        var signatureId = this.pdfViewer.isInitialFieldToolbarSelection ? 'initialIcon' : 'signIcon';\n        var signIcon = document.getElementById(signatureId + currentPage + '_' + currentIndex);\n        var signLeft = signIcon ? parseFloat(signIcon.style.left) * zoomvalue : 0;\n        var difference = (currentLeft * zoomvalue) - (signLeft / zoomvalue);\n        if (rotateAngle === 90 || rotateAngle === 270) {\n            this.rotateAngle = 0;\n            if (signIcon.style.left !== '') {\n                if (isDraw) {\n                    return bounds = { x: currentLeft - (difference / zoomvalue) - zoomvalue, y: currentTop + (difference / zoomvalue) + zoomvalue, width: currentWidth, height: currentHeight };\n                }\n                else {\n                    return bounds = { x: currentLeft - (difference / zoomvalue) - zoomvalue, y: currentTop + (difference / zoomvalue) + zoomvalue, width: currentHeight, height: currentWidth };\n                }\n            }\n            else {\n                difference = 10;\n                if (isDraw) {\n                    return bounds = { x: currentLeft - currentWidth, y: currentTop + currentWidth, width: currentHeight, height: currentWidth };\n                }\n                else {\n                    return bounds = { x: currentLeft - currentWidth - difference / 2, y: currentTop + currentWidth + difference, width: currentHeight, height: currentWidth };\n                }\n            }\n        }\n        else {\n            this.rotateAngle = 0;\n            return bounds = { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight };\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.updateSameFieldsValue = function (event) {\n        if (this.formFieldsData) {\n            for (var i = 0; i < this.formFieldsData.length; i++) {\n                // eslint-disable-next-line\n                var currentField = this.formFieldsData[i];\n                if (event.target.name === currentField.FieldName && event.target.id !== currentField.uniqueID) {\n                    // eslint-disable-next-line\n                    var currentTarget = document.getElementById(this.formFieldsData[i].uniqueID);\n                    if (currentTarget) {\n                        currentTarget.value = event.target.value;\n                    }\n                    else {\n                        currentField.Text = event.target.value;\n                        this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData, '_formfields');\n                    }\n                }\n            }\n        }\n    };\n    FormFields.prototype.updateFormFieldsValue = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        if (currentTarget.InsertSpaces && !this.isKeyDownCheck) {\n            // eslint-disable-next-line\n            var font = parseInt(currentTarget.style.width) + (parseInt(currentTarget.style.height) / 2);\n            currentTarget.style.width = '' + font + 'px';\n            this.isKeyDownCheck = true;\n        }\n        if (event.which === 9 && currentTarget && currentTarget.className === 'e-pdfviewer-formFields') {\n            // eslint-disable-next-line\n            var id = currentTarget.id.split('input_')[1].split('_')[0];\n            if (this.maintainTabIndex[id] === currentTarget.tabIndex) {\n                // eslint-disable-next-line\n                var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (parseInt(id) + 1));\n                if (textLayer) {\n                    // eslint-disable-next-line\n                    var currentFields = textLayer.getElementsByClassName('e-pdfviewer-formFields');\n                    if (currentFields && currentFields.length > 0) {\n                        currentFields[0].focus();\n                        event.preventDefault();\n                    }\n                }\n                else {\n                    var textLayer_1 = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + 0);\n                    // eslint-disable-next-line\n                    var currentFields = textLayer_1.getElementsByClassName('e-pdfviewer-formFields');\n                    for (var m = 0; m < currentFields.length; m++) {\n                        if (currentFields[m].tabIndex === this.maintanMinTabindex['0']) {\n                            currentFields[m].focus();\n                            event.preventDefault();\n                            break;\n                        }\n                    }\n                }\n            }\n            else {\n                // eslint-disable-next-line\n                var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + parseInt(id));\n                // eslint-disable-next-line\n                var currentFields = textLayer.getElementsByClassName('e-pdfviewer-formFields');\n                var istabindexed = true;\n                for (var m = 0; m < currentFields.length; m++) {\n                    istabindexed = false;\n                    if (currentFields[m].tabIndex === (currentTarget.tabIndex + 1)) {\n                        currentFields[m].focus();\n                        istabindexed = true;\n                        event.preventDefault();\n                        break;\n                    }\n                }\n                var tabindex = currentTarget.tabIndex + 1;\n                while (!istabindexed) {\n                    for (var l = 0; l < currentFields.length; l++) {\n                        istabindexed = false;\n                        if (currentFields[l].tabIndex === (tabindex)) {\n                            currentFields[l].focus();\n                            istabindexed = true;\n                            event.preventDefault();\n                            break;\n                        }\n                    }\n                    if (this.maintainTabIndex[id] === tabindex) {\n                        istabindexed = true;\n                    }\n                    tabindex = tabindex + 1;\n                }\n            }\n        }\n        if (event.currentTarget.classList.contains('e-pdfviewer-signatureformfields') ||\n            event.currentTarget.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n            if (event.key === 'Enter') {\n                // eslint-disable-next-line\n                var currentTarget_1 = event.target;\n                for (var m = 0; m < this.pdfViewer.formFieldCollections.length; m++) {\n                    if (currentTarget_1.id === this.pdfViewer.formFieldCollections[m].id) {\n                        this.setFocus(currentTarget_1.id);\n                        this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', this.pdfViewer.formFieldCollections[m]);\n                    }\n                }\n            }\n            else {\n                event.preventDefault();\n            }\n        }\n    };\n    FormFields.prototype.changeFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        this.updateDataInSession(currentTarget);\n    };\n    FormFields.prototype.calculateSignatureBounds = function (signatureCavasWidth, signatureCavasHeight, newdifferenceX, newdifferenceY, isSignature, currentField, currentData) {\n        var ratioX = newdifferenceX / signatureCavasWidth;\n        var ratioY = newdifferenceY / signatureCavasHeight;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        var currentWidth = 0;\n        var currentHeight = 0;\n        var isSignatureStretched = false;\n        var isHeightStretched = false;\n        var leftDifference = 0;\n        var topDifference = 0;\n        if (isSignature) {\n            currentWidth = this.pdfViewer.handWrittenSignatureSettings.width ? this.pdfViewer.handWrittenSignatureSettings.width : 150;\n            currentHeight = this.pdfViewer.handWrittenSignatureSettings.height ? this.pdfViewer.handWrittenSignatureSettings.height : 100;\n        }\n        else {\n            var fieldWidth = currentField ? currentField.style.width === '100%' ? currentField.clientWidth : parseFloat(currentField.style.width) : this.ConvertPointToPixel(currentData.LineBounds.Width);\n            var fieldHeight = currentField ? currentField.style.height === '100%' ? currentField.clientHeight : parseFloat(currentField.style.height) : this.ConvertPointToPixel(currentData.LineBounds.Height);\n            var fieldWidthRatio = fieldWidth / fieldHeight;\n            var fieldHeightRatio = fieldHeight / fieldWidth;\n            var canvasWidthRatio = signatureCavasWidth / signatureCavasHeight;\n            var canvasHeightRatio = signatureCavasHeight / signatureCavasWidth;\n            var fieldRotation = currentField ? currentField.offsetParent.offsetParent.style.transform ? currentField.offsetParent.offsetParent.style.transform : currentField.style.transform : currentData.RotationAngle;\n            if ((fieldWidthRatio > canvasWidthRatio) || (fieldHeightRatio > canvasWidthRatio) || ((Math.abs(fieldWidthRatio - fieldHeightRatio)) <= 1)) {\n                var ratioDifference = 0;\n                if ((fieldHeightRatio > canvasWidthRatio) || ((Math.abs(fieldWidthRatio - fieldHeightRatio)) <= 1)) {\n                    isHeightStretched = true;\n                    ratioDifference = fieldHeightRatio / canvasHeightRatio;\n                }\n                else {\n                    isSignatureStretched = true;\n                    ratioDifference = fieldWidthRatio / canvasWidthRatio;\n                }\n                if (fieldRotation === 'rotate(90deg)' || fieldRotation === 'rotate(270deg)') {\n                    // eslint-disable-next-line\n                    currentWidth = fieldHeight / zoomvalue;\n                    // eslint-disable-next-line\n                    currentHeight = fieldWidth / zoomvalue;\n                }\n                else {\n                    if (isSignatureStretched) {\n                        // eslint-disable-next-line\n                        leftDifference = fieldWidth / zoomvalue;\n                        // eslint-disable-next-line\n                        currentWidth = (fieldWidth / ratioDifference) / zoomvalue;\n                        // eslint-disable-next-line\n                        currentHeight = fieldHeight / zoomvalue;\n                    }\n                    if (isHeightStretched) {\n                        // eslint-disable-next-line\n                        topDifference = fieldHeight / zoomvalue;\n                        // eslint-disable-next-line\n                        currentWidth = fieldWidth / zoomvalue;\n                        // eslint-disable-next-line\n                        currentHeight = (fieldHeight / ratioDifference) / zoomvalue;\n                    }\n                }\n            }\n            else {\n                if (fieldRotation === 'rotate(90deg)' || fieldRotation === 'rotate(270deg)') {\n                    // eslint-disable-next-line\n                    currentWidth = fieldHeight / zoomvalue;\n                    // eslint-disable-next-line\n                    currentHeight = fieldWidth / zoomvalue;\n                }\n                else {\n                    // eslint-disable-next-line\n                    currentWidth = fieldWidth / zoomvalue;\n                    // eslint-disable-next-line\n                    currentHeight = fieldHeight / zoomvalue;\n                }\n            }\n        }\n        var currentLeftDiff = (signatureCavasWidth - newdifferenceX) / 2;\n        var currentTopDiff = (signatureCavasHeight - newdifferenceY) / 2;\n        if (isSignatureStretched) {\n            currentLeftDiff = (currentLeftDiff / signatureCavasWidth) * leftDifference;\n            var leftValueDiff = ((leftDifference * ratioX) - (currentWidth * ratioX)) / 2;\n            currentLeftDiff = currentLeftDiff + leftValueDiff;\n            currentTopDiff = (currentTopDiff / signatureCavasHeight) * currentHeight;\n        }\n        else if (isHeightStretched) {\n            currentLeftDiff = (currentLeftDiff / signatureCavasWidth) * currentWidth;\n            currentTopDiff = (currentTopDiff / signatureCavasHeight) * topDifference;\n            var topValueDiff = ((topDifference * ratioY) - (currentHeight * ratioY)) / 2;\n            currentTopDiff = currentTopDiff + topValueDiff;\n        }\n        else {\n            currentLeftDiff = (currentLeftDiff / signatureCavasWidth) * currentWidth;\n            currentTopDiff = (currentTopDiff / signatureCavasHeight) * currentHeight;\n        }\n        currentWidth = currentWidth * ratioX;\n        currentHeight = currentHeight * ratioY;\n        return { currentLeftDiff: currentLeftDiff, currentTopDiff: currentTopDiff, currentWidth: currentWidth, currentHeight: currentHeight };\n    };\n    /**\n     * @param data\n     * @param isSignature\n     * @param currentField\n     * @param data\n     * @param isSignature\n     * @param currentField\n     * @param data\n     * @param isSignature\n     * @param currentField\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.updateSignatureAspectRatio = function (data, isSignature, currentField, currentData) {\n        // eslint-disable-next-line\n        var collectionData = processPathData(data);\n        // eslint-disable-next-line\n        var csData = splitArrayCollection(collectionData);\n        var minimumX = -1;\n        var minimumY = -1;\n        var maximumX = -1;\n        var maximumY = -1;\n        var signatureCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        var signatureCavasWidth = 0;\n        var signatureCavasHeight = 0;\n        for (var m = 0; m < csData.length; m++) {\n            // eslint-disable-next-line\n            var val = csData[m];\n            if (minimumX === -1) {\n                // eslint-disable-next-line\n                minimumX = parseFloat(val['x'].toString());\n                // eslint-disable-next-line\n                maximumX = parseFloat(val['x'].toString());\n                // eslint-disable-next-line\n                minimumY = parseFloat(val['y'].toString());\n                // eslint-disable-next-line\n                maximumY = parseFloat(val['y'].toString());\n            }\n            else {\n                // eslint-disable-next-line\n                var point1 = parseFloat(val['x'].toString());\n                // eslint-disable-next-line\n                var point2 = parseFloat(val['y'].toString());\n                if (minimumX >= point1) {\n                    minimumX = point1;\n                }\n                if (minimumY >= point2) {\n                    minimumY = point2;\n                }\n                if (maximumX <= point1) {\n                    maximumX = point1;\n                }\n                if (maximumY <= point2) {\n                    maximumY = point2;\n                }\n            }\n        }\n        signatureCavasWidth = signatureCanvas ? signatureCanvas.clientWidth : 650;\n        signatureCavasHeight = signatureCanvas ? signatureCanvas.clientHeight : 300;\n        var newdifferenceX = maximumX - minimumX;\n        var newdifferenceY = maximumY - minimumY;\n        var signBounds = this.calculateSignatureBounds(signatureCavasWidth, signatureCavasHeight, newdifferenceX, newdifferenceY, isSignature, currentField, currentData);\n        if (isSignature) {\n            var zoomvalue = this.pdfViewerBase.getZoomFactor();\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            var currentLeft = ((parseFloat(pageDiv.style.width) / 2) - (signBounds.currentWidth / 2)) / zoomvalue;\n            // eslint-disable-next-line max-len\n            var currentTop = ((parseFloat(pageDiv.style.height) / 2) - (signBounds.currentHeight / 2)) / zoomvalue;\n            return { x: currentLeft, y: currentTop, width: signBounds.currentWidth, height: signBounds.currentHeight };\n        }\n        else {\n            return { left: signBounds.currentLeftDiff, top: signBounds.currentTopDiff, width: signBounds.currentWidth, height: signBounds.currentHeight };\n        }\n    };\n    /**\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.updateDataInSession = function (target, signaturePath, signatureBounds, signatureFontFamily, signatureFontSize) {\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var FormFieldsData = JSON.parse(data);\n            for (var m = 0; m < FormFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = FormFieldsData[m];\n                if (currentData.uniqueID === target.id) {\n                    if (target && target.type === 'text' || target.type === 'password' || target.type === 'textarea') {\n                        var signField = target;\n                        if (signField.classList.contains('e-pdfviewer-signatureformfields') || signField.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n                            if (signaturePath) {\n                                currentData.Value = signaturePath;\n                            }\n                            if (signatureBounds) {\n                                currentData.Bounds = signatureBounds;\n                            }\n                            if (signatureFontFamily) {\n                                currentData.FontFamily = signatureFontFamily;\n                                currentData.FontSize = signatureFontSize;\n                            }\n                        }\n                        else {\n                            currentData.Text = target.value;\n                            currentData.Value = target.value;\n                        }\n                    }\n                    else if (target.type === 'radio') {\n                        for (var l = 0; l < FormFieldsData.length; l++) {\n                            // eslint-disable-next-line\n                            var currentType = FormFieldsData[l];\n                            if (FormFieldsData[l].GroupName === target.name) {\n                                FormFieldsData[l].Selected = false;\n                            }\n                        }\n                        currentData.Selected = true;\n                    }\n                    else if (target.type === 'checkbox') {\n                        for (var l = 0; l < FormFieldsData.length; l++) {\n                            // eslint-disable-next-line\n                            var currentType = FormFieldsData[l];\n                            if (FormFieldsData[l].GroupName === target.name) {\n                                FormFieldsData[l].Selected = false;\n                                // eslint-disable-next-line\n                                var currentTarget = document.getElementById(FormFieldsData[l].uniqueID);\n                                if (currentTarget) {\n                                    if ((currentData.GroupName === target.name) && (currentData.uniqueID !== currentTarget.id)) {\n                                        currentData.Selected = false;\n                                        currentTarget.checked = false;\n                                    }\n                                }\n                            }\n                        }\n                        if (target.checked) {\n                            currentData.Selected = true;\n                        }\n                        else {\n                            currentData.Selected = false;\n                        }\n                    }\n                    else if (target.type === 'select-one' && target.size === 0) {\n                        // eslint-disable-next-line\n                        var currentValue = target.options[target.selectedIndex].text;\n                        // eslint-disable-next-line\n                        var childrens = target.children;\n                        var isChildElements = false;\n                        for (var k = 0; k < childrens.length; k++) {\n                            if (childrens[k].text === currentValue) {\n                                currentData.SelectedValue = currentValue;\n                            }\n                        }\n                    }\n                    else if (target.type === 'select-multiple' || target.size > 0) {\n                        // eslint-disable-next-line\n                        var currentValue = target.selectedOptions;\n                        currentData.SelectedList = [];\n                        for (var z = 0; z < currentValue.length; z++) {\n                            // eslint-disable-next-line\n                            var childrens = target.children;\n                            for (var k = 0; k < childrens.length; k++) {\n                                if (childrens[k] === currentValue[z]) {\n                                    currentData.SelectedList.push(k);\n                                }\n                            }\n                        }\n                        currentData.SelectedValue = target.value;\n                        var index = currentData.TextList ? currentData.TextList.indexOf(target.value) : 0;\n                        currentData.selectedIndex = index > -1 ? index : 0;\n                        currentData.SelectedList = [currentData.selectedIndex];\n                    }\n                    if (target.disabled) {\n                        currentData.IsReadonly = true;\n                    }\n                    this.updateFormFieldsCollection(currentData);\n                    break;\n                }\n                else if (target && target.getAttribute('list') != null && target.type === 'text' && currentData.uniqueID === target.list.id) {\n                    currentData.SelectedValue = target.value;\n                }\n                this.updateFormFieldsCollection(currentData);\n            }\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_formfields');\n            this.pdfViewerBase.setItemInSessionStorage(FormFieldsData, '_formfields');\n        }\n        if (this.pdfViewer.formDesignerModule && target && target.id) {\n            var selectedItem = this.pdfViewer.nameTable[target.id.split('_')[0]];\n            if (selectedItem && selectedItem.wrapper && selectedItem.wrapper.children[0]) {\n                selectedItem.value = target.value;\n                var point = cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;\n                this.pdfViewer.formDesignerModule.updateFormDesignerFieldInSessionStorage(point, selectedItem.wrapper.children[0], selectedItem.formFieldAnnotationType, selectedItem);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.removeExistingFormFields = function () {\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n        var formFieldsData = JSON.parse(data);\n        if (formFieldsData) {\n            for (var i = 0; i < formFieldsData.length; i++) {\n                this.pdfViewer.formDesignerModule.deleteFormField(formFieldsData[i].Key.split('_')[0]);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyCommonProperties = function (inputdiv, pageIndex, index, currentData, isFieldRotated) {\n        // eslint-disable-next-line\n        var inputField = document.getElementById(this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index);\n        if (inputField) {\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n            if (inputdiv.type === 'text' && inputField.parentElement !== textLayer) {\n                inputField.parentElement.remove();\n            }\n            inputField.remove();\n        }\n        // eslint-disable-next-line\n        var signIcon = document.getElementById('signIcon' + pageIndex + '_' + pageIndex);\n        var left = parseFloat(inputdiv.style.left);\n        var top = parseInt(inputdiv.style.top);\n        var width = parseFloat(inputdiv.style.width);\n        var height = parseFloat(inputdiv.style.height);\n        var signIconWidth;\n        var signIconHeght;\n        var hightDifference;\n        var widthDifference;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        if (signIcon && !isFieldRotated) {\n            signIconWidth = parseFloat(signIcon.style.width);\n            signIconHeght = parseFloat(signIcon.style.height);\n            if (signIcon.style.transform == 'rotate(90deg)') {\n                signIcon.style.transform = 'rotate(0deg)';\n                hightDifference = height / 2;\n                widthDifference = signIconWidth * zoomvalue;\n                signIcon.style.left = ((left - (hightDifference - (signIconWidth * zoomvalue))) + (widthDifference / 2)) + 'px';\n            }\n            if (signIcon.style.transform == 'rotate(180deg)') {\n                signIcon.style.transform = 'rotate(0deg)';\n                signIcon.style.left = left + 'px';\n                signIcon.style.top = (top) + 'px';\n            }\n            if (signIcon.style.transform == 'rotate(270deg)') {\n                signIcon.style.transform = 'rotate(0deg)';\n                hightDifference = height / 2;\n                widthDifference = signIconWidth * zoomvalue;\n                signIcon.style.left = ((left - (hightDifference - widthDifference)) + (widthDifference / 2)) + 'px';\n                signIcon.style.top = ((top + (width + (signIconHeght * zoomvalue)) + ((signIconHeght * zoomvalue) / 2))) + 'px';\n            }\n        }\n        if (currentData.IsSignatureField && this.isSignatureField) {\n            inputdiv.className = 'e-pdfviewer-signatureformfields-signature';\n            inputdiv.style.pointerEvents = 'none';\n        }\n        else if (currentData.IsSignatureField) {\n            if (currentData.Value) {\n                inputdiv.className = 'e-pdfviewer-signatureformfields-signature';\n                inputdiv.style.pointerEvents = 'none';\n            }\n            else {\n                inputdiv.className = 'e-pdfviewer-signatureformfields';\n            }\n        }\n        else if (currentData.Name !== 'Button') {\n            inputdiv.className = 'e-pdfviewer-formFields';\n        }\n        inputdiv.id = this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index;\n        inputdiv.style.zIndex = 1000;\n    };\n    /**\n     * @param currentData\n     * @param pageIndex\n     * @param index\n     * @param printContainer\n     * @param currentData\n     * @param pageIndex\n     * @param index\n     * @param printContainer\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.createFormFields = function (currentData, pageIndex, index, printContainer, count) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n                currentField = this.createTextBoxField(currentData, pageIndex, 'text');\n                break;\n            case 'Password':\n                currentField = this.createTextBoxField(currentData, pageIndex, 'password');\n                break;\n            case 'RadioButton':\n                currentField = this.createRadioBoxField(currentData, pageIndex, 'radio');\n                break;\n            case 'CheckBox':\n                currentField = this.createRadioBoxField(currentData, pageIndex, 'checkbox', printContainer);\n                break;\n            case 'DropDown':\n                currentField = this.createDropDownField(currentData, pageIndex, index, printContainer);\n                break;\n            case 'ListBox':\n                currentField = this.createListBoxField(currentData, pageIndex);\n                break;\n            case 'InitialField':\n            case 'SignatureField':\n                currentField = this.createSignatureField(currentData, pageIndex, index, printContainer, count);\n                var isFieldRotated = false;\n                if (currentData['Rotation'] === 0) {\n                    isFieldRotated = true;\n                }\n                if (currentData.Value && currentData.Value !== '') {\n                    this.renderExistingAnnnot(currentData, index, printContainer, isFieldRotated);\n                    this.isSignatureRendered = true;\n                    count++;\n                }\n                break;\n            case 'Button':\n                currentField = this.createButtonField(currentData, pageIndex);\n                break;\n            case 'ink':\n                if (this.pdfViewer.formDesignerModule) {\n                    if (currentData.Value && currentData.Value !== '' && !this.isSignatureRendered) {\n                        this.renderExistingAnnnot(currentData, index, printContainer);\n                    }\n                }\n                break;\n            case 'SignatureText':\n            case 'SignatureImage':\n                if (currentData.Value && currentData.Value !== '' && !this.isSignatureRendered) {\n                    this.renderExistingAnnnot(currentData, index, printContainer);\n                }\n                break;\n        }\n        return { currentField: currentField, count: count };\n    };\n    FormFields.prototype.getFormFieldType = function (currentData) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n                currentField = 'Textbox';\n                break;\n            case 'Password':\n                currentField = 'Password';\n                break;\n            case 'RadioButton':\n                currentField = 'RadioButton';\n                break;\n            case 'CheckBox':\n                currentField = 'CheckBox';\n                break;\n            case 'DropDown':\n                currentField = 'DropDown';\n                break;\n            case 'ListBox':\n                currentField = 'ListBox';\n                break;\n            case 'SignatureField':\n                currentField = 'SignatureField';\n                if (currentData.IsInitialField) {\n                    currentField = 'InitialField';\n                }\n                break;\n            case 'InitialField':\n                currentField = 'InitialField';\n                break;\n        }\n        return currentField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createButtonField = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('input');\n        if (data.Value) {\n            inputField.type = 'image';\n            inputField.src = data.Value;\n        }\n        else {\n            inputField.type = 'button';\n        }\n        inputField.className = 'e-pv-buttonItem';\n        if (data.Text !== '') {\n            inputField.value = data.Text;\n        }\n        else {\n            inputField.value = '';\n        }\n        inputField.name = data.FieldName;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createTextBoxField = function (data, pageIndex, type) {\n        // eslint-disable-next-line\n        var inputField;\n        if (data.Visible === 1) {\n            return;\n        }\n        if (data.Multiline) {\n            inputField = document.createElement('textarea');\n            inputField.style.resize = 'none';\n        }\n        else {\n            inputField = document.createElement('input');\n            inputField.type = type;\n        }\n        if (data.MaxLength > 0) {\n            inputField.maxLength = data.MaxLength;\n        }\n        this.addAlignmentPropety(data, inputField);\n        if (data.Text !== '') {\n            inputField.value = data.Text;\n        }\n        else {\n            inputField.value = '';\n        }\n        if (!this.pdfViewer.enableAutoComplete) {\n            inputField.autocomplete = 'off';\n        }\n        inputField.name = data.FieldName;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.checkIsReadonly = function (data, inputField) {\n        var isReadonly = false;\n        for (var n = 0; n < this.readOnlyCollection.length; n++) {\n            if (inputField.id === this.readOnlyCollection[n]) {\n                isReadonly = true;\n                break;\n            }\n        }\n        if (!this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule && (data.IsInitialField || data.IsSignatureField)) {\n            isReadonly = true;\n        }\n        if (data.IsReadonly || (!this.pdfViewer.enableFormFields) || isReadonly) {\n            inputField.disabled = true;\n            inputField.style.cursor = 'default';\n            inputField.style.backgroundColor = 'transparent';\n        }\n        else {\n            // eslint-disable-next-line\n            var borderColor = data.BackColor;\n            inputField.style.backgroundColor = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 0.2 + ')';\n            // eslint-disable-next-line\n            var fontColor = data.FontColor;\n            inputField.style.color = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n        }\n    };\n    /**\n     * @param isReadonly\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    FormFields.prototype.formFieldsReadOnly = function (isReadonly) {\n        // eslint-disable-next-line\n        var formFields = document.getElementsByClassName('e-pdfviewer-formFields');\n        this.makeformFieldsReadonly(formFields, isReadonly);\n        // eslint-disable-next-line\n        var signatureFields = document.getElementsByClassName('e-pdfviewer-signatureformfields');\n        this.makeformFieldsReadonly(signatureFields, isReadonly);\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.makeformFieldsReadonly = function (formFields, isReadonly) {\n        for (var i = 0; i < formFields.length; i++) {\n            if (formFields[i]) {\n                // eslint-disable-next-line\n                var inputField = formFields[i];\n                if (!isReadonly) {\n                    inputField.disabled = true;\n                    inputField.style.cursor = 'default';\n                }\n                else {\n                    // eslint-disable-next-line\n                    inputField.disabled = false;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyTabIndex = function (data, inputField, pageIndex) {\n        inputField.tabIndex = data.TabIndex;\n        this.maxTabIndex = Math.max(this.maxTabIndex, inputField.tabIndex);\n        if (this.minTabIndex === -1) {\n            this.minTabIndex = inputField.tabIndex;\n        }\n        this.minTabIndex = Math.min(this.minTabIndex, inputField.tabIndex);\n        this.maintainTabIndex[pageIndex.toString()] = this.maxTabIndex;\n        this.maintanMinTabindex[pageIndex.toString()] = this.minTabIndex;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.checkIsRequiredField = function (data, inputField) {\n        if (data.IsRequired) {\n            inputField.required = true;\n            inputField.style.border = '1px solid red';\n        }\n        else {\n            // eslint-disable-next-line\n            var borderColor = data.BorderColor;\n            inputField.style.border = data.BorderWidth;\n            inputField.style.borderColor = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n        }\n        if (inputField.type !== 'checkbox' && inputField.type !== 'radio') {\n            var borderStyle = data.BorderStyle;\n            this.addBorderStylePropety(borderStyle, inputField);\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyDefaultColor = function (inputField) {\n        // eslint-disable-next-line max-len\n        if (inputField.type !== 'button' && (inputField.style.backgroundColor === 'rgba(255, 255, 255, 0.2)' || inputField.style.backgroundColor === 'rgba(0, 0, 0, 0.2)')) {\n            inputField.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n        }\n        if (inputField.style.color === 'rgba(255, 255, 255, 0.2)') {\n            inputField.style.color = 'black';\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.addAlignmentPropety = function (data, inputField) {\n        // eslint-disable-next-line\n        var alignment = data.Alignment;\n        switch (alignment) {\n            case 0:\n                inputField.style.textAlign = 'left';\n                break;\n            case 1:\n                inputField.style.textAlign = 'center';\n                break;\n            case 2:\n                inputField.style.textAlign = 'right';\n                break;\n            case 3:\n                inputField.style.textAlign = 'justify';\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.addBorderStylePropety = function (borderStyle, inputField) {\n        // eslint-disable-next-line\n        switch (borderStyle) {\n            case 0:\n                inputField.style.borderStyle = 'solid';\n                break;\n            case 1:\n                inputField.style.borderStyle = 'dashed';\n                break;\n            case 2:\n                inputField.style.borderStyle = 'outset';\n                break;\n            case 3:\n                inputField.style.borderStyle = 'inset';\n                break;\n            case 4:\n                inputField.style.borderStyle = 'outset';\n                break;\n            case 5:\n                inputField.style.borderStyle = 'dotted';\n                break;\n            case 6:\n                inputField.style.borderStyle = 'inset';\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createRadioBoxField = function (data, pageIndex, type, printContainer) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('input');\n        inputField.type = type;\n        if (data.Selected) {\n            inputField.checked = true;\n        }\n        inputField.name = data.GroupName;\n        inputField.value = data.Value;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createDropDownField = function (data, pageIndex, index, printContainer) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('select');\n        // eslint-disable-next-line\n        var childItems = data['TextList'];\n        if (data.Selected && !printContainer) {\n            // eslint-disable-next-line\n            var previousField = document.getElementById('editableDropdown' + pageIndex + '_' + index);\n            if (previousField) {\n                previousField.remove();\n            }\n            // eslint-disable-next-line\n            var inputFields = document.createElement('input');\n            inputFields.id = 'editableDropdown' + pageIndex + '_' + index;\n            inputFields.setAttribute('list', this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index);\n            // eslint-disable-next-line\n            var bounds = data['LineBounds'];\n            // eslint-disable-next-line\n            var font = data['Font'];\n            inputFields.style.position = 'absolute';\n            inputFields.style.border = '0px';\n            // eslint-disable-next-line\n            this.applyPosition(inputFields, bounds, font, pageIndex, data['Rotation']);\n            inputFields.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n            inputFields.className = 'e-pdfviewer-formFields';\n            if (data.selectedIndex === -1) {\n                inputFields.value = data.SelectedValue;\n            }\n            if (printContainer) {\n                printContainer.appendChild(inputFields);\n            }\n            else {\n                var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n                textLayer.appendChild(inputFields);\n            }\n            inputFields.addEventListener('focus', this.focusFormFields.bind(this));\n            inputFields.addEventListener('blur', this.blurFormFields.bind(this));\n            inputFields.addEventListener('click', this.updateFormFields.bind(this));\n            inputFields.addEventListener('change', this.changeFormFields.bind(this));\n            inputFields.addEventListener('keydown', this.updateFormFieldsValue.bind(this));\n            inputField = document.createElement('DATALIST');\n        }\n        for (var j = 0; j < childItems.length; j++) {\n            // eslint-disable-next-line\n            var option = document.createElement('option');\n            option.className = 'e-dropdownSelect';\n            if (data.SelectedValue === childItems[j] || data.selectedIndex === j) {\n                option.selected = true;\n            }\n            else {\n                option.selected = false;\n            }\n            option.innerHTML = childItems[j];\n            inputField.appendChild(option);\n        }\n        inputField.name = data.Text;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createListBoxField = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('select');\n        // eslint-disable-next-line\n        var childItems = data['TextList'];\n        if (data.MultiSelect) {\n            inputField.multiple = true;\n        }\n        else {\n            inputField.multiple = false;\n            inputField.size = childItems.length;\n        }\n        for (var j = 0; j < childItems.length; j++) {\n            // eslint-disable-next-line\n            var option = document.createElement('option');\n            option.className = 'e-pdfviewer-ListBox';\n            for (var k = 0; k < data.SelectedList.length; k++) {\n                if (data.SelectedList[k] === j) {\n                    option.selected = true;\n                }\n            }\n            option.innerHTML = childItems[j];\n            inputField.appendChild(option);\n        }\n        inputField.name = data.Text;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createSignatureField = function (data, pageIndex, index, printContainer, count) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('input');\n        inputField.type = 'text';\n        inputField.name = data.FieldName;\n        // eslint-disable-next-line\n        var previousField = document.getElementById('signIcon' + pageIndex + '_' + index);\n        if (previousField && !printContainer) {\n            previousField.remove();\n        }\n        this.pdfViewerBase.isInitialField = data.IsInitialField;\n        var signIndicator = this.pdfViewerBase.isInitialField ? \"Initial\" : \"Sign\";\n        //check whether the width for sign indicator has default value or not and then set the default width value for initial field.\n        var signatureFieldIndicatorWidth = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width === 19 ? (this.pdfViewerBase.isInitialField ? 27 : 19) : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width;\n        // eslint-disable-next-line\n        var span = document.createElement('span');\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n        // eslint-disable-next-line\n        var bounds = data['LineBounds'];\n        // eslint-disable-next-line\n        var font = data['Font'];\n        var left = this.ConvertPointToPixel(bounds.X);\n        var top = this.ConvertPointToPixel(bounds.Y);\n        // eslint-disable-next-line max-len\n        var height = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height > bounds.Height / 2 ? bounds.Height / 2 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height;\n        // eslint-disable-next-line max-len\n        var width = signatureFieldIndicatorWidth > bounds.Width / 2 ? bounds.Width / 2 : signatureFieldIndicatorWidth;\n        // eslint-disable-next-line max-len\n        var fontSize = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize > height / 2 ? 10 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize;\n        span.style.position = 'absolute';\n        span.id = 'signIcon' + pageIndex + '_' + index;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        var rotation = this.getAngle(pageIndex);\n        // eslint-disable-next-line\n        var annotBounds = { left: left, top: top, width: width, height: height };\n        // eslint-disable-next-line\n        var fieldBounds = this.getBounds(annotBounds, pageIndex);\n        span.style.transform = 'rotate(' + rotation + 'deg)';\n        span.style.left = fieldBounds.left * zoomvalue + 'px';\n        span.style.top = fieldBounds.top * zoomvalue + 'px';\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            span.style.height = 5 + 'px';\n            span.style.width = 10 + 'px';\n            span.style.fontSize = '3px';\n        }\n        else {\n            span.style.height = height + 'px';\n            span.style.width = width + 'px';\n            span.style.fontSize = fontSize + 'px';\n            if (isBlazor()) {\n                span.style.fontSize = (fontSize - 1) + 'px';\n            }\n        }\n        span.style.padding = '2px';\n        span.style.textAlign = 'center';\n        span.style.boxSizing = 'content-box';\n        // eslint-disable-next-line\n        span.innerHTML = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text : signIndicator;\n        span.style.color = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color : 'black';\n        // eslint-disable-next-line\n        span.style.backgroundColor = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor : 'orange';\n        span.style.opacity = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity : 1;\n        textLayer.appendChild(span);\n        this.addSignaturePath(data, count);\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.addSignaturePath = function (signData, count) {\n        this.isSignatureField = false;\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            for (var m = 0; m < formFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[m];\n                // eslint-disable-next-line max-len\n                if ((currentData.Name === 'ink' || currentData.Name === 'SignatureField' || currentData.Name === 'SignatureImage' || currentData.Name === 'SignatureText') && this.pdfViewer.formDesigner ? currentData.FieldName === signData.ActualFieldName + '_' + count || currentData.FieldName === signData.FieldName + '_' + count : ((currentData.FieldName === signData.FieldName + '_' + count || currentData.FieldName === signData.ActualFieldName + '_' + count) && !isNullOrUndefined(signData.ActualFieldName)) && currentData.Value && currentData.Value !== '') {\n                    signData.Value = currentData.Value;\n                    signData.FontFamily = currentData.FontFamily;\n                    signData.FontSize = currentData.FontSize;\n                    this.isSignatureField = true;\n                    if (!signData.Bounds) {\n                        signData.Bounds = currentData.LineBounds;\n                    }\n                    break;\n                }\n            }\n        }\n        return this.isSignatureField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getBounds = function (bound, pageIndex, rotation, isFieldRotated) {\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        // eslint-disable-next-line\n        var bounds;\n        if (rotation > 0) {\n            bounds = this.getBoundsPosition(rotation, bound, pageDetails, isFieldRotated);\n        }\n        else {\n            bounds = this.getBoundsPosition(pageDetails.rotation, bound, pageDetails, isFieldRotated);\n        }\n        return bounds;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getBoundsPosition = function (rotation, bound, pageDetails, isFieldRotated) {\n        // eslint-disable-next-line\n        var bounds;\n        if (!isFieldRotated) {\n            switch (rotation) {\n                case 90:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.top - bound.height, top: bound.left, width: bound.height, height: bound.width };\n                    break;\n                case 180:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                    break;\n                case 270:\n                    // eslint-disable-next-line\n                    bounds = { left: bound.top, top: pageDetails.height - bound.left - bound.width, width: bound.height, height: bound.width };\n                    break;\n                case 0:\n                    // eslint-disable-next-line\n                    bounds = bound;\n                    break;\n                case 1:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.top - bound.height, top: bound.left, width: bound.height, height: bound.width };\n                    break;\n                case 2:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                    break;\n                case 3:\n                    // eslint-disable-next-line\n                    bounds = { left: bound.top, top: pageDetails.height - bound.left - bound.width, width: bound.height, height: bound.width };\n                    break;\n            }\n            if (!bounds) {\n                bounds = bound;\n            }\n        }\n        else {\n            switch (rotation) {\n                case 0:\n                    // eslint-disable-next-line\n                    bounds = bound;\n                    break;\n                case 1:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.top - bound.height - (bound.width / 2 - bound.height / 2), top: bound.left + (bound.width / 2 - bound.height / 2), width: bound.width, height: bound.height };\n                    break;\n                case 2:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                    break;\n                case 3:\n                    // eslint-disable-next-line\n                    bounds = { left: bound.top - (bound.width / 2 - bound.height / 2), top: (pageDetails.height - bound.left - bound.width + (bound.width / 2 - bound.height / 2)), width: bound.width, height: bound.height };\n                    break;\n            }\n            if (!bounds) {\n                bounds = bound;\n            }\n        }\n        return bounds;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyPosition = function (inputField, bounds, font, pageIndex, rotation, isFieldRotated) {\n        if (bounds) {\n            var left = this.ConvertPointToPixel(bounds.X);\n            var top_3 = this.ConvertPointToPixel(bounds.Y);\n            var width = this.ConvertPointToPixel(bounds.Width);\n            var height = this.ConvertPointToPixel(bounds.Height);\n            var fontHeight = 0;\n            // eslint-disable-next-line\n            var fieldBounds = { left: left, top: top_3, width: width, height: height };\n            // eslint-disable-next-line\n            var annotBounds = this.getBounds(fieldBounds, pageIndex, rotation, isFieldRotated);\n            if (font !== null && font.Height) {\n                inputField.style.fontFamily = font.Name;\n                if (font.Italic) {\n                    inputField.style.fontStyle = 'italic';\n                }\n                if (font.Bold) {\n                    inputField.style.fontWeight = 'Bold';\n                }\n                fontHeight = this.ConvertPointToPixel(font.Size);\n            }\n            this.pdfViewerBase.setStyleToTextDiv(inputField, annotBounds.left, annotBounds.top, fontHeight, annotBounds.width, annotBounds.height, false);\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.renderExistingAnnnot = function (data, index, printContainer, isFieldRotated) {\n        if (!printContainer) {\n            // eslint-disable-next-line\n            var bounds = void 0;\n            if (data.Bounds && data.Name !== 'ink') {\n                bounds = data.Bounds;\n            }\n            else {\n                bounds = data.LineBounds;\n            }\n            var currentLeft = void 0;\n            var currentTop = void 0;\n            var currentWidth = void 0;\n            var currentHeight = void 0;\n            if (bounds.x || bounds.y || bounds.width || bounds.height) {\n                currentLeft = bounds.x;\n                currentTop = bounds.y;\n                currentWidth = bounds.width;\n                currentHeight = bounds.height;\n            }\n            else {\n                currentLeft = this.ConvertPointToPixel(bounds.X);\n                currentTop = this.ConvertPointToPixel(bounds.Y);\n                currentWidth = this.ConvertPointToPixel(bounds.Width);\n                currentHeight = this.ConvertPointToPixel(bounds.Height);\n            }\n            // eslint-disable-next-line\n            var currentPage = parseFloat(data['PageIndex']);\n            // eslint-disable-next-line\n            var bound = { left: currentLeft, top: currentTop, width: currentWidth, height: currentHeight };\n            // eslint-disable-next-line\n            var newBounds = this.updateSignatureBounds(bound, currentPage, isFieldRotated);\n            var annot = void 0;\n            var fontFamily = data.FontFamily ? data.FontFamily : data.fontFamily;\n            // eslint-disable-next-line\n            if ((data.Value.split('base64,')[1])) {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index, bounds: newBounds, pageIndex: currentPage, data: data.Value, modifiedDate: '',\n                    shapeAnnotationType: 'SignatureImage', opacity: 1, rotateAngle: isFieldRotated ? this.getAngle(currentPage) : 0, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                };\n            }\n            else if (fontFamily && !(data.Value && data.Value.startsWith('M') && data.Value.split(',')[1].split(' ')[1].startsWith('L'))) {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index, bounds: newBounds, pageIndex: currentPage, data: data.Value, modifiedDate: '',\n                    shapeAnnotationType: 'SignatureText', opacity: 1, rotateAngle: isFieldRotated ? this.getAngle(currentPage) : 0, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }, fontFamily: data.FontFamily, fontSize: data.FontSize\n                };\n                annot.fontFamily = fontFamily;\n                annot.fontSize = data.FontSize ? data.FontSize : data.fontSize;\n            }\n            else {\n                var bound_1 = newBounds;\n                var tempBounds = { left: newBounds.x, top: newBounds.y, width: newBounds.width, height: newBounds.height };\n                bound_1 = this.updateSignatureBounds(tempBounds, currentPage, false);\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index, bounds: bound_1, pageIndex: currentPage, data: data.Value, modifiedDate: '',\n                    shapeAnnotationType: 'Path', opacity: 1, rotateAngle: 0, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                };\n            }\n            if ((data.Name === 'SignatureField' || data.Name === 'InitialField') && !isNullOrUndefined(data.id)) {\n                var elementId = data.id;\n                var signatureFieldElement = document.getElementById(elementId + '_content_html_element');\n                var signatureField = this.pdfViewer.nameTable[elementId];\n                annot.id = signatureField.id + \"_content\";\n                var obj = this.pdfViewer.add(annot);\n                signatureField.wrapper.children.push(obj.wrapper);\n                if (!isNullOrUndefined(signatureFieldElement) && this.isSignatureField) {\n                    var inputField = signatureFieldElement.children[0].children[0];\n                    inputField.style.pointerEvents = 'none';\n                    inputField.className = 'e-pdfviewer-signatureformfields-signature';\n                    inputField.parentElement.style.pointerEvents = 'none';\n                }\n                else if (!isNullOrUndefined(signatureFieldElement) && data.Value) {\n                    var inputField = signatureFieldElement.children[0].children[0];\n                    inputField.style.pointerEvents = 'none';\n                    inputField.className = 'e-pdfviewer-signatureformfields-signature';\n                    inputField.parentElement.style.pointerEvents = 'none';\n                }\n            }\n            else {\n                var target = document.getElementById(annot.id);\n                if (target && target.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n                    this.pdfViewer.annotation.deleteAnnotationById(annot.id);\n                }\n                this.pdfViewer.add(annot);\n            }\n            data.Bounds = annot.bounds;\n            if (this.pdfViewer.formDesignerModule) {\n                this.updateSignatureDataInSession(annot, annot.id);\n            }\n            // eslint-disable-next-line\n            var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentPage);\n            // eslint-disable-next-line\n            this.pdfViewer.renderDrawing(canvass, currentPage);\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.updateSignatureBounds = function (bound, pageIndex, isFieldRotated) {\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        if (pageDetails) {\n            if (!isFieldRotated) {\n                if (pageDetails.rotation === 1) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.top - bound.height, y: bound.left, width: bound.height, height: bound.width };\n                }\n                else if (pageDetails.rotation === 2) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.left - bound.width, y: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                }\n                else if (pageDetails.rotation === 3) {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.top, y: (pageDetails.height - bound.left - bound.width), width: bound.height, height: bound.width };\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.left, y: bound.top, width: bound.width, height: bound.height };\n                }\n            }\n            else {\n                if (pageDetails.rotation === 1) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.top - bound.height - (bound.width / 2 - bound.height / 2), y: bound.left + (bound.width / 2 - bound.height / 2), width: bound.width, height: bound.height };\n                }\n                else if (pageDetails.rotation === 2) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.left - bound.width, y: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                }\n                else if (pageDetails.rotation === 3) {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.top - (bound.width / 2 - bound.height / 2), y: (pageDetails.height - bound.left - bound.width + (bound.width / 2 - bound.height / 2)), width: bound.width, height: bound.height };\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.left, y: bound.top, width: bound.width, height: bound.height };\n                }\n            }\n        }\n        else {\n            return { x: bound.left, y: bound.top, width: bound.width, height: bound.height };\n        }\n    };\n    FormFields.prototype.resetFormFields = function () {\n        var formFieldData = this.pdfViewer.formFieldCollections;\n        for (var i = 0; i < formFieldData.length; i++) {\n            var currentData = formFieldData[i];\n            this.currentTarget = document.getElementById(currentData.id);\n            if (currentData.type === 'Textbox') {\n                this.currentTarget.value = currentData.value;\n            }\n            else if (currentData.type === 'RadioButton') {\n                this.currentTarget.checked = currentData.value;\n                if (currentData.value) {\n                    this.updateDataInSession(this.currentTarget);\n                }\n            }\n            else if (currentData.type === 'DropDown') {\n                this.currentTarget.value = currentData.value;\n            }\n            else if (currentData.type === 'CheckBox') {\n                this.currentTarget.checked = currentData.value;\n            }\n            else if (currentData.type === 'SignatureField') {\n                // eslint-disable-next-line\n                var annotation = this.pdfViewer.nameTable[currentData.id];\n                if (annotation) {\n                    if (this.currentTarget && this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n                        this.currentTarget.className = 'e-pdfviewer-signatureformfields';\n                        this.currentTarget.style.pointerEvents = '';\n                        this.updateDataInSession(this.currentTarget, '');\n                    }\n                    this.pdfViewer.remove(annotation);\n                    this.pdfViewer.renderDrawing();\n                }\n            }\n            if (currentData.type !== 'RadioButton' && currentData.type !== 'SignatureField') {\n                this.updateDataInSession(this.currentTarget);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.clearFormFieldStorage = function () {\n        // eslint-disable-next-line\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        var maxSessionSize = 4500;\n        if (sessionSize > maxSessionSize) {\n            var storageLength = window.sessionStorage.length;\n            // eslint-disable-next-line\n            var annotationList = [];\n            for (var i = 0; i < storageLength; i++) {\n                if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n                    if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n                        annotationList.push(window.sessionStorage.key(i));\n                    }\n                }\n            }\n            if (annotationList) {\n                for (var i = 0; i < annotationList.length; i++) {\n                    window.sessionStorage.removeItem(annotationList[i]);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.clearFormFields = function (formField) {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = void 0;\n            if (formField) {\n                formFieldsData = [formField];\n            }\n            else {\n                formFieldsData = JSON.parse(data);\n            }\n            var isFirstRadio = true;\n            for (var m = 0; m < formFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[m];\n                if (formField) {\n                    currentData.uniqueID = formField.id;\n                    currentData.Name = formField.type;\n                }\n                // eslint-disable-next-line\n                this.currentTarget = document.getElementById(currentData.uniqueID);\n                if (currentData.Name === 'Textbox') {\n                    this.currentTarget.value = '';\n                }\n                else if (currentData.Name === 'RadioButton') {\n                    if (isFirstRadio) {\n                        this.currentTarget.checked = true;\n                        this.updateDataInSession(this.currentTarget);\n                        isFirstRadio = false;\n                    }\n                }\n                else if (currentData.Name === 'DropDown') {\n                    this.currentTarget.value = currentData.TextList[0];\n                }\n                else if (currentData.Name === 'CheckBox') {\n                    this.currentTarget.checked = false;\n                }\n                else if (currentData.Name === 'SignatureField') {\n                    // eslint-disable-next-line\n                    var annotation = this.pdfViewer.nameTable[currentData.uniqueID];\n                    if (annotation) {\n                        if (this.currentTarget && this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n                            this.currentTarget.className = 'e-pdfviewer-signatureformfields';\n                            this.currentTarget.style.pointerEvents = '';\n                            this.currentTarget.parentElement.style.pointerEvents = '';\n                            this.updateDataInSession(this.currentTarget, '');\n                            if (formField) {\n                                formField.value = '';\n                                formField.signatureType = [formField.signatureType];\n                                formField.signatureType[0] = '';\n                            }\n                        }\n                        this.pdfViewer.remove(annotation);\n                        this.pdfViewer.renderDrawing();\n                    }\n                }\n                if (currentData.Name !== 'SignatureField' && currentData.Name !== 'ink' && currentData.Name !== 'RadioButton') {\n                    this.updateDataInSession(this.currentTarget);\n                }\n            }\n        }\n    };\n    /**\n     * @param number\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.ConvertPointToPixel = function (number) {\n        return (number * (96 / 72));\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.destroy = function () {\n        this.currentTarget = null;\n        this.readOnlyCollection = [];\n        if (this.pdfViewerBase && this.pdfViewerBase.signatureModule)\n            this.pdfViewerBase.signatureModule.destroy();\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.getModuleName = function () {\n        return 'FormFields';\n    };\n    /**\n     * @private\n     * Get the text wdith\n     * @param text\n     * @param font\n     * @param fontFamily\n    */\n    FormFields.prototype.getTextWidth = function (text, font, fontFamily) {\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        var fontName;\n        if (font) {\n            fontName = font + 'px' + ' ' + fontFamily;\n        }\n        context.font = fontName || getComputedStyle(document.body).font;\n        return context.measureText(text).width;\n    };\n    /**\n     * @private\n     * @param {number} fontSize - Font size.\n     * @returns {number} - Returns the font size.\n    */\n    FormFields.prototype.getFontSize = function (fontSize) {\n        return (fontSize % 2 === 0) ? fontSize : --fontSize;\n    };\n    return FormFields;\n}());\nexport { FormFields };\n"],"mappings":"AAAA,SAASA,OAAT,EAAkBC,QAAlB,EAA4BC,iBAA5B,QAAqD,sBAArD;AACA,SAASC,oBAAT,EAA+BC,eAA/B,EAAgDC,2BAAhD,QAAmF,0BAAnF;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,UAAU;AAAG;AAAe,YAAY;EACxC;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,SAASA,UAAT,CAAoBC,MAApB,EAA4BC,IAA5B,EAAkC;IAC9B;IACA,KAAKC,gBAAL,GAAwB,EAAxB,CAF8B,CAG9B;;IACA,KAAKC,kBAAL,GAA0B,EAA1B;IACA,KAAKC,gBAAL,GAAwB,KAAxB;IACA,KAAKC,cAAL,GAAsB,KAAtB;IACA;AACR;AACA;IACQ;;IACA,KAAKC,kBAAL,GAA0B,EAA1B;IACA,KAAKC,mBAAL,GAA2B,KAA3B;IACA;AACR;AACA;IACQ;;IACA,KAAKC,wBAAL,GAAgC,EAAhC;IACA,KAAKC,aAAL,GAAqB,EAArB;IACA,KAAKC,SAAL,GAAiBV,MAAjB;IACA,KAAKW,aAAL,GAAqBV,IAArB;EACH;EACD;AACJ;AACA;AACA;;;EACIF,UAAU,CAACa,SAAX,CAAqBC,gBAArB,GAAwC,UAAUC,SAAV,EAAqB;IACzD,KAAKC,WAAL,GAAmB,CAAnB;IACA,KAAKC,WAAL,GAAmB,CAAC,CAApB,CAFyD,CAGzD;;IACA,KAAKC,IAAL,GAAY,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,aAA7C,CAAZ;;IACA,IAAI,KAAKD,IAAT,EAAe;MACX;MACA,KAAKE,cAAL,GAAsBC,IAAI,CAACC,KAAL,CAAW,KAAKJ,IAAhB,CAAtB;MACA,IAAIK,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,aAA5B,GAA4CZ,SAApE,CAAhB;MACA,IAAIa,aAAa,GAAGJ,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,cAA5B,GAA6CZ,SAArE,CAApB;MACA,IAAIc,KAAK,GAAG,KAAK,CAAjB;;MACA,IAAI,KAAKT,cAAL,KAAwB,IAAxB,IAAgCQ,aAAa,KAAK,IAAlD,IAA0DL,SAAS,KAAK,IAA5E,EAAkF;QAC9E,IAAIO,IAAI,GAAG,KAAX;;QACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKX,cAAL,CAAoBY,MAAxC,EAAgDD,CAAC,EAAjD,EAAqD;UACjD,IAAIE,SAAS,GAAG,KAAKb,cAAL,CAAoBW,CAApB,CAAhB;;UACA,IAAI,CAACD,IAAD,IAASnC,iBAAiB,CAACsC,SAAS,CAACC,eAAX,CAA1B,IAAyDD,SAAS,CAACE,SAAV,KAAwBpB,SAArF,EAAgG;YAC5Fc,KAAK,GAAGO,QAAQ,CAACH,SAAS,CAACI,SAAV,CAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAAD,CAAhB;YACAR,IAAI,GAAG,IAAP;UACH;QACJ;;QACD,KAAK,IAAIS,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKnB,cAAL,CAAoBY,MAA5C,EAAoDO,GAAG,EAAvD,EAA2D;UACvD;UACA,IAAIC,WAAW,GAAG,KAAKpB,cAAL,CAAoBmB,GAApB,CAAlB;;UACA,IAAIC,WAAW,CAACH,SAAZ,KAA0B,EAA9B,EAAkC;YAC9B,IAAIG,WAAW,CAACC,cAAhB,EAAgC;cAC5BD,WAAW,CAACE,IAAZ,GAAmB,cAAnB;YACH,CAH6B,CAI9B;;;YACA,IAAIC,IAAI,GAAGH,WAAW,CAAC,MAAD,CAAtB;;YACA,IAAI,KAAK7B,SAAL,CAAeiC,YAAnB,EAAiC;cAC7B,IAAIC,UAAU,CAACL,WAAW,CAAC,WAAD,CAAZ,CAAV,IAAwCzB,SAA5C,EAAuD;gBACnD,IAAI+B,UAAU,GAAG,KAAK,CAAtB;gBACA,IAAIC,SAAS,GAAG,KAAK,CAArB;gBACA,IAAIC,QAAQ,GAAG,KAAK,CAApB;;gBACA,IAAIL,IAAI,KAAK,IAAT,IAAiBA,IAAI,CAACM,MAA1B,EAAkC;kBAC9BH,UAAU,GAAGH,IAAI,CAACD,IAAlB;;kBACA,IAAIC,IAAI,CAACO,MAAT,EAAiB;oBACbH,SAAS,GAAG,QAAZ;kBACH;;kBACD,IAAIJ,IAAI,CAACQ,IAAT,EAAe;oBACXJ,SAAS,GAAG,MAAZ;kBACH;;kBACD,IAAIJ,IAAI,CAACS,SAAT,EAAoB;oBAChBL,SAAS,GAAG,eAAZ;kBACH;;kBACD,IAAIJ,IAAI,CAACU,SAAT,EAAoB;oBAChBN,SAAS,GAAG,WAAZ;kBACH;;kBACDC,QAAQ,GAAG,KAAKM,mBAAL,CAAyBX,IAAI,CAACY,IAA9B,CAAX;gBACH;;gBACD,IAAIC,aAAa,GAAGhB,WAAW,CAACiB,SAAZ,KAA0B,CAA1B,GAA8B,OAA9B,GAAyCjB,WAAW,CAACiB,SAAZ,KAA0B,CAA1B,GAA8B,QAA9B,GAAyC,MAAtG;gBACA,IAAIC,eAAe,GAAGlB,WAAW,CAAC,WAAD,CAAjC;gBACA,IAAImB,MAAM,GAAGnB,WAAW,CAAC,YAAD,CAAxB;gBACA,IAAIoB,SAAS,GAAG,UAAUF,eAAe,CAACG,CAA1B,GAA8B,GAA9B,GAAoCH,eAAe,CAACI,CAApD,GAAwD,GAAxD,GAA8DJ,eAAe,CAACK,CAA9E,GAAkF,GAAlF,GAAwF,CAAxF,GAA4F,GAA5G;;gBACA,IAAIvB,WAAW,CAACwB,aAAZ,KAA8B,IAAlC,EAAwC;kBACpCJ,SAAS,GAAG,eAAZ;gBACH;;gBACDA,SAAS,GAAG,KAAKK,SAAL,CAAeL,SAAf,CAAZ,CA3BmD,CA4BnD;;gBACA,IAAIA,SAAS,KAAK,WAAlB,EAA+B;kBAC3BA,SAAS,GAAG,WAAZ;gBACH,CA/BkD,CAgCnD;;;gBACA,IAAIM,SAAS,GAAG1B,WAAW,CAAC,WAAD,CAA3B;gBACA,IAAI2B,IAAI,GAAG,KAAKb,mBAAL,CAAyBK,MAAM,CAACS,CAAhC,CAAX;gBACA,IAAIC,KAAK,GAAG,KAAKf,mBAAL,CAAyBK,MAAM,CAACW,CAAhC,CAAZ;gBACA,IAAIC,KAAK,GAAG,KAAKjB,mBAAL,CAAyBK,MAAM,CAACa,KAAhC,CAAZ;gBACA,IAAIC,MAAM,GAAG,KAAKnB,mBAAL,CAAyBK,MAAM,CAACV,MAAhC,CAAb;gBACA,IAAIyB,UAAU,GAAG;kBAAEP,IAAI,EAAEA,IAAR;kBAAcQ,GAAG,EAAEN,KAAnB;kBAA0BE,KAAK,EAAEA,KAAjC;kBAAwCE,MAAM,EAAEA;gBAAhD,CAAjB;gBACA,IAAIG,cAAc,GAAG,KAArB;gBACA,IAAIC,gBAAgB,GAAG,CAAvB;;gBACA,IAAIrC,WAAW,CAAC,UAAD,CAAX,KAA4B,CAAhC,EAAmC;kBAC/B,IAAIA,WAAW,CAAC,eAAD,CAAX,KAAiC,CAAC,EAAlC,IAAwCA,WAAW,CAAC,eAAD,CAAX,KAAiC,CAAC,GAA1E,IAAiFA,WAAW,CAAC,eAAD,CAAX,KAAiC,CAAC,GAAvH,EAA4H;oBACxHkC,UAAU,GAAG,KAAKI,SAAL,CAAeJ,UAAf,EAA2B3D,SAA3B,EAAsC,CAAtC,EAAyC6D,cAAzC,CAAb;kBACH;gBACJ,CAJD,MAKK;kBACDA,cAAc,GAAG,IAAjB;kBACAF,UAAU,GAAG,KAAKI,SAAL,CAAeJ,UAAf,EAA2B3D,SAA3B,EAAsC,CAAtC,EAAyC6D,cAAzC,CAAb;kBACAC,gBAAgB,GAAG,KAAKE,QAAL,CAAchE,SAAd,CAAnB;gBACH;;gBACD,IAAIiE,SAAS,GAAG,UAAUd,SAAS,CAACL,CAApB,GAAwB,GAAxB,GAA8BK,SAAS,CAACJ,CAAxC,GAA4C,GAA5C,GAAkDI,SAAS,CAACH,CAA5D,GAAgE,GAAhE,GAAsE,CAAtE,GAA0E,GAA1F;gBACAiB,SAAS,GAAG,KAAKf,SAAL,CAAee,SAAf,CAAZ;gBACA,IAAIC,WAAW,GAAGzC,WAAW,CAAC,aAAD,CAA7B;gBACA,IAAI0C,SAAS,GAAG,UAAUD,WAAW,CAACpB,CAAtB,GAA0B,GAA1B,GAAgCoB,WAAW,CAACnB,CAA5C,GAAgD,GAAhD,GAAsDmB,WAAW,CAAClB,CAAlE,GAAsE,GAAtE,GAA4E,CAA5E,GAAgF,GAAhG;gBACAmB,SAAS,GAAG,KAAKjB,SAAL,CAAeiB,SAAf,CAAZ;gBACA,IAAIC,WAAW,GAAG3C,WAAW,CAAC,aAAD,CAA7B;gBACA,KAAK9B,aAAL,GAAqB,EAArB;gBACA,IAAI0E,YAAY,GAAG,EAAnB;;gBACA,IAAI5C,WAAW,CAACE,IAAZ,KAAqB,aAAzB,EAAwC;kBACpC0C,YAAY,GAAG5C,WAAW,CAAC,MAAD,CAAX,GAAsBA,WAAW,CAAC,MAAD,CAAjC,GAA4CA,WAAW,CAAC,OAAD,CAAtE;gBACH,CAFD,MAGK;kBACD4C,YAAY,GAAG5C,WAAW,CAAC,MAAD,CAA1B;gBACH;;gBACD,IAAI6C,eAAe,GAAG;kBAClB1B,MAAM,EAAE;oBAAES,CAAC,EAAEM,UAAU,CAACP,IAAhB;oBAAsBG,CAAC,EAAEI,UAAU,CAACC,GAApC;oBAAyCH,KAAK,EAAEE,UAAU,CAACH,KAA3D;oBAAkEtB,MAAM,EAAEyB,UAAU,CAACD;kBAArF,CADU;kBACqFa,UAAU,EAAEzC,UAAU,CAACL,WAAW,CAAC,WAAD,CAAZ,CAAV,GAAuC,CADxI;kBAC2I+C,IAAI,EAAE/C,WAAW,CAAC,iBAAD,CAD5J;kBACiLgD,OAAO,EAAEhD,WAAW,CAAC,SAAD,CADrM;kBAElBiD,KAAK,EAAEL,YAFW;kBAEGM,SAAS,EAAElD,WAAW,CAAC,UAAD,CAFzB;kBAEuCmD,UAAU,EAAEnD,WAAW,CAAC,UAAD,CAF9D;kBAE4EM,UAAU,EAAEA,UAFxF;kBAEoGC,SAAS,EAAEA,SAF/G;kBAE0HW,eAAe,EAAEE,SAF3I;kBAEsJgC,KAAK,EAAEZ,SAF7J;kBAEwKC,WAAW,EAAEC,SAFrL;kBAEgMW,SAAS,EAAEV,WAF3M;kBAEwNnC,QAAQ,EAAEA,QAFlO;kBAE4O8C,WAAW,EAAEtD,WAAW,CAACuD,SAFrQ;kBAEgRC,WAAW,EAAEnB,gBAF7R;kBAGlBoB,UAAU,EAAEzD,WAAW,CAAC,YAAD,CAHL;kBAGqB0D,UAAU,EAAE1D,WAAW,CAAC,YAAD,CAH5C;kBAG4D2D,SAAS,EAAE3C,aAHvE;kBAGsF4C,OAAO,EAAE,KAAKC,aAAL,CAAmB7D,WAAnB,CAH/F;kBAGgI9B,aAAa,EAAE,KAAKA,aAHpJ;kBAGmK4F,SAAS,EAAE9D,WAAW,CAAC+D,SAH1L;kBAGqMC,UAAU,EAAEhE,WAAW,CAACiE,OAAZ,KAAwB,CAAxB,GAA4B,QAA5B,GAAuC,SAHxP;kBAGmQ9D,IAAI,EAAE;oBAAE+D,QAAQ,EAAE,CAAC/G,iBAAiB,CAACgD,IAAD,CAAlB,GAA2BA,IAAI,CAACO,MAAhC,GAAyC,KAArD;oBAA4DyD,MAAM,EAAE,CAAChH,iBAAiB,CAACgD,IAAD,CAAlB,GAA2BA,IAAI,CAACQ,IAAhC,GAAuC,KAA3G;oBAAkHyD,WAAW,EAAE,CAACjH,iBAAiB,CAACgD,IAAD,CAAlB,GAA2BA,IAAI,CAACS,SAAhC,GAA4C,KAA3K;oBAAkLyD,WAAW,EAAE,CAAClH,iBAAiB,CAACgD,IAAD,CAAlB,GAA2BA,IAAI,CAACU,SAAhC,GAA4C;kBAA3O;gBAHzQ,CAAtB;;gBAKA,IAAI,CAACb,WAAW,CAACb,EAAb,IAAmB,KAAKhB,SAAL,CAAemG,oBAAf,CAAoCvE,GAApC,CAAnB,IAA+D,CAAC5C,iBAAiB,CAAC6C,WAAW,CAAC,iBAAD,CAAZ,CAArF,EAAuH;kBACnH6C,eAAe,CAAC1D,EAAhB,GAAqB,KAAKhB,SAAL,CAAemG,oBAAf,CAAoCvE,GAApC,EAAyCZ,EAA9D;gBACH;;gBACD,IAAIa,WAAW,CAACE,IAAZ,KAAqB,UAArB,IAAmCF,WAAW,CAACE,IAAZ,KAAqB,SAA5D,EAAuE;kBACnE2C,eAAe,CAACI,KAAhB,GAAwBjD,WAAW,CAAC,eAAD,CAAnC;gBACH,CA3EkD,CA4EnD;;;gBACA,IAAIuE,SAAS,GAAG,KAAKC,gBAAL,CAAsBxE,WAAtB,CAAhB;;gBACA,IAAIA,WAAW,CAACE,IAAZ,KAAqB,eAArB,IAAwCF,WAAW,CAACE,IAAZ,KAAqB,gBAAjE,EAAmF;kBAC/E,IAAI,CAAC/C,iBAAiB,CAAC,KAAKqH,gBAAL,CAAsBxE,WAAtB,CAAD,CAAtB,EAA4D;oBACxD,IAAIA,WAAW,CAACyE,UAAhB,EAA4B;sBACxB,IAAIpB,SAAS,GAAGR,eAAe,CAACQ,SAAhC;sBACAA,SAAS,GAAGA,SAAS,GAAG,CAAZ,GAAgBA,SAAhB,GAA4B,CAAxC;sBACAR,eAAe,CAACQ,SAAhB,GAA4BA,SAA5B;oBACH;;oBACD,IAAIqB,aAAa,GAAG,KAAKvG,SAAL,CAAewG,kBAAf,CAAkCC,YAAlC,CAA+CL,SAA/C,EAA0D1B,eAA1D,EAA2E,KAA3E,EAAkFA,eAAe,CAAC1D,EAAlG,CAApB;;oBACA,IAAIuF,aAAa,IAAIA,aAAa,CAACG,aAAnC,EAAkD;sBAC9C7E,WAAW,CAACb,EAAZ,GAAiBuF,aAAa,CAACG,aAAd,CAA4B1F,EAA5B,CAA+BW,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAAjB;oBACH;;oBACD,IAAI4E,aAAa,CAACI,KAAd,CAAoBd,UAApB,KAAmC,QAAvC,EAAiD;sBAC7CU,aAAa,CAACK,UAAd,CAAyB,CAAzB,EAA4BC,QAA5B,GAAuC,IAAvC;oBACH;kBACJ;gBACJ;;gBACD,IAAIT,SAAS,KAAK,gBAAd,IAAkCA,SAAS,KAAK,cAApD,EAAoE;kBAChE,KAAKU,gBAAL,CAAsBjF,WAAtB,EAAmCX,KAAnC;;kBACA,IAAI,CAAClC,iBAAiB,CAAC6C,WAAW,CAACkF,KAAb,CAAtB,EAA2C;oBACvC,KAAKC,oBAAL,CAA0BnF,WAA1B,EAAuCK,UAAU,CAACL,WAAW,CAAC,WAAD,CAAZ,CAAV,GAAuC,CAA9E,EAAiF,IAAjF,EAAuFoC,cAAvF;oBACA,KAAKpE,mBAAL,GAA2B,IAA3B;oBACAqB,KAAK;kBACR;gBACJ;;gBACD,KAAKjB,aAAL,CAAmBgH,sBAAnB,GAA4C,IAA5C;cACH;YACJ,CAzGD,MA0GK;cACD;cACA,IAAI/E,UAAU,CAACL,WAAW,CAAC,WAAD,CAAZ,CAAV,IAAwCzB,SAA5C,EAAuD;gBACnD;gBACA,IAAI8G,KAAK,GAAG,KAAKC,gBAAL,CAAsBtF,WAAtB,EAAmCzB,SAAnC,EAA8CwB,GAA9C,EAAmD,IAAnD,EAAyDV,KAAzD,CAAZ;gBACA,IAAIkG,UAAU,GAAGF,KAAK,CAACG,YAAvB;gBACA,IAAIC,SAAS,GAAGJ,KAAK,CAAChG,KAAtB;;gBACA,IAAIkG,UAAJ,EAAgB;kBACZ;kBACA,IAAIG,UAAU,GAAG,KAAKC,mBAAL,CAAyB3F,WAAzB,EAAsCzB,SAAtC,CAAjB,CAFY,CAGZ;;kBACA,IAAI4C,MAAM,GAAGnB,WAAW,CAAC,YAAD,CAAxB,CAJY,CAKZ;;kBACA,IAAI4F,MAAM,GAAG5F,WAAW,CAAC,MAAD,CAAxB,CANY,CAOZ;;kBACA,IAAIoC,cAAc,GAAG,KAArB;kBACA,IAAIoB,WAAW,GAAG,CAAlB;;kBACA,IAAIxD,WAAW,CAAC,UAAD,CAAX,KAA4B,CAAhC,EAAmC;oBAC/BoC,cAAc,GAAG,IAAjB;oBACAoB,WAAW,GAAG,KAAKjB,QAAL,CAAchE,SAAd,CAAd;;oBACA,IAAImH,UAAJ,EAAgB;sBACZA,UAAU,CAACZ,KAAX,CAAiBe,SAAjB,GAA6B,YAAYrC,WAAZ,GAA0B,MAAvD;oBACH,CAFD,MAGK;sBACD+B,UAAU,CAACT,KAAX,CAAiBe,SAAjB,GAA6B,YAAYrC,WAAZ,GAA0B,MAAvD;oBACH;kBACJ,CATD,MAUK;oBACD,IAAIkC,UAAJ,EAAgB;sBACZA,UAAU,CAACZ,KAAX,CAAiBe,SAAjB,GAA6B,YAAYrC,WAAZ,GAA0B,MAAvD;oBACH,CAFD,MAGK;sBACD+B,UAAU,CAACT,KAAX,CAAiBe,SAAjB,GAA6B,YAAYrC,WAAZ,GAA0B,MAAvD;oBACH;kBACJ;;kBACD,KAAKsC,aAAL,CAAmBP,UAAnB,EAA+BpE,MAA/B,EAAuCyE,MAAvC,EAA+CrH,SAA/C,EAA0D,CAA1D,EAA6D6D,cAA7D;kBACAmD,UAAU,CAACQ,YAAX,GAA0B/F,WAAW,CAAC+F,YAAtC;;kBACA,IAAIR,UAAU,CAACQ,YAAf,EAA6B;oBACzB,IAAIC,UAAU,GAAG,KAAK5H,aAAL,CAAmB6H,aAAnB,EAAjB,CADyB,CAEzB;;oBACA,IAAIC,MAAM,GAAKtG,QAAQ,CAAC2F,UAAU,CAACT,KAAX,CAAiB/C,KAAlB,CAAR,GAAmCwD,UAAU,CAACzB,SAA/C,GAA6DzD,UAAU,CAACkF,UAAU,CAACT,KAAX,CAAiBtE,QAAlB,CAAV,GAAwC,CAAtG,GAA6G,MAAMwF,UAAhI,CAHyB,CAIzB;;oBACAT,UAAU,CAACT,KAAX,CAAiBqB,aAAjB,GAAiC,KAAKD,MAAL,GAAc,IAA/C;oBACAX,UAAU,CAACT,KAAX,CAAiBxE,UAAjB,GAA8B,WAA9B;oBACAiF,UAAU,CAACT,KAAX,CAAiBsB,WAAjB,GAAgCF,MAAM,GAAG,CAAV,GAAe,IAA9C;kBACH,CAtCW,CAuCZ;;;kBACAlG,WAAW,CAAC,UAAD,CAAX,GAA0B,KAAK7B,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,QAA5B,GAAuCZ,SAAvC,GAAmD,GAAnD,GAAyDwB,GAAnF;;kBACA,KAAK,IAAIsG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKlI,SAAL,CAAemG,oBAAf,CAAoC9E,MAAxD,EAAgE6G,CAAC,EAAjE,EAAqE;oBACjE,IAAI,CAACd,UAAU,CAACe,IAAX,KAAoB,MAApB,IAA8Bf,UAAU,CAACe,IAAX,KAAoB,UAAlD,IAAgEf,UAAU,CAACe,IAAX,KAAoB,UAArF,KAAoGtG,WAAW,CAACE,IAAZ,KAAqB,gBAA7H,EAA+I;sBAC3I,IAAIF,WAAW,CAAC,UAAD,CAAX,KAA4B,KAAK7B,SAAL,CAAemG,oBAAf,CAAoC+B,CAApC,EAAuClH,EAAvE,EAA2E;wBACvE,KAAKhB,SAAL,CAAemG,oBAAf,CAAoC+B,CAApC,EAAuCpD,KAAvC,GAA+CjD,WAAW,CAAC,MAAD,CAA1D;sBACH;oBACJ;kBACJ;;kBACD,IAAI7C,iBAAiB,CAAC6C,WAAW,CAACkF,KAAb,CAArB,EAA0C;oBACtClF,WAAW,CAACkF,KAAZ,GAAoBlF,WAAW,CAAC,MAAD,CAA/B;kBACH;;kBACD,IAAIA,WAAW,CAACuG,OAAhB,EAAyB;oBACrB,KAAKC,UAAL,CAAgBxG,WAAW,CAACuG,OAA5B,EAAqChB,UAArC;kBACH;;kBACD,KAAKkB,qBAAL,CAA2BlB,UAA3B,EAAuChH,SAAvC,EAAkDwB,GAAlD,EAAuDC,WAAvD,EAAoEoC,cAApE;kBACA,KAAKsE,eAAL,CAAqB1G,WAArB,EAAkCuF,UAAlC;kBACA,KAAKoB,aAAL,CAAmB3G,WAAnB,EAAgCuF,UAAhC,EAA4ChH,SAA5C;kBACA,KAAKqI,oBAAL,CAA0B5G,WAA1B,EAAuCuF,UAAvC;kBACA,KAAKsB,iBAAL,CAAuBtB,UAAvB;kBACA,KAAKuB,0BAAL,CAAgC9G,WAAhC;;kBACA,IAAI0F,UAAJ,EAAgB;oBACZA,UAAU,CAACqB,WAAX,CAAuBxB,UAAvB;oBACAxG,SAAS,CAACgI,WAAV,CAAsBrB,UAAtB;kBACH,CAHD,MAIK;oBACDH,UAAU,CAACT,KAAX,CAAiBkC,QAAjB,GAA4B,UAA5B;oBACAjI,SAAS,CAACgI,WAAV,CAAsBxB,UAAtB;kBACH;;kBACDA,UAAU,CAAC0B,gBAAX,CAA4B,OAA5B,EAAqC,KAAKC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAArC;kBACA5B,UAAU,CAAC0B,gBAAX,CAA4B,MAA5B,EAAoC,KAAKG,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAApC;kBACA5B,UAAU,CAAC0B,gBAAX,CAA4B,OAA5B,EAAqC,KAAKI,gBAAL,CAAsBF,IAAtB,CAA2B,IAA3B,CAArC;kBACA5B,UAAU,CAAC0B,gBAAX,CAA4B,QAA5B,EAAsC,KAAKK,gBAAL,CAAsBH,IAAtB,CAA2B,IAA3B,CAAtC;kBACA5B,UAAU,CAAC0B,gBAAX,CAA4B,SAA5B,EAAuC,KAAKM,qBAAL,CAA2BJ,IAA3B,CAAgC,IAAhC,CAAvC;kBACA5B,UAAU,CAAC0B,gBAAX,CAA4B,OAA5B,EAAqC,KAAKO,qBAAL,CAA2BL,IAA3B,CAAgC,IAAhC,CAArC;kBACA9H,KAAK,GAAGoG,SAAR;gBACH;cACJ;YACJ;UACJ;QACJ;;QACD,IAAI,CAAC,KAAKtH,SAAL,CAAeiC,YAApB,EAAkC;UAC9BqH,MAAM,CAACC,cAAP,CAAsBC,UAAtB,CAAiC,KAAKvJ,aAAL,CAAmBwJ,UAAnB,GAAgC,aAAjE;UACA,KAAKxJ,aAAL,CAAmByJ,uBAAnB,CAA2C,KAAKjJ,cAAhD,EAAgE,aAAhE;QACH;MACJ;IACJ;;IACD,IAAI,KAAKR,aAAL,CAAmB0J,YAAnB,IAAmC,KAAK1J,aAAL,CAAmB2J,UAA1D,EAAsE;MAClE,IAAIvC,YAAY,GAAGxG,QAAQ,CAACC,cAAT,CAAwB,KAAKb,aAAL,CAAmB2J,UAAnB,CAA8B5I,EAAtD,CAAnB;;MACA,IAAIqG,YAAJ,EAAkB;QACd,IAAI,CAAC,KAAKpH,aAAL,CAAmB2J,UAAnB,CAA8BzB,IAA9B,KAAuC,gBAAvC,IAA2D,KAAKlI,aAAL,CAAmB2J,UAAnB,CAA8BzB,IAA9B,KAAuC,cAAnG,KAAsH,KAAKnI,SAAL,CAAewG,kBAAzI,EAA6J;UACzJ,IAAIqD,CAAC,GAAG,KAAK5J,aAAL,CAAmB2J,UAAnB,CAA8B5G,MAA9B,CAAqC6G,CAA7C;UACA,IAAI/F,MAAM,GAAG,KAAK7D,aAAL,CAAmB6J,aAAnB,CAAiC,KAAK7J,aAAL,CAAmB2J,UAAnB,CAA8BxJ,SAA/D,CAAb;UACA,KAAKJ,SAAL,CAAe+J,QAAf,CAAwBC,YAAxB,CAAqC,KAAK/J,aAAL,CAAmB2J,UAAnB,CAA8BxJ,SAAnE,EAA8E0D,MAAM,GAAG+F,CAAvF;QACH,CAJD,MAKK;UACDxC,YAAY,CAAC4C,KAAb;QACH;;QACD,KAAKhK,aAAL,CAAmB0J,YAAnB,GAAkC,KAAlC;QACA,KAAK1J,aAAL,CAAmB2J,UAAnB,GAAgC,EAAhC;MACH;IACJ;EACJ,CAnPD;;EAoPAvK,UAAU,CAACa,SAAX,CAAqBmI,UAArB,GAAkC,UAAU6B,cAAV,EAA0BC,aAA1B,EAAyC;IACvE;IACA,IAAItF,OAAO,GAAG,IAAIzF,OAAJ,CAAY;MACtBgL,OAAO,EAAEF;IADa,CAAZ,CAAd,CAFuE,CAKvE;;IACArF,OAAO,CAACwF,QAAR,CAAiBF,aAAjB;EACH,CAPD;;EAQA9K,UAAU,CAACa,SAAX,CAAqBoK,IAArB,GAA4B,UAAUC,GAAV,EAAe;IACvC,OAAOA,GAAG,CAACC,OAAJ,CAAY,aAAZ,EAA2B,EAA3B,CAAP;EACH,CAFD;;EAGAnL,UAAU,CAACa,SAAX,CAAqBoD,SAArB,GAAiC,UAAUmH,IAAV,EAAgB;IAC7C,IAAIC,OAAO,GAAGD,IAAI,CAACE,SAAL,CAAeF,IAAI,CAACG,OAAL,CAAa,GAAb,CAAf,EAAkCjJ,KAAlC,CAAwC,GAAxC,CAAd;IACA,IAAIkJ,CAAC,GAAGpJ,QAAQ,CAAC,KAAK6I,IAAL,CAAUI,OAAO,CAAC,CAAD,CAAP,CAAWC,SAAX,CAAqB,CAArB,CAAV,CAAD,EAAqC,EAArC,CAAhB;IACA,IAAIG,CAAC,GAAGrJ,QAAQ,CAAC,KAAK6I,IAAL,CAAUI,OAAO,CAAC,CAAD,CAAjB,CAAD,EAAwB,EAAxB,CAAhB;IACA,IAAIK,CAAC,GAAGtJ,QAAQ,CAAC,KAAK6I,IAAL,CAAUI,OAAO,CAAC,CAAD,CAAjB,CAAD,EAAwB,EAAxB,CAAhB;IACA,IAAIM,CAAC,GAAG9I,UAAU,CAACA,UAAU,CAAC,KAAKoI,IAAL,CAAUI,OAAO,CAAC,CAAD,CAAP,CAAWC,SAAX,CAAqB,CAArB,EAAwBD,OAAO,CAAC,CAAD,CAAP,CAAWrJ,MAAX,GAAoB,CAA5C,CAAV,CAAD,CAAV,CAAsE4J,OAAtE,CAA8E,CAA9E,CAAD,CAAlB;IACA,IAAIC,QAAQ,GAAG,CACXL,CAAC,CAACM,QAAF,CAAW,EAAX,CADW,EAEXL,CAAC,CAACK,QAAF,CAAW,EAAX,CAFW,EAGXJ,CAAC,CAACI,QAAF,CAAW,EAAX,CAHW,EAIXC,IAAI,CAACC,KAAL,CAAWL,CAAC,GAAG,GAAf,EAAoBG,QAApB,CAA6B,EAA7B,EAAiCR,SAAjC,CAA2C,CAA3C,EAA8C,CAA9C,CAJW,CAAf,CAN6C,CAY7C;;IACAO,QAAQ,CAACI,OAAT,CAAiB,UAAUC,IAAV,EAAgBnK,CAAhB,EAAmB;MAChC,IAAImK,IAAI,CAAClK,MAAL,KAAgB,CAApB,EAAuB;QACnB6J,QAAQ,CAAC9J,CAAD,CAAR,GAAc,MAAMmK,IAApB;MACH;IACJ,CAJD;IAKA,OAAQ,MAAML,QAAQ,CAACM,IAAT,CAAc,EAAd,CAAd;EACH,CAnBD;;EAoBAnM,UAAU,CAACa,SAAX,CAAqBwF,aAArB,GAAqC,UAAU7D,WAAV,EAAuB;IACxD,IAAI4J,QAAQ,GAAG5J,WAAW,CAAC,UAAD,CAA1B;IACA,IAAI4D,OAAO,GAAG,EAAd;;IACA,KAAK,IAAIrE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqK,QAAQ,CAACpK,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;MACtC,IAAIqK,QAAQ,CAACrK,CAAD,CAAR,KAAgBS,WAAW,CAAC,eAAD,CAA/B,EACI,KAAK9B,aAAL,CAAmB2L,IAAnB,CAAwBtK,CAAxB;MACJqE,OAAO,CAACiG,IAAR,CAAa;QAAEC,QAAQ,EAAEF,QAAQ,CAACrK,CAAD,CAApB;QAAyBwK,SAAS,EAAEH,QAAQ,CAACrK,CAAD;MAA5C,CAAb;IACH;;IACD,IAAI,KAAKiF,gBAAL,CAAsBxE,WAAtB,MAAuC,SAA3C,EAAsD;MAClD,KAAK9B,aAAL,GAAqB8B,WAAW,CAAC,cAAD,CAAhC;IACH;;IACD,OAAO4D,OAAP;EACH,CAZD,CArTwC,CAkUxC;;;EACApG,UAAU,CAACa,SAAX,CAAqBsH,mBAArB,GAA2C,UAAUjH,IAAV,EAAgBH,SAAhB,EAA2B;IAClE;IACA,IAAImH,UAAJ,CAFkE,CAGlE;;IACA,IAAIhH,IAAI,CAAC,MAAD,CAAJ,KAAiB,SAAjB,IAA8BA,IAAI,CAAC,MAAD,CAAJ,KAAiB,UAAnD,EAA+D;MAC3DgH,UAAU,GAAG1G,QAAQ,CAACgL,aAAT,CAAuB,KAAvB,CAAb;MACAtE,UAAU,CAACZ,KAAX,CAAiBmF,UAAjB,GAA8B,OAA9B;;MACA,IAAIvL,IAAI,CAACqH,YAAT,EAAuB;QACnBL,UAAU,CAACZ,KAAX,CAAiBmF,UAAjB,GAA8B,aAA9B;MACH,CAL0D,CAM3D;;;MACA,IAAI9I,MAAM,GAAGzC,IAAI,CAAC,YAAD,CAAjB,CAP2D,CAQ3D;;MACA,IAAIyB,IAAI,GAAGzB,IAAI,CAAC,MAAD,CAAf,CAT2D,CAU3D;;MACAgH,UAAU,CAACZ,KAAX,CAAiBkC,QAAjB,GAA4B,UAA5B,CAX2D,CAY3D;;MACA,IAAI5E,cAAc,GAAG,KAArB;;MACA,IAAI1D,IAAI,CAAC,UAAD,CAAJ,KAAqB,CAAzB,EAA4B;QACxB0D,cAAc,GAAG,IAAjB;MACH;;MACD,KAAK0D,aAAL,CAAmBJ,UAAnB,EAA+BvE,MAA/B,EAAuChB,IAAvC,EAA6C5B,SAA7C,EAAwD,CAAxD,EAA2D6D,cAA3D;IACH;;IACD,OAAOsD,UAAP;EACH,CAxBD;EAyBA;AACJ;AACA;;;EACIlI,UAAU,CAACa,SAAX,CAAqBkE,QAArB,GAAgC,UAAUhE,SAAV,EAAqB;IACjD;IACA,IAAI2L,KAAK,GAAG,CAAZ,CAFiD,CAGjD;;IACA,IAAIC,WAAW,GAAG,KAAK/L,aAAL,CAAmBgM,QAAnB,CAA4B7L,SAA5B,CAAlB;;IACA,IAAI4L,WAAW,IAAIA,WAAW,CAACE,QAA/B,EAAyC;MACrC,QAAQF,WAAW,CAACE,QAApB;QACI,KAAK,CAAL;UACIH,KAAK,GAAG,CAAR;UACA;;QACJ,KAAK,CAAL;UACIA,KAAK,GAAG,EAAR;UACA;;QACJ,KAAK,CAAL;UACIA,KAAK,GAAG,GAAR;UACA;;QACJ,KAAK,CAAL;UACIA,KAAK,GAAG,GAAR;UACA;MAZR;IAcH;;IACD,OAAOA,KAAP;EACH,CAtBD;;EAuBA1M,UAAU,CAACa,SAAX,CAAqBiM,SAArB,GAAiC,YAAY;IACzC,KAAKC,sBAAL,CAA4B,IAA5B;EACH,CAFD;;EAGA/M,UAAU,CAACa,SAAX,CAAqBmM,aAArB,GAAqC,YAAY;IAC7C,KAAKD,sBAAL,CAA4B,KAA5B;EACH,CAFD;;EAGA/M,UAAU,CAACa,SAAX,CAAqBkM,sBAArB,GAA8C,UAAUE,QAAV,EAAoB;IAC9D,IAAIC,eAAe,GAAGD,QAAtB,CAD8D,CAE9D;;IACA,IAAIE,eAAe,GAAG,KAAK1M,wBAA3B;;IACA,IAAI0M,eAAe,CAACnL,MAAhB,KAA2B,CAA/B,EAAkC;MAC9BmL,eAAe,GAAG,KAAKC,YAAL,EAAlB;IACH,CAN6D,CAO9D;;;IACA,IAAIpF,YAAJ;;IACA,IAAI,KAAKqF,aAAT,EAAwB;MACpB,KAAK,IAAItL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoL,eAAe,CAACnL,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;QAC7CiG,YAAY,GAAG,KAAKrH,SAAL,CAAewG,kBAAf,GAAoCgG,eAAe,CAACpL,CAAD,CAAf,CAAmBuL,SAAvD,GAAmEH,eAAe,CAACpL,CAAD,CAAjG;;QACA,IAAI,KAAKsL,aAAL,CAAmB1L,EAAnB,KAA0BqG,YAAY,CAACuF,QAA3C,EAAqD;UACjD,KAAKF,aAAL,GAAqB7L,QAAQ,CAACC,cAAT,CAAwBuG,YAAY,CAACuF,QAArC,CAArB;UACA,KAAKC,iBAAL,CAAuBzL,CAAvB,EAA0BoL,eAAe,CAACnL,MAA1C,EAAkDkL,eAAlD;UACA;QACH;MACJ;IACJ,CATD,MAUK;MACD,IAAID,QAAJ,EAAc;QACVjF,YAAY,GAAG,KAAKrH,SAAL,CAAewG,kBAAf,GAAoCgG,eAAe,CAAC,CAAD,CAAf,CAAmBG,SAAvD,GAAmEH,eAAe,CAAC,CAAD,CAAjG;;QACA,IAAInF,YAAY,CAACuF,QAAjB,EAA2B;UACvB,KAAKF,aAAL,GAAqB7L,QAAQ,CAACC,cAAT,CAAwBuG,YAAY,CAACuF,QAArC,CAArB;UACA,KAAKC,iBAAL,CAAuB,CAAvB,EAA0BL,eAAe,CAACnL,MAA1C,EAAkDkL,eAAlD,EAAmE,IAAnE;QACH;MACJ;IACJ;EACJ,CA5BD;;EA6BAlN,UAAU,CAACa,SAAX,CAAqB2M,iBAArB,GAAyC,UAAUC,qBAAV,EAAiCC,cAAjC,EAAiDC,UAAjD,EAA6DC,eAA7D,EAA8E;IACnH,IAAIC,cAAc,GAAGJ,qBAArB;;IACA,IAAI,CAACG,eAAL,EAAsB;MAClB,IAAID,UAAJ,EAAgB;QACZE,cAAc;MACjB,CAFD,MAGK;QACDA,cAAc;MACjB;IACJ;;IACD,IAAIH,cAAc,KAAK,CAAvB,EAA0B;MACtB,KAAKI,oBAAL,CAA0B,CAA1B;IACH,CAFD,MAGK;MACD,IAAID,cAAc,GAAGH,cAAjB,IAAmCG,cAAc,IAAI,CAAzD,EAA4D;QACxD,KAAKC,oBAAL,CAA0BD,cAA1B;MACH,CAFD,MAGK;QACD,IAAIF,UAAJ,EAAgB;UACZ,IAAIE,cAAc,IAAIH,cAAtB,EAAsC;YAClC,KAAKI,oBAAL,CAA0B,CAA1B;UACH;QACJ,CAJD,MAKK;UACD,IAAID,cAAc,IAAI,CAAtB,EAAyB;YACrB,KAAKC,oBAAL,CAA0BJ,cAAc,GAAG,CAA3C;UACH;QACJ;MACJ;IACJ;EACJ,CA9BD;;EA+BA1N,UAAU,CAACa,SAAX,CAAqBiN,oBAArB,GAA4C,UAAUC,gBAAV,EAA4B;IACpE,IAAIC,YAAY,GAAGD,gBAAnB,CADoE,CAEpE;;IACA,IAAIZ,eAAe,GAAG,KAAK1M,wBAA3B,CAHoE,CAIpE;;IACA,IAAIuH,YAAJ;;IACA,IAAIgG,YAAY,GAAGb,eAAe,CAACnL,MAAnC,EAA2C;MACvC,KAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoL,eAAe,CAACnL,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;QAC7C,IAAIkM,cAAc,GAAG,KAAKtN,SAAL,CAAewG,kBAAf,GAAoCgG,eAAe,CAACa,YAAD,CAAf,CAA8BV,SAA9B,CAAwCC,QAA5E,GAAuFJ,eAAe,CAACa,YAAD,CAAf,CAA8BT,QAA1I;QACA,IAAIW,kBAAkB,GAAG,KAAKvN,SAAL,CAAewG,kBAAf,GAAoCgG,eAAe,CAACpL,CAAD,CAAf,CAAmBuL,SAAvD,GAAmEH,eAAe,CAACpL,CAAD,CAA3G;;QACA,IAAIkM,cAAc,KAAKC,kBAAkB,CAACX,QAA1C,EAAoD;UAChD,IAAIxM,SAAS,GAAGmN,kBAAkB,CAAC/L,SAAnB,IAAgC,CAAhC,GAAoC+L,kBAAkB,CAAC/L,SAAvD,GAAmE+L,kBAAkB,CAAC5I,UAAtG;UACA,IAAI6I,QAAQ,GAAG,KAAKxN,SAAL,CAAeyN,gBAAf,CAAgCC,kBAAhC,CAAmDtN,SAAnD,CAAf;;UACA,IAAI,CAACoN,QAAL,EAAe;YACX,KAAKxN,SAAL,CAAe2N,UAAf,CAA0BC,QAA1B,CAAmCxN,SAAnC;UACH;;UACD,KAAKsM,aAAL,GAAqB7L,QAAQ,CAACC,cAAT,CAAwByM,kBAAkB,CAACX,QAA3C,CAArB;UACAvF,YAAY,GAAGkG,kBAAf;UACA;QACH;MACJ;;MACD,IAAI,KAAKb,aAAL,KAAuB,IAA3B,EAAiC;QAC7B,IAAItM,SAAS,GAAGiH,YAAY,CAAC7F,SAAb,IAA0B,CAA1B,GAA8B6F,YAAY,CAAC7F,SAA3C,GAAuD6F,YAAY,CAAC1C,UAApF;QACA,KAAK3E,SAAL,CAAe2N,UAAf,CAA0BC,QAA1B,CAAmCxN,SAAnC;QACA,KAAKsM,aAAL,GAAqB7L,QAAQ,CAACC,cAAT,CAAwBuG,YAAY,CAACuF,QAArC,CAArB;MACH;;MACD,IAAI,KAAKF,aAAT,EAAwB;QACpB,IAAI,KAAKA,aAAL,CAAmBmB,SAAnB,KAAiC,2CAArC,EAAkF;UAC9EhN,QAAQ,CAACC,cAAT,CAAwB,KAAK4L,aAAL,CAAmB1L,EAA3C,EAA+CiJ,KAA/C;UACA,KAAKjK,SAAL,CAAe8N,MAAf,CAAsB,CAAC,KAAKpB,aAAL,CAAmB1L,EAApB,CAAtB,EAA+C,IAA/C;QACH,CAHD,MAIK,IAAI,KAAK0L,aAAL,CAAmBmB,SAAnB,KAAiC,iCAArC,EAAwE;UACzE,IAAI,KAAK7N,SAAL,CAAewG,kBAAnB,EAAuC;YACnC3F,QAAQ,CAACC,cAAT,CAAwB,KAAK4L,aAAL,CAAmB1L,EAA3C,EAA+C0F,aAA/C,CAA6DuD,KAA7D;UACH,CAFD,MAGK;YACDpJ,QAAQ,CAACC,cAAT,CAAwB,KAAK4L,aAAL,CAAmB1L,EAA3C,EAA+CiJ,KAA/C;UACH;QACJ;MACJ;IACJ;EACJ,CAzCD;EA0CA;AACJ;AACA;;;EACI5K,UAAU,CAACa,SAAX,CAAqB6N,QAArB,GAAgC,UAAU/M,EAAV,EAAc;IAC1C,IAAI,CAACA,EAAL,EAAS;MACL,IAAI,KAAK0L,aAAT,EAAwB;QACpB7L,QAAQ,CAACC,cAAT,CAAwB,KAAK4L,aAAL,CAAmB1L,EAA3C,EAA+CiJ,KAA/C;MACH;IACJ,CAJD,MAKK;MACD,KAAK+D,WAAL;MACA,IAAIC,gBAAgB,GAAGpN,QAAQ,CAACC,cAAT,CAAwBE,EAAxB,CAAvB;MACAiN,gBAAgB,CAACC,SAAjB,CAA2BC,GAA3B,CAA+B,sBAA/B;IACH;EACJ,CAXD;EAYA;AACJ;AACA;;;EACI9O,UAAU,CAACa,SAAX,CAAqB8N,WAArB,GAAmC,YAAY;IAC3C,IAAI,KAAKlO,wBAAT,EAAmC;MAC/B;MACA,IAAI0M,eAAe,GAAG,KAAK1M,wBAA3B;;MACA,IAAI0M,eAAe,CAACnL,MAAhB,KAA2B,CAA/B,EAAkC;QAC9BmL,eAAe,GAAG,KAAKC,YAAL,EAAlB;MACH;;MACD,KAAK,IAAIrL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtB,wBAAL,CAA8BuB,MAAlD,EAA0DD,CAAC,EAA3D,EAA+D;QAC3D,IAAIgN,gBAAgB,GAAG,KAAKpO,SAAL,CAAewG,kBAAf,GAAoC,KAAK1G,wBAAL,CAA8BsB,CAA9B,EAAiCuL,SAAjC,CAA2CC,QAA/E,GAA0F,KAAK9M,wBAAL,CAA8BsB,CAA9B,EAAiCwL,QAAlJ;QACA,IAAIqB,gBAAgB,GAAGpN,QAAQ,CAACC,cAAT,CAAwBsN,gBAAxB,CAAvB;;QACA,IAAIH,gBAAJ,EAAsB;UAClBA,gBAAgB,CAACC,SAAjB,CAA2BG,MAA3B,CAAkC,sBAAlC;QACH;MACJ;;MACD,IAAI,KAAKrO,SAAL,CAAesO,gBAAf,CAAgC5B,aAApC,EAAmD;QAC/C,KAAK1M,SAAL,CAAesO,gBAAf,CAAgC5B,aAAhC,CAA8CwB,SAA9C,CAAwDG,MAAxD,CAA+D,sBAA/D;MACH;IACJ;EACJ,CAlBD,CApfwC,CAugBxC;;;EACAhP,UAAU,CAACa,SAAX,CAAqBuM,YAArB,GAAoC,YAAY;IAC5C,IAAI,KAAKzM,SAAL,CAAewG,kBAAnB,EAAuC;MACnC,KAAK1G,wBAAL,GACI,KAAKE,SAAL,CAAewG,kBAAf,CAAkC+H,wBAAlC,CAA2D,KAAKzO,wBAAhE,CADJ;IAEH,CAHD,MAIK;MACD,KAAKA,wBAAL,GAAgC,KAAK0O,qBAAL,EAAhC;IACH;;IACD,OAAO,KAAK1O,wBAAZ;EACH,CATD;;EAUAT,UAAU,CAACa,SAAX,CAAqBsO,qBAArB,GAA6C,YAAY;IACrD;IACA,IAAIjO,IAAI,GAAG,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,aAA7C,CAAX,CAFqD,CAGrD;;IACA,IAAIqB,WAAJ;;IACA,IAAItB,IAAJ,EAAU;MACN;MACA,IAAIE,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAArB;;MACA,KAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,cAAc,CAACY,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;QAC5CS,WAAW,GAAGpB,cAAc,CAACW,CAAD,CAA5B;;QACA,IAAIS,WAAW,CAACE,IAAZ,KAAqB,gBAAzB,EAA2C;UACvC;UACAF,WAAW,CAAC,UAAD,CAAX,GAA0B,KAAK7B,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,QAA5B,GAAuCa,WAAW,CAACL,SAAnD,GAA+D,GAA/D,GAAqEJ,CAA/F;UACA,KAAKtB,wBAAL,CAA8B4L,IAA9B,CAAmCjL,cAAc,CAACW,CAAD,CAAjD;QACH;MACJ;IACJ;;IACD,OAAO,KAAKtB,wBAAZ;EACH,CAlBD;EAmBA;AACJ;AACA;;;EACIT,UAAU,CAACa,SAAX,CAAqBiG,oBAArB,GAA4C,YAAY;IACpD;IACA,IAAI5F,IAAI,GAAG,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,aAA7C,CAAX;;IACA,IAAID,IAAJ,EAAU;MACN;MACA,IAAIE,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAArB;;MACA,KAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,cAAc,CAACY,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;QAC5C;QACA,IAAIS,WAAW,GAAGpB,cAAc,CAACW,CAAD,CAAhC,CAF4C,CAG5C;;QACA,IAAI+G,IAAI,GAAGtG,WAAW,CAAC,MAAD,CAAtB;;QACA,IAAI,KAAK7B,SAAL,CAAewG,kBAAnB,EAAuC;UACnC,IAAI3E,WAAW,CAACE,IAAZ,KAAqB,KAArB,IAA8BF,WAAW,CAACE,IAAZ,KAAqB,gBAAnD,IAAuEF,WAAW,CAACE,IAAZ,KAAqB,eAAhG,EAAiH;YAC7G,KAAK0M,sBAAL,CAA4B5M,WAA5B,EAAyC,IAAzC;UACH;QACJ,CAJD,MAKK;UACD,IAAIA,WAAW,CAACE,IAAZ,KAAqB,KAAzB,EAAgC;YAC5B;YACA,IAAI2M,mBAAmB,GAAG;cAAE9J,IAAI,EAAE,KAAK+J,gBAAL,CAAsB9M,WAAtB,CAAR;cAA4Cb,EAAE,EAAE,KAAKhB,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,QAA5B,GAAuCkB,UAAU,CAACL,WAAW,CAAC,WAAD,CAAZ,CAAjD,GAA8E,GAA9E,GAAoFT,CAApI;cAAuIkE,UAAU,EAAE,KAAnJ;cAA0J6C,IAAI,EAAEtG,WAAW,CAACC,cAAZ,GAA6B,cAA7B,GAA8CqG,IAA9M;cAAoNrD,KAAK,EAAE,KAAK8J,mBAAL,CAAyB/M,WAAzB,CAA3N;cAAkQgN,QAAQ,EAAE,EAA5Q;cAAgRtJ,UAAU,EAAE1D,WAAW,CAACyE;YAAxS,CAA1B;YACA,KAAKtG,SAAL,CAAemG,oBAAf,CAAoCuF,IAApC,CAAyCgD,mBAAzC;UACH;QACJ;MACJ;IACJ;EACJ,CAzBD;;EA0BArP,UAAU,CAACa,SAAX,CAAqBuO,sBAArB,GAA8C,UAAU5M,WAAV,EAAuBiN,YAAvB,EAAqC;IAC/E,IAAI3M,UAAJ;IACA,IAAIC,SAAJ;IACA,IAAIC,QAAJ;;IACA,IAAIR,WAAW,CAACH,SAAZ,KAA0B,EAA9B,EAAkC;MAC9B,IAAIG,WAAW,CAACC,cAAhB,EAAgC;QAC5BD,WAAW,CAACE,IAAZ,GAAmB,cAAnB;MACH,CAH6B,CAI9B;;;MACA,IAAIC,IAAI,GAAGH,WAAW,CAAC,MAAD,CAAtB;;MACA,IAAIG,IAAI,KAAK,IAAT,IAAiBA,IAAI,CAACM,MAA1B,EAAkC;QAC9BH,UAAU,GAAGH,IAAI,CAACD,IAAlB;;QACA,IAAIC,IAAI,CAACO,MAAT,EAAiB;UACbH,SAAS,GAAG,QAAZ;QACH;;QACD,IAAIJ,IAAI,CAACQ,IAAT,EAAe;UACXJ,SAAS,GAAG,MAAZ;QACH;;QACD,IAAIJ,IAAI,CAACS,SAAT,EAAoB;UAChBL,SAAS,GAAG,eAAZ;QACH;;QACD,IAAIJ,IAAI,CAACU,SAAT,EAAoB;UAChBN,SAAS,GAAG,WAAZ;QACH;;QACDC,QAAQ,GAAG,KAAKM,mBAAL,CAAyBX,IAAI,CAACY,IAA9B,CAAX;MACH;;MACD,IAAIC,aAAa,GAAGhB,WAAW,CAACiB,SAAZ,KAA0B,CAA1B,GAA8B,OAA9B,GAAyCjB,WAAW,CAACiB,SAAZ,KAA0B,CAA1B,GAA8B,QAA9B,GAAyC,MAAtG;MACA,IAAIC,eAAe,GAAGlB,WAAW,CAAC,WAAD,CAAjC;MACA,IAAImB,MAAM,GAAGnB,WAAW,CAAC,YAAD,CAAxB;MACA,IAAIoB,SAAS,GAAG,UAAUF,eAAe,CAACG,CAA1B,GAA8B,GAA9B,GAAoCH,eAAe,CAACI,CAApD,GAAwD,GAAxD,GAA8DJ,eAAe,CAACK,CAA9E,GAAkF,GAAlF,GAAwF,CAAxF,GAA4F,GAA5G;MACAH,SAAS,GAAG,KAAKK,SAAL,CAAeL,SAAf,CAAZ,CA1B8B,CA2B9B;;MACA,IAAIA,SAAS,KAAK,WAAlB,EAA+B;QAC3BA,SAAS,GAAG,WAAZ;MACH,CA9B6B,CA+B9B;;;MACA,IAAIM,SAAS,GAAG1B,WAAW,CAAC,WAAD,CAA3B;MACA,IAAI2B,IAAI,GAAG,KAAKb,mBAAL,CAAyBK,MAAM,CAACS,CAAhC,CAAX;MACA,IAAIsL,KAAK,GAAG,KAAKpM,mBAAL,CAAyBK,MAAM,CAACW,CAAhC,CAAZ;MACA,IAAIC,KAAK,GAAG,KAAKjB,mBAAL,CAAyBK,MAAM,CAACa,KAAhC,CAAZ;MACA,IAAIC,MAAM,GAAG,KAAKnB,mBAAL,CAAyBK,MAAM,CAACV,MAAhC,CAAb;MACA,IAAIyB,UAAU,GAAG;QAAEP,IAAI,EAAEA,IAAR;QAAcQ,GAAG,EAAE+K,KAAnB;QAA0BnL,KAAK,EAAEA,KAAjC;QAAwCE,MAAM,EAAEA;MAAhD,CAAjB;MACA,IAAIO,SAAS,GAAG,UAAUd,SAAS,CAACL,CAApB,GAAwB,GAAxB,GAA8BK,SAAS,CAACJ,CAAxC,GAA4C,GAA5C,GAAkDI,SAAS,CAACH,CAA5D,GAAgE,GAAhE,GAAsE,CAAtE,GAA0E,GAA1F;MACAiB,SAAS,GAAG,KAAKf,SAAL,CAAee,SAAf,CAAZ;MACA,IAAIC,WAAW,GAAGzC,WAAW,CAAC,aAAD,CAA7B;MACA,IAAI0C,SAAS,GAAG,UAAUD,WAAW,CAACpB,CAAtB,GAA0B,GAA1B,GAAgCoB,WAAW,CAACnB,CAA5C,GAAgD,GAAhD,GAAsDmB,WAAW,CAAClB,CAAlE,GAAsE,GAAtE,GAA4E,CAA5E,GAAgF,GAAhG;MACAmB,SAAS,GAAG,KAAKjB,SAAL,CAAeiB,SAAf,CAAZ;MACA,IAAIC,WAAW,GAAG3C,WAAW,CAAC,aAAD,CAA7B;MACA,KAAK9B,aAAL,GAAqB,EAArB;MACA,IAAI2E,eAAe,GAAG;QAClB1B,MAAM,EAAE;UAAES,CAAC,EAAEM,UAAU,CAACP,IAAhB;UAAsBG,CAAC,EAAEI,UAAU,CAACC,GAApC;UAAyCH,KAAK,EAAEE,UAAU,CAACH,KAA3D;UAAkEtB,MAAM,EAAEyB,UAAU,CAACD;QAArF,CADU;QACqFa,UAAU,EAAEzC,UAAU,CAACL,WAAW,CAAC,WAAD,CAAZ,CAAV,GAAuC,CADxI;QAC2I+C,IAAI,EAAE/C,WAAW,CAAC,iBAAD,CAD5J;QACiLgD,OAAO,EAAEhD,WAAW,CAAC,SAAD,CADrM;QAElBiD,KAAK,EAAEjD,WAAW,CAAC,MAAD,CAFA;QAEUkD,SAAS,EAAElD,WAAW,CAAC,UAAD,CAFhC;QAE8CmD,UAAU,EAAEnD,WAAW,CAAC,UAAD,CAFrE;QAEmFM,UAAU,EAAEA,UAF/F;QAE2GC,SAAS,EAAEA,SAFtH;QAEiIW,eAAe,EAAEE,SAFlJ;QAE6JgC,KAAK,EAAEZ,SAFpK;QAE+KC,WAAW,EAAEC,SAF5L;QAEuMW,SAAS,EAAEV,WAFlN;QAE+NnC,QAAQ,EAAEA,QAFzO;QAEmP8C,WAAW,EAAEtD,WAAW,CAACuD,SAF5Q;QAGlBE,UAAU,EAAEzD,WAAW,CAAC,YAAD,CAHL;QAGqB0D,UAAU,EAAE1D,WAAW,CAAC,YAAD,CAH5C;QAG4D2D,SAAS,EAAE3C,aAHvE;QAGsF4C,OAAO,EAAE,KAAKC,aAAL,CAAmB7D,WAAnB,CAH/F;QAGgI9B,aAAa,EAAE,KAAKA,aAHpJ;QAGmK4F,SAAS,EAAE9D,WAAW,CAAC+D,SAH1L;QAGqMC,UAAU,EAAEhE,WAAW,CAACiE,OAAZ,KAAwB,CAAxB,GAA4B,QAA5B,GAAuC,SAHxP;QAGmQ9D,IAAI,EAAE;UAAE+D,QAAQ,EAAE,CAAC/G,iBAAiB,CAACgD,IAAD,CAAlB,GAA2BA,IAAI,CAACO,MAAhC,GAAyC,KAArD;UAA4DyD,MAAM,EAAE,CAAChH,iBAAiB,CAACgD,IAAD,CAAlB,GAA2BA,IAAI,CAACQ,IAAhC,GAAuC,KAA3G;UAAkHyD,WAAW,EAAE,CAACjH,iBAAiB,CAACgD,IAAD,CAAlB,GAA2BA,IAAI,CAACS,SAAhC,GAA4C,KAA3K;UAAkLyD,WAAW,EAAE,CAAClH,iBAAiB,CAACgD,IAAD,CAAlB,GAA2BA,IAAI,CAACU,SAAhC,GAA4C;QAA3O;MAHzQ,CAAtB;;MAKA,IAAIb,WAAW,CAACE,IAAZ,KAAqB,UAArB,IAAmCF,WAAW,CAACE,IAAZ,KAAqB,SAA5D,EAAuE;QACnE2C,eAAe,CAACI,KAAhB,GAAwBjD,WAAW,CAAC,eAAD,CAAnC;MACH,CApD6B,CAqD9B;;;MACA,IAAIuE,SAAS,GAAG,KAAKC,gBAAL,CAAsBxE,WAAtB,CAAhB;;MACA,IAAIuE,SAAS,KAAK,gBAAd,IAAkCA,SAAS,KAAK,cAApD,EAAoE;QAChE,KAAKU,gBAAL,CAAsBjF,WAAtB;;QACA,IAAI,KAAKnC,gBAAT,EAA2B;UACvBgF,eAAe,CAACI,KAAhB,GAAwBjD,WAAW,CAACkF,KAApC;QACH;MACJ;;MACD,IAAIiI,YAAY,GAAG,KAAKhP,SAAL,CAAewG,kBAAf,CAAkCC,YAAlC,CAA+CL,SAA/C,EAA0D1B,eAA1D,EAA2EoK,YAA3E,CAAnB;MACA,OAAOE,YAAP;IACH;;IACD,OAAO,IAAP;EACH,CArED;EAsEA;AACJ;AACA;AACA;;;EACI3P,UAAU,CAACa,SAAX,CAAqByI,0BAArB,GAAkD,UAAUrH,SAAV,EAAqB;IACnE,IAAI6G,IAAI,GAAG7G,SAAS,CAAC,MAAD,CAApB;IACA,IAAIoN,mBAAmB,GAAG;MACtB9J,IAAI,EAAE,KAAK+J,gBAAL,CAAsBrN,SAAtB,CADgB;MACkBN,EAAE,EAAEM,SAAS,CAACsL,QADhC;MAC0CtH,UAAU,EAAEhE,SAAS,CAAC2N,UADhE;MAC4E1J,UAAU,EAAEjE,SAAS,CAACgF,UADlG;MAC8GtB,UAAU,EAAEmD,IAAI,KAAK,UAAT,GAAsB,KAAtB,GAA8B7G,SAAS,CAAC4N,QADlK;MAEtBnK,SAAS,EAAEoD,IAAI,KAAK,aAAT,GAAyB,KAAzB,GAAiC7G,SAAS,CAAC4N,QAFhC;MAE0C/G,IAAI,EAAEA,IAFhD;MAEsDrD,KAAK,EAAEqD,IAAI,KAAK,SAAT,IAAsBA,IAAI,KAAK,UAA/B,GAA4C7G,SAAS,CAAC6N,aAAtD,GAAsE7N,SAAS,CAACyF,KAF7I;MAEoJ8H,QAAQ,EAAEvN,SAAS,CAAC8N,UAAV,GAAuB9N,SAAS,CAAC8N,UAAjC,GAA8C;IAF5M,CAA1B;IAIA,KAAKpP,SAAL,CAAemG,oBAAf,CAAoC,KAAKnG,SAAL,CAAemG,oBAAf,CAAoCkJ,SAApC,CAA8C,UAAUC,EAAV,EAAc;MAAE,OAAOA,EAAE,CAACtO,EAAH,KAAU0N,mBAAmB,CAAC1N,EAArC;IAA0C,CAAxG,CAApC,IAAiJ0N,mBAAjJ;EACH,CAPD,CA5oBwC,CAopBxC;;;EACArP,UAAU,CAACa,SAAX,CAAqBqP,qBAArB,GAA6C,UAAUC,UAAV,EAAsB;IAC/D,KAAK5P,kBAAL,CAAwB8L,IAAxB,CAA6B8D,UAAU,CAACxO,EAAxC;;IACA,IAAIwO,UAAJ,EAAgB;MACZ;MACA,IAAIC,cAAc,GAAG5O,QAAQ,CAACC,cAAT,CAAwB0O,UAAU,CAACxO,EAAnC,CAArB;;MACA,IAAIyO,cAAJ,EAAoB;QAChB,IAAID,UAAU,CAAClK,UAAf,EAA2B;UACvBmK,cAAc,CAAC5I,QAAf,GAA0B,IAA1B;UACA4I,cAAc,CAAC9I,KAAf,CAAqB5D,eAArB,GAAuC,EAAvC;UACA0M,cAAc,CAAC9I,KAAf,CAAqB+I,MAArB,GAA8B,SAA9B;QACH,CAJD,MAKK;UACD,IAAID,cAAc,CAAC9I,KAAf,CAAqB5D,eAArB,KAAyC,EAA7C,EAAiD;YAC7C0M,cAAc,CAAC9I,KAAf,CAAqB5D,eAArB,GAAuC,uBAAvC;UACH;;UACD0M,cAAc,CAAC5I,QAAf,GAA0B,KAA1B;UACA4I,cAAc,CAAC9I,KAAf,CAAqB+I,MAArB,GAA8B,EAA9B;QACH;MACJ;;MACD,KAAKC,mBAAL,CAAyBF,cAAzB;IACH;EACJ,CArBD;EAsBA;AACJ;AACA;AACA;EACI;;;EACApQ,UAAU,CAACa,SAAX,CAAqByO,gBAArB,GAAwC,UAAU9M,WAAV,EAAuB;IAC3D;IACA,IAAIwF,YAAJ,CAF2D,CAG3D;;IACA,QAAQxF,WAAW,CAAC,MAAD,CAAnB;MACI,KAAK,SAAL;MACA,KAAK,UAAL;MACA,KAAK,gBAAL;MACA,KAAK,cAAL;QACIwF,YAAY,GAAGxF,WAAW,CAACH,SAA3B;QACA;;MACJ,KAAK,aAAL;MACA,KAAK,UAAL;QACI2F,YAAY,GAAGxF,WAAW,CAAC+N,SAA3B;QACA;;MACJ,KAAK,UAAL;MACA,KAAK,SAAL;QACIvI,YAAY,GAAGxF,WAAW,CAACgO,IAA3B;QACA;IAdR;;IAgBA,OAAOxI,YAAP;EACH,CArBD,CAhrBwC,CAssBxC;;;EACAhI,UAAU,CAACa,SAAX,CAAqB0O,mBAArB,GAA2C,UAAU/M,WAAV,EAAuB;IAC9D;IACA,IAAIwF,YAAJ,CAF8D,CAG9D;;IACA,QAAQxF,WAAW,CAAC,MAAD,CAAnB;MACI,KAAK,SAAL;MACA,KAAK,UAAL;QACIwF,YAAY,GAAGxF,WAAW,CAACgO,IAA3B;QACA;;MACJ,KAAK,gBAAL;QACIxI,YAAY,GAAGxF,WAAW,CAACkF,KAA3B;QACA;;MACJ,KAAK,aAAL;MACA,KAAK,UAAL;QACIM,YAAY,GAAGxF,WAAW,CAACqN,QAA3B;QACA;;MACJ,KAAK,UAAL;QACI7H,YAAY,GAAGxF,WAAW,CAACsN,aAA3B;QACA;;MACJ,KAAK,SAAL;QACI9H,YAAY,GAAGxF,WAAW,CAACiO,YAA3B;QACA;IAjBR;;IAmBA,OAAOzI,YAAP;EACH,CAxBD,CAvsBwC,CAguBxC;;;EACAhI,UAAU,CAACa,SAAX,CAAqB6P,kBAArB,GAA0C,UAAUC,UAAV,EAAsBhN,MAAtB,EAA8B5C,SAA9B,EAAyC;IAC/E;IACA,IAAI4L,WAAW,GAAG,KAAK/L,aAAL,CAAmBgM,QAAnB,CAA4B7L,SAA5B,CAAlB,CAF+E,CAG/E;;IACA,IAAI6P,KAAK,GAAG,CAAZ;;IACA,QAAQjE,WAAW,CAACE,QAApB;MACI,KAAK,CAAL;QACI+D,KAAK,GAAGjN,MAAR;QACA;;MACJ,KAAK,CAAL;QACIiN,KAAK,GAAG;UAAEC,CAAC,EAAElN,MAAM,CAACkN,CAAP,GAAWF,UAAU,CAACnM,KAAtB,GAA+Bb,MAAM,CAACY,KAAP,GAAe,GAAnD;UAAyDiG,CAAC,EAAEmC,WAAW,CAACpI,KAAZ,GAAoBoM,UAAU,CAACvM,CAA/B,GAAoCT,MAAM,CAACc,MAAP,GAAgB;QAAhH,CAAR;QACA;;MACJ,KAAK,CAAL;QACImM,KAAK,GAAG;UAAEC,CAAC,EAAElE,WAAW,CAACpI,KAAZ,GAAoBZ,MAAM,CAACkN,CAA3B,GAA+BlN,MAAM,CAACY,KAA3C;UAAkDiG,CAAC,EAAEmC,WAAW,CAAClI,MAAZ,GAAqBd,MAAM,CAAC6G,CAA5B,GAAgC7G,MAAM,CAACc;QAA5F,CAAR;QACA;;MACJ,KAAK,CAAL;QACImM,KAAK,GAAG;UAAEC,CAAC,EAAElN,MAAM,CAAC6G,CAAP,GAAY7G,MAAM,CAACY,KAAP,GAAe,CAA3B,GAAgCZ,MAAM,CAACc,MAA5C;UAAoD+F,CAAC,EAAE7G,MAAM,CAACkN,CAAP,GAAYlN,MAAM,CAACY,KAAP,GAAe;QAAlF,CAAR;QACA;IAZR;;IAcA,OAAOqM,KAAP;EACH,CApBD;EAqBA;AACJ;AACA;EACI;;;EACA5Q,UAAU,CAACa,SAAX,CAAqBiQ,sBAArB,GAA8C,YAAY;IACtD;IACA,IAAI5P,IAAI,GAAG,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,aAA7C,CAAX;;IACA,IAAID,IAAJ,EAAU;MACN;MACA,IAAIE,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAArB,CAFM,CAGN;;MACA,IAAI6P,KAAK,GAAG,EAAZ;MACA,IAAIC,UAAU,GAAG,EAAjB;;MACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7P,cAAc,CAACY,MAAnC,EAA2CiP,CAAC,EAA5C,EAAgD;QAC5C;QACA,IAAIzO,WAAW,GAAGpB,cAAc,CAAC6P,CAAD,CAAhC;QACA,IAAI/K,UAAU,GAAG1D,WAAW,CAACyE,UAA7B;;QACA,IAAIzE,WAAW,CAACE,IAAZ,KAAqB,SAArB,IAAkCF,WAAW,CAACE,IAAZ,KAAqB,UAAvD,IAAqEF,WAAW,CAACuD,SAArF,EAAgG;UAC5F,IAAIG,UAAU,KAAK1D,WAAW,CAACgO,IAAZ,KAAqB,EAArB,IAA2BhO,WAAW,CAACgO,IAAZ,KAAqB,IAArD,CAAd,EAA0E;YACtE,KAAK5P,aAAL,CAAmBsQ,YAAnB,GAAkC,IAAlC;YACA,KAAKtQ,aAAL,CAAmBuQ,iBAAnB,CAAqC3O,WAAW,CAACH,SAAjD,IAA8DG,WAAW,CAACgO,IAA1E;UACH,CAHD,MAIK;YACD,OAAQ,KAAK5P,aAAL,CAAmBuQ,iBAAnB,CAAqC3O,WAAW,CAACH,SAAjD,CAAR;UACH;;UACD2O,UAAU,GAAG;YAAEI,UAAU,EAAE5O,WAAW,CAACgO,IAA1B;YAAgCvK,UAAU,EAAEzD,WAAW,CAACoN;UAAxD,CAAb;UACAmB,KAAK,CAACvO,WAAW,CAACH,SAAb,CAAL,GAA+B2O,UAA/B;QACH,CAVD,MAWK,IAAIxO,WAAW,CAACE,IAAZ,KAAqB,aAArB,IAAsCF,WAAW,CAACqN,QAAtD,EAAgE;UACjE,IAAI3J,UAAU,IAAI1D,WAAW,CAACqN,QAAZ,KAAyB,KAA3C,EAAkD;YAC9C,KAAKjP,aAAL,CAAmBsQ,YAAnB,GAAkC,IAAlC;YACA,KAAKtQ,aAAL,CAAmBuQ,iBAAnB,CAAqC3O,WAAW,CAAC+N,SAAjD,IAA8D/N,WAAW,CAACkF,KAA1E;UACH,CAHD,MAIK;YACD,OAAQ,KAAK9G,aAAL,CAAmBuQ,iBAAnB,CAAqC3O,WAAW,CAAC+N,SAAjD,CAAR;UACH;;UACDS,UAAU,GAAG;YAAEI,UAAU,EAAE5O,WAAW,CAACkF,KAA1B;YAAiCzB,UAAU,EAAEzD,WAAW,CAACoN;UAAzD,CAAb;UACAmB,KAAK,CAACvO,WAAW,CAAC+N,SAAb,CAAL,GAA+BS,UAA/B;QACH,CAVI,MAWA,IAAIxO,WAAW,CAACE,IAAZ,KAAqB,UAAzB,EAAqC;UACtC,IAAIwD,UAAU,IAAI1D,WAAW,CAACqN,QAAZ,KAAyB,KAA3C,EAAkD;YAC9C,KAAKjP,aAAL,CAAmBsQ,YAAnB,GAAkC,IAAlC;YACA,KAAKtQ,aAAL,CAAmBuQ,iBAAnB,CAAqC3O,WAAW,CAAC+N,SAAjD,IAA8D/N,WAAW,CAACqN,QAA1E;UACH,CAHD,MAIK;YACD,OAAQ,KAAKjP,aAAL,CAAmBuQ,iBAAnB,CAAqC3O,WAAW,CAAC+N,SAAjD,CAAR;UACH;;UACD,IAAI/N,WAAW,CAAC6O,aAAZ,IAA6B7O,WAAW,CAACqN,QAA7C,EAAuD;YACnDmB,UAAU,GAAG;cAAEI,UAAU,EAAE5O,WAAW,CAAC6O,aAA1B;cAAyCpL,UAAU,EAAEzD,WAAW,CAACoN;YAAjE,CAAb;YACAmB,KAAK,CAACvO,WAAW,CAAC+N,SAAb,CAAL,GAA+BS,UAA/B;UACH,CAHD,MAIK,IAAID,KAAK,CAACvO,WAAW,CAAC+N,SAAb,CAAL,KAAiCe,SAAjC,IAA8CP,KAAK,CAACvO,WAAW,CAAC+N,SAAb,CAAL,KAAiC,IAAnF,EAAyF;YAC1FS,UAAU,GAAG;cAAEI,UAAU,EAAE5O,WAAW,CAACqN,QAA1B;cAAoC5J,UAAU,EAAEzD,WAAW,CAACoN;YAA5D,CAAb;YACAmB,KAAK,CAACvO,WAAW,CAAC+N,SAAb,CAAL,GAA+BS,UAA/B;UACH;QACJ,CAhBI,MAiBA,IAAIxO,WAAW,CAACE,IAAZ,KAAqB,UAAzB,EAAqC;UACtC,IAAIwD,UAAU,IAAI1D,WAAW,CAACsN,aAAZ,KAA8B,EAAhD,EAAoD;YAChD,KAAKlP,aAAL,CAAmBsQ,YAAnB,GAAkC,IAAlC;YACA,KAAKtQ,aAAL,CAAmBuQ,iBAAnB,CAAqC3O,WAAW,CAACgO,IAAjD,IAAyDhO,WAAW,CAACsN,aAArE;UACH,CAHD,MAIK;YACD,OAAQ,KAAKlP,aAAL,CAAmBuQ,iBAAnB,CAAqC3O,WAAW,CAACgO,IAAjD,CAAR;UACH;;UACDQ,UAAU,GAAG;YAAEI,UAAU,EAAE5O,WAAW,CAACsN,aAA1B;YAAyC7J,UAAU,EAAEzD,WAAW,CAACoN;UAAjE,CAAb;UACAmB,KAAK,CAACvO,WAAW,CAACgO,IAAb,CAAL,GAA0BQ,UAA1B;QACH,CAVI,MAWA,IAAIxO,WAAW,CAACE,IAAZ,KAAqB,SAAzB,EAAoC;UACrC;UACA,IAAI6O,UAAU,GAAG/O,WAAW,CAAC,UAAD,CAA5B;UACA,IAAIgP,cAAc,GAAG,EAArB;;UACA,KAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGjP,WAAW,CAACiO,YAAZ,CAAyBzO,MAAjD,EAAyDyP,GAAG,EAA5D,EAAgE;YAC5D;YACA,IAAIrB,cAAc,GAAG5N,WAAW,CAACiO,YAAZ,CAAyBgB,GAAzB,CAArB;YACAD,cAAc,CAACnF,IAAf,CAAoBkF,UAAU,CAACnB,cAAD,CAA9B;UACH;;UACDY,UAAU,GAAG;YAAEI,UAAU,EAAE/P,IAAI,CAACqQ,SAAL,CAAeF,cAAf,CAAd;YAA8CvL,UAAU,EAAEzD,WAAW,CAACoN;UAAtE,CAAb;UACAmB,KAAK,CAACvO,WAAW,CAACgO,IAAb,CAAL,GAA0BQ,UAA1B;QACH,CAXI,MAYA,IAAIxO,WAAW,CAACE,IAAZ,KAAqB,gBAArB,IAAyCF,WAAW,CAACE,IAAZ,KAAqB,cAAlE,EAAkF;UACnF;UACA,IAAIiP,MAAM,GAAG,KAAK,CAAlB;;UACA,IAAInP,WAAW,CAACkF,KAAZ,KAAsB,IAAtB,IAA8BlF,WAAW,CAACkF,KAAZ,KAAsB,EAAxD,EAA4D;YACxD,KAAKD,gBAAL,CAAsBjF,WAAtB;UACH;;UACD,IAAIA,WAAW,CAACkF,KAAZ,IAAqBlF,WAAW,CAACkF,KAAZ,KAAsB,EAA/C,EAAmD;YAC/CiK,MAAM,GAAGnP,WAAW,CAACkF,KAArB;YACA,IAAI5E,UAAU,GAAGN,WAAW,CAACM,UAAZ,GAAyBN,WAAW,CAACM,UAArC,GAAkDN,WAAW,CAACuN,UAA/E;;YACA,IAAIjN,UAAJ,EAAgB;cACZiO,KAAK,CAACvO,WAAW,CAACH,SAAZ,GAAwB,UAAzB,CAAL,GAA4CS,UAA5C;cACAiO,KAAK,CAACvO,WAAW,CAACH,SAAZ,GAAwB,UAAzB,CAAL,GAA4CG,WAAW,CAACQ,QAAZ,GAAuBR,WAAW,CAACQ,QAAnC,GAA8CR,WAAW,CAACoP,QAAtG;YACH,CAHD,MAIK,IAAIpP,WAAW,CAACkF,KAAZ,CAAkBpF,KAAlB,CAAwB,SAAxB,EAAmC,CAAnC,CAAJ,EAA2C;cAC5CyO,KAAK,CAACvO,WAAW,CAACH,SAAZ,GAAwB,WAAzB,CAAL,GAA6C,IAA7C;YACH,CAFI,MAGA;cACD;cACA,IAAIwP,cAAc,GAAGhS,eAAe,CAAC2C,WAAW,CAACkF,KAAb,CAApC;cACAiK,MAAM,GAAG/R,oBAAoB,CAACiS,cAAD,CAA7B;YACH;UACJ;;UACD,IAAI3L,UAAU,IAAI1D,WAAW,CAACkF,KAAZ,KAAsB,IAApC,IAA4ClF,WAAW,CAACkF,KAAZ,KAAsB,EAAtE,EAA0E;YACtE,KAAK9G,aAAL,CAAmBsQ,YAAnB,GAAkC,IAAlC;YACA,KAAKtQ,aAAL,CAAmBuQ,iBAAnB,CAAqC3O,WAAW,CAACH,SAAjD,IAA8DhB,IAAI,CAACqQ,SAAL,CAAeC,MAAf,CAA9D;UACH,CAHD,MAIK;YACD,OAAQ,KAAK/Q,aAAL,CAAmBuQ,iBAAnB,CAAqC3O,WAAW,CAACH,SAAjD,CAAR;UACH;;UACD0O,KAAK,CAACvO,WAAW,CAACH,SAAb,CAAL,GAA+BhB,IAAI,CAACqQ,SAAL,CAAeC,MAAf,CAA/B;;UACA,IAAInP,WAAW,CAACsP,MAAhB,EAAwB;YACpB;YACA,IAAInO,MAAM,GAAG,KAAK+M,kBAAL,CAAwBlO,WAAW,CAACmO,UAApC,EAAgDnO,WAAW,CAACsP,MAA5D,EAAoEtP,WAAW,CAACL,SAAhF,CAAb;YACAK,WAAW,CAACsP,MAAZ,CAAmBjB,CAAnB,GAAuBlN,MAAM,CAACkN,CAA9B;YACArO,WAAW,CAACsP,MAAZ,CAAmBtH,CAAnB,GAAuB7G,MAAM,CAAC6G,CAA9B;YACAuG,KAAK,CAACvO,WAAW,CAACH,SAAZ,GAAwB,QAAzB,CAAL,GAA0ChB,IAAI,CAACqQ,SAAL,CAAelP,WAAW,CAACsP,MAA3B,CAA1C;UACH,CAND,MAOK;YACD;YACA,IAAIC,UAAU,GAAGvP,WAAW,CAACmO,UAA7B,CAFC,CAGD;;YACA,IAAIhN,MAAM,GAAG;cAAEkN,CAAC,EAAE,KAAKvN,mBAAL,CAAyByO,UAAU,CAAC3N,CAApC,CAAL;cAA6CoG,CAAC,EAAE,KAAKlH,mBAAL,CAAyByO,UAAU,CAACzN,CAApC,CAAhD;cAAwFC,KAAK,EAAE,KAAKjB,mBAAL,CAAyByO,UAAU,CAACvN,KAApC,CAA/F;cAA2IC,MAAM,EAAE,KAAKnB,mBAAL,CAAyByO,UAAU,CAAC9O,MAApC;YAAnJ,CAAb;YACA8N,KAAK,CAACvO,WAAW,CAACH,SAAZ,GAAwB,QAAzB,CAAL,GAA0ChB,IAAI,CAACqQ,SAAL,CAAe/N,MAAf,CAA1C;UACH;;UACDoN,KAAK,CAACvO,WAAW,CAACH,SAAZ,GAAwB,YAAzB,CAAL,GAA8CG,WAAW,CAACoN,UAA1D;QACH;MACJ;;MACD,OAAQvO,IAAI,CAACqQ,SAAL,CAAeX,KAAf,CAAR;IACH;EACJ,CA5HD;;EA6HA/Q,UAAU,CAACa,SAAX,CAAqB6I,eAArB,GAAuC,UAAUsI,KAAV,EAAiB;IACpD;IACA,IAAI3E,aAAa,GAAG2E,KAAK,CAACC,MAA1B,CAFoD,CAGpD;;IACA,IAAI5E,aAAa,IAAKA,aAAa,CAACmB,SAAd,KAA4B,iCAA5B,IAAiEnB,aAAa,CAACmB,SAAd,KAA4B,sDAAnH,EAA4K;MACxK;MACA,IAAI0D,eAAe,GAAG7E,aAAa,CAAC/F,KAAd,CAAoB5D,eAA1C,CAFwK,CAGxK;;MACA,IAAIyO,YAAY,GAAGD,eAAe,CAACE,WAAhB,CAA4B,GAA5B,CAAnB,CAJwK,CAKxK;;MACA,IAAIC,YAAY,GAAGH,eAAe,CAACI,KAAhB,CAAsB,CAAtB,EAAyBH,YAAY,GAAG,CAAxC,IAA6C,CAA7C,GAAiD,GAApE;MACA9E,aAAa,CAAC/F,KAAd,CAAoB5D,eAApB,GAAsC2O,YAAtC;IACH,CARD,MASK,IAAIhF,aAAJ,EAAmB;MACpB;MACA,IAAIA,aAAa,CAACmB,SAAd,KAA4B,iCAA5B,IAAiEnB,aAAa,CAACmB,SAAd,KAA4B,2CAA7F,IAA4InB,aAAa,CAACmB,SAAd,KAA4B,sDAAxK,IAAkOnB,aAAa,CAACmB,SAAd,KAA4B,iEAAlQ,EAAqU;QACjU,KAAKE,QAAL,CAAcrB,aAAa,CAAC1L,EAA5B;MACH;IACJ;EACJ,CAnBD;;EAoBA3B,UAAU,CAACa,SAAX,CAAqB+I,cAArB,GAAsC,UAAUoI,KAAV,EAAiB;IACnD;IACA,IAAI3E,aAAa,GAAG2E,KAAK,CAACC,MAA1B;;IACA,IAAI5E,aAAa,CAAC9E,YAAd,IAA8B,KAAKjI,cAAvC,EAAuD;MACnD;MACA,IAAIqC,IAAI,GAAGP,QAAQ,CAACiL,aAAa,CAAC/F,KAAd,CAAoB/C,KAArB,CAAR,GAAuCnC,QAAQ,CAACiL,aAAa,CAAC/F,KAAd,CAAoB7C,MAArB,CAAR,GAAuC,CAAzF;MACA4I,aAAa,CAAC/F,KAAd,CAAoB/C,KAApB,GAA4B,KAAK5B,IAAL,GAAY,IAAxC;MACA,KAAKrC,cAAL,GAAsB,KAAtB;IACH;;IACD,IAAI+M,aAAa,CAACvE,IAAd,KAAuB,UAA3B,EAAuC;MACnC,KAAKnI,SAAL,CAAe4R,qBAAf,CAAqClF,aAAa,CAAC9H,IAAnD,EAAyD8H,aAAa,CAACmF,OAAvE;IACH,CAFD,MAGK;MACD,KAAK7R,SAAL,CAAe4R,qBAAf,CAAqClF,aAAa,CAAC9H,IAAnD,EAAyD8H,aAAa,CAAC5H,KAAvE;IACH,CAdkD,CAenD;;;IACA,IAAIyM,eAAe,GAAG7E,aAAa,CAAC/F,KAAd,CAAoB5D,eAA1C,CAhBmD,CAiBnD;;IACA,IAAIyO,YAAY,GAAGD,eAAe,CAACE,WAAhB,CAA4B,GAA5B,CAAnB,CAlBmD,CAmBnD;;IACA,IAAIC,YAAY,GAAGH,eAAe,CAACI,KAAhB,CAAsB,CAAtB,EAAyBH,YAAY,GAAG,CAAxC,IAA6C,GAA7C,GAAmD,GAAtE;IACA9E,aAAa,CAAC/F,KAAd,CAAoB5D,eAApB,GAAsC2O,YAAtC;EACH,CAtBD;;EAuBArS,UAAU,CAACa,SAAX,CAAqBgJ,gBAArB,GAAwC,UAAUmI,KAAV,EAAiB;IACrD;IACA,IAAI3E,aAAa,GAAG2E,KAAK,CAACC,MAA1B;;IACA,IAAI5E,aAAa,CAACmB,SAAd,KAA4B,qBAAhC,EAAuD;MACnDnB,aAAa,GAAGA,aAAa,CAAChG,aAA9B;MACA,KAAKiJ,mBAAL,CAAyBjD,aAAzB;IACH,CAHD,MAIK,IAAIA,aAAa,CAACmB,SAAd,KAA4B,iCAA5B,IAAiEnB,aAAa,CAACmB,SAAd,KAA4B,sDAAjG,EAAyJ;MAC1J,KAAKnB,aAAL,GAAqBA,aAArB;IACH,CAFI,MAGA,IAAIA,aAAa,CAACmB,SAAd,KAA4B,iBAA5B,IAAiDnB,aAAa,CAACvE,IAAd,KAAuB,QAA5E,EAAsF;MACvF,KAAKnI,SAAL,CAAe8R,yBAAf,CAAyCpF,aAAa,CAAC5H,KAAvD,EAA8D4H,aAAa,CAAC9H,IAA5E,EAAkF8H,aAAa,CAAC1L,EAAhG;IACH;;IACD,KAAK,IAAIsP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtQ,SAAL,CAAemG,oBAAf,CAAoC9E,MAAxD,EAAgEiP,CAAC,EAAjE,EAAqE;MACjE,IAAI5D,aAAa,CAAC1L,EAAd,KAAqB,KAAKhB,SAAL,CAAemG,oBAAf,CAAoCmK,CAApC,EAAuCtP,EAAhE,EAAoE;QAChE,IAAI,KAAKhB,SAAL,CAAewG,kBAAf,IAAqC,KAAKxG,SAAL,CAAeyN,gBAAxD,EAA0E;UACtE,KAAKzN,SAAL,CAAe+R,uBAAf,CAAuC,kBAAvC,EAA2D,KAAK/R,SAAL,CAAemG,oBAAf,CAAoCmK,CAApC,CAA3D;QACH,CAH+D,CAIhE;;;QACA,IAAI5D,aAAa,CAACmB,SAAd,KAA4B,iCAA5B,IAAiEnB,aAAa,CAACmB,SAAd,KAA4B,2CAA7F,IAA4InB,aAAa,CAACmB,SAAd,KAA4B,sDAAxK,IAAkOnB,aAAa,CAACmB,SAAd,KAA4B,iEAAlQ,EAAqU;UACjU,KAAKE,QAAL,CAAcrB,aAAa,CAAC1L,EAA5B;QACH;MACJ;IACJ;EACJ,CAxBD;EAyBA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;;;EACA3B,UAAU,CAACa,SAAX,CAAqB8R,aAArB,GAAqC,UAAUC,aAAV,EAAyBnN,KAAzB,EAAgCwM,MAAhC,EAAwCY,QAAxC,EAAkD;IACnF,IAAIC,KAAJ,CADmF,CAEnF;;IACA,IAAInP,MAAJ;IACA,IAAIoP,YAAJ;IACA,IAAIC,mBAAJ;IACA,IAAI9R,IAAJ;;IACA,IAAI,KAAKP,SAAL,CAAeiC,YAAnB,EAAiC;MAC7B1B,IAAI,GAAG,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,eAA7C,CAAP;IACH,CAFD,MAGK;MACDD,IAAI,GAAG,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,aAA7C,CAAP;IACH;;IACD,IAAIC,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAArB;IACA,IAAI+R,UAAU,GAAGhB,MAAM,GAAGA,MAAM,CAAC1M,IAAP,GAAc0M,MAAM,CAAC1M,IAArB,GAA4B0M,MAAM,CAACiB,YAAP,CAAoB3N,IAAnD,GAA0D,KAAK8H,aAAL,CAAmB9H,IAApG;;IACA,KAAK,IAAIxD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,cAAc,CAACY,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;MAC5C,IAAIoR,SAAS,GAAG,KAAKxS,SAAL,CAAeiC,YAAf,GAA8BxB,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4B/H,IAA1D,GAAiEnE,cAAc,CAACW,CAAD,CAAd,CAAkBM,SAAnG;;MACA,IAAI,KAAK1B,SAAL,CAAeiC,YAAf,GAA8BuQ,SAAS,KAAKF,UAA5C,GAAyDE,SAAS,KAAKF,UAAd,IAA6B,CAACtT,iBAAiB,CAACyB,cAAc,CAACW,CAAD,CAAd,CAAkBG,eAAnB,CAA5G,EAAkJ;QAC9I+P,MAAM,GAAG,KAAKtR,SAAL,CAAeiC,YAAf,GAA8BpB,QAAQ,CAACC,cAAT,CAAwBL,cAAc,CAACW,CAAD,CAAd,CAAkBqR,GAAlB,CAAsB9Q,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAAxB,CAA9B,GAA6Fd,QAAQ,CAACC,cAAT,CAAwBL,cAAc,CAACW,CAAD,CAAd,CAAkBwL,QAA1C,CAAtG,CAD8I,CAE9I;;QACA,IAAIvF,YAAY,GAAGiK,MAAnB;QACA,IAAIoB,SAAS,GAAGrL,YAAY,CAACkL,YAAb,CAA0BA,YAA1B,CAAuCvR,EAAvC,CAA0CW,KAA1C,CAAgD,GAAhD,EAAqD,CAArD,CAAhB;QACA,IAAIgR,cAAc,GAAG,KAAK3S,SAAL,CAAe4S,SAAf,CAAyBF,SAAzB,CAArB;;QACA,IAAIpB,MAAM,IAAIA,MAAM,CAACiB,YAAjB,IAAiCI,cAArC,EAAqD;UACjDP,YAAY,GAAGd,MAAM,CAACuB,qBAAP,EAAf;UACAR,mBAAmB,GAAGf,MAAM,CAACiB,YAAP,CAAoBA,YAApB,CAAiCA,YAAjC,CAA8CM,qBAA9C,EAAtB;UACA,KAAK5S,aAAL,CAAmB6S,qBAAnB,GAA2C,IAA3C;;UACA,IAAIxB,MAAM,CAACyB,WAAP,IAAsBzB,MAAM,CAACyB,WAAP,CAAmB/R,EAAnB,CAAsB4J,OAAtB,CAA8B,SAA9B,MAA6C,CAAC,CAAxE,EAA2E;YACvE,KAAK5K,SAAL,CAAegT,8BAAf,GAAgD,IAAhD;UACH;QACJ;;QACD,IAAIC,YAAY,GAAGnO,KAAK,GAAGA,KAAH,GAAW,KAAK7E,aAAL,CAAmBiT,eAAnB,CAAmCC,YAAtE;QACA,IAAIC,WAAW,GAAGlB,QAAQ,GAAGA,QAAH,GAAc,KAAKjS,aAAL,CAAmBiT,eAAnB,CAAmCrE,QAA3E;QACA,IAAIwE,SAAS,GAAG,KAAKpT,aAAL,CAAmB6H,aAAnB,EAAhB;QACA,IAAIwL,YAAY,GAAG,KAAKrT,aAAL,CAAmB6S,qBAAnB,GAA2CV,YAAY,CAACxO,KAAb,GAAqByP,SAAhE,GAA4EnR,UAAU,CAACmF,YAAY,CAACV,KAAb,CAAmB/C,KAApB,CAAV,GAAuCyP,SAAtI;QACA,IAAIE,aAAa,GAAG,KAAKtT,aAAL,CAAmB6S,qBAAnB,GAA2CV,YAAY,CAACtO,MAAb,GAAsBuP,SAAjE,GAA6EnR,UAAU,CAACmF,YAAY,CAACV,KAAb,CAAmB7C,MAApB,CAAV,GAAwCuP,SAAzI;QACA,IAAIG,WAAW,GAAG,KAAKvT,aAAL,CAAmB6S,qBAAnB,GAA2C,CAAEV,YAAY,CAAC5O,IAAb,GAAoB6O,mBAAmB,CAAC7O,IAA1C,IAAmD6P,SAA9F,GAA0GnR,UAAU,CAACmF,YAAY,CAACV,KAAb,CAAmBnD,IAApB,CAAV,GAAsC6P,SAAlK;QACA,IAAII,UAAU,GAAG,KAAKxT,aAAL,CAAmB6S,qBAAnB,GAA2C,CAAEV,YAAY,CAACpO,GAAb,GAAmBqO,mBAAmB,CAACrO,GAAzC,IAAiDqP,SAA5F,GAAwGnR,UAAU,CAACmF,YAAY,CAACV,KAAb,CAAmB3C,GAApB,CAAV,GAAqCqP,SAA9J;QACA,IAAIK,WAAW,GAAG,KAAKzT,aAAL,CAAmB6S,qBAAnB,GAA2CxB,MAAM,CAACqC,kBAAP,GAA4BzR,UAAU,CAACoP,MAAM,CAACqC,kBAAP,CAA0B3S,EAA1B,CAA6BW,KAA7B,CAAmC,GAAnC,EAAwC,CAAxC,EAA2CiS,MAA3C,CAAkDtC,MAAM,CAACqC,kBAAP,CAA0B3S,EAA1B,CAA6BW,KAA7B,CAAmC,GAAnC,EAAwC,CAAxC,EAA2CN,MAA3C,GAAoD,CAAtG,CAAD,CAAtC,GAAmJa,UAAU,CAACmF,YAAY,CAACrG,EAAb,CAAgBW,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAD,CAAxM,GAA0OO,UAAU,CAACmF,YAAY,CAACrG,EAAb,CAAgBW,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAD,CAAtQ;QACA,IAAI6P,YAAY,GAAG,KAAKvR,aAAL,CAAmB6S,qBAAnB,GAA2CxB,MAAM,CAACqC,kBAAP,GAA4BzR,UAAU,CAACoP,MAAM,CAACqC,kBAAP,CAA0B3S,EAA1B,CAA6BW,KAA7B,CAAmC,GAAnC,EAAwC,CAAxC,CAAD,CAAtC,GAAqFO,UAAU,CAACmF,YAAY,CAACrG,EAAb,CAAgBW,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAD,CAA1I,GAA4KO,UAAU,CAACmF,YAAY,CAACrG,EAAb,CAAgBW,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAD,CAAzM;QACA,IAAIkS,UAAU,GAAG,KAAK5T,aAAL,CAAmBiT,eAAnB,CAAmCY,eAApD;QACA,IAAIC,mBAAmB,GAAG,KAAK,CAA/B;QACA,IAAIC,iBAAiB,GAAG,KAAK,CAA7B;QACA,IAAIC,iBAAiB,GAAG5M,YAAY,CAACkL,YAAb,CAA0BA,YAA1B,CAAuC5L,KAAvC,CAA6Ce,SAA7C,GAAyDL,YAAY,CAACkL,YAAb,CAA0BA,YAA1B,CAAuC5L,KAAvC,CAA6Ce,SAAtG,GAAkHL,YAAY,CAACV,KAAb,CAAmBe,SAA7J;QACAuM,iBAAiB,GAAGA,iBAAiB,CAACtJ,SAAlB,CAA4BsJ,iBAAiB,CAACrJ,OAAlB,CAA0B,GAA1B,IAAiC,CAA7D,EAAgEqJ,iBAAiB,CAACrJ,OAAlB,CAA0B,GAA1B,CAAhE,CAApB;QACA,IAAIvF,WAAW,GAAG4O,iBAAiB,GAAGxS,QAAQ,CAACwS,iBAAD,CAAX,GAAiC,CAApE;;QACA,IAAIhC,aAAa,KAAK,MAAtB,EAA8B;UAC1B,IAAI,CAACmB,WAAL,EAAkB;YACdA,WAAW,GAAG,WAAd;UACH,CAHyB,CAI1B;;;UACApQ,MAAM,GAAG,KAAKkR,aAAL,CAAmB1C,YAAnB,EAAiCnM,WAAjC,EAA8CqO,WAA9C,EAA2DL,SAA3D,EAAsEG,WAAtE,EAAmFC,UAAnF,EAA+FH,YAA/F,EAA6GC,aAA7G,CAAT;;UACA,IAAI,KAAKvT,SAAL,CAAemU,gBAAf,KAAoC,SAAxC,EAAmD;YAC/CnR,MAAM,GAAG,KAAKoR,uBAAL,CAA6BpR,MAA7B,CAAT;UACH;;UACDmP,KAAK,GAAG;YACJ;YACAnR,EAAE,EAAEqG,YAAY,CAACrG,EAFb;YAEiBgC,MAAM,EAAE;cAAEkN,CAAC,EAAElN,MAAM,CAACkN,CAAZ;cAAerG,CAAC,EAAE7G,MAAM,CAAC6G,CAAzB;cAA4BjG,KAAK,EAAEZ,MAAM,CAACY,KAA1C;cAAiDE,MAAM,EAAEd,MAAM,CAACc;YAAhE,CAFzB;YAEmG1D,SAAS,EAAEsT,WAF9G;YAE2HnT,IAAI,EAAE0S,YAFjI;YAE+IoB,YAAY,EAAE,EAF7J;YAGJC,mBAAmB,EAAE,eAHjB;YAGkCC,OAAO,EAAE,CAH3C;YAG8ClP,WAAW,EAAEA,WAH3D;YAGwEmP,SAAS,EAAE,eAHnF;YAGoGC,QAAQ,EAAE,EAH9G;YAGkHC,MAAM,EAAE;cAAEC,KAAK,EAAE,EAAT;cAAaC,UAAU,EAAE,EAAzB;cAA6BP,YAAY,EAAE,EAA3C;cAA+CQ,MAAM,EAAE;YAAvD,CAH1H;YAGuL1S,UAAU,EAAEiR,WAHnM;YAGgN/Q,QAAQ,EAAEgD,WAAW,KAAK,EAAhB,IAAsBA,WAAW,KAAK,GAAtC,GAA6CrC,MAAM,CAACY,KAAP,GAAe,CAA5D,GAAkEZ,MAAM,CAACc,MAAP,GAAgB;UAH5S,CAAR;;UAKA,IAAIqO,KAAK,CAACmC,mBAAN,KAA8B,eAAlC,EAAmD;YAC/C,IAAIQ,SAAS,GAAG,KAAKC,YAAL,CAAkB5C,KAAK,CAAC5R,IAAxB,EAA8B4R,KAAK,CAAC9P,QAApC,EAA8C8P,KAAK,CAAChQ,UAApD,CAAhB;YACA,IAAI6S,UAAU,GAAG,CAAjB;YACA,IAAIF,SAAS,GAAG9R,MAAM,CAACY,KAAvB,EACIoR,UAAU,GAAGhS,MAAM,CAACY,KAAP,GAAekR,SAA5B;YACJ3C,KAAK,CAAC9P,QAAN,GAAiB,KAAK4S,WAAL,CAAiB7J,IAAI,CAAC8J,KAAL,CAAY/C,KAAK,CAAC9P,QAAN,GAAiB2S,UAA7B,CAAjB,CAAjB;UACH;;UACDnB,UAAU,GAAG1B,KAAK,CAAC5R,IAAnB;UACAwT,mBAAmB,GAAG5B,KAAK,CAAChQ,UAA5B;UACA6R,iBAAiB,GAAG7B,KAAK,CAAC9P,QAA1B;QACH,CAxBD,MAyBK,IAAI4P,aAAa,KAAK,OAAtB,EAA+B;UAChC;UACAjP,MAAM,GAAG,KAAKkR,aAAL,CAAmB1C,YAAnB,EAAiCnM,WAAjC,EAA8CqO,WAA9C,EAA2DL,SAA3D,EAAsEG,WAAtE,EAAmFC,UAAnF,EAA+FH,YAA/F,EAA6GC,aAA7G,CAAT;UACA,IAAI4B,KAAK,GAAG,IAAIC,KAAJ,EAAZ;UACAD,KAAK,CAACE,GAAN,GAAYpC,YAAZ;;UACA,IAAI,KAAKjT,SAAL,CAAemU,gBAAf,KAAoC,SAAxC,EAAmD;YAC/C;YACA,IAAImB,UAAU,GAAG,EAAjB;YACA,IAAIC,eAAe,GAAG,CAAtB;YACA,IAAIC,WAAW,GAAG,CAAlB;;YACA,IAAIpK,IAAI,CAACqK,GAAL,CAASN,KAAK,CAACrR,MAAN,GAAeqR,KAAK,CAACvR,KAA9B,IAAuC0R,UAA3C,EAAuD;cACnD,IAAItS,MAAM,CAACY,KAAP,GAAeZ,MAAM,CAACc,MAA1B,EAAkC;gBAC9Bd,MAAM,CAACkN,CAAP,GAAWlN,MAAM,CAACkN,CAAP,GAAYlN,MAAM,CAACY,KAAP,GAAe4R,WAA3B,GAA2CxS,MAAM,CAACc,MAAP,GAAgB0R,WAAtE;gBACAxS,MAAM,CAACY,KAAP,GAAeZ,MAAM,CAACc,MAAtB;cACH,CAHD,MAIK;gBACDd,MAAM,CAAC6G,CAAP,GAAW7G,MAAM,CAAC6G,CAAP,GAAY7G,MAAM,CAACc,MAAP,GAAgB0R,WAA5B,GAA4CxS,MAAM,CAACY,KAAP,GAAe4R,WAAtE;gBACAxS,MAAM,CAACc,MAAP,GAAgBd,MAAM,CAACY,KAAvB;cACH;YACJ,CATD,MAUK;cACD,IAAIZ,MAAM,CAACY,KAAP,GAAeZ,MAAM,CAACc,MAA1B,EAAkC;gBAC9Bd,MAAM,CAAC6G,CAAP,GAAW7G,MAAM,CAAC6G,CAAP,GAAY7G,MAAM,CAACc,MAAP,GAAgByR,eAAvC;gBACAvS,MAAM,CAACkN,CAAP,GAAWlN,MAAM,CAACkN,CAAP,GAAYlN,MAAM,CAACc,MAAP,GAAgByR,eAAvC;gBACA,IAAIzR,MAAM,GAAGd,MAAM,CAACc,MAAP,GAAgB0R,WAA7B;gBACAxS,MAAM,GAAG;kBAAEkN,CAAC,EAAElN,MAAM,CAACkN,CAAZ;kBAAerG,CAAC,EAAE7G,MAAM,CAAC6G,CAAzB;kBAA4BjG,KAAK,EAAEZ,MAAM,CAACY,KAAP,GAAeE,MAAlD;kBAA0DA,MAAM,EAAEd,MAAM,CAACc,MAAP,GAAgBA;gBAAlF,CAAT;cACH,CALD,MAMK;gBACDd,MAAM,CAAC6G,CAAP,GAAW7G,MAAM,CAAC6G,CAAP,GAAY7G,MAAM,CAACc,MAAP,GAAgByR,eAAvC;gBACAvS,MAAM,CAACc,MAAP,GAAgBd,MAAM,CAACc,MAAP,GAAgB0R,WAAhC;cACH;YACJ;UACJ;;UACDrD,KAAK,GAAG;YACJ;YACAnR,EAAE,EAAEqG,YAAY,CAACrG,EAFb;YAEiBgC,MAAM,EAAE;cAAEkN,CAAC,EAAElN,MAAM,CAACkN,CAAZ;cAAerG,CAAC,EAAE7G,MAAM,CAAC6G,CAAzB;cAA4BjG,KAAK,EAAEZ,MAAM,CAACY,KAA1C;cAAiDE,MAAM,EAAEd,MAAM,CAACc;YAAhE,CAFzB;YAEmG1D,SAAS,EAAEsT,WAF9G;YAE2HnT,IAAI,EAAE0S,YAFjI;YAE+IoB,YAAY,EAAE,EAF7J;YAGJC,mBAAmB,EAAE,gBAHjB;YAGmCC,OAAO,EAAE,CAH5C;YAG+ClP,WAAW,EAAEA,WAH5D;YAGyEmP,SAAS,EAAE,gBAHpF;YAGsGC,QAAQ,EAAE,EAHhH;YAGoHC,MAAM,EAAE;cAAEC,KAAK,EAAE,EAAT;cAAaC,UAAU,EAAE,EAAzB;cAA6BP,YAAY,EAAE,EAA3C;cAA+CQ,MAAM,EAAE;YAAvD;UAH5H,CAAR;UAKAhB,UAAU,GAAG1B,KAAK,CAAC5R,IAAnB;QACH,CAvCI,MAwCA;UACD,IAAK0S,YAAY,CAACrI,OAAb,CAAqB,QAArB,CAAD,KAAqC,CAAC,CAA1C,EAA6C;YACzC;YACA5H,MAAM,GAAG,KAAKkR,aAAL,CAAmB1C,YAAnB,EAAiCnM,WAAjC,EAA8CqO,WAA9C,EAA2DL,SAA3D,EAAsEG,WAAtE,EAAmFC,UAAnF,EAA+FH,YAA/F,EAA6GC,aAA7G,CAAT;;YACA,IAAI,KAAKvT,SAAL,CAAemU,gBAAf,KAAoC,SAAxC,EAAmD;cAC/CnR,MAAM,GAAG,KAAKoR,uBAAL,CAA6BpR,MAA7B,CAAT;YACH;;YACDmP,KAAK,GAAG;cACJ;cACAnR,EAAE,EAAEqG,YAAY,CAACrG,EAFb;cAEiBgC,MAAM,EAAE;gBAAEkN,CAAC,EAAElN,MAAM,CAACkN,CAAZ;gBAAerG,CAAC,EAAE7G,MAAM,CAAC6G,CAAzB;gBAA4BjG,KAAK,EAAEZ,MAAM,CAACY,KAA1C;gBAAiDE,MAAM,EAAEd,MAAM,CAACc;cAAhE,CAFzB;cAEmG1D,SAAS,EAAEsT,WAF9G;cAE2HnT,IAAI,EAAE0S,YAFjI;cAE+IoB,YAAY,EAAE,EAF7J;cAGJC,mBAAmB,EAAE,gBAHjB;cAGmCC,OAAO,EAAE,CAH5C;cAG+ClP,WAAW,EAAEA,WAH5D;cAGyEmP,SAAS,EAAE,gBAHpF;cAGsGC,QAAQ,EAAE,EAHhH;cAGoHC,MAAM,EAAE;gBAAEC,KAAK,EAAE,EAAT;gBAAaC,UAAU,EAAE,EAAzB;gBAA6BP,YAAY,EAAE,EAA3C;gBAA+CQ,MAAM,EAAE;cAAvD;YAH5H,CAAR;YAKAhB,UAAU,GAAG1B,KAAK,CAAC5R,IAAnB;UACH,CAZD,MAaK;YACD;YACA,IAAI,KAAKP,SAAL,CAAemU,gBAAf,KAAoC,SAAxC,EAAmD;cAC/C;cACA,IAAIuB,eAAe,GAAG,KAAKC,0BAAL,CAAgC1C,YAAhC,EAA8C,KAA9C,EAAqD5L,YAArD,CAAtB,CAF+C,CAG/C;;cACArE,MAAM,GAAG,KAAKkR,aAAL,CAAmB1C,YAAnB,EAAiCnM,WAAjC,EAA8CqO,WAA9C,EAA2DL,SAA3D,EAAsEG,WAAtE,EAAmFC,UAAnF,EAA+FiC,eAAe,CAAC9R,KAA/G,EAAsH8R,eAAe,CAAC5R,MAAtI,EAA8I,IAA9I,CAAT;cACAd,MAAM,CAACkN,CAAP,GAAWlN,MAAM,CAACkN,CAAP,GAAWwF,eAAe,CAAClS,IAAtC;cACAR,MAAM,CAAC6G,CAAP,GAAW7G,MAAM,CAAC6G,CAAP,GAAW6L,eAAe,CAAC1R,GAAtC;YACH,CAPD,MAQK;cACDhB,MAAM,GAAG,KAAKkR,aAAL,CAAmB1C,YAAnB,EAAiCnM,WAAjC,EAA8CqO,WAA9C,EAA2DL,SAA3D,EAAsEG,WAAtE,EAAmFC,UAAnF,EAA+FH,YAA/F,EAA6GC,aAA7G,CAAT;YACH;;YACDpB,KAAK,GAAG;cACJ;cACAnR,EAAE,EAAEqG,YAAY,CAACrG,EAFb;cAEiBgC,MAAM,EAAE;gBAAEkN,CAAC,EAAElN,MAAM,CAACkN,CAAZ;gBAAerG,CAAC,EAAE7G,MAAM,CAAC6G,CAAzB;gBAA4BjG,KAAK,EAAEZ,MAAM,CAACY,KAA1C;gBAAiDE,MAAM,EAAEd,MAAM,CAACc;cAAhE,CAFzB;cAEmG1D,SAAS,EAAEsT,WAF9G;cAE2HnT,IAAI,EAAE0S,YAFjI;cAE+IoB,YAAY,EAAE,EAF7J;cAGJC,mBAAmB,EAAE,MAHjB;cAGyBC,OAAO,EAAE,CAHlC;cAGqClP,WAAW,EAAEA,WAHlD;cAG+DmP,SAAS,EAAE,gBAH1E;cAG4FC,QAAQ,EAAE,EAHtG;cAG0GC,MAAM,EAAE;gBAAEC,KAAK,EAAE,EAAT;gBAAaC,UAAU,EAAE,EAAzB;gBAA6BP,YAAY,EAAE,EAA3C;gBAA+CQ,MAAM,EAAE;cAAvD;YAHlH,CAAR;UAKH;QACJ;;QACD,IAAI,KAAK5U,aAAL,CAAmB6S,qBAAnB,IAA4CH,cAAhD,EAAgE;UAC5DR,KAAK,CAACnR,EAAN,GAAW2R,cAAc,CAAC3R,EAAf,GAAoB,UAA/B;UACA,IAAI4U,GAAG,GAAG,KAAK5V,SAAL,CAAemO,GAAf,CAAmBgE,KAAnB,CAAV;UACAQ,cAAc,CAACkD,OAAf,CAAuBC,QAAvB,CAAgCpK,IAAhC,CAAqCkK,GAAG,CAACC,OAAzC;QACH,CAJD,MAKK;UACD,KAAK7V,SAAL,CAAemO,GAAf,CAAmBgE,KAAnB;QACH;;QACD,IAAIA,KAAK,IAAIA,KAAK,CAACmC,mBAAN,KAA8B,MAAvC,IAAiDrB,YAAY,KAAK,EAAtE,EAA0E;UACtE,KAAKhT,aAAL,CAAmB8V,qBAAnB,GAA2C5D,KAA3C,CADsE,CAEtE;;UACA,IAAItJ,QAAQ,GAAG;YAAE0K,aAAa,EAAEA,aAAjB;YAAgCD,YAAY,EAAEA,YAA9C;YAA4DE,WAAW,EAAEA,WAAzE;YAAsFC,UAAU,EAAEA;UAAlG,CAAf;UACA,KAAKxT,aAAL,CAAmBiT,eAAnB,CAAmC8C,sBAAnC,CAA0DhT,MAA1D,EAAkE6F,QAAlE;UACAgL,UAAU,GAAG,KAAK5T,aAAL,CAAmBiT,eAAnB,CAAmCY,eAAhD;UACA,KAAK7T,aAAL,CAAmB8V,qBAAnB,GAA2C,IAA3C;QACH,CA/I6I,CAgJ9I;;;QACA,IAAIE,OAAO,GAAGpV,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,oBAA5B,GAAmD0S,WAA3E,CAAd,CAjJ8I,CAkJ9I;;QACA,KAAK1T,SAAL,CAAekW,aAAf,CAA6BD,OAA7B,EAAsCvC,WAAtC;QACA,KAAKzT,aAAL,CAAmBiT,eAAnB,CAAmCiD,mBAAnC,CAAuD,KAAvD;;QACA,IAAI9O,YAAY,CAACwG,SAAb,KAA2B,sDAA/B,EAAuF;UACnFxG,YAAY,CAACwG,SAAb,GAAyB,gEAAzB;QACH,CAFD,MAGK;UACDxG,YAAY,CAACwG,SAAb,GAAyB,2CAAzB;QACH;;QACD,IAAI,KAAK5N,aAAL,CAAmB6S,qBAAnB,IAA4CH,cAAhD,EAAgE;UAC5D,IAAIyD,GAAG,GAAG9E,MAAM,CAACiB,YAAP,CAAoBA,YAApB,CAAiCvR,EAAjC,CAAoCW,KAApC,CAA0C,GAA1C,EAA+C,CAA/C,IAAoD,UAA9D;UACA,KAAK0U,4BAAL,CAAkClE,KAAlC,EAAyCiE,GAAzC;QACH,CAHD,MAIK;UACD,KAAKzG,mBAAL,CAAyBtI,YAAzB,EAAuC8K,KAAK,CAAC5R,IAA7C,EAAmD4R,KAAK,CAACnP,MAAzD,EAAiE+Q,mBAAjE,EAAsFC,iBAAtF;QACH;;QACD3M,YAAY,CAACV,KAAb,CAAmB2P,aAAnB,GAAmC,MAAnC;;QACA,IAAI,KAAKtW,SAAL,CAAeuW,UAAnB,EAA+B;UAC3B,KAAKvW,SAAL,CAAeuW,UAAf,CAA0BC,SAA1B,CAAoCrE,KAAK,CAAC/R,SAA1C,EAAqD,IAArD,EAA2D+R,KAA3D,EAAkE,wBAAlE,EAA4F,EAA5F,EAAgGA,KAAhG,EAAuGA,KAAvG;QACH,CArK6I,CAsK9I;;;QACA,KAAKnS,SAAL,CAAeyW,gBAAf,CAAgCtE,KAAK,CAAC/R,SAAtC,EAAiD+R,KAAK,CAACnR,EAAvD,EAA2D,sBAA3D,EAAmFmR,KAAK,CAACnP,MAAzF,EAAiGmP,KAAK,CAACoC,OAAvG,EAAgH,IAAhH,EAAsH,IAAtH,EAA4HV,UAA5H;QACA,KAAK7T,SAAL,CAAe4R,qBAAf,CAAqCvK,YAAY,CAACzC,IAAlD,EAAwDqO,YAAxD;MACH;IACJ;;IACD,KAAKhT,aAAL,CAAmBiT,eAAnB,CAAmCwD,kBAAnC;IACA,KAAKzW,aAAL,CAAmB6S,qBAAnB,GAA2C,KAA3C;IACA,KAAK9S,SAAL,CAAegT,8BAAf,GAAgD,KAAhD;EACH,CA/LD;;EAgMA3T,UAAU,CAACa,SAAX,CAAqBmW,4BAArB,GAAoD,UAAUlE,KAAV,EAAiBiE,GAAjB,EAAsB;IACtE,IAAI7V,IAAI,GAAG,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,eAA7C,CAAX;IACA,IAAIC,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAArB;;IACA,IAAIoW,OAAO,GAAG,UAAUvV,CAAV,EAAa;MACvB,IAAIX,cAAc,CAACW,CAAD,CAAd,CAAkBqR,GAAlB,KAA0B2D,GAA9B,EAAmC;QAC/B,IAAIQ,cAAc,GAAGC,MAAM,CAAC7W,SAAP,CAAiBmG,oBAAjB,CAAsCkJ,SAAtC,CAAgD,UAAUC,EAAV,EAAc;UAAE,OAAOA,EAAE,CAACtO,EAAH,KAAUP,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4B3L,EAA5B,CAA+BW,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAAjB;QAAgE,CAAhI,CAArB;;QACA,IAAIwQ,KAAK,CAACmC,mBAAN,KAA8B,eAAlC,EAAmD;UAC/C7T,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4BsF,aAA5B,GAA4C,MAA5C;UACA4E,MAAM,CAAC5W,aAAP,CAAqByO,mBAArB,CAAyCtN,CAAzC,EAA4CuL,SAA5C,CAAsDsF,aAAtD,GAAsE,MAAtE;UACA4E,MAAM,CAAC7W,SAAP,CAAiB4S,SAAjB,CAA2BwD,GAA3B,EAAgCnE,aAAhC,GAAgD,MAAhD;UACAxR,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4BxK,UAA5B,GAAyCgQ,KAAK,CAAChQ,UAA/C;UACA0U,MAAM,CAAC5W,aAAP,CAAqByO,mBAArB,CAAyCtN,CAAzC,EAA4CuL,SAA5C,CAAsDxK,UAAtD,GAAmEgQ,KAAK,CAAChQ,UAAzE;UACA0U,MAAM,CAAC7W,SAAP,CAAiB4S,SAAjB,CAA2BwD,GAA3B,EAAgCjU,UAAhC,GAA6CgQ,KAAK,CAAChQ,UAAnD;UACA1B,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4BtK,QAA5B,GAAuC8P,KAAK,CAAC9P,QAA7C;UACAwU,MAAM,CAAC5W,aAAP,CAAqByO,mBAArB,CAAyCtN,CAAzC,EAA4CuL,SAA5C,CAAsDtK,QAAtD,GAAiE8P,KAAK,CAAC9P,QAAvE;UACAwU,MAAM,CAAC7W,SAAP,CAAiB4S,SAAjB,CAA2BwD,GAA3B,EAAgC/T,QAAhC,GAA2C8P,KAAK,CAAC9P,QAAjD;UACAuU,cAAc,GAAG,CAAC,CAAlB,GAAsBC,MAAM,CAAC7W,SAAP,CAAiB0O,mBAAjB,CAAqCkI,cAArC,EAAqD3E,aAArD,GAAqE,MAA3F,GAAoG,IAApG;QACH,CAXD,MAYK,IAAIE,KAAK,CAACmC,mBAAN,KAA8B,gBAAlC,EAAoD;UACrD7T,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4BsF,aAA5B,GAA4C,OAA5C;UACA4E,MAAM,CAAC5W,aAAP,CAAqByO,mBAArB,CAAyCtN,CAAzC,EAA4CuL,SAA5C,CAAsDsF,aAAtD,GAAsE,OAAtE;UACA4E,MAAM,CAAC7W,SAAP,CAAiB4S,SAAjB,CAA2BwD,GAA3B,EAAgCnE,aAAhC,GAAgD,OAAhD;UACA2E,cAAc,GAAG,CAAC,CAAlB,GAAsBC,MAAM,CAAC7W,SAAP,CAAiB0O,mBAAjB,CAAqCkI,cAArC,EAAqD3E,aAArD,GAAqE,OAA3F,GAAqG,IAArG;QACH,CALI,MAMA;UACDxR,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4BsF,aAA5B,GAA4C,MAA5C;UACA4E,MAAM,CAAC5W,aAAP,CAAqByO,mBAArB,CAAyCtN,CAAzC,EAA4CuL,SAA5C,CAAsDsF,aAAtD,GAAsE,MAAtE;UACA4E,MAAM,CAAC7W,SAAP,CAAiB4S,SAAjB,CAA2BwD,GAA3B,EAAgCnE,aAAhC,GAAgD,MAAhD;UACA2E,cAAc,GAAG,CAAC,CAAlB,GAAsBC,MAAM,CAAC7W,SAAP,CAAiB0O,mBAAjB,CAAqCkI,cAArC,EAAqD3E,aAArD,GAAqE,MAA3F,GAAoG,IAApG;QACH;;QACDxR,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4BmK,cAA5B,GAA6C3E,KAAK,CAACnP,MAAnD;QACA6T,MAAM,CAAC5W,aAAP,CAAqByO,mBAArB,CAAyCtN,CAAzC,EAA4CuL,SAA5C,CAAsDmK,cAAtD,GAAuE3E,KAAK,CAACnP,MAA7E;QACA6T,MAAM,CAAC7W,SAAP,CAAiB4S,SAAjB,CAA2BwD,GAA3B,EAAgCU,cAAhC,GAAiD3E,KAAK,CAACnP,MAAvD;QACA4T,cAAc,GAAG,CAAC,CAAlB,GAAsBC,MAAM,CAAC7W,SAAP,CAAiB0O,mBAAjB,CAAqCkI,cAArC,EAAqDE,cAArD,GAAsE3E,KAAK,CAACnP,MAAlG,GAA2G,IAA3G;;QACA,IAAImP,KAAK,CAACmC,mBAAN,KAA8B,MAAlC,EAA0C;UACtC,IAAIpD,cAAc,GAAGhS,eAAe,CAACiT,KAAK,CAAC5R,IAAP,CAApC;UACA,IAAIyQ,MAAM,GAAG/R,oBAAoB,CAACiS,cAAD,CAAjC;UACAzQ,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4B7H,KAA5B,GAAoCpE,IAAI,CAACqQ,SAAL,CAAeC,MAAf,CAApC;UACA6F,MAAM,CAAC7W,SAAP,CAAiB4S,SAAjB,CAA2BwD,GAA3B,EAAgCtR,KAAhC,GAAwCqN,KAAK,CAAC5R,IAA9C;UACAsW,MAAM,CAAC7W,SAAP,CAAiB4S,SAAjB,CAA2BwD,GAAG,CAACzU,KAAJ,CAAU,GAAV,EAAe,CAAf,CAA3B,EAA8CmD,KAA9C,GAAsDqN,KAAK,CAAC5R,IAA5D;UACAsW,MAAM,CAAC5W,aAAP,CAAqByO,mBAArB,CAAyCtN,CAAzC,EAA4CuL,SAA5C,CAAsD7H,KAAtD,GAA8DpE,IAAI,CAACqQ,SAAL,CAAeC,MAAf,CAA9D;UACA4F,cAAc,GAAG,CAAC,CAAlB,GAAsBC,MAAM,CAAC7W,SAAP,CAAiB0O,mBAAjB,CAAqCkI,cAArC,EAAqD9R,KAArD,GAA6DpE,IAAI,CAACqQ,SAAL,CAAeC,MAAf,CAAnF,GAA4G,IAA5G;QACH,CARD,MASK;UACDvQ,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4B7H,KAA5B,GAAoCqN,KAAK,CAAC5R,IAA1C;UACAsW,MAAM,CAAC5W,aAAP,CAAqByO,mBAArB,CAAyCtN,CAAzC,EAA4CuL,SAA5C,CAAsD7H,KAAtD,GAA8DqN,KAAK,CAAC5R,IAApE;UACAsW,MAAM,CAAC7W,SAAP,CAAiB4S,SAAjB,CAA2BwD,GAAG,CAACzU,KAAJ,CAAU,GAAV,EAAe,CAAf,CAA3B,EAA8CmD,KAA9C,GAAsDqN,KAAK,CAAC5R,IAA5D;UACAsW,MAAM,CAAC7W,SAAP,CAAiB4S,SAAjB,CAA2BwD,GAA3B,EAAgCtR,KAAhC,GAAwCqN,KAAK,CAAC5R,IAA9C;UACAqW,cAAc,GAAG,CAAC,CAAlB,GAAsBC,MAAM,CAAC7W,SAAP,CAAiB0O,mBAAjB,CAAqCkI,cAArC,EAAqD9R,KAArD,GAA6DqN,KAAK,CAAC5R,IAAzF,GAAgG,IAAhG;QACH;;QACDsW,MAAM,CAAC7W,SAAP,CAAiBiC,YAAjB,CAA8B8U,0BAA9B,CAAyDtW,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAA3E;QACAkK,MAAM,CAAC7W,SAAP,CAAiBiC,YAAjB,CAA8B+U,gCAA9B,CAA+D,2BAA/D,EAA4FvW,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAA9G,EAAyH,IAAzH,EAA+H,KAA/H,EAAsI,KAAtI,EAA6I,KAA7I,EAAoJ,KAApJ,EAA2J,KAA3J,EAAkK,KAAlK,EAAyK,KAAzK,EAAgL,KAAhL,EAAuL,KAAvL,EAA8L,KAA9L,EAAqM,KAArM,EAA4M,KAA5M,EAAmN,KAAnN,EAA0N,KAA1N,EAAiO,EAAjO,EAAqOlM,cAAc,CAACW,CAAD,CAAd,CAAkBuL,SAAlB,CAA4B7H,KAAjQ;MACH;IACJ,CAlDD;;IAmDA,IAAI+R,MAAM,GAAG,IAAb;;IACA,KAAK,IAAIzV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,cAAc,CAACY,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;MAC5CuV,OAAO,CAACvV,CAAD,CAAP;IACH;;IACD,KAAKnB,aAAL,CAAmByJ,uBAAnB,CAA2CjJ,cAA3C,EAA2D,eAA3D;EACH,CA3DD;EA4DA;AACJ;AACA;;;EACIpB,UAAU,CAACa,SAAX,CAAqBkU,uBAArB,GAA+C,UAAUpR,MAAV,EAAkB;IAC7D,OAAO;MAAEkN,CAAC,EAAElN,MAAM,CAACkN,CAAP,GAAW,EAAhB;MAAoBrG,CAAC,EAAE7G,MAAM,CAAC6G,CAAP,GAAW,EAAlC;MAAsCjG,KAAK,EAAEZ,MAAM,CAACY,KAAP,GAAe,EAA5D;MAAgEE,MAAM,EAAEd,MAAM,CAACc,MAAP,GAAgB;IAAxF,CAAP;EACH,CAFD;EAGA;AACJ;AACA;EACI;;;EACAzE,UAAU,CAACa,SAAX,CAAqBgU,aAArB,GAAqC,UAAU1C,YAAV,EAAwBnM,WAAxB,EAAqCqO,WAArC,EAAkDL,SAAlD,EAA6DG,WAA7D,EAA0EC,UAA1E,EAAsFH,YAAtF,EAAoGC,aAApG,EAAmH0D,MAAnH,EAA2H;IAC5J;IACA,IAAIjU,MAAJ;IACA,IAAIkU,WAAW,GAAG,KAAKlX,SAAL,CAAegT,8BAAf,GAAgD,aAAhD,GAAgE,UAAlF;IACA,IAAImE,QAAQ,GAAGtW,QAAQ,CAACC,cAAT,CAAwBoW,WAAW,GAAGxD,WAAd,GAA4B,GAA5B,GAAkClC,YAA1D,CAAf;IACA,IAAI4F,QAAQ,GAAGD,QAAQ,GAAGjV,UAAU,CAACiV,QAAQ,CAACxQ,KAAT,CAAenD,IAAhB,CAAV,GAAkC6P,SAArC,GAAiD,CAAxE;IACA,IAAIiC,UAAU,GAAI9B,WAAW,GAAGH,SAAf,GAA6B+D,QAAQ,GAAG/D,SAAzD;;IACA,IAAIhO,WAAW,KAAK,EAAhB,IAAsBA,WAAW,KAAK,GAA1C,EAA+C;MAC3C,KAAKA,WAAL,GAAmB,CAAnB;;MACA,IAAI8R,QAAQ,CAACxQ,KAAT,CAAenD,IAAf,KAAwB,EAA5B,EAAgC;QAC5B,IAAIyT,MAAJ,EAAY;UACR,OAAOjU,MAAM,GAAG;YAAEkN,CAAC,EAAEsD,WAAW,GAAI8B,UAAU,GAAGjC,SAA5B,GAAyCA,SAA9C;YAAyDxJ,CAAC,EAAE4J,UAAU,GAAI6B,UAAU,GAAGjC,SAA3B,GAAwCA,SAApG;YAA+GzP,KAAK,EAAE0P,YAAtH;YAAoIxP,MAAM,EAAEyP;UAA5I,CAAhB;QACH,CAFD,MAGK;UACD,OAAOvQ,MAAM,GAAG;YAAEkN,CAAC,EAAEsD,WAAW,GAAI8B,UAAU,GAAGjC,SAA5B,GAAyCA,SAA9C;YAAyDxJ,CAAC,EAAE4J,UAAU,GAAI6B,UAAU,GAAGjC,SAA3B,GAAwCA,SAApG;YAA+GzP,KAAK,EAAE2P,aAAtH;YAAqIzP,MAAM,EAAEwP;UAA7I,CAAhB;QACH;MACJ,CAPD,MAQK;QACDgC,UAAU,GAAG,EAAb;;QACA,IAAI2B,MAAJ,EAAY;UACR,OAAOjU,MAAM,GAAG;YAAEkN,CAAC,EAAEsD,WAAW,GAAGF,YAAnB;YAAiCzJ,CAAC,EAAE4J,UAAU,GAAGH,YAAjD;YAA+D1P,KAAK,EAAE2P,aAAtE;YAAqFzP,MAAM,EAAEwP;UAA7F,CAAhB;QACH,CAFD,MAGK;UACD,OAAOtQ,MAAM,GAAG;YAAEkN,CAAC,EAAEsD,WAAW,GAAGF,YAAd,GAA6BgC,UAAU,GAAG,CAA/C;YAAkDzL,CAAC,EAAE4J,UAAU,GAAGH,YAAb,GAA4BgC,UAAjF;YAA6F1R,KAAK,EAAE2P,aAApG;YAAmHzP,MAAM,EAAEwP;UAA3H,CAAhB;QACH;MACJ;IACJ,CAnBD,MAoBK;MACD,KAAKjO,WAAL,GAAmB,CAAnB;MACA,OAAOrC,MAAM,GAAG;QAAEkN,CAAC,EAAEsD,WAAL;QAAkB3J,CAAC,EAAE4J,UAArB;QAAiC7P,KAAK,EAAE0P,YAAxC;QAAsDxP,MAAM,EAAEyP;MAA9D,CAAhB;IACH;EACJ,CA/BD,CA7sCwC,CA6uCxC;;;EACAlU,UAAU,CAACa,SAAX,CAAqBmJ,qBAArB,GAA6C,UAAUgI,KAAV,EAAiB;IAC1D,IAAI,KAAK5Q,cAAT,EAAyB;MACrB,KAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKX,cAAL,CAAoBY,MAAxC,EAAgDD,CAAC,EAAjD,EAAqD;QACjD;QACA,IAAIiG,YAAY,GAAG,KAAK5G,cAAL,CAAoBW,CAApB,CAAnB;;QACA,IAAIiQ,KAAK,CAACC,MAAN,CAAa1M,IAAb,KAAsByC,YAAY,CAAC3F,SAAnC,IAAgD2P,KAAK,CAACC,MAAN,CAAatQ,EAAb,KAAoBqG,YAAY,CAACuF,QAArF,EAA+F;UAC3F;UACA,IAAIF,aAAa,GAAG7L,QAAQ,CAACC,cAAT,CAAwB,KAAKL,cAAL,CAAoBW,CAApB,EAAuBwL,QAA/C,CAApB;;UACA,IAAIF,aAAJ,EAAmB;YACfA,aAAa,CAAC5H,KAAd,GAAsBuM,KAAK,CAACC,MAAN,CAAaxM,KAAnC;UACH,CAFD,MAGK;YACDuC,YAAY,CAACwI,IAAb,GAAoBwB,KAAK,CAACC,MAAN,CAAaxM,KAAjC;YACA,KAAK7E,aAAL,CAAmByJ,uBAAnB,CAA2C,KAAKjJ,cAAhD,EAAgE,aAAhE;UACH;QACJ;MACJ;IACJ;EACJ,CAlBD;;EAmBApB,UAAU,CAACa,SAAX,CAAqBkJ,qBAArB,GAA6C,UAAUiI,KAAV,EAAiB;IAC1D;IACA,IAAI3E,aAAa,GAAG2E,KAAK,CAACC,MAA1B;;IACA,IAAI5E,aAAa,CAAC9E,YAAd,IAA8B,CAAC,KAAKjI,cAAxC,EAAwD;MACpD;MACA,IAAIqC,IAAI,GAAGP,QAAQ,CAACiL,aAAa,CAAC/F,KAAd,CAAoB/C,KAArB,CAAR,GAAuCnC,QAAQ,CAACiL,aAAa,CAAC/F,KAAd,CAAoB7C,MAArB,CAAR,GAAuC,CAAzF;MACA4I,aAAa,CAAC/F,KAAd,CAAoB/C,KAApB,GAA4B,KAAK5B,IAAL,GAAY,IAAxC;MACA,KAAKrC,cAAL,GAAsB,IAAtB;IACH;;IACD,IAAI0R,KAAK,CAACgG,KAAN,KAAgB,CAAhB,IAAqB3K,aAArB,IAAsCA,aAAa,CAACmB,SAAd,KAA4B,wBAAtE,EAAgG;MAC5F;MACA,IAAI7M,EAAE,GAAG0L,aAAa,CAAC1L,EAAd,CAAiBW,KAAjB,CAAuB,QAAvB,EAAiC,CAAjC,EAAoCA,KAApC,CAA0C,GAA1C,EAA+C,CAA/C,CAAT;;MACA,IAAI,KAAKnC,gBAAL,CAAsBwB,EAAtB,MAA8B0L,aAAa,CAAC4K,QAAhD,EAA0D;QACtD;QACA,IAAI1W,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,aAA5B,IAA6CS,QAAQ,CAACT,EAAD,CAAR,GAAe,CAA5D,CAAxB,CAAhB;;QACA,IAAIJ,SAAJ,EAAe;UACX;UACA,IAAI2W,aAAa,GAAG3W,SAAS,CAAC4W,sBAAV,CAAiC,wBAAjC,CAApB;;UACA,IAAID,aAAa,IAAIA,aAAa,CAAClW,MAAd,GAAuB,CAA5C,EAA+C;YAC3CkW,aAAa,CAAC,CAAD,CAAb,CAAiBtN,KAAjB;YACAoH,KAAK,CAACoG,cAAN;UACH;QACJ,CAPD,MAQK;UACD,IAAIC,WAAW,GAAG7W,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,aAA5B,GAA4C,CAApE,CAAlB,CADC,CAED;;UACA,IAAIuW,aAAa,GAAGG,WAAW,CAACF,sBAAZ,CAAmC,wBAAnC,CAApB;;UACA,KAAK,IAAIlH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiH,aAAa,CAAClW,MAAlC,EAA0CiP,CAAC,EAA3C,EAA+C;YAC3C,IAAIiH,aAAa,CAACjH,CAAD,CAAb,CAAiBgH,QAAjB,KAA8B,KAAK7X,kBAAL,CAAwB,GAAxB,CAAlC,EAAgE;cAC5D8X,aAAa,CAACjH,CAAD,CAAb,CAAiBrG,KAAjB;cACAoH,KAAK,CAACoG,cAAN;cACA;YACH;UACJ;QACJ;MACJ,CAvBD,MAwBK;QACD;QACA,IAAI7W,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,aAA5B,GAA4CS,QAAQ,CAACT,EAAD,CAA5E,CAAhB,CAFC,CAGD;;QACA,IAAIuW,aAAa,GAAG3W,SAAS,CAAC4W,sBAAV,CAAiC,wBAAjC,CAApB;QACA,IAAIG,YAAY,GAAG,IAAnB;;QACA,KAAK,IAAIrH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiH,aAAa,CAAClW,MAAlC,EAA0CiP,CAAC,EAA3C,EAA+C;UAC3CqH,YAAY,GAAG,KAAf;;UACA,IAAIJ,aAAa,CAACjH,CAAD,CAAb,CAAiBgH,QAAjB,KAA+B5K,aAAa,CAAC4K,QAAd,GAAyB,CAA5D,EAAgE;YAC5DC,aAAa,CAACjH,CAAD,CAAb,CAAiBrG,KAAjB;YACA0N,YAAY,GAAG,IAAf;YACAtG,KAAK,CAACoG,cAAN;YACA;UACH;QACJ;;QACD,IAAIG,QAAQ,GAAGlL,aAAa,CAAC4K,QAAd,GAAyB,CAAxC;;QACA,OAAO,CAACK,YAAR,EAAsB;UAClB,KAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,aAAa,CAAClW,MAAlC,EAA0CwW,CAAC,EAA3C,EAA+C;YAC3CF,YAAY,GAAG,KAAf;;YACA,IAAIJ,aAAa,CAACM,CAAD,CAAb,CAAiBP,QAAjB,KAA+BM,QAAnC,EAA8C;cAC1CL,aAAa,CAACM,CAAD,CAAb,CAAiB5N,KAAjB;cACA0N,YAAY,GAAG,IAAf;cACAtG,KAAK,CAACoG,cAAN;cACA;YACH;UACJ;;UACD,IAAI,KAAKjY,gBAAL,CAAsBwB,EAAtB,MAA8B4W,QAAlC,EAA4C;YACxCD,YAAY,GAAG,IAAf;UACH;;UACDC,QAAQ,GAAGA,QAAQ,GAAG,CAAtB;QACH;MACJ;IACJ;;IACD,IAAIvG,KAAK,CAAC3E,aAAN,CAAoBwB,SAApB,CAA8B4J,QAA9B,CAAuC,iCAAvC,KACAzG,KAAK,CAAC3E,aAAN,CAAoBwB,SAApB,CAA8B4J,QAA9B,CAAuC,2CAAvC,CADJ,EACyF;MACrF,IAAIzG,KAAK,CAAC+E,GAAN,KAAc,OAAlB,EAA2B;QACvB;QACA,IAAI2B,eAAe,GAAG1G,KAAK,CAACC,MAA5B;;QACA,KAAK,IAAIhB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtQ,SAAL,CAAemG,oBAAf,CAAoC9E,MAAxD,EAAgEiP,CAAC,EAAjE,EAAqE;UACjE,IAAIyH,eAAe,CAAC/W,EAAhB,KAAuB,KAAKhB,SAAL,CAAemG,oBAAf,CAAoCmK,CAApC,EAAuCtP,EAAlE,EAAsE;YAClE,KAAK+M,QAAL,CAAcgK,eAAe,CAAC/W,EAA9B;YACA,KAAKhB,SAAL,CAAe+R,uBAAf,CAAuC,kBAAvC,EAA2D,KAAK/R,SAAL,CAAemG,oBAAf,CAAoCmK,CAApC,CAA3D;UACH;QACJ;MACJ,CATD,MAUK;QACDe,KAAK,CAACoG,cAAN;MACH;IACJ;EACJ,CArFD;;EAsFApY,UAAU,CAACa,SAAX,CAAqBiJ,gBAArB,GAAwC,UAAUkI,KAAV,EAAiB;IACrD;IACA,IAAI3E,aAAa,GAAG2E,KAAK,CAACC,MAA1B;IACA,KAAK3B,mBAAL,CAAyBjD,aAAzB;EACH,CAJD;;EAKArN,UAAU,CAACa,SAAX,CAAqB8X,wBAArB,GAAgD,UAAUC,mBAAV,EAA+BC,oBAA/B,EAAqDC,cAArD,EAAqEC,cAArE,EAAqFC,WAArF,EAAkGhR,YAAlG,EAAgHxF,WAAhH,EAA6H;IACzK,IAAIyW,MAAM,GAAGH,cAAc,GAAGF,mBAA9B;IACA,IAAIM,MAAM,GAAGH,cAAc,GAAGF,oBAA9B;IACA,IAAI7E,SAAS,GAAG,KAAKpT,aAAL,CAAmB6H,aAAnB,EAAhB;IACA,IAAIwL,YAAY,GAAG,CAAnB;IACA,IAAIC,aAAa,GAAG,CAApB;IACA,IAAIiF,oBAAoB,GAAG,KAA3B;IACA,IAAIC,iBAAiB,GAAG,KAAxB;IACA,IAAIC,cAAc,GAAG,CAArB;IACA,IAAIC,aAAa,GAAG,CAApB;;IACA,IAAIN,WAAJ,EAAiB;MACb/E,YAAY,GAAG,KAAKtT,SAAL,CAAe4Y,4BAAf,CAA4ChV,KAA5C,GAAoD,KAAK5D,SAAL,CAAe4Y,4BAAf,CAA4ChV,KAAhG,GAAwG,GAAvH;MACA2P,aAAa,GAAG,KAAKvT,SAAL,CAAe4Y,4BAAf,CAA4C9U,MAA5C,GAAqD,KAAK9D,SAAL,CAAe4Y,4BAAf,CAA4C9U,MAAjG,GAA0G,GAA1H;IACH,CAHD,MAIK;MACD,IAAI+U,UAAU,GAAGxR,YAAY,GAAGA,YAAY,CAACV,KAAb,CAAmB/C,KAAnB,KAA6B,MAA7B,GAAsCyD,YAAY,CAACyR,WAAnD,GAAiE5W,UAAU,CAACmF,YAAY,CAACV,KAAb,CAAmB/C,KAApB,CAA9E,GAA2G,KAAKjB,mBAAL,CAAyBd,WAAW,CAACmO,UAAZ,CAAuBnM,KAAhD,CAAxI;MACA,IAAIkV,WAAW,GAAG1R,YAAY,GAAGA,YAAY,CAACV,KAAb,CAAmB7C,MAAnB,KAA8B,MAA9B,GAAuCuD,YAAY,CAAC2R,YAApD,GAAmE9W,UAAU,CAACmF,YAAY,CAACV,KAAb,CAAmB7C,MAApB,CAAhF,GAA8G,KAAKnB,mBAAL,CAAyBd,WAAW,CAACmO,UAAZ,CAAuB1N,MAAhD,CAA5I;MACA,IAAI2W,eAAe,GAAGJ,UAAU,GAAGE,WAAnC;MACA,IAAIG,gBAAgB,GAAGH,WAAW,GAAGF,UAArC;MACA,IAAIM,gBAAgB,GAAGlB,mBAAmB,GAAGC,oBAA7C;MACA,IAAIkB,iBAAiB,GAAGlB,oBAAoB,GAAGD,mBAA/C;MACA,IAAIoB,aAAa,GAAGhS,YAAY,GAAGA,YAAY,CAACkL,YAAb,CAA0BA,YAA1B,CAAuC5L,KAAvC,CAA6Ce,SAA7C,GAAyDL,YAAY,CAACkL,YAAb,CAA0BA,YAA1B,CAAuC5L,KAAvC,CAA6Ce,SAAtG,GAAkHL,YAAY,CAACV,KAAb,CAAmBe,SAAxI,GAAoJ7F,WAAW,CAACyX,aAAhM;;MACA,IAAKL,eAAe,GAAGE,gBAAnB,IAAyCD,gBAAgB,GAAGC,gBAA5D,IAAmF/N,IAAI,CAACqK,GAAL,CAASwD,eAAe,GAAGC,gBAA3B,CAAD,IAAkD,CAAxI,EAA4I;QACxI,IAAIK,eAAe,GAAG,CAAtB;;QACA,IAAKL,gBAAgB,GAAGC,gBAApB,IAA2C/N,IAAI,CAACqK,GAAL,CAASwD,eAAe,GAAGC,gBAA3B,CAAD,IAAkD,CAAhG,EAAoG;UAChGT,iBAAiB,GAAG,IAApB;UACAc,eAAe,GAAGL,gBAAgB,GAAGE,iBAArC;QACH,CAHD,MAIK;UACDZ,oBAAoB,GAAG,IAAvB;UACAe,eAAe,GAAGN,eAAe,GAAGE,gBAApC;QACH;;QACD,IAAIE,aAAa,KAAK,eAAlB,IAAqCA,aAAa,KAAK,gBAA3D,EAA6E;UACzE;UACA/F,YAAY,GAAGyF,WAAW,GAAG1F,SAA7B,CAFyE,CAGzE;;UACAE,aAAa,GAAGsF,UAAU,GAAGxF,SAA7B;QACH,CALD,MAMK;UACD,IAAImF,oBAAJ,EAA0B;YACtB;YACAE,cAAc,GAAGG,UAAU,GAAGxF,SAA9B,CAFsB,CAGtB;;YACAC,YAAY,GAAIuF,UAAU,GAAGU,eAAd,GAAiClG,SAAhD,CAJsB,CAKtB;;YACAE,aAAa,GAAGwF,WAAW,GAAG1F,SAA9B;UACH;;UACD,IAAIoF,iBAAJ,EAAuB;YACnB;YACAE,aAAa,GAAGI,WAAW,GAAG1F,SAA9B,CAFmB,CAGnB;;YACAC,YAAY,GAAGuF,UAAU,GAAGxF,SAA5B,CAJmB,CAKnB;;YACAE,aAAa,GAAIwF,WAAW,GAAGQ,eAAf,GAAkClG,SAAlD;UACH;QACJ;MACJ,CAlCD,MAmCK;QACD,IAAIgG,aAAa,KAAK,eAAlB,IAAqCA,aAAa,KAAK,gBAA3D,EAA6E;UACzE;UACA/F,YAAY,GAAGyF,WAAW,GAAG1F,SAA7B,CAFyE,CAGzE;;UACAE,aAAa,GAAGsF,UAAU,GAAGxF,SAA7B;QACH,CALD,MAMK;UACD;UACAC,YAAY,GAAGuF,UAAU,GAAGxF,SAA5B,CAFC,CAGD;;UACAE,aAAa,GAAGwF,WAAW,GAAG1F,SAA9B;QACH;MACJ;IACJ;;IACD,IAAImG,eAAe,GAAG,CAACvB,mBAAmB,GAAGE,cAAvB,IAAyC,CAA/D;IACA,IAAIsB,cAAc,GAAG,CAACvB,oBAAoB,GAAGE,cAAxB,IAA0C,CAA/D;;IACA,IAAII,oBAAJ,EAA0B;MACtBgB,eAAe,GAAIA,eAAe,GAAGvB,mBAAnB,GAA0CS,cAA5D;MACA,IAAIgB,aAAa,GAAG,CAAEhB,cAAc,GAAGJ,MAAlB,GAA6BhF,YAAY,GAAGgF,MAA7C,IAAwD,CAA5E;MACAkB,eAAe,GAAGA,eAAe,GAAGE,aAApC;MACAD,cAAc,GAAIA,cAAc,GAAGvB,oBAAlB,GAA0C3E,aAA3D;IACH,CALD,MAMK,IAAIkF,iBAAJ,EAAuB;MACxBe,eAAe,GAAIA,eAAe,GAAGvB,mBAAnB,GAA0C3E,YAA5D;MACAmG,cAAc,GAAIA,cAAc,GAAGvB,oBAAlB,GAA0CS,aAA3D;MACA,IAAIgB,YAAY,GAAG,CAAEhB,aAAa,GAAGJ,MAAjB,GAA4BhF,aAAa,GAAGgF,MAA7C,IAAwD,CAA3E;MACAkB,cAAc,GAAGA,cAAc,GAAGE,YAAlC;IACH,CALI,MAMA;MACDH,eAAe,GAAIA,eAAe,GAAGvB,mBAAnB,GAA0C3E,YAA5D;MACAmG,cAAc,GAAIA,cAAc,GAAGvB,oBAAlB,GAA0C3E,aAA3D;IACH;;IACDD,YAAY,GAAGA,YAAY,GAAGgF,MAA9B;IACA/E,aAAa,GAAGA,aAAa,GAAGgF,MAAhC;IACA,OAAO;MAAEiB,eAAe,EAAEA,eAAnB;MAAoCC,cAAc,EAAEA,cAApD;MAAoEnG,YAAY,EAAEA,YAAlF;MAAgGC,aAAa,EAAEA;IAA/G,CAAP;EACH,CA7FD;EA8FA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;;;EACAlU,UAAU,CAACa,SAAX,CAAqByV,0BAArB,GAAkD,UAAUpV,IAAV,EAAgB8X,WAAhB,EAA6BhR,YAA7B,EAA2CxF,WAA3C,EAAwD;IACtG;IACA,IAAIqP,cAAc,GAAGhS,eAAe,CAACqB,IAAD,CAApC,CAFsG,CAGtG;;IACA,IAAIyQ,MAAM,GAAG/R,oBAAoB,CAACiS,cAAD,CAAjC;IACA,IAAI0I,QAAQ,GAAG,CAAC,CAAhB;IACA,IAAIC,QAAQ,GAAG,CAAC,CAAhB;IACA,IAAIC,QAAQ,GAAG,CAAC,CAAhB;IACA,IAAIC,QAAQ,GAAG,CAAC,CAAhB;IACA,IAAIC,eAAe,GAAGnZ,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,mBAApD,CAAtB;IACA,IAAIiX,mBAAmB,GAAG,CAA1B;IACA,IAAIC,oBAAoB,GAAG,CAA3B;;IACA,KAAK,IAAI5H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGU,MAAM,CAAC3P,MAA3B,EAAmCiP,CAAC,EAApC,EAAwC;MACpC;MACA,IAAI2J,GAAG,GAAGjJ,MAAM,CAACV,CAAD,CAAhB;;MACA,IAAIsJ,QAAQ,KAAK,CAAC,CAAlB,EAAqB;QACjB;QACAA,QAAQ,GAAG1X,UAAU,CAAC+X,GAAG,CAAC,GAAD,CAAH,CAAS9O,QAAT,EAAD,CAArB,CAFiB,CAGjB;;QACA2O,QAAQ,GAAG5X,UAAU,CAAC+X,GAAG,CAAC,GAAD,CAAH,CAAS9O,QAAT,EAAD,CAArB,CAJiB,CAKjB;;QACA0O,QAAQ,GAAG3X,UAAU,CAAC+X,GAAG,CAAC,GAAD,CAAH,CAAS9O,QAAT,EAAD,CAArB,CANiB,CAOjB;;QACA4O,QAAQ,GAAG7X,UAAU,CAAC+X,GAAG,CAAC,GAAD,CAAH,CAAS9O,QAAT,EAAD,CAArB;MACH,CATD,MAUK;QACD;QACA,IAAI+O,MAAM,GAAGhY,UAAU,CAAC+X,GAAG,CAAC,GAAD,CAAH,CAAS9O,QAAT,EAAD,CAAvB,CAFC,CAGD;;QACA,IAAIgP,MAAM,GAAGjY,UAAU,CAAC+X,GAAG,CAAC,GAAD,CAAH,CAAS9O,QAAT,EAAD,CAAvB;;QACA,IAAIyO,QAAQ,IAAIM,MAAhB,EAAwB;UACpBN,QAAQ,GAAGM,MAAX;QACH;;QACD,IAAIL,QAAQ,IAAIM,MAAhB,EAAwB;UACpBN,QAAQ,GAAGM,MAAX;QACH;;QACD,IAAIL,QAAQ,IAAII,MAAhB,EAAwB;UACpBJ,QAAQ,GAAGI,MAAX;QACH;;QACD,IAAIH,QAAQ,IAAII,MAAhB,EAAwB;UACpBJ,QAAQ,GAAGI,MAAX;QACH;MACJ;IACJ;;IACDlC,mBAAmB,GAAG+B,eAAe,GAAGA,eAAe,CAAClB,WAAnB,GAAiC,GAAtE;IACAZ,oBAAoB,GAAG8B,eAAe,GAAGA,eAAe,CAAChB,YAAnB,GAAkC,GAAxE;IACA,IAAIb,cAAc,GAAG2B,QAAQ,GAAGF,QAAhC;IACA,IAAIxB,cAAc,GAAG2B,QAAQ,GAAGF,QAAhC;IACA,IAAIO,UAAU,GAAG,KAAKpC,wBAAL,CAA8BC,mBAA9B,EAAmDC,oBAAnD,EAAyEC,cAAzE,EAAyFC,cAAzF,EAAyGC,WAAzG,EAAsHhR,YAAtH,EAAoIxF,WAApI,CAAjB;;IACA,IAAIwW,WAAJ,EAAiB;MACb,IAAIhF,SAAS,GAAG,KAAKpT,aAAL,CAAmB6H,aAAnB,EAAhB;MACA,IAAI1H,SAAS,GAAG,KAAKH,aAAL,CAAmBoa,iBAAnB,GAAuC,CAAvD;MACA,IAAIC,OAAO,GAAGzZ,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,WAA5B,GAA0CZ,SAAlE,CAAd;MACA,IAAIoT,WAAW,GAAG,CAAEtR,UAAU,CAACoY,OAAO,CAAC3T,KAAR,CAAc/C,KAAf,CAAV,GAAkC,CAAnC,GAAyCwW,UAAU,CAAC9G,YAAX,GAA0B,CAApE,IAA0ED,SAA5F,CAJa,CAKb;;MACA,IAAII,UAAU,GAAG,CAAEvR,UAAU,CAACoY,OAAO,CAAC3T,KAAR,CAAc7C,MAAf,CAAV,GAAmC,CAApC,GAA0CsW,UAAU,CAAC7G,aAAX,GAA2B,CAAtE,IAA4EF,SAA7F;MACA,OAAO;QAAEnD,CAAC,EAAEsD,WAAL;QAAkB3J,CAAC,EAAE4J,UAArB;QAAiC7P,KAAK,EAAEwW,UAAU,CAAC9G,YAAnD;QAAiExP,MAAM,EAAEsW,UAAU,CAAC7G;MAApF,CAAP;IACH,CARD,MASK;MACD,OAAO;QAAE/P,IAAI,EAAE4W,UAAU,CAACZ,eAAnB;QAAoCxV,GAAG,EAAEoW,UAAU,CAACX,cAApD;QAAoE7V,KAAK,EAAEwW,UAAU,CAAC9G,YAAtF;QAAoGxP,MAAM,EAAEsW,UAAU,CAAC7G;MAAvH,CAAP;IACH;EACJ,CA7DD;EA8DA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;;;EACAlU,UAAU,CAACa,SAAX,CAAqByP,mBAArB,GAA2C,UAAU2B,MAAV,EAAkBiJ,aAAlB,EAAiC7E,eAAjC,EAAkD3B,mBAAlD,EAAuEC,iBAAvE,EAA0F;IACjI,KAAK/T,aAAL,CAAmBua,4BAAnB,CAAgD,IAAhD,EADiI,CAEjI;;IACA,IAAIja,IAAI,GAAG,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,aAA7C,CAAX;;IACA,IAAID,IAAJ,EAAU;MACN;MACA,IAAIka,cAAc,GAAG/Z,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAArB;;MACA,KAAK,IAAI+P,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmK,cAAc,CAACpZ,MAAnC,EAA2CiP,CAAC,EAA5C,EAAgD;QAC5C;QACA,IAAIzO,WAAW,GAAG4Y,cAAc,CAACnK,CAAD,CAAhC;;QACA,IAAIzO,WAAW,CAAC+K,QAAZ,KAAyB0E,MAAM,CAACtQ,EAApC,EAAwC;UACpC,IAAIsQ,MAAM,IAAIA,MAAM,CAACnJ,IAAP,KAAgB,MAA1B,IAAoCmJ,MAAM,CAACnJ,IAAP,KAAgB,UAApD,IAAkEmJ,MAAM,CAACnJ,IAAP,KAAgB,UAAtF,EAAkG;YAC9F,IAAIuS,SAAS,GAAGpJ,MAAhB;;YACA,IAAIoJ,SAAS,CAACxM,SAAV,CAAoB4J,QAApB,CAA6B,iCAA7B,KAAmE4C,SAAS,CAACxM,SAAV,CAAoB4J,QAApB,CAA6B,2CAA7B,CAAvE,EAAkJ;cAC9I,IAAIyC,aAAJ,EAAmB;gBACf1Y,WAAW,CAACkF,KAAZ,GAAoBwT,aAApB;cACH;;cACD,IAAI7E,eAAJ,EAAqB;gBACjB7T,WAAW,CAACsP,MAAZ,GAAqBuE,eAArB;cACH;;cACD,IAAI3B,mBAAJ,EAAyB;gBACrBlS,WAAW,CAACuN,UAAZ,GAAyB2E,mBAAzB;gBACAlS,WAAW,CAACoP,QAAZ,GAAuB+C,iBAAvB;cACH;YACJ,CAXD,MAYK;cACDnS,WAAW,CAACgO,IAAZ,GAAmByB,MAAM,CAACxM,KAA1B;cACAjD,WAAW,CAACkF,KAAZ,GAAoBuK,MAAM,CAACxM,KAA3B;YACH;UACJ,CAlBD,MAmBK,IAAIwM,MAAM,CAACnJ,IAAP,KAAgB,OAApB,EAA6B;YAC9B,KAAK,IAAI0P,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4C,cAAc,CAACpZ,MAAnC,EAA2CwW,CAAC,EAA5C,EAAgD;cAC5C;cACA,IAAI8C,WAAW,GAAGF,cAAc,CAAC5C,CAAD,CAAhC;;cACA,IAAI4C,cAAc,CAAC5C,CAAD,CAAd,CAAkBjI,SAAlB,KAAgC0B,MAAM,CAAC1M,IAA3C,EAAiD;gBAC7C6V,cAAc,CAAC5C,CAAD,CAAd,CAAkB3I,QAAlB,GAA6B,KAA7B;cACH;YACJ;;YACDrN,WAAW,CAACqN,QAAZ,GAAuB,IAAvB;UACH,CATI,MAUA,IAAIoC,MAAM,CAACnJ,IAAP,KAAgB,UAApB,EAAgC;YACjC,KAAK,IAAI0P,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4C,cAAc,CAACpZ,MAAnC,EAA2CwW,CAAC,EAA5C,EAAgD;cAC5C;cACA,IAAI8C,WAAW,GAAGF,cAAc,CAAC5C,CAAD,CAAhC;;cACA,IAAI4C,cAAc,CAAC5C,CAAD,CAAd,CAAkBjI,SAAlB,KAAgC0B,MAAM,CAAC1M,IAA3C,EAAiD;gBAC7C6V,cAAc,CAAC5C,CAAD,CAAd,CAAkB3I,QAAlB,GAA6B,KAA7B,CAD6C,CAE7C;;gBACA,IAAIxC,aAAa,GAAG7L,QAAQ,CAACC,cAAT,CAAwB2Z,cAAc,CAAC5C,CAAD,CAAd,CAAkBjL,QAA1C,CAApB;;gBACA,IAAIF,aAAJ,EAAmB;kBACf,IAAK7K,WAAW,CAAC+N,SAAZ,KAA0B0B,MAAM,CAAC1M,IAAlC,IAA4C/C,WAAW,CAAC+K,QAAZ,KAAyBF,aAAa,CAAC1L,EAAvF,EAA4F;oBACxFa,WAAW,CAACqN,QAAZ,GAAuB,KAAvB;oBACAxC,aAAa,CAACmF,OAAd,GAAwB,KAAxB;kBACH;gBACJ;cACJ;YACJ;;YACD,IAAIP,MAAM,CAACO,OAAX,EAAoB;cAChBhQ,WAAW,CAACqN,QAAZ,GAAuB,IAAvB;YACH,CAFD,MAGK;cACDrN,WAAW,CAACqN,QAAZ,GAAuB,KAAvB;YACH;UACJ,CAtBI,MAuBA,IAAIoC,MAAM,CAACnJ,IAAP,KAAgB,YAAhB,IAAgCmJ,MAAM,CAACsJ,IAAP,KAAgB,CAApD,EAAuD;YACxD;YACA,IAAI3H,YAAY,GAAG3B,MAAM,CAAC7L,OAAP,CAAe6L,MAAM,CAACvR,aAAtB,EAAqC8a,IAAxD,CAFwD,CAGxD;;YACA,IAAIC,SAAS,GAAGxJ,MAAM,CAACwE,QAAvB;YACA,IAAIiF,eAAe,GAAG,KAAtB;;YACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,SAAS,CAACzZ,MAA9B,EAAsC2Z,CAAC,EAAvC,EAA2C;cACvC,IAAIF,SAAS,CAACE,CAAD,CAAT,CAAaH,IAAb,KAAsB5H,YAA1B,EAAwC;gBACpCpR,WAAW,CAACsN,aAAZ,GAA4B8D,YAA5B;cACH;YACJ;UACJ,CAXI,MAYA,IAAI3B,MAAM,CAACnJ,IAAP,KAAgB,iBAAhB,IAAqCmJ,MAAM,CAACsJ,IAAP,GAAc,CAAvD,EAA0D;YAC3D;YACA,IAAI3H,YAAY,GAAG3B,MAAM,CAAC2J,eAA1B;YACApZ,WAAW,CAACiO,YAAZ,GAA2B,EAA3B;;YACA,KAAK,IAAIoL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjI,YAAY,CAAC5R,MAAjC,EAAyC6Z,CAAC,EAA1C,EAA8C;cAC1C;cACA,IAAIJ,SAAS,GAAGxJ,MAAM,CAACwE,QAAvB;;cACA,KAAK,IAAIkF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,SAAS,CAACzZ,MAA9B,EAAsC2Z,CAAC,EAAvC,EAA2C;gBACvC,IAAIF,SAAS,CAACE,CAAD,CAAT,KAAiB/H,YAAY,CAACiI,CAAD,CAAjC,EAAsC;kBAClCrZ,WAAW,CAACiO,YAAZ,CAAyBpE,IAAzB,CAA8BsP,CAA9B;gBACH;cACJ;YACJ;;YACDnZ,WAAW,CAACsN,aAAZ,GAA4BmC,MAAM,CAACxM,KAAnC;YACA,IAAIqW,KAAK,GAAGtZ,WAAW,CAACuZ,QAAZ,GAAuBvZ,WAAW,CAACuZ,QAAZ,CAAqBxQ,OAArB,CAA6B0G,MAAM,CAACxM,KAApC,CAAvB,GAAoE,CAAhF;YACAjD,WAAW,CAAC9B,aAAZ,GAA4Bob,KAAK,GAAG,CAAC,CAAT,GAAaA,KAAb,GAAqB,CAAjD;YACAtZ,WAAW,CAACiO,YAAZ,GAA2B,CAACjO,WAAW,CAAC9B,aAAb,CAA3B;UACH;;UACD,IAAIuR,MAAM,CAACzK,QAAX,EAAqB;YACjBhF,WAAW,CAACoN,UAAZ,GAAyB,IAAzB;UACH;;UACD,KAAKtG,0BAAL,CAAgC9G,WAAhC;UACA;QACH,CAxFD,MAyFK,IAAIyP,MAAM,IAAIA,MAAM,CAAC+J,YAAP,CAAoB,MAApB,KAA+B,IAAzC,IAAiD/J,MAAM,CAACnJ,IAAP,KAAgB,MAAjE,IAA2EtG,WAAW,CAAC+K,QAAZ,KAAyB0E,MAAM,CAACgK,IAAP,CAAYta,EAApH,EAAwH;UACzHa,WAAW,CAACsN,aAAZ,GAA4BmC,MAAM,CAACxM,KAAnC;QACH;;QACD,KAAK6D,0BAAL,CAAgC9G,WAAhC;MACH;;MACDyH,MAAM,CAACC,cAAP,CAAsBC,UAAtB,CAAiC,KAAKvJ,aAAL,CAAmBwJ,UAAnB,GAAgC,aAAjE;MACA,KAAKxJ,aAAL,CAAmByJ,uBAAnB,CAA2C+Q,cAA3C,EAA2D,aAA3D;IACH;;IACD,IAAI,KAAKza,SAAL,CAAewG,kBAAf,IAAqC8K,MAArC,IAA+CA,MAAM,CAACtQ,EAA1D,EAA8D;MAC1D,IAAIua,YAAY,GAAG,KAAKvb,SAAL,CAAe4S,SAAf,CAAyBtB,MAAM,CAACtQ,EAAP,CAAUW,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAzB,CAAnB;;MACA,IAAI4Z,YAAY,IAAIA,YAAY,CAAC1F,OAA7B,IAAwC0F,YAAY,CAAC1F,OAAb,CAAqBC,QAArB,CAA8B,CAA9B,CAA5C,EAA8E;QAC1EyF,YAAY,CAACzW,KAAb,GAAqBwM,MAAM,CAACxM,KAA5B;QACA,IAAI0W,KAAK,GAAGrc,2BAA2B,CAACoc,YAAY,CAAC1F,OAAb,CAAqBC,QAArB,CAA8B,CAA9B,CAAD,CAA3B,CAA8D2F,OAA1E;QACA,KAAKzb,SAAL,CAAewG,kBAAf,CAAkCkV,uCAAlC,CAA0EF,KAA1E,EAAiFD,YAAY,CAAC1F,OAAb,CAAqBC,QAArB,CAA8B,CAA9B,CAAjF,EAAmHyF,YAAY,CAACI,uBAAhI,EAAyJJ,YAAzJ;MACH;IACJ;EACJ,CAnHD;EAoHA;AACJ;AACA;;;EACIlc,UAAU,CAACa,SAAX,CAAqB0b,wBAArB,GAAgD,YAAY;IACxD,IAAIrb,IAAI,GAAG,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,eAA7C,CAAX;IACA,IAAIC,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAArB;;IACA,IAAIE,cAAJ,EAAoB;MAChB,KAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,cAAc,CAACY,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;QAC5C,KAAKpB,SAAL,CAAewG,kBAAf,CAAkCqV,eAAlC,CAAkDpb,cAAc,CAACW,CAAD,CAAd,CAAkBqR,GAAlB,CAAsB9Q,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAAlD;MACH;IACJ;EACJ,CARD,CAzpDwC,CAkqDxC;;;EACAtC,UAAU,CAACa,SAAX,CAAqBoI,qBAArB,GAA6C,UAAUwT,QAAV,EAAoB1b,SAApB,EAA+B+a,KAA/B,EAAsCtZ,WAAtC,EAAmDoC,cAAnD,EAAmE;IAC5G;IACA,IAAImD,UAAU,GAAGvG,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,QAA5B,GAAuCZ,SAAvC,GAAmD,GAAnD,GAAyD+a,KAAjF,CAAjB;;IACA,IAAI/T,UAAJ,EAAgB;MACZ,IAAIxG,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,aAA5B,GAA4CZ,SAApE,CAAhB;;MACA,IAAI0b,QAAQ,CAAC3T,IAAT,KAAkB,MAAlB,IAA4Bf,UAAU,CAACV,aAAX,KAA6B9F,SAA7D,EAAwE;QACpEwG,UAAU,CAACV,aAAX,CAAyB2H,MAAzB;MACH;;MACDjH,UAAU,CAACiH,MAAX;IACH,CAT2G,CAU5G;;;IACA,IAAI8I,QAAQ,GAAGtW,QAAQ,CAACC,cAAT,CAAwB,aAAaV,SAAb,GAAyB,GAAzB,GAA+BA,SAAvD,CAAf;IACA,IAAIoD,IAAI,GAAGtB,UAAU,CAAC4Z,QAAQ,CAACnV,KAAT,CAAenD,IAAhB,CAArB;IACA,IAAIQ,GAAG,GAAGvC,QAAQ,CAACqa,QAAQ,CAACnV,KAAT,CAAe3C,GAAhB,CAAlB;IACA,IAAIJ,KAAK,GAAG1B,UAAU,CAAC4Z,QAAQ,CAACnV,KAAT,CAAe/C,KAAhB,CAAtB;IACA,IAAIE,MAAM,GAAG5B,UAAU,CAAC4Z,QAAQ,CAACnV,KAAT,CAAe7C,MAAhB,CAAvB;IACA,IAAIiY,aAAJ;IACA,IAAIC,aAAJ;IACA,IAAIzG,eAAJ;IACA,IAAI0G,eAAJ;IACA,IAAI5I,SAAS,GAAG,KAAKpT,aAAL,CAAmB6H,aAAnB,EAAhB;;IACA,IAAIqP,QAAQ,IAAI,CAAClT,cAAjB,EAAiC;MAC7B8X,aAAa,GAAG7Z,UAAU,CAACiV,QAAQ,CAACxQ,KAAT,CAAe/C,KAAhB,CAA1B;MACAoY,aAAa,GAAG9Z,UAAU,CAACiV,QAAQ,CAACxQ,KAAT,CAAe7C,MAAhB,CAA1B;;MACA,IAAIqT,QAAQ,CAACxQ,KAAT,CAAee,SAAf,IAA4B,eAAhC,EAAiD;QAC7CyP,QAAQ,CAACxQ,KAAT,CAAee,SAAf,GAA2B,cAA3B;QACA6N,eAAe,GAAGzR,MAAM,GAAG,CAA3B;QACAmY,eAAe,GAAGF,aAAa,GAAG1I,SAAlC;QACA8D,QAAQ,CAACxQ,KAAT,CAAenD,IAAf,GAAwBA,IAAI,IAAI+R,eAAe,GAAIwG,aAAa,GAAG1I,SAAvC,CAAL,GAA4D4I,eAAe,GAAG,CAA/E,GAAqF,IAA3G;MACH;;MACD,IAAI9E,QAAQ,CAACxQ,KAAT,CAAee,SAAf,IAA4B,gBAAhC,EAAkD;QAC9CyP,QAAQ,CAACxQ,KAAT,CAAee,SAAf,GAA2B,cAA3B;QACAyP,QAAQ,CAACxQ,KAAT,CAAenD,IAAf,GAAsBA,IAAI,GAAG,IAA7B;QACA2T,QAAQ,CAACxQ,KAAT,CAAe3C,GAAf,GAAsBA,GAAD,GAAQ,IAA7B;MACH;;MACD,IAAImT,QAAQ,CAACxQ,KAAT,CAAee,SAAf,IAA4B,gBAAhC,EAAkD;QAC9CyP,QAAQ,CAACxQ,KAAT,CAAee,SAAf,GAA2B,cAA3B;QACA6N,eAAe,GAAGzR,MAAM,GAAG,CAA3B;QACAmY,eAAe,GAAGF,aAAa,GAAG1I,SAAlC;QACA8D,QAAQ,CAACxQ,KAAT,CAAenD,IAAf,GAAwBA,IAAI,IAAI+R,eAAe,GAAG0G,eAAtB,CAAL,GAAgDA,eAAe,GAAG,CAAnE,GAAyE,IAA/F;QACA9E,QAAQ,CAACxQ,KAAT,CAAe3C,GAAf,GAAuBA,GAAG,IAAIJ,KAAK,GAAIoY,aAAa,GAAG3I,SAA7B,CAAH,GAAgD2I,aAAa,GAAG3I,SAAjB,GAA8B,CAA/E,GAAsF,IAA3G;MACH;IACJ;;IACD,IAAIxR,WAAW,CAACqa,gBAAZ,IAAgC,KAAKxc,gBAAzC,EAA2D;MACvDoc,QAAQ,CAACjO,SAAT,GAAqB,2CAArB;MACAiO,QAAQ,CAACnV,KAAT,CAAe2P,aAAf,GAA+B,MAA/B;IACH,CAHD,MAIK,IAAIzU,WAAW,CAACqa,gBAAhB,EAAkC;MACnC,IAAIra,WAAW,CAACkF,KAAhB,EAAuB;QACnB+U,QAAQ,CAACjO,SAAT,GAAqB,2CAArB;QACAiO,QAAQ,CAACnV,KAAT,CAAe2P,aAAf,GAA+B,MAA/B;MACH,CAHD,MAIK;QACDwF,QAAQ,CAACjO,SAAT,GAAqB,iCAArB;MACH;IACJ,CARI,MASA,IAAIhM,WAAW,CAACE,IAAZ,KAAqB,QAAzB,EAAmC;MACpC+Z,QAAQ,CAACjO,SAAT,GAAqB,wBAArB;IACH;;IACDiO,QAAQ,CAAC9a,EAAT,GAAc,KAAKhB,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,QAA5B,GAAuCZ,SAAvC,GAAmD,GAAnD,GAAyD+a,KAAvE;IACAW,QAAQ,CAACnV,KAAT,CAAewV,MAAf,GAAwB,IAAxB;EACH,CA7DD;EA8DA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;;;EACA9c,UAAU,CAACa,SAAX,CAAqBiH,gBAArB,GAAwC,UAAUtF,WAAV,EAAuBzB,SAAvB,EAAkC+a,KAAlC,EAAyCiB,cAAzC,EAAyDlb,KAAzD,EAAgE;IACpG;IACA,IAAImG,YAAJ,CAFoG,CAGpG;;IACA,QAAQxF,WAAW,CAAC,MAAD,CAAnB;MACI,KAAK,SAAL;QACIwF,YAAY,GAAG,KAAKgV,kBAAL,CAAwBxa,WAAxB,EAAqCzB,SAArC,EAAgD,MAAhD,CAAf;QACA;;MACJ,KAAK,UAAL;QACIiH,YAAY,GAAG,KAAKgV,kBAAL,CAAwBxa,WAAxB,EAAqCzB,SAArC,EAAgD,UAAhD,CAAf;QACA;;MACJ,KAAK,aAAL;QACIiH,YAAY,GAAG,KAAKiV,mBAAL,CAAyBza,WAAzB,EAAsCzB,SAAtC,EAAiD,OAAjD,CAAf;QACA;;MACJ,KAAK,UAAL;QACIiH,YAAY,GAAG,KAAKiV,mBAAL,CAAyBza,WAAzB,EAAsCzB,SAAtC,EAAiD,UAAjD,EAA6Dgc,cAA7D,CAAf;QACA;;MACJ,KAAK,UAAL;QACI/U,YAAY,GAAG,KAAKkV,mBAAL,CAAyB1a,WAAzB,EAAsCzB,SAAtC,EAAiD+a,KAAjD,EAAwDiB,cAAxD,CAAf;QACA;;MACJ,KAAK,SAAL;QACI/U,YAAY,GAAG,KAAKmV,kBAAL,CAAwB3a,WAAxB,EAAqCzB,SAArC,CAAf;QACA;;MACJ,KAAK,cAAL;MACA,KAAK,gBAAL;QACIiH,YAAY,GAAG,KAAKoV,oBAAL,CAA0B5a,WAA1B,EAAuCzB,SAAvC,EAAkD+a,KAAlD,EAAyDiB,cAAzD,EAAyElb,KAAzE,CAAf;QACA,IAAI+C,cAAc,GAAG,KAArB;;QACA,IAAIpC,WAAW,CAAC,UAAD,CAAX,KAA4B,CAAhC,EAAmC;UAC/BoC,cAAc,GAAG,IAAjB;QACH;;QACD,IAAIpC,WAAW,CAACkF,KAAZ,IAAqBlF,WAAW,CAACkF,KAAZ,KAAsB,EAA/C,EAAmD;UAC/C,KAAKC,oBAAL,CAA0BnF,WAA1B,EAAuCsZ,KAAvC,EAA8CiB,cAA9C,EAA8DnY,cAA9D;UACA,KAAKpE,mBAAL,GAA2B,IAA3B;UACAqB,KAAK;QACR;;QACD;;MACJ,KAAK,QAAL;QACImG,YAAY,GAAG,KAAKqV,iBAAL,CAAuB7a,WAAvB,EAAoCzB,SAApC,CAAf;QACA;;MACJ,KAAK,KAAL;QACI,IAAI,KAAKJ,SAAL,CAAewG,kBAAnB,EAAuC;UACnC,IAAI3E,WAAW,CAACkF,KAAZ,IAAqBlF,WAAW,CAACkF,KAAZ,KAAsB,EAA3C,IAAiD,CAAC,KAAKlH,mBAA3D,EAAgF;YAC5E,KAAKmH,oBAAL,CAA0BnF,WAA1B,EAAuCsZ,KAAvC,EAA8CiB,cAA9C;UACH;QACJ;;QACD;;MACJ,KAAK,eAAL;MACA,KAAK,gBAAL;QACI,IAAIva,WAAW,CAACkF,KAAZ,IAAqBlF,WAAW,CAACkF,KAAZ,KAAsB,EAA3C,IAAiD,CAAC,KAAKlH,mBAA3D,EAAgF;UAC5E,KAAKmH,oBAAL,CAA0BnF,WAA1B,EAAuCsZ,KAAvC,EAA8CiB,cAA9C;QACH;;QACD;IA/CR;;IAiDA,OAAO;MAAE/U,YAAY,EAAEA,YAAhB;MAA8BnG,KAAK,EAAEA;IAArC,CAAP;EACH,CAtDD;;EAuDA7B,UAAU,CAACa,SAAX,CAAqBmG,gBAArB,GAAwC,UAAUxE,WAAV,EAAuB;IAC3D;IACA,IAAIwF,YAAJ,CAF2D,CAG3D;;IACA,QAAQxF,WAAW,CAAC,MAAD,CAAnB;MACI,KAAK,SAAL;QACIwF,YAAY,GAAG,SAAf;QACA;;MACJ,KAAK,UAAL;QACIA,YAAY,GAAG,UAAf;QACA;;MACJ,KAAK,aAAL;QACIA,YAAY,GAAG,aAAf;QACA;;MACJ,KAAK,UAAL;QACIA,YAAY,GAAG,UAAf;QACA;;MACJ,KAAK,UAAL;QACIA,YAAY,GAAG,UAAf;QACA;;MACJ,KAAK,SAAL;QACIA,YAAY,GAAG,SAAf;QACA;;MACJ,KAAK,gBAAL;QACIA,YAAY,GAAG,gBAAf;;QACA,IAAIxF,WAAW,CAACC,cAAhB,EAAgC;UAC5BuF,YAAY,GAAG,cAAf;QACH;;QACD;;MACJ,KAAK,cAAL;QACIA,YAAY,GAAG,cAAf;QACA;IA3BR;;IA6BA,OAAOA,YAAP;EACH,CAlCD,CApyDwC,CAu0DxC;;;EACAhI,UAAU,CAACa,SAAX,CAAqBwc,iBAArB,GAAyC,UAAUnc,IAAV,EAAgBH,SAAhB,EAA2B;IAChE;IACA,IAAIgH,UAAU,GAAGvG,QAAQ,CAACgL,aAAT,CAAuB,OAAvB,CAAjB;;IACA,IAAItL,IAAI,CAACwG,KAAT,EAAgB;MACZK,UAAU,CAACe,IAAX,GAAkB,OAAlB;MACAf,UAAU,CAACiO,GAAX,GAAiB9U,IAAI,CAACwG,KAAtB;IACH,CAHD,MAIK;MACDK,UAAU,CAACe,IAAX,GAAkB,QAAlB;IACH;;IACDf,UAAU,CAACyG,SAAX,GAAuB,iBAAvB;;IACA,IAAItN,IAAI,CAACsP,IAAL,KAAc,EAAlB,EAAsB;MAClBzI,UAAU,CAACtC,KAAX,GAAmBvE,IAAI,CAACsP,IAAxB;IACH,CAFD,MAGK;MACDzI,UAAU,CAACtC,KAAX,GAAmB,EAAnB;IACH;;IACDsC,UAAU,CAACxC,IAAX,GAAkBrE,IAAI,CAACmB,SAAvB;IACA,OAAO0F,UAAP;EACH,CAnBD,CAx0DwC,CA41DxC;;;EACA/H,UAAU,CAACa,SAAX,CAAqBmc,kBAArB,GAA0C,UAAU9b,IAAV,EAAgBH,SAAhB,EAA2B+H,IAA3B,EAAiC;IACvE;IACA,IAAIf,UAAJ;;IACA,IAAI7G,IAAI,CAACuF,OAAL,KAAiB,CAArB,EAAwB;MACpB;IACH;;IACD,IAAIvF,IAAI,CAAC6E,SAAT,EAAoB;MAChBgC,UAAU,GAAGvG,QAAQ,CAACgL,aAAT,CAAuB,UAAvB,CAAb;MACAzE,UAAU,CAACT,KAAX,CAAiBgW,MAAjB,GAA0B,MAA1B;IACH,CAHD,MAIK;MACDvV,UAAU,GAAGvG,QAAQ,CAACgL,aAAT,CAAuB,OAAvB,CAAb;MACAzE,UAAU,CAACe,IAAX,GAAkBA,IAAlB;IACH;;IACD,IAAI5H,IAAI,CAACqF,SAAL,GAAiB,CAArB,EAAwB;MACpBwB,UAAU,CAACzB,SAAX,GAAuBpF,IAAI,CAACqF,SAA5B;IACH;;IACD,KAAKgX,mBAAL,CAAyBrc,IAAzB,EAA+B6G,UAA/B;;IACA,IAAI7G,IAAI,CAACsP,IAAL,KAAc,EAAlB,EAAsB;MAClBzI,UAAU,CAACtC,KAAX,GAAmBvE,IAAI,CAACsP,IAAxB;IACH,CAFD,MAGK;MACDzI,UAAU,CAACtC,KAAX,GAAmB,EAAnB;IACH;;IACD,IAAI,CAAC,KAAK9E,SAAL,CAAe6c,kBAApB,EAAwC;MACpCzV,UAAU,CAAC0V,YAAX,GAA0B,KAA1B;IACH;;IACD1V,UAAU,CAACxC,IAAX,GAAkBrE,IAAI,CAACmB,SAAvB;IACA,OAAO0F,UAAP;EACH,CA7BD,CA71DwC,CA23DxC;;;EACA/H,UAAU,CAACa,SAAX,CAAqBqI,eAArB,GAAuC,UAAUhI,IAAV,EAAgB6G,UAAhB,EAA4B;IAC/D,IAAI2V,UAAU,GAAG,KAAjB;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKpd,kBAAL,CAAwByB,MAA5C,EAAoD2b,CAAC,EAArD,EAAyD;MACrD,IAAI5V,UAAU,CAACpG,EAAX,KAAkB,KAAKpB,kBAAL,CAAwBod,CAAxB,CAAtB,EAAkD;QAC9CD,UAAU,GAAG,IAAb;QACA;MACH;IACJ;;IACD,IAAI,CAAC,KAAK/c,SAAL,CAAewG,kBAAhB,IAAsC,CAAC,KAAKxG,SAAL,CAAeyN,gBAAtD,KAA2ElN,IAAI,CAACuB,cAAL,IAAuBvB,IAAI,CAAC2b,gBAAvG,CAAJ,EAA8H;MAC1Ha,UAAU,GAAG,IAAb;IACH;;IACD,IAAIxc,IAAI,CAAC0O,UAAL,IAAoB,CAAC,KAAKjP,SAAL,CAAeid,gBAApC,IAAyDF,UAA7D,EAAyE;MACrE3V,UAAU,CAACP,QAAX,GAAsB,IAAtB;MACAO,UAAU,CAACT,KAAX,CAAiB+I,MAAjB,GAA0B,SAA1B;MACAtI,UAAU,CAACT,KAAX,CAAiB5D,eAAjB,GAAmC,aAAnC;IACH,CAJD,MAKK;MACD;MACA,IAAIuB,WAAW,GAAG/D,IAAI,CAAC2c,SAAvB;MACA9V,UAAU,CAACT,KAAX,CAAiB5D,eAAjB,GAAmC,UAAUuB,WAAW,CAACpB,CAAtB,GAA0B,GAA1B,GAAgCoB,WAAW,CAACnB,CAA5C,GAAgD,GAAhD,GAAsDmB,WAAW,CAAClB,CAAlE,GAAsE,GAAtE,GAA4E,GAA5E,GAAkF,GAArH,CAHC,CAID;;MACA,IAAIG,SAAS,GAAGhD,IAAI,CAAC4c,SAArB;MACA/V,UAAU,CAACT,KAAX,CAAiB1B,KAAjB,GAAyB,UAAU1B,SAAS,CAACL,CAApB,GAAwB,GAAxB,GAA8BK,SAAS,CAACJ,CAAxC,GAA4C,GAA5C,GAAkDI,SAAS,CAACH,CAA5D,GAAgE,GAAhE,GAAsE,CAAtE,GAA0E,GAAnG;IACH;EACJ,CAxBD;EAyBA;AACJ;AACA;AACA;EACI;;;EACA/D,UAAU,CAACa,SAAX,CAAqBkd,kBAArB,GAA0C,UAAUL,UAAV,EAAsB;IAC5D;IACA,IAAIvN,UAAU,GAAG3O,QAAQ,CAAC2W,sBAAT,CAAgC,wBAAhC,CAAjB;IACA,KAAK6F,sBAAL,CAA4B7N,UAA5B,EAAwCuN,UAAxC,EAH4D,CAI5D;;IACA,IAAIvQ,eAAe,GAAG3L,QAAQ,CAAC2W,sBAAT,CAAgC,iCAAhC,CAAtB;IACA,KAAK6F,sBAAL,CAA4B7Q,eAA5B,EAA6CuQ,UAA7C;EACH,CAPD,CA15DwC,CAk6DxC;;;EACA1d,UAAU,CAACa,SAAX,CAAqBmd,sBAArB,GAA8C,UAAU7N,UAAV,EAAsBuN,UAAtB,EAAkC;IAC5E,KAAK,IAAI3b,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoO,UAAU,CAACnO,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;MACxC,IAAIoO,UAAU,CAACpO,CAAD,CAAd,EAAmB;QACf;QACA,IAAIgG,UAAU,GAAGoI,UAAU,CAACpO,CAAD,CAA3B;;QACA,IAAI,CAAC2b,UAAL,EAAiB;UACb3V,UAAU,CAACP,QAAX,GAAsB,IAAtB;UACAO,UAAU,CAACT,KAAX,CAAiB+I,MAAjB,GAA0B,SAA1B;QACH,CAHD,MAIK;UACD;UACAtI,UAAU,CAACP,QAAX,GAAsB,KAAtB;QACH;MACJ;IACJ;EACJ,CAfD,CAn6DwC,CAm7DxC;;;EACAxH,UAAU,CAACa,SAAX,CAAqBsI,aAArB,GAAqC,UAAUjI,IAAV,EAAgB6G,UAAhB,EAA4BhH,SAA5B,EAAuC;IACxEgH,UAAU,CAACkQ,QAAX,GAAsB/W,IAAI,CAAC+c,QAA3B;IACA,KAAKjd,WAAL,GAAmB+K,IAAI,CAACmS,GAAL,CAAS,KAAKld,WAAd,EAA2B+G,UAAU,CAACkQ,QAAtC,CAAnB;;IACA,IAAI,KAAKhX,WAAL,KAAqB,CAAC,CAA1B,EAA6B;MACzB,KAAKA,WAAL,GAAmB8G,UAAU,CAACkQ,QAA9B;IACH;;IACD,KAAKhX,WAAL,GAAmB8K,IAAI,CAACoS,GAAL,CAAS,KAAKld,WAAd,EAA2B8G,UAAU,CAACkQ,QAAtC,CAAnB;IACA,KAAK9X,gBAAL,CAAsBY,SAAS,CAAC+K,QAAV,EAAtB,IAA8C,KAAK9K,WAAnD;IACA,KAAKZ,kBAAL,CAAwBW,SAAS,CAAC+K,QAAV,EAAxB,IAAgD,KAAK7K,WAArD;EACH,CATD,CAp7DwC,CA87DxC;;;EACAjB,UAAU,CAACa,SAAX,CAAqBuI,oBAArB,GAA4C,UAAUlI,IAAV,EAAgB6G,UAAhB,EAA4B;IACpE,IAAI7G,IAAI,CAAC+F,UAAT,EAAqB;MACjBc,UAAU,CAACqW,QAAX,GAAsB,IAAtB;MACArW,UAAU,CAACT,KAAX,CAAiB+W,MAAjB,GAA0B,eAA1B;IACH,CAHD,MAIK;MACD;MACA,IAAIpZ,WAAW,GAAG/D,IAAI,CAACod,WAAvB;MACAvW,UAAU,CAACT,KAAX,CAAiB+W,MAAjB,GAA0Bnd,IAAI,CAACqd,WAA/B;MACAxW,UAAU,CAACT,KAAX,CAAiBrC,WAAjB,GAA+B,UAAUA,WAAW,CAACpB,CAAtB,GAA0B,GAA1B,GAAgCoB,WAAW,CAACnB,CAA5C,GAAgD,GAAhD,GAAsDmB,WAAW,CAAClB,CAAlE,GAAsE,GAAtE,GAA4E,CAA5E,GAAgF,GAA/G;IACH;;IACD,IAAIgE,UAAU,CAACe,IAAX,KAAoB,UAApB,IAAkCf,UAAU,CAACe,IAAX,KAAoB,OAA1D,EAAmE;MAC/D,IAAI0V,WAAW,GAAGtd,IAAI,CAACud,WAAvB;MACA,KAAKC,qBAAL,CAA2BF,WAA3B,EAAwCzW,UAAxC;IACH;EACJ,CAfD,CA/7DwC,CA+8DxC;;;EACA/H,UAAU,CAACa,SAAX,CAAqBwI,iBAArB,GAAyC,UAAUtB,UAAV,EAAsB;IAC3D;IACA,IAAIA,UAAU,CAACe,IAAX,KAAoB,QAApB,KAAiCf,UAAU,CAACT,KAAX,CAAiB5D,eAAjB,KAAqC,0BAArC,IAAmEqE,UAAU,CAACT,KAAX,CAAiB5D,eAAjB,KAAqC,oBAAzI,CAAJ,EAAoK;MAChKqE,UAAU,CAACT,KAAX,CAAiB5D,eAAjB,GAAmC,uBAAnC;IACH;;IACD,IAAIqE,UAAU,CAACT,KAAX,CAAiB1B,KAAjB,KAA2B,0BAA/B,EAA2D;MACvDmC,UAAU,CAACT,KAAX,CAAiB1B,KAAjB,GAAyB,OAAzB;IACH;EACJ,CARD,CAh9DwC,CAy9DxC;;;EACA5F,UAAU,CAACa,SAAX,CAAqB0c,mBAArB,GAA2C,UAAUrc,IAAV,EAAgB6G,UAAhB,EAA4B;IACnE;IACA,IAAI5B,SAAS,GAAGjF,IAAI,CAACuC,SAArB;;IACA,QAAQ0C,SAAR;MACI,KAAK,CAAL;QACI4B,UAAU,CAACT,KAAX,CAAiBqX,SAAjB,GAA6B,MAA7B;QACA;;MACJ,KAAK,CAAL;QACI5W,UAAU,CAACT,KAAX,CAAiBqX,SAAjB,GAA6B,QAA7B;QACA;;MACJ,KAAK,CAAL;QACI5W,UAAU,CAACT,KAAX,CAAiBqX,SAAjB,GAA6B,OAA7B;QACA;;MACJ,KAAK,CAAL;QACI5W,UAAU,CAACT,KAAX,CAAiBqX,SAAjB,GAA6B,SAA7B;QACA;IAZR;EAcH,CAjBD,CA19DwC,CA4+DxC;;;EACA3e,UAAU,CAACa,SAAX,CAAqB6d,qBAArB,GAA6C,UAAUF,WAAV,EAAuBzW,UAAvB,EAAmC;IAC5E;IACA,QAAQyW,WAAR;MACI,KAAK,CAAL;QACIzW,UAAU,CAACT,KAAX,CAAiBkX,WAAjB,GAA+B,OAA/B;QACA;;MACJ,KAAK,CAAL;QACIzW,UAAU,CAACT,KAAX,CAAiBkX,WAAjB,GAA+B,QAA/B;QACA;;MACJ,KAAK,CAAL;QACIzW,UAAU,CAACT,KAAX,CAAiBkX,WAAjB,GAA+B,QAA/B;QACA;;MACJ,KAAK,CAAL;QACIzW,UAAU,CAACT,KAAX,CAAiBkX,WAAjB,GAA+B,OAA/B;QACA;;MACJ,KAAK,CAAL;QACIzW,UAAU,CAACT,KAAX,CAAiBkX,WAAjB,GAA+B,QAA/B;QACA;;MACJ,KAAK,CAAL;QACIzW,UAAU,CAACT,KAAX,CAAiBkX,WAAjB,GAA+B,QAA/B;QACA;;MACJ,KAAK,CAAL;QACIzW,UAAU,CAACT,KAAX,CAAiBkX,WAAjB,GAA+B,OAA/B;QACA;IArBR;EAuBH,CAzBD,CA7+DwC,CAugExC;;;EACAxe,UAAU,CAACa,SAAX,CAAqBoc,mBAArB,GAA2C,UAAU/b,IAAV,EAAgBH,SAAhB,EAA2B+H,IAA3B,EAAiCiU,cAAjC,EAAiD;IACxF;IACA,IAAIhV,UAAU,GAAGvG,QAAQ,CAACgL,aAAT,CAAuB,OAAvB,CAAjB;IACAzE,UAAU,CAACe,IAAX,GAAkBA,IAAlB;;IACA,IAAI5H,IAAI,CAAC2O,QAAT,EAAmB;MACf9H,UAAU,CAACyK,OAAX,GAAqB,IAArB;IACH;;IACDzK,UAAU,CAACxC,IAAX,GAAkBrE,IAAI,CAACqP,SAAvB;IACAxI,UAAU,CAACtC,KAAX,GAAmBvE,IAAI,CAACwG,KAAxB;IACA,OAAOK,UAAP;EACH,CAVD,CAxgEwC,CAmhExC;;;EACA/H,UAAU,CAACa,SAAX,CAAqBqc,mBAArB,GAA2C,UAAUhc,IAAV,EAAgBH,SAAhB,EAA2B+a,KAA3B,EAAkCiB,cAAlC,EAAkD;IACzF;IACA,IAAIhV,UAAU,GAAGvG,QAAQ,CAACgL,aAAT,CAAuB,QAAvB,CAAjB,CAFyF,CAGzF;;IACA,IAAI+E,UAAU,GAAGrQ,IAAI,CAAC,UAAD,CAArB;;IACA,IAAIA,IAAI,CAAC2O,QAAL,IAAiB,CAACkN,cAAtB,EAAsC;MAClC;MACA,IAAI/P,aAAa,GAAGxL,QAAQ,CAACC,cAAT,CAAwB,qBAAqBV,SAArB,GAAiC,GAAjC,GAAuC+a,KAA/D,CAApB;;MACA,IAAI9O,aAAJ,EAAmB;QACfA,aAAa,CAACgC,MAAd;MACH,CALiC,CAMlC;;;MACA,IAAI4P,WAAW,GAAGpd,QAAQ,CAACgL,aAAT,CAAuB,OAAvB,CAAlB;MACAoS,WAAW,CAACjd,EAAZ,GAAiB,qBAAqBZ,SAArB,GAAiC,GAAjC,GAAuC+a,KAAxD;MACA8C,WAAW,CAACC,YAAZ,CAAyB,MAAzB,EAAiC,KAAKle,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,QAA5B,GAAuCZ,SAAvC,GAAmD,GAAnD,GAAyD+a,KAA1F,EATkC,CAUlC;;MACA,IAAInY,MAAM,GAAGzC,IAAI,CAAC,YAAD,CAAjB,CAXkC,CAYlC;;MACA,IAAIyB,IAAI,GAAGzB,IAAI,CAAC,MAAD,CAAf;MACA0d,WAAW,CAACtX,KAAZ,CAAkBkC,QAAlB,GAA6B,UAA7B;MACAoV,WAAW,CAACtX,KAAZ,CAAkB+W,MAAlB,GAA2B,KAA3B,CAfkC,CAgBlC;;MACA,KAAK/V,aAAL,CAAmBsW,WAAnB,EAAgCjb,MAAhC,EAAwChB,IAAxC,EAA8C5B,SAA9C,EAAyDG,IAAI,CAAC,UAAD,CAA7D;MACA0d,WAAW,CAACtX,KAAZ,CAAkB5D,eAAlB,GAAoC,uBAApC;MACAkb,WAAW,CAACpQ,SAAZ,GAAwB,wBAAxB;;MACA,IAAItN,IAAI,CAACR,aAAL,KAAuB,CAAC,CAA5B,EAA+B;QAC3Bke,WAAW,CAACnZ,KAAZ,GAAoBvE,IAAI,CAAC4O,aAAzB;MACH;;MACD,IAAIiN,cAAJ,EAAoB;QAChBA,cAAc,CAACxT,WAAf,CAA2BqV,WAA3B;MACH,CAFD,MAGK;QACD,IAAIrd,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,aAA5B,GAA4CZ,SAApE,CAAhB;QACAQ,SAAS,CAACgI,WAAV,CAAsBqV,WAAtB;MACH;;MACDA,WAAW,CAACnV,gBAAZ,CAA6B,OAA7B,EAAsC,KAAKC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAtC;MACAiV,WAAW,CAACnV,gBAAZ,CAA6B,MAA7B,EAAqC,KAAKG,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAArC;MACAiV,WAAW,CAACnV,gBAAZ,CAA6B,OAA7B,EAAsC,KAAKI,gBAAL,CAAsBF,IAAtB,CAA2B,IAA3B,CAAtC;MACAiV,WAAW,CAACnV,gBAAZ,CAA6B,QAA7B,EAAuC,KAAKK,gBAAL,CAAsBH,IAAtB,CAA2B,IAA3B,CAAvC;MACAiV,WAAW,CAACnV,gBAAZ,CAA6B,SAA7B,EAAwC,KAAKM,qBAAL,CAA2BJ,IAA3B,CAAgC,IAAhC,CAAxC;MACA5B,UAAU,GAAGvG,QAAQ,CAACgL,aAAT,CAAuB,UAAvB,CAAb;IACH;;IACD,KAAK,IAAI3D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0I,UAAU,CAACvP,MAA/B,EAAuC6G,CAAC,EAAxC,EAA4C;MACxC;MACA,IAAIiW,MAAM,GAAGtd,QAAQ,CAACgL,aAAT,CAAuB,QAAvB,CAAb;MACAsS,MAAM,CAACtQ,SAAP,GAAmB,kBAAnB;;MACA,IAAItN,IAAI,CAAC4O,aAAL,KAAuByB,UAAU,CAAC1I,CAAD,CAAjC,IAAwC3H,IAAI,CAACR,aAAL,KAAuBmI,CAAnE,EAAsE;QAClEiW,MAAM,CAACC,QAAP,GAAkB,IAAlB;MACH,CAFD,MAGK;QACDD,MAAM,CAACC,QAAP,GAAkB,KAAlB;MACH;;MACDD,MAAM,CAACE,SAAP,GAAmBzN,UAAU,CAAC1I,CAAD,CAA7B;MACAd,UAAU,CAACwB,WAAX,CAAuBuV,MAAvB;IACH;;IACD/W,UAAU,CAACxC,IAAX,GAAkBrE,IAAI,CAACsP,IAAvB;IACA,OAAOzI,UAAP;EACH,CAzDD,CAphEwC,CA8kExC;;;EACA/H,UAAU,CAACa,SAAX,CAAqBsc,kBAArB,GAA0C,UAAUjc,IAAV,EAAgBH,SAAhB,EAA2B;IACjE;IACA,IAAIgH,UAAU,GAAGvG,QAAQ,CAACgL,aAAT,CAAuB,QAAvB,CAAjB,CAFiE,CAGjE;;IACA,IAAI+E,UAAU,GAAGrQ,IAAI,CAAC,UAAD,CAArB;;IACA,IAAIA,IAAI,CAAC+d,WAAT,EAAsB;MAClBlX,UAAU,CAACmX,QAAX,GAAsB,IAAtB;IACH,CAFD,MAGK;MACDnX,UAAU,CAACmX,QAAX,GAAsB,KAAtB;MACAnX,UAAU,CAACwT,IAAX,GAAkBhK,UAAU,CAACvP,MAA7B;IACH;;IACD,KAAK,IAAI6G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0I,UAAU,CAACvP,MAA/B,EAAuC6G,CAAC,EAAxC,EAA4C;MACxC;MACA,IAAIiW,MAAM,GAAGtd,QAAQ,CAACgL,aAAT,CAAuB,QAAvB,CAAb;MACAsS,MAAM,CAACtQ,SAAP,GAAmB,qBAAnB;;MACA,KAAK,IAAImN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGza,IAAI,CAACuP,YAAL,CAAkBzO,MAAtC,EAA8C2Z,CAAC,EAA/C,EAAmD;QAC/C,IAAIza,IAAI,CAACuP,YAAL,CAAkBkL,CAAlB,MAAyB9S,CAA7B,EAAgC;UAC5BiW,MAAM,CAACC,QAAP,GAAkB,IAAlB;QACH;MACJ;;MACDD,MAAM,CAACE,SAAP,GAAmBzN,UAAU,CAAC1I,CAAD,CAA7B;MACAd,UAAU,CAACwB,WAAX,CAAuBuV,MAAvB;IACH;;IACD/W,UAAU,CAACxC,IAAX,GAAkBrE,IAAI,CAACsP,IAAvB;IACA,OAAOzI,UAAP;EACH,CA1BD,CA/kEwC,CA0mExC;;;EACA/H,UAAU,CAACa,SAAX,CAAqBuc,oBAArB,GAA4C,UAAUlc,IAAV,EAAgBH,SAAhB,EAA2B+a,KAA3B,EAAkCiB,cAAlC,EAAkDlb,KAAlD,EAAyD;IACjG;IACA,IAAIkG,UAAU,GAAGvG,QAAQ,CAACgL,aAAT,CAAuB,OAAvB,CAAjB;IACAzE,UAAU,CAACe,IAAX,GAAkB,MAAlB;IACAf,UAAU,CAACxC,IAAX,GAAkBrE,IAAI,CAACmB,SAAvB,CAJiG,CAKjG;;IACA,IAAI2K,aAAa,GAAGxL,QAAQ,CAACC,cAAT,CAAwB,aAAaV,SAAb,GAAyB,GAAzB,GAA+B+a,KAAvD,CAApB;;IACA,IAAI9O,aAAa,IAAI,CAAC+P,cAAtB,EAAsC;MAClC/P,aAAa,CAACgC,MAAd;IACH;;IACD,KAAKpO,aAAL,CAAmBue,cAAnB,GAAoCje,IAAI,CAACuB,cAAzC;IACA,IAAI2c,aAAa,GAAG,KAAKxe,aAAL,CAAmBue,cAAnB,GAAoC,SAApC,GAAgD,MAApE,CAXiG,CAYjG;;IACA,IAAIE,4BAA4B,GAAG,KAAK1e,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiEhb,KAAjE,KAA2E,EAA3E,GAAiF,KAAK3D,aAAL,CAAmBue,cAAnB,GAAoC,EAApC,GAAyC,EAA1H,GAAgI,KAAKxe,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiEhb,KAApO,CAbiG,CAcjG;;IACA,IAAIib,IAAI,GAAGhe,QAAQ,CAACgL,aAAT,CAAuB,MAAvB,CAAX;IACA,IAAIjL,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,aAA5B,GAA4CZ,SAApE,CAAhB,CAhBiG,CAiBjG;;IACA,IAAI4C,MAAM,GAAGzC,IAAI,CAAC,YAAD,CAAjB,CAlBiG,CAmBjG;;IACA,IAAIyB,IAAI,GAAGzB,IAAI,CAAC,MAAD,CAAf;IACA,IAAIiD,IAAI,GAAG,KAAKb,mBAAL,CAAyBK,MAAM,CAACS,CAAhC,CAAX;IACA,IAAIO,GAAG,GAAG,KAAKrB,mBAAL,CAAyBK,MAAM,CAACW,CAAhC,CAAV,CAtBiG,CAuBjG;;IACA,IAAIG,MAAM,GAAG,KAAK9D,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiE9a,MAAjE,GAA0Ed,MAAM,CAACV,MAAP,GAAgB,CAA1F,GAA8FU,MAAM,CAACV,MAAP,GAAgB,CAA9G,GAAkH,KAAKtC,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiE9a,MAAhM,CAxBiG,CAyBjG;;IACA,IAAIF,KAAK,GAAG8a,4BAA4B,GAAG1b,MAAM,CAACa,KAAP,GAAe,CAA9C,GAAkDb,MAAM,CAACa,KAAP,GAAe,CAAjE,GAAqE6a,4BAAjF,CA1BiG,CA2BjG;;IACA,IAAIrc,QAAQ,GAAG,KAAKrC,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiEvc,QAAjE,GAA4EyB,MAAM,GAAG,CAArF,GAAyF,EAAzF,GAA8F,KAAK9D,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiEvc,QAA9K;IACAwc,IAAI,CAAClY,KAAL,CAAWkC,QAAX,GAAsB,UAAtB;IACAgW,IAAI,CAAC7d,EAAL,GAAU,aAAaZ,SAAb,GAAyB,GAAzB,GAA+B+a,KAAzC;IACA,IAAI9H,SAAS,GAAG,KAAKpT,aAAL,CAAmB6H,aAAnB,EAAhB;IACA,IAAIoE,QAAQ,GAAG,KAAK9H,QAAL,CAAchE,SAAd,CAAf,CAhCiG,CAiCjG;;IACA,IAAI0e,WAAW,GAAG;MAAEtb,IAAI,EAAEA,IAAR;MAAcQ,GAAG,EAAEA,GAAnB;MAAwBJ,KAAK,EAAEA,KAA/B;MAAsCE,MAAM,EAAEA;IAA9C,CAAlB,CAlCiG,CAmCjG;;IACA,IAAIib,WAAW,GAAG,KAAK5a,SAAL,CAAe2a,WAAf,EAA4B1e,SAA5B,CAAlB;IACAye,IAAI,CAAClY,KAAL,CAAWe,SAAX,GAAuB,YAAYwE,QAAZ,GAAuB,MAA9C;IACA2S,IAAI,CAAClY,KAAL,CAAWnD,IAAX,GAAkBub,WAAW,CAACvb,IAAZ,GAAmB6P,SAAnB,GAA+B,IAAjD;IACAwL,IAAI,CAAClY,KAAL,CAAW3C,GAAX,GAAiB+a,WAAW,CAAC/a,GAAZ,GAAkBqP,SAAlB,GAA8B,IAA/C;;IACA,IAAIvU,OAAO,CAACkgB,QAAR,IAAoB,CAAC,KAAKhf,SAAL,CAAeif,iBAAxC,EAA2D;MACvDJ,IAAI,CAAClY,KAAL,CAAW7C,MAAX,GAAoB,IAAI,IAAxB;MACA+a,IAAI,CAAClY,KAAL,CAAW/C,KAAX,GAAmB,KAAK,IAAxB;MACAib,IAAI,CAAClY,KAAL,CAAWtE,QAAX,GAAsB,KAAtB;IACH,CAJD,MAKK;MACDwc,IAAI,CAAClY,KAAL,CAAW7C,MAAX,GAAoBA,MAAM,GAAG,IAA7B;MACA+a,IAAI,CAAClY,KAAL,CAAW/C,KAAX,GAAmBA,KAAK,GAAG,IAA3B;MACAib,IAAI,CAAClY,KAAL,CAAWtE,QAAX,GAAsBA,QAAQ,GAAG,IAAjC;;MACA,IAAItD,QAAQ,EAAZ,EAAgB;QACZ8f,IAAI,CAAClY,KAAL,CAAWtE,QAAX,GAAuBA,QAAQ,GAAG,CAAZ,GAAiB,IAAvC;MACH;IACJ;;IACDwc,IAAI,CAAClY,KAAL,CAAWuY,OAAX,GAAqB,KAArB;IACAL,IAAI,CAAClY,KAAL,CAAWqX,SAAX,GAAuB,QAAvB;IACAa,IAAI,CAAClY,KAAL,CAAWwY,SAAX,GAAuB,aAAvB,CAvDiG,CAwDjG;;IACAN,IAAI,CAACR,SAAL,GAAiB,KAAKre,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiE/D,IAAjE,GAAwE,KAAK7a,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiE/D,IAAzI,GAAgJ4D,aAAjK;IACAI,IAAI,CAAClY,KAAL,CAAW1B,KAAX,GAAmB,KAAKjF,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiE3Z,KAAjE,GAAyE,KAAKjF,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiE3Z,KAA1I,GAAkJ,OAArK,CA1DiG,CA2DjG;;IACA4Z,IAAI,CAAClY,KAAL,CAAW5D,eAAX,GAA6B,KAAK/C,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiE7b,eAAjE,GAAmF,KAAK/C,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiE7b,eAApJ,GAAsK,QAAnM;IACA8b,IAAI,CAAClY,KAAL,CAAW4N,OAAX,GAAqB,KAAKvU,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiErK,OAAjE,GAA2E,KAAKvU,SAAL,CAAe2e,sBAAf,CAAsCC,0BAAtC,CAAiErK,OAA5I,GAAsJ,CAA3K;IACA3T,SAAS,CAACgI,WAAV,CAAsBiW,IAAtB;IACA,KAAK/X,gBAAL,CAAsBvG,IAAtB,EAA4BW,KAA5B;IACA,OAAOkG,UAAP;EACH,CAjED,CA3mEwC,CA6qExC;;;EACA/H,UAAU,CAACa,SAAX,CAAqB4G,gBAArB,GAAwC,UAAUsY,QAAV,EAAoBle,KAApB,EAA2B;IAC/D,KAAKxB,gBAAL,GAAwB,KAAxB,CAD+D,CAE/D;;IACA,IAAIa,IAAI,GAAG,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,aAA7C,CAAX;;IACA,IAAID,IAAJ,EAAU;MACN;MACA,IAAIE,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAArB;;MACA,KAAK,IAAI+P,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7P,cAAc,CAACY,MAAnC,EAA2CiP,CAAC,EAA5C,EAAgD;QAC5C;QACA,IAAIzO,WAAW,GAAGpB,cAAc,CAAC6P,CAAD,CAAhC,CAF4C,CAG5C;;QACA,IAAI,CAACzO,WAAW,CAACE,IAAZ,KAAqB,KAArB,IAA8BF,WAAW,CAACE,IAAZ,KAAqB,gBAAnD,IAAuEF,WAAW,CAACE,IAAZ,KAAqB,gBAA5F,IAAgHF,WAAW,CAACE,IAAZ,KAAqB,eAAtI,KAA0J,KAAK/B,SAAL,CAAeiC,YAAzK,GAAwLJ,WAAW,CAACH,SAAZ,KAA0B0d,QAAQ,CAAC7d,eAAT,GAA2B,GAA3B,GAAiCL,KAA3D,IAAoEW,WAAW,CAACH,SAAZ,KAA0B0d,QAAQ,CAAC1d,SAAT,GAAqB,GAArB,GAA2BR,KAAjT,GAA0T,CAACW,WAAW,CAACH,SAAZ,KAA0B0d,QAAQ,CAAC1d,SAAT,GAAqB,GAArB,GAA2BR,KAArD,IAA8DW,WAAW,CAACH,SAAZ,KAA0B0d,QAAQ,CAAC7d,eAAT,GAA2B,GAA3B,GAAiCL,KAA1H,KAAoI,CAAClC,iBAAiB,CAACogB,QAAQ,CAAC7d,eAAV,CAAvJ,IAAsLM,WAAW,CAACkF,KAAlM,IAA2MlF,WAAW,CAACkF,KAAZ,KAAsB,EAA9hB,EAAkiB;UAC9hBqY,QAAQ,CAACrY,KAAT,GAAiBlF,WAAW,CAACkF,KAA7B;UACAqY,QAAQ,CAAChQ,UAAT,GAAsBvN,WAAW,CAACuN,UAAlC;UACAgQ,QAAQ,CAACnO,QAAT,GAAoBpP,WAAW,CAACoP,QAAhC;UACA,KAAKvR,gBAAL,GAAwB,IAAxB;;UACA,IAAI,CAAC0f,QAAQ,CAACjO,MAAd,EAAsB;YAClBiO,QAAQ,CAACjO,MAAT,GAAkBtP,WAAW,CAACmO,UAA9B;UACH;;UACD;QACH;MACJ;IACJ;;IACD,OAAO,KAAKtQ,gBAAZ;EACH,CAxBD,CA9qEwC,CAusExC;;;EACAL,UAAU,CAACa,SAAX,CAAqBiE,SAArB,GAAiC,UAAU8L,KAAV,EAAiB7P,SAAjB,EAA4B8L,QAA5B,EAAsCjI,cAAtC,EAAsD;IACnF;IACA,IAAI+H,WAAW,GAAG,KAAK/L,aAAL,CAAmBgM,QAAnB,CAA4B7L,SAA5B,CAAlB,CAFmF,CAGnF;;IACA,IAAI4C,MAAJ;;IACA,IAAIkJ,QAAQ,GAAG,CAAf,EAAkB;MACdlJ,MAAM,GAAG,KAAKqc,iBAAL,CAAuBnT,QAAvB,EAAiC+D,KAAjC,EAAwCjE,WAAxC,EAAqD/H,cAArD,CAAT;IACH,CAFD,MAGK;MACDjB,MAAM,GAAG,KAAKqc,iBAAL,CAAuBrT,WAAW,CAACE,QAAnC,EAA6C+D,KAA7C,EAAoDjE,WAApD,EAAiE/H,cAAjE,CAAT;IACH;;IACD,OAAOjB,MAAP;EACH,CAZD,CAxsEwC,CAqtExC;;;EACA3D,UAAU,CAACa,SAAX,CAAqBmf,iBAArB,GAAyC,UAAUnT,QAAV,EAAoB+D,KAApB,EAA2BjE,WAA3B,EAAwC/H,cAAxC,EAAwD;IAC7F;IACA,IAAIjB,MAAJ;;IACA,IAAI,CAACiB,cAAL,EAAqB;MACjB,QAAQiI,QAAR;QACI,KAAK,EAAL;UACI;UACAlJ,MAAM,GAAG;YAAEQ,IAAI,EAAEwI,WAAW,CAACpI,KAAZ,GAAoBqM,KAAK,CAACjM,GAA1B,GAAgCiM,KAAK,CAACnM,MAA9C;YAAsDE,GAAG,EAAEiM,KAAK,CAACzM,IAAjE;YAAuEI,KAAK,EAAEqM,KAAK,CAACnM,MAApF;YAA4FA,MAAM,EAAEmM,KAAK,CAACrM;UAA1G,CAAT;UACA;;QACJ,KAAK,GAAL;UACI;UACAZ,MAAM,GAAG;YAAEQ,IAAI,EAAEwI,WAAW,CAACpI,KAAZ,GAAoBqM,KAAK,CAACzM,IAA1B,GAAiCyM,KAAK,CAACrM,KAA/C;YAAsDI,GAAG,EAAEgI,WAAW,CAAClI,MAAZ,GAAqBmM,KAAK,CAACjM,GAA3B,GAAiCiM,KAAK,CAACnM,MAAlG;YAA0GF,KAAK,EAAEqM,KAAK,CAACrM,KAAvH;YAA8HE,MAAM,EAAEmM,KAAK,CAACnM;UAA5I,CAAT;UACA;;QACJ,KAAK,GAAL;UACI;UACAd,MAAM,GAAG;YAAEQ,IAAI,EAAEyM,KAAK,CAACjM,GAAd;YAAmBA,GAAG,EAAEgI,WAAW,CAAClI,MAAZ,GAAqBmM,KAAK,CAACzM,IAA3B,GAAkCyM,KAAK,CAACrM,KAAhE;YAAuEA,KAAK,EAAEqM,KAAK,CAACnM,MAApF;YAA4FA,MAAM,EAAEmM,KAAK,CAACrM;UAA1G,CAAT;UACA;;QACJ,KAAK,CAAL;UACI;UACAZ,MAAM,GAAGiN,KAAT;UACA;;QACJ,KAAK,CAAL;UACI;UACAjN,MAAM,GAAG;YAAEQ,IAAI,EAAEwI,WAAW,CAACpI,KAAZ,GAAoBqM,KAAK,CAACjM,GAA1B,GAAgCiM,KAAK,CAACnM,MAA9C;YAAsDE,GAAG,EAAEiM,KAAK,CAACzM,IAAjE;YAAuEI,KAAK,EAAEqM,KAAK,CAACnM,MAApF;YAA4FA,MAAM,EAAEmM,KAAK,CAACrM;UAA1G,CAAT;UACA;;QACJ,KAAK,CAAL;UACI;UACAZ,MAAM,GAAG;YAAEQ,IAAI,EAAEwI,WAAW,CAACpI,KAAZ,GAAoBqM,KAAK,CAACzM,IAA1B,GAAiCyM,KAAK,CAACrM,KAA/C;YAAsDI,GAAG,EAAEgI,WAAW,CAAClI,MAAZ,GAAqBmM,KAAK,CAACjM,GAA3B,GAAiCiM,KAAK,CAACnM,MAAlG;YAA0GF,KAAK,EAAEqM,KAAK,CAACrM,KAAvH;YAA8HE,MAAM,EAAEmM,KAAK,CAACnM;UAA5I,CAAT;UACA;;QACJ,KAAK,CAAL;UACI;UACAd,MAAM,GAAG;YAAEQ,IAAI,EAAEyM,KAAK,CAACjM,GAAd;YAAmBA,GAAG,EAAEgI,WAAW,CAAClI,MAAZ,GAAqBmM,KAAK,CAACzM,IAA3B,GAAkCyM,KAAK,CAACrM,KAAhE;YAAuEA,KAAK,EAAEqM,KAAK,CAACnM,MAApF;YAA4FA,MAAM,EAAEmM,KAAK,CAACrM;UAA1G,CAAT;UACA;MA5BR;;MA8BA,IAAI,CAACZ,MAAL,EAAa;QACTA,MAAM,GAAGiN,KAAT;MACH;IACJ,CAlCD,MAmCK;MACD,QAAQ/D,QAAR;QACI,KAAK,CAAL;UACI;UACAlJ,MAAM,GAAGiN,KAAT;UACA;;QACJ,KAAK,CAAL;UACI;UACAjN,MAAM,GAAG;YAAEQ,IAAI,EAAEwI,WAAW,CAACpI,KAAZ,GAAoBqM,KAAK,CAACjM,GAA1B,GAAgCiM,KAAK,CAACnM,MAAtC,IAAgDmM,KAAK,CAACrM,KAAN,GAAc,CAAd,GAAkBqM,KAAK,CAACnM,MAAN,GAAe,CAAjF,CAAR;YAA6FE,GAAG,EAAEiM,KAAK,CAACzM,IAAN,IAAcyM,KAAK,CAACrM,KAAN,GAAc,CAAd,GAAkBqM,KAAK,CAACnM,MAAN,GAAe,CAA/C,CAAlG;YAAqJF,KAAK,EAAEqM,KAAK,CAACrM,KAAlK;YAAyKE,MAAM,EAAEmM,KAAK,CAACnM;UAAvL,CAAT;UACA;;QACJ,KAAK,CAAL;UACI;UACAd,MAAM,GAAG;YAAEQ,IAAI,EAAEwI,WAAW,CAACpI,KAAZ,GAAoBqM,KAAK,CAACzM,IAA1B,GAAiCyM,KAAK,CAACrM,KAA/C;YAAsDI,GAAG,EAAEgI,WAAW,CAAClI,MAAZ,GAAqBmM,KAAK,CAACjM,GAA3B,GAAiCiM,KAAK,CAACnM,MAAlG;YAA0GF,KAAK,EAAEqM,KAAK,CAACrM,KAAvH;YAA8HE,MAAM,EAAEmM,KAAK,CAACnM;UAA5I,CAAT;UACA;;QACJ,KAAK,CAAL;UACI;UACAd,MAAM,GAAG;YAAEQ,IAAI,EAAEyM,KAAK,CAACjM,GAAN,IAAaiM,KAAK,CAACrM,KAAN,GAAc,CAAd,GAAkBqM,KAAK,CAACnM,MAAN,GAAe,CAA9C,CAAR;YAA0DE,GAAG,EAAGgI,WAAW,CAAClI,MAAZ,GAAqBmM,KAAK,CAACzM,IAA3B,GAAkCyM,KAAK,CAACrM,KAAxC,IAAiDqM,KAAK,CAACrM,KAAN,GAAc,CAAd,GAAkBqM,KAAK,CAACnM,MAAN,GAAe,CAAlF,CAAhE;YAAuJF,KAAK,EAAEqM,KAAK,CAACrM,KAApK;YAA2KE,MAAM,EAAEmM,KAAK,CAACnM;UAAzL,CAAT;UACA;MAhBR;;MAkBA,IAAI,CAACd,MAAL,EAAa;QACTA,MAAM,GAAGiN,KAAT;MACH;IACJ;;IACD,OAAOjN,MAAP;EACH,CA9DD,CAttEwC,CAqxExC;;;EACA3D,UAAU,CAACa,SAAX,CAAqByH,aAArB,GAAqC,UAAUP,UAAV,EAAsBpE,MAAtB,EAA8BhB,IAA9B,EAAoC5B,SAApC,EAA+C8L,QAA/C,EAAyDjI,cAAzD,EAAyE;IAC1G,IAAIjB,MAAJ,EAAY;MACR,IAAIQ,IAAI,GAAG,KAAKb,mBAAL,CAAyBK,MAAM,CAACS,CAAhC,CAAX;MACA,IAAI6b,KAAK,GAAG,KAAK3c,mBAAL,CAAyBK,MAAM,CAACW,CAAhC,CAAZ;MACA,IAAIC,KAAK,GAAG,KAAKjB,mBAAL,CAAyBK,MAAM,CAACa,KAAhC,CAAZ;MACA,IAAIC,MAAM,GAAG,KAAKnB,mBAAL,CAAyBK,MAAM,CAACV,MAAhC,CAAb;MACA,IAAIid,UAAU,GAAG,CAAjB,CALQ,CAMR;;MACA,IAAIR,WAAW,GAAG;QAAEvb,IAAI,EAAEA,IAAR;QAAcQ,GAAG,EAAEsb,KAAnB;QAA0B1b,KAAK,EAAEA,KAAjC;QAAwCE,MAAM,EAAEA;MAAhD,CAAlB,CAPQ,CAQR;;MACA,IAAIgb,WAAW,GAAG,KAAK3a,SAAL,CAAe4a,WAAf,EAA4B3e,SAA5B,EAAuC8L,QAAvC,EAAiDjI,cAAjD,CAAlB;;MACA,IAAIjC,IAAI,KAAK,IAAT,IAAiBA,IAAI,CAACM,MAA1B,EAAkC;QAC9B8E,UAAU,CAACT,KAAX,CAAiBxE,UAAjB,GAA8BH,IAAI,CAACD,IAAnC;;QACA,IAAIC,IAAI,CAACO,MAAT,EAAiB;UACb6E,UAAU,CAACT,KAAX,CAAiBvE,SAAjB,GAA6B,QAA7B;QACH;;QACD,IAAIJ,IAAI,CAACQ,IAAT,EAAe;UACX4E,UAAU,CAACT,KAAX,CAAiB6Y,UAAjB,GAA8B,MAA9B;QACH;;QACDD,UAAU,GAAG,KAAK5c,mBAAL,CAAyBX,IAAI,CAACY,IAA9B,CAAb;MACH;;MACD,KAAK3C,aAAL,CAAmBwf,iBAAnB,CAAqCrY,UAArC,EAAiD0X,WAAW,CAACtb,IAA7D,EAAmEsb,WAAW,CAAC9a,GAA/E,EAAoFub,UAApF,EAAgGT,WAAW,CAAClb,KAA5G,EAAmHkb,WAAW,CAAChb,MAA/H,EAAuI,KAAvI;IACH;EACJ,CAvBD,CAtxEwC,CA8yExC;;;EACAzE,UAAU,CAACa,SAAX,CAAqB8G,oBAArB,GAA4C,UAAUzG,IAAV,EAAgB4a,KAAhB,EAAuBiB,cAAvB,EAAuCnY,cAAvC,EAAuD;IAC/F,IAAI,CAACmY,cAAL,EAAqB;MACjB;MACA,IAAIpZ,MAAM,GAAG,KAAK,CAAlB;;MACA,IAAIzC,IAAI,CAAC4Q,MAAL,IAAe5Q,IAAI,CAACwB,IAAL,KAAc,KAAjC,EAAwC;QACpCiB,MAAM,GAAGzC,IAAI,CAAC4Q,MAAd;MACH,CAFD,MAGK;QACDnO,MAAM,GAAGzC,IAAI,CAACyP,UAAd;MACH;;MACD,IAAIwD,WAAW,GAAG,KAAK,CAAvB;MACA,IAAIC,UAAU,GAAG,KAAK,CAAtB;MACA,IAAIH,YAAY,GAAG,KAAK,CAAxB;MACA,IAAIC,aAAa,GAAG,KAAK,CAAzB;;MACA,IAAIvQ,MAAM,CAACkN,CAAP,IAAYlN,MAAM,CAAC6G,CAAnB,IAAwB7G,MAAM,CAACY,KAA/B,IAAwCZ,MAAM,CAACc,MAAnD,EAA2D;QACvD0P,WAAW,GAAGxQ,MAAM,CAACkN,CAArB;QACAuD,UAAU,GAAGzQ,MAAM,CAAC6G,CAApB;QACAyJ,YAAY,GAAGtQ,MAAM,CAACY,KAAtB;QACA2P,aAAa,GAAGvQ,MAAM,CAACc,MAAvB;MACH,CALD,MAMK;QACD0P,WAAW,GAAG,KAAK7Q,mBAAL,CAAyBK,MAAM,CAACS,CAAhC,CAAd;QACAgQ,UAAU,GAAG,KAAK9Q,mBAAL,CAAyBK,MAAM,CAACW,CAAhC,CAAb;QACA2P,YAAY,GAAG,KAAK3Q,mBAAL,CAAyBK,MAAM,CAACa,KAAhC,CAAf;QACA0P,aAAa,GAAG,KAAK5Q,mBAAL,CAAyBK,MAAM,CAACV,MAAhC,CAAhB;MACH,CAxBgB,CAyBjB;;;MACA,IAAIoR,WAAW,GAAGxR,UAAU,CAAC3B,IAAI,CAAC,WAAD,CAAL,CAA5B,CA1BiB,CA2BjB;;MACA,IAAI0P,KAAK,GAAG;QAAEzM,IAAI,EAAEgQ,WAAR;QAAqBxP,GAAG,EAAEyP,UAA1B;QAAsC7P,KAAK,EAAE0P,YAA7C;QAA2DxP,MAAM,EAAEyP;MAAnE,CAAZ,CA5BiB,CA6BjB;;MACA,IAAImM,SAAS,GAAG,KAAKC,qBAAL,CAA2B1P,KAA3B,EAAkCyD,WAAlC,EAA+CzP,cAA/C,CAAhB;MACA,IAAIkO,KAAK,GAAG,KAAK,CAAjB;MACA,IAAIhQ,UAAU,GAAG5B,IAAI,CAAC6O,UAAL,GAAkB7O,IAAI,CAAC6O,UAAvB,GAAoC7O,IAAI,CAAC4B,UAA1D,CAhCiB,CAiCjB;;MACA,IAAK5B,IAAI,CAACwG,KAAL,CAAWpF,KAAX,CAAiB,SAAjB,EAA4B,CAA5B,CAAL,EAAsC;QAClCwQ,KAAK,GAAG;UACJ;UACAnR,EAAE,EAAE,KAAKhB,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,QAA5B,GAAuC0S,WAAvC,GAAqD,GAArD,GAA2DyH,KAF3D;UAEkEnY,MAAM,EAAE0c,SAF1E;UAEqFtf,SAAS,EAAEsT,WAFhG;UAE6GnT,IAAI,EAAEA,IAAI,CAACwG,KAFxH;UAE+HsN,YAAY,EAAE,EAF7I;UAGJC,mBAAmB,EAAE,gBAHjB;UAGmCC,OAAO,EAAE,CAH5C;UAG+ClP,WAAW,EAAEpB,cAAc,GAAG,KAAKG,QAAL,CAAcsP,WAAd,CAAH,GAAgC,CAH1G;UAG6Gc,SAAS,EAAE,gBAHxH;UAG0IC,QAAQ,EAAE,EAHpJ;UAGwJC,MAAM,EAAE;YAAEC,KAAK,EAAE,EAAT;YAAaC,UAAU,EAAE,EAAzB;YAA6BP,YAAY,EAAE,EAA3C;YAA+CQ,MAAM,EAAE;UAAvD;QAHhK,CAAR;MAKH,CAND,MAOK,IAAI1S,UAAU,IAAI,EAAE5B,IAAI,CAACwG,KAAL,IAAcxG,IAAI,CAACwG,KAAL,CAAW6Y,UAAX,CAAsB,GAAtB,CAAd,IAA4Crf,IAAI,CAACwG,KAAL,CAAWpF,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,EAAyBA,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,EAAuCie,UAAvC,CAAkD,GAAlD,CAA9C,CAAlB,EAAyH;QAC1HzN,KAAK,GAAG;UACJ;UACAnR,EAAE,EAAE,KAAKhB,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,QAA5B,GAAuC0S,WAAvC,GAAqD,GAArD,GAA2DyH,KAF3D;UAEkEnY,MAAM,EAAE0c,SAF1E;UAEqFtf,SAAS,EAAEsT,WAFhG;UAE6GnT,IAAI,EAAEA,IAAI,CAACwG,KAFxH;UAE+HsN,YAAY,EAAE,EAF7I;UAGJC,mBAAmB,EAAE,eAHjB;UAGkCC,OAAO,EAAE,CAH3C;UAG8ClP,WAAW,EAAEpB,cAAc,GAAG,KAAKG,QAAL,CAAcsP,WAAd,CAAH,GAAgC,CAHzG;UAG4Gc,SAAS,EAAE,gBAHvH;UAGyIC,QAAQ,EAAE,EAHnJ;UAGuJC,MAAM,EAAE;YAAEC,KAAK,EAAE,EAAT;YAAaC,UAAU,EAAE,EAAzB;YAA6BP,YAAY,EAAE,EAA3C;YAA+CQ,MAAM,EAAE;UAAvD,CAH/J;UAG4N1S,UAAU,EAAE5B,IAAI,CAAC6O,UAH7O;UAGyP/M,QAAQ,EAAE9B,IAAI,CAAC0Q;QAHxQ,CAAR;QAKAkB,KAAK,CAAChQ,UAAN,GAAmBA,UAAnB;QACAgQ,KAAK,CAAC9P,QAAN,GAAiB9B,IAAI,CAAC0Q,QAAL,GAAgB1Q,IAAI,CAAC0Q,QAArB,GAAgC1Q,IAAI,CAAC8B,QAAtD;MACH,CARI,MASA;QACD,IAAIwd,OAAO,GAAGH,SAAd;QACA,IAAII,UAAU,GAAG;UAAEtc,IAAI,EAAEkc,SAAS,CAACxP,CAAlB;UAAqBlM,GAAG,EAAE0b,SAAS,CAAC7V,CAApC;UAAuCjG,KAAK,EAAE8b,SAAS,CAAC9b,KAAxD;UAA+DE,MAAM,EAAE4b,SAAS,CAAC5b;QAAjF,CAAjB;QACA+b,OAAO,GAAG,KAAKF,qBAAL,CAA2BG,UAA3B,EAAuCpM,WAAvC,EAAoD,KAApD,CAAV;QACAvB,KAAK,GAAG;UACJ;UACAnR,EAAE,EAAE,KAAKhB,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,QAA5B,GAAuC0S,WAAvC,GAAqD,GAArD,GAA2DyH,KAF3D;UAEkEnY,MAAM,EAAE6c,OAF1E;UAEmFzf,SAAS,EAAEsT,WAF9F;UAE2GnT,IAAI,EAAEA,IAAI,CAACwG,KAFtH;UAE6HsN,YAAY,EAAE,EAF3I;UAGJC,mBAAmB,EAAE,MAHjB;UAGyBC,OAAO,EAAE,CAHlC;UAGqClP,WAAW,EAAE,CAHlD;UAGqDmP,SAAS,EAAE,gBAHhE;UAGkFC,QAAQ,EAAE,EAH5F;UAGgGC,MAAM,EAAE;YAAEC,KAAK,EAAE,EAAT;YAAaC,UAAU,EAAE,EAAzB;YAA6BP,YAAY,EAAE,EAA3C;YAA+CQ,MAAM,EAAE;UAAvD;QAHxG,CAAR;MAKH;;MACD,IAAI,CAACtU,IAAI,CAACwB,IAAL,KAAc,gBAAd,IAAkCxB,IAAI,CAACwB,IAAL,KAAc,cAAjD,KAAoE,CAAC/C,iBAAiB,CAACuB,IAAI,CAACS,EAAN,CAA1F,EAAqG;QACjG,IAAI0R,SAAS,GAAGnS,IAAI,CAACS,EAArB;QACA,IAAI+e,qBAAqB,GAAGlf,QAAQ,CAACC,cAAT,CAAwB4R,SAAS,GAAG,uBAApC,CAA5B;QACA,IAAIC,cAAc,GAAG,KAAK3S,SAAL,CAAe4S,SAAf,CAAyBF,SAAzB,CAArB;QACAP,KAAK,CAACnR,EAAN,GAAW2R,cAAc,CAAC3R,EAAf,GAAoB,UAA/B;QACA,IAAI4U,GAAG,GAAG,KAAK5V,SAAL,CAAemO,GAAf,CAAmBgE,KAAnB,CAAV;QACAQ,cAAc,CAACkD,OAAf,CAAuBC,QAAvB,CAAgCpK,IAAhC,CAAqCkK,GAAG,CAACC,OAAzC;;QACA,IAAI,CAAC7W,iBAAiB,CAAC+gB,qBAAD,CAAlB,IAA6C,KAAKrgB,gBAAtD,EAAwE;UACpE,IAAI0H,UAAU,GAAG2Y,qBAAqB,CAACjK,QAAtB,CAA+B,CAA/B,EAAkCA,QAAlC,CAA2C,CAA3C,CAAjB;UACA1O,UAAU,CAACT,KAAX,CAAiB2P,aAAjB,GAAiC,MAAjC;UACAlP,UAAU,CAACyG,SAAX,GAAuB,2CAAvB;UACAzG,UAAU,CAACV,aAAX,CAAyBC,KAAzB,CAA+B2P,aAA/B,GAA+C,MAA/C;QACH,CALD,MAMK,IAAI,CAACtX,iBAAiB,CAAC+gB,qBAAD,CAAlB,IAA6Cxf,IAAI,CAACwG,KAAtD,EAA6D;UAC9D,IAAIK,UAAU,GAAG2Y,qBAAqB,CAACjK,QAAtB,CAA+B,CAA/B,EAAkCA,QAAlC,CAA2C,CAA3C,CAAjB;UACA1O,UAAU,CAACT,KAAX,CAAiB2P,aAAjB,GAAiC,MAAjC;UACAlP,UAAU,CAACyG,SAAX,GAAuB,2CAAvB;UACAzG,UAAU,CAACV,aAAX,CAAyBC,KAAzB,CAA+B2P,aAA/B,GAA+C,MAA/C;QACH;MACJ,CAnBD,MAoBK;QACD,IAAIhF,MAAM,GAAGzQ,QAAQ,CAACC,cAAT,CAAwBqR,KAAK,CAACnR,EAA9B,CAAb;;QACA,IAAIsQ,MAAM,IAAIA,MAAM,CAACpD,SAAP,CAAiB4J,QAAjB,CAA0B,2CAA1B,CAAd,EAAsF;UAClF,KAAK9X,SAAL,CAAeuW,UAAf,CAA0ByJ,oBAA1B,CAA+C7N,KAAK,CAACnR,EAArD;QACH;;QACD,KAAKhB,SAAL,CAAemO,GAAf,CAAmBgE,KAAnB;MACH;;MACD5R,IAAI,CAAC4Q,MAAL,GAAcgB,KAAK,CAACnP,MAApB;;MACA,IAAI,KAAKhD,SAAL,CAAewG,kBAAnB,EAAuC;QACnC,KAAK6P,4BAAL,CAAkClE,KAAlC,EAAyCA,KAAK,CAACnR,EAA/C;MACH,CA1FgB,CA2FjB;;;MACA,IAAIiV,OAAO,GAAGpV,QAAQ,CAACC,cAAT,CAAwB,KAAKd,SAAL,CAAee,OAAf,CAAuBC,EAAvB,GAA4B,oBAA5B,GAAmD0S,WAA3E,CAAd,CA5FiB,CA6FjB;;MACA,KAAK1T,SAAL,CAAekW,aAAf,CAA6BD,OAA7B,EAAsCvC,WAAtC;IACH;EACJ,CAjGD,CA/yEwC,CAi5ExC;;;EACArU,UAAU,CAACa,SAAX,CAAqByf,qBAArB,GAA6C,UAAU1P,KAAV,EAAiB7P,SAAjB,EAA4B6D,cAA5B,EAA4C;IACrF;IACA,IAAI+H,WAAW,GAAG,KAAK/L,aAAL,CAAmBgM,QAAnB,CAA4B7L,SAA5B,CAAlB;;IACA,IAAI4L,WAAJ,EAAiB;MACb,IAAI,CAAC/H,cAAL,EAAqB;QACjB,IAAI+H,WAAW,CAACE,QAAZ,KAAyB,CAA7B,EAAgC;UAC5B;UACA,OAAO;YAAEgE,CAAC,EAAElE,WAAW,CAACpI,KAAZ,GAAoBqM,KAAK,CAACjM,GAA1B,GAAgCiM,KAAK,CAACnM,MAA3C;YAAmD+F,CAAC,EAAEoG,KAAK,CAACzM,IAA5D;YAAkEI,KAAK,EAAEqM,KAAK,CAACnM,MAA/E;YAAuFA,MAAM,EAAEmM,KAAK,CAACrM;UAArG,CAAP;QACH,CAHD,MAIK,IAAIoI,WAAW,CAACE,QAAZ,KAAyB,CAA7B,EAAgC;UACjC;UACA,OAAO;YAAEgE,CAAC,EAAElE,WAAW,CAACpI,KAAZ,GAAoBqM,KAAK,CAACzM,IAA1B,GAAiCyM,KAAK,CAACrM,KAA5C;YAAmDiG,CAAC,EAAEmC,WAAW,CAAClI,MAAZ,GAAqBmM,KAAK,CAACjM,GAA3B,GAAiCiM,KAAK,CAACnM,MAA7F;YAAqGF,KAAK,EAAEqM,KAAK,CAACrM,KAAlH;YAAyHE,MAAM,EAAEmM,KAAK,CAACnM;UAAvI,CAAP;QACH,CAHI,MAIA,IAAIkI,WAAW,CAACE,QAAZ,KAAyB,CAA7B,EAAgC;UACjC;UACA,OAAO;YAAEgE,CAAC,EAAED,KAAK,CAACjM,GAAX;YAAgB6F,CAAC,EAAGmC,WAAW,CAAClI,MAAZ,GAAqBmM,KAAK,CAACzM,IAA3B,GAAkCyM,KAAK,CAACrM,KAA5D;YAAoEA,KAAK,EAAEqM,KAAK,CAACnM,MAAjF;YAAyFA,MAAM,EAAEmM,KAAK,CAACrM;UAAvG,CAAP;QACH,CAHI,MAIA;UACD;UACA,OAAO;YAAEsM,CAAC,EAAED,KAAK,CAACzM,IAAX;YAAiBqG,CAAC,EAAEoG,KAAK,CAACjM,GAA1B;YAA+BJ,KAAK,EAAEqM,KAAK,CAACrM,KAA5C;YAAmDE,MAAM,EAAEmM,KAAK,CAACnM;UAAjE,CAAP;QACH;MACJ,CAjBD,MAkBK;QACD,IAAIkI,WAAW,CAACE,QAAZ,KAAyB,CAA7B,EAAgC;UAC5B;UACA,OAAO;YAAEgE,CAAC,EAAElE,WAAW,CAACpI,KAAZ,GAAoBqM,KAAK,CAACjM,GAA1B,GAAgCiM,KAAK,CAACnM,MAAtC,IAAgDmM,KAAK,CAACrM,KAAN,GAAc,CAAd,GAAkBqM,KAAK,CAACnM,MAAN,GAAe,CAAjF,CAAL;YAA0F+F,CAAC,EAAEoG,KAAK,CAACzM,IAAN,IAAcyM,KAAK,CAACrM,KAAN,GAAc,CAAd,GAAkBqM,KAAK,CAACnM,MAAN,GAAe,CAA/C,CAA7F;YAAgJF,KAAK,EAAEqM,KAAK,CAACrM,KAA7J;YAAoKE,MAAM,EAAEmM,KAAK,CAACnM;UAAlL,CAAP;QACH,CAHD,MAIK,IAAIkI,WAAW,CAACE,QAAZ,KAAyB,CAA7B,EAAgC;UACjC;UACA,OAAO;YAAEgE,CAAC,EAAElE,WAAW,CAACpI,KAAZ,GAAoBqM,KAAK,CAACzM,IAA1B,GAAiCyM,KAAK,CAACrM,KAA5C;YAAmDiG,CAAC,EAAEmC,WAAW,CAAClI,MAAZ,GAAqBmM,KAAK,CAACjM,GAA3B,GAAiCiM,KAAK,CAACnM,MAA7F;YAAqGF,KAAK,EAAEqM,KAAK,CAACrM,KAAlH;YAAyHE,MAAM,EAAEmM,KAAK,CAACnM;UAAvI,CAAP;QACH,CAHI,MAIA,IAAIkI,WAAW,CAACE,QAAZ,KAAyB,CAA7B,EAAgC;UACjC;UACA,OAAO;YAAEgE,CAAC,EAAED,KAAK,CAACjM,GAAN,IAAaiM,KAAK,CAACrM,KAAN,GAAc,CAAd,GAAkBqM,KAAK,CAACnM,MAAN,GAAe,CAA9C,CAAL;YAAuD+F,CAAC,EAAGmC,WAAW,CAAClI,MAAZ,GAAqBmM,KAAK,CAACzM,IAA3B,GAAkCyM,KAAK,CAACrM,KAAxC,IAAiDqM,KAAK,CAACrM,KAAN,GAAc,CAAd,GAAkBqM,KAAK,CAACnM,MAAN,GAAe,CAAlF,CAA3D;YAAkJF,KAAK,EAAEqM,KAAK,CAACrM,KAA/J;YAAsKE,MAAM,EAAEmM,KAAK,CAACnM;UAApL,CAAP;QACH,CAHI,MAIA;UACD;UACA,OAAO;YAAEoM,CAAC,EAAED,KAAK,CAACzM,IAAX;YAAiBqG,CAAC,EAAEoG,KAAK,CAACjM,GAA1B;YAA+BJ,KAAK,EAAEqM,KAAK,CAACrM,KAA5C;YAAmDE,MAAM,EAAEmM,KAAK,CAACnM;UAAjE,CAAP;QACH;MACJ;IACJ,CArCD,MAsCK;MACD,OAAO;QAAEoM,CAAC,EAAED,KAAK,CAACzM,IAAX;QAAiBqG,CAAC,EAAEoG,KAAK,CAACjM,GAA1B;QAA+BJ,KAAK,EAAEqM,KAAK,CAACrM,KAA5C;QAAmDE,MAAM,EAAEmM,KAAK,CAACnM;MAAjE,CAAP;IACH;EACJ,CA5CD;;EA6CAzE,UAAU,CAACa,SAAX,CAAqB+f,eAArB,GAAuC,YAAY;IAC/C,IAAIC,aAAa,GAAG,KAAKlgB,SAAL,CAAemG,oBAAnC;;IACA,KAAK,IAAI/E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8e,aAAa,CAAC7e,MAAlC,EAA0CD,CAAC,EAA3C,EAA+C;MAC3C,IAAIS,WAAW,GAAGqe,aAAa,CAAC9e,CAAD,CAA/B;MACA,KAAKsL,aAAL,GAAqB7L,QAAQ,CAACC,cAAT,CAAwBe,WAAW,CAACb,EAApC,CAArB;;MACA,IAAIa,WAAW,CAACsG,IAAZ,KAAqB,SAAzB,EAAoC;QAChC,KAAKuE,aAAL,CAAmB5H,KAAnB,GAA2BjD,WAAW,CAACiD,KAAvC;MACH,CAFD,MAGK,IAAIjD,WAAW,CAACsG,IAAZ,KAAqB,aAAzB,EAAwC;QACzC,KAAKuE,aAAL,CAAmBmF,OAAnB,GAA6BhQ,WAAW,CAACiD,KAAzC;;QACA,IAAIjD,WAAW,CAACiD,KAAhB,EAAuB;UACnB,KAAK6K,mBAAL,CAAyB,KAAKjD,aAA9B;QACH;MACJ,CALI,MAMA,IAAI7K,WAAW,CAACsG,IAAZ,KAAqB,UAAzB,EAAqC;QACtC,KAAKuE,aAAL,CAAmB5H,KAAnB,GAA2BjD,WAAW,CAACiD,KAAvC;MACH,CAFI,MAGA,IAAIjD,WAAW,CAACsG,IAAZ,KAAqB,UAAzB,EAAqC;QACtC,KAAKuE,aAAL,CAAmBmF,OAAnB,GAA6BhQ,WAAW,CAACiD,KAAzC;MACH,CAFI,MAGA,IAAIjD,WAAW,CAACsG,IAAZ,KAAqB,gBAAzB,EAA2C;QAC5C;QACA,IAAIoO,UAAU,GAAG,KAAKvW,SAAL,CAAe4S,SAAf,CAAyB/Q,WAAW,CAACb,EAArC,CAAjB;;QACA,IAAIuV,UAAJ,EAAgB;UACZ,IAAI,KAAK7J,aAAL,IAAsB,KAAKA,aAAL,CAAmBmB,SAAnB,KAAiC,2CAA3D,EAAwG;YACpG,KAAKnB,aAAL,CAAmBmB,SAAnB,GAA+B,iCAA/B;YACA,KAAKnB,aAAL,CAAmB/F,KAAnB,CAAyB2P,aAAzB,GAAyC,EAAzC;YACA,KAAK3G,mBAAL,CAAyB,KAAKjD,aAA9B,EAA6C,EAA7C;UACH;;UACD,KAAK1M,SAAL,CAAeqO,MAAf,CAAsBkI,UAAtB;UACA,KAAKvW,SAAL,CAAekW,aAAf;QACH;MACJ;;MACD,IAAIrU,WAAW,CAACsG,IAAZ,KAAqB,aAArB,IAAsCtG,WAAW,CAACsG,IAAZ,KAAqB,gBAA/D,EAAiF;QAC7E,KAAKwH,mBAAL,CAAyB,KAAKjD,aAA9B;MACH;IACJ;EACJ,CArCD;EAsCA;AACJ;AACA;EACI;;;EACArN,UAAU,CAACa,SAAX,CAAqBigB,qBAArB,GAA6C,YAAY;IACrD;IACA,IAAIC,WAAW,GAAGhV,IAAI,CAACC,KAAL,CAAW3K,IAAI,CAACqQ,SAAL,CAAezH,MAAM,CAACC,cAAtB,EAAsClI,MAAtC,GAA+C,IAA1D,CAAlB;IACA,IAAIgf,cAAc,GAAG,IAArB;;IACA,IAAID,WAAW,GAAGC,cAAlB,EAAkC;MAC9B,IAAIC,aAAa,GAAGhX,MAAM,CAACC,cAAP,CAAsBlI,MAA1C,CAD8B,CAE9B;;MACA,IAAIkf,cAAc,GAAG,EAArB;;MACA,KAAK,IAAInf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkf,aAApB,EAAmClf,CAAC,EAApC,EAAwC;QACpC,IAAIkI,MAAM,CAACC,cAAP,CAAsB6M,GAAtB,CAA0BhV,CAA1B,KAAgCkI,MAAM,CAACC,cAAP,CAAsB6M,GAAtB,CAA0BhV,CAA1B,EAA6BO,KAA7B,CAAmC,GAAnC,EAAwC,CAAxC,CAApC,EAAgF;UAC5E,IAAI2H,MAAM,CAACC,cAAP,CAAsB6M,GAAtB,CAA0BhV,CAA1B,EAA6BO,KAA7B,CAAmC,GAAnC,EAAwC,CAAxC,MAA+C,aAAnD,EAAkE;YAC9D;YACA,KAAK1B,aAAL,CAAmBugB,gBAAnB,CAAoClX,MAAM,CAACC,cAAP,CAAsB6M,GAAtB,CAA0BhV,CAA1B,CAApC,IAAoEkI,MAAM,CAACC,cAAP,CAAsBkX,OAAtB,CAA8BnX,MAAM,CAACC,cAAP,CAAsB6M,GAAtB,CAA0BhV,CAA1B,CAA9B,CAApE;YACAmf,cAAc,CAAC7U,IAAf,CAAoBpC,MAAM,CAACC,cAAP,CAAsB6M,GAAtB,CAA0BhV,CAA1B,CAApB;UACH;QACJ;MACJ;;MACD,IAAImf,cAAJ,EAAoB;QAChB,KAAK,IAAInf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmf,cAAc,CAAClf,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;UAC5CkI,MAAM,CAACC,cAAP,CAAsBC,UAAtB,CAAiC+W,cAAc,CAACnf,CAAD,CAA/C;QACH;MACJ;IACJ;EACJ,CAvBD,CAz+EwC,CAigFxC;;;EACA/B,UAAU,CAACa,SAAX,CAAqBwgB,eAArB,GAAuC,UAAUpf,SAAV,EAAqB;IACxD;IACA,IAAIf,IAAI,GAAG,KAAKN,aAAL,CAAmBO,yBAAnB,CAA6C,aAA7C,CAAX;;IACA,IAAID,IAAJ,EAAU;MACN;MACA,IAAIE,cAAc,GAAG,KAAK,CAA1B;;MACA,IAAIa,SAAJ,EAAe;QACXb,cAAc,GAAG,CAACa,SAAD,CAAjB;MACH,CAFD,MAGK;QACDb,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAjB;MACH;;MACD,IAAIogB,YAAY,GAAG,IAAnB;;MACA,KAAK,IAAIrQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7P,cAAc,CAACY,MAAnC,EAA2CiP,CAAC,EAA5C,EAAgD;QAC5C;QACA,IAAIzO,WAAW,GAAGpB,cAAc,CAAC6P,CAAD,CAAhC;;QACA,IAAIhP,SAAJ,EAAe;UACXO,WAAW,CAAC+K,QAAZ,GAAuBtL,SAAS,CAACN,EAAjC;UACAa,WAAW,CAACE,IAAZ,GAAmBT,SAAS,CAAC6G,IAA7B;QACH,CAN2C,CAO5C;;;QACA,KAAKuE,aAAL,GAAqB7L,QAAQ,CAACC,cAAT,CAAwBe,WAAW,CAAC+K,QAApC,CAArB;;QACA,IAAI/K,WAAW,CAACE,IAAZ,KAAqB,SAAzB,EAAoC;UAChC,KAAK2K,aAAL,CAAmB5H,KAAnB,GAA2B,EAA3B;QACH,CAFD,MAGK,IAAIjD,WAAW,CAACE,IAAZ,KAAqB,aAAzB,EAAwC;UACzC,IAAI4e,YAAJ,EAAkB;YACd,KAAKjU,aAAL,CAAmBmF,OAAnB,GAA6B,IAA7B;YACA,KAAKlC,mBAAL,CAAyB,KAAKjD,aAA9B;YACAiU,YAAY,GAAG,KAAf;UACH;QACJ,CANI,MAOA,IAAI9e,WAAW,CAACE,IAAZ,KAAqB,UAAzB,EAAqC;UACtC,KAAK2K,aAAL,CAAmB5H,KAAnB,GAA2BjD,WAAW,CAACuZ,QAAZ,CAAqB,CAArB,CAA3B;QACH,CAFI,MAGA,IAAIvZ,WAAW,CAACE,IAAZ,KAAqB,UAAzB,EAAqC;UACtC,KAAK2K,aAAL,CAAmBmF,OAAnB,GAA6B,KAA7B;QACH,CAFI,MAGA,IAAIhQ,WAAW,CAACE,IAAZ,KAAqB,gBAAzB,EAA2C;UAC5C;UACA,IAAIwU,UAAU,GAAG,KAAKvW,SAAL,CAAe4S,SAAf,CAAyB/Q,WAAW,CAAC+K,QAArC,CAAjB;;UACA,IAAI2J,UAAJ,EAAgB;YACZ,IAAI,KAAK7J,aAAL,IAAsB,KAAKA,aAAL,CAAmBmB,SAAnB,KAAiC,2CAA3D,EAAwG;cACpG,KAAKnB,aAAL,CAAmBmB,SAAnB,GAA+B,iCAA/B;cACA,KAAKnB,aAAL,CAAmB/F,KAAnB,CAAyB2P,aAAzB,GAAyC,EAAzC;cACA,KAAK5J,aAAL,CAAmBhG,aAAnB,CAAiCC,KAAjC,CAAuC2P,aAAvC,GAAuD,EAAvD;cACA,KAAK3G,mBAAL,CAAyB,KAAKjD,aAA9B,EAA6C,EAA7C;;cACA,IAAIpL,SAAJ,EAAe;gBACXA,SAAS,CAACwD,KAAV,GAAkB,EAAlB;gBACAxD,SAAS,CAAC2Q,aAAV,GAA0B,CAAC3Q,SAAS,CAAC2Q,aAAX,CAA1B;gBACA3Q,SAAS,CAAC2Q,aAAV,CAAwB,CAAxB,IAA6B,EAA7B;cACH;YACJ;;YACD,KAAKjS,SAAL,CAAeqO,MAAf,CAAsBkI,UAAtB;YACA,KAAKvW,SAAL,CAAekW,aAAf;UACH;QACJ;;QACD,IAAIrU,WAAW,CAACE,IAAZ,KAAqB,gBAArB,IAAyCF,WAAW,CAACE,IAAZ,KAAqB,KAA9D,IAAuEF,WAAW,CAACE,IAAZ,KAAqB,aAAhG,EAA+G;UAC3G,KAAK4N,mBAAL,CAAyB,KAAKjD,aAA9B;QACH;MACJ;IACJ;EACJ,CA9DD;EA+DA;AACJ;AACA;AACA;EACI;;;EACArN,UAAU,CAACa,SAAX,CAAqByC,mBAArB,GAA2C,UAAUie,MAAV,EAAkB;IACzD,OAAQA,MAAM,IAAI,KAAK,EAAT,CAAd;EACH,CAFD;EAGA;AACJ;AACA;;;EACIvhB,UAAU,CAACa,SAAX,CAAqB2gB,OAArB,GAA+B,YAAY;IACvC,KAAKnU,aAAL,GAAqB,IAArB;IACA,KAAK9M,kBAAL,GAA0B,EAA1B;IACA,IAAI,KAAKK,aAAL,IAAsB,KAAKA,aAAL,CAAmBiT,eAA7C,EACI,KAAKjT,aAAL,CAAmBiT,eAAnB,CAAmC2N,OAAnC;EACP,CALD;EAMA;AACJ;AACA;;;EACIxhB,UAAU,CAACa,SAAX,CAAqB4gB,aAArB,GAAqC,YAAY;IAC7C,OAAO,YAAP;EACH,CAFD;EAGA;AACJ;AACA;AACA;AACA;AACA;AACA;;;EACIzhB,UAAU,CAACa,SAAX,CAAqB6U,YAArB,GAAoC,UAAU8F,IAAV,EAAgB7Y,IAAhB,EAAsBG,UAAtB,EAAkC;IAClE,IAAI4e,MAAM,GAAGlgB,QAAQ,CAACgL,aAAT,CAAuB,QAAvB,CAAb;IACA,IAAImV,OAAO,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAd;IACA,IAAIpS,QAAJ;;IACA,IAAI7M,IAAJ,EAAU;MACN6M,QAAQ,GAAG7M,IAAI,GAAG,IAAP,GAAc,GAAd,GAAoBG,UAA/B;IACH;;IACD6e,OAAO,CAAChf,IAAR,GAAe6M,QAAQ,IAAIqS,gBAAgB,CAACrgB,QAAQ,CAACsgB,IAAV,CAAhB,CAAgCnf,IAA3D;IACA,OAAOgf,OAAO,CAACI,WAAR,CAAoBvG,IAApB,EAA0BjX,KAAjC;EACH,CATD;EAUA;AACJ;AACA;AACA;AACA;;;EACIvE,UAAU,CAACa,SAAX,CAAqB+U,WAArB,GAAmC,UAAU5S,QAAV,EAAoB;IACnD,OAAQA,QAAQ,GAAG,CAAX,KAAiB,CAAlB,GAAuBA,QAAvB,GAAkC,EAAEA,QAA3C;EACH,CAFD;;EAGA,OAAOhD,UAAP;AACH,CAlnF+B,EAAhC;;AAmnFA,SAASA,UAAT"},"metadata":{},"sourceType":"module"}