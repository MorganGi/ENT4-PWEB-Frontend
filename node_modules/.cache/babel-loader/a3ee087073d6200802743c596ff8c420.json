{"ast":null,"code":"import { isNullOrUndefined, addClass, extend, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, alignFrozenEditForm, getMovableTbody, getFrozenRightTbody, setStyleAndAttributes } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\n\nvar InlineEditRender =\n/** @class */\nfunction () {\n  /**\n   * Constructor for render module\n   *\n   * @param {IGrid} parent - returns the IGrid\n   */\n  function InlineEditRender(parent) {\n    this.parent = parent;\n  }\n\n  InlineEditRender.prototype.addNew = function (elements, args) {\n    this.isEdit = false;\n    var tbody;\n    var mTbody = getMovableTbody(this.parent);\n    var frTbody = getFrozenRightTbody(this.parent);\n    var isFrozenGrid = this.parent.isFrozenGrid();\n    var isVirtualFrozen = isFrozenGrid && this.parent.enableColumnVirtualization && args.isScroll;\n\n    if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n      tbody = isVirtualFrozen ? this.parent.getMovableHeaderTbody() : this.parent.getHeaderTable().querySelector(literals.tbody);\n    } else {\n      tbody = isVirtualFrozen ? this.parent.getMovableContentTbody() : this.parent.getContentTable().querySelector(literals.tbody);\n    }\n\n    args.row = this.parent.createElement('tr', {\n      className: 'e-row e-addedrow',\n      attrs: {\n        role: 'row'\n      }\n    });\n\n    if (tbody.querySelector('.e-emptyrow')) {\n      var emptyRow = tbody.querySelector('.e-emptyrow');\n      emptyRow.parentNode.removeChild(emptyRow);\n\n      if (isFrozenGrid && !isVirtualFrozen) {\n        var moveTbody = this.parent.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody);\n        moveTbody.firstElementChild.parentNode.removeChild(moveTbody.firstElementChild);\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          var frTbody_1 = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n          frTbody_1.firstElementChild.parentNode.removeChild(frTbody_1.firstElementChild);\n        }\n      }\n    }\n\n    if (this.parent.editSettings.newRowPosition === 'Top') {\n      tbody.insertBefore(args.row, tbody.firstChild);\n    } else {\n      tbody.appendChild(args.row);\n    }\n\n    args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n    this.parent.editModule.checkLastRow(args.row, args);\n\n    if (isFrozenGrid && !isVirtualFrozen) {\n      var mEle = this.renderMovableform(args.row, args);\n\n      if (this.parent.editSettings.newRowPosition === 'Top') {\n        mTbody.insertBefore(mEle, mTbody.firstChild);\n      } else {\n        mTbody.appendChild(mEle);\n      }\n\n      args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n      mEle.querySelector('.e-normaledit').setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n\n      if (frTbody) {\n        var frEle = this.renderFrozenRightForm(args.row, args);\n\n        if (this.parent.editSettings.newRowPosition === 'Top') {\n          frTbody.insertBefore(frEle, frTbody.firstChild);\n        } else {\n          frTbody.appendChild(frEle);\n        }\n\n        var colSpan = this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount();\n        args.row.querySelector('.e-normaledit').setAttribute('colspan', colSpan + '');\n        frEle.querySelector('.e-normaledit').setAttribute('colspan', '' + this.parent.getFrozenRightColumnsCount());\n      }\n\n      if (this.parent.height === 'auto') {\n        this.parent.notify(events.frozenHeight, {});\n      }\n    }\n  };\n\n  InlineEditRender.prototype.renderFrozenRightForm = function (ele, args) {\n    var frEle = ele.cloneNode(true);\n    var form = args.frozenRightForm = frEle.querySelector('form');\n\n    if (this.parent.editSettings.template) {\n      form.innerHTML = '';\n      this.appendChildren(form, args.rowData, false);\n      return frEle;\n    }\n\n    this.renderRightFrozen(ele, frEle);\n    frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n    return frEle;\n  };\n\n  InlineEditRender.prototype.renderMovableform = function (ele, args) {\n    var mEle = ele.cloneNode(true);\n    var form = args.movableForm = mEle.querySelector('form');\n\n    if (this.parent.editSettings.template) {\n      form.innerHTML = '';\n      this.appendChildren(form, args.rowData, false);\n      return mEle;\n    }\n\n    this.renderMovable(ele, mEle);\n    mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n    return mEle;\n  };\n\n  InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n    td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n\n    if (this.parent.getFrozenMode() === literals.leftRight) {\n      td = td.concat([].slice.call(this.getFreezeRightRow(row).querySelectorAll('td.e-rowcell')));\n    }\n\n    return td;\n  };\n\n  InlineEditRender.prototype.getFreezeRightRow = function (row) {\n    var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n    var fCont = this.parent.getFrozenLeftContentTbody();\n    var fHdr = this.parent.getFrozenHeaderTbody();\n    var frHdr = this.parent.getFrozenRightHeaderTbody();\n    var frCont = this.parent.getFrozenRightContentTbody();\n\n    if (fCont.contains(row) || fHdr.contains(row)) {\n      return this.parent.getFrozenRightRowByIndex(idx);\n    } else if (frCont.contains(row) || frHdr.contains(row)) {\n      return this.parent.getRowByIndex(idx);\n    }\n\n    return row;\n  };\n\n  InlineEditRender.prototype.getFreezeRow = function (row) {\n    if (this.parent.isFrozenGrid()) {\n      var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n      var fCont = this.parent.getFrozenLeftContentTbody();\n      var mCont = this.parent.getMovableContentTbody();\n      var fHdr = this.parent.getFrozenHeaderTbody();\n      var mHdr = this.parent.getMovableHeaderTbody();\n\n      if (fCont.contains(row) || fHdr.contains(row)) {\n        return this.parent.getMovableRowByIndex(idx);\n      } else if (mCont.contains(row) || mHdr.contains(row)) {\n        return this.parent.getRowByIndex(idx);\n      }\n    }\n\n    return row;\n  };\n\n  InlineEditRender.prototype.update = function (elements, args) {\n    this.isEdit = true;\n    var isCustomFormValidation = args.isCustomFormValidation;\n    var isScroll = args.isScroll;\n\n    if (!isScroll && (closest(args.row, '.' + literals.movableContent) || closest(args.row, '.' + literals.movableHeader))) {\n      args.row = this.getFreezeRow(args.row);\n    }\n\n    if (closest(args.row, '.e-frozen-right-content') || closest(args.row, '.e-frozen-right-header')) {\n      args.row = this.getFreezeRightRow(args.row);\n    }\n\n    var isVirtualFrozen = this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization && isScroll;\n    var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n    args.row.innerHTML = '';\n\n    if (!isVirtualFrozen && !isCustomFormValidation) {\n      tdElement = this.updateFreezeEdit(args.row, tdElement);\n    }\n\n    args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n    args.row.classList.add(literals.editedRow);\n    this.parent.editModule.checkLastRow(args.row, args);\n\n    if (!isVirtualFrozen && !isCustomFormValidation) {\n      this.refreshFreezeEdit(args.row, args);\n    }\n  };\n\n  InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n    var td = row.firstChild;\n\n    if (this.parent.getVisibleFrozenColumns() && this.parent.editSettings.template) {\n      td.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.frozenHeader).querySelector(literals.colGroup).innerHTML;\n    }\n\n    var fCls;\n    var cont;\n    var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n\n    if (this.parent.isFrozenGrid()) {\n      if (idx < this.parent.frozenRows) {\n        cont = this.parent.getHeaderContent();\n        fCls = '.' + literals.frozenHeader;\n      } else {\n        cont = this.parent.getContent();\n        fCls = '.' + literals.frozenContent;\n      }\n\n      var mTd = td.cloneNode(true);\n      var frTd = td.cloneNode(true);\n      var form = args.movableForm = mTd.querySelector('form');\n\n      if (this.parent.editSettings.template) {\n        this.refreshEditForm(form, args.rowData);\n      }\n\n      var fRows = void 0;\n      var frRows = void 0;\n\n      if (cont.querySelector(fCls).contains(row)) {\n        fRows = this.parent.getMovableRowByIndex(idx);\n        this.updateFrozenCont(fRows, td, mTd);\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          args.frozenRightForm = frTd.querySelector('form');\n          this.refreshEditForm(args.frozenRightForm, args.rowData);\n          frRows = this.parent.getFrozenRightRowByIndex(idx);\n          this.updateFrozenRightCont(frRows, td, frTd);\n        }\n      } else {\n        fRows = this.parent.getRowByIndex(idx);\n        this.updateFrozenCont(fRows, mTd, td);\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          args.frozenRightForm = frTd.querySelector('form');\n          this.refreshEditForm(args.frozenRightForm, args.rowData);\n          frRows = this.parent.getFrozenRightRowByIndex(idx);\n          this.updateFrozenRightCont(frRows, frTd, td);\n        }\n      }\n\n      fRows.appendChild(mTd);\n      fRows.classList.add(literals.editedRow);\n\n      if (this.parent.getFrozenMode() === literals.leftRight) {\n        frRows.appendChild(frTd);\n        frRows.classList.add(literals.editedRow);\n        alignFrozenEditForm(args.frozenRightForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n      }\n\n      alignFrozenEditForm(args.movableForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n    }\n  };\n\n  InlineEditRender.prototype.refreshEditForm = function (form, data) {\n    if (this.parent.editSettings.template) {\n      form.innerHTML = '';\n      this.appendChildren(form, data, false);\n    }\n  };\n\n  InlineEditRender.prototype.updateFrozenRightCont = function (row, ele, frEle) {\n    row.innerHTML = '';\n    this.renderRightFrozen(ele, frEle);\n    frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n    ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount() + '');\n    frEle.setAttribute('colspan', this.parent.getFrozenRightColumnsCount() + '');\n  };\n\n  InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n    row.innerHTML = '';\n    this.renderMovable(ele, mEle);\n    mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n    ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n    mEle.setAttribute('colspan', this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - this.parent.getVisibleFrozenColumns() + '');\n  };\n\n  InlineEditRender.prototype.renderRightFrozen = function (ele, frEle) {\n    frEle.querySelector('tr').innerHTML = '';\n    var cols = this.parent.getColumns();\n    var k = 0;\n\n    for (var i = 0; i < cols.length; i++, k++) {\n      if (cols[i].getFreezeTableName() === literals.frozenRight) {\n        var index = k - this.parent.getMovableColumnsCount();\n        frEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[index]));\n        k--;\n      }\n    }\n  };\n\n  InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n    mEle.querySelector('tr').innerHTML = '';\n    var cols = this.parent.getColumns();\n    var k = this.parent.isRowDragable() ? 1 : 0;\n\n    for (var i = 0; i < cols.length; i++, k++) {\n      if (cols[i].getFreezeTableName() === 'movable') {\n        mEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[k]));\n        k--;\n      }\n    }\n  }; // eslint-disable-next-line max-len\n\n\n  InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n    var gObj = this.parent;\n    var gLen = 0;\n    var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n\n    if (gObj.allowGrouping) {\n      gLen = gObj.groupSettings.columns.length;\n    }\n\n    var td = this.parent.createElement('td', {\n      className: 'e-editcell e-normaledit',\n      attrs: {\n        colspan: (gObj.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - gObj.getVisibleFrozenColumns() + this.parent.getIndentCount()).toString()\n      }\n    });\n    var form = args.form = this.parent.createElement('form', {\n      id: gObj.element.id + 'EditForm',\n      className: 'e-gridform'\n    });\n\n    if (this.parent.editSettings.template) {\n      this.appendChildren(form, args.rowData, isFrozen);\n      td.appendChild(form);\n      return td;\n    }\n\n    var table = this.parent.createElement('table', {\n      className: 'e-table e-inline-edit',\n      attrs: {\n        cellspacing: '0.25',\n        role: 'grid'\n      }\n    });\n    table.appendChild(gObj.getContentTable().querySelector(literals.colGroup).cloneNode(true));\n    var tbody = this.parent.createElement(literals.tbody, {\n      attrs: {\n        role: 'rowgroup'\n      }\n    });\n    var tr = this.parent.createElement('tr', {\n      attrs: {\n        role: 'row'\n      }\n    });\n    var i = 0;\n\n    if (isDetail) {\n      tr.insertBefore(this.parent.createElement('td', {\n        className: 'e-detailrowcollapse'\n      }), tr.firstChild);\n    }\n\n    if (gObj.isRowDragable()) {\n      tr.appendChild(this.parent.createElement('td', {\n        className: 'e-dragindentcell'\n      }));\n    }\n\n    while (i < gLen) {\n      tr.appendChild(this.parent.createElement('td', {\n        className: 'e-indentcell'\n      }));\n      i++;\n    }\n\n    var m = 0;\n    i = 0;\n    var isVirtualFrozen = gObj.isFrozenGrid() && gObj.enableColumnVirtualization && args.isScroll;\n    var cols = args.isCustomFormValidation ? this.parent.columnModel : gObj.getColumns();\n\n    while (isEdit && m < tdElement.length && i < cols.length || i < cols.length) {\n      var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n      var col = cols[i];\n\n      if (isVirtualFrozen && col.getFreezeTableName() !== 'movable' || args.isCustomFormValidation && (col.commands || col.commandsTemplate || !col.field)) {\n        i++;\n        continue;\n      }\n\n      var td_1 = this.parent.createElement('td', {\n        className: literals.rowCell,\n        attrs: {\n          style: 'text-align:' + (col.textAlign ? col.textAlign : ''),\n          'colspan': span ? span : ''\n        }\n      });\n\n      if (col.visible) {\n        td_1.appendChild(elements[col.uid]);\n\n        if (this.parent.rowRenderingMode === 'Vertical') {\n          setStyleAndAttributes(td_1, {\n            'data-cell': col.headerText\n          });\n\n          if (i === 0) {\n            td_1.classList.add('e-responsive-editcell');\n          }\n        }\n\n        if (col.editType === 'booleanedit') {\n          td_1.classList.add('e-boolcell');\n        } else if (col.commands || col.commandsTemplate) {\n          addClass([td_1], 'e-unboundcell');\n        }\n      } else {\n        td_1.classList.add('e-hide');\n      }\n\n      tr.appendChild(td_1);\n      i = span ? i + parseInt(span, 10) : i + 1;\n      m++;\n    }\n\n    tbody.appendChild(tr);\n    table.appendChild(tbody);\n    form.appendChild(table);\n    td.appendChild(form);\n    return td;\n  };\n\n  InlineEditRender.prototype.removeEventListener = function () {//To destroy the renderer\n  };\n\n  InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n    var _this = this;\n\n    var dummyData = extend({}, data, {\n      isAdd: !this.isEdit,\n      isFrozen: isFrozen\n    }, true);\n    var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n\n    if (this.parent.isReact && typeof this.parent.editSettings.template !== 'string') {\n      this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n      this.parent.renderTemplates();\n    } else {\n      appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n    } // eslint-disable-next-line\n\n\n    var setRules = function () {\n      var cols = _this.parent.getColumns();\n\n      for (var i = 0; i < cols.length; i++) {\n        if (cols[i].validationRules) {\n          _this.parent.editModule.formObj.rules[cols[i].field] = cols[i].validationRules;\n        }\n      }\n    };\n  };\n\n  return InlineEditRender;\n}();\n\nexport { InlineEditRender };","map":{"version":3,"names":["isNullOrUndefined","addClass","extend","closest","events","appendChildren","alignFrozenEditForm","getMovableTbody","getFrozenRightTbody","setStyleAndAttributes","literals","InlineEditRender","parent","prototype","addNew","elements","args","isEdit","tbody","mTbody","frTbody","isFrozenGrid","isVirtualFrozen","enableColumnVirtualization","isScroll","frozenRows","editSettings","newRowPosition","getMovableHeaderTbody","getHeaderTable","querySelector","getMovableContentTbody","getContentTable","row","createElement","className","attrs","role","emptyRow","parentNode","removeChild","moveTbody","getContent","movableContent","firstElementChild","getFrozenMode","leftRight","frTbody_1","insertBefore","firstChild","appendChild","getEditElement","undefined","editModule","checkLastRow","mEle","renderMovableform","setAttribute","getVisibleFrozenColumns","getVisibleColumns","length","frEle","renderFrozenRightForm","colSpan","getFrozenRightColumnsCount","height","notify","frozenHeight","ele","cloneNode","form","frozenRightForm","template","innerHTML","rowData","renderRightFrozen","colGroup","getHeaderContent","movableForm","renderMovable","movableHeader","updateFreezeEdit","td","concat","slice","call","getFreezeRow","querySelectorAll","getFreezeRightRow","idx","parseInt","getAttribute","ariaRowIndex","fCont","getFrozenLeftContentTbody","fHdr","getFrozenHeaderTbody","frHdr","getFrozenRightHeaderTbody","frCont","getFrozenRightContentTbody","contains","getFrozenRightRowByIndex","getRowByIndex","mCont","mHdr","getMovableRowByIndex","update","isCustomFormValidation","tdElement","classList","add","editedRow","refreshFreezeEdit","frozenHeader","fCls","cont","frozenContent","mTd","frTd","refreshEditForm","fRows","frRows","updateFrozenCont","updateFrozenRightCont","data","getCurrentVisibleColumns","cols","getColumns","k","i","getFreezeTableName","frozenRight","index","getMovableColumnsCount","children","isRowDragable","isFrozen","gObj","gLen","isDetail","detailTemplate","childGrid","allowGrouping","groupSettings","columns","colspan","getIndentCount","toString","id","element","table","cellspacing","tr","m","columnModel","span","col","commands","commandsTemplate","field","td_1","rowCell","style","textAlign","visible","uid","rowRenderingMode","headerText","editType","removeEventListener","_this","dummyData","isAdd","editTemplateID","isReact","getEditTemplate","renderTemplates","setRules","validationRules","formObj","rules"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-grids/src/grid/renderer/inline-edit-renderer.js"],"sourcesContent":["import { isNullOrUndefined, addClass, extend, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, alignFrozenEditForm, getMovableTbody, getFrozenRightTbody, setStyleAndAttributes } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent - returns the IGrid\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        var tbody;\n        var mTbody = getMovableTbody(this.parent);\n        var frTbody = getFrozenRightTbody(this.parent);\n        var isFrozenGrid = this.parent.isFrozenGrid();\n        var isVirtualFrozen = isFrozenGrid && this.parent.enableColumnVirtualization && args.isScroll;\n        if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n            tbody = isVirtualFrozen ? this.parent.getMovableHeaderTbody() : this.parent.getHeaderTable().querySelector(literals.tbody);\n        }\n        else {\n            tbody = isVirtualFrozen ? this.parent.getMovableContentTbody() : this.parent.getContentTable().querySelector(literals.tbody);\n        }\n        args.row = this.parent.createElement('tr', { className: 'e-row e-addedrow', attrs: { role: 'row' } });\n        if (tbody.querySelector('.e-emptyrow')) {\n            var emptyRow = tbody.querySelector('.e-emptyrow');\n            emptyRow.parentNode.removeChild(emptyRow);\n            if (isFrozenGrid && !isVirtualFrozen) {\n                var moveTbody = this.parent.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody);\n                (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    var frTbody_1 = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n                    (frTbody_1.firstElementChild).parentNode.removeChild(frTbody_1.firstElementChild);\n                }\n            }\n        }\n        if (this.parent.editSettings.newRowPosition === 'Top') {\n            tbody.insertBefore(args.row, tbody.firstChild);\n        }\n        else {\n            tbody.appendChild(args.row);\n        }\n        args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n        this.parent.editModule.checkLastRow(args.row, args);\n        if (isFrozenGrid && !isVirtualFrozen) {\n            var mEle = this.renderMovableform(args.row, args);\n            if (this.parent.editSettings.newRowPosition === 'Top') {\n                mTbody.insertBefore(mEle, mTbody.firstChild);\n            }\n            else {\n                mTbody.appendChild(mEle);\n            }\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.querySelector('.e-normaledit').setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (frTbody) {\n                var frEle = this.renderFrozenRightForm(args.row, args);\n                if (this.parent.editSettings.newRowPosition === 'Top') {\n                    frTbody.insertBefore(frEle, frTbody.firstChild);\n                }\n                else {\n                    frTbody.appendChild(frEle);\n                }\n                var colSpan = this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount();\n                args.row.querySelector('.e-normaledit').setAttribute('colspan', colSpan + '');\n                frEle.querySelector('.e-normaledit').setAttribute('colspan', '' + this.parent.getFrozenRightColumnsCount());\n            }\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderFrozenRightForm = function (ele, args) {\n        var frEle = ele.cloneNode(true);\n        var form = args.frozenRightForm = frEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return frEle;\n        }\n        this.renderRightFrozen(ele, frEle);\n        frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n        return frEle;\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele, args) {\n        var mEle = ele.cloneNode(true);\n        var form = args.movableForm = mEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return mEle;\n        }\n        this.renderMovable(ele, mEle);\n        mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n            td = td.concat([].slice.call(this.getFreezeRightRow(row).querySelectorAll('td.e-rowcell')));\n        }\n        return td;\n    };\n    InlineEditRender.prototype.getFreezeRightRow = function (row) {\n        var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n        var fCont = this.parent.getFrozenLeftContentTbody();\n        var fHdr = this.parent.getFrozenHeaderTbody();\n        var frHdr = this.parent.getFrozenRightHeaderTbody();\n        var frCont = this.parent.getFrozenRightContentTbody();\n        if (fCont.contains(row) || fHdr.contains(row)) {\n            return this.parent.getFrozenRightRowByIndex(idx);\n        }\n        else if (frCont.contains(row) || frHdr.contains(row)) {\n            return this.parent.getRowByIndex(idx);\n        }\n        return row;\n    };\n    InlineEditRender.prototype.getFreezeRow = function (row) {\n        if (this.parent.isFrozenGrid()) {\n            var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n            var fCont = this.parent.getFrozenLeftContentTbody();\n            var mCont = this.parent.getMovableContentTbody();\n            var fHdr = this.parent.getFrozenHeaderTbody();\n            var mHdr = this.parent.getMovableHeaderTbody();\n            if (fCont.contains(row) || fHdr.contains(row)) {\n                return this.parent.getMovableRowByIndex(idx);\n            }\n            else if (mCont.contains(row) || mHdr.contains(row)) {\n                return this.parent.getRowByIndex(idx);\n            }\n        }\n        return row;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        var isCustomFormValidation = args.isCustomFormValidation;\n        var isScroll = args.isScroll;\n        if (!isScroll && (closest(args.row, '.' + literals.movableContent) || closest(args.row, '.' + literals.movableHeader))) {\n            args.row = this.getFreezeRow(args.row);\n        }\n        if (closest(args.row, '.e-frozen-right-content') || closest(args.row, '.e-frozen-right-header')) {\n            args.row = this.getFreezeRightRow(args.row);\n        }\n        var isVirtualFrozen = this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization && isScroll;\n        var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n        args.row.innerHTML = '';\n        if (!isVirtualFrozen && !isCustomFormValidation) {\n            tdElement = this.updateFreezeEdit(args.row, tdElement);\n        }\n        args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n        args.row.classList.add(literals.editedRow);\n        this.parent.editModule.checkLastRow(args.row, args);\n        if (!isVirtualFrozen && !isCustomFormValidation) {\n            this.refreshFreezeEdit(args.row, args);\n        }\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n        var td = row.firstChild;\n        if (this.parent.getVisibleFrozenColumns() && this.parent.editSettings.template) {\n            td.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.frozenHeader).\n                querySelector(literals.colGroup).innerHTML;\n        }\n        var fCls;\n        var cont;\n        var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n        if (this.parent.isFrozenGrid()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.' + literals.frozenHeader;\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.' + literals.frozenContent;\n            }\n            var mTd = td.cloneNode(true);\n            var frTd = td.cloneNode(true);\n            var form = args.movableForm = mTd.querySelector('form');\n            if (this.parent.editSettings.template) {\n                this.refreshEditForm(form, args.rowData);\n            }\n            var fRows = void 0;\n            var frRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                this.updateFrozenCont(fRows, td, mTd);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    args.frozenRightForm = frTd.querySelector('form');\n                    this.refreshEditForm(args.frozenRightForm, args.rowData);\n                    frRows = this.parent.getFrozenRightRowByIndex(idx);\n                    this.updateFrozenRightCont(frRows, td, frTd);\n                }\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                this.updateFrozenCont(fRows, mTd, td);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    args.frozenRightForm = frTd.querySelector('form');\n                    this.refreshEditForm(args.frozenRightForm, args.rowData);\n                    frRows = this.parent.getFrozenRightRowByIndex(idx);\n                    this.updateFrozenRightCont(frRows, frTd, td);\n                }\n            }\n            fRows.appendChild(mTd);\n            fRows.classList.add(literals.editedRow);\n            if (this.parent.getFrozenMode() === literals.leftRight) {\n                frRows.appendChild(frTd);\n                frRows.classList.add(literals.editedRow);\n                alignFrozenEditForm(args.frozenRightForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n            }\n            alignFrozenEditForm(args.movableForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n        }\n    };\n    InlineEditRender.prototype.refreshEditForm = function (form, data) {\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, data, false);\n        }\n    };\n    InlineEditRender.prototype.updateFrozenRightCont = function (row, ele, frEle) {\n        row.innerHTML = '';\n        this.renderRightFrozen(ele, frEle);\n        frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount() + '');\n        frEle.setAttribute('colspan', this.parent.getFrozenRightColumnsCount() + '');\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        this.renderMovable(ele, mEle);\n        mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - this.parent.getVisibleFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderRightFrozen = function (ele, frEle) {\n        frEle.querySelector('tr').innerHTML = '';\n        var cols = this.parent.getColumns();\n        var k = 0;\n        for (var i = 0; i < cols.length; i++, k++) {\n            if (cols[i].getFreezeTableName() === literals.frozenRight) {\n                var index = k - this.parent.getMovableColumnsCount();\n                frEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[index]));\n                k--;\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        mEle.querySelector('tr').innerHTML = '';\n        var cols = this.parent.getColumns();\n        var k = this.parent.isRowDragable() ? 1 : 0;\n        for (var i = 0; i < cols.length; i++, k++) {\n            if (cols[i].getFreezeTableName() === 'movable') {\n                mEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[k]));\n                k--;\n            }\n        }\n    };\n    // eslint-disable-next-line max-len\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = this.parent.createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: {\n                colspan: (gObj.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - gObj.getVisibleFrozenColumns()\n                    + this.parent.getIndentCount()).toString()\n            }\n        });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            this.appendChildren(form, args.rowData, isFrozen);\n            td.appendChild(form);\n            return td;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25', role: 'grid' } });\n        table.appendChild(gObj.getContentTable().querySelector(literals.colGroup).cloneNode(true));\n        var tbody = this.parent.createElement(literals.tbody, { attrs: { role: 'rowgroup' } });\n        var tr = this.parent.createElement('tr', { attrs: { role: 'row' } });\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        if (gObj.isRowDragable()) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-dragindentcell' }));\n        }\n        while (i < gLen) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        var isVirtualFrozen = gObj.isFrozenGrid() && gObj.enableColumnVirtualization && args.isScroll;\n        var cols = args.isCustomFormValidation ? this.parent.columnModel : gObj.getColumns();\n        while ((isEdit && m < tdElement.length && i < cols.length) || i < cols.length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = cols[i];\n            if ((isVirtualFrozen && col.getFreezeTableName() !== 'movable')\n                || (args.isCustomFormValidation && (col.commands || col.commandsTemplate || !col.field))) {\n                i++;\n                continue;\n            }\n            var td_1 = this.parent.createElement('td', {\n                className: literals.rowCell, attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (this.parent.rowRenderingMode === 'Vertical') {\n                    setStyleAndAttributes(td_1, { 'data-cell': col.headerText });\n                    if (i === 0) {\n                        td_1.classList.add('e-responsive-editcell');\n                    }\n                }\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n        var _this = this;\n        var dummyData = extend({}, data, { isAdd: !this.isEdit, isFrozen: isFrozen }, true);\n        var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n        if (this.parent.isReact && typeof (this.parent.editSettings.template) !== 'string') {\n            this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n            this.parent.renderTemplates();\n        }\n        else {\n            appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n        }\n        // eslint-disable-next-line\n        var setRules = function () {\n            var cols = _this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].validationRules) {\n                    _this.parent.editModule.formObj.rules[cols[i].field] =\n                        cols[i].validationRules;\n                }\n            }\n        };\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}