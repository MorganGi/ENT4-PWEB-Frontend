{"ast":null,"code":"import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\nimport * as literals from '../base/string-literals';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\n\nvar ColumnChooser =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the Grid ColumnChooser module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   * @hidden\n   */\n  function ColumnChooser(parent, serviceLocator) {\n    this.showColumn = [];\n    this.hideColumn = [];\n    this.changedColumns = [];\n    this.unchangedColumns = [];\n    this.isDlgOpen = false;\n    this.initialOpenDlg = true;\n    this.stateChangeColumns = [];\n    this.changedStateColumns = [];\n    this.isInitialOpen = false;\n    this.isCustomizeOpenCC = false;\n    this.searchOperator = 'startswith';\n    this.prevShowedCols = [];\n    this.hideDialogFunction = this.hideDialog.bind(this);\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n    this.cBoxTrue = createCheckBox(this.parent.createElement, true, {\n      checked: true,\n      label: ' '\n    });\n    this.cBoxFalse = createCheckBox(this.parent.createElement, true, {\n      checked: false,\n      label: ' '\n    });\n    this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden e-cc e-cc-chbox',\n      attrs: {\n        type: 'checkbox'\n      }\n    }), this.cBoxTrue.firstChild);\n    this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden e-cc e-cc-chbox',\n      attrs: {\n        'type': 'checkbox'\n      }\n    }), this.cBoxFalse.firstChild);\n    this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n\n    if (this.parent.enableRtl) {\n      addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n    }\n\n    if (this.parent.cssClass) {\n      addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n    }\n  }\n\n  ColumnChooser.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n\n    if (!gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n\n    this.removeEventListener();\n    this.unWireEvents();\n\n    if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n      this.dlgObj.destroy();\n    }\n  };\n\n  ColumnChooser.prototype.rtlUpdate = function () {\n    if (this.parent.enableRtl) {\n      addClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n    } else {\n      removeClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnChooser.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    EventHandler.add(document, 'click', this.clickHandler, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n    this.parent.on(events.initialEnd, this.render, this);\n    this.parent.addEventListener(events.dataBound, this.hideDialogFunction);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n    this.parent.on(events.keyPressed, this.keyUpHandler, this);\n    this.parent.on(events.resetColumns, this.onResetColumns, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnChooser.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    EventHandler.remove(document, 'click', this.clickHandler);\n    this.parent.off(events.initialEnd, this.render);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n    this.parent.off(events.rtlUpdated, this.rtlUpdate);\n    this.parent.on(events.keyPressed, this.keyUpHandler, this);\n    this.parent.off(events.resetColumns, this.onResetColumns);\n    this.parent.removeEventListener(events.dataBound, this.hideDialogFunction);\n  };\n\n  ColumnChooser.prototype.render = function () {\n    this.l10n = this.serviceLocator.getService('localization');\n    this.renderDlgContent();\n    this.getShowHideService = this.serviceLocator.getService('showHideService');\n  };\n\n  ColumnChooser.prototype.clickHandler = function (e) {\n    var targetElement = e.target;\n\n    if (!this.isCustomizeOpenCC) {\n      if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n        if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n          if (this.initialOpenDlg && this.dlgObj.visible || !this.isDlgOpen) {\n            this.isDlgOpen = true;\n            return;\n          }\n        } else if (targetElement.classList.contains('e-cc-cancel')) {\n          targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n          this.columnChooserSearch('');\n          this.removeCancelIcon();\n          this.refreshCheckboxButton();\n        }\n      } else {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n          this.dlgObj.hide();\n          this.clearActions();\n          this.refreshCheckboxState(); // this.unWireEvents();\n\n          this.isDlgOpen = false;\n        }\n      }\n\n      if (this.parent.detailTemplate || this.parent.childGrid) {\n        this.targetdlg = e.target;\n      }\n    }\n\n    if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n      this.refreshCheckboxState();\n    }\n\n    this.rtlUpdate();\n  };\n\n  ColumnChooser.prototype.hideDialog = function () {\n    if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n      this.dlgObj.hide(); // this.unWireEvents();\n\n      this.isDlgOpen = false;\n    }\n  };\n  /**\n   * To render columnChooser when showColumnChooser enabled.\n   *\n   * @param {number} x - specifies the position x\n   * @param {number} y - specifies the position y\n   * @param {Element} target - specifies the target\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n    if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n      this.hideOpenedDialog();\n    }\n\n    if (!this.dlgObj.visible) {\n      var args = this.beforeOpenColumnChooserEvent();\n\n      if (args.cancel) {\n        return;\n      }\n\n      if (target) {\n        this.targetdlg = target;\n      }\n\n      this.refreshCheckboxState();\n      this.dlgObj.dataBind();\n      this.dlgObj.element.style.maxHeight = '430px';\n      var elementVisible = this.dlgObj.element.style.display;\n      this.dlgObj.element.style.display = 'block';\n      var isSticky = this.parent.getHeaderContent().classList.contains('e-sticky');\n      var toolbarItem = closest(target, '.e-toolbar-item');\n      var newpos = void 0;\n\n      if (isSticky) {\n        newpos = toolbarItem.getBoundingClientRect();\n        this.dlgObj.element.classList.add('e-sticky');\n      } else {\n        this.dlgObj.element.classList.remove('e-sticky');\n        newpos = calculateRelativeBasedPosition(toolbarItem, this.dlgObj.element);\n      }\n\n      this.dlgObj.element.style.display = elementVisible;\n      this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n      var dlgWidth = 250;\n\n      if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n        this.dlgObj.width = 258;\n      }\n\n      if (Browser.isDevice) {\n        this.dlgObj.target = document.body;\n        this.dlgObj.position = {\n          X: 'center',\n          Y: 'center'\n        };\n        this.dlgObj.refreshPosition();\n        this.dlgObj.open = this.mOpenDlg.bind(this);\n      } else {\n        if (this.parent.enableRtl) {\n          this.dlgObj.element.style.left = target.offsetLeft + 'px';\n        } else {\n          this.dlgObj.element.style.left = newpos.left - dlgWidth + closest(target, '.e-cc-toolbar').clientWidth + 2 + 'px';\n        }\n      }\n\n      this.removeCancelIcon();\n      this.dlgObj.show();\n      this.parent.notify(events.columnChooserOpened, {\n        dialog: this.dlgObj\n      });\n    } else {\n      // this.unWireEvents();\n      this.hideDialog();\n      this.addcancelIcon();\n      this.clearActions();\n      this.refreshCheckboxState();\n    }\n\n    this.rtlUpdate();\n  };\n  /**\n   * Column chooser can be displayed on screen by given position(X and Y axis).\n   *\n   * @param  {number} X - Defines the X axis.\n   * @param  {number} Y - Defines the Y axis.\n   * @return {void}\n   */\n\n\n  ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n    this.isCustomizeOpenCC = true;\n\n    if (this.dlgObj.visible) {\n      this.hideDialog();\n      return;\n    }\n\n    var args = this.beforeOpenColumnChooserEvent();\n\n    if (args.cancel) {\n      return;\n    }\n\n    if (!this.isInitialOpen) {\n      this.dlgObj.content = this.renderChooserList();\n      this.updateIntermediateBtn();\n    } else {\n      this.refreshCheckboxState();\n    }\n\n    this.dlgObj.dataBind();\n    this.dlgObj.position = {\n      X: 'center',\n      Y: 'center'\n    };\n\n    if (isNullOrUndefined(X)) {\n      this.dlgObj.position = {\n        X: 'center',\n        Y: 'center'\n      };\n      this.dlgObj.refreshPosition();\n    } else {\n      this.dlgObj.element.style.top = '';\n      this.dlgObj.element.style.left = '';\n      this.dlgObj.element.style.top = Y + 'px';\n      this.dlgObj.element.style.left = X + 'px';\n    }\n\n    this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n    this.dlgObj.show();\n    this.isInitialOpen = true;\n    this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n  };\n\n  ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      this.render();\n    }\n  };\n\n  ColumnChooser.prototype.keyUpHandler = function (e) {\n    if (e.action === 'escape') {\n      this.hideDialog();\n    }\n  };\n\n  ColumnChooser.prototype.customDialogOpen = function () {\n    var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n    EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n  };\n\n  ColumnChooser.prototype.customDialogClose = function () {\n    var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n    EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n  };\n\n  ColumnChooser.prototype.getColumns = function () {\n    var columns = this.parent.getColumns().filter(function (column) {\n      return column.type !== 'checkbox' && column.showInColumnChooser === true || column.type === 'checkbox' && column.field !== undefined;\n    });\n    return columns;\n  };\n\n  ColumnChooser.prototype.renderDlgContent = function () {\n    this.dlgDiv = this.parent.createElement('div', {\n      className: 'e-ccdlg e-cc',\n      id: this.parent.element.id + '_ccdlg'\n    });\n    this.dlgDiv.setAttribute('aria-label', this.l10n.getConstant('ColumnChooserDialogARIA'));\n    this.parent.element.appendChild(this.dlgDiv);\n    this.dlgObj = new Dialog({\n      header: this.l10n.getConstant('ChooseColumns'),\n      showCloseIcon: false,\n      closeOnEscape: false,\n      locale: this.parent.locale,\n      visible: false,\n      enableRtl: this.parent.enableRtl,\n      target: document.getElementById(this.parent.element.id),\n      buttons: [{\n        click: this.confirmDlgBtnClick.bind(this),\n        buttonModel: {\n          content: this.l10n.getConstant('OKButton'),\n          isPrimary: true,\n          cssClass: this.parent.cssClass ? 'e-cc e-cc_okbtn' + ' ' + this.parent.cssClass : 'e-cc e-cc_okbtn'\n        }\n      }, {\n        click: this.clearBtnClick.bind(this),\n        buttonModel: {\n          cssClass: this.parent.cssClass ? 'e-flat e-cc e-cc-cnbtn' + ' ' + this.parent.cssClass : 'e-flat e-cc e-cc-cnbtn',\n          content: this.l10n.getConstant('CancelButton')\n        }\n      }],\n      content: this.renderChooserList(),\n      width: 250,\n      cssClass: this.parent.cssClass ? 'e-cc' + ' ' + this.parent.cssClass : 'e-cc',\n      animationSettings: {\n        effect: 'None'\n      }\n    });\n    var isStringTemplate = 'isStringTemplate';\n    this.dlgObj[isStringTemplate] = true;\n    this.dlgObj.appendTo(this.dlgDiv);\n    this.wireEvents();\n  };\n\n  ColumnChooser.prototype.renderChooserList = function () {\n    this.mainDiv = this.parent.createElement('div', {\n      className: 'e-main-div e-cc'\n    });\n    var searchDiv = this.parent.createElement('div', {\n      className: 'e-cc-searchdiv e-cc e-input-group'\n    });\n    var ccsearchele = this.parent.createElement('input', {\n      className: 'e-ccsearch e-cc e-input',\n      attrs: {\n        placeholder: this.l10n.getConstant('Search'),\n        cssClass: this.parent.cssClass\n      }\n    });\n    var ccsearchicon = this.parent.createElement('span', {\n      className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n      attrs: {\n        title: this.l10n.getConstant('Search')\n      }\n    });\n    var conDiv = this.parent.createElement('div', {\n      className: 'e-cc-contentdiv'\n    });\n    this.innerDiv = this.parent.createElement('div', {\n      className: 'e-innerdiv e-cc'\n    });\n    searchDiv.appendChild(ccsearchele);\n    searchDiv.appendChild(ccsearchicon);\n    this.searchBoxObj = new SearchBox(ccsearchele);\n    var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n    this.innerDiv.appendChild(innerDivContent);\n    conDiv.appendChild(this.innerDiv);\n    this.mainDiv.appendChild(searchDiv);\n    this.mainDiv.appendChild(conDiv);\n    return this.mainDiv;\n  };\n\n  ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n    this.stateChangeColumns = [];\n    this.changedStateColumns = [];\n    this.changedColumns = this.changedColumns.length > 0 ? this.changedColumns : this.unchangedColumns;\n    this.changedColumnState(this.changedColumns);\n    var uncheckedLength = this.ulElement.querySelector('.e-uncheck') && this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n\n    if (!isNullOrUndefined(args)) {\n      if (uncheckedLength < this.parent.getColumns().length) {\n        if (this.hideColumn.length) {\n          this.columnStateChange(this.hideColumn, false);\n        }\n\n        if (this.showColumn.length) {\n          this.columnStateChange(this.showColumn, true);\n        }\n\n        this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n        this.clearActions();\n        this.parent.notify(events.tooltipDestroy, {\n          module: 'edit'\n        });\n\n        if (this.parent.getCurrentViewRecords().length === 0) {\n          var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n          emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n        }\n      }\n    }\n  };\n\n  ColumnChooser.prototype.onResetColumns = function (e) {\n    if (e.requestType === 'columnstate') {\n      this.resetColumnState();\n      return;\n    }\n  };\n\n  ColumnChooser.prototype.resetColumnState = function () {\n    this.showColumn = [];\n    this.hideColumn = [];\n    this.hideDialog();\n  };\n\n  ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n    for (var index = 0; index < changedColumns.length; index++) {\n      var colUid = changedColumns[index];\n      var currentCol = this.parent.getColumnByUid(colUid);\n      this.changedStateColumns.push(currentCol);\n    }\n  };\n\n  ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n    for (var index = 0; index < stateColumns.length; index++) {\n      var colUid = stateColumns[index];\n      var currentCol = this.parent.getColumnByUid(colUid);\n\n      if (currentCol.type !== 'checkbox') {\n        currentCol.visible = state;\n      }\n\n      this.stateChangeColumns.push(currentCol);\n    }\n  };\n\n  ColumnChooser.prototype.clearActions = function () {\n    this.resetColumnState();\n    this.addcancelIcon();\n  };\n\n  ColumnChooser.prototype.clearBtnClick = function () {\n    this.clearActions();\n    this.parent.notify(events.columnChooserCancelBtnClick, {\n      dialog: this.dlgObj\n    });\n  };\n\n  ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n    if (selectAll === void 0) {\n      selectAll = false;\n    }\n\n    if (isChecked) {\n      if (this.hideColumn.indexOf(coluid) !== -1) {\n        this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n      }\n\n      if (this.showColumn.indexOf(coluid) === -1) {\n        this.showColumn.push(coluid);\n      }\n    } else {\n      if (this.showColumn.indexOf(coluid) !== -1) {\n        this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n      }\n\n      if (this.hideColumn.indexOf(coluid) === -1) {\n        this.hideColumn.push(coluid);\n      }\n    }\n\n    if (selectAll) {\n      if (!isChecked) {\n        this.changedColumns.push(coluid);\n      } else {\n        this.unchangedColumns.push(coluid);\n      }\n    } else if (this.changedColumns.indexOf(coluid) !== -1) {\n      this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n    } else {\n      this.changedColumns.push(coluid);\n    }\n  };\n\n  ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n    var clearSearch = false;\n    var fltrCol;\n    var okButton;\n    var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n    var selectedCbox = this.ulElement.querySelector('.e-check') && this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n    this.isInitialOpen = true;\n\n    if (buttonEle) {\n      okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n    }\n\n    if (searchVal === '') {\n      this.removeCancelIcon();\n      fltrCol = this.getColumns();\n      clearSearch = true;\n    } else {\n      fltrCol = new DataManager(this.getColumns()).executeLocal(new Query().where('headerText', this.searchOperator, searchVal, true, this.parent.columnChooserSettings.ignoreAccent));\n    }\n\n    if (fltrCol.length) {\n      this.innerDiv.innerHTML = ' ';\n      this.innerDiv.classList.remove('e-ccnmdiv');\n      this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol));\n\n      if (!clearSearch) {\n        this.addcancelIcon();\n        this.refreshCheckboxButton();\n      } else {\n        if (okButton && selectedCbox) {\n          okButton.disabled = false;\n        }\n      }\n    } else {\n      var nMatchele = this.parent.createElement('span', {\n        className: 'e-cc e-nmatch'\n      });\n      nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n      this.innerDiv.innerHTML = ' ';\n      this.innerDiv.appendChild(nMatchele);\n      this.innerDiv.classList.add('e-ccnmdiv');\n\n      if (okButton) {\n        okButton.disabled = true;\n      }\n    }\n\n    this.flag = true;\n    this.stopTimer();\n  };\n\n  ColumnChooser.prototype.wireEvents = function () {\n    EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n    EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n    this.searchBoxObj.wireEvent();\n  };\n\n  ColumnChooser.prototype.unWireEvents = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.dlgObj.element) {\n      EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n    }\n\n    EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n    this.searchBoxObj.unWireEvent();\n  };\n\n  ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n    var checkstate;\n    var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n\n    if (elem) {\n      var selectAll = elem.querySelector('.e-selectall');\n\n      if (selectAll) {\n        this.updateSelectAll(!elem.querySelector('.e-check'));\n      } else {\n        toogleCheckbox(elem.parentElement);\n      }\n\n      elem.querySelector('.e-chk-hidden').focus();\n\n      if (elem.querySelector('.e-check')) {\n        checkstate = true;\n      } else if (elem.querySelector('.e-uncheck')) {\n        checkstate = false;\n      } else {\n        return;\n      }\n\n      this.updateIntermediateBtn();\n      var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n      var column = this.parent.getColumns();\n\n      if (columnUid === 'grid-selectAll') {\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n\n        for (var i = 0; i < column.length; i++) {\n          if (column[i].showInColumnChooser) {\n            this.checkstatecolumn(checkstate, column[i].uid, true);\n          }\n        }\n      } else {\n        this.checkstatecolumn(checkstate, columnUid);\n      }\n\n      this.refreshCheckboxButton();\n    }\n  };\n\n  ColumnChooser.prototype.updateIntermediateBtn = function () {\n    var cnt = this.ulElement.children.length - 1;\n    var className = [];\n    var elem = this.ulElement.children[0].querySelector('.e-frame');\n    var selected = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n    var btn = this.dlgObj.btnObj[0];\n    btn.disabled = false;\n\n    if (cnt === selected) {\n      className = ['e-check'];\n    } else if (selected) {\n      className = ['e-stop'];\n    } else {\n      className = ['e-uncheck'];\n      btn.disabled = true;\n    }\n\n    btn.dataBind();\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    addClass([elem], className);\n  };\n\n  ColumnChooser.prototype.updateSelectAll = function (checked) {\n    var cBoxes = [].slice.call(this.ulElement.getElementsByClassName('e-frame'));\n\n    for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n      var cBox = cBoxes_1[_i];\n      removeAddCboxClasses(cBox, checked);\n    }\n  };\n\n  ColumnChooser.prototype.refreshCheckboxButton = function () {\n    var visibleCols = this.parent.getVisibleColumns();\n\n    for (var i = 0; i < visibleCols.length; i++) {\n      var columnUID = visibleCols[i].uid;\n\n      if (this.prevShowedCols.indexOf(columnUID) === -1) {\n        this.prevShowedCols.push(columnUID);\n      }\n    }\n\n    for (var i = 0; i < this.hideColumn.length; i++) {\n      var index = this.prevShowedCols.indexOf(this.hideColumn[i]);\n\n      if (index !== -1) {\n        this.prevShowedCols.splice(index, 1);\n      }\n    }\n\n    var selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n    var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n    btn.disabled = false;\n    var srchShowCols = [];\n    var searchData = [].slice.call(this.parent.element.getElementsByClassName('e-cc-chbox'));\n\n    for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n      var element = searchData[i];\n      var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n      srchShowCols.push(columnUID);\n    }\n\n    var hideCols = this.showColumn.filter(function (column) {\n      return srchShowCols.indexOf(column) !== -1;\n    });\n\n    if (selected === 0 && hideCols.length === 0) {\n      btn.disabled = true;\n    }\n\n    btn.dataBind();\n  };\n\n  ColumnChooser.prototype.refreshCheckboxList = function (gdCol) {\n    this.ulElement = this.parent.createElement('ul', {\n      className: 'e-ccul-ele e-cc'\n    });\n    var selectAllValue = this.l10n.getConstant('SelectAll');\n    var cclist = this.parent.createElement('li', {\n      className: 'e-cclist e-cc e-cc-selectall'\n    });\n    var selectAll = this.createCheckBox(selectAllValue, false, 'grid-selectAll');\n\n    if (gdCol.length) {\n      selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n      selectAll.querySelector('.e-frame').classList.add('e-selectall');\n      this.checkState(selectAll.querySelector('.e-icons'), true);\n      cclist.appendChild(selectAll);\n      this.ulElement.appendChild(cclist);\n    }\n\n    if (this.parent.cssClass) {\n      addClass([selectAll], [this.parent.cssClass]);\n    }\n\n    for (var i = 0; i < gdCol.length; i++) {\n      var columns = gdCol[i];\n      this.renderCheckbox(columns);\n    }\n\n    return this.ulElement;\n  };\n\n  ColumnChooser.prototype.refreshCheckboxState = function () {\n    this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n    this.columnChooserSearch('');\n    var gridObject = this.parent;\n    var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n\n    for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n      var element = currentCheckBoxColls[i];\n      var columnUID = void 0;\n\n      if (this.parent.childGrid || this.parent.detailTemplate) {\n        columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[i], 'e-ccheck').getAttribute('uid');\n      } else {\n        columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n      }\n\n      var column = gridObject.getColumnByUid(columnUID);\n      var uncheck = [].slice.call(element.parentElement.getElementsByClassName('e-uncheck'));\n\n      if (column.visible && !uncheck.length) {\n        element.checked = true;\n        this.checkState(element.parentElement.querySelector('.e-icons'), true);\n      } else {\n        element.checked = false;\n        this.checkState(element.parentElement.querySelector('.e-icons'), false);\n      }\n    }\n  };\n\n  ColumnChooser.prototype.checkState = function (element, state) {\n    if (state) {\n      classList(element, ['e-check'], ['e-uncheck']);\n    } else {\n      classList(element, ['e-uncheck'], ['e-check']);\n    }\n  };\n\n  ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n    var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n    cbox.querySelector('.e-label').innerHTML = label;\n    return createCboxWithWrap(uid, cbox, 'e-ccheck');\n  };\n\n  ColumnChooser.prototype.renderCheckbox = function (column) {\n    var cclist;\n    var hideColState;\n    var showColState;\n\n    if (column.showInColumnChooser) {\n      cclist = this.parent.createElement('li', {\n        className: 'e-cclist e-cc',\n        styles: 'list-style:None',\n        id: 'e-ccli_' + column.uid\n      });\n      hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n      showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n      var cccheckboxlist = this.createCheckBox(column.headerText, column.visible && !hideColState || showColState, column.uid);\n      cclist.appendChild(cccheckboxlist);\n\n      if (this.parent.cssClass) {\n        addClass([cccheckboxlist], [this.parent.cssClass]);\n      }\n\n      this.ulElement.appendChild(cclist);\n    }\n\n    if (this.isInitialOpen) {\n      this.updateIntermediateBtn();\n    }\n  };\n\n  ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n    this.addcancelIcon();\n    this.searchValue = e.target.value;\n    this.stopTimer();\n    this.startTimer(e);\n  };\n\n  ColumnChooser.prototype.startTimer = function (e) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var proxy = this;\n    var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n    this.timer = window.setInterval(function () {\n      proxy.columnChooserSearch(proxy.searchValue);\n    }, interval);\n  };\n\n  ColumnChooser.prototype.stopTimer = function () {\n    window.clearInterval(this.timer);\n  };\n\n  ColumnChooser.prototype.addcancelIcon = function () {\n    this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n  };\n\n  ColumnChooser.prototype.removeCancelIcon = function () {\n    this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n  };\n\n  ColumnChooser.prototype.mOpenDlg = function () {\n    if (Browser.isDevice) {\n      this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n      this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n    }\n  }; // internally use\n\n\n  ColumnChooser.prototype.getModuleName = function () {\n    return 'columnChooser';\n  };\n\n  ColumnChooser.prototype.hideOpenedDialog = function () {\n    var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n      return dlgEle.classList.contains('e-popup-open');\n    });\n\n    for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n      if (openCC[i].classList.contains('e-dialog') || this.parent.element.id + '_ccdlg' !== openCC[i].id) {\n        openCC[i].ej2_instances[0].hide();\n      }\n    }\n  };\n\n  ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n    var args1 = {\n      requestType: 'beforeOpenColumnChooser',\n      element: this.parent.element,\n      columns: this.getColumns(),\n      cancel: false,\n      searchOperator: this.parent.columnChooserSettings.operator\n    };\n    this.parent.trigger(events.beforeOpenColumnChooser, args1);\n    this.searchOperator = args1.searchOperator;\n    return args1;\n  };\n\n  return ColumnChooser;\n}();\n\nexport { ColumnChooser };","map":{"version":3,"names":["classList","addClass","removeClass","isNullOrUndefined","Browser","Query","DataManager","EventHandler","closest","events","Dialog","calculateRelativeBasedPosition","createCboxWithWrap","toogleCheckbox","parentsUntil","removeAddCboxClasses","createCheckBox","SearchBox","literals","ColumnChooser","parent","serviceLocator","showColumn","hideColumn","changedColumns","unchangedColumns","isDlgOpen","initialOpenDlg","stateChangeColumns","changedStateColumns","isInitialOpen","isCustomizeOpenCC","searchOperator","prevShowedCols","hideDialogFunction","hideDialog","bind","addEventListener","cBoxTrue","createElement","checked","label","cBoxFalse","insertBefore","className","attrs","type","firstChild","querySelector","add","enableRtl","cssClass","prototype","destroy","gridElement","element","gridHeader","gridContent","removeEventListener","unWireEvents","dlgObj","isDestroyed","rtlUpdate","slice","call","innerDiv","getElementsByClassName","document","clickHandler","on","uiUpdate","enableAfterRenderEle","initialEnd","render","dataBound","rtlUpdated","keyPressed","keyUpHandler","resetColumns","onResetColumns","remove","off","l10n","getService","renderDlgContent","getShowHideService","e","targetElement","target","contains","visible","parentElement","value","columnChooserSearch","removeCancelIcon","refreshCheckboxButton","hide","clearActions","refreshCheckboxState","detailTemplate","childGrid","targetdlg","renderColumnChooser","x","y","hideOpenedDialog","args","beforeOpenColumnChooserEvent","cancel","dataBind","style","maxHeight","elementVisible","display","isSticky","getHeaderContent","toolbarItem","newpos","getBoundingClientRect","top","height","dlgWidth","width","isDevice","body","position","X","Y","refreshPosition","open","mOpenDlg","left","offsetLeft","clientWidth","show","notify","columnChooserOpened","dialog","addcancelIcon","openColumnChooser","content","renderChooserList","updateIntermediateBtn","beforeOpen","customDialogOpen","beforeClose","customDialogClose","module","getModuleName","enable","action","searchElement","columnChooserManualSearch","getColumns","columns","filter","column","showInColumnChooser","field","undefined","dlgDiv","id","setAttribute","getConstant","appendChild","header","showCloseIcon","closeOnEscape","locale","getElementById","buttons","click","confirmDlgBtnClick","buttonModel","isPrimary","clearBtnClick","animationSettings","effect","isStringTemplate","appendTo","wireEvents","mainDiv","searchDiv","ccsearchele","placeholder","ccsearchicon","title","conDiv","searchBoxObj","innerDivContent","refreshCheckboxList","length","changedColumnState","uncheckedLength","ulElement","querySelectorAll","columnStateChange","setVisible","tooltipDestroy","getCurrentViewRecords","emptyRowCell","getVisibleColumns","toString","requestType","resetColumnState","index","colUid","currentCol","getColumnByUid","push","stateColumns","state","columnChooserCancelBtnClick","checkstatecolumn","isChecked","coluid","selectAll","indexOf","splice","searchVal","clearSearch","fltrCol","okButton","buttonEle","selectedCbox","ej2_instances","executeLocal","where","columnChooserSettings","ignoreAccent","innerHTML","disabled","nMatchele","flag","stopTimer","checkBoxClickHandler","searchBox","wireEvent","unWireEvent","checkstate","elem","updateSelectAll","focus","columnUid","getAttribute","i","uid","cnt","children","selected","btn","btnObj","cBoxes","_i","cBoxes_1","cBox","visibleCols","columnUID","srchShowCols","searchData","itemsLen","hideCols","gdCol","selectAllValue","cclist","firstElementChild","checkState","renderCheckbox","gridObject","currentCheckBoxColls","itemLen","uncheck","cbox","cloneNode","hideColState","showColState","styles","cccheckboxlist","headerText","searchValue","startTimer","proxy","interval","keyCode","timer","window","setInterval","clearInterval","openCC","dlgEle","dlgLen","args1","operator","trigger","beforeOpenColumnChooser"],"sources":["/home/morgan/Desktop/Projets/ENT4/Jwt-Auth-pdf/react-jwt-auth/react-jwt-auth/node_modules/@syncfusion/ej2-grids/src/grid/actions/column-chooser.js"],"sourcesContent":["import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\nimport * as literals from '../base/string-literals';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n        this.isDlgOpen = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.searchOperator = 'startswith';\n        this.prevShowedCols = [];\n        this.hideDialogFunction = this.hideDialog.bind(this);\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, true, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n        if (this.parent.cssClass) {\n            addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (this.parent.enableRtl) {\n            addClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n        }\n        else {\n            removeClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialogFunction);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.resetColumns, this.onResetColumns, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(document, 'click', this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.off(events.resetColumns, this.onResetColumns);\n        this.parent.removeEventListener(events.dataBound, this.hideDialogFunction);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                    this.refreshCheckboxButton();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.targetdlg = e.target;\n            }\n        }\n        if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     *\n     * @param {number} x - specifies the position x\n     * @param {number} y - specifies the position y\n     * @param {Element} target - specifies the target\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n            this.hideOpenedDialog();\n        }\n        if (!this.dlgObj.visible) {\n            var args = this.beforeOpenColumnChooserEvent();\n            if (args.cancel) {\n                return;\n            }\n            if (target) {\n                this.targetdlg = target;\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var isSticky = this.parent.getHeaderContent().classList.contains('e-sticky');\n            var toolbarItem = closest(target, '.e-toolbar-item');\n            var newpos = void 0;\n            if (isSticky) {\n                newpos = toolbarItem.getBoundingClientRect();\n                this.dlgObj.element.classList.add('e-sticky');\n            }\n            else {\n                this.dlgObj.element.classList.remove('e-sticky');\n                newpos = calculateRelativeBasedPosition(toolbarItem, this.dlgObj.element);\n            }\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n            this.parent.notify(events.columnChooserOpened, { dialog: this.dlgObj });\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n            this.clearActions();\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     *\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        var args = this.beforeOpenColumnChooserEvent();\n        if (args.cancel) {\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n            this.updateIntermediateBtn();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.keyUpHandler = function (e) {\n        if (e.action === 'escape') {\n            this.hideDialog();\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = this.parent.getColumns().filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.dlgDiv.setAttribute('aria-label', this.l10n.getConstant('ColumnChooserDialogARIA'));\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: this.parent.cssClass ? 'e-cc e-cc_okbtn' + ' ' + this.parent.cssClass : 'e-cc e-cc_okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this),\n                    buttonModel: { cssClass: this.parent.cssClass ?\n                            'e-flat e-cc e-cc-cnbtn' + ' ' + this.parent.cssClass : 'e-flat e-cc e-cc-cnbtn',\n                        content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: this.parent.cssClass ? 'e-cc' + ' ' + this.parent.cssClass : 'e-cc',\n            animationSettings: { effect: 'None' }\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search'), cssClass: this.parent.cssClass }\n        });\n        var ccsearchicon = this.parent.createElement('span', {\n            className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') }\n        });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele);\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.changedColumns = (this.changedColumns.length > 0) ? this.changedColumns : this.unchangedColumns;\n        this.changedColumnState(this.changedColumns);\n        var uncheckedLength = this.ulElement.querySelector('.e-uncheck') &&\n            this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n        if (!isNullOrUndefined(args)) {\n            if (uncheckedLength < this.parent.getColumns().length) {\n                if (this.hideColumn.length) {\n                    this.columnStateChange(this.hideColumn, false);\n                }\n                if (this.showColumn.length) {\n                    this.columnStateChange(this.showColumn, true);\n                }\n                this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n                this.clearActions();\n                this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n                if (this.parent.getCurrentViewRecords().length === 0) {\n                    var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n                    emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n                }\n            }\n        }\n    };\n    ColumnChooser.prototype.onResetColumns = function (e) {\n        if (e.requestType === 'columnstate') {\n            this.resetColumnState();\n            return;\n        }\n    };\n    ColumnChooser.prototype.resetColumnState = function () {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.hideDialog();\n    };\n    ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n        for (var index = 0; index < changedColumns.length; index++) {\n            var colUid = changedColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            this.changedStateColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            if (currentCol.type !== 'checkbox') {\n                currentCol.visible = state;\n            }\n            this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.resetColumnState();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.clearBtnClick = function () {\n        this.clearActions();\n        this.parent.notify(events.columnChooserCancelBtnClick, { dialog: this.dlgObj });\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n        if (selectAll === void 0) { selectAll = false; }\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n        if (selectAll) {\n            if (!isChecked) {\n                this.changedColumns.push(coluid);\n            }\n            else {\n                this.unchangedColumns.push(coluid);\n            }\n        }\n        else if (this.changedColumns.indexOf(coluid) !== -1) {\n            this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n        }\n        else {\n            this.changedColumns.push(coluid);\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        var okButton;\n        var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n        var selectedCbox = this.ulElement.querySelector('.e-check') &&\n            this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        this.isInitialOpen = true;\n        if (buttonEle) {\n            okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n        }\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', this.searchOperator, searchVal, true, this.parent.columnChooserSettings.ignoreAccent));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol));\n            if (!clearSearch) {\n                this.addcancelIcon();\n                this.refreshCheckboxButton();\n            }\n            else {\n                if (okButton && selectedCbox) {\n                    okButton.disabled = false;\n                }\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n            if (okButton) {\n                okButton.disabled = true;\n            }\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n        this.searchBoxObj.unWireEvent();\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateSelectAll(!elem.querySelector('.e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            this.updateIntermediateBtn();\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            var column = this.parent.getColumns();\n            if (columnUid === 'grid-selectAll') {\n                this.changedColumns = [];\n                this.unchangedColumns = [];\n                for (var i = 0; i < column.length; i++) {\n                    if (column[i].showInColumnChooser) {\n                        this.checkstatecolumn(checkstate, column[i].uid, true);\n                    }\n                }\n            }\n            else {\n                this.checkstatecolumn(checkstate, columnUid);\n            }\n            this.refreshCheckboxButton();\n        }\n    };\n    ColumnChooser.prototype.updateIntermediateBtn = function () {\n        var cnt = this.ulElement.children.length - 1;\n        var className = [];\n        var elem = this.ulElement.children[0].querySelector('.e-frame');\n        var selected = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dlgObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    ColumnChooser.prototype.updateSelectAll = function (checked) {\n        var cBoxes = [].slice.call(this.ulElement.getElementsByClassName('e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function () {\n        var visibleCols = this.parent.getVisibleColumns();\n        for (var i = 0; i < visibleCols.length; i++) {\n            var columnUID = visibleCols[i].uid;\n            if (this.prevShowedCols.indexOf(columnUID) === -1) {\n                this.prevShowedCols.push(columnUID);\n            }\n        }\n        for (var i = 0; i < this.hideColumn.length; i++) {\n            var index = this.prevShowedCols.indexOf(this.hideColumn[i]);\n            if (index !== -1) {\n                this.prevShowedCols.splice(index, 1);\n            }\n        }\n        var selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n        var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        var srchShowCols = [];\n        var searchData = [].slice.call(this.parent.element.getElementsByClassName('e-cc-chbox'));\n        for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n            var element = searchData[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            srchShowCols.push(columnUID);\n        }\n        var hideCols = this.showColumn.filter(function (column) { return srchShowCols.indexOf(column) !== -1; });\n        if (selected === 0 && hideCols.length === 0) {\n            btn.disabled = true;\n        }\n        btn.dataBind();\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        var selectAllValue = this.l10n.getConstant('SelectAll');\n        var cclist = this.parent.createElement('li', { className: 'e-cclist e-cc e-cc-selectall' });\n        var selectAll = this.createCheckBox(selectAllValue, false, 'grid-selectAll');\n        if (gdCol.length) {\n            selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            this.checkState(selectAll.querySelector('.e-icons'), true);\n            cclist.appendChild(selectAll);\n            this.ulElement.appendChild(cclist);\n        }\n        if (this.parent.cssClass) {\n            addClass([selectAll], [this.parent.cssClass]);\n        }\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        var gridObject = this.parent;\n        var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n        for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n            var element = currentCheckBoxColls[i];\n            var columnUID = void 0;\n            if (this.parent.childGrid || this.parent.detailTemplate) {\n                columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[i], 'e-ccheck').getAttribute('uid');\n            }\n            else {\n                columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            }\n            var column = gridObject.getColumnByUid(columnUID);\n            var uncheck = [].slice.call(element.parentElement.getElementsByClassName('e-uncheck'));\n            if (column.visible && !uncheck.length) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        if (state) {\n            classList(element, ['e-check'], ['e-uncheck']);\n        }\n        else {\n            classList(element, ['e-uncheck'], ['e-check']);\n        }\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        if (column.showInColumnChooser) {\n            cclist = this.parent.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            if (this.parent.cssClass) {\n                addClass([cccheckboxlist], [this.parent.cssClass]);\n            }\n            this.ulElement.appendChild(cclist);\n        }\n        if (this.isInitialOpen) {\n            this.updateIntermediateBtn();\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    ColumnChooser.prototype.hideOpenedDialog = function () {\n        var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n            return dlgEle.classList.contains('e-popup-open');\n        });\n        for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n            if (openCC[i].classList.contains('e-dialog') || this.parent.element.id + '_ccdlg' !== openCC[i].id) {\n                openCC[i].ej2_instances[0].hide();\n            }\n        }\n    };\n    ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n        var args1 = {\n            requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n            columns: this.getColumns(), cancel: false,\n            searchOperator: this.parent.columnChooserSettings.operator\n        };\n        this.parent.trigger(events.beforeOpenColumnChooser, args1);\n        this.searchOperator = args1.searchOperator;\n        return args1;\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}